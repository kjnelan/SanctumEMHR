import{r as t,j as e,P as B,E as U,S as W,D as Z,F as h,R as J,z as he,B as ue}from"./index-CtrGWXat.js";import{M as q,G as K,a as V,E as pe}from"./ErrorInline-BSH7uwlG.js";import me from"./ICD10Import-D_ojSrUq.js";import"./index-BHHrUtzw.js";function ge(){const[p,N]=t.useState([]),[n,k]=t.useState([]),[T,P]=t.useState(!0),[C,b]=t.useState(""),[c,v]=t.useState(""),[A,j]=t.useState("all"),[r,i]=t.useState(!1),[u,d]=t.useState(!1),[l,g]=t.useState({id:null,name:"",description:"",color:"#3B82F6",default_duration:50,is_billable:1,is_active:1,category_type:"client",requires_cpt_selection:0,blocks_availability:0,linked_cpt_codes:[],sort_order:0}),[E,M]=t.useState(""),[R,$]=t.useState(!1);t.useEffect(()=>{y(),S()},[]);const y=async()=>{try{P(!0);const s=await fetch("/custom/api/calendar_categories.php",{credentials:"include"});if(!s.ok)throw new Error("Failed to fetch calendar categories");const a=await s.json();N(a.categories||[])}catch(s){b(s.message)}finally{P(!1)}},S=async()=>{try{const s=await fetch("/custom/api/cpt_codes.php",{credentials:"include"});if(!s.ok)throw new Error("Failed to fetch CPT codes");const a=await s.json();k(a.cpt_codes?.filter(o=>o.is_active)||[])}catch(s){console.error("Failed to load CPT codes:",s)}},m=()=>{g({id:null,name:"",description:"",color:"#3B82F6",default_duration:50,is_billable:1,is_active:1,category_type:"client",requires_cpt_selection:0,blocks_availability:0,linked_cpt_codes:[],sort_order:0}),M(""),i(!0)},z=async s=>{try{const a=await fetch(`/custom/api/calendar_categories.php?action=get&id=${s.id}`,{credentials:"include"});if(!a.ok)throw new Error("Failed to fetch category details");const L=(await a.json()).category;g({id:L.id,name:L.name,description:L.description||"",color:L.color||"#3B82F6",default_duration:L.default_duration||50,is_billable:L.is_billable,is_active:L.is_active,category_type:L.category_type||"client",requires_cpt_selection:L.requires_cpt_selection||0,blocks_availability:L.blocks_availability||0,linked_cpt_codes:L.linked_cpt_codes||[],sort_order:L.sort_order||0}),M(""),d(!0)}catch(a){b(a.message)}},F=async()=>{if(M(""),!l.name.trim()){M("Category name is required");return}try{$(!0);const s=l.id?"update":"create",a=await fetch("/custom/api/calendar_categories.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:s,...l})}),o=await a.json();if(!a.ok||!o.success)throw new Error(o.error||"Failed to save category");await y(),i(!1),d(!1)}catch(s){M(s.message)}finally{$(!1)}},w=async s=>{if(confirm("Are you sure you want to delete this category? This cannot be undone."))try{const a=await fetch("/custom/api/calendar_categories.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete",id:s})}),o=await a.json();if(!a.ok||!o.success)throw new Error(o.error||"Failed to delete category");await y()}catch(a){b(a.message)}},f=async s=>{try{const a=await fetch("/custom/api/calendar_categories.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",id:s.id,is_active:s.is_active?0:1})}),o=await a.json();if(!a.ok||!o.success)throw new Error(o.error||"Failed to update status");await y()}catch(a){b(a.message)}},x=s=>{g(a=>({...a,linked_cpt_codes:a.linked_cpt_codes.includes(s)?a.linked_cpt_codes.filter(o=>o!==s):[...a.linked_cpt_codes,s]}))},I=p.filter(s=>{const a=s.name.toLowerCase().includes(c.toLowerCase())||(s.description||"").toLowerCase().includes(c.toLowerCase()),o=A==="all"||s.category_type===A;return a&&o});return T?e.jsx("div",{className:"text-center text-gray-600 py-8",children:"Loading calendar categories..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Calendar Categories"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage appointment types and link them to billing codes"})]}),e.jsx(B,{onClick:m,children:"+ Add Category"})]}),C&&e.jsx(U,{children:C}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search categories...",value:c,onChange:s=>v(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsxs("select",{value:A,onChange:s=>j(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"client",children:"Client Appointments"}),e.jsx("option",{value:"clinic",children:"Clinic/Internal"}),e.jsx("option",{value:"holiday",children:"Holidays/Closures"})]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Duration"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Billable"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"CPT Required"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:I.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:"No categories found"})}):I.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[s.category_type!=="client"&&e.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300 flex-shrink-0",style:{backgroundColor:s.color||"#3B82F6"},title:s.color||"Default blue"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:s.name}),s.description&&e.jsx("div",{className:"text-xs text-gray-500",children:s.description})]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${s.category_type==="client"?"bg-blue-100 text-blue-700":s.category_type==="clinic"?"bg-purple-100 text-purple-700":"bg-orange-100 text-orange-700"}`,children:s.category_type==="client"?"Client":s.category_type==="clinic"?"Clinic":"Holiday"})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700 text-center",children:[s.default_duration," min"]}),e.jsx("td",{className:"px-4 py-3 text-center",children:s.is_billable?e.jsx("span",{className:"text-green-600",children:"✓"}):e.jsx("span",{className:"text-gray-400",children:"—"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:s.requires_cpt_selection?e.jsx("span",{className:"text-green-600",children:"✓"}):e.jsx("span",{className:"text-gray-400",children:"—"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>f(s),className:`px-3 py-1 text-xs rounded-full ${s.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:s.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(W,{onClick:()=>z(s),children:"Edit"}),e.jsx(Z,{onClick:()=>w(s.id),children:"Delete"})]})})]},s.id))})]})}),e.jsx(q,{isOpen:r||u,onClose:()=>{i(!1),d(!1)},title:l.id?"Edit Category":"Add Category",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[E&&e.jsx(U,{children:E}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(h,{children:["Category Name ",e.jsx(J,{})]}),e.jsx("input",{type:"text",value:l.name,onChange:s=>g({...l,name:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Office Visit"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Category Type"}),e.jsxs("select",{value:l.category_type,onChange:s=>g({...l,category_type:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"client",children:"Client Appointment"}),e.jsx("option",{value:"clinic",children:"Clinic/Internal"}),e.jsx("option",{value:"holiday",children:"Holiday/Closure"})]})]})]}),l.category_type!=="client"&&e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx(h,{children:"Category Color"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",value:l.color,onChange:s=>g({...l,color:s.target.value}),className:"w-12 h-10 rounded border border-gray-300 cursor-pointer"}),e.jsx("input",{type:"text",value:l.color,onChange:s=>g({...l,color:s.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono",placeholder:"#3B82F6"}),e.jsx("div",{className:"w-10 h-10 rounded-lg border border-gray-300",style:{backgroundColor:l.color},title:"Color preview"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used for availability blocks on calendars"})]})}),e.jsxs("div",{children:[e.jsx(h,{children:"Description"}),e.jsx("textarea",{value:l.description,onChange:s=>g({...l,description:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"2",placeholder:"Brief description of this category"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Default Duration (min)"}),e.jsx("input",{type:"number",value:l.default_duration,onChange:s=>g({...l,default_duration:parseInt(s.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Sort Order"}),e.jsx("input",{type:"number",value:l.sort_order,onChange:s=>g({...l,sort_order:parseInt(s.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Settings"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.is_billable===1,onChange:s=>g({...l,is_billable:s.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Billable"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.requires_cpt_selection===1,onChange:s=>g({...l,requires_cpt_selection:s.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Requires CPT Code Selection"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.blocks_availability===1,onChange:s=>g({...l,blocks_availability:s.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Blocks Provider Availability"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.is_active===1,onChange:s=>g({...l,is_active:s.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Active"})]})]})]}),l.requires_cpt_selection===1&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Linked CPT Codes"}),e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 max-h-64 overflow-y-auto",children:n.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No active CPT codes available"}):e.jsx("div",{className:"space-y-2",children:n.map(s=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.linked_cpt_codes.includes(s.id),onChange:()=>x(s.id),className:"mr-2 checkbox"}),e.jsxs("span",{className:"checkbox-label",children:[e.jsx("span",{className:"font-mono font-semibold",children:s.code})," - ",s.description]})]},s.id))})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Selected CPT codes will be available when scheduling appointments with this category"})]}),e.jsxs(q.Footer,{children:[e.jsx(W,{onClick:()=>{i(!1),d(!1)},disabled:R,children:"Cancel"}),e.jsx(B,{onClick:F,disabled:R,children:R?"Saving...":"Save Category"})]})]})})]})}function fe(){const[p,N]=t.useState("general");return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"glass-card p-6 mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Calendar Settings"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Configure calendar display, categories, and appointment options"})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(V,{active:p==="general",onClick:()=>N("general"),children:"General Settings"}),e.jsx(V,{active:p==="categories",onClick:()=>N("categories"),children:"Categories"}),e.jsx(V,{active:p==="statuses",onClick:()=>N("statuses"),children:"Appointment Statuses"}),e.jsx(V,{active:p==="reasons",onClick:()=>N("reasons"),children:"Cancellation Reasons"})]}),e.jsxs("div",{className:"glass-card p-6",children:[p==="general"&&e.jsx(ye,{}),p==="categories"&&e.jsx(ge,{}),p==="statuses"&&e.jsx(re,{listId:"appointment_statuses",title:"Appointment Statuses",description:"Define the status options for appointments",itemLabel:"Status"}),p==="reasons"&&e.jsx(re,{listId:"cancellation_reasons",title:"Cancellation Reasons",description:"Define reasons for appointment cancellations (including no-shows)",itemLabel:"Reason"})]})]})}function ye(){const[p,N]=t.useState({startHour:8,endHour:17,interval:15,viewType:"week",eventColor:"1",providersSeeAll:!0}),[n,k]=t.useState(!0),[T,P]=t.useState(!1),[C,b]=t.useState(null);t.useEffect(()=>{c()},[]);const c=async()=>{k(!0);try{const j=await he();j.settings&&N({startHour:j.settings.startHour||8,endHour:j.settings.endHour||17,interval:j.settings.interval||15,viewType:j.settings.viewType||"week",eventColor:j.settings.eventColor||"1",providersSeeAll:j.settings.providersSeeAll!==void 0?j.settings.providersSeeAll:!0})}catch(j){console.error("Failed to load calendar settings:",j),b({type:"error",text:"Failed to load settings"})}finally{k(!1)}},v=async()=>{P(!0),b(null);try{await ue(p),b({type:"success",text:"Settings saved successfully!"})}catch(j){console.error("Failed to save calendar settings:",j),b({type:"error",text:"Failed to save settings"})}finally{P(!1)}},A=(j,r)=>{N(i=>({...i,[j]:r}))};return n?e.jsx("div",{className:"text-center text-gray-700 py-8",children:"Loading settings..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"General Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure calendar display and behavior"})]}),C&&e.jsx("div",{className:`mb-6 px-4 py-3 rounded-lg ${C.type==="success"?"bg-green-100/60 border-green-300/50 text-green-700":"bg-red-100/60 border-red-300/50 text-red-700"} border`,children:C.text}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Calendar Starting Hour"}),e.jsx("select",{value:p.startHour,onChange:j=>A("startHour",parseInt(j.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:Array.from({length:24},(j,r)=>e.jsx("option",{value:r,children:r===0?"12 AM":r<12?`${r} AM`:r===12?"12 PM":`${r-12} PM`},r))})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Calendar Ending Hour"}),e.jsx("select",{value:p.endHour,onChange:j=>A("endHour",parseInt(j.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:Array.from({length:24},(j,r)=>e.jsx("option",{value:r,children:r===0?"12 AM":r<12?`${r} AM`:r===12?"12 PM":`${r-12} PM`},r))})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Calendar Interval (minutes)"}),e.jsxs("select",{value:p.interval,onChange:j=>A("interval",parseInt(j.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:[e.jsx("option",{value:15,children:"15 minutes"}),e.jsx("option",{value:30,children:"30 minutes"}),e.jsx("option",{value:60,children:"60 minutes"})]})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Default Calendar View"}),e.jsxs("select",{value:p.viewType,onChange:j=>A("viewType",j.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:[e.jsx("option",{value:"day",children:"Day"}),e.jsx("option",{value:"week",children:"Week"}),e.jsx("option",{value:"month",children:"Month"})]})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Appointment/Event Color"}),e.jsxs("select",{value:p.eventColor,onChange:j=>A("eventColor",j.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:[e.jsx("option",{value:"1",children:"Category Color Schema"}),e.jsx("option",{value:"2",children:"Facility Color Schema"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:p.providersSeeAll,onChange:j=>A("providersSeeAll",j.target.checked),className:"checkbox"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Providers See Entire Calendar"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-8",children:"Allow providers to see all appointments, not just their own"})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsx(B,{onClick:v,disabled:T,children:T?"Saving...":"Save Settings"})})]})}function re({listId:p,title:N,description:n,itemLabel:k}){const[T,P]=t.useState([]),[C,b]=t.useState(!0),[c,v]=t.useState(""),[A,j]=t.useState(!1),[r,i]=t.useState(!1),[u,d]=t.useState({option_id:"",title:"",notes:"",is_active:1,is_default:0,sort_order:0}),[l,g]=t.useState(""),[E,M]=t.useState(!1);t.useEffect(()=>{R()},[p]);const R=async()=>{try{b(!0),v("");const w=await fetch(`/custom/api/settings_lists.php?list_id=${p}`,{credentials:"include"});if(!w.ok)throw new Error(`Failed to fetch ${N.toLowerCase()}`);const f=await w.json();P(f.items||[])}catch(w){v(w.message)}finally{b(!1)}},$=()=>{d({option_id:"",title:"",notes:"",is_active:1,is_default:0,sort_order:T.length+1}),g(""),j(!0)},y=w=>{d({option_id:w.option_id,title:w.title,notes:w.notes||"",is_active:w.is_active,is_default:w.is_default,sort_order:w.sort_order}),g(""),i(!0)},S=async()=>{if(!u.option_id?.trim()){g(`${k} ID is required`);return}if(!u.title?.trim()){g(`${k} name is required`);return}try{M(!0),g("");const w=r?"PUT":"POST",f=await fetch(`/custom/api/settings_lists.php?list_id=${p}`,{method:w,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...u,list_id:p})});if(!f.ok){const x=await f.json();throw new Error(x.error||`Failed to ${r?"update":"create"} ${k.toLowerCase()}`)}await R(),j(!1),i(!1)}catch(w){g(w.message)}finally{M(!1)}},m=async w=>{if(confirm(`Are you sure you want to delete this ${k.toLowerCase()}?`))try{if(!(await fetch(`/custom/api/settings_lists.php?list_id=${p}&option_id=${w}`,{method:"DELETE",credentials:"include"})).ok)throw new Error(`Failed to delete ${k.toLowerCase()}`);await R()}catch(f){alert("Error: "+f.message)}},z=async w=>{try{if(!(await fetch(`/custom/api/settings_lists.php?list_id=${p}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({list_id:p,option_id:w.option_id,is_active:w.is_active?0:1})})).ok)throw new Error("Failed to update status");await R()}catch(f){alert("Error: "+f.message)}},F=()=>{j(!1),i(!1),g("")};return C?e.jsxs("div",{className:"text-center text-gray-700 py-8",children:["Loading ",N.toLowerCase(),"..."]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:N}),e.jsx("p",{className:"text-gray-600 mt-1",children:n})]}),e.jsxs(B,{onClick:$,children:["+ Add ",k]})]}),c&&e.jsx(U,{children:c}),T.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("p",{className:"text-gray-600 text-lg",children:["No ",N.toLowerCase()," configured"]}),e.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:['Click "+ Add ',k,'" to create your first entry']})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Order"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:T.map(w=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-mono font-semibold text-gray-900",children:w.option_id}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[w.title,w.is_default===1&&e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-700",children:"Default"})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 max-w-xs truncate",children:w.notes||"—"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 text-center",children:w.sort_order}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>z(w),className:`px-3 py-1 text-xs rounded-full ${w.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:w.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-4 py-3 text-center whitespace-nowrap",children:[e.jsx("button",{onClick:()=>y(w),className:"text-blue-600 hover:text-blue-800 mr-3",children:"Edit"}),e.jsx(Z,{onClick:()=>m(w.option_id),children:"Delete"})]})]},w.option_id))})]})}),e.jsx(q,{isOpen:A||r,onClose:F,title:r?`Edit ${k}`:`Add ${k}`,size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[l&&e.jsx(U,{children:l}),e.jsxs("div",{children:[e.jsxs(h,{children:[k," ID ",e.jsx(J,{})]}),e.jsx("input",{type:"text",value:u.option_id,onChange:w=>d({...u,option_id:w.target.value.toLowerCase().replace(/\s+/g,"_")}),className:"input-field",placeholder:"e.g., scheduled",disabled:r}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unique identifier (lowercase, no spaces)"})]}),e.jsxs("div",{children:[e.jsxs(h,{children:[k," Name ",e.jsx(J,{})]}),e.jsx("input",{type:"text",value:u.title,onChange:w=>d({...u,title:w.target.value}),className:"input-field",placeholder:"e.g., Scheduled"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Description"}),e.jsx("textarea",{value:u.notes,onChange:w=>d({...u,notes:w.target.value}),className:"input-field",rows:2,placeholder:"Optional description..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Sort Order"}),e.jsx("input",{type:"number",value:u.sort_order,onChange:w=>d({...u,sort_order:parseInt(w.target.value)||0}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Options"}),e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.is_active===1,onChange:w=>d({...u,is_active:w.target.checked?1:0}),className:"checkbox mr-2"}),e.jsx("span",{className:"checkbox-label",children:"Active"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.is_default===1,onChange:w=>d({...u,is_default:w.target.checked?1:0}),className:"checkbox mr-2"}),e.jsx("span",{className:"checkbox-label",children:"Default"})]})]})]})]}),e.jsxs(q.Footer,{children:[e.jsx(W,{onClick:F,disabled:E,children:"Cancel"}),e.jsx(B,{onClick:S,disabled:E,children:E?"Saving...":r?"Save Changes":`Add ${k}`})]})]})})]})}function je(){const[p,N]=t.useState([]),[n,k]=t.useState(!0),[T,P]=t.useState(null),[C,b]=t.useState(!1),[c,v]=t.useState(!1),[A,j]=t.useState(!1),[r,i]=t.useState(null),[u,d]=t.useState({name:"",parent_id:null}),[l,g]=t.useState(!1),[E,M]=t.useState(null);t.useEffect(()=>{R()},[]);const R=async()=>{try{k(!0);const s=await fetch("/custom/api/document_categories.php",{credentials:"include"});if(!s.ok)throw new Error("Failed to fetch categories");const a=await s.json();N(a.categories||[]),P(null)}catch(s){console.error("Error fetching categories:",s),P(s.message)}finally{k(!1)}},$=s=>{const a=[],o={};return s.forEach(L=>{o[L.id]={...L,children:[]}}),s.forEach(L=>{L.parent&&o[L.parent]?o[L.parent].children.push(o[L.id]):a.push(o[L.id])}),a},y=(s,a=0)=>{let o=[];return s.forEach(L=>{o.push({...L,level:a}),L.children&&L.children.length>0&&(o=o.concat(y(L.children,a+1)))}),o},S=()=>{if(!r)return p;const s=new Set([r.id]),a=$(p),o=H=>{H.children&&H.children.forEach(Y=>{s.add(Y.id),o(Y)})},L=H=>{H.forEach(Y=>{Y.id===r.id&&o(Y),Y.children&&L(Y.children)})};return L(a),p.filter(H=>!s.has(H.id))},m=()=>{d({name:"",parent_id:null}),M(null),b(!0)},z=s=>{i(s),d({name:s.name,parent_id:s.parent?parseInt(s.parent):null}),M(null),v(!0)},F=s=>{i(s),M(null),j(!0)},w=async()=>{if(!u.name||u.name.trim()===""){M("Category name is required");return}try{g(!0),M(null);const s=await fetch("/custom/api/document_categories.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u.name.trim(),parent_id:u.parent_id||null})}),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to create category");await R(),b(!1)}catch(s){console.error("Error creating category:",s),M(s.message)}finally{g(!1)}},f=async()=>{if(!u.name||u.name.trim()===""){M("Category name is required");return}try{g(!0),M(null);const s=await fetch("/custom/api/document_categories.php",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r.id,name:u.name.trim(),parent_id:u.parent_id||null})}),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to update category");await R(),v(!1)}catch(s){console.error("Error updating category:",s),M(s.message)}finally{g(!1)}},x=async()=>{try{g(!0),M(null);const s=await fetch(`/custom/api/document_categories.php?id=${r.id}`,{method:"DELETE",credentials:"include"}),a=await s.json();if(!s.ok)throw new Error(a.error||"Failed to delete category");await R(),j(!1)}catch(s){console.error("Error deleting category:",s),M(s.message)}finally{g(!1)}},I=()=>{b(!1),v(!1),j(!1),i(null),d({name:"",parent_id:null}),M(null)};return n?e.jsx("div",{className:"glass-card p-8",children:e.jsx("div",{className:"text-center text-gray-700",children:"Loading categories..."})}):T?e.jsxs("div",{className:"glass-card p-8",children:[e.jsxs(pe,{children:["Error: ",T]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(B,{onClick:R,children:"Retry"})})]}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Document Categories"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage categories for organizing client documents"})]}),e.jsx(B,{onClick:m,children:"+ Add Category"})]}),p.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:'No categories defined. Click "Add Category" to create one.'}):e.jsx("div",{className:"space-y-2",children:y($(p)).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",style:{marginLeft:`${s.level*2}rem`},children:[e.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[s.level>0&&e.jsx("span",{className:"text-gray-400",children:"└─"}),e.jsx("div",{className:"font-medium text-gray-900",children:s.name}),s.children&&s.children.length>0&&e.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:[s.children.length," ",s.children.length===1?"subcategory":"subcategories"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z(s),className:"px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"Edit"}),e.jsx(Z,{onClick:()=>F(s),children:" Delete "})]})]},s.id))}),e.jsx(q,{isOpen:C,onClose:I,title:"Add Category",size:"sm",children:e.jsxs("form",{onSubmit:s=>{s.preventDefault(),w()},children:[E&&e.jsx(U,{children:E}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(h,{children:["Category Name ",e.jsx(J,{})]}),e.jsx("input",{type:"text",value:u.name,onChange:s=>d({...u,name:s.target.value}),placeholder:"e.g., Consent Forms, Insurance Documents",className:"input-field",autoFocus:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(h,{children:"Parent Category (Optional)"}),e.jsxs("select",{value:u.parent_id||"",onChange:s=>{const a=s.target.value;d({...u,parent_id:a?parseInt(a,10):null})},className:"input-field",children:[e.jsx("option",{value:"",children:"None (Top Level)"}),p.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a parent to create a subcategory"})]}),e.jsxs(q.Footer,{children:[e.jsx(W,{type:"button",onClick:I,disabled:l,children:"Cancel"}),e.jsx(B,{type:"submit",disabled:l,children:l?"Creating...":"Create Category"})]})]})}),e.jsx(q,{isOpen:c,onClose:I,title:"Edit Category",size:"sm",children:e.jsxs("form",{onSubmit:s=>{s.preventDefault(),f()},children:[E&&e.jsx(U,{children:E}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(h,{children:["Category Name ",e.jsx(J,{})]}),e.jsx("input",{type:"text",value:u.name,onChange:s=>d({...u,name:s.target.value}),className:"input-field",autoFocus:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(h,{children:"Parent Category (Optional)"}),e.jsxs("select",{value:u.parent_id||"",onChange:s=>{const a=s.target.value;d({...u,parent_id:a?parseInt(a,10):null})},className:"input-field",children:[e.jsx("option",{value:"",children:"None (Top Level)"}),S().map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a parent to make this a subcategory"})]}),e.jsxs(q.Footer,{children:[e.jsx(W,{type:"button",onClick:I,disabled:l,children:"Cancel"}),e.jsx(B,{type:"submit",disabled:l,children:l?"Saving...":"Save Changes"})]})]})}),e.jsx(q,{isOpen:A,onClose:I,title:"Delete Category",size:"sm",children:e.jsxs("form",{onSubmit:s=>{s.preventDefault(),x()},children:[E&&e.jsx(U,{children:E}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to delete the category ",e.jsxs("strong",{children:['"',r?.name,'"']}),"?"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Note: You cannot delete a category that has documents or subcategories."})]}),e.jsxs(q.Footer,{children:[e.jsx(W,{type:"button",onClick:I,disabled:l,children:"Cancel"}),e.jsx(Z,{type:"submit",disabled:l,children:l?"Deleting...":"Delete Category"})]})]})})]})}function be({listType:p,title:N,description:n,apiEndpoint:k}){const[T,P]=t.useState([]),[C,b]=t.useState(!0),[c,v]=t.useState(null),[A,j]=t.useState(!1),[r,i]=t.useState(!1),[u,d]=t.useState(!1),[l,g]=t.useState(null),[E,M]=t.useState({name:"",description:"",active:!0}),[R,$]=t.useState(!1),[y,S]=t.useState(null);t.useEffect(()=>{m()},[p]);const m=async()=>{try{b(!0);const a=await fetch(`${k}?type=${p}`,{credentials:"include"});if(!a.ok)throw new Error(`Failed to fetch ${N.toLowerCase()}`);const o=await a.json();P(o.items||[]),v(null)}catch(a){console.error(`Error fetching ${N}:`,a),v(a.message)}finally{b(!1)}},z=()=>{M({name:"",description:"",active:!0}),S(null),j(!0)},F=a=>{g(a),M({name:a.name||"",description:a.description||"",active:a.active!==void 0?a.active:!0}),S(null),i(!0)},w=a=>{g(a),S(null),d(!0)},f=async()=>{if(!E.name||E.name.trim()===""){S("Name is required");return}try{$(!0),S(null);const a=await fetch(k,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:p,name:E.name.trim(),description:E.description?.trim()||"",active:E.active})}),o=await a.json();if(!a.ok)throw new Error(o.error||`Failed to create ${N.toLowerCase()}`);await m(),j(!1)}catch(a){console.error(`Error creating ${N}:`,a),S(a.message)}finally{$(!1)}},x=async()=>{if(!E.name||E.name.trim()===""){S("Name is required");return}try{$(!0),S(null);const a=await fetch(k,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:p,id:l.id,name:E.name.trim(),description:E.description?.trim()||"",active:E.active})}),o=await a.json();if(!a.ok)throw new Error(o.error||`Failed to update ${N.toLowerCase()}`);await m(),i(!1)}catch(a){console.error(`Error updating ${N}:`,a),S(a.message)}finally{$(!1)}},I=async()=>{try{$(!0),S(null);const a=await fetch(`${k}?type=${p}&id=${l.id}`,{method:"DELETE",credentials:"include"}),o=await a.json();if(!a.ok)throw new Error(o.error||`Failed to delete ${N.toLowerCase()}`);await m(),d(!1)}catch(a){console.error(`Error deleting ${N}:`,a),S(a.message)}finally{$(!1)}},s=()=>{j(!1),i(!1),d(!1),g(null),M({name:"",description:"",active:!0}),S(null)};return C?e.jsx("div",{className:"glass-card p-8",children:e.jsxs("div",{className:"text-center text-gray-700",children:["Loading ",N.toLowerCase(),"..."]})}):c?e.jsxs("div",{className:"glass-card p-8",children:[e.jsxs(U,{className:"text-center",children:["Error: ",c]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(B,{onClick:m,children:"Retry"})})]}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:N}),e.jsx("p",{className:"text-gray-600 mt-1",children:n})]}),e.jsxs(B,{onClick:z,children:["+ Add ",N.replace(/s$/,"")]})]}),T.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:['No items defined. Click "Add ',N.replace(/s$/,""),'" to create one.']}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4",children:T.map(a=>e.jsxs("div",{className:"glass-card-sm p-4 hover:shadow-lg transition-all duration-200 group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900 text-lg mb-1",children:a.name}),a.description&&e.jsx("div",{className:"text-sm text-gray-600 leading-relaxed",children:a.description})]}),e.jsx("div",{className:"flex items-center gap-1 ml-3",children:a.active?e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full",children:"Active"}):e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium text-gray-600 bg-gray-200 rounded-full",children:"Inactive"})})]}),e.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-gray-200/50",children:[e.jsxs("button",{onClick:()=>F(a),className:"flex-1 px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-white hover:bg-blue-600 rounded-lg transition-all duration-200",title:"Edit item",children:[e.jsx("svg",{className:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),e.jsxs(Z,{onClick:()=>w(a),title:"Delete item",children:[e.jsx("svg",{className:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]},a.id))}),e.jsx(q,{isOpen:A,onClose:s,title:`Add ${N.replace(/s$/,"")}`,size:"sm",children:e.jsxs("form",{onSubmit:a=>{a.preventDefault(),f()},children:[y&&e.jsx(U,{children:y}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(h,{children:["Name ",e.jsx(J,{})]}),e.jsx("input",{type:"text",value:E.name,onChange:a=>M({...E,name:a.target.value}),placeholder:"e.g., Heterosexual, Male, Single",className:"input-field",autoFocus:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(h,{children:"Description (Optional)"}),e.jsx("input",{type:"text",value:E.description,onChange:a=>M({...E,description:a.target.value}),placeholder:"Additional details or clarification",className:"input-field"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:E.active,onChange:a=>M({...E,active:a.target.checked}),className:"checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Active"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"Inactive items won't appear in selection lists"})]}),e.jsxs(q.Footer,{children:[e.jsx(W,{type:"button",onClick:s,disabled:R,children:"Cancel"}),e.jsx(B,{type:"submit",disabled:R,children:R?"Creating...":`Create ${N.replace(/s$/,"")}`})]})]})}),e.jsx(q,{isOpen:r,onClose:s,title:`Edit ${N.replace(/s$/,"")}`,size:"sm",children:e.jsxs("form",{onSubmit:a=>{a.preventDefault(),x()},children:[y&&e.jsx(U,{children:y}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(h,{children:["Name ",e.jsx(J,{})]}),e.jsx("input",{type:"text",value:E.name,onChange:a=>M({...E,name:a.target.value}),className:"input-field",autoFocus:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(h,{children:"Description (Optional)"}),e.jsx("input",{type:"text",value:E.description,onChange:a=>M({...E,description:a.target.value}),placeholder:"Additional details or clarification",className:"input-field"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:E.active,onChange:a=>M({...E,active:a.target.checked}),className:"checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Active"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"Inactive items won't appear in selection lists"})]}),e.jsxs(q.Footer,{children:[e.jsx(W,{type:"button",onClick:s,disabled:R,children:"Cancel"}),e.jsx(B,{type:"submit",disabled:R,children:R?"Saving...":"Save Changes"})]})]})}),e.jsx(q,{isOpen:u,onClose:s,title:`Delete ${N.replace(/s$/,"")}`,size:"sm",children:e.jsxs("form",{onSubmit:a=>{a.preventDefault(),I()},children:[y&&e.jsx(U,{children:y}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to delete ",e.jsxs("strong",{children:['"',l?.name,'"']}),"?"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Note: You cannot delete items that are currently in use by client records."})]}),e.jsxs(q.Footer,{children:[e.jsx(W,{type:"button",onClick:s,disabled:R,children:"Cancel"}),e.jsx(Z,{type:"submit",disabled:R,children:R?"Deleting...":`Delete ${N.replace(/s$/,"")}`})]})]})})]})}function ve(){const[p,N]=t.useState("sexual-orientation"),n=[{id:"sexual-orientation",label:"Sexual Orientation",title:"Sexual Orientations",description:"Manage sexual orientation options for client demographics"},{id:"gender-identity",label:"Gender Identity",title:"Gender Identities",description:"Manage gender identity options for client demographics"},{id:"pronouns",label:"Pronouns",title:"Pronouns",description:"Manage pronoun options for client demographics"},{id:"marital-status",label:"Marital Status",title:"Marital Statuses",description:"Manage marital status options for client demographics"},{id:"client-status",label:"Client Status",title:"Client Statuses",description:"Manage client status options (Active, Discharged, etc.)"},{id:"ethnicity",label:"Ethnicity",title:"Ethnicity Options",description:"Manage ethnicity options (Hispanic/Latino origin) per OMOP CDM and HIPAA/ONC standards"},{id:"race",label:"Race",title:"Race Options",description:"Manage race options per OMOP CDM and HIPAA/ONC standards (OMB categories)"},{id:"insurance-type",label:"Insurance Types",title:"Insurance Types",description:"Manage insurance type categories"},{id:"referral-source",label:"Referral Sources",title:"Referral Sources",description:"Manage referral source options for client intake"},{id:"treatment-modality",label:"Treatment Modalities",title:"Treatment Modalities",description:"Manage treatment modality options (CBT, DBT, etc.)"},{id:"discharge-reason",label:"Discharge Reasons",title:"Discharge Reasons",description:"Manage discharge reason options for client records"}],k=n.find(T=>T.id===p);return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"glass-card p-6 mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reference Lists"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage clinical and demographic lookup lists"})]}),e.jsx(K,{className:"mb-6",children:n.map(T=>e.jsx(V,{active:p===T.id,onClick:()=>N(T.id),children:T.label},T.id))}),k&&e.jsx(be,{listType:p,title:k.title,description:k.description,apiEndpoint:"/custom/api/reference_lists.php"},p)]})}function Ne(){const[p,N]=t.useState([]),[n,k]=t.useState([]),[T,P]=t.useState([]),[C,b]=t.useState(!0),[c,v]=t.useState(null),[A,j]=t.useState(""),[r,i]=t.useState("active"),[u,d]=t.useState(!1),[l,g]=t.useState(!1),[E,M]=t.useState(null),[R,$]=t.useState(!1),[y,S]=t.useState(null),[m,z]=t.useState(!1),[F,w]=t.useState({username:"",password:"",fname:"",mname:"",lname:"",title:"",suffix:"",email:"",phone:"",phonecell:"",npi:"",federaltaxid:"",taxonomy:"",state_license_number:"",supervisor_id:"",supervisor_ids:[],facility_id:"",authorized:!1,is_supervisor:!1,is_social_worker:!1,active:!0,calendar:!1,portal_user:!1,color:"",notes:""});t.useEffect(()=>{f(),x(),I()},[r]);const f=async()=>{try{b(!0);const _=await fetch(`/custom/api/users.php?action=list&status=${r}`,{credentials:"include"});if(!_.ok)throw new Error("Failed to fetch users");const O=await _.json();N(O.users||[]),v(null)}catch(_){console.error("Error fetching users:",_),v(_.message)}finally{b(!1)}},x=async()=>{try{const _=await fetch("/custom/api/users.php?action=supervisors",{credentials:"include"});if(!_.ok)return;const O=await _.json();k(O.supervisors||[])}catch(_){console.error("Error fetching supervisors:",_)}},I=async()=>{try{const _=await fetch("/custom/api/users.php?action=facilities",{credentials:"include"});if(!_.ok)return;const O=await _.json();P(O.facilities||[])}catch(_){console.error("Error fetching facilities:",_)}},s=()=>{w({username:"",password:"",fname:"",mname:"",lname:"",title:"",suffix:"",email:"",phone:"",phonecell:"",npi:"",federaltaxid:"",taxonomy:"",state_license_number:"",supervisor_id:"",supervisor_ids:[],facility_id:"",authorized:!1,is_supervisor:!1,is_social_worker:!1,active:!0,calendar:!1,portal_user:!1,color:"",notes:""}),z(!1),S(null)},a=()=>{s(),d(!0)},o=async _=>{console.log("handleEdit called for user:",_),M(_),S(null);try{console.log("Fetching user details for ID:",_.id);const O=await fetch(`/custom/api/users.php?action=get&id=${_.id}`,{credentials:"include"});console.log("Response status:",O.status),console.log("Response headers:",O.headers.get("content-type"));const G=await O.text();if(console.log("Response text:",G),!G)throw new Error("Empty response from server. Check server logs.");let X;try{X=JSON.parse(G)}catch(ie){throw console.error("JSON parse error:",ie),new Error(`Invalid JSON response: ${G.substring(0,100)}`)}if(!O.ok)throw new Error(X.error||"Failed to fetch user details");const D=X.user;if(!D)throw new Error("No user data in response");const ee=await fetch(`/custom/api/users.php?action=user_supervisors&id=${_.id}`,{credentials:"include"});let ae=[];ee.ok&&(ae=((await ee.json()).supervisor_ids||[]).map(xe=>String(xe))),w({id:D.id,username:D.username||"",password:"",fname:D.fname||"",mname:D.mname||"",lname:D.lname||"",title:D.title||"",suffix:D.suffix||"",email:D.email||"",phone:D.phone||"",phonecell:D.phonecell||"",npi:D.npi||"",federaltaxid:D.federaltaxid||"",taxonomy:D.taxonomy||"",state_license_number:D.state_license_number||"",supervisor_id:D.supervisor_id||"",supervisor_ids:ae,facility_id:D.facility_id||"",authorized:D.authorized==="1"||D.authorized===1,is_supervisor:D.is_supervisor==="1"||D.is_supervisor===1,is_social_worker:D.is_social_worker==="1"||D.is_social_worker===1,active:D.active==="1"||D.active===1,calendar:D.calendar==="1"||D.calendar===1,portal_user:D.portal_user==="1"||D.portal_user===1,color:D.color||"",notes:D.notes||""}),g(!0)}catch(O){console.error("Error fetching user details:",O),alert("Failed to load user details: "+O.message+`

Check the browser console and server logs for more details.`),S(O.message)}},L=async()=>{if(!F.username||!F.password||!F.fname||!F.lname||!F.email){S("Username, password, email, first name, and last name are required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(F.email)){S("Please enter a valid email address");return}if(F.password.length<8){S("Password must be at least 8 characters long");return}if(!/[a-z]/.test(F.password)){S("Password must contain at least one lowercase letter");return}if(!/[A-Z]/.test(F.password)){S("Password must contain at least one uppercase letter");return}if(!/[0-9]/.test(F.password)){S("Password must contain at least one number");return}if(!/[^a-zA-Z0-9]/.test(F.password)){S("Password must contain at least one special character");return}try{$(!0),S(null);const O=await fetch("/custom/api/users.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)}),G=await O.json();if(!O.ok)throw new Error(G.error||"Failed to create user");await f(),await x(),d(!1),s()}catch(O){console.error("Error creating user:",O),S(O.message)}finally{$(!1)}},H=async()=>{if(!F.fname||!F.lname){S("First name and last name are required");return}if(F.password&&F.password.trim()!==""){if(F.password.length<8){S("Password must be at least 8 characters long");return}if(!/[a-z]/.test(F.password)){S("Password must contain at least one lowercase letter");return}if(!/[A-Z]/.test(F.password)){S("Password must contain at least one uppercase letter");return}if(!/[0-9]/.test(F.password)){S("Password must contain at least one number");return}if(!/[^a-zA-Z0-9]/.test(F.password)){S("Password must contain at least one special character");return}}try{$(!0),S(null);const _=await fetch("/custom/api/users.php",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)}),O=await _.json();if(!_.ok)throw new Error(O.error||"Failed to update user");await f(),await x(),g(!1),s()}catch(_){console.error("Error updating user:",_),S(_.message)}finally{$(!1)}},Y=async _=>{if(confirm("Are you sure you want to deactivate this user?"))try{if(!(await fetch(`/custom/api/users.php?id=${_}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to deactivate user");await f()}catch(O){console.error("Error deactivating user:",O),alert("Failed to deactivate user: "+O.message)}},ne=async _=>{if(confirm("Unlock this user account? This will reset failed login attempts and allow them to log in again."))try{const O=await fetch(`/custom/api/users.php?action=unlock&id=${_}`,{method:"GET",credentials:"include"});if(!O.ok){const G=await O.json();throw new Error(G.error||"Failed to unlock account")}await f(),alert("Account unlocked successfully")}catch(O){console.error("Error unlocking account:",O),alert("Failed to unlock account: "+O.message)}},ce=()=>{d(!1),g(!1),M(null),s()},oe=(_,O)=>{w(G=>({...G,[_]:O}))},de=_=>{const O=String(_);w(G=>{const X=G.supervisor_ids||[],D=X.includes(O);return{...G,supervisor_ids:D?X.filter(ee=>ee!==O):[...X,O]}})},Q=p.filter(_=>{const O=A.toLowerCase();return _.fname?.toLowerCase().includes(O)||_.lname?.toLowerCase().includes(O)||_.username?.toLowerCase().includes(O)||_.email?.toLowerCase().includes(O)});return C?e.jsx("div",{className:"glass-card p-8",children:e.jsx("div",{className:"text-center text-gray-700",children:"Loading users..."})}):c?e.jsxs("div",{className:"glass-card p-8",children:[e.jsxs(U,{className:"text-center",children:["Error: ",c]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(B,{onClick:f,children:"Retry"})})]}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"User Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage system users and providers"})]}),e.jsxs("button",{onClick:a,className:"btn-solid btn-solid-green btn-icon",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add User"]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",placeholder:"Search by name, username, or email...",value:A,onChange:_=>j(_.target.value),className:"input-lg"})}),e.jsxs("div",{className:"flex gap-3 mb-6",children:[e.jsx("button",{onClick:()=>i("active"),className:`filter-btn-enhanced ${r==="active"?"filter-btn-active-base bg-green-500":"filter-btn-inactive"}`,children:"Active"}),e.jsx("button",{onClick:()=>i("inactive"),className:`filter-btn-enhanced ${r==="inactive"?"filter-btn-active-base bg-red-500":"filter-btn-inactive"}`,children:"Inactive"}),e.jsx("button",{onClick:()=>i("all"),className:`filter-btn-enhanced ${r==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Users"})]}),Q.length>0&&e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-label",children:[Q.length," user",Q.length!==1?"s":""]})}),Q.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),e.jsxs("p",{className:"text-gray-600 text-lg",children:["No ",r!=="all"?r:""," users found"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Q.map(_=>e.jsxs("div",{className:"card-item",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-base font-bold text-gray-800 leading-tight",children:[_.fname," ",_.lname]}),_.title&&e.jsx("p",{className:"text-xs text-gray-600",children:_.title})]}),e.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[e.jsx("span",{className:_.active==="1"?"badge-solid-success":"badge-solid-danger",children:_.active==="1"?"ACTIVE":"INACTIVE"}),_.is_locked==="1"&&e.jsx("span",{className:"badge-solid-danger text-xs",children:"LOCKED"})]})]}),e.jsxs("div",{className:"space-y-0.5 text-sm text-gray-600 mb-2",children:[(_.phonecell||_.phone)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",_.phonecell||_.phone]}),_.email&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",_.email]}),(_.is_supervisor==="1"||_.authorized==="1"||_.calendar==="1"||_.is_social_worker==="1")&&e.jsxs("div",{className:"flex gap-2 mt-1.5 flex-wrap",children:[_.is_supervisor==="1"&&e.jsx("span",{className:"badge-outline-warning text-xs",children:"Supervisor"}),_.authorized==="1"&&e.jsx("span",{className:"badge-outline-success text-xs",children:"Provider"}),_.is_social_worker==="1"&&e.jsx("span",{className:"badge-outline-purple text-xs",children:"Social Worker"}),_.calendar==="1"&&e.jsx("span",{className:"badge-outline-info text-xs",children:"Admin"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>o(_),className:"flex-1 px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"Edit"}),_.is_locked==="1"&&e.jsx("button",{onClick:()=>ne(_.id),className:"flex-1 px-3 py-1.5 text-sm font-medium text-orange-600 hover:text-orange-800 hover:bg-orange-50 rounded-lg transition-colors",children:"Unlock"}),_.active==="1"&&e.jsx(Z,{onClick:()=>Y(_.id),children:"Deactivate"})]})]},_.id))}),e.jsx(_e,{isOpen:u||l,isEdit:l,formData:F,formError:y,saving:R,showPassword:m,setShowPassword:z,supervisors:n,facilities:T,onFormChange:oe,onToggleSupervisor:de,onSave:l?H:L,onClose:ce})]})}function _e({isOpen:p,isEdit:N,formData:n,formError:k,saving:T,showPassword:P,setShowPassword:C,supervisors:b,facilities:c,onFormChange:v,onToggleSupervisor:A,onSave:j,onClose:r}){return e.jsx(q,{isOpen:p,onClose:r,title:N?"Edit User":"Add New User",size:"lg",children:e.jsxs("form",{onSubmit:i=>{i.preventDefault(),j()},children:[k&&e.jsx("div",{className:"error-message",children:k}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Login Credentials"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(h,{children:["Username ",e.jsx(J,{})]}),e.jsx("input",{type:"text",value:n.username,onChange:i=>v("username",i.target.value),disabled:N,className:"input-field disabled:bg-gray-100"})]}),e.jsxs("div",{children:[e.jsxs(h,{children:[N?"New Password (leave blank to keep current)":"Password"," ",!N&&e.jsx(J,{})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:P?"text":"password",value:n.password,onChange:i=>v("password",i.target.value),className:"input-field"}),e.jsx("button",{type:"button",onClick:()=>C(!P),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-sm text-gray-600 hover:text-gray-800",children:P?"Hide":"Show"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(h,{children:["Legal First Name ",e.jsx(J,{})]}),e.jsx("input",{type:"text",value:n.fname,onChange:i=>v("fname",i.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Middle Name"}),e.jsx("input",{type:"text",value:n.mname,onChange:i=>v("mname",i.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsxs(h,{children:["Legal Last Name ",e.jsx(J,{})]}),e.jsx("input",{type:"text",value:n.lname,onChange:i=>v("lname",i.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Professional Credentials"}),e.jsx("input",{type:"text",value:n.title,onChange:i=>v("title",i.target.value),placeholder:"MD, LCSW, PhD, etc.",className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Suffix"}),e.jsx("input",{type:"text",value:n.suffix,onChange:i=>v("suffix",i.target.value),placeholder:"Jr., Sr., III, etc.",className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"State License Number"}),e.jsx("input",{type:"text",value:n.state_license_number,onChange:i=>v("state_license_number",i.target.value),className:"input-field"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(h,{children:["Email ",e.jsx(J,{})]}),e.jsx("input",{type:"email",value:n.email,onChange:i=>v("email",i.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Office Phone"}),e.jsx("input",{type:"tel",value:n.phone,onChange:i=>v("phone",i.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Cell Phone"}),e.jsx("input",{type:"tel",value:n.phonecell,onChange:i=>v("phonecell",i.target.value),className:"input-field"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Professional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{children:"NPI"}),e.jsx("input",{type:"text",value:n.npi,onChange:i=>v("npi",i.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Federal Tax ID"}),e.jsx("input",{type:"text",value:n.federaltaxid,onChange:i=>v("federaltaxid",i.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Taxonomy Code"}),e.jsx("input",{type:"text",value:n.taxonomy,onChange:i=>v("taxonomy",i.target.value),placeholder:"207Q00000X",className:"input-field"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Access Control"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:n.authorized,onChange:i=>v("authorized",i.target.checked),className:"checkbox"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Provider (Can create clinical notes)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:n.is_supervisor,onChange:i=>v("is_supervisor",i.target.checked),className:"checkbox"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Supervisor (Can supervise other providers)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:n.is_social_worker,onChange:i=>v("is_social_worker",i.target.checked),className:"checkbox"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Social Worker (Case management, limited clinical access)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:n.calendar,onChange:i=>v("calendar",i.target.checked),className:"checkbox"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Administrator (Access to Settings)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:n.portal_user,onChange:i=>v("portal_user",i.target.checked),className:"checkbox"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Portal Access"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:n.active,onChange:i=>v("active",i.target.checked),className:"checkbox"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})]})]}),n.authorized&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Calendar Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Calendar Color"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",value:n.color||"#3B82F6",onChange:i=>v("color",i.target.value),className:"w-12 h-10 rounded border border-gray-300 cursor-pointer"}),e.jsx("input",{type:"text",value:n.color||"",onChange:i=>v("color",i.target.value),placeholder:"#3B82F6",className:"input-field flex-1",maxLength:7})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This color will be used for all appointments on the calendar"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Color Preview"}),e.jsxs("div",{className:"h-10 rounded-lg border border-gray-200 flex items-center px-3 text-sm font-medium text-gray-800",style:{backgroundColor:`${n.color||"#3B82F6"}B3`},children:[n.fname||"Provider"," ",n.lname?.charAt(0)||"N","."]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Organization"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Supervisors (select one or more)"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto bg-white",children:b.length===0?e.jsx("div",{className:"text-sm text-gray-500 italic",children:"No supervisors available. Mark users as supervisors in Access Control."}):e.jsx("div",{className:"space-y-2",children:b.map(i=>e.jsxs("label",{className:"flex items-center gap-2 hover:bg-gray-50 p-1 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.supervisor_ids.includes(String(i.id)),onChange:()=>A(i.id),className:"checkbox"}),e.jsxs("span",{className:"checkbox-label",children:[i.fname," ",i.lname," ",i.title&&`(${i.title})`]})]},i.id))})})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Default Facility"}),e.jsxs("select",{value:n.facility_id,onChange:i=>v("facility_id",i.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"None"}),c.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(h,{children:"Notes"}),e.jsx("textarea",{value:n.notes,onChange:i=>v("notes",i.target.value),rows:3,className:"input-field",placeholder:"Additional information about this user..."})]})]}),e.jsxs(q.Footer,{children:[e.jsx(W,{type:"button",onClick:r,disabled:T,children:"Cancel"}),e.jsx(B,{type:"submit",disabled:T,children:T?"Saving...":N?"Save Changes":"Create User"})]})]})})}function we(){const[p,N]=t.useState("facilities");return e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs(K,{className:"mb-6",children:[e.jsx(V,{active:p==="facilities",onClick:()=>N("facilities"),children:"Facilities"}),e.jsx(V,{active:p==="rooms",onClick:()=>N("rooms"),children:"Counseling Rooms"})]}),p==="facilities"?e.jsx(Ce,{}):e.jsx(Se,{})]})}function Ce(){const[p,N]=t.useState([]),[n,k]=t.useState(!0),[T,P]=t.useState(""),[C,b]=t.useState(""),[c,v]=t.useState("active"),[A,j]=t.useState(!1),[r,i]=t.useState(!1),[u,d]=t.useState({id:null,name:"",phone:"",fax:"",website:"",email:"",street:"",city:"",state:"",postal_code:"",country_code:"United States",mail_street:"",mail_city:"",mail_state:"",mail_zip:"",color:"#99FFFF",pos_code:"11",facility_npi:"",federal_ein:"",tax_id_type:"EIN",facility_taxonomy:"",attn:"",info:"",billing_location:0,accepts_assignment:0,service_location:1,primary_business_entity:0,inactive:0}),[l,g]=t.useState(""),[E,M]=t.useState(!1),[R,$]=t.useState("physical"),y=[{value:"11",label:"11: Office"},{value:"02",label:"02: Telehealth"},{value:"10",label:"10: Telehealth (Patient Home)"},{value:"12",label:"12: Home"},{value:"21",label:"21: Inpatient Hospital"},{value:"22",label:"22: Outpatient Hospital"},{value:"23",label:"23: Emergency Room"},{value:"31",label:"31: Skilled Nursing Facility"},{value:"32",label:"32: Nursing Facility"},{value:"49",label:"49: Independent Clinic"},{value:"50",label:"50: Federally Qualified Health Center"},{value:"71",label:"71: State/Local Public Health Clinic"},{value:"81",label:"81: Independent Laboratory"}];t.useEffect(()=>{S()},[]);const S=async()=>{try{k(!0);const o=await fetch("/custom/api/facilities.php",{credentials:"include"});if(!o.ok)throw new Error("Failed to fetch facilities");const L=await o.json();N(L.facilities||[])}catch(o){P(o.message)}finally{k(!1)}},m=()=>{d({id:null,name:"",phone:"",fax:"",website:"",email:"",street:"",address_line2:"",city:"",state:"",postal_code:"",country_code:"United States",mail_street:"",mailing_address_line2:"",mail_city:"",mail_state:"",mail_zip:"",mailing_same_as_physical:"1",billing_street:"",billing_address_line2:"",billing_city:"",billing_state:"",billing_zip:"",billing_same_as_physical:"1",color:"#99FFFF",pos_code:"11",facility_npi:"",federal_ein:"",tax_id_type:"EIN",facility_taxonomy:"",attn:"",info:"",billing_location:0,accepts_assignment:0,service_location:1,primary_business_entity:0,inactive:0}),g(""),$("physical"),j(!0)},z=async o=>{try{const L=await fetch(`/custom/api/facilities.php?action=get&id=${o.id}`,{credentials:"include"});if(!L.ok)throw new Error("Failed to load facility details");const H=await L.json();d({...H,billing_location:H.billing_location==="1"||H.billing_location===1?1:0,accepts_assignment:H.accepts_assignment==="1"||H.accepts_assignment===1?1:0,service_location:H.service_location==="1"||H.service_location===1?1:0,primary_business_entity:H.primary_business_entity==="1"||H.primary_business_entity===1?1:0,inactive:H.inactive==="1"||H.inactive===1?1:0,mailing_same_as_physical:H.mailing_same_as_physical==="1"||H.mailing_same_as_physical===1?"1":"0",billing_same_as_physical:H.billing_same_as_physical==="1"||H.billing_same_as_physical===1?"1":"0"}),g(""),$("physical"),i(!0)}catch(L){alert("Failed to load facility details: "+L.message)}},F=async()=>{if(!u.name?.trim()){g("Facility name is required");return}try{M(!0),g("");const o=await fetch("/custom/api/facilities.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(u)});if(!o.ok){const L=await o.json();throw new Error(L.error||"Failed to create facility")}await S(),j(!1)}catch(o){g(o.message)}finally{M(!1)}},w=async()=>{if(!u.name?.trim()){g("Facility name is required");return}try{M(!0),g("");const o=await fetch("/custom/api/facilities.php",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(u)});if(!o.ok){const L=await o.json();throw new Error(L.error||"Failed to update facility")}await S(),i(!1)}catch(o){g(o.message)}finally{M(!1)}},f=async o=>{if(confirm("Are you sure you want to deactivate this facility?"))try{if(!(await fetch(`/custom/api/facilities.php?id=${o}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to deactivate facility");await S()}catch(L){alert("Error: "+L.message)}},x=()=>{j(!1),i(!1),g("")},I=(o,L)=>{d(H=>({...H,[o]:L}))},s=o=>{d(L=>({...L,[o]:L[o]?0:1}))},a=p.filter(o=>{const L=o.inactive==="0"||o.inactive===0;if(c==="active"&&!L||c==="inactive"&&L)return!1;if(C){const H=C.toLowerCase();return o.name?.toLowerCase().includes(H)||o.city?.toLowerCase().includes(H)||o.state?.toLowerCase().includes(H)}return!0});return n?e.jsx("div",{className:"text-center text-gray-700 py-8",children:"Loading facilities..."}):T?e.jsxs("div",{children:[e.jsxs(U,{className:"text-center",children:["Error: ",T]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(B,{onClick:S,children:"Retry"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Facilities"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage practice locations and facilities"})]}),e.jsxs("button",{onClick:m,className:"btn-solid btn-solid-green btn-icon",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Facility"]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",placeholder:"Search by name, city, or state...",value:C,onChange:o=>b(o.target.value),className:"input-lg"})}),e.jsxs("div",{className:"flex gap-3 mb-6",children:[e.jsx("button",{onClick:()=>v("active"),className:`filter-btn-enhanced ${c==="active"?"filter-btn-active-base bg-green-500":"filter-btn-inactive"}`,children:"Active"}),e.jsx("button",{onClick:()=>v("inactive"),className:`filter-btn-enhanced ${c==="inactive"?"filter-btn-active-base bg-red-500":"filter-btn-inactive"}`,children:"Inactive"}),e.jsx("button",{onClick:()=>v("all"),className:`filter-btn-enhanced ${c==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Facilities"})]}),a.length>0&&e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-label",children:[a.length," ",c!=="all"?c:""," facilit",a.length!==1?"ies":"y"]})}),a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsxs("p",{className:"text-gray-600 text-lg",children:["No ",c!=="all"?c:""," facilities found"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(o=>e.jsxs("div",{className:"card-item",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("div",{children:e.jsx("h4",{className:"text-base font-bold text-gray-800 leading-tight",children:o.name})}),e.jsx("span",{className:o.inactive==="0"||o.inactive===0?"badge-solid-success":"badge-solid-danger",children:o.inactive==="0"||o.inactive===0?"ACTIVE":"INACTIVE"})]}),e.jsxs("div",{className:"space-y-0.5 text-sm text-gray-600 mb-2",children:[o.street&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Address:"})," ",o.street,", ",o.city,", ",o.state," ",o.postal_code]}),o.phone&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",o.phone]}),o.fax&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Fax:"})," ",o.fax]}),e.jsxs("div",{className:"flex gap-2 mt-1.5 flex-wrap",children:[(o.billing_location==="1"||o.billing_location===1)&&e.jsx("span",{className:"badge-outline-info text-xs",children:"Billing"}),(o.service_location==="1"||o.service_location===1)&&e.jsx("span",{className:"badge-outline-success text-xs",children:"Service"}),(o.primary_business_entity==="1"||o.primary_business_entity===1)&&e.jsx("span",{className:"badge-outline-warning text-xs",children:"Primary"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>z(o),className:"flex-1 px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"Edit"}),(o.inactive==="0"||o.inactive===0)&&e.jsx(Z,{onClick:()=>f(o.id),children:"Deactivate"})]})]},o.id))}),e.jsx(ke,{isOpen:A||r,isEdit:r,formData:u,formError:l,saving:E,addressTab:R,setAddressTab:$,posCodeOptions:y,onFormChange:I,onToggle:s,onSave:r?w:F,onClose:x})]})}function Se(){const[p,N]=t.useState([]),[n,k]=t.useState(!0),[T,P]=t.useState(""),[C,b]=t.useState(!1),[c,v]=t.useState(!1),[A,j]=t.useState({option_id:"",title:"",sort_order:0,is_default:0,notes:""}),[r,i]=t.useState(""),[u,d]=t.useState(!1);t.useEffect(()=>{l()},[]);const l=async()=>{try{k(!0);const y=await fetch("/custom/api/get_rooms.php",{credentials:"include"});if(!y.ok)throw new Error("Failed to fetch rooms");const S=await y.json();N(S.rooms||[])}catch(y){P(y.message)}finally{k(!1)}},g=()=>{j({option_id:"",title:"",sort_order:p.length+1,is_default:0,notes:""}),i(""),b(!0)},E=y=>{j({option_id:y.value||y.option_id,title:y.label||y.title,sort_order:y.sort_order||0,is_default:y.is_default||0,notes:y.notes||""}),i(""),v(!0)},M=async()=>{if(!A.option_id?.trim()){i("Room ID is required");return}if(!A.title?.trim()){i("Room name is required");return}try{d(!0),i("");const S=await fetch("/custom/api/settings_lists.php?list_id=rooms",{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...A,list_id:"rooms"})});if(!S.ok){const m=await S.json();throw new Error(m.error||`Failed to ${c?"update":"create"} room`)}await l(),b(!1),v(!1)}catch(y){i(y.message)}finally{d(!1)}},R=async y=>{if(confirm("Are you sure you want to delete this room?"))try{if(!(await fetch(`/custom/api/settings_lists.php?list_id=rooms&option_id=${y}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete room");await l()}catch(S){alert("Error: "+S.message)}},$=()=>{b(!1),v(!1),i("")};return n?e.jsx("div",{className:"text-center text-gray-700 py-8",children:"Loading rooms..."}):T?e.jsxs("div",{children:[e.jsxs(U,{className:"text-center",children:["Error: ",T]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(B,{onClick:l,children:"Retry"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Counseling Rooms"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage rooms/offices for appointment scheduling"})]}),e.jsx(B,{onClick:g,children:"+ Add Room"})]}),T&&e.jsx(U,{children:T}),p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-600 text-lg",children:"No rooms configured"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:'Click "+ Add Room" to create your first counseling room'})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Room ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Room Name"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Sort Order"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Default"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Notes"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:p.map((y,S)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-mono font-semibold text-gray-900",children:y.value||y.option_id}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:y.label||y.title}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 text-center",children:y.sort_order||0}),e.jsx("td",{className:"px-4 py-3 text-center",children:y.is_default===1||y.is_default==="1"?e.jsx("span",{className:"px-3 py-1 text-xs rounded-full bg-green-100 text-green-700",children:"Yes"}):e.jsx("span",{className:"text-gray-400",children:"No"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 max-w-xs truncate",children:y.notes||"—"}),e.jsxs("td",{className:"px-4 py-3 text-center",children:[e.jsx("button",{onClick:()=>E(y),className:"text-blue-600 hover:text-blue-800 mr-3",children:"Edit"}),e.jsx(Z,{onClick:()=>R(y.value||y.option_id),children:"Delete"})]})]},y.value||y.option_id||S))})]})}),e.jsx(q,{isOpen:C||c,onClose:$,title:c?"Edit Room":"Add Room",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[r&&e.jsx(U,{children:r}),e.jsxs("div",{children:[e.jsxs(h,{children:["Room ID ",e.jsx(J,{})]}),e.jsx("input",{type:"text",value:A.option_id,onChange:y=>j({...A,option_id:y.target.value.toLowerCase().replace(/\s+/g,"_")}),className:"input-field",placeholder:"office1",disabled:c}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unique identifier (no spaces)"})]}),e.jsxs("div",{children:[e.jsxs(h,{children:["Room Name ",e.jsx(J,{})]}),e.jsx("input",{type:"text",value:A.title,onChange:y=>j({...A,title:y.target.value}),className:"input-field",placeholder:"Office 1"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Sort Order"}),e.jsx("input",{type:"number",value:A.sort_order,onChange:y=>j({...A,sort_order:parseInt(y.target.value)||0}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Default Room"}),e.jsxs("label",{className:"flex items-center mt-2",children:[e.jsx("input",{type:"checkbox",checked:A.is_default===1,onChange:y=>j({...A,is_default:y.target.checked?1:0}),className:"checkbox mr-2"}),e.jsx("span",{className:"checkbox-label",children:"Set as default"})]})]})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Notes"}),e.jsx("textarea",{value:A.notes,onChange:y=>j({...A,notes:y.target.value}),className:"input-field",rows:2,placeholder:"Optional notes about this room..."})]}),e.jsxs(q.Footer,{children:[e.jsx(W,{onClick:$,disabled:u,children:"Cancel"}),e.jsx(B,{onClick:M,disabled:u,children:u?"Saving...":c?"Save Changes":"Add Room"})]})]})})]})}function ke({isOpen:p,isEdit:N,formData:n,formError:k,saving:T,addressTab:P,setAddressTab:C,posCodeOptions:b,onFormChange:c,onToggle:v,onSave:A,onClose:j}){return e.jsx(q,{isOpen:p,onClose:j,title:N?"Edit Facility":"Add New Facility",size:"lg",children:e.jsxs("div",{children:[k&&e.jsx("div",{className:"error-message mb-4",children:k}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(h,{children:["Facility Name ",e.jsx(J,{})]}),e.jsx("input",{type:"text",value:n.name||"",onChange:r=>c("name",r.target.value),className:"input-field",placeholder:"Enter facility name"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(K,{className:"mb-4",children:[e.jsx(V,{active:P==="physical",onClick:()=>C("physical"),children:"Physical Address"}),e.jsx(V,{active:P==="mailing",onClick:()=>C("mailing"),children:"Mailing Address"}),e.jsx(V,{active:P==="billing",onClick:()=>C("billing"),children:"Billing Address"})]}),P==="physical"?e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Street Address Line 1"}),e.jsx("input",{type:"text",value:n.street||"",onChange:r=>c("street",r.target.value),className:"input-field",placeholder:"123 Main Street"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Street Address Line 2"}),e.jsx("input",{type:"text",value:n.address_line2||"",onChange:r=>c("address_line2",r.target.value),className:"input-field",placeholder:"Suite 100"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{children:"City"}),e.jsx("input",{type:"text",value:n.city||"",onChange:r=>c("city",r.target.value),className:"input-field",placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"State"}),e.jsx("input",{type:"text",value:n.state||"",onChange:r=>c("state",r.target.value),className:"input-field",placeholder:"WI",maxLength:2})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Zip Code"}),e.jsx("input",{type:"text",value:n.postal_code||"",onChange:r=>c("postal_code",r.target.value),className:"input-field",placeholder:"53092"})]})]})]}):P==="mailing"?e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer mb-2",children:[e.jsx("input",{type:"checkbox",checked:n.mailing_same_as_physical==="1",onChange:r=>{r.target.checked?(c("mailing_same_as_physical","1"),c("mail_street",n.street||""),c("mailing_address_line2",n.address_line2||""),c("mail_city",n.city||""),c("mail_state",n.state||""),c("mail_zip",n.postal_code||"")):c("mailing_same_as_physical","0")},className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Same as Physical Address"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Mailing Address Line 1"}),e.jsx("input",{type:"text",value:n.mail_street||"",onChange:r=>c("mail_street",r.target.value),className:"input-field",placeholder:"Enter mailing street address",disabled:n.mailing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Mailing Address Line 2"}),e.jsx("input",{type:"text",value:n.mailing_address_line2||"",onChange:r=>c("mailing_address_line2",r.target.value),className:"input-field",placeholder:"Suite, Apt, etc.",disabled:n.mailing_same_as_physical==="1"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{children:"City"}),e.jsx("input",{type:"text",value:n.mail_city||"",onChange:r=>c("mail_city",r.target.value),className:"input-field",placeholder:"City",disabled:n.mailing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"State"}),e.jsx("input",{type:"text",value:n.mail_state||"",onChange:r=>c("mail_state",r.target.value),className:"input-field",placeholder:"WI",maxLength:2,disabled:n.mailing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Zip Code"}),e.jsx("input",{type:"text",value:n.mail_zip||"",onChange:r=>c("mail_zip",r.target.value),className:"input-field",placeholder:"53092",disabled:n.mailing_same_as_physical==="1"})]})]})]}):e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer mb-2",children:[e.jsx("input",{type:"checkbox",checked:n.billing_same_as_physical==="1",onChange:r=>{r.target.checked?(c("billing_same_as_physical","1"),c("billing_street",n.street||""),c("billing_address_line2",n.address_line2||""),c("billing_city",n.city||""),c("billing_state",n.state||""),c("billing_zip",n.postal_code||"")):c("billing_same_as_physical","0")},className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Same as Physical Address"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Billing Address Line 1"}),e.jsx("input",{type:"text",value:n.billing_street||"",onChange:r=>c("billing_street",r.target.value),className:"input-field",placeholder:"Enter billing street address",disabled:n.billing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Billing Address Line 2"}),e.jsx("input",{type:"text",value:n.billing_address_line2||"",onChange:r=>c("billing_address_line2",r.target.value),className:"input-field",placeholder:"Suite, Apt, etc.",disabled:n.billing_same_as_physical==="1"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{children:"City"}),e.jsx("input",{type:"text",value:n.billing_city||"",onChange:r=>c("billing_city",r.target.value),className:"input-field",placeholder:"City",disabled:n.billing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"State"}),e.jsx("input",{type:"text",value:n.billing_state||"",onChange:r=>c("billing_state",r.target.value),className:"input-field",placeholder:"WI",maxLength:2,disabled:n.billing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Zip Code"}),e.jsx("input",{type:"text",value:n.billing_zip||"",onChange:r=>c("billing_zip",r.target.value),className:"input-field",placeholder:"53092",disabled:n.billing_same_as_physical==="1"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Phone"}),e.jsx("input",{type:"tel",value:n.phone||"",onChange:r=>c("phone",r.target.value),className:"input-field",placeholder:"262-345-7229"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Fax"}),e.jsx("input",{type:"tel",value:n.fax||"",onChange:r=>c("fax",r.target.value),className:"input-field",placeholder:"262-345-7229"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Website"}),e.jsx("input",{type:"url",value:n.website||"",onChange:r=>c("website",r.target.value),className:"input-field",placeholder:"https://example.com"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Email"}),e.jsx("input",{type:"email",value:n.email||"",onChange:r=>c("email",r.target.value),className:"input-field",placeholder:"contact@example.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Color"}),e.jsx("input",{type:"color",value:n.color||"#99FFFF",onChange:r=>c("color",r.target.value),className:"input-field h-10"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"POS Code"}),e.jsx("select",{value:n.pos_code||"11",onChange:r=>c("pos_code",r.target.value),className:"input-field",children:b.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Facility NPI"}),e.jsx("input",{type:"text",value:n.facility_npi||"",onChange:r=>c("facility_npi",r.target.value),className:"input-field",placeholder:"1811342058"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Tax ID"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("select",{value:n.tax_id_type||"EIN",onChange:r=>c("tax_id_type",r.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",style:{width:"90px"},children:[e.jsx("option",{value:"EIN",children:"EIN"}),e.jsx("option",{value:"SSN",children:"SSN"})]}),e.jsx("input",{type:"text",value:n.federal_ein||"",onChange:r=>c("federal_ein",r.target.value),className:"input-field flex-1",placeholder:"566611885"})]})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Facility Taxonomy"}),e.jsx("input",{type:"text",value:n.facility_taxonomy||"",onChange:r=>c("facility_taxonomy",r.target.value),className:"input-field",placeholder:"101YP2500X"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Attn"}),e.jsx("input",{type:"text",value:n.attn||"",onChange:r=>c("attn",r.target.value),className:"input-field",placeholder:"Kenneth J Nelan"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.billing_location===1,onChange:()=>v("billing_location"),className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Billing Location"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.accepts_assignment===1,onChange:()=>v("accepts_assignment"),className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Accepts Assignment"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.service_location===1,onChange:()=>v("service_location"),className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Service Location"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.primary_business_entity===1,onChange:()=>v("primary_business_entity"),className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Primary Business Entity"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.inactive===1,onChange:()=>v("inactive"),className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Facility Inactive"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(h,{children:"Info"}),e.jsx("textarea",{value:n.info||"",onChange:r=>c("info",r.target.value),className:"input-field",rows:4,placeholder:"Additional information about this facility..."})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"text-red-600",children:"*"})," Required"]}),e.jsxs(q.Footer,{children:[e.jsx(W,{onClick:j,disabled:T,children:"Cancel"}),e.jsx(B,{onClick:A,disabled:T,children:T?"Saving...":N?"Save Changes":"Add Facility"})]})]})})}function Ee(){const[p,N]=t.useState([]),[n,k]=t.useState(!0),[T,P]=t.useState(!1),[C,b]=t.useState(null),[c,v]=t.useState({});t.useEffect(()=>{A()},[]);const A=async()=>{try{k(!0);const d=await fetch("/custom/api/settings.php?category=security",{credentials:"include"});if(!d.ok)throw new Error("Failed to fetch settings");const l=await d.json();N(l.settings||[]);const g={};l.settings.forEach(E=>{g[E.setting_key]=E.setting_value}),v(g)}catch(d){console.error("Error fetching settings:",d),b({type:"error",text:"Failed to load security settings"})}finally{k(!1)}},j=(d,l)=>{v(g=>({...g,[d]:l}))},r=async()=>{try{P(!0),b(null);const d=await fetch("/custom/api/settings.php",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({settings:c})}),l=await d.json();if(!d.ok)throw new Error(l.message||"Failed to save settings");b({type:"success",text:"Settings saved successfully!"}),setTimeout(()=>b(null),3e3)}catch(d){console.error("Error saving settings:",d),b({type:"error",text:d.message||"Failed to save settings"})}finally{P(!1)}},i=d=>{const l=d.setting_key,g=c[l]||d.setting_value;return d.setting_type==="boolean"?e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g==="1"||g===!0,onChange:E=>j(l,E.target.checked?"1":"0"),disabled:!d.is_editable,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}):d.setting_type==="integer"?e.jsx("input",{type:"number",value:g,onChange:E=>j(l,E.target.value),disabled:!d.is_editable,className:"w-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50 text-gray-900",min:"0"}):e.jsx("input",{type:"text",value:g,onChange:E=>j(l,E.target.value),disabled:!d.is_editable,className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50 text-gray-900"})},u=d=>d.split(".").pop().split("_").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" ");return n?e.jsx("div",{className:"glass-card p-12 text-center",children:e.jsx("div",{className:"text-gray-700",children:"Loading security settings..."})}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Security Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure security and authentication parameters"})]}),C&&e.jsx("div",{className:`mb-6 px-4 py-3 rounded-lg border ${C.type==="success"?"bg-green-100/60 border-green-300/50 text-green-700":"bg-red-100/60 border-red-300/50 text-red-700"}`,children:C.text}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/30 backdrop-blur-sm rounded-xl p-6 border border-white/40",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Account Lockout"}),e.jsx("div",{className:"space-y-5",children:p.filter(d=>d.setting_key.includes("login_attempts")||d.setting_key.includes("lockout")).map(d=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("label",{className:"block font-medium text-gray-900 text-sm",children:u(d.setting_key)}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:d.description})]}),e.jsx("div",{className:"flex-shrink-0",children:i(d)})]},d.setting_key))})]}),e.jsxs("div",{className:"bg-white/30 backdrop-blur-sm rounded-xl p-6 border border-white/40",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Password Requirements"}),e.jsx("div",{className:"space-y-5",children:p.filter(d=>d.setting_key.includes("password")).map(d=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("label",{className:"block font-medium text-gray-900 text-sm",children:u(d.setting_key)}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:d.description})]}),e.jsx("div",{className:"flex-shrink-0",children:i(d)})]},d.setting_key))})]}),e.jsxs("div",{className:"bg-white/30 backdrop-blur-sm rounded-xl p-6 border border-white/40",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Session Management"}),e.jsx("div",{className:"space-y-5",children:p.filter(d=>d.setting_key.includes("session")).map(d=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("label",{className:"block font-medium text-gray-900 text-sm",children:u(d.setting_key)}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:d.description})]}),e.jsx("div",{className:"flex-shrink-0",children:i(d)})]},d.setting_key))})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:r,disabled:T,className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-blue-500 text-white font-medium rounded-lg hover:from-blue-700 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:T?"Saving Changes...":"Save Changes"})})]})]})}function Te(){const[p,N]=t.useState([]),[n,k]=t.useState(!0),[T,P]=t.useState(""),[C,b]=t.useState(""),[c,v]=t.useState("all"),[A,j]=t.useState(!1),[r,i]=t.useState(!1),[u,d]=t.useState({id:null,code:"",category:"Individual Therapy",type:"CPT4",description:"",standard_duration_minutes:50,standard_fee:"",is_active:1,is_addon:0,requires_primary_code:"",sort_order:0}),[l,g]=t.useState(""),[E,M]=t.useState(!1),R=["Individual Therapy","Family Therapy","Group Therapy","Intake","Crisis","Assessment","Case Management","Non-Billable","Other"];t.useEffect(()=>{$()},[]);const $=async()=>{try{k(!0);const x=await fetch("/custom/api/cpt_codes.php",{credentials:"include"});if(!x.ok)throw new Error("Failed to fetch CPT codes");const I=await x.json();N(I.cpt_codes||[])}catch(x){P(x.message)}finally{k(!1)}},y=()=>{d({id:null,code:"",category:"Individual Therapy",type:"CPT4",description:"",standard_duration_minutes:50,standard_fee:"",is_active:1,is_addon:0,requires_primary_code:"",sort_order:0}),g(""),j(!0)},S=x=>{d({id:x.id,code:x.code,category:x.category,type:x.type,description:x.description,standard_duration_minutes:x.standard_duration_minutes,standard_fee:x.standard_fee||"",is_active:x.is_active,is_addon:x.is_addon,requires_primary_code:x.requires_primary_code||"",sort_order:x.sort_order}),g(""),i(!0)},m=async()=>{if(g(""),!u.code.trim()){g("CPT code is required");return}if(!u.description.trim()){g("Description is required");return}try{M(!0);const x=u.id?"update":"create",I=await fetch("/custom/api/cpt_codes.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:x,...u})}),s=await I.json();if(!I.ok||!s.success)throw new Error(s.error||"Failed to save CPT code");await $(),j(!1),i(!1)}catch(x){g(x.message)}finally{M(!1)}},z=async x=>{if(confirm("Are you sure you want to delete this CPT code? This cannot be undone."))try{const I=await fetch("/custom/api/cpt_codes.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete",id:x})}),s=await I.json();if(!I.ok||!s.success)throw new Error(s.error||"Failed to delete CPT code");await $()}catch(I){P(I.message)}},F=async x=>{try{const I=await fetch("/custom/api/cpt_codes.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",id:x.id,is_active:x.is_active?0:1})}),s=await I.json();if(!I.ok||!s.success)throw new Error(s.error||"Failed to update status");await $()}catch(I){P(I.message)}},w=p.filter(x=>{const I=x.code.toLowerCase().includes(C.toLowerCase())||x.description.toLowerCase().includes(C.toLowerCase()),s=c==="all"||x.category===c;return I&&s}).sort((x,I)=>{const s=x.code.toString(),a=I.code.toString();return s.localeCompare(a,void 0,{numeric:!0})}),f=[...new Set(p.map(x=>x.category))];return n?e.jsx("div",{className:"glass-card p-8",children:e.jsx("div",{className:"text-center text-gray-600",children:"Loading CPT codes..."})}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"CPT Codes"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage billing codes for clinical services"})]}),e.jsx(B,{onClick:y,children:"+ Add CPT Code"})]}),T&&e.jsx(U,{children:T}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search codes or descriptions...",value:C,onChange:x=>b(x.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsxs("select",{value:c,onChange:x=>v(x.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Categories"}),f.map(x=>e.jsx("option",{value:x,children:x},x))]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Code"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Duration"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Fee"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:w.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:"No CPT codes found"})}):w.map(x=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-4 py-3 text-sm font-mono font-semibold text-gray-900",children:[x.code,x.is_addon===1&&e.jsx("span",{className:"ml-2 text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded",children:"Add-on"})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:x.category}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:x.description}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700 text-center",children:[x.standard_duration_minutes," min"]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right font-medium",children:x.standard_fee?`$${parseFloat(x.standard_fee).toFixed(2)}`:"—"}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>F(x),className:`px-3 py-1 text-xs rounded-full ${x.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:x.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-4 py-3 text-center",children:[e.jsx("button",{onClick:()=>S(x),className:"text-blue-600 hover:text-blue-800 mr-3",children:"Edit"}),e.jsx(Z,{onClick:()=>z(x.id),children:"Delete"})]})]},x.id))})]})}),e.jsx(q,{isOpen:A||r,onClose:()=>{j(!1),i(!1)},title:u.id?"Edit CPT Code":"Add CPT Code",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[l&&e.jsx(U,{children:l}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(h,{children:["CPT Code ",e.jsx(J,{})]}),e.jsx("input",{type:"text",value:u.code,onChange:x=>d({...u,code:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"90834"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Category"}),e.jsx("select",{value:u.category,onChange:x=>d({...u,category:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:R.map(x=>e.jsx("option",{value:x,children:x},x))})]})]}),e.jsxs("div",{children:[e.jsxs(h,{children:["Description ",e.jsx(J,{})]}),e.jsx("input",{type:"text",value:u.description,onChange:x=>d({...u,description:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Psychotherapy 45-50 minutes"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Standard Duration (minutes)"}),e.jsx("input",{type:"number",value:u.standard_duration_minutes,onChange:x=>d({...u,standard_duration_minutes:parseInt(x.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Standard Fee ($)"}),e.jsx("input",{type:"number",step:"0.01",value:u.standard_fee,onChange:x=>d({...u,standard_fee:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"150.00"})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.is_addon===1,onChange:x=>d({...u,is_addon:x.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Add-on Code"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.is_active===1,onChange:x=>d({...u,is_active:x.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Active"})]})]}),u.is_addon===1&&e.jsxs("div",{children:[e.jsx(h,{children:"Requires Primary Code"}),e.jsx("input",{type:"text",value:u.requires_primary_code,onChange:x=>d({...u,requires_primary_code:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"90834"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Which primary CPT code is required for this add-on?"})]}),e.jsxs(q.Footer,{children:[e.jsx(W,{onClick:()=>{j(!1),i(!1)},disabled:E,children:"Cancel"}),e.jsx(B,{onClick:m,disabled:E,children:E?"Saving...":"Save CPT Code"})]})]})})]})}function Ae(){const[p,N]=t.useState([]),[n,k]=t.useState(!0),[T,P]=t.useState(""),[C,b]=t.useState(""),[c,v]=t.useState("all"),[A,j]=t.useState(!1),[r,i]=t.useState(!1),[u,d]=t.useState({id:null,code:"",description:"",modifier_type:"clinician",is_active:1,sort_order:0}),[l,g]=t.useState(""),[E,M]=t.useState(!1),R=[{value:"telehealth",label:"Telehealth"},{value:"clinician",label:"Clinician Type"},{value:"administrative",label:"Administrative"},{value:"mh-specific",label:"MH-Specific"}];t.useEffect(()=>{$()},[]);const $=async()=>{try{k(!0);const f=await fetch("/custom/api/billing_modifiers.php",{credentials:"include"});if(!f.ok)throw new Error("Failed to fetch billing modifiers");const x=await f.json();N(x.modifiers||[])}catch(f){P(f.message)}finally{k(!1)}},y=()=>{d({id:null,code:"",description:"",modifier_type:"clinician",is_active:1,sort_order:0}),g(""),j(!0)},S=f=>{d({id:f.id,code:f.code,description:f.description,modifier_type:f.modifier_type,is_active:f.is_active,sort_order:f.sort_order}),g(""),i(!0)},m=async()=>{if(g(""),!u.code.trim()){g("Modifier code is required");return}if(!u.description.trim()){g("Description is required");return}try{M(!0);const f=u.id?"update":"create",x=await fetch("/custom/api/billing_modifiers.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:f,...u})}),I=await x.json();if(!x.ok||!I.success)throw new Error(I.error||"Failed to save modifier");await $(),j(!1),i(!1)}catch(f){g(f.message)}finally{M(!1)}},z=async f=>{if(confirm("Are you sure you want to delete this modifier? This cannot be undone."))try{const x=await fetch("/custom/api/billing_modifiers.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete",id:f})}),I=await x.json();if(!x.ok||!I.success)throw new Error(I.error||"Failed to delete modifier");await $()}catch(x){P(x.message)}},F=async f=>{try{const x=await fetch("/custom/api/billing_modifiers.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",id:f.id,is_active:f.is_active?0:1})}),I=await x.json();if(!x.ok||!I.success)throw new Error(I.error||"Failed to update status");await $()}catch(x){P(x.message)}},w=p.filter(f=>{const x=f.code.toLowerCase().includes(C.toLowerCase())||f.description.toLowerCase().includes(C.toLowerCase()),I=c==="all"||f.modifier_type===c;return x&&I});return n?e.jsx("div",{className:"glass-card p-8",children:e.jsx("div",{className:"text-center text-gray-600",children:"Loading billing modifiers..."})}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Billing Modifiers"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage CPT code modifiers for billing"})]}),e.jsx(B,{onClick:y,children:"+ Add Modifier"})]}),T&&e.jsx(U,{children:T}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search modifiers...",value:C,onChange:f=>b(f.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsxs("select",{value:c,onChange:f=>v(f.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Types"}),R.map(f=>e.jsx("option",{value:f.value,children:f.label},f.value))]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Code"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:w.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-4 py-8 text-center text-gray-500",children:"No modifiers found"})}):w.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-mono font-semibold text-gray-900",children:f.code}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${f.modifier_type==="telehealth"?"bg-blue-100 text-blue-700":f.modifier_type==="clinician"?"bg-green-100 text-green-700":f.modifier_type==="administrative"?"bg-purple-100 text-purple-700":"bg-orange-100 text-orange-700"}`,children:R.find(x=>x.value===f.modifier_type)?.label})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:f.description}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>F(f),className:`px-3 py-1 text-xs rounded-full ${f.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:f.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-4 py-3 text-center",children:[e.jsx("button",{onClick:()=>S(f),className:"text-blue-600 hover:text-blue-800 mr-3",children:"Edit"}),e.jsx(Z,{onClick:()=>z(f.id),children:"Delete"})]})]},f.id))})]})}),e.jsx(q,{isOpen:A||r,onClose:()=>{j(!1),i(!1)},title:u.id?"Edit Modifier":"Add Modifier",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[l&&e.jsx(U,{children:l}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(h,{children:["Modifier Code ",e.jsx(J,{})]}),e.jsx("input",{type:"text",value:u.code,onChange:f=>d({...u,code:f.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"HO",maxLength:"10"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Type"}),e.jsx("select",{value:u.modifier_type,onChange:f=>d({...u,modifier_type:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:R.map(f=>e.jsx("option",{value:f.value,children:f.label},f.value))})]})]}),e.jsxs("div",{children:[e.jsxs(h,{children:["Description ",e.jsx(J,{})]}),e.jsx("input",{type:"text",value:u.description,onChange:f=>d({...u,description:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Master's Level Therapist"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:u.is_active===1,onChange:f=>d({...u,is_active:f.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Active"})]})}),e.jsxs(q.Footer,{children:[e.jsx(W,{onClick:()=>{j(!1),i(!1)},disabled:E,children:"Cancel"}),e.jsx(B,{onClick:m,disabled:E,children:E?"Saving...":"Save Modifier"})]})]})})]})}const se=[{value:"commercial",label:"Commercial"},{value:"medicare",label:"Medicare"},{value:"medicaid",label:"Medicaid"},{value:"tricare",label:"TRICARE"},{value:"self_pay",label:"Self-Pay"},{value:"other",label:"Other"}],Me=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY","DC"],le={id:null,name:"",payer_id:"",phone:"",fax:"",email:"",website:"",address_line1:"",address_line2:"",city:"",state:"",zip:"",claims_address:"",claims_phone:"",claims_email:"",insurance_type:"commercial",is_active:1};function Pe(){const[p,N]=t.useState([]),[n,k]=t.useState(!0),[T,P]=t.useState(""),[C,b]=t.useState(""),[c,v]=t.useState("all"),[A,j]=t.useState(!1),[r,i]=t.useState(!1),[u,d]=t.useState(!1),[l,g]=t.useState({...le}),[E,M]=t.useState(""),[R,$]=t.useState(!1);t.useEffect(()=>{y()},[A]);const y=async()=>{try{k(!0);const a=await fetch(A?"/custom/api/insurance_providers.php?include_inactive=true":"/custom/api/insurance_providers.php",{credentials:"include"});if(!a.ok)throw new Error("Failed to fetch insurance providers");const o=await a.json();N(o.providers||[])}catch(s){P(s.message)}finally{k(!1)}},S=()=>{g({...le}),M(""),i(!0)},m=s=>{g({id:s.id,name:s.name||"",payer_id:s.payer_id||"",phone:s.phone||"",fax:s.fax||"",email:s.email||"",website:s.website||"",address_line1:s.address_line1||"",address_line2:s.address_line2||"",city:s.city||"",state:s.state||"",zip:s.zip||"",claims_address:s.claims_address||"",claims_phone:s.claims_phone||"",claims_email:s.claims_email||"",insurance_type:s.insurance_type||"commercial",is_active:s.is_active}),M(""),d(!0)},z=async()=>{if(M(""),!l.name.trim()){M("Insurance company name is required");return}try{$(!0);const s=l.id?"update":"create",a=await fetch("/custom/api/insurance_providers.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:s,...l})}),o=await a.json();if(!a.ok||!o.success)throw new Error(o.error||"Failed to save insurance provider");await y(),i(!1),d(!1)}catch(s){M(s.message)}finally{$(!1)}},F=async s=>{if(confirm("Are you sure you want to delete this insurance provider? This cannot be undone."))try{const a=await fetch("/custom/api/insurance_providers.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete",id:s})}),o=await a.json();if(!a.ok||!o.success)throw new Error(o.error||"Failed to delete insurance provider");await y()}catch(a){P(a.message)}},w=async s=>{try{const a=await fetch("/custom/api/insurance_providers.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",id:s.id,is_active:s.is_active?0:1})}),o=await a.json();if(!a.ok||!o.success)throw new Error(o.error||"Failed to update status");await y()}catch(a){P(a.message)}},f=s=>{const a=se.find(o=>o.value===s);return a?a.label:s},x=s=>{switch(s){case"medicare":return"bg-blue-100 text-blue-700";case"medicaid":return"bg-purple-100 text-purple-700";case"tricare":return"bg-green-100 text-green-700";case"self_pay":return"bg-gray-100 text-gray-700";case"commercial":return"bg-indigo-100 text-indigo-700";default:return"bg-gray-100 text-gray-700"}},I=p.filter(s=>{const a=s.name.toLowerCase().includes(C.toLowerCase())||s.payer_id&&s.payer_id.toLowerCase().includes(C.toLowerCase()),o=c==="all"||s.insurance_type===c;return a&&o}).sort((s,a)=>s.name.localeCompare(a.name));return n?e.jsx("div",{className:"glass-card p-8",children:e.jsx("div",{className:"text-center text-gray-600",children:"Loading insurance providers..."})}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Insurance Providers"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage insurance companies and payers"})]}),e.jsx(B,{onClick:S,children:"+ Add Insurance Provider"})]}),T&&e.jsxs(U,{children:[T,e.jsx("button",{onClick:()=>P(""),className:"ml-2 text-red-800 hover:text-red-900",children:"×"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search by name or payer ID...",value:C,onChange:s=>b(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsxs("select",{value:c,onChange:s=>v(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Types"}),se.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})}),e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:A,onChange:s=>j(s.target.checked),className:"checkbox mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Show inactive providers"})]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Payer ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Phone"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:I.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:"No insurance providers found"})}):I.map(s=>e.jsxs("tr",{className:`hover:bg-gray-50 ${s.is_active?"":"opacity-60"}`,children:[e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-900",children:s.name}),e.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-700",children:s.payer_id||"—"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${x(s.insurance_type)}`,children:f(s.insurance_type)})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.phone||"—"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:s.city&&s.state?`${s.city}, ${s.state}`:"—"}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>w(s),className:`px-3 py-1 text-xs rounded-full ${s.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:s.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-4 py-3 text-center",children:[e.jsx("button",{onClick:()=>m(s),className:"text-blue-600 hover:text-blue-800 mr-3",children:"Edit"}),e.jsx(Z,{onClick:()=>F(s.id),children:"Delete"})]})]},s.id))})]})}),e.jsxs(q,{isOpen:r||u,onClose:()=>{i(!1),d(!1)},title:l.id?"Edit Insurance Provider":"Add Insurance Provider",size:"lg",children:[e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[E&&e.jsx(U,{children:E}),e.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsxs(h,{children:["Company Name ",e.jsx(J,{})]}),e.jsx("input",{type:"text",value:l.name,onChange:s=>g({...l,name:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Blue Cross Blue Shield"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Payer ID"}),e.jsx("input",{type:"text",value:l.payer_id,onChange:s=>g({...l,payer_id:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"00060"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"EDI Payer ID for electronic claims"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Insurance Type"}),e.jsx("select",{value:l.insurance_type,onChange:s=>g({...l,insurance_type:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:se.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Phone"}),e.jsx("input",{type:"tel",value:l.phone,onChange:s=>g({...l,phone:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"(800) 555-1234"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Fax"}),e.jsx("input",{type:"tel",value:l.fax,onChange:s=>g({...l,fax:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"(800) 555-1235"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Email"}),e.jsx("input",{type:"email",value:l.email,onChange:s=>g({...l,email:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"provider@insurance.com"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Website"}),e.jsx("input",{type:"url",value:l.website,onChange:s=>g({...l,website:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://www.insurance.com"})]})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Address"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx(h,{children:"Street Address"}),e.jsx("input",{type:"text",value:l.address_line1,onChange:s=>g({...l,address_line1:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"123 Insurance Way"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(h,{children:"Address Line 2"}),e.jsx("input",{type:"text",value:l.address_line2,onChange:s=>g({...l,address_line2:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Suite 100"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"City"}),e.jsx("input",{type:"text",value:l.city,onChange:s=>g({...l,city:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(h,{children:"State"}),e.jsxs("select",{value:l.state,onChange:s=>g({...l,state:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"—"}),Me.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx(h,{children:"ZIP"}),e.jsx("input",{type:"text",value:l.zip,onChange:s=>g({...l,zip:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"12345",maxLength:10})]})]})]})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Claims Submission"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx(h,{children:"Claims Mailing Address"}),e.jsx("textarea",{value:l.claims_address,onChange:s=>g({...l,claims_address:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2,placeholder:`P.O. Box 12345
Claims Department
City, State ZIP`})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Claims Phone"}),e.jsx("input",{type:"tel",value:l.claims_phone,onChange:s=>g({...l,claims_phone:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"(800) 555-CLMS"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Claims Email"}),e.jsx("input",{type:"email",value:l.claims_email,onChange:s=>g({...l,claims_email:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"claims@insurance.com"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.is_active===1,onChange:s=>g({...l,is_active:s.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Active"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"Inactive providers won't appear in client insurance dropdowns"})]})]}),e.jsxs(q.Footer,{children:[e.jsx(W,{onClick:()=>{i(!1),d(!1)},disabled:R,children:"Cancel"}),e.jsx(B,{onClick:z,disabled:R,children:R?"Saving...":"Save Insurance Provider"})]})]})]})}function Le(){const[p,N]=t.useState({supervision_require_cosign:!1}),[n,k]=t.useState(!0),[T,P]=t.useState(!1),[C,b]=t.useState(null),[c,v]=t.useState(null);t.useEffect(()=>{A()},[]);const A=async()=>{try{k(!0);const i=await fetch("/custom/api/settings.php?category=supervision",{credentials:"include"});if(!i.ok)throw new Error("Failed to fetch settings");const u=await i.json(),d={};(u.settings||[]).forEach(l=>{d[l.setting_key]=l.setting_value==="1"||l.setting_value==="true"}),N(l=>({...l,...d})),b(null)}catch(i){console.error("Error fetching settings:",i),b(i.message)}finally{k(!1)}},j=async()=>{try{P(!0),b(null),v(null);const i=await fetch("/custom/api/settings.php",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:{"supervision.require_cosign":p.supervision_require_cosign?"1":"0"}})}),u=await i.json();if(!i.ok)throw new Error(u.error||"Failed to save settings");v("Settings saved successfully"),setTimeout(()=>v(null),3e3)}catch(i){console.error("Error saving settings:",i),b(i.message)}finally{P(!1)}},r=i=>{N(u=>({...u,[i]:!u[i]}))};return n?e.jsx("div",{className:"glass-card p-6",children:e.jsx("div",{className:"text-center text-gray-600",children:"Loading settings..."})}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Clinical Settings"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Configure clinical documentation and supervision settings"}),C&&e.jsx(U,{className:"mb-4",children:C}),c&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm",children:c}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 pb-2 border-b border-gray-200",children:"Supervision Settings"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("label",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:p.supervision_require_cosign||!1,onChange:()=>r("supervision_require_cosign"),className:"mt-1 w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"block font-medium text-gray-800",children:"Require Supervisor Co-signature on Notes"}),e.jsx("span",{className:"block text-sm text-gray-600 mt-1",children:"When enabled, clinical notes from providers who have assigned supervisors will require their supervisor to co-sign before the note is fully locked. The provider can still sign and lock their portion, but a supervisor review will be required."})]})]})})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:e.jsx(B,{onClick:j,disabled:T,children:T?"Saving...":"Save Settings"})})]})}const te=[{key:"client_confirmation",label:"New Appointment - Client",description:"Sent to clients when a new appointment is created"},{key:"provider_confirmation",label:"New Appointment - Provider",description:"Sent to providers when a new appointment is created"},{key:"client_cancellation",label:"Cancellation - Client",description:"Sent to clients when an appointment is cancelled"},{key:"provider_cancellation",label:"Cancellation - Provider",description:"Sent to providers when an appointment is cancelled"},{key:"client_modification",label:"Modification - Client",description:"Sent to clients when an appointment is modified"},{key:"provider_modification",label:"Modification - Provider",description:"Sent to providers when an appointment is modified"}],Fe=[{var:"{{client_name}}",desc:"Client full name"},{var:"{{provider_name}}",desc:"Provider full name"},{var:"{{appointment_date}}",desc:"Formatted date (e.g., Monday, January 15, 2026)"},{var:"{{appointment_time}}",desc:"Formatted time (e.g., 2:30 PM)"},{var:"{{duration}}",desc:"Appointment duration in minutes"},{var:"{{appointment_type}}",desc:"Type of appointment"},{var:"{{practice_name}}",desc:"Practice name (from email settings)"},{var:"{{cancellation_reason}}",desc:"Reason for cancellation (cancellation emails only)"}];function Ie(){const[p,N]=t.useState("settings"),[n,k]=t.useState(!0),[T,P]=t.useState(!1),[C,b]=t.useState(null),[c,v]=t.useState({enabled:!1,from_email:"",from_name:"SanctumEMHR",smtp_host:"",smtp_port:"587",smtp_user:"",smtp_password:"",smtp_encryption:"tls",notify_client_on_appointment:!0,notify_provider_on_appointment:!0,notify_client_on_cancelled:!0,notify_provider_on_cancelled:!0,notify_client_on_modified:!0,notify_provider_on_modified:!0}),[A,j]=t.useState({}),[r,i]=t.useState({}),[u,d]=t.useState("client_confirmation"),[l,g]=t.useState(!1);t.useEffect(()=>{E()},[]);const E=async()=>{try{k(!0),b(null);const m=await fetch("/custom/api/email_settings.php",{credentials:"include"});if(!m.ok)throw new Error("Failed to load email settings");const z=await m.json();z.settings&&(v(F=>({...F,...z.settings,smtp_password:""})),g(z.settings.smtp_password_set||!1)),z.templates&&j(z.templates),z.defaultTemplates&&i(z.defaultTemplates)}catch(m){console.error("Error loading email settings:",m),b({type:"error",text:m.message})}finally{k(!1)}},M=async()=>{try{P(!0),b(null);const m=await fetch("/custom/api/email_settings.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),z=await m.json();if(!m.ok)throw new Error(z.error||"Failed to save settings");b({type:"success",text:"Email settings saved successfully!"}),c.smtp_password&&(g(!0),v(F=>({...F,smtp_password:""}))),setTimeout(()=>b(null),3e3)}catch(m){console.error("Error saving email settings:",m),b({type:"error",text:m.message})}finally{P(!1)}},R=async()=>{try{P(!0),b(null);const m=await fetch("/custom/api/email_settings.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({templates:A})}),z=await m.json();if(!m.ok)throw new Error(z.error||"Failed to save templates");b({type:"success",text:"Email templates saved successfully!"}),setTimeout(()=>b(null),3e3)}catch(m){console.error("Error saving email templates:",m),b({type:"error",text:m.message})}finally{P(!1)}},$=m=>{r[`${m}_subject`]&&r[`${m}_body`]&&j(z=>({...z,[`${m}_subject`]:r[`${m}_subject`],[`${m}_body`]:r[`${m}_body`]}))},y=(m,z)=>{v(F=>({...F,[m]:z}))},S=(m,z)=>{j(F=>({...F,[m]:z}))};return n?e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"glass-card p-6 mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Email Settings"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Configure email notifications for appointments"})]}),e.jsx("div",{className:"glass-card p-6",children:e.jsx("div",{className:"text-center text-gray-700 py-8",children:"Loading email settings..."})})]}):e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"glass-card p-6 mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Email Settings"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Configure email notifications for appointments"})]}),e.jsxs(K,{className:"mb-6",children:[e.jsx(V,{active:p==="settings",onClick:()=>N("settings"),children:"Settings"}),e.jsx(V,{active:p==="templates",onClick:()=>N("templates"),children:"Email Templates"})]}),e.jsxs("div",{className:"glass-card p-6",children:[C&&e.jsx("div",{className:`mb-6 px-4 py-3 rounded-lg ${C.type==="success"?"bg-green-100/60 border-green-300/50 text-green-700":"bg-red-100/60 border-red-300/50 text-red-700"} border`,children:C.text}),p==="settings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.enabled,onChange:m=>y("enabled",m.target.checked),className:"checkbox"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Enable Email Notifications"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-8",children:"Send email notifications for appointment events"})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sender Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{children:"From Email Address"}),e.jsx("input",{type:"email",value:c.from_email,onChange:m=>y("from_email",m.target.value),placeholder:"noreply@yourpractice.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email address notifications will be sent from"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"From Name"}),e.jsx("input",{type:"text",value:c.from_name,onChange:m=>y("from_name",m.target.value),placeholder:"Your Practice Name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Display name shown to recipients"})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"SMTP Configuration"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Configure your mail server settings. Leave blank to use the server's default mail settings."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{children:"SMTP Host"}),e.jsx("input",{type:"text",value:c.smtp_host,onChange:m=>y("smtp_host",m.target.value),placeholder:"smtp.yourprovider.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"SMTP Port"}),e.jsx("input",{type:"text",value:c.smtp_port,onChange:m=>y("smtp_port",m.target.value),placeholder:"587",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"SMTP Username"}),e.jsx("input",{type:"text",value:c.smtp_user,onChange:m=>y("smtp_user",m.target.value),placeholder:"username@yourprovider.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"SMTP Password"}),e.jsx("input",{type:"password",value:c.smtp_password,onChange:m=>y("smtp_password",m.target.value),placeholder:l?"••••••••":"Enter password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50"}),l&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Password is set. Leave blank to keep current password."})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Encryption"}),e.jsxs("select",{value:c.smtp_encryption,onChange:m=>y("smtp_encryption",m.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:[e.jsx("option",{value:"tls",children:"TLS (Recommended)"}),e.jsx("option",{value:"ssl",children:"SSL"}),e.jsx("option",{value:"none",children:"None"})]})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Notification Preferences"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"New Appointments"}),e.jsxs("div",{className:"space-y-2 ml-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.notify_client_on_appointment,onChange:m=>y("notify_client_on_appointment",m.target.checked),className:"checkbox"}),e.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"Notify clients when appointments are created"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.notify_provider_on_appointment,onChange:m=>y("notify_provider_on_appointment",m.target.checked),className:"checkbox"}),e.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"Notify clinicians when appointments are created"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Cancelled Appointments"}),e.jsxs("div",{className:"space-y-2 ml-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.notify_client_on_cancelled,onChange:m=>y("notify_client_on_cancelled",m.target.checked),className:"checkbox"}),e.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"Notify clients when appointments are cancelled"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.notify_provider_on_cancelled,onChange:m=>y("notify_provider_on_cancelled",m.target.checked),className:"checkbox"}),e.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"Notify clinicians when appointments are cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Modified Appointments"}),e.jsxs("div",{className:"space-y-2 ml-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.notify_client_on_modified,onChange:m=>y("notify_client_on_modified",m.target.checked),className:"checkbox"}),e.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"Notify clients when appointment date/time changes"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:c.notify_provider_on_modified,onChange:m=>y("notify_provider_on_modified",m.target.checked),className:"checkbox"}),e.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"Notify clinicians when appointment date/time changes"})]})]})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsx(B,{onClick:M,disabled:T,children:T?"Saving...":"Save Settings"})})]}),p==="templates"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Template Type"}),e.jsx("div",{className:"space-y-1",children:te.map(m=>e.jsx("button",{onClick:()=>d(m.key),className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors ${u===m.key?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:m.label},m.key))})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:te.find(m=>m.key===u)?.label}),e.jsx("p",{className:"text-sm text-gray-500",children:te.find(m=>m.key===u)?.description})]}),e.jsx(W,{onClick:()=>$(u),children:"Reset to Default"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(h,{children:"Subject Line"}),e.jsx("input",{type:"text",value:A[`${u}_subject`]||"",onChange:m=>S(`${u}_subject`,m.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50"})]}),e.jsxs("div",{children:[e.jsx(h,{children:"Email Body"}),e.jsx("textarea",{value:A[`${u}_body`]||"",onChange:m=>S(`${u}_body`,m.target.value),rows:12,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50 font-mono text-sm"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Available Variables"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:Fe.map(m=>e.jsxs("div",{className:"flex items-start",children:[e.jsx("code",{className:"bg-gray-200 px-1 py-0.5 rounded text-blue-700 mr-2 whitespace-nowrap",children:m.var}),e.jsx("span",{className:"text-gray-600",children:m.desc})]},m.var))})]})]})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsx(B,{onClick:R,disabled:T,children:T?"Saving...":"Save Templates"})})]})]})]})}function Oe(){return e.jsxs("div",{className:"glass-card p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"About SanctumEMHR EMHR"}),e.jsxs("div",{className:"flex items-center justify-between mb-8 pb-6 border-b border-white/30",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-48 h-48 backdrop-blur-xl bg-white/40 rounded-2xl flex items-center justify-center p-3 shadow-lg",children:e.jsx("img",{src:"/app/SanctumLogo.jpg",alt:"SanctumEMHR Logo",className:"w-full h-full object-contain"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:"SanctumEMHR"}),e.jsx("p",{className:"text-lg text-gray-700 mt-1",children:"Electronic Mental Health Records"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2 italic",children:"Where modern design meets clinical insight"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-900 font-semibold",children:"Kenneth J. Nelan"}),e.jsx("p",{className:"text-gray-700 mt-1",children:"Sacred Wandering"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Version Information"}),e.jsxs("div",{className:"bg-white/40 backdrop-blur-sm rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Version:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:"0.3.0-alpha"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Release Stage:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:"Alpha Testing"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Build Date:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]})]}),e.jsxs("div",{className:"bg-blue-50/60 backdrop-blur-sm rounded-lg p-6 border border-blue-200/50",children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-3",children:"What is EMHR?"}),e.jsx("div",{className:"mb-4 pb-4 border-b border-blue-200/30",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"SanctumEMHR is a purpose-built Electronic Mental Health Records (EMHR) system designed specifically for outpatient mental health practices. Combining modern design principles with specialized clinical functionality, SanctumEMHR streamlines client management, appointment scheduling, clinical documentation, and billing workflows—all within a beautiful, intuitive interface."})}),e.jsxs("p",{className:"text-gray-700 leading-relaxed mb-4",children:[e.jsx("strong",{className:"text-blue-900",children:"EMHR (Electronic Mental Health Records)"})," is a term we've introduced to distinguish mental health-specific documentation systems from general medical EMRs. While EMRs focus on physical health, EMHRs are purpose-built for the unique workflows, documentation requirements, and clinical needs of mental health and behavioral health practices."]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"SanctumEMHR represents a new generation of EMHR systems designed from the ground up for outpatient mental health providers, combining modern UX with specialized clinical functionality."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Current Features"}),e.jsx("div",{className:"bg-white/40 backdrop-blur-sm rounded-lg p-4",children:e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Client management with comprehensive demographics"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Calendar with day/week/month views"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Appointment creation and scheduling"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Insurance and billing information tracking"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Guardian/related persons management"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Modern glassmorphism UI design"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"HIPAA-compliant security and encryption"})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"System Information"}),e.jsxs("div",{className:"bg-white/40 backdrop-blur-sm rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Frontend Framework:"}),e.jsx("span",{className:"text-gray-900",children:"React 18 + Vite"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Styling:"}),e.jsx("span",{className:"text-gray-900",children:"Tailwind CSS v4"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Authentication:"}),e.jsx("span",{className:"text-gray-900",children:"Session-based (PHP)"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Database:"}),e.jsx("span",{className:"text-gray-900",children:"MySQL/MariaDB"})]})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50/80 to-purple-50/80 backdrop-blur-sm rounded-lg p-6 border border-white/50",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 font-semibold text-lg",children:"SanctumEMHR is Copyright © 2026 Sacred Wandering"}),e.jsx("p",{className:"text-gray-700 font-medium mt-1",children:"Proprietary and Confidential"})]}),e.jsxs("div",{className:"pt-3 border-t border-white/50",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"This software is licensed for authorized use only."}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Unauthorized copying, modification, distribution, or use is strictly prohibited."})]})]})})]})]})}function He(){const[p,N]=t.useState("calendar-settings"),[n,k]=t.useState({system:!0,clinical:!0,scheduling:!0,billing:!0,communications:!0,organization:!0}),T=[{id:"system",label:"System",icon:"⚙️",sections:[{id:"security",label:"Security",available:!0},{id:"appearance",label:"Appearance",available:!1},{id:"features",label:"Features",available:!1}]},{id:"clinical",label:"Documentation",icon:"🏥",sections:[{id:"clinical-settings",label:"Clinical Settings",available:!0},{id:"reference-lists",label:"Reference Lists",available:!0},{id:"document-categories",label:"Document Categories",available:!0},{id:"icd10-codes",label:"ICD-10 Codes",available:!0}]},{id:"scheduling",label:"Calendar",icon:"📅",sections:[{id:"calendar-settings",label:"Calendar Settings",available:!0}]},{id:"billing",label:"Billing",icon:"💰",sections:[{id:"cpt-codes",label:"CPT Codes",available:!0},{id:"billing-modifiers",label:"Billing Modifiers",available:!0},{id:"insurance-providers",label:"Insurance Providers",available:!0},{id:"billing-settings",label:"Billing Settings",available:!1},{id:"payment-methods",label:"Payment Methods",available:!1}]},{id:"communications",label:"Communications",icon:"💬",sections:[{id:"sms-settings",label:"SMS Settings",available:!1},{id:"email-settings",label:"Email Settings",available:!0}]},{id:"organization",label:"Organization",icon:"🏢",sections:[{id:"facilities",label:"Facilities",available:!0},{id:"users",label:"Users",available:!0}]}],P=C=>{k(b=>({...b,[C]:!b[C]}))};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"glass-card p-6 mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Settings"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage system configuration and preferences"})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-72 flex-shrink-0",children:e.jsx("div",{className:"glass-card p-4",children:e.jsxs("nav",{className:"space-y-1",children:[T.map(C=>e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>P(C.id),className:"w-full flex items-center justify-between px-3 py-2 text-label text-sm hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:C.icon}),e.jsx("span",{children:C.label})]}),e.jsx("svg",{className:`w-4 h-4 transition-transform ${n[C.id]?"":"rotate-90"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),!n[C.id]&&e.jsx("div",{className:"ml-4 mt-1 space-y-1",children:C.sections.map(b=>e.jsxs("button",{onClick:()=>b.available&&N(b.id),disabled:!b.available,className:`w-full text-left px-4 py-2 rounded-lg transition-colors text-sm ${p===b.id?"bg-blue-600 text-white font-medium":b.available?"hover:bg-gray-100 text-gray-700":"text-gray-400 cursor-not-allowed"}`,children:[b.label,!b.available&&e.jsx("span",{className:"text-xs ml-2",children:"(Soon)"})]},b.id))})]},C.id)),e.jsx("div",{className:"border-t border-gray-200 my-2"}),e.jsxs("button",{onClick:()=>N("about"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors text-sm flex items-center gap-2 ${p==="about"?"bg-blue-600 text-white font-medium":"hover:bg-gray-100 text-gray-700"}`,children:[e.jsx("span",{children:"ℹ️"}),e.jsx("span",{children:"About"})]})]})})}),e.jsxs("div",{className:"flex-1",children:[p==="security"&&e.jsx(Ee,{}),p==="calendar-settings"&&e.jsx(fe,{}),p==="reference-lists"&&e.jsx(ve,{}),p==="document-categories"&&e.jsx(je,{}),p==="icd10-codes"&&e.jsx(me,{}),p==="clinical-settings"&&e.jsx(Le,{}),p==="cpt-codes"&&e.jsx(Te,{}),p==="billing-modifiers"&&e.jsx(Ae,{}),p==="insurance-providers"&&e.jsx(Pe,{}),p==="facilities"&&e.jsx(we,{}),p==="users"&&e.jsx(Ne,{}),p==="email-settings"&&e.jsx(Ie,{}),p==="about"&&e.jsx(Oe,{}),!["security","calendar-settings","reference-lists","document-categories","icd10-codes","clinical-settings","cpt-codes","billing-modifiers","insurance-providers","facilities","users","email-settings","about"].includes(p)&&e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx("div",{className:"text-gray-700 text-lg font-semibold",children:T.flatMap(C=>C.sections).find(C=>C.id===p)?.label}),e.jsx("p",{className:"text-gray-600 mt-2",children:"This section is coming soon"})]})]})]})]})}export{He as default};
