(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const b of u)if(b.type==="childList")for(const m of b.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function c(u){const b={};return u.integrity&&(b.integrity=u.integrity),u.referrerPolicy&&(b.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?b.credentials="include":u.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function o(u){if(u.ep)return;u.ep=!0;const b=c(u);fetch(u.href,b)}})();function Zg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var po={exports:{}},Nn={};var zh;function Jg(){if(zh)return Nn;zh=1;var n=Symbol.for("react.transitional.element"),d=Symbol.for("react.fragment");function c(o,u,b){var m=null;if(b!==void 0&&(m=""+b),u.key!==void 0&&(m=""+u.key),"key"in u){b={};for(var v in u)v!=="key"&&(b[v]=u[v])}else b=u;return u=b.ref,{$$typeof:n,type:o,key:m,ref:u!==void 0?u:null,props:b}}return Nn.Fragment=d,Nn.jsx=c,Nn.jsxs=c,Nn}var Oh;function Kg(){return Oh||(Oh=1,po.exports=Jg()),po.exports}var e=Kg(),bo={exports:{}},ze={};var Lh;function Ig(){if(Lh)return ze;Lh=1;var n=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),m=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),j=Symbol.iterator;function N(z){return z===null||typeof z!="object"?null:(z=j&&z[j]||z["@@iterator"],typeof z=="function"?z:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,E={};function k(z,B,q){this.props=z,this.context=B,this.refs=E,this.updater=q||x}k.prototype.isReactComponent={},k.prototype.setState=function(z,B){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,B,"setState")},k.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function R(){}R.prototype=k.prototype;function L(z,B,q){this.props=z,this.context=B,this.refs=E,this.updater=q||x}var A=L.prototype=new R;A.constructor=L,C(A,k.prototype),A.isPureReactComponent=!0;var G=Array.isArray;function P(){}var T={H:null,A:null,T:null,S:null},xe=Object.prototype.hasOwnProperty;function ve(z,B,q){var X=q.ref;return{$$typeof:n,type:z,key:B,ref:X!==void 0?X:null,props:q}}function me(z,B){return ve(z.type,B,z.props)}function oe(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function H(z){var B={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(q){return B[q]})}var U=/\/+/g;function ae(z,B){return typeof z=="object"&&z!==null&&z.key!=null?H(""+z.key):B.toString(36)}function D(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(P,P):(z.status="pending",z.then(function(B){z.status==="pending"&&(z.status="fulfilled",z.value=B)},function(B){z.status==="pending"&&(z.status="rejected",z.reason=B)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function _(z,B,q,X,W){var K=typeof z;(K==="undefined"||K==="boolean")&&(z=null);var ie=!1;if(z===null)ie=!0;else switch(K){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(z.$$typeof){case n:case d:ie=!0;break;case w:return ie=z._init,_(ie(z._payload),B,q,X,W)}}if(ie)return W=W(z),ie=X===""?"."+ae(z,0):X,G(W)?(q="",ie!=null&&(q=ie.replace(U,"$&/")+"/"),_(W,B,q,"",function(J){return J})):W!=null&&(oe(W)&&(W=me(W,q+(W.key==null||z&&z.key===W.key?"":(""+W.key).replace(U,"$&/")+"/")+ie)),B.push(W)),1;ie=0;var we=X===""?".":X+":";if(G(z))for(var ke=0;ke<z.length;ke++)X=z[ke],K=we+ae(X,ke),ie+=_(X,B,q,K,W);else if(ke=N(z),typeof ke=="function")for(z=ke.call(z),ke=0;!(X=z.next()).done;)X=X.value,K=we+ae(X,ke++),ie+=_(X,B,q,K,W);else if(K==="object"){if(typeof z.then=="function")return _(D(z),B,q,X,W);throw B=String(z),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return ie}function M(z,B,q){if(z==null)return z;var X=[],W=0;return _(z,X,"","",function(K){return B.call(q,K,W++)}),X}function Q(z){if(z._status===-1){var B=z._result;B=B(),B.then(function(q){(z._status===0||z._status===-1)&&(z._status=1,z._result=q)},function(q){(z._status===0||z._status===-1)&&(z._status=2,z._result=q)}),z._status===-1&&(z._status=0,z._result=B)}if(z._status===1)return z._result.default;throw z._result}var le=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},ge={map:M,forEach:function(z,B,q){M(z,function(){B.apply(this,arguments)},q)},count:function(z){var B=0;return M(z,function(){B++}),B},toArray:function(z){return M(z,function(B){return B})||[]},only:function(z){if(!oe(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return ze.Activity=y,ze.Children=ge,ze.Component=k,ze.Fragment=c,ze.Profiler=u,ze.PureComponent=L,ze.StrictMode=o,ze.Suspense=h,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,ze.__COMPILER_RUNTIME={__proto__:null,c:function(z){return T.H.useMemoCache(z)}},ze.cache=function(z){return function(){return z.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(z,B,q){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var X=C({},z.props),W=z.key;if(B!=null)for(K in B.key!==void 0&&(W=""+B.key),B)!xe.call(B,K)||K==="key"||K==="__self"||K==="__source"||K==="ref"&&B.ref===void 0||(X[K]=B[K]);var K=arguments.length-2;if(K===1)X.children=q;else if(1<K){for(var ie=Array(K),we=0;we<K;we++)ie[we]=arguments[we+2];X.children=ie}return ve(z.type,W,X)},ze.createContext=function(z){return z={$$typeof:m,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:b,_context:z},z},ze.createElement=function(z,B,q){var X,W={},K=null;if(B!=null)for(X in B.key!==void 0&&(K=""+B.key),B)xe.call(B,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(W[X]=B[X]);var ie=arguments.length-2;if(ie===1)W.children=q;else if(1<ie){for(var we=Array(ie),ke=0;ke<ie;ke++)we[ke]=arguments[ke+2];W.children=we}if(z&&z.defaultProps)for(X in ie=z.defaultProps,ie)W[X]===void 0&&(W[X]=ie[X]);return ve(z,K,W)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(z){return{$$typeof:v,render:z}},ze.isValidElement=oe,ze.lazy=function(z){return{$$typeof:w,_payload:{_status:-1,_result:z},_init:Q}},ze.memo=function(z,B){return{$$typeof:p,type:z,compare:B===void 0?null:B}},ze.startTransition=function(z){var B=T.T,q={};T.T=q;try{var X=z(),W=T.S;W!==null&&W(q,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(P,le)}catch(K){le(K)}finally{B!==null&&q.types!==null&&(B.types=q.types),T.T=B}},ze.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},ze.use=function(z){return T.H.use(z)},ze.useActionState=function(z,B,q){return T.H.useActionState(z,B,q)},ze.useCallback=function(z,B){return T.H.useCallback(z,B)},ze.useContext=function(z){return T.H.useContext(z)},ze.useDebugValue=function(){},ze.useDeferredValue=function(z,B){return T.H.useDeferredValue(z,B)},ze.useEffect=function(z,B){return T.H.useEffect(z,B)},ze.useEffectEvent=function(z){return T.H.useEffectEvent(z)},ze.useId=function(){return T.H.useId()},ze.useImperativeHandle=function(z,B,q){return T.H.useImperativeHandle(z,B,q)},ze.useInsertionEffect=function(z,B){return T.H.useInsertionEffect(z,B)},ze.useLayoutEffect=function(z,B){return T.H.useLayoutEffect(z,B)},ze.useMemo=function(z,B){return T.H.useMemo(z,B)},ze.useOptimistic=function(z,B){return T.H.useOptimistic(z,B)},ze.useReducer=function(z,B,q){return T.H.useReducer(z,B,q)},ze.useRef=function(z){return T.H.useRef(z)},ze.useState=function(z){return T.H.useState(z)},ze.useSyncExternalStore=function(z,B,q){return T.H.useSyncExternalStore(z,B,q)},ze.useTransition=function(){return T.H.useTransition()},ze.version="19.2.3",ze}var Uh;function To(){return Uh||(Uh=1,bo.exports=Ig()),bo.exports}var f=To(),vo={exports:{}},wn={},yo={exports:{}},jo={};var Bh;function Wg(){return Bh||(Bh=1,(function(n){function d(_,M){var Q=_.length;_.push(M);e:for(;0<Q;){var le=Q-1>>>1,ge=_[le];if(0<u(ge,M))_[le]=M,_[Q]=ge,Q=le;else break e}}function c(_){return _.length===0?null:_[0]}function o(_){if(_.length===0)return null;var M=_[0],Q=_.pop();if(Q!==M){_[0]=Q;e:for(var le=0,ge=_.length,z=ge>>>1;le<z;){var B=2*(le+1)-1,q=_[B],X=B+1,W=_[X];if(0>u(q,Q))X<ge&&0>u(W,q)?(_[le]=W,_[X]=Q,le=X):(_[le]=q,_[B]=Q,le=B);else if(X<ge&&0>u(W,Q))_[le]=W,_[X]=Q,le=X;else break e}}return M}function u(_,M){var Q=_.sortIndex-M.sortIndex;return Q!==0?Q:_.id-M.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var b=performance;n.unstable_now=function(){return b.now()}}else{var m=Date,v=m.now();n.unstable_now=function(){return m.now()-v}}var h=[],p=[],w=1,y=null,j=3,N=!1,x=!1,C=!1,E=!1,k=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function A(_){for(var M=c(p);M!==null;){if(M.callback===null)o(p);else if(M.startTime<=_)o(p),M.sortIndex=M.expirationTime,d(h,M);else break;M=c(p)}}function G(_){if(C=!1,A(_),!x)if(c(h)!==null)x=!0,P||(P=!0,H());else{var M=c(p);M!==null&&D(G,M.startTime-_)}}var P=!1,T=-1,xe=5,ve=-1;function me(){return E?!0:!(n.unstable_now()-ve<xe)}function oe(){if(E=!1,P){var _=n.unstable_now();ve=_;var M=!0;try{e:{x=!1,C&&(C=!1,R(T),T=-1),N=!0;var Q=j;try{t:{for(A(_),y=c(h);y!==null&&!(y.expirationTime>_&&me());){var le=y.callback;if(typeof le=="function"){y.callback=null,j=y.priorityLevel;var ge=le(y.expirationTime<=_);if(_=n.unstable_now(),typeof ge=="function"){y.callback=ge,A(_),M=!0;break t}y===c(h)&&o(h),A(_)}else o(h);y=c(h)}if(y!==null)M=!0;else{var z=c(p);z!==null&&D(G,z.startTime-_),M=!1}}break e}finally{y=null,j=Q,N=!1}M=void 0}}finally{M?H():P=!1}}}var H;if(typeof L=="function")H=function(){L(oe)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,ae=U.port2;U.port1.onmessage=oe,H=function(){ae.postMessage(null)}}else H=function(){k(oe,0)};function D(_,M){T=k(function(){_(n.unstable_now())},M)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(_){_.callback=null},n.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xe=0<_?Math.floor(1e3/_):5},n.unstable_getCurrentPriorityLevel=function(){return j},n.unstable_next=function(_){switch(j){case 1:case 2:case 3:var M=3;break;default:M=j}var Q=j;j=M;try{return _()}finally{j=Q}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(_,M){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var Q=j;j=_;try{return M()}finally{j=Q}},n.unstable_scheduleCallback=function(_,M,Q){var le=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?le+Q:le):Q=le,_){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=Q+ge,_={id:w++,callback:M,priorityLevel:_,startTime:Q,expirationTime:ge,sortIndex:-1},Q>le?(_.sortIndex=Q,d(p,_),c(h)===null&&_===c(p)&&(C?(R(T),T=-1):C=!0,D(G,Q-le))):(_.sortIndex=ge,d(h,_),x||N||(x=!0,P||(P=!0,H()))),_},n.unstable_shouldYield=me,n.unstable_wrapCallback=function(_){var M=j;return function(){var Q=j;j=M;try{return _.apply(this,arguments)}finally{j=Q}}}})(jo)),jo}var Hh;function ep(){return Hh||(Hh=1,yo.exports=Wg()),yo.exports}var No={exports:{}},Rt={};var qh;function tp(){if(qh)return Rt;qh=1;var n=To();function d(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)p+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(){}var o={d:{f:c,r:function(){throw Error(d(522))},D:c,C:c,L:c,m:c,X:c,S:c,M:c},p:0,findDOMNode:null},u=Symbol.for("react.portal");function b(h,p,w){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:y==null?null:""+y,children:h,containerInfo:p,implementation:w}}var m=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Rt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Rt.createPortal=function(h,p){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(d(299));return b(h,p,null,w)},Rt.flushSync=function(h){var p=m.T,w=o.p;try{if(m.T=null,o.p=2,h)return h()}finally{m.T=p,o.p=w,o.d.f()}},Rt.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(h,p))},Rt.prefetchDNS=function(h){typeof h=="string"&&o.d.D(h)},Rt.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var w=p.as,y=v(w,p.crossOrigin),j=typeof p.integrity=="string"?p.integrity:void 0,N=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;w==="style"?o.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:j,fetchPriority:N}):w==="script"&&o.d.X(h,{crossOrigin:y,integrity:j,fetchPriority:N,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Rt.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var w=v(p.as,p.crossOrigin);o.d.M(h,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(h)},Rt.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var w=p.as,y=v(w,p.crossOrigin);o.d.L(h,w,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Rt.preloadModule=function(h,p){if(typeof h=="string")if(p){var w=v(p.as,p.crossOrigin);o.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(h)},Rt.requestFormReset=function(h){o.d.r(h)},Rt.unstable_batchedUpdates=function(h,p){return h(p)},Rt.useFormState=function(h,p,w){return m.H.useFormState(h,p,w)},Rt.useFormStatus=function(){return m.H.useHostTransitionStatus()},Rt.version="19.2.3",Rt}var Fh;function sf(){if(Fh)return No.exports;Fh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(d){console.error(d)}}return n(),No.exports=tp(),No.exports}var Gh;function sp(){if(Gh)return wn;Gh=1;var n=ep(),d=To(),c=sf();function o(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function b(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function m(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function v(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function h(t){if(b(t)!==t)throw Error(o(188))}function p(t){var s=t.alternate;if(!s){if(s=b(t),s===null)throw Error(o(188));return s!==t?null:t}for(var a=t,l=s;;){var i=a.return;if(i===null)break;var r=i.alternate;if(r===null){if(l=i.return,l!==null){a=l;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===a)return h(i),t;if(r===l)return h(i),s;r=r.sibling}throw Error(o(188))}if(a.return!==l.return)a=i,l=r;else{for(var g=!1,S=i.child;S;){if(S===a){g=!0,a=i,l=r;break}if(S===l){g=!0,l=i,a=r;break}S=S.sibling}if(!g){for(S=r.child;S;){if(S===a){g=!0,a=r,l=i;break}if(S===l){g=!0,l=r,a=i;break}S=S.sibling}if(!g)throw Error(o(189))}}if(a.alternate!==l)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?t:s}function w(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=w(t),s!==null)return s;t=t.sibling}return null}var y=Object.assign,j=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),L=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),xe=Symbol.for("react.lazy"),ve=Symbol.for("react.activity"),me=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function H(t){return t===null||typeof t!="object"?null:(t=oe&&t[oe]||t["@@iterator"],typeof t=="function"?t:null)}var U=Symbol.for("react.client.reference");function ae(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===U?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case C:return"Fragment";case k:return"Profiler";case E:return"StrictMode";case G:return"Suspense";case P:return"SuspenseList";case ve:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case x:return"Portal";case L:return t.displayName||"Context";case R:return(t._context.displayName||"Context")+".Consumer";case A:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case T:return s=t.displayName||null,s!==null?s:ae(t.type)||"Memo";case xe:s=t._payload,t=t._init;try{return ae(t(s))}catch{}}return null}var D=Array.isArray,_=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},le=[],ge=-1;function z(t){return{current:t}}function B(t){0>ge||(t.current=le[ge],le[ge]=null,ge--)}function q(t,s){ge++,le[ge]=t.current,t.current=s}var X=z(null),W=z(null),K=z(null),ie=z(null);function we(t,s){switch(q(K,s),q(W,t),q(X,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?ah(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=ah(s),t=lh(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}B(X),q(X,t)}function ke(){B(X),B(W),B(K)}function J(t){t.memoizedState!==null&&q(ie,t);var s=X.current,a=lh(s,t.type);s!==a&&(q(W,t),q(X,a))}function he(t){W.current===t&&(B(X),B(W)),ie.current===t&&(B(ie),bn._currentValue=Q)}var Ee,Te;function Me(t){if(Ee===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Ee=s&&s[1]||"",Te=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ee+t+Te}var de=!1;function je(t,s){if(!t||de)return"";de=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(se){var I=se}Reflect.construct(t,[],ce)}else{try{ce.call()}catch(se){I=se}t.call(ce.prototype)}}else{try{throw Error()}catch(se){I=se}(ce=t())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(se){if(se&&I&&typeof se.stack=="string")return[se.stack,I.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=l.DetermineComponentFrameRoot(),g=r[0],S=r[1];if(g&&S){var O=g.split(`
`),Z=S.split(`
`);for(i=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;i<Z.length&&!Z[i].includes("DetermineComponentFrameRoot");)i++;if(l===O.length||i===Z.length)for(l=O.length-1,i=Z.length-1;1<=l&&0<=i&&O[l]!==Z[i];)i--;for(;1<=l&&0<=i;l--,i--)if(O[l]!==Z[i]){if(l!==1||i!==1)do if(l--,i--,0>i||O[l]!==Z[i]){var ne=`
`+O[l].replace(" at new "," at ");return t.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",t.displayName)),ne}while(1<=l&&0<=i);break}}}finally{de=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Me(a):""}function Fe(t,s){switch(t.tag){case 26:case 27:case 5:return Me(t.type);case 16:return Me("Lazy");case 13:return t.child!==s&&s!==null?Me("Suspense Fallback"):Me("Suspense");case 19:return Me("SuspenseList");case 0:case 15:return je(t.type,!1);case 11:return je(t.type.render,!1);case 1:return je(t.type,!0);case 31:return Me("Activity");default:return""}}function st(t){try{var s="",a=null;do s+=Fe(t,a),a=t,t=t.return;while(t);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ct=Object.prototype.hasOwnProperty,Y=n.unstable_scheduleCallback,ue=n.unstable_cancelCallback,fe=n.unstable_shouldYield,Ae=n.unstable_requestPaint,be=n.unstable_now,Re=n.unstable_getCurrentPriorityLevel,Ge=n.unstable_ImmediatePriority,Je=n.unstable_UserBlockingPriority,Ce=n.unstable_NormalPriority,ft=n.unstable_LowPriority,zt=n.unstable_IdlePriority,ws=n.log,An=n.unstable_setDisableYieldValue,Ss=null,ut=null;function gs(t){if(typeof ws=="function"&&An(t),ut&&typeof ut.setStrictMode=="function")try{ut.setStrictMode(Ss,t)}catch{}}var _t=Math.clz32?Math.clz32:Pa,ir=Math.log,Tn=Math.LN2;function Pa(t){return t>>>=0,t===0?32:31-(ir(t)/Tn|0)|0}var Xa=256,Cs=262144,Va=4194304;function Yt(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function wa(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var i=0,r=t.suspendedLanes,g=t.pingedLanes;t=t.warmLanes;var S=l&134217727;return S!==0?(l=S&~r,l!==0?i=Yt(l):(g&=S,g!==0?i=Yt(g):a||(a=S&~t,a!==0&&(i=Yt(a))))):(S=l&~r,S!==0?i=Yt(S):g!==0?i=Yt(g):a||(a=l&~t,a!==0&&(i=Yt(a)))),i===0?0:s!==0&&s!==i&&(s&r)===0&&(r=i&-i,a=s&-s,r>=a||r===32&&(a&4194048)!==0)?s:i}function ps(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Js(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ks(){var t=Va;return Va<<=1,(Va&62914560)===0&&(Va=4194304),t}function Ml(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Sa(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function rr(t,s,a,l,i,r){var g=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var S=t.entanglements,O=t.expirationTimes,Z=t.hiddenUpdates;for(a=g&~a;0<a;){var ne=31-_t(a),ce=1<<ne;S[ne]=0,O[ne]=-1;var I=Z[ne];if(I!==null)for(Z[ne]=null,ne=0;ne<I.length;ne++){var se=I[ne];se!==null&&(se.lane&=-536870913)}a&=~ce}l!==0&&Mn(t,l,0),r!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=r&~(g&~s))}function Mn(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-_t(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Rn(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-_t(a),i=1<<l;i&s|t[l]&s&&(t[l]|=s),a&=~i}}function zn(t,s){var a=s&-s;return a=(a&42)!==0?1:Rl(a),(a&(t.suspendedLanes|s))!==0?0:a}function Rl(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ca(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function On(){var t=M.p;return t!==0?t:(t=window.event,t===void 0?32:kh(t.type))}function Ln(t,s){var a=M.p;try{return M.p=t,s()}finally{M.p=a}}var Wt=Math.random().toString(36).slice(2),jt="__reactFiber$"+Wt,Mt="__reactProps$"+Wt,Is="__reactContainer$"+Wt,_s="__reactEvents$"+Wt,cr="__reactListeners$"+Wt,ee="__reactHandles$"+Wt,pe="__reactResources$"+Wt,Oe="__reactMarker$"+Wt;function Xe(t){delete t[jt],delete t[Mt],delete t[_s],delete t[cr],delete t[ee]}function bs(t){var s=t[jt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[Is]||a[jt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=uh(t);t!==null;){if(a=t[jt])return a;t=uh(t)}return s}t=a,a=t.parentNode}return null}function es(t){if(t=t[jt]||t[Is]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function ks(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(o(33))}function Ws(t){var s=t[pe];return s||(s=t[pe]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function wt(t){t[Oe]=!0}var Po=new Set,Xo={};function _a(t,s){Qa(t,s),Qa(t+"Capture",s)}function Qa(t,s){for(Xo[t]=s,t=0;t<s.length;t++)Po.add(s[t])}var qf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vo={},Qo={};function Ff(t){return Ct.call(Qo,t)?!0:Ct.call(Vo,t)?!1:qf.test(t)?Qo[t]=!0:(Vo[t]=!0,!1)}function Un(t,s,a){if(Ff(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Bn(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Es(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}function ts(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Zo(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Gf(t,s,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var i=l.get,r=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return i.call(this)},set:function(g){a=""+g,r.call(this,g)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function or(t){if(!t._valueTracker){var s=Zo(t)?"checked":"value";t._valueTracker=Gf(t,s,""+t[s])}}function Jo(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=Zo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function Hn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Yf=/[\n"\\]/g;function ss(t){return t.replace(Yf,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function dr(t,s,a,l,i,r,g,S){t.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?t.type=g:t.removeAttribute("type"),s!=null?g==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+ts(s)):t.value!==""+ts(s)&&(t.value=""+ts(s)):g!=="submit"&&g!=="reset"||t.removeAttribute("value"),s!=null?ur(t,g,ts(s)):a!=null?ur(t,g,ts(a)):l!=null&&t.removeAttribute("value"),i==null&&r!=null&&(t.defaultChecked=!!r),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+ts(S):t.removeAttribute("name")}function Ko(t,s,a,l,i,r,g,S){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),s!=null||a!=null){if(!(r!=="submit"&&r!=="reset"||s!=null)){or(t);return}a=a!=null?""+ts(a):"",s=s!=null?""+ts(s):a,S||s===t.value||(t.value=s),t.defaultValue=s}l=l??i,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=S?t.checked:!!l,t.defaultChecked=!!l,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.name=g),or(t)}function ur(t,s,a){s==="number"&&Hn(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Za(t,s,a,l){if(t=t.options,s){s={};for(var i=0;i<a.length;i++)s["$"+a[i]]=!0;for(a=0;a<t.length;a++)i=s.hasOwnProperty("$"+t[a].value),t[a].selected!==i&&(t[a].selected=i),i&&l&&(t[a].defaultSelected=!0)}else{for(a=""+ts(a),s=null,i=0;i<t.length;i++){if(t[i].value===a){t[i].selected=!0,l&&(t[i].defaultSelected=!0);return}s!==null||t[i].disabled||(s=t[i])}s!==null&&(s.selected=!0)}}function Io(t,s,a){if(s!=null&&(s=""+ts(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+ts(a):""}function Wo(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(o(92));if(D(l)){if(1<l.length)throw Error(o(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=ts(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),or(t)}function Ja(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var $f=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ed(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||$f.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function td(t,s,a){if(s!=null&&typeof s!="object")throw Error(o(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var i in s)l=s[i],s.hasOwnProperty(i)&&a[i]!==l&&ed(t,i,l)}else for(var r in s)s.hasOwnProperty(r)&&ed(t,r,s[r])}function mr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qn(t){return Xf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ds(){}var hr=null;function fr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ka=null,Ia=null;function sd(t){var s=es(t);if(s&&(t=s.stateNode)){var a=t[Mt]||null;e:switch(t=s.stateNode,s.type){case"input":if(dr(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ss(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var i=l[Mt]||null;if(!i)throw Error(o(90));dr(l,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&Jo(l)}break e;case"textarea":Io(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Za(t,!!a.multiple,s,!1)}}}var xr=!1;function ad(t,s,a){if(xr)return t(s,a);xr=!0;try{var l=t(s);return l}finally{if(xr=!1,(Ka!==null||Ia!==null)&&(ki(),Ka&&(s=Ka,t=Ia,Ia=Ka=null,sd(s),t)))for(s=0;s<t.length;s++)sd(t[s])}}function zl(t,s){var a=t.stateNode;if(a===null)return null;var l=a[Mt]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(o(231,s,typeof a));return a}var As=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gr=!1;if(As)try{var Ol={};Object.defineProperty(Ol,"passive",{get:function(){gr=!0}}),window.addEventListener("test",Ol,Ol),window.removeEventListener("test",Ol,Ol)}catch{gr=!1}var ea=null,pr=null,Fn=null;function ld(){if(Fn)return Fn;var t,s=pr,a=s.length,l,i="value"in ea?ea.value:ea.textContent,r=i.length;for(t=0;t<a&&s[t]===i[t];t++);var g=a-t;for(l=1;l<=g&&s[a-l]===i[r-l];l++);return Fn=i.slice(t,1<l?1-l:void 0)}function Gn(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Yn(){return!0}function nd(){return!1}function Lt(t){function s(a,l,i,r,g){this._reactName=a,this._targetInst=i,this.type=l,this.nativeEvent=r,this.target=g,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(a=t[S],this[S]=a?a(r):r[S]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Yn:nd,this.isPropagationStopped=nd,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Yn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Yn)},persist:function(){},isPersistent:Yn}),s}var ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$n=Lt(ka),Ll=y({},ka,{view:0,detail:0}),Vf=Lt(Ll),br,vr,Ul,Pn=y({},Ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ul&&(Ul&&t.type==="mousemove"?(br=t.screenX-Ul.screenX,vr=t.screenY-Ul.screenY):vr=br=0,Ul=t),br)},movementY:function(t){return"movementY"in t?t.movementY:vr}}),id=Lt(Pn),Qf=y({},Pn,{dataTransfer:0}),Zf=Lt(Qf),Jf=y({},Ll,{relatedTarget:0}),yr=Lt(Jf),Kf=y({},ka,{animationName:0,elapsedTime:0,pseudoElement:0}),If=Lt(Kf),Wf=y({},ka,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ex=Lt(Wf),tx=y({},ka,{data:0}),rd=Lt(tx),sx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ax={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nx(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=lx[t])?!!s[t]:!1}function jr(){return nx}var ix=y({},Ll,{key:function(t){if(t.key){var s=sx[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Gn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ax[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jr,charCode:function(t){return t.type==="keypress"?Gn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rx=Lt(ix),cx=y({},Pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cd=Lt(cx),ox=y({},Ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jr}),dx=Lt(ox),ux=y({},ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),mx=Lt(ux),hx=y({},Pn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fx=Lt(hx),xx=y({},ka,{newState:0,oldState:0}),gx=Lt(xx),px=[9,13,27,32],Nr=As&&"CompositionEvent"in window,Bl=null;As&&"documentMode"in document&&(Bl=document.documentMode);var bx=As&&"TextEvent"in window&&!Bl,od=As&&(!Nr||Bl&&8<Bl&&11>=Bl),dd=" ",ud=!1;function md(t,s){switch(t){case"keyup":return px.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wa=!1;function vx(t,s){switch(t){case"compositionend":return hd(s);case"keypress":return s.which!==32?null:(ud=!0,dd);case"textInput":return t=s.data,t===dd&&ud?null:t;default:return null}}function yx(t,s){if(Wa)return t==="compositionend"||!Nr&&md(t,s)?(t=ld(),Fn=pr=ea=null,Wa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return od&&s.locale!=="ko"?null:s.data;default:return null}}var jx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!jx[t.type]:s==="textarea"}function xd(t,s,a,l){Ka?Ia?Ia.push(l):Ia=[l]:Ka=l,s=zi(s,"onChange"),0<s.length&&(a=new $n("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var Hl=null,ql=null;function Nx(t){Km(t,0)}function Xn(t){var s=ks(t);if(Jo(s))return t}function gd(t,s){if(t==="change")return s}var pd=!1;if(As){var wr;if(As){var Sr="oninput"in document;if(!Sr){var bd=document.createElement("div");bd.setAttribute("oninput","return;"),Sr=typeof bd.oninput=="function"}wr=Sr}else wr=!1;pd=wr&&(!document.documentMode||9<document.documentMode)}function vd(){Hl&&(Hl.detachEvent("onpropertychange",yd),ql=Hl=null)}function yd(t){if(t.propertyName==="value"&&Xn(ql)){var s=[];xd(s,ql,t,fr(t)),ad(Nx,s)}}function wx(t,s,a){t==="focusin"?(vd(),Hl=s,ql=a,Hl.attachEvent("onpropertychange",yd)):t==="focusout"&&vd()}function Sx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xn(ql)}function Cx(t,s){if(t==="click")return Xn(s)}function _x(t,s){if(t==="input"||t==="change")return Xn(s)}function kx(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var $t=typeof Object.is=="function"?Object.is:kx;function Fl(t,s){if($t(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var i=a[l];if(!Ct.call(s,i)||!$t(t[i],s[i]))return!1}return!0}function jd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Nd(t,s){var a=jd(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=jd(a)}}function wd(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?wd(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Sd(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Hn(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Hn(t.document)}return s}function Cr(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var Ex=As&&"documentMode"in document&&11>=document.documentMode,el=null,_r=null,Gl=null,kr=!1;function Cd(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;kr||el==null||el!==Hn(l)||(l=el,"selectionStart"in l&&Cr(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Gl&&Fl(Gl,l)||(Gl=l,l=zi(_r,"onSelect"),0<l.length&&(s=new $n("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=el)))}function Ea(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var tl={animationend:Ea("Animation","AnimationEnd"),animationiteration:Ea("Animation","AnimationIteration"),animationstart:Ea("Animation","AnimationStart"),transitionrun:Ea("Transition","TransitionRun"),transitionstart:Ea("Transition","TransitionStart"),transitioncancel:Ea("Transition","TransitionCancel"),transitionend:Ea("Transition","TransitionEnd")},Er={},_d={};As&&(_d=document.createElement("div").style,"AnimationEvent"in window||(delete tl.animationend.animation,delete tl.animationiteration.animation,delete tl.animationstart.animation),"TransitionEvent"in window||delete tl.transitionend.transition);function Da(t){if(Er[t])return Er[t];if(!tl[t])return t;var s=tl[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in _d)return Er[t]=s[a];return t}var kd=Da("animationend"),Ed=Da("animationiteration"),Dd=Da("animationstart"),Dx=Da("transitionrun"),Ax=Da("transitionstart"),Tx=Da("transitioncancel"),Ad=Da("transitionend"),Td=new Map,Dr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dr.push("scrollEnd");function ms(t,s){Td.set(t,s),_a(s,[t])}var Vn=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},as=[],sl=0,Ar=0;function Qn(){for(var t=sl,s=Ar=sl=0;s<t;){var a=as[s];as[s++]=null;var l=as[s];as[s++]=null;var i=as[s];as[s++]=null;var r=as[s];if(as[s++]=null,l!==null&&i!==null){var g=l.pending;g===null?i.next=i:(i.next=g.next,g.next=i),l.pending=i}r!==0&&Md(a,i,r)}}function Zn(t,s,a,l){as[sl++]=t,as[sl++]=s,as[sl++]=a,as[sl++]=l,Ar|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Tr(t,s,a,l){return Zn(t,s,a,l),Jn(t)}function Aa(t,s){return Zn(t,null,null,s),Jn(t)}function Md(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var i=!1,r=t.return;r!==null;)r.childLanes|=a,l=r.alternate,l!==null&&(l.childLanes|=a),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(i=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,i&&s!==null&&(i=31-_t(a),t=r.hiddenUpdates,l=t[i],l===null?t[i]=[s]:l.push(s),s.lane=a|536870912),r):null}function Jn(t){if(50<un)throw un=0,qc=null,Error(o(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var al={};function Mx(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(t,s,a,l){return new Mx(t,s,a,l)}function Mr(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ts(t,s){var a=t.alternate;return a===null?(a=Pt(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Rd(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Kn(t,s,a,l,i,r){var g=0;if(l=t,typeof t=="function")Mr(t)&&(g=1);else if(typeof t=="string")g=Ug(t,a,X.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case ve:return t=Pt(31,a,s,i),t.elementType=ve,t.lanes=r,t;case C:return Ta(a.children,i,r,s);case E:g=8,i|=24;break;case k:return t=Pt(12,a,s,i|2),t.elementType=k,t.lanes=r,t;case G:return t=Pt(13,a,s,i),t.elementType=G,t.lanes=r,t;case P:return t=Pt(19,a,s,i),t.elementType=P,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case L:g=10;break e;case R:g=9;break e;case A:g=11;break e;case T:g=14;break e;case xe:g=16,l=null;break e}g=29,a=Error(o(130,t===null?"null":typeof t,"")),l=null}return s=Pt(g,a,s,i),s.elementType=t,s.type=l,s.lanes=r,s}function Ta(t,s,a,l){return t=Pt(7,t,l,s),t.lanes=a,t}function Rr(t,s,a){return t=Pt(6,t,null,s),t.lanes=a,t}function zd(t){var s=Pt(18,null,null,0);return s.stateNode=t,s}function zr(t,s,a){return s=Pt(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Od=new WeakMap;function ls(t,s){if(typeof t=="object"&&t!==null){var a=Od.get(t);return a!==void 0?a:(s={value:t,source:s,stack:st(s)},Od.set(t,s),s)}return{value:t,source:s,stack:st(s)}}var ll=[],nl=0,In=null,Yl=0,ns=[],is=0,ta=null,vs=1,ys="";function Ms(t,s){ll[nl++]=Yl,ll[nl++]=In,In=t,Yl=s}function Ld(t,s,a){ns[is++]=vs,ns[is++]=ys,ns[is++]=ta,ta=t;var l=vs;t=ys;var i=32-_t(l)-1;l&=~(1<<i),a+=1;var r=32-_t(s)+i;if(30<r){var g=i-i%5;r=(l&(1<<g)-1).toString(32),l>>=g,i-=g,vs=1<<32-_t(s)+i|a<<i|l,ys=r+t}else vs=1<<r|a<<i|l,ys=t}function Or(t){t.return!==null&&(Ms(t,1),Ld(t,1,0))}function Lr(t){for(;t===In;)In=ll[--nl],ll[nl]=null,Yl=ll[--nl],ll[nl]=null;for(;t===ta;)ta=ns[--is],ns[is]=null,ys=ns[--is],ns[is]=null,vs=ns[--is],ns[is]=null}function Ud(t,s){ns[is++]=vs,ns[is++]=ys,ns[is++]=ta,vs=s.id,ys=s.overflow,ta=t}var kt=null,rt=null,Pe=!1,sa=null,rs=!1,Ur=Error(o(519));function aa(t){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $l(ls(s,t)),Ur}function Bd(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[jt]=t,s[Mt]=l,a){case"dialog":qe("cancel",s),qe("close",s);break;case"iframe":case"object":case"embed":qe("load",s);break;case"video":case"audio":for(a=0;a<hn.length;a++)qe(hn[a],s);break;case"source":qe("error",s);break;case"img":case"image":case"link":qe("error",s),qe("load",s);break;case"details":qe("toggle",s);break;case"input":qe("invalid",s),Ko(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":qe("invalid",s);break;case"textarea":qe("invalid",s),Wo(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||th(s.textContent,a)?(l.popover!=null&&(qe("beforetoggle",s),qe("toggle",s)),l.onScroll!=null&&qe("scroll",s),l.onScrollEnd!=null&&qe("scrollend",s),l.onClick!=null&&(s.onclick=Ds),s=!0):s=!1,s||aa(t,!0)}function Hd(t){for(kt=t.return;kt;)switch(kt.tag){case 5:case 31:case 13:rs=!1;return;case 27:case 3:rs=!0;return;default:kt=kt.return}}function il(t){if(t!==kt)return!1;if(!Pe)return Hd(t),Pe=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||to(t.type,t.memoizedProps)),a=!a),a&&rt&&aa(t),Hd(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));rt=dh(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));rt=dh(t)}else s===27?(s=rt,pa(t.type)?(t=io,io=null,rt=t):rt=s):rt=kt?os(t.stateNode.nextSibling):null;return!0}function Ma(){rt=kt=null,Pe=!1}function Br(){var t=sa;return t!==null&&(qt===null?qt=t:qt.push.apply(qt,t),sa=null),t}function $l(t){sa===null?sa=[t]:sa.push(t)}var Hr=z(null),Ra=null,Rs=null;function la(t,s,a){q(Hr,s._currentValue),s._currentValue=a}function zs(t){t._currentValue=Hr.current,B(Hr)}function qr(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function Fr(t,s,a,l){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var r=i.dependencies;if(r!==null){var g=i.child;r=r.firstContext;e:for(;r!==null;){var S=r;r=i;for(var O=0;O<s.length;O++)if(S.context===s[O]){r.lanes|=a,S=r.alternate,S!==null&&(S.lanes|=a),qr(r.return,a,t),l||(g=null);break e}r=S.next}}else if(i.tag===18){if(g=i.return,g===null)throw Error(o(341));g.lanes|=a,r=g.alternate,r!==null&&(r.lanes|=a),qr(g,a,t),g=null}else g=i.child;if(g!==null)g.return=i;else for(g=i;g!==null;){if(g===t){g=null;break}if(i=g.sibling,i!==null){i.return=g.return,g=i;break}g=g.return}i=g}}function rl(t,s,a,l){t=null;for(var i=s,r=!1;i!==null;){if(!r){if((i.flags&524288)!==0)r=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var g=i.alternate;if(g===null)throw Error(o(387));if(g=g.memoizedProps,g!==null){var S=i.type;$t(i.pendingProps.value,g.value)||(t!==null?t.push(S):t=[S])}}else if(i===ie.current){if(g=i.alternate,g===null)throw Error(o(387));g.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(bn):t=[bn])}i=i.return}t!==null&&Fr(s,t,a,l),s.flags|=262144}function Wn(t){for(t=t.firstContext;t!==null;){if(!$t(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function za(t){Ra=t,Rs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Et(t){return qd(Ra,t)}function ei(t,s){return Ra===null&&za(t),qd(t,s)}function qd(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Rs===null){if(t===null)throw Error(o(308));Rs=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else Rs=Rs.next=s;return a}var Rx=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},zx=n.unstable_scheduleCallback,Ox=n.unstable_NormalPriority,pt={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gr(){return{controller:new Rx,data:new Map,refCount:0}}function Pl(t){t.refCount--,t.refCount===0&&zx(Ox,function(){t.controller.abort()})}var Xl=null,Yr=0,cl=0,ol=null;function Lx(t,s){if(Xl===null){var a=Xl=[];Yr=0,cl=Xc(),ol={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Yr++,s.then(Fd,Fd),s}function Fd(){if(--Yr===0&&Xl!==null){ol!==null&&(ol.status="fulfilled");var t=Xl;Xl=null,cl=0,ol=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function Ux(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(i){a.push(i)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var i=0;i<a.length;i++)(0,a[i])(s)},function(i){for(l.status="rejected",l.reason=i,i=0;i<a.length;i++)(0,a[i])(void 0)}),l}var Gd=_.S;_.S=function(t,s){Cm=be(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Lx(t,s),Gd!==null&&Gd(t,s)};var Oa=z(null);function $r(){var t=Oa.current;return t!==null?t:it.pooledCache}function ti(t,s){s===null?q(Oa,Oa.current):q(Oa,s.pool)}function Yd(){var t=$r();return t===null?null:{parent:pt._currentValue,pool:t}}var dl=Error(o(460)),Pr=Error(o(474)),si=Error(o(542)),ai={then:function(){}};function $d(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Pd(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(Ds,Ds),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Vd(t),t;default:if(typeof s.status=="string")s.then(Ds,Ds);else{if(t=it,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var i=s;i.status="fulfilled",i.value=l}},function(l){if(s.status==="pending"){var i=s;i.status="rejected",i.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Vd(t),t}throw Ua=s,dl}}function La(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ua=a,dl):a}}var Ua=null;function Xd(){if(Ua===null)throw Error(o(459));var t=Ua;return Ua=null,t}function Vd(t){if(t===dl||t===si)throw Error(o(483))}var ul=null,Vl=0;function li(t){var s=Vl;return Vl+=1,ul===null&&(ul=[]),Pd(ul,t,s)}function Ql(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function ni(t,s){throw s.$$typeof===j?Error(o(525)):(t=Object.prototype.toString.call(s),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Qd(t){function s($,F){if(t){var V=$.deletions;V===null?($.deletions=[F],$.flags|=16):V.push(F)}}function a($,F){if(!t)return null;for(;F!==null;)s($,F),F=F.sibling;return null}function l($){for(var F=new Map;$!==null;)$.key!==null?F.set($.key,$):F.set($.index,$),$=$.sibling;return F}function i($,F){return $=Ts($,F),$.index=0,$.sibling=null,$}function r($,F,V){return $.index=V,t?(V=$.alternate,V!==null?(V=V.index,V<F?($.flags|=67108866,F):V):($.flags|=67108866,F)):($.flags|=1048576,F)}function g($){return t&&$.alternate===null&&($.flags|=67108866),$}function S($,F,V,re){return F===null||F.tag!==6?(F=Rr(V,$.mode,re),F.return=$,F):(F=i(F,V),F.return=$,F)}function O($,F,V,re){var Se=V.type;return Se===C?ne($,F,V.props.children,re,V.key):F!==null&&(F.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===xe&&La(Se)===F.type)?(F=i(F,V.props),Ql(F,V),F.return=$,F):(F=Kn(V.type,V.key,V.props,null,$.mode,re),Ql(F,V),F.return=$,F)}function Z($,F,V,re){return F===null||F.tag!==4||F.stateNode.containerInfo!==V.containerInfo||F.stateNode.implementation!==V.implementation?(F=zr(V,$.mode,re),F.return=$,F):(F=i(F,V.children||[]),F.return=$,F)}function ne($,F,V,re,Se){return F===null||F.tag!==7?(F=Ta(V,$.mode,re,Se),F.return=$,F):(F=i(F,V),F.return=$,F)}function ce($,F,V){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Rr(""+F,$.mode,V),F.return=$,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case N:return V=Kn(F.type,F.key,F.props,null,$.mode,V),Ql(V,F),V.return=$,V;case x:return F=zr(F,$.mode,V),F.return=$,F;case xe:return F=La(F),ce($,F,V)}if(D(F)||H(F))return F=Ta(F,$.mode,V,null),F.return=$,F;if(typeof F.then=="function")return ce($,li(F),V);if(F.$$typeof===L)return ce($,ei($,F),V);ni($,F)}return null}function I($,F,V,re){var Se=F!==null?F.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return Se!==null?null:S($,F,""+V,re);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case N:return V.key===Se?O($,F,V,re):null;case x:return V.key===Se?Z($,F,V,re):null;case xe:return V=La(V),I($,F,V,re)}if(D(V)||H(V))return Se!==null?null:ne($,F,V,re,null);if(typeof V.then=="function")return I($,F,li(V),re);if(V.$$typeof===L)return I($,F,ei($,V),re);ni($,V)}return null}function se($,F,V,re,Se){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return $=$.get(V)||null,S(F,$,""+re,Se);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case N:return $=$.get(re.key===null?V:re.key)||null,O(F,$,re,Se);case x:return $=$.get(re.key===null?V:re.key)||null,Z(F,$,re,Se);case xe:return re=La(re),se($,F,V,re,Se)}if(D(re)||H(re))return $=$.get(V)||null,ne(F,$,re,Se,null);if(typeof re.then=="function")return se($,F,V,li(re),Se);if(re.$$typeof===L)return se($,F,V,ei(F,re),Se);ni(F,re)}return null}function ye($,F,V,re){for(var Se=null,Qe=null,Ne=F,Ue=F=0,$e=null;Ne!==null&&Ue<V.length;Ue++){Ne.index>Ue?($e=Ne,Ne=null):$e=Ne.sibling;var Ze=I($,Ne,V[Ue],re);if(Ze===null){Ne===null&&(Ne=$e);break}t&&Ne&&Ze.alternate===null&&s($,Ne),F=r(Ze,F,Ue),Qe===null?Se=Ze:Qe.sibling=Ze,Qe=Ze,Ne=$e}if(Ue===V.length)return a($,Ne),Pe&&Ms($,Ue),Se;if(Ne===null){for(;Ue<V.length;Ue++)Ne=ce($,V[Ue],re),Ne!==null&&(F=r(Ne,F,Ue),Qe===null?Se=Ne:Qe.sibling=Ne,Qe=Ne);return Pe&&Ms($,Ue),Se}for(Ne=l(Ne);Ue<V.length;Ue++)$e=se(Ne,$,Ue,V[Ue],re),$e!==null&&(t&&$e.alternate!==null&&Ne.delete($e.key===null?Ue:$e.key),F=r($e,F,Ue),Qe===null?Se=$e:Qe.sibling=$e,Qe=$e);return t&&Ne.forEach(function(Na){return s($,Na)}),Pe&&Ms($,Ue),Se}function _e($,F,V,re){if(V==null)throw Error(o(151));for(var Se=null,Qe=null,Ne=F,Ue=F=0,$e=null,Ze=V.next();Ne!==null&&!Ze.done;Ue++,Ze=V.next()){Ne.index>Ue?($e=Ne,Ne=null):$e=Ne.sibling;var Na=I($,Ne,Ze.value,re);if(Na===null){Ne===null&&(Ne=$e);break}t&&Ne&&Na.alternate===null&&s($,Ne),F=r(Na,F,Ue),Qe===null?Se=Na:Qe.sibling=Na,Qe=Na,Ne=$e}if(Ze.done)return a($,Ne),Pe&&Ms($,Ue),Se;if(Ne===null){for(;!Ze.done;Ue++,Ze=V.next())Ze=ce($,Ze.value,re),Ze!==null&&(F=r(Ze,F,Ue),Qe===null?Se=Ze:Qe.sibling=Ze,Qe=Ze);return Pe&&Ms($,Ue),Se}for(Ne=l(Ne);!Ze.done;Ue++,Ze=V.next())Ze=se(Ne,$,Ue,Ze.value,re),Ze!==null&&(t&&Ze.alternate!==null&&Ne.delete(Ze.key===null?Ue:Ze.key),F=r(Ze,F,Ue),Qe===null?Se=Ze:Qe.sibling=Ze,Qe=Ze);return t&&Ne.forEach(function(Qg){return s($,Qg)}),Pe&&Ms($,Ue),Se}function nt($,F,V,re){if(typeof V=="object"&&V!==null&&V.type===C&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case N:e:{for(var Se=V.key;F!==null;){if(F.key===Se){if(Se=V.type,Se===C){if(F.tag===7){a($,F.sibling),re=i(F,V.props.children),re.return=$,$=re;break e}}else if(F.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===xe&&La(Se)===F.type){a($,F.sibling),re=i(F,V.props),Ql(re,V),re.return=$,$=re;break e}a($,F);break}else s($,F);F=F.sibling}V.type===C?(re=Ta(V.props.children,$.mode,re,V.key),re.return=$,$=re):(re=Kn(V.type,V.key,V.props,null,$.mode,re),Ql(re,V),re.return=$,$=re)}return g($);case x:e:{for(Se=V.key;F!==null;){if(F.key===Se)if(F.tag===4&&F.stateNode.containerInfo===V.containerInfo&&F.stateNode.implementation===V.implementation){a($,F.sibling),re=i(F,V.children||[]),re.return=$,$=re;break e}else{a($,F);break}else s($,F);F=F.sibling}re=zr(V,$.mode,re),re.return=$,$=re}return g($);case xe:return V=La(V),nt($,F,V,re)}if(D(V))return ye($,F,V,re);if(H(V)){if(Se=H(V),typeof Se!="function")throw Error(o(150));return V=Se.call(V),_e($,F,V,re)}if(typeof V.then=="function")return nt($,F,li(V),re);if(V.$$typeof===L)return nt($,F,ei($,V),re);ni($,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,F!==null&&F.tag===6?(a($,F.sibling),re=i(F,V),re.return=$,$=re):(a($,F),re=Rr(V,$.mode,re),re.return=$,$=re),g($)):a($,F)}return function($,F,V,re){try{Vl=0;var Se=nt($,F,V,re);return ul=null,Se}catch(Ne){if(Ne===dl||Ne===si)throw Ne;var Qe=Pt(29,Ne,null,$.mode);return Qe.lanes=re,Qe.return=$,Qe}}}var Ba=Qd(!0),Zd=Qd(!1),na=!1;function Xr(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vr(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ia(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ra(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ke&2)!==0){var i=l.pending;return i===null?s.next=s:(s.next=i.next,i.next=s),l.pending=s,s=Jn(t),Md(t,null,a),s}return Zn(t,l,s,a),Jn(t)}function Zl(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Rn(t,a)}}function Qr(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var i=null,r=null;if(a=a.firstBaseUpdate,a!==null){do{var g={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};r===null?i=r=g:r=r.next=g,a=a.next}while(a!==null);r===null?i=r=s:r=r.next=s}else i=r=s;a={baseState:l.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var Zr=!1;function Jl(){if(Zr){var t=ol;if(t!==null)throw t}}function Kl(t,s,a,l){Zr=!1;var i=t.updateQueue;na=!1;var r=i.firstBaseUpdate,g=i.lastBaseUpdate,S=i.shared.pending;if(S!==null){i.shared.pending=null;var O=S,Z=O.next;O.next=null,g===null?r=Z:g.next=Z,g=O;var ne=t.alternate;ne!==null&&(ne=ne.updateQueue,S=ne.lastBaseUpdate,S!==g&&(S===null?ne.firstBaseUpdate=Z:S.next=Z,ne.lastBaseUpdate=O))}if(r!==null){var ce=i.baseState;g=0,ne=Z=O=null,S=r;do{var I=S.lane&-536870913,se=I!==S.lane;if(se?(Ye&I)===I:(l&I)===I){I!==0&&I===cl&&(Zr=!0),ne!==null&&(ne=ne.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var ye=t,_e=S;I=s;var nt=a;switch(_e.tag){case 1:if(ye=_e.payload,typeof ye=="function"){ce=ye.call(nt,ce,I);break e}ce=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=_e.payload,I=typeof ye=="function"?ye.call(nt,ce,I):ye,I==null)break e;ce=y({},ce,I);break e;case 2:na=!0}}I=S.callback,I!==null&&(t.flags|=64,se&&(t.flags|=8192),se=i.callbacks,se===null?i.callbacks=[I]:se.push(I))}else se={lane:I,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ne===null?(Z=ne=se,O=ce):ne=ne.next=se,g|=I;if(S=S.next,S===null){if(S=i.shared.pending,S===null)break;se=S,S=se.next,se.next=null,i.lastBaseUpdate=se,i.shared.pending=null}}while(!0);ne===null&&(O=ce),i.baseState=O,i.firstBaseUpdate=Z,i.lastBaseUpdate=ne,r===null&&(i.shared.lanes=0),ma|=g,t.lanes=g,t.memoizedState=ce}}function Jd(t,s){if(typeof t!="function")throw Error(o(191,t));t.call(s)}function Kd(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Jd(a[t],s)}var ml=z(null),ii=z(0);function Id(t,s){t=Ys,q(ii,t),q(ml,s),Ys=t|s.baseLanes}function Jr(){q(ii,Ys),q(ml,ml.current)}function Kr(){Ys=ii.current,B(ml),B(ii)}var Xt=z(null),cs=null;function ca(t){var s=t.alternate;q(xt,xt.current&1),q(Xt,t),cs===null&&(s===null||ml.current!==null||s.memoizedState!==null)&&(cs=t)}function Ir(t){q(xt,xt.current),q(Xt,t),cs===null&&(cs=t)}function Wd(t){t.tag===22?(q(xt,xt.current),q(Xt,t),cs===null&&(cs=t)):oa()}function oa(){q(xt,xt.current),q(Xt,Xt.current)}function Vt(t){B(Xt),cs===t&&(cs=null),B(xt)}var xt=z(0);function ri(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||lo(a)||no(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Os=0,Le=null,at=null,bt=null,ci=!1,hl=!1,Ha=!1,oi=0,Il=0,fl=null,Bx=0;function mt(){throw Error(o(321))}function Wr(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!$t(t[a],s[a]))return!1;return!0}function ec(t,s,a,l,i,r){return Os=r,Le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,_.H=t===null||t.memoizedState===null?Lu:xc,Ha=!1,r=a(l,i),Ha=!1,hl&&(r=tu(s,a,l,i)),eu(t),r}function eu(t){_.H=tn;var s=at!==null&&at.next!==null;if(Os=0,bt=at=Le=null,ci=!1,Il=0,fl=null,s)throw Error(o(300));t===null||vt||(t=t.dependencies,t!==null&&Wn(t)&&(vt=!0))}function tu(t,s,a,l){Le=t;var i=0;do{if(hl&&(fl=null),Il=0,hl=!1,25<=i)throw Error(o(301));if(i+=1,bt=at=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}_.H=Uu,r=s(a,l)}while(hl);return r}function Hx(){var t=_.H,s=t.useState()[0];return s=typeof s.then=="function"?Wl(s):s,t=t.useState()[0],(at!==null?at.memoizedState:null)!==t&&(Le.flags|=1024),s}function tc(){var t=oi!==0;return oi=0,t}function sc(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function ac(t){if(ci){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}ci=!1}Os=0,bt=at=Le=null,hl=!1,Il=oi=0,fl=null}function Ot(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?Le.memoizedState=bt=t:bt=bt.next=t,bt}function gt(){if(at===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var s=bt===null?Le.memoizedState:bt.next;if(s!==null)bt=s,at=t;else{if(t===null)throw Le.alternate===null?Error(o(467)):Error(o(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},bt===null?Le.memoizedState=bt=t:bt=bt.next=t}return bt}function di(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wl(t){var s=Il;return Il+=1,fl===null&&(fl=[]),t=Pd(fl,t,s),s=Le,(bt===null?s.memoizedState:bt.next)===null&&(s=s.alternate,_.H=s===null||s.memoizedState===null?Lu:xc),t}function ui(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Wl(t);if(t.$$typeof===L)return Et(t)}throw Error(o(438,String(t)))}function lc(t){var s=null,a=Le.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Le.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(i){return i.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=di(),Le.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=me;return s.index++,a}function Ls(t,s){return typeof s=="function"?s(t):s}function mi(t){var s=gt();return nc(s,at,t)}function nc(t,s,a){var l=t.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=a;var i=t.baseQueue,r=l.pending;if(r!==null){if(i!==null){var g=i.next;i.next=r.next,r.next=g}s.baseQueue=i=r,l.pending=null}if(r=t.baseState,i===null)t.memoizedState=r;else{s=i.next;var S=g=null,O=null,Z=s,ne=!1;do{var ce=Z.lane&-536870913;if(ce!==Z.lane?(Ye&ce)===ce:(Os&ce)===ce){var I=Z.revertLane;if(I===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ce===cl&&(ne=!0);else if((Os&I)===I){Z=Z.next,I===cl&&(ne=!0);continue}else ce={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},O===null?(S=O=ce,g=r):O=O.next=ce,Le.lanes|=I,ma|=I;ce=Z.action,Ha&&a(r,ce),r=Z.hasEagerState?Z.eagerState:a(r,ce)}else I={lane:ce,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},O===null?(S=O=I,g=r):O=O.next=I,Le.lanes|=ce,ma|=ce;Z=Z.next}while(Z!==null&&Z!==s);if(O===null?g=r:O.next=S,!$t(r,t.memoizedState)&&(vt=!0,ne&&(a=ol,a!==null)))throw a;t.memoizedState=r,t.baseState=g,t.baseQueue=O,l.lastRenderedState=r}return i===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function ic(t){var s=gt(),a=s.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=t;var l=a.dispatch,i=a.pending,r=s.memoizedState;if(i!==null){a.pending=null;var g=i=i.next;do r=t(r,g.action),g=g.next;while(g!==i);$t(r,s.memoizedState)||(vt=!0),s.memoizedState=r,s.baseQueue===null&&(s.baseState=r),a.lastRenderedState=r}return[r,l]}function su(t,s,a){var l=Le,i=gt(),r=Pe;if(r){if(a===void 0)throw Error(o(407));a=a()}else a=s();var g=!$t((at||i).memoizedState,a);if(g&&(i.memoizedState=a,vt=!0),i=i.queue,oc(nu.bind(null,l,i,t),[t]),i.getSnapshot!==s||g||bt!==null&&bt.memoizedState.tag&1){if(l.flags|=2048,xl(9,{destroy:void 0},lu.bind(null,l,i,a,s),null),it===null)throw Error(o(349));r||(Os&127)!==0||au(l,s,a)}return a}function au(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Le.updateQueue,s===null?(s=di(),Le.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function lu(t,s,a,l){s.value=a,s.getSnapshot=l,iu(s)&&ru(t)}function nu(t,s,a){return a(function(){iu(s)&&ru(t)})}function iu(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!$t(t,a)}catch{return!0}}function ru(t){var s=Aa(t,2);s!==null&&Ft(s,t,2)}function rc(t){var s=Ot();if(typeof t=="function"){var a=t;if(t=a(),Ha){gs(!0);try{a()}finally{gs(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:t},s}function cu(t,s,a,l){return t.baseState=a,nc(t,at,typeof l=="function"?l:Ls)}function qx(t,s,a,l,i){if(xi(t))throw Error(o(485));if(t=s.action,t!==null){var r={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){r.listeners.push(g)}};_.T!==null?a(!0):r.isTransition=!1,l(r),a=s.pending,a===null?(r.next=s.pending=r,ou(s,r)):(r.next=a.next,s.pending=a.next=r)}}function ou(t,s){var a=s.action,l=s.payload,i=t.state;if(s.isTransition){var r=_.T,g={};_.T=g;try{var S=a(i,l),O=_.S;O!==null&&O(g,S),du(t,s,S)}catch(Z){cc(t,s,Z)}finally{r!==null&&g.types!==null&&(r.types=g.types),_.T=r}}else try{r=a(i,l),du(t,s,r)}catch(Z){cc(t,s,Z)}}function du(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){uu(t,s,l)},function(l){return cc(t,s,l)}):uu(t,s,a)}function uu(t,s,a){s.status="fulfilled",s.value=a,mu(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,ou(t,a)))}function cc(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,mu(s),s=s.next;while(s!==l)}t.action=null}function mu(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function hu(t,s){return s}function fu(t,s){if(Pe){var a=it.formState;if(a!==null){e:{var l=Le;if(Pe){if(rt){t:{for(var i=rt,r=rs;i.nodeType!==8;){if(!r){i=null;break t}if(i=os(i.nextSibling),i===null){i=null;break t}}r=i.data,i=r==="F!"||r==="F"?i:null}if(i){rt=os(i.nextSibling),l=i.data==="F!";break e}}aa(l)}l=!1}l&&(s=a[0])}}return a=Ot(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hu,lastRenderedState:s},a.queue=l,a=Ru.bind(null,Le,l),l.dispatch=a,l=rc(!1),r=fc.bind(null,Le,!1,l.queue),l=Ot(),i={state:s,dispatch:null,action:t,pending:null},l.queue=i,a=qx.bind(null,Le,i,r,a),i.dispatch=a,l.memoizedState=t,[s,a,!1]}function xu(t){var s=gt();return gu(s,at,t)}function gu(t,s,a){if(s=nc(t,s,hu)[0],t=mi(Ls)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Wl(s)}catch(g){throw g===dl?si:g}else l=s;s=gt();var i=s.queue,r=i.dispatch;return a!==s.memoizedState&&(Le.flags|=2048,xl(9,{destroy:void 0},Fx.bind(null,i,a),null)),[l,r,t]}function Fx(t,s){t.action=s}function pu(t){var s=gt(),a=at;if(a!==null)return gu(s,a,t);gt(),s=s.memoizedState,a=gt();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function xl(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=Le.updateQueue,s===null&&(s=di(),Le.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function bu(){return gt().memoizedState}function hi(t,s,a,l){var i=Ot();Le.flags|=t,i.memoizedState=xl(1|s,{destroy:void 0},a,l===void 0?null:l)}function fi(t,s,a,l){var i=gt();l=l===void 0?null:l;var r=i.memoizedState.inst;at!==null&&l!==null&&Wr(l,at.memoizedState.deps)?i.memoizedState=xl(s,r,a,l):(Le.flags|=t,i.memoizedState=xl(1|s,r,a,l))}function vu(t,s){hi(8390656,8,t,s)}function oc(t,s){fi(2048,8,t,s)}function Gx(t){Le.flags|=4;var s=Le.updateQueue;if(s===null)s=di(),Le.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function yu(t){var s=gt().memoizedState;return Gx({ref:s,nextImpl:t}),function(){if((Ke&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function ju(t,s){return fi(4,2,t,s)}function Nu(t,s){return fi(4,4,t,s)}function wu(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Su(t,s,a){a=a!=null?a.concat([t]):null,fi(4,4,wu.bind(null,s,t),a)}function dc(){}function Cu(t,s){var a=gt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Wr(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function _u(t,s){var a=gt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Wr(s,l[1]))return l[0];if(l=t(),Ha){gs(!0);try{t()}finally{gs(!1)}}return a.memoizedState=[l,s],l}function uc(t,s,a){return a===void 0||(Os&1073741824)!==0&&(Ye&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=km(),Le.lanes|=t,ma|=t,a)}function ku(t,s,a,l){return $t(a,s)?a:ml.current!==null?(t=uc(t,a,l),$t(t,s)||(vt=!0),t):(Os&42)===0||(Os&1073741824)!==0&&(Ye&261930)===0?(vt=!0,t.memoizedState=a):(t=km(),Le.lanes|=t,ma|=t,s)}function Eu(t,s,a,l,i){var r=M.p;M.p=r!==0&&8>r?r:8;var g=_.T,S={};_.T=S,fc(t,!1,s,a);try{var O=i(),Z=_.S;if(Z!==null&&Z(S,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ne=Ux(O,l);en(t,s,ne,Jt(t))}else en(t,s,l,Jt(t))}catch(ce){en(t,s,{then:function(){},status:"rejected",reason:ce},Jt())}finally{M.p=r,g!==null&&S.types!==null&&(g.types=S.types),_.T=g}}function Yx(){}function mc(t,s,a,l){if(t.tag!==5)throw Error(o(476));var i=Du(t).queue;Eu(t,i,s,Q,a===null?Yx:function(){return Au(t),a(l)})}function Du(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:Q},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Au(t){var s=Du(t);s.next===null&&(s=t.alternate.memoizedState),en(t,s.next.queue,{},Jt())}function hc(){return Et(bn)}function Tu(){return gt().memoizedState}function Mu(){return gt().memoizedState}function $x(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=Jt();t=ia(a);var l=ra(s,t,a);l!==null&&(Ft(l,s,a),Zl(l,s,a)),s={cache:Gr()},t.payload=s;return}s=s.return}}function Px(t,s,a){var l=Jt();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},xi(t)?zu(s,a):(a=Tr(t,s,a,l),a!==null&&(Ft(a,t,l),Ou(a,s,l)))}function Ru(t,s,a){var l=Jt();en(t,s,a,l)}function en(t,s,a,l){var i={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(xi(t))zu(s,i);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=s.lastRenderedReducer,r!==null))try{var g=s.lastRenderedState,S=r(g,a);if(i.hasEagerState=!0,i.eagerState=S,$t(S,g))return Zn(t,s,i,0),it===null&&Qn(),!1}catch{}if(a=Tr(t,s,i,l),a!==null)return Ft(a,t,l),Ou(a,s,l),!0}return!1}function fc(t,s,a,l){if(l={lane:2,revertLane:Xc(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},xi(t)){if(s)throw Error(o(479))}else s=Tr(t,a,l,2),s!==null&&Ft(s,t,2)}function xi(t){var s=t.alternate;return t===Le||s!==null&&s===Le}function zu(t,s){hl=ci=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function Ou(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Rn(t,a)}}var tn={readContext:Et,use:ui,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};tn.useEffectEvent=mt;var Lu={readContext:Et,use:ui,useCallback:function(t,s){return Ot().memoizedState=[t,s===void 0?null:s],t},useContext:Et,useEffect:vu,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,hi(4194308,4,wu.bind(null,s,t),a)},useLayoutEffect:function(t,s){return hi(4194308,4,t,s)},useInsertionEffect:function(t,s){hi(4,2,t,s)},useMemo:function(t,s){var a=Ot();s=s===void 0?null:s;var l=t();if(Ha){gs(!0);try{t()}finally{gs(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=Ot();if(a!==void 0){var i=a(s);if(Ha){gs(!0);try{a(s)}finally{gs(!1)}}}else i=s;return l.memoizedState=l.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},l.queue=t,t=t.dispatch=Px.bind(null,Le,t),[l.memoizedState,t]},useRef:function(t){var s=Ot();return t={current:t},s.memoizedState=t},useState:function(t){t=rc(t);var s=t.queue,a=Ru.bind(null,Le,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:dc,useDeferredValue:function(t,s){var a=Ot();return uc(a,t,s)},useTransition:function(){var t=rc(!1);return t=Eu.bind(null,Le,t.queue,!0,!1),Ot().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=Le,i=Ot();if(Pe){if(a===void 0)throw Error(o(407));a=a()}else{if(a=s(),it===null)throw Error(o(349));(Ye&127)!==0||au(l,s,a)}i.memoizedState=a;var r={value:a,getSnapshot:s};return i.queue=r,vu(nu.bind(null,l,r,t),[t]),l.flags|=2048,xl(9,{destroy:void 0},lu.bind(null,l,r,a,s),null),a},useId:function(){var t=Ot(),s=it.identifierPrefix;if(Pe){var a=ys,l=vs;a=(l&~(1<<32-_t(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=oi++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=Bx++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:hc,useFormState:fu,useActionState:fu,useOptimistic:function(t){var s=Ot();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=fc.bind(null,Le,!0,a),a.dispatch=s,[t,s]},useMemoCache:lc,useCacheRefresh:function(){return Ot().memoizedState=$x.bind(null,Le)},useEffectEvent:function(t){var s=Ot(),a={impl:t};return s.memoizedState=a,function(){if((Ke&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},xc={readContext:Et,use:ui,useCallback:Cu,useContext:Et,useEffect:oc,useImperativeHandle:Su,useInsertionEffect:ju,useLayoutEffect:Nu,useMemo:_u,useReducer:mi,useRef:bu,useState:function(){return mi(Ls)},useDebugValue:dc,useDeferredValue:function(t,s){var a=gt();return ku(a,at.memoizedState,t,s)},useTransition:function(){var t=mi(Ls)[0],s=gt().memoizedState;return[typeof t=="boolean"?t:Wl(t),s]},useSyncExternalStore:su,useId:Tu,useHostTransitionStatus:hc,useFormState:xu,useActionState:xu,useOptimistic:function(t,s){var a=gt();return cu(a,at,t,s)},useMemoCache:lc,useCacheRefresh:Mu};xc.useEffectEvent=yu;var Uu={readContext:Et,use:ui,useCallback:Cu,useContext:Et,useEffect:oc,useImperativeHandle:Su,useInsertionEffect:ju,useLayoutEffect:Nu,useMemo:_u,useReducer:ic,useRef:bu,useState:function(){return ic(Ls)},useDebugValue:dc,useDeferredValue:function(t,s){var a=gt();return at===null?uc(a,t,s):ku(a,at.memoizedState,t,s)},useTransition:function(){var t=ic(Ls)[0],s=gt().memoizedState;return[typeof t=="boolean"?t:Wl(t),s]},useSyncExternalStore:su,useId:Tu,useHostTransitionStatus:hc,useFormState:pu,useActionState:pu,useOptimistic:function(t,s){var a=gt();return at!==null?cu(a,at,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:lc,useCacheRefresh:Mu};Uu.useEffectEvent=yu;function gc(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:y({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var pc={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=Jt(),i=ia(l);i.payload=s,a!=null&&(i.callback=a),s=ra(t,i,l),s!==null&&(Ft(s,t,l),Zl(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=Jt(),i=ia(l);i.tag=1,i.payload=s,a!=null&&(i.callback=a),s=ra(t,i,l),s!==null&&(Ft(s,t,l),Zl(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Jt(),l=ia(a);l.tag=2,s!=null&&(l.callback=s),s=ra(t,l,a),s!==null&&(Ft(s,t,a),Zl(s,t,a))}};function Bu(t,s,a,l,i,r,g){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,r,g):s.prototype&&s.prototype.isPureReactComponent?!Fl(a,l)||!Fl(i,r):!0}function Hu(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&pc.enqueueReplaceState(s,s.state,null)}function qa(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=y({},a));for(var i in t)a[i]===void 0&&(a[i]=t[i])}return a}function qu(t){Vn(t)}function Fu(t){console.error(t)}function Gu(t){Vn(t)}function gi(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Yu(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function bc(t,s,a){return a=ia(a),a.tag=3,a.payload={element:null},a.callback=function(){gi(t,s)},a}function $u(t){return t=ia(t),t.tag=3,t}function Pu(t,s,a,l){var i=a.type.getDerivedStateFromError;if(typeof i=="function"){var r=l.value;t.payload=function(){return i(r)},t.callback=function(){Yu(s,a,l)}}var g=a.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(t.callback=function(){Yu(s,a,l),typeof i!="function"&&(ha===null?ha=new Set([this]):ha.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function Xx(t,s,a,l,i){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&rl(s,a,i,!0),a=Xt.current,a!==null){switch(a.tag){case 31:case 13:return cs===null?Ei():a.alternate===null&&ht===0&&(ht=3),a.flags&=-257,a.flags|=65536,a.lanes=i,l===ai?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Yc(t,l,i)),!1;case 22:return a.flags|=65536,l===ai?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Yc(t,l,i)),!1}throw Error(o(435,a.tag))}return Yc(t,l,i),Ei(),!1}if(Pe)return s=Xt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=i,l!==Ur&&(t=Error(o(422),{cause:l}),$l(ls(t,a)))):(l!==Ur&&(s=Error(o(423),{cause:l}),$l(ls(s,a))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,l=ls(l,a),i=bc(t.stateNode,l,i),Qr(t,i),ht!==4&&(ht=2)),!1;var r=Error(o(520),{cause:l});if(r=ls(r,a),dn===null?dn=[r]:dn.push(r),ht!==4&&(ht=2),s===null)return!0;l=ls(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=i&-i,a.lanes|=t,t=bc(a.stateNode,l,t),Qr(a,t),!1;case 1:if(s=a.type,r=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(ha===null||!ha.has(r))))return a.flags|=65536,i&=-i,a.lanes|=i,i=$u(i),Pu(i,t,a,l),Qr(a,i),!1}a=a.return}while(a!==null);return!1}var vc=Error(o(461)),vt=!1;function Dt(t,s,a,l){s.child=t===null?Zd(s,null,a,l):Ba(s,t.child,a,l)}function Xu(t,s,a,l,i){a=a.render;var r=s.ref;if("ref"in l){var g={};for(var S in l)S!=="ref"&&(g[S]=l[S])}else g=l;return za(s),l=ec(t,s,a,g,r,i),S=tc(),t!==null&&!vt?(sc(t,s,i),Us(t,s,i)):(Pe&&S&&Or(s),s.flags|=1,Dt(t,s,l,i),s.child)}function Vu(t,s,a,l,i){if(t===null){var r=a.type;return typeof r=="function"&&!Mr(r)&&r.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=r,Qu(t,s,r,l,i)):(t=Kn(a.type,null,l,s,s.mode,i),t.ref=s.ref,t.return=s,s.child=t)}if(r=t.child,!kc(t,i)){var g=r.memoizedProps;if(a=a.compare,a=a!==null?a:Fl,a(g,l)&&t.ref===s.ref)return Us(t,s,i)}return s.flags|=1,t=Ts(r,l),t.ref=s.ref,t.return=s,s.child=t}function Qu(t,s,a,l,i){if(t!==null){var r=t.memoizedProps;if(Fl(r,l)&&t.ref===s.ref)if(vt=!1,s.pendingProps=l=r,kc(t,i))(t.flags&131072)!==0&&(vt=!0);else return s.lanes=t.lanes,Us(t,s,i)}return yc(t,s,a,l,i)}function Zu(t,s,a,l){var i=l.children,r=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(r=r!==null?r.baseLanes|a:a,t!==null){for(l=s.child=t.child,i=0;l!==null;)i=i|l.lanes|l.childLanes,l=l.sibling;l=i&~r}else l=0,s.child=null;return Ju(t,s,r,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&ti(s,r!==null?r.cachePool:null),r!==null?Id(s,r):Jr(),Wd(s);else return l=s.lanes=536870912,Ju(t,s,r!==null?r.baseLanes|a:a,a,l)}else r!==null?(ti(s,r.cachePool),Id(s,r),oa(),s.memoizedState=null):(t!==null&&ti(s,null),Jr(),oa());return Dt(t,s,i,a),s.child}function sn(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Ju(t,s,a,l,i){var r=$r();return r=r===null?null:{parent:pt._currentValue,pool:r},s.memoizedState={baseLanes:a,cachePool:r},t!==null&&ti(s,null),Jr(),Wd(s),t!==null&&rl(t,s,l,!0),s.childLanes=i,null}function pi(t,s){return s=vi({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Ku(t,s,a){return Ba(s,t.child,null,a),t=pi(s,s.pendingProps),t.flags|=2,Vt(s),s.memoizedState=null,t}function Vx(t,s,a){var l=s.pendingProps,i=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Pe){if(l.mode==="hidden")return t=pi(s,l),s.lanes=536870912,sn(null,t);if(Ir(s),(t=rt)?(t=oh(t,rs),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:ta!==null?{id:vs,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},a=zd(t),a.return=s,s.child=a,kt=s,rt=null)):t=null,t===null)throw aa(s);return s.lanes=536870912,null}return pi(s,l)}var r=t.memoizedState;if(r!==null){var g=r.dehydrated;if(Ir(s),i)if(s.flags&256)s.flags&=-257,s=Ku(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(o(558));else if(vt||rl(t,s,a,!1),i=(a&t.childLanes)!==0,vt||i){if(l=it,l!==null&&(g=zn(l,a),g!==0&&g!==r.retryLane))throw r.retryLane=g,Aa(t,g),Ft(l,t,g),vc;Ei(),s=Ku(t,s,a)}else t=r.treeContext,rt=os(g.nextSibling),kt=s,Pe=!0,sa=null,rs=!1,t!==null&&Ud(s,t),s=pi(s,l),s.flags|=4096;return s}return t=Ts(t.child,{mode:l.mode,children:l.children}),t.ref=s.ref,s.child=t,t.return=s,t}function bi(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function yc(t,s,a,l,i){return za(s),a=ec(t,s,a,l,void 0,i),l=tc(),t!==null&&!vt?(sc(t,s,i),Us(t,s,i)):(Pe&&l&&Or(s),s.flags|=1,Dt(t,s,a,i),s.child)}function Iu(t,s,a,l,i,r){return za(s),s.updateQueue=null,a=tu(s,l,a,i),eu(t),l=tc(),t!==null&&!vt?(sc(t,s,r),Us(t,s,r)):(Pe&&l&&Or(s),s.flags|=1,Dt(t,s,a,r),s.child)}function Wu(t,s,a,l,i){if(za(s),s.stateNode===null){var r=al,g=a.contextType;typeof g=="object"&&g!==null&&(r=Et(g)),r=new a(l,r),s.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=pc,s.stateNode=r,r._reactInternals=s,r=s.stateNode,r.props=l,r.state=s.memoizedState,r.refs={},Xr(s),g=a.contextType,r.context=typeof g=="object"&&g!==null?Et(g):al,r.state=s.memoizedState,g=a.getDerivedStateFromProps,typeof g=="function"&&(gc(s,a,g,l),r.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(g=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),g!==r.state&&pc.enqueueReplaceState(r,r.state,null),Kl(s,l,r,i),Jl(),r.state=s.memoizedState),typeof r.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){r=s.stateNode;var S=s.memoizedProps,O=qa(a,S);r.props=O;var Z=r.context,ne=a.contextType;g=al,typeof ne=="object"&&ne!==null&&(g=Et(ne));var ce=a.getDerivedStateFromProps;ne=typeof ce=="function"||typeof r.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,ne||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(S||Z!==g)&&Hu(s,r,l,g),na=!1;var I=s.memoizedState;r.state=I,Kl(s,l,r,i),Jl(),Z=s.memoizedState,S||I!==Z||na?(typeof ce=="function"&&(gc(s,a,ce,l),Z=s.memoizedState),(O=na||Bu(s,a,O,l,I,Z,g))?(ne||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(s.flags|=4194308)):(typeof r.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=Z),r.props=l,r.state=Z,r.context=g,l=O):(typeof r.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{r=s.stateNode,Vr(t,s),g=s.memoizedProps,ne=qa(a,g),r.props=ne,ce=s.pendingProps,I=r.context,Z=a.contextType,O=al,typeof Z=="object"&&Z!==null&&(O=Et(Z)),S=a.getDerivedStateFromProps,(Z=typeof S=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(g!==ce||I!==O)&&Hu(s,r,l,O),na=!1,I=s.memoizedState,r.state=I,Kl(s,l,r,i),Jl();var se=s.memoizedState;g!==ce||I!==se||na||t!==null&&t.dependencies!==null&&Wn(t.dependencies)?(typeof S=="function"&&(gc(s,a,S,l),se=s.memoizedState),(ne=na||Bu(s,a,ne,l,I,se,O)||t!==null&&t.dependencies!==null&&Wn(t.dependencies))?(Z||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(l,se,O),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(l,se,O)),typeof r.componentDidUpdate=="function"&&(s.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof r.componentDidUpdate!="function"||g===t.memoizedProps&&I===t.memoizedState||(s.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&I===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=se),r.props=l,r.state=se,r.context=O,l=ne):(typeof r.componentDidUpdate!="function"||g===t.memoizedProps&&I===t.memoizedState||(s.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&I===t.memoizedState||(s.flags|=1024),l=!1)}return r=l,bi(t,s),l=(s.flags&128)!==0,r||l?(r=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:r.render(),s.flags|=1,t!==null&&l?(s.child=Ba(s,t.child,null,i),s.child=Ba(s,null,a,i)):Dt(t,s,a,i),s.memoizedState=r.state,t=s.child):t=Us(t,s,i),t}function em(t,s,a,l){return Ma(),s.flags|=256,Dt(t,s,a,l),s.child}var jc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nc(t){return{baseLanes:t,cachePool:Yd()}}function wc(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Zt),t}function tm(t,s,a){var l=s.pendingProps,i=!1,r=(s.flags&128)!==0,g;if((g=r)||(g=t!==null&&t.memoizedState===null?!1:(xt.current&2)!==0),g&&(i=!0,s.flags&=-129),g=(s.flags&32)!==0,s.flags&=-33,t===null){if(Pe){if(i?ca(s):oa(),(t=rt)?(t=oh(t,rs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:ta!==null?{id:vs,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},a=zd(t),a.return=s,s.child=a,kt=s,rt=null)):t=null,t===null)throw aa(s);return no(t)?s.lanes=32:s.lanes=536870912,null}var S=l.children;return l=l.fallback,i?(oa(),i=s.mode,S=vi({mode:"hidden",children:S},i),l=Ta(l,i,a,null),S.return=s,l.return=s,S.sibling=l,s.child=S,l=s.child,l.memoizedState=Nc(a),l.childLanes=wc(t,g,a),s.memoizedState=jc,sn(null,l)):(ca(s),Sc(s,S))}var O=t.memoizedState;if(O!==null&&(S=O.dehydrated,S!==null)){if(r)s.flags&256?(ca(s),s.flags&=-257,s=Cc(t,s,a)):s.memoizedState!==null?(oa(),s.child=t.child,s.flags|=128,s=null):(oa(),S=l.fallback,i=s.mode,l=vi({mode:"visible",children:l.children},i),S=Ta(S,i,a,null),S.flags|=2,l.return=s,S.return=s,l.sibling=S,s.child=l,Ba(s,t.child,null,a),l=s.child,l.memoizedState=Nc(a),l.childLanes=wc(t,g,a),s.memoizedState=jc,s=sn(null,l));else if(ca(s),no(S)){if(g=S.nextSibling&&S.nextSibling.dataset,g)var Z=g.dgst;g=Z,l=Error(o(419)),l.stack="",l.digest=g,$l({value:l,source:null,stack:null}),s=Cc(t,s,a)}else if(vt||rl(t,s,a,!1),g=(a&t.childLanes)!==0,vt||g){if(g=it,g!==null&&(l=zn(g,a),l!==0&&l!==O.retryLane))throw O.retryLane=l,Aa(t,l),Ft(g,t,l),vc;lo(S)||Ei(),s=Cc(t,s,a)}else lo(S)?(s.flags|=192,s.child=t.child,s=null):(t=O.treeContext,rt=os(S.nextSibling),kt=s,Pe=!0,sa=null,rs=!1,t!==null&&Ud(s,t),s=Sc(s,l.children),s.flags|=4096);return s}return i?(oa(),S=l.fallback,i=s.mode,O=t.child,Z=O.sibling,l=Ts(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,Z!==null?S=Ts(Z,S):(S=Ta(S,i,a,null),S.flags|=2),S.return=s,l.return=s,l.sibling=S,s.child=l,sn(null,l),l=s.child,S=t.child.memoizedState,S===null?S=Nc(a):(i=S.cachePool,i!==null?(O=pt._currentValue,i=i.parent!==O?{parent:O,pool:O}:i):i=Yd(),S={baseLanes:S.baseLanes|a,cachePool:i}),l.memoizedState=S,l.childLanes=wc(t,g,a),s.memoizedState=jc,sn(t.child,l)):(ca(s),a=t.child,t=a.sibling,a=Ts(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(g=s.deletions,g===null?(s.deletions=[t],s.flags|=16):g.push(t)),s.child=a,s.memoizedState=null,a)}function Sc(t,s){return s=vi({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function vi(t,s){return t=Pt(22,t,null,s),t.lanes=0,t}function Cc(t,s,a){return Ba(s,t.child,null,a),t=Sc(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function sm(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),qr(t.return,s,a)}function _c(t,s,a,l,i,r){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:i,treeForkCount:r}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=l,g.tail=a,g.tailMode=i,g.treeForkCount=r)}function am(t,s,a){var l=s.pendingProps,i=l.revealOrder,r=l.tail;l=l.children;var g=xt.current,S=(g&2)!==0;if(S?(g=g&1|2,s.flags|=128):g&=1,q(xt,g),Dt(t,s,l,a),l=Pe?Yl:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sm(t,a,s);else if(t.tag===19)sm(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(i){case"forwards":for(a=s.child,i=null;a!==null;)t=a.alternate,t!==null&&ri(t)===null&&(i=a),a=a.sibling;a=i,a===null?(i=s.child,s.child=null):(i=a.sibling,a.sibling=null),_c(s,!1,i,a,r,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,i=s.child,s.child=null;i!==null;){if(t=i.alternate,t!==null&&ri(t)===null){s.child=i;break}t=i.sibling,i.sibling=a,a=i,i=t}_c(s,!0,a,null,r,l);break;case"together":_c(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function Us(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),ma|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(rl(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(o(153));if(s.child!==null){for(t=s.child,a=Ts(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=Ts(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function kc(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Wn(t)))}function Qx(t,s,a){switch(s.tag){case 3:we(s,s.stateNode.containerInfo),la(s,pt,t.memoizedState.cache),Ma();break;case 27:case 5:J(s);break;case 4:we(s,s.stateNode.containerInfo);break;case 10:la(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ir(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(ca(s),s.flags|=128,null):(a&s.child.childLanes)!==0?tm(t,s,a):(ca(s),t=Us(t,s,a),t!==null?t.sibling:null);ca(s);break;case 19:var i=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(rl(t,s,a,!1),l=(a&s.childLanes)!==0),i){if(l)return am(t,s,a);s.flags|=128}if(i=s.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),q(xt,xt.current),l)break;return null;case 22:return s.lanes=0,Zu(t,s,a,s.pendingProps);case 24:la(s,pt,t.memoizedState.cache)}return Us(t,s,a)}function lm(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)vt=!0;else{if(!kc(t,a)&&(s.flags&128)===0)return vt=!1,Qx(t,s,a);vt=(t.flags&131072)!==0}else vt=!1,Pe&&(s.flags&1048576)!==0&&Ld(s,Yl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(t=La(s.elementType),s.type=t,typeof t=="function")Mr(t)?(l=qa(t,l),s.tag=1,s=Wu(null,s,t,l,a)):(s.tag=0,s=yc(null,s,t,l,a));else{if(t!=null){var i=t.$$typeof;if(i===A){s.tag=11,s=Xu(null,s,t,l,a);break e}else if(i===T){s.tag=14,s=Vu(null,s,t,l,a);break e}}throw s=ae(t)||t,Error(o(306,s,""))}}return s;case 0:return yc(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,i=qa(l,s.pendingProps),Wu(t,s,l,i,a);case 3:e:{if(we(s,s.stateNode.containerInfo),t===null)throw Error(o(387));l=s.pendingProps;var r=s.memoizedState;i=r.element,Vr(t,s),Kl(s,l,null,a);var g=s.memoizedState;if(l=g.cache,la(s,pt,l),l!==r.cache&&Fr(s,[pt],a,!0),Jl(),l=g.element,r.isDehydrated)if(r={element:l,isDehydrated:!1,cache:g.cache},s.updateQueue.baseState=r,s.memoizedState=r,s.flags&256){s=em(t,s,l,a);break e}else if(l!==i){i=ls(Error(o(424)),s),$l(i),s=em(t,s,l,a);break e}else for(t=s.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,rt=os(t.firstChild),kt=s,Pe=!0,sa=null,rs=!0,a=Zd(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ma(),l===i){s=Us(t,s,a);break e}Dt(t,s,l,a)}s=s.child}return s;case 26:return bi(t,s),t===null?(a=xh(s.type,null,s.pendingProps,null))?s.memoizedState=a:Pe||(a=s.type,t=s.pendingProps,l=Oi(K.current).createElement(a),l[jt]=s,l[Mt]=t,At(l,a,t),wt(l),s.stateNode=l):s.memoizedState=xh(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return J(s),t===null&&Pe&&(l=s.stateNode=mh(s.type,s.pendingProps,K.current),kt=s,rs=!0,i=rt,pa(s.type)?(io=i,rt=os(l.firstChild)):rt=i),Dt(t,s,s.pendingProps.children,a),bi(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Pe&&((i=l=rt)&&(l=Sg(l,s.type,s.pendingProps,rs),l!==null?(s.stateNode=l,kt=s,rt=os(l.firstChild),rs=!1,i=!0):i=!1),i||aa(s)),J(s),i=s.type,r=s.pendingProps,g=t!==null?t.memoizedProps:null,l=r.children,to(i,r)?l=null:g!==null&&to(i,g)&&(s.flags|=32),s.memoizedState!==null&&(i=ec(t,s,Hx,null,null,a),bn._currentValue=i),bi(t,s),Dt(t,s,l,a),s.child;case 6:return t===null&&Pe&&((t=a=rt)&&(a=Cg(a,s.pendingProps,rs),a!==null?(s.stateNode=a,kt=s,rt=null,t=!0):t=!1),t||aa(s)),null;case 13:return tm(t,s,a);case 4:return we(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=Ba(s,null,l,a):Dt(t,s,l,a),s.child;case 11:return Xu(t,s,s.type,s.pendingProps,a);case 7:return Dt(t,s,s.pendingProps,a),s.child;case 8:return Dt(t,s,s.pendingProps.children,a),s.child;case 12:return Dt(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,la(s,s.type,l.value),Dt(t,s,l.children,a),s.child;case 9:return i=s.type._context,l=s.pendingProps.children,za(s),i=Et(i),l=l(i),s.flags|=1,Dt(t,s,l,a),s.child;case 14:return Vu(t,s,s.type,s.pendingProps,a);case 15:return Qu(t,s,s.type,s.pendingProps,a);case 19:return am(t,s,a);case 31:return Vx(t,s,a);case 22:return Zu(t,s,a,s.pendingProps);case 24:return za(s),l=Et(pt),t===null?(i=$r(),i===null&&(i=it,r=Gr(),i.pooledCache=r,r.refCount++,r!==null&&(i.pooledCacheLanes|=a),i=r),s.memoizedState={parent:l,cache:i},Xr(s),la(s,pt,i)):((t.lanes&a)!==0&&(Vr(t,s),Kl(s,null,null,a),Jl()),i=t.memoizedState,r=s.memoizedState,i.parent!==l?(i={parent:l,cache:l},s.memoizedState=i,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=i),la(s,pt,l)):(l=r.cache,la(s,pt,l),l!==i.cache&&Fr(s,[pt],a,!0))),Dt(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function Bs(t){t.flags|=4}function Ec(t,s,a,l,i){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(i&335544128)===i)if(t.stateNode.complete)t.flags|=8192;else if(Tm())t.flags|=8192;else throw Ua=ai,Pr}else t.flags&=-16777217}function nm(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!yh(s))if(Tm())t.flags|=8192;else throw Ua=ai,Pr}function yi(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Ks():536870912,t.lanes|=s,vl|=s)}function an(t,s){if(!Pe)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ct(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var i=t.child;i!==null;)a|=i.lanes|i.childLanes,l|=i.subtreeFlags&65011712,l|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)a|=i.lanes|i.childLanes,l|=i.subtreeFlags,l|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function Zx(t,s,a){var l=s.pendingProps;switch(Lr(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(s),null;case 1:return ct(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),zs(pt),ke(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(il(s)?Bs(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Br())),ct(s),null;case 26:var i=s.type,r=s.memoizedState;return t===null?(Bs(s),r!==null?(ct(s),nm(s,r)):(ct(s),Ec(s,i,null,l,a))):r?r!==t.memoizedState?(Bs(s),ct(s),nm(s,r)):(ct(s),s.flags&=-16777217):(t=t.memoizedProps,t!==l&&Bs(s),ct(s),Ec(s,i,t,l,a)),null;case 27:if(he(s),a=K.current,i=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&Bs(s);else{if(!l){if(s.stateNode===null)throw Error(o(166));return ct(s),null}t=X.current,il(s)?Bd(s):(t=mh(i,l,a),s.stateNode=t,Bs(s))}return ct(s),null;case 5:if(he(s),i=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&Bs(s);else{if(!l){if(s.stateNode===null)throw Error(o(166));return ct(s),null}if(r=X.current,il(s))Bd(s);else{var g=Oi(K.current);switch(r){case 1:r=g.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:r=g.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":r=g.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":r=g.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":r=g.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof l.is=="string"?g.createElement("select",{is:l.is}):g.createElement("select"),l.multiple?r.multiple=!0:l.size&&(r.size=l.size);break;default:r=typeof l.is=="string"?g.createElement(i,{is:l.is}):g.createElement(i)}}r[jt]=s,r[Mt]=l;e:for(g=s.child;g!==null;){if(g.tag===5||g.tag===6)r.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===s)break e;for(;g.sibling===null;){if(g.return===null||g.return===s)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}s.stateNode=r;e:switch(At(r,i,l),i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Bs(s)}}return ct(s),Ec(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&Bs(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(o(166));if(t=K.current,il(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,i=kt,i!==null)switch(i.tag){case 27:case 5:l=i.memoizedProps}t[jt]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||th(t.nodeValue,a)),t||aa(s,!0)}else t=Oi(t).createTextNode(l),t[jt]=s,s.stateNode=t}return ct(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(l=il(s),a!==null){if(t===null){if(!l)throw Error(o(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[jt]=s}else Ma(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ct(s),t=!1}else a=Br(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(Vt(s),s):(Vt(s),null);if((s.flags&128)!==0)throw Error(o(558))}return ct(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=il(s),l!==null&&l.dehydrated!==null){if(t===null){if(!i)throw Error(o(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));i[jt]=s}else Ma(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ct(s),i=!1}else i=Br(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return s.flags&256?(Vt(s),s):(Vt(s),null)}return Vt(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=s.child,i=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(i=l.alternate.memoizedState.cachePool.pool),r=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==i&&(l.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),yi(s,s.updateQueue),ct(s),null);case 4:return ke(),t===null&&Jc(s.stateNode.containerInfo),ct(s),null;case 10:return zs(s.type),ct(s),null;case 19:if(B(xt),l=s.memoizedState,l===null)return ct(s),null;if(i=(s.flags&128)!==0,r=l.rendering,r===null)if(i)an(l,!1);else{if(ht!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(r=ri(t),r!==null){for(s.flags|=128,an(l,!1),t=r.updateQueue,s.updateQueue=t,yi(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Rd(a,t),a=a.sibling;return q(xt,xt.current&1|2),Pe&&Ms(s,l.treeForkCount),s.child}t=t.sibling}l.tail!==null&&be()>Ci&&(s.flags|=128,i=!0,an(l,!1),s.lanes=4194304)}else{if(!i)if(t=ri(r),t!==null){if(s.flags|=128,i=!0,t=t.updateQueue,s.updateQueue=t,yi(s,t),an(l,!0),l.tail===null&&l.tailMode==="hidden"&&!r.alternate&&!Pe)return ct(s),null}else 2*be()-l.renderingStartTime>Ci&&a!==536870912&&(s.flags|=128,i=!0,an(l,!1),s.lanes=4194304);l.isBackwards?(r.sibling=s.child,s.child=r):(t=l.last,t!==null?t.sibling=r:s.child=r,l.last=r)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=be(),t.sibling=null,a=xt.current,q(xt,i?a&1|2:a&1),Pe&&Ms(s,l.treeForkCount),t):(ct(s),null);case 22:case 23:return Vt(s),Kr(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(ct(s),s.subtreeFlags&6&&(s.flags|=8192)):ct(s),a=s.updateQueue,a!==null&&yi(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&B(Oa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),zs(pt),ct(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function Jx(t,s){switch(Lr(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return zs(pt),ke(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return he(s),null;case 31:if(s.memoizedState!==null){if(Vt(s),s.alternate===null)throw Error(o(340));Ma()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Vt(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Ma()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return B(xt),null;case 4:return ke(),null;case 10:return zs(s.type),null;case 22:case 23:return Vt(s),Kr(),t!==null&&B(Oa),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return zs(pt),null;case 25:return null;default:return null}}function im(t,s){switch(Lr(s),s.tag){case 3:zs(pt),ke();break;case 26:case 27:case 5:he(s);break;case 4:ke();break;case 31:s.memoizedState!==null&&Vt(s);break;case 13:Vt(s);break;case 19:B(xt);break;case 10:zs(s.type);break;case 22:case 23:Vt(s),Kr(),t!==null&&B(Oa);break;case 24:zs(pt)}}function ln(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var i=l.next;a=i;do{if((a.tag&t)===t){l=void 0;var r=a.create,g=a.inst;l=r(),g.destroy=l}a=a.next}while(a!==i)}}catch(S){et(s,s.return,S)}}function da(t,s,a){try{var l=s.updateQueue,i=l!==null?l.lastEffect:null;if(i!==null){var r=i.next;l=r;do{if((l.tag&t)===t){var g=l.inst,S=g.destroy;if(S!==void 0){g.destroy=void 0,i=s;var O=a,Z=S;try{Z()}catch(ne){et(i,O,ne)}}}l=l.next}while(l!==r)}}catch(ne){et(s,s.return,ne)}}function rm(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Kd(s,a)}catch(l){et(t,t.return,l)}}}function cm(t,s,a){a.props=qa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){et(t,s,l)}}function nn(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(i){et(t,s,i)}}function js(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(i){et(t,s,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(i){et(t,s,i)}else a.current=null}function om(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(i){et(t,t.return,i)}}function Dc(t,s,a){try{var l=t.stateNode;bg(l,t.type,a,s),l[Mt]=s}catch(i){et(t,t.return,i)}}function dm(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&pa(t.type)||t.tag===4}function Ac(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&pa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Tc(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Ds));else if(l!==4&&(l===27&&pa(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Tc(t,s,a),t=t.sibling;t!==null;)Tc(t,s,a),t=t.sibling}function ji(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&pa(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(ji(t,s,a),t=t.sibling;t!==null;)ji(t,s,a),t=t.sibling}function um(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,i=s.attributes;i.length;)s.removeAttributeNode(i[0]);At(s,l,a),s[jt]=t,s[Mt]=a}catch(r){et(t,t.return,r)}}var Hs=!1,yt=!1,Mc=!1,mm=typeof WeakSet=="function"?WeakSet:Set,St=null;function Kx(t,s){if(t=t.containerInfo,Wc=Gi,t=Sd(t),Cr(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var i=l.anchorOffset,r=l.focusNode;l=l.focusOffset;try{a.nodeType,r.nodeType}catch{a=null;break e}var g=0,S=-1,O=-1,Z=0,ne=0,ce=t,I=null;t:for(;;){for(var se;ce!==a||i!==0&&ce.nodeType!==3||(S=g+i),ce!==r||l!==0&&ce.nodeType!==3||(O=g+l),ce.nodeType===3&&(g+=ce.nodeValue.length),(se=ce.firstChild)!==null;)I=ce,ce=se;for(;;){if(ce===t)break t;if(I===a&&++Z===i&&(S=g),I===r&&++ne===l&&(O=g),(se=ce.nextSibling)!==null)break;ce=I,I=ce.parentNode}ce=se}a=S===-1||O===-1?null:{start:S,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(eo={focusedElem:t,selectionRange:a},Gi=!1,St=s;St!==null;)if(s=St,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,St=t;else for(;St!==null;){switch(s=St,r=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)i=t[a],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&r!==null){t=void 0,a=s,i=r.memoizedProps,r=r.memoizedState,l=a.stateNode;try{var ye=qa(a.type,i);t=l.getSnapshotBeforeUpdate(ye,r),l.__reactInternalSnapshotBeforeUpdate=t}catch(_e){et(a,a.return,_e)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)ao(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":ao(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=s.sibling,t!==null){t.return=s.return,St=t;break}St=s.return}}function hm(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Fs(t,a),l&4&&ln(5,a);break;case 1:if(Fs(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(g){et(a,a.return,g)}else{var i=qa(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(i,s,t.__reactInternalSnapshotBeforeUpdate)}catch(g){et(a,a.return,g)}}l&64&&rm(a),l&512&&nn(a,a.return);break;case 3:if(Fs(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Kd(t,s)}catch(g){et(a,a.return,g)}}break;case 27:s===null&&l&4&&um(a);case 26:case 5:Fs(t,a),s===null&&l&4&&om(a),l&512&&nn(a,a.return);break;case 12:Fs(t,a);break;case 31:Fs(t,a),l&4&&gm(t,a);break;case 13:Fs(t,a),l&4&&pm(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=ig.bind(null,a),_g(t,a))));break;case 22:if(l=a.memoizedState!==null||Hs,!l){s=s!==null&&s.memoizedState!==null||yt,i=Hs;var r=yt;Hs=l,(yt=s)&&!r?Gs(t,a,(a.subtreeFlags&8772)!==0):Fs(t,a),Hs=i,yt=r}break;case 30:break;default:Fs(t,a)}}function fm(t){var s=t.alternate;s!==null&&(t.alternate=null,fm(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Xe(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ot=null,Ut=!1;function qs(t,s,a){for(a=a.child;a!==null;)xm(t,s,a),a=a.sibling}function xm(t,s,a){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(Ss,a)}catch{}switch(a.tag){case 26:yt||js(a,s),qs(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:yt||js(a,s);var l=ot,i=Ut;pa(a.type)&&(ot=a.stateNode,Ut=!1),qs(t,s,a),xn(a.stateNode),ot=l,Ut=i;break;case 5:yt||js(a,s);case 6:if(l=ot,i=Ut,ot=null,qs(t,s,a),ot=l,Ut=i,ot!==null)if(Ut)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(a.stateNode)}catch(r){et(a,s,r)}else try{ot.removeChild(a.stateNode)}catch(r){et(a,s,r)}break;case 18:ot!==null&&(Ut?(t=ot,rh(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),kl(t)):rh(ot,a.stateNode));break;case 4:l=ot,i=Ut,ot=a.stateNode.containerInfo,Ut=!0,qs(t,s,a),ot=l,Ut=i;break;case 0:case 11:case 14:case 15:da(2,a,s),yt||da(4,a,s),qs(t,s,a);break;case 1:yt||(js(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&cm(a,s,l)),qs(t,s,a);break;case 21:qs(t,s,a);break;case 22:yt=(l=yt)||a.memoizedState!==null,qs(t,s,a),yt=l;break;default:qs(t,s,a)}}function gm(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{kl(t)}catch(a){et(s,s.return,a)}}}function pm(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{kl(t)}catch(a){et(s,s.return,a)}}function Ix(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new mm),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new mm),s;default:throw Error(o(435,t.tag))}}function Ni(t,s){var a=Ix(t);s.forEach(function(l){if(!a.has(l)){a.add(l);var i=rg.bind(null,t,l);l.then(i,i)}})}function Bt(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var i=a[l],r=t,g=s,S=g;e:for(;S!==null;){switch(S.tag){case 27:if(pa(S.type)){ot=S.stateNode,Ut=!1;break e}break;case 5:ot=S.stateNode,Ut=!1;break e;case 3:case 4:ot=S.stateNode.containerInfo,Ut=!0;break e}S=S.return}if(ot===null)throw Error(o(160));xm(r,g,i),ot=null,Ut=!1,r=i.alternate,r!==null&&(r.return=null),i.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)bm(s,t),s=s.sibling}var hs=null;function bm(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Bt(s,t),Ht(t),l&4&&(da(3,t,t.return),ln(3,t),da(5,t,t.return));break;case 1:Bt(s,t),Ht(t),l&512&&(yt||a===null||js(a,a.return)),l&64&&Hs&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var i=hs;if(Bt(s,t),Ht(t),l&512&&(yt||a===null||js(a,a.return)),l&4){var r=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,i=i.ownerDocument||i;t:switch(l){case"title":r=i.getElementsByTagName("title")[0],(!r||r[Oe]||r[jt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=i.createElement(l),i.head.insertBefore(r,i.querySelector("head > title"))),At(r,l,a),r[jt]=t,wt(r),l=r;break e;case"link":var g=bh("link","href",i).get(l+(a.href||""));if(g){for(var S=0;S<g.length;S++)if(r=g[S],r.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&r.getAttribute("rel")===(a.rel==null?null:a.rel)&&r.getAttribute("title")===(a.title==null?null:a.title)&&r.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){g.splice(S,1);break t}}r=i.createElement(l),At(r,l,a),i.head.appendChild(r);break;case"meta":if(g=bh("meta","content",i).get(l+(a.content||""))){for(S=0;S<g.length;S++)if(r=g[S],r.getAttribute("content")===(a.content==null?null:""+a.content)&&r.getAttribute("name")===(a.name==null?null:a.name)&&r.getAttribute("property")===(a.property==null?null:a.property)&&r.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&r.getAttribute("charset")===(a.charSet==null?null:a.charSet)){g.splice(S,1);break t}}r=i.createElement(l),At(r,l,a),i.head.appendChild(r);break;default:throw Error(o(468,l))}r[jt]=t,wt(r),l=r}t.stateNode=l}else vh(i,t.type,t.stateNode);else t.stateNode=ph(i,l,t.memoizedProps);else r!==l?(r===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):r.count--,l===null?vh(i,t.type,t.stateNode):ph(i,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Dc(t,t.memoizedProps,a.memoizedProps)}break;case 27:Bt(s,t),Ht(t),l&512&&(yt||a===null||js(a,a.return)),a!==null&&l&4&&Dc(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Bt(s,t),Ht(t),l&512&&(yt||a===null||js(a,a.return)),t.flags&32){i=t.stateNode;try{Ja(i,"")}catch(ye){et(t,t.return,ye)}}l&4&&t.stateNode!=null&&(i=t.memoizedProps,Dc(t,i,a!==null?a.memoizedProps:i)),l&1024&&(Mc=!0);break;case 6:if(Bt(s,t),Ht(t),l&4){if(t.stateNode===null)throw Error(o(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ye){et(t,t.return,ye)}}break;case 3:if(Bi=null,i=hs,hs=Li(s.containerInfo),Bt(s,t),hs=i,Ht(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{kl(s.containerInfo)}catch(ye){et(t,t.return,ye)}Mc&&(Mc=!1,vm(t));break;case 4:l=hs,hs=Li(t.stateNode.containerInfo),Bt(s,t),Ht(t),hs=l;break;case 12:Bt(s,t),Ht(t);break;case 31:Bt(s,t),Ht(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ni(t,l)));break;case 13:Bt(s,t),Ht(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Si=be()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ni(t,l)));break;case 22:i=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,Z=Hs,ne=yt;if(Hs=Z||i,yt=ne||O,Bt(s,t),yt=ne,Hs=Z,Ht(t),l&8192)e:for(s=t.stateNode,s._visibility=i?s._visibility&-2:s._visibility|1,i&&(a===null||O||Hs||yt||Fa(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){O=a=s;try{if(r=O.stateNode,i)g=r.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{S=O.stateNode;var ce=O.memoizedProps.style,I=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;S.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(ye){et(O,O.return,ye)}}}else if(s.tag===6){if(a===null){O=s;try{O.stateNode.nodeValue=i?"":O.memoizedProps}catch(ye){et(O,O.return,ye)}}}else if(s.tag===18){if(a===null){O=s;try{var se=O.stateNode;i?ch(se,!0):ch(O.stateNode,!1)}catch(ye){et(O,O.return,ye)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Ni(t,a))));break;case 19:Bt(s,t),Ht(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ni(t,l)));break;case 30:break;case 21:break;default:Bt(s,t),Ht(t)}}function Ht(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if(dm(l)){a=l;break}l=l.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var i=a.stateNode,r=Ac(t);ji(t,r,i);break;case 5:var g=a.stateNode;a.flags&32&&(Ja(g,""),a.flags&=-33);var S=Ac(t);ji(t,S,g);break;case 3:case 4:var O=a.stateNode.containerInfo,Z=Ac(t);Tc(t,Z,O);break;default:throw Error(o(161))}}catch(ne){et(t,t.return,ne)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function vm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;vm(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Fs(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)hm(t,s.alternate,s),s=s.sibling}function Fa(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:da(4,s,s.return),Fa(s);break;case 1:js(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&cm(s,s.return,a),Fa(s);break;case 27:xn(s.stateNode);case 26:case 5:js(s,s.return),Fa(s);break;case 22:s.memoizedState===null&&Fa(s);break;case 30:Fa(s);break;default:Fa(s)}t=t.sibling}}function Gs(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,i=t,r=s,g=r.flags;switch(r.tag){case 0:case 11:case 15:Gs(i,r,a),ln(4,r);break;case 1:if(Gs(i,r,a),l=r,i=l.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(Z){et(l,l.return,Z)}if(l=r,i=l.updateQueue,i!==null){var S=l.stateNode;try{var O=i.shared.hiddenCallbacks;if(O!==null)for(i.shared.hiddenCallbacks=null,i=0;i<O.length;i++)Jd(O[i],S)}catch(Z){et(l,l.return,Z)}}a&&g&64&&rm(r),nn(r,r.return);break;case 27:um(r);case 26:case 5:Gs(i,r,a),a&&l===null&&g&4&&om(r),nn(r,r.return);break;case 12:Gs(i,r,a);break;case 31:Gs(i,r,a),a&&g&4&&gm(i,r);break;case 13:Gs(i,r,a),a&&g&4&&pm(i,r);break;case 22:r.memoizedState===null&&Gs(i,r,a),nn(r,r.return);break;case 30:break;default:Gs(i,r,a)}s=s.sibling}}function Rc(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Pl(a))}function zc(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Pl(t))}function fs(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ym(t,s,a,l),s=s.sibling}function ym(t,s,a,l){var i=s.flags;switch(s.tag){case 0:case 11:case 15:fs(t,s,a,l),i&2048&&ln(9,s);break;case 1:fs(t,s,a,l);break;case 3:fs(t,s,a,l),i&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Pl(t)));break;case 12:if(i&2048){fs(t,s,a,l),t=s.stateNode;try{var r=s.memoizedProps,g=r.id,S=r.onPostCommit;typeof S=="function"&&S(g,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){et(s,s.return,O)}}else fs(t,s,a,l);break;case 31:fs(t,s,a,l);break;case 13:fs(t,s,a,l);break;case 23:break;case 22:r=s.stateNode,g=s.alternate,s.memoizedState!==null?r._visibility&2?fs(t,s,a,l):rn(t,s):r._visibility&2?fs(t,s,a,l):(r._visibility|=2,gl(t,s,a,l,(s.subtreeFlags&10256)!==0||!1)),i&2048&&Rc(g,s);break;case 24:fs(t,s,a,l),i&2048&&zc(s.alternate,s);break;default:fs(t,s,a,l)}}function gl(t,s,a,l,i){for(i=i&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var r=t,g=s,S=a,O=l,Z=g.flags;switch(g.tag){case 0:case 11:case 15:gl(r,g,S,O,i),ln(8,g);break;case 23:break;case 22:var ne=g.stateNode;g.memoizedState!==null?ne._visibility&2?gl(r,g,S,O,i):rn(r,g):(ne._visibility|=2,gl(r,g,S,O,i)),i&&Z&2048&&Rc(g.alternate,g);break;case 24:gl(r,g,S,O,i),i&&Z&2048&&zc(g.alternate,g);break;default:gl(r,g,S,O,i)}s=s.sibling}}function rn(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,i=l.flags;switch(l.tag){case 22:rn(a,l),i&2048&&Rc(l.alternate,l);break;case 24:rn(a,l),i&2048&&zc(l.alternate,l);break;default:rn(a,l)}s=s.sibling}}var cn=8192;function pl(t,s,a){if(t.subtreeFlags&cn)for(t=t.child;t!==null;)jm(t,s,a),t=t.sibling}function jm(t,s,a){switch(t.tag){case 26:pl(t,s,a),t.flags&cn&&t.memoizedState!==null&&Bg(a,hs,t.memoizedState,t.memoizedProps);break;case 5:pl(t,s,a);break;case 3:case 4:var l=hs;hs=Li(t.stateNode.containerInfo),pl(t,s,a),hs=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=cn,cn=16777216,pl(t,s,a),cn=l):pl(t,s,a));break;default:pl(t,s,a)}}function Nm(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function on(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];St=l,Sm(l,t)}Nm(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)wm(t),t=t.sibling}function wm(t){switch(t.tag){case 0:case 11:case 15:on(t),t.flags&2048&&da(9,t,t.return);break;case 3:on(t);break;case 12:on(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,wi(t)):on(t);break;default:on(t)}}function wi(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];St=l,Sm(l,t)}Nm(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:da(8,s,s.return),wi(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,wi(s));break;default:wi(s)}t=t.sibling}}function Sm(t,s){for(;St!==null;){var a=St;switch(a.tag){case 0:case 11:case 15:da(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Pl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,St=l;else e:for(a=t;St!==null;){l=St;var i=l.sibling,r=l.return;if(fm(l),l===a){St=null;break e}if(i!==null){i.return=r,St=i;break e}St=r}}}var Wx={getCacheForType:function(t){var s=Et(pt),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return Et(pt).controller.signal}},eg=typeof WeakMap=="function"?WeakMap:Map,Ke=0,it=null,He=null,Ye=0,We=0,Qt=null,ua=!1,bl=!1,Oc=!1,Ys=0,ht=0,ma=0,Ga=0,Lc=0,Zt=0,vl=0,dn=null,qt=null,Uc=!1,Si=0,Cm=0,Ci=1/0,_i=null,ha=null,Nt=0,fa=null,yl=null,$s=0,Bc=0,Hc=null,_m=null,un=0,qc=null;function Jt(){return(Ke&2)!==0&&Ye!==0?Ye&-Ye:_.T!==null?Xc():On()}function km(){if(Zt===0)if((Ye&536870912)===0||Pe){var t=Cs;Cs<<=1,(Cs&3932160)===0&&(Cs=262144),Zt=t}else Zt=536870912;return t=Xt.current,t!==null&&(t.flags|=32),Zt}function Ft(t,s,a){(t===it&&(We===2||We===9)||t.cancelPendingCommit!==null)&&(jl(t,0),xa(t,Ye,Zt,!1)),Sa(t,a),((Ke&2)===0||t!==it)&&(t===it&&((Ke&2)===0&&(Ga|=a),ht===4&&xa(t,Ye,Zt,!1)),Ns(t))}function Em(t,s,a){if((Ke&6)!==0)throw Error(o(327));var l=!a&&(s&127)===0&&(s&t.expiredLanes)===0||ps(t,s),i=l?ag(t,s):Gc(t,s,!0),r=l;do{if(i===0){bl&&!l&&xa(t,s,0,!1);break}else{if(a=t.current.alternate,r&&!tg(a)){i=Gc(t,s,!1),r=!1;continue}if(i===2){if(r=s,t.errorRecoveryDisabledLanes&r)var g=0;else g=t.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){s=g;e:{var S=t;i=dn;var O=S.current.memoizedState.isDehydrated;if(O&&(jl(S,g).flags|=256),g=Gc(S,g,!1),g!==2){if(Oc&&!O){S.errorRecoveryDisabledLanes|=r,Ga|=r,i=4;break e}r=qt,qt=i,r!==null&&(qt===null?qt=r:qt.push.apply(qt,r))}i=g}if(r=!1,i!==2)continue}}if(i===1){jl(t,0),xa(t,s,0,!0);break}e:{switch(l=t,r=i,r){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:xa(l,s,Zt,!ua);break e;case 2:qt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(i=Si+300-be(),10<i)){if(xa(l,s,Zt,!ua),wa(l,0,!0)!==0)break e;$s=s,l.timeoutHandle=nh(Dm.bind(null,l,a,qt,_i,Uc,s,Zt,Ga,vl,ua,r,"Throttled",-0,0),i);break e}Dm(l,a,qt,_i,Uc,s,Zt,Ga,vl,ua,r,null,-0,0)}}break}while(!0);Ns(t)}function Dm(t,s,a,l,i,r,g,S,O,Z,ne,ce,I,se){if(t.timeoutHandle=-1,ce=s.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ds},jm(s,r,ce);var ye=(r&62914560)===r?Si-be():(r&4194048)===r?Cm-be():0;if(ye=Hg(ce,ye),ye!==null){$s=r,t.cancelPendingCommit=ye(Um.bind(null,t,s,r,a,l,i,g,S,O,ne,ce,null,I,se)),xa(t,r,g,!Z);return}}Um(t,s,r,a,l,i,g,S,O)}function tg(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var i=a[l],r=i.getSnapshot;i=i.value;try{if(!$t(r(),i))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function xa(t,s,a,l){s&=~Lc,s&=~Ga,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var i=s;0<i;){var r=31-_t(i),g=1<<r;l[r]=-1,i&=~g}a!==0&&Mn(t,a,s)}function ki(){return(Ke&6)===0?(mn(0),!1):!0}function Fc(){if(He!==null){if(We===0)var t=He.return;else t=He,Rs=Ra=null,ac(t),ul=null,Vl=0,t=He;for(;t!==null;)im(t.alternate,t),t=t.return;He=null}}function jl(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,jg(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),$s=0,Fc(),it=t,He=a=Ts(t.current,null),Ye=s,We=0,Qt=null,ua=!1,bl=ps(t,s),Oc=!1,vl=Zt=Lc=Ga=ma=ht=0,qt=dn=null,Uc=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var i=31-_t(l),r=1<<i;s|=t[i],l&=~r}return Ys=s,Qn(),a}function Am(t,s){Le=null,_.H=tn,s===dl||s===si?(s=Xd(),We=3):s===Pr?(s=Xd(),We=4):We=s===vc?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Qt=s,He===null&&(ht=1,gi(t,ls(s,t.current)))}function Tm(){var t=Xt.current;return t===null?!0:(Ye&4194048)===Ye?cs===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?t===cs:!1}function Mm(){var t=_.H;return _.H=tn,t===null?tn:t}function Rm(){var t=_.A;return _.A=Wx,t}function Ei(){ht=4,ua||(Ye&4194048)!==Ye&&Xt.current!==null||(bl=!0),(ma&134217727)===0&&(Ga&134217727)===0||it===null||xa(it,Ye,Zt,!1)}function Gc(t,s,a){var l=Ke;Ke|=2;var i=Mm(),r=Rm();(it!==t||Ye!==s)&&(_i=null,jl(t,s)),s=!1;var g=ht;e:do try{if(We!==0&&He!==null){var S=He,O=Qt;switch(We){case 8:Fc(),g=6;break e;case 3:case 2:case 9:case 6:Xt.current===null&&(s=!0);var Z=We;if(We=0,Qt=null,Nl(t,S,O,Z),a&&bl){g=0;break e}break;default:Z=We,We=0,Qt=null,Nl(t,S,O,Z)}}sg(),g=ht;break}catch(ne){Am(t,ne)}while(!0);return s&&t.shellSuspendCounter++,Rs=Ra=null,Ke=l,_.H=i,_.A=r,He===null&&(it=null,Ye=0,Qn()),g}function sg(){for(;He!==null;)zm(He)}function ag(t,s){var a=Ke;Ke|=2;var l=Mm(),i=Rm();it!==t||Ye!==s?(_i=null,Ci=be()+500,jl(t,s)):bl=ps(t,s);e:do try{if(We!==0&&He!==null){s=He;var r=Qt;t:switch(We){case 1:We=0,Qt=null,Nl(t,s,r,1);break;case 2:case 9:if($d(r)){We=0,Qt=null,Om(s);break}s=function(){We!==2&&We!==9||it!==t||(We=7),Ns(t)},r.then(s,s);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:$d(r)?(We=0,Qt=null,Om(s)):(We=0,Qt=null,Nl(t,s,r,7));break;case 5:var g=null;switch(He.tag){case 26:g=He.memoizedState;case 5:case 27:var S=He;if(g?yh(g):S.stateNode.complete){We=0,Qt=null;var O=S.sibling;if(O!==null)He=O;else{var Z=S.return;Z!==null?(He=Z,Di(Z)):He=null}break t}}We=0,Qt=null,Nl(t,s,r,5);break;case 6:We=0,Qt=null,Nl(t,s,r,6);break;case 8:Fc(),ht=6;break e;default:throw Error(o(462))}}lg();break}catch(ne){Am(t,ne)}while(!0);return Rs=Ra=null,_.H=l,_.A=i,Ke=a,He!==null?0:(it=null,Ye=0,Qn(),ht)}function lg(){for(;He!==null&&!fe();)zm(He)}function zm(t){var s=lm(t.alternate,t,Ys);t.memoizedProps=t.pendingProps,s===null?Di(t):He=s}function Om(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=Iu(a,s,s.pendingProps,s.type,void 0,Ye);break;case 11:s=Iu(a,s,s.pendingProps,s.type.render,s.ref,Ye);break;case 5:ac(s);default:im(a,s),s=He=Rd(s,Ys),s=lm(a,s,Ys)}t.memoizedProps=t.pendingProps,s===null?Di(t):He=s}function Nl(t,s,a,l){Rs=Ra=null,ac(s),ul=null,Vl=0;var i=s.return;try{if(Xx(t,i,s,a,Ye)){ht=1,gi(t,ls(a,t.current)),He=null;return}}catch(r){if(i!==null)throw He=i,r;ht=1,gi(t,ls(a,t.current)),He=null;return}s.flags&32768?(Pe||l===1?t=!0:bl||(Ye&536870912)!==0?t=!1:(ua=t=!0,(l===2||l===9||l===3||l===6)&&(l=Xt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Lm(s,t)):Di(s)}function Di(t){var s=t;do{if((s.flags&32768)!==0){Lm(s,ua);return}t=s.return;var a=Zx(s.alternate,s,Ys);if(a!==null){He=a;return}if(s=s.sibling,s!==null){He=s;return}He=s=t}while(s!==null);ht===0&&(ht=5)}function Lm(t,s){do{var a=Jx(t.alternate,t);if(a!==null){a.flags&=32767,He=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){He=t;return}He=t=a}while(t!==null);ht=6,He=null}function Um(t,s,a,l,i,r,g,S,O){t.cancelPendingCommit=null;do Ai();while(Nt!==0);if((Ke&6)!==0)throw Error(o(327));if(s!==null){if(s===t.current)throw Error(o(177));if(r=s.lanes|s.childLanes,r|=Ar,rr(t,a,r,g,S,O),t===it&&(He=it=null,Ye=0),yl=s,fa=t,$s=a,Bc=r,Hc=i,_m=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,cg(Ce,function(){return Gm(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=_.T,_.T=null,i=M.p,M.p=2,g=Ke,Ke|=4;try{Kx(t,s,a)}finally{Ke=g,M.p=i,_.T=l}}Nt=1,Bm(),Hm(),qm()}}function Bm(){if(Nt===1){Nt=0;var t=fa,s=yl,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=_.T,_.T=null;var l=M.p;M.p=2;var i=Ke;Ke|=4;try{bm(s,t);var r=eo,g=Sd(t.containerInfo),S=r.focusedElem,O=r.selectionRange;if(g!==S&&S&&S.ownerDocument&&wd(S.ownerDocument.documentElement,S)){if(O!==null&&Cr(S)){var Z=O.start,ne=O.end;if(ne===void 0&&(ne=Z),"selectionStart"in S)S.selectionStart=Z,S.selectionEnd=Math.min(ne,S.value.length);else{var ce=S.ownerDocument||document,I=ce&&ce.defaultView||window;if(I.getSelection){var se=I.getSelection(),ye=S.textContent.length,_e=Math.min(O.start,ye),nt=O.end===void 0?_e:Math.min(O.end,ye);!se.extend&&_e>nt&&(g=nt,nt=_e,_e=g);var $=Nd(S,_e),F=Nd(S,nt);if($&&F&&(se.rangeCount!==1||se.anchorNode!==$.node||se.anchorOffset!==$.offset||se.focusNode!==F.node||se.focusOffset!==F.offset)){var V=ce.createRange();V.setStart($.node,$.offset),se.removeAllRanges(),_e>nt?(se.addRange(V),se.extend(F.node,F.offset)):(V.setEnd(F.node,F.offset),se.addRange(V))}}}}for(ce=[],se=S;se=se.parentNode;)se.nodeType===1&&ce.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ce.length;S++){var re=ce[S];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Gi=!!Wc,eo=Wc=null}finally{Ke=i,M.p=l,_.T=a}}t.current=s,Nt=2}}function Hm(){if(Nt===2){Nt=0;var t=fa,s=yl,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=_.T,_.T=null;var l=M.p;M.p=2;var i=Ke;Ke|=4;try{hm(t,s.alternate,s)}finally{Ke=i,M.p=l,_.T=a}}Nt=3}}function qm(){if(Nt===4||Nt===3){Nt=0,Ae();var t=fa,s=yl,a=$s,l=_m;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Nt=5:(Nt=0,yl=fa=null,Fm(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(ha=null),Ca(a),s=s.stateNode,ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(Ss,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=_.T,i=M.p,M.p=2,_.T=null;try{for(var r=t.onRecoverableError,g=0;g<l.length;g++){var S=l[g];r(S.value,{componentStack:S.stack})}}finally{_.T=s,M.p=i}}($s&3)!==0&&Ai(),Ns(t),i=t.pendingLanes,(a&261930)!==0&&(i&42)!==0?t===qc?un++:(un=0,qc=t):un=0,mn(0)}}function Fm(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Pl(s)))}function Ai(){return Bm(),Hm(),qm(),Gm()}function Gm(){if(Nt!==5)return!1;var t=fa,s=Bc;Bc=0;var a=Ca($s),l=_.T,i=M.p;try{M.p=32>a?32:a,_.T=null,a=Hc,Hc=null;var r=fa,g=$s;if(Nt=0,yl=fa=null,$s=0,(Ke&6)!==0)throw Error(o(331));var S=Ke;if(Ke|=4,wm(r.current),ym(r,r.current,g,a),Ke=S,mn(0,!1),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(Ss,r)}catch{}return!0}finally{M.p=i,_.T=l,Fm(t,s)}}function Ym(t,s,a){s=ls(a,s),s=bc(t.stateNode,s,2),t=ra(t,s,2),t!==null&&(Sa(t,2),Ns(t))}function et(t,s,a){if(t.tag===3)Ym(t,t,a);else for(;s!==null;){if(s.tag===3){Ym(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ha===null||!ha.has(l))){t=ls(a,t),a=$u(2),l=ra(s,a,2),l!==null&&(Pu(a,l,s,t),Sa(l,2),Ns(l));break}}s=s.return}}function Yc(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new eg;var i=new Set;l.set(s,i)}else i=l.get(s),i===void 0&&(i=new Set,l.set(s,i));i.has(a)||(Oc=!0,i.add(a),t=ng.bind(null,t,s,a),s.then(t,t))}function ng(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,it===t&&(Ye&a)===a&&(ht===4||ht===3&&(Ye&62914560)===Ye&&300>be()-Si?(Ke&2)===0&&jl(t,0):Lc|=a,vl===Ye&&(vl=0)),Ns(t)}function $m(t,s){s===0&&(s=Ks()),t=Aa(t,s),t!==null&&(Sa(t,s),Ns(t))}function ig(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),$m(t,a)}function rg(t,s){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,i=t.memoizedState;i!==null&&(a=i.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(s),$m(t,a)}function cg(t,s){return Y(t,s)}var Ti=null,wl=null,$c=!1,Mi=!1,Pc=!1,ga=0;function Ns(t){t!==wl&&t.next===null&&(wl===null?Ti=wl=t:wl=wl.next=t),Mi=!0,$c||($c=!0,dg())}function mn(t,s){if(!Pc&&Mi){Pc=!0;do for(var a=!1,l=Ti;l!==null;){if(t!==0){var i=l.pendingLanes;if(i===0)var r=0;else{var g=l.suspendedLanes,S=l.pingedLanes;r=(1<<31-_t(42|t)+1)-1,r&=i&~(g&~S),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(a=!0,Qm(l,r))}else r=Ye,r=wa(l,l===it?r:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(r&3)===0||ps(l,r)||(a=!0,Qm(l,r));l=l.next}while(a);Pc=!1}}function og(){Pm()}function Pm(){Mi=$c=!1;var t=0;ga!==0&&yg()&&(t=ga);for(var s=be(),a=null,l=Ti;l!==null;){var i=l.next,r=Xm(l,s);r===0?(l.next=null,a===null?Ti=i:a.next=i,i===null&&(wl=a)):(a=l,(t!==0||(r&3)!==0)&&(Mi=!0)),l=i}Nt!==0&&Nt!==5||mn(t),ga!==0&&(ga=0)}function Xm(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,i=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var g=31-_t(r),S=1<<g,O=i[g];O===-1?((S&a)===0||(S&l)!==0)&&(i[g]=Js(S,s)):O<=s&&(t.expiredLanes|=S),r&=~S}if(s=it,a=Ye,a=wa(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(We===2||We===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ue(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||ps(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&ue(l),Ca(a)){case 2:case 8:a=Je;break;case 32:a=Ce;break;case 268435456:a=zt;break;default:a=Ce}return l=Vm.bind(null,t),a=Y(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&ue(l),t.callbackPriority=2,t.callbackNode=null,2}function Vm(t,s){if(Nt!==0&&Nt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Ai()&&t.callbackNode!==a)return null;var l=Ye;return l=wa(t,t===it?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Em(t,l,s),Xm(t,be()),t.callbackNode!=null&&t.callbackNode===a?Vm.bind(null,t):null)}function Qm(t,s){if(Ai())return null;Em(t,s,!0)}function dg(){Ng(function(){(Ke&6)!==0?Y(Ge,og):Pm()})}function Xc(){if(ga===0){var t=cl;t===0&&(t=Xa,Xa<<=1,(Xa&261888)===0&&(Xa=256)),ga=t}return ga}function Zm(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:qn(""+t)}function Jm(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function ug(t,s,a,l,i){if(s==="submit"&&a&&a.stateNode===i){var r=Zm((i[Mt]||null).action),g=l.submitter;g&&(s=(s=g[Mt]||null)?Zm(s.formAction):g.getAttribute("formAction"),s!==null&&(r=s,g=null));var S=new $n("action","action",null,l,i);t.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ga!==0){var O=g?Jm(i,g):new FormData(i);mc(a,{pending:!0,data:O,method:i.method,action:r},null,O)}}else typeof r=="function"&&(S.preventDefault(),O=g?Jm(i,g):new FormData(i),mc(a,{pending:!0,data:O,method:i.method,action:r},r,O))},currentTarget:i}]})}}for(var Vc=0;Vc<Dr.length;Vc++){var Qc=Dr[Vc],mg=Qc.toLowerCase(),hg=Qc[0].toUpperCase()+Qc.slice(1);ms(mg,"on"+hg)}ms(kd,"onAnimationEnd"),ms(Ed,"onAnimationIteration"),ms(Dd,"onAnimationStart"),ms("dblclick","onDoubleClick"),ms("focusin","onFocus"),ms("focusout","onBlur"),ms(Dx,"onTransitionRun"),ms(Ax,"onTransitionStart"),ms(Tx,"onTransitionCancel"),ms(Ad,"onTransitionEnd"),Qa("onMouseEnter",["mouseout","mouseover"]),Qa("onMouseLeave",["mouseout","mouseover"]),Qa("onPointerEnter",["pointerout","pointerover"]),Qa("onPointerLeave",["pointerout","pointerover"]),_a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_a("onBeforeInput",["compositionend","keypress","textInput","paste"]),_a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hn));function Km(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],i=l.event;l=l.listeners;e:{var r=void 0;if(s)for(var g=l.length-1;0<=g;g--){var S=l[g],O=S.instance,Z=S.currentTarget;if(S=S.listener,O!==r&&i.isPropagationStopped())break e;r=S,i.currentTarget=Z;try{r(i)}catch(ne){Vn(ne)}i.currentTarget=null,r=O}else for(g=0;g<l.length;g++){if(S=l[g],O=S.instance,Z=S.currentTarget,S=S.listener,O!==r&&i.isPropagationStopped())break e;r=S,i.currentTarget=Z;try{r(i)}catch(ne){Vn(ne)}i.currentTarget=null,r=O}}}}function qe(t,s){var a=s[_s];a===void 0&&(a=s[_s]=new Set);var l=t+"__bubble";a.has(l)||(Im(s,t,2,!1),a.add(l))}function Zc(t,s,a){var l=0;s&&(l|=4),Im(a,t,l,s)}var Ri="_reactListening"+Math.random().toString(36).slice(2);function Jc(t){if(!t[Ri]){t[Ri]=!0,Po.forEach(function(a){a!=="selectionchange"&&(fg.has(a)||Zc(a,!1,t),Zc(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Ri]||(s[Ri]=!0,Zc("selectionchange",!1,s))}}function Im(t,s,a,l){switch(kh(s)){case 2:var i=Gg;break;case 8:i=Yg;break;default:i=mo}a=i.bind(null,s,a,t),i=void 0,!gr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(i=!0),l?i!==void 0?t.addEventListener(s,a,{capture:!0,passive:i}):t.addEventListener(s,a,!0):i!==void 0?t.addEventListener(s,a,{passive:i}):t.addEventListener(s,a,!1)}function Kc(t,s,a,l,i){var r=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var g=l.tag;if(g===3||g===4){var S=l.stateNode.containerInfo;if(S===i)break;if(g===4)for(g=l.return;g!==null;){var O=g.tag;if((O===3||O===4)&&g.stateNode.containerInfo===i)return;g=g.return}for(;S!==null;){if(g=bs(S),g===null)return;if(O=g.tag,O===5||O===6||O===26||O===27){l=r=g;continue e}S=S.parentNode}}l=l.return}ad(function(){var Z=r,ne=fr(a),ce=[];e:{var I=Td.get(t);if(I!==void 0){var se=$n,ye=t;switch(t){case"keypress":if(Gn(a)===0)break e;case"keydown":case"keyup":se=rx;break;case"focusin":ye="focus",se=yr;break;case"focusout":ye="blur",se=yr;break;case"beforeblur":case"afterblur":se=yr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=id;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Zf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=dx;break;case kd:case Ed:case Dd:se=If;break;case Ad:se=mx;break;case"scroll":case"scrollend":se=Vf;break;case"wheel":se=fx;break;case"copy":case"cut":case"paste":se=ex;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=cd;break;case"toggle":case"beforetoggle":se=gx}var _e=(s&4)!==0,nt=!_e&&(t==="scroll"||t==="scrollend"),$=_e?I!==null?I+"Capture":null:I;_e=[];for(var F=Z,V;F!==null;){var re=F;if(V=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||V===null||$===null||(re=zl(F,$),re!=null&&_e.push(fn(F,re,V))),nt)break;F=F.return}0<_e.length&&(I=new se(I,ye,null,a,ne),ce.push({event:I,listeners:_e}))}}if((s&7)===0){e:{if(I=t==="mouseover"||t==="pointerover",se=t==="mouseout"||t==="pointerout",I&&a!==hr&&(ye=a.relatedTarget||a.fromElement)&&(bs(ye)||ye[Is]))break e;if((se||I)&&(I=ne.window===ne?ne:(I=ne.ownerDocument)?I.defaultView||I.parentWindow:window,se?(ye=a.relatedTarget||a.toElement,se=Z,ye=ye?bs(ye):null,ye!==null&&(nt=b(ye),_e=ye.tag,ye!==nt||_e!==5&&_e!==27&&_e!==6)&&(ye=null)):(se=null,ye=Z),se!==ye)){if(_e=id,re="onMouseLeave",$="onMouseEnter",F="mouse",(t==="pointerout"||t==="pointerover")&&(_e=cd,re="onPointerLeave",$="onPointerEnter",F="pointer"),nt=se==null?I:ks(se),V=ye==null?I:ks(ye),I=new _e(re,F+"leave",se,a,ne),I.target=nt,I.relatedTarget=V,re=null,bs(ne)===Z&&(_e=new _e($,F+"enter",ye,a,ne),_e.target=V,_e.relatedTarget=nt,re=_e),nt=re,se&&ye)t:{for(_e=xg,$=se,F=ye,V=0,re=$;re;re=_e(re))V++;re=0;for(var Se=F;Se;Se=_e(Se))re++;for(;0<V-re;)$=_e($),V--;for(;0<re-V;)F=_e(F),re--;for(;V--;){if($===F||F!==null&&$===F.alternate){_e=$;break t}$=_e($),F=_e(F)}_e=null}else _e=null;se!==null&&Wm(ce,I,se,_e,!1),ye!==null&&nt!==null&&Wm(ce,nt,ye,_e,!0)}}e:{if(I=Z?ks(Z):window,se=I.nodeName&&I.nodeName.toLowerCase(),se==="select"||se==="input"&&I.type==="file")var Qe=gd;else if(fd(I))if(pd)Qe=_x;else{Qe=Sx;var Ne=wx}else se=I.nodeName,!se||se.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?Z&&mr(Z.elementType)&&(Qe=gd):Qe=Cx;if(Qe&&(Qe=Qe(t,Z))){xd(ce,Qe,a,ne);break e}Ne&&Ne(t,I,Z),t==="focusout"&&Z&&I.type==="number"&&Z.memoizedProps.value!=null&&ur(I,"number",I.value)}switch(Ne=Z?ks(Z):window,t){case"focusin":(fd(Ne)||Ne.contentEditable==="true")&&(el=Ne,_r=Z,Gl=null);break;case"focusout":Gl=_r=el=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,Cd(ce,a,ne);break;case"selectionchange":if(Ex)break;case"keydown":case"keyup":Cd(ce,a,ne)}var Ue;if(Nr)e:{switch(t){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else Wa?md(t,a)&&($e="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&($e="onCompositionStart");$e&&(od&&a.locale!=="ko"&&(Wa||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&Wa&&(Ue=ld()):(ea=ne,pr="value"in ea?ea.value:ea.textContent,Wa=!0)),Ne=zi(Z,$e),0<Ne.length&&($e=new rd($e,t,null,a,ne),ce.push({event:$e,listeners:Ne}),Ue?$e.data=Ue:(Ue=hd(a),Ue!==null&&($e.data=Ue)))),(Ue=bx?vx(t,a):yx(t,a))&&($e=zi(Z,"onBeforeInput"),0<$e.length&&(Ne=new rd("onBeforeInput","beforeinput",null,a,ne),ce.push({event:Ne,listeners:$e}),Ne.data=Ue)),ug(ce,t,Z,a,ne)}Km(ce,s)})}function fn(t,s,a){return{instance:t,listener:s,currentTarget:a}}function zi(t,s){for(var a=s+"Capture",l=[];t!==null;){var i=t,r=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||r===null||(i=zl(t,a),i!=null&&l.unshift(fn(t,i,r)),i=zl(t,s),i!=null&&l.push(fn(t,i,r))),t.tag===3)return l;t=t.return}return[]}function xg(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Wm(t,s,a,l,i){for(var r=s._reactName,g=[];a!==null&&a!==l;){var S=a,O=S.alternate,Z=S.stateNode;if(S=S.tag,O!==null&&O===l)break;S!==5&&S!==26&&S!==27||Z===null||(O=Z,i?(Z=zl(a,r),Z!=null&&g.unshift(fn(a,Z,O))):i||(Z=zl(a,r),Z!=null&&g.push(fn(a,Z,O)))),a=a.return}g.length!==0&&t.push({event:s,listeners:g})}var gg=/\r\n?/g,pg=/\u0000|\uFFFD/g;function eh(t){return(typeof t=="string"?t:""+t).replace(gg,`
`).replace(pg,"")}function th(t,s){return s=eh(s),eh(t)===s}function lt(t,s,a,l,i,r){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Ja(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Ja(t,""+l);break;case"className":Bn(t,"class",l);break;case"tabIndex":Bn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Bn(t,a,l);break;case"style":td(t,l,r);break;case"data":if(s!=="object"){Bn(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=qn(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(a==="formAction"?(s!=="input"&&lt(t,s,"name",i.name,i,null),lt(t,s,"formEncType",i.formEncType,i,null),lt(t,s,"formMethod",i.formMethod,i,null),lt(t,s,"formTarget",i.formTarget,i,null)):(lt(t,s,"encType",i.encType,i,null),lt(t,s,"method",i.method,i,null),lt(t,s,"target",i.target,i,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=qn(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Ds);break;case"onScroll":l!=null&&qe("scroll",t);break;case"onScrollEnd":l!=null&&qe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(a=l.__html,a!=null){if(i.children!=null)throw Error(o(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=qn(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":qe("beforetoggle",t),qe("toggle",t),Un(t,"popover",l);break;case"xlinkActuate":Es(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Es(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Es(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Es(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Es(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Es(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Es(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Es(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Es(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Un(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Pf.get(a)||a,Un(t,a,l))}}function Ic(t,s,a,l,i,r){switch(a){case"style":td(t,l,r);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(a=l.__html,a!=null){if(i.children!=null)throw Error(o(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Ja(t,l):(typeof l=="number"||typeof l=="bigint")&&Ja(t,""+l);break;case"onScroll":l!=null&&qe("scroll",t);break;case"onScrollEnd":l!=null&&qe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Ds);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(i=a.endsWith("Capture"),s=a.slice(2,i?a.length-7:void 0),r=t[Mt]||null,r=r!=null?r[a]:null,typeof r=="function"&&t.removeEventListener(s,r,i),typeof l=="function")){typeof r!="function"&&r!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,i);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Un(t,a,l)}}}function At(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",t),qe("load",t);var l=!1,i=!1,r;for(r in a)if(a.hasOwnProperty(r)){var g=a[r];if(g!=null)switch(r){case"src":l=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:lt(t,s,r,g,a,null)}}i&&lt(t,s,"srcSet",a.srcSet,a,null),l&&lt(t,s,"src",a.src,a,null);return;case"input":qe("invalid",t);var S=r=g=i=null,O=null,Z=null;for(l in a)if(a.hasOwnProperty(l)){var ne=a[l];if(ne!=null)switch(l){case"name":i=ne;break;case"type":g=ne;break;case"checked":O=ne;break;case"defaultChecked":Z=ne;break;case"value":r=ne;break;case"defaultValue":S=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(o(137,s));break;default:lt(t,s,l,ne,a,null)}}Ko(t,r,S,O,Z,g,i,!1);return;case"select":qe("invalid",t),l=g=r=null;for(i in a)if(a.hasOwnProperty(i)&&(S=a[i],S!=null))switch(i){case"value":r=S;break;case"defaultValue":g=S;break;case"multiple":l=S;default:lt(t,s,i,S,a,null)}s=r,a=g,t.multiple=!!l,s!=null?Za(t,!!l,s,!1):a!=null&&Za(t,!!l,a,!0);return;case"textarea":qe("invalid",t),r=i=l=null;for(g in a)if(a.hasOwnProperty(g)&&(S=a[g],S!=null))switch(g){case"value":l=S;break;case"defaultValue":i=S;break;case"children":r=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(o(91));break;default:lt(t,s,g,S,a,null)}Wo(t,l,i,r);return;case"option":for(O in a)a.hasOwnProperty(O)&&(l=a[O],l!=null)&&(O==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":lt(t,s,O,l,a,null));return;case"dialog":qe("beforetoggle",t),qe("toggle",t),qe("cancel",t),qe("close",t);break;case"iframe":case"object":qe("load",t);break;case"video":case"audio":for(l=0;l<hn.length;l++)qe(hn[l],t);break;case"image":qe("error",t),qe("load",t);break;case"details":qe("toggle",t);break;case"embed":case"source":case"link":qe("error",t),qe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in a)if(a.hasOwnProperty(Z)&&(l=a[Z],l!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:lt(t,s,Z,l,a,null)}return;default:if(mr(s)){for(ne in a)a.hasOwnProperty(ne)&&(l=a[ne],l!==void 0&&Ic(t,s,ne,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&lt(t,s,S,l,a,null))}function bg(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,r=null,g=null,S=null,O=null,Z=null,ne=null;for(se in a){var ce=a[se];if(a.hasOwnProperty(se)&&ce!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":O=ce;default:l.hasOwnProperty(se)||lt(t,s,se,null,l,ce)}}for(var I in l){var se=l[I];if(ce=a[I],l.hasOwnProperty(I)&&(se!=null||ce!=null))switch(I){case"type":r=se;break;case"name":i=se;break;case"checked":Z=se;break;case"defaultChecked":ne=se;break;case"value":g=se;break;case"defaultValue":S=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(o(137,s));break;default:se!==ce&&lt(t,s,I,se,l,ce)}}dr(t,g,S,O,Z,ne,r,i);return;case"select":se=g=S=I=null;for(r in a)if(O=a[r],a.hasOwnProperty(r)&&O!=null)switch(r){case"value":break;case"multiple":se=O;default:l.hasOwnProperty(r)||lt(t,s,r,null,l,O)}for(i in l)if(r=l[i],O=a[i],l.hasOwnProperty(i)&&(r!=null||O!=null))switch(i){case"value":I=r;break;case"defaultValue":S=r;break;case"multiple":g=r;default:r!==O&&lt(t,s,i,r,l,O)}s=S,a=g,l=se,I!=null?Za(t,!!a,I,!1):!!l!=!!a&&(s!=null?Za(t,!!a,s,!0):Za(t,!!a,a?[]:"",!1));return;case"textarea":se=I=null;for(S in a)if(i=a[S],a.hasOwnProperty(S)&&i!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:lt(t,s,S,null,l,i)}for(g in l)if(i=l[g],r=a[g],l.hasOwnProperty(g)&&(i!=null||r!=null))switch(g){case"value":I=i;break;case"defaultValue":se=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(o(91));break;default:i!==r&&lt(t,s,g,i,l,r)}Io(t,I,se);return;case"option":for(var ye in a)I=a[ye],a.hasOwnProperty(ye)&&I!=null&&!l.hasOwnProperty(ye)&&(ye==="selected"?t.selected=!1:lt(t,s,ye,null,l,I));for(O in l)I=l[O],se=a[O],l.hasOwnProperty(O)&&I!==se&&(I!=null||se!=null)&&(O==="selected"?t.selected=I&&typeof I!="function"&&typeof I!="symbol":lt(t,s,O,I,l,se));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)I=a[_e],a.hasOwnProperty(_e)&&I!=null&&!l.hasOwnProperty(_e)&&lt(t,s,_e,null,l,I);for(Z in l)if(I=l[Z],se=a[Z],l.hasOwnProperty(Z)&&I!==se&&(I!=null||se!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(o(137,s));break;default:lt(t,s,Z,I,l,se)}return;default:if(mr(s)){for(var nt in a)I=a[nt],a.hasOwnProperty(nt)&&I!==void 0&&!l.hasOwnProperty(nt)&&Ic(t,s,nt,void 0,l,I);for(ne in l)I=l[ne],se=a[ne],!l.hasOwnProperty(ne)||I===se||I===void 0&&se===void 0||Ic(t,s,ne,I,l,se);return}}for(var $ in a)I=a[$],a.hasOwnProperty($)&&I!=null&&!l.hasOwnProperty($)&&lt(t,s,$,null,l,I);for(ce in l)I=l[ce],se=a[ce],!l.hasOwnProperty(ce)||I===se||I==null&&se==null||lt(t,s,ce,I,l,se)}function sh(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vg(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var i=a[l],r=i.transferSize,g=i.initiatorType,S=i.duration;if(r&&S&&sh(g)){for(g=0,S=i.responseEnd,l+=1;l<a.length;l++){var O=a[l],Z=O.startTime;if(Z>S)break;var ne=O.transferSize,ce=O.initiatorType;ne&&sh(ce)&&(O=O.responseEnd,g+=ne*(O<S?1:(S-Z)/(O-Z)))}if(--l,s+=8*(r+g)/(i.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Wc=null,eo=null;function Oi(t){return t.nodeType===9?t:t.ownerDocument}function ah(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lh(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function to(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var so=null;function yg(){var t=window.event;return t&&t.type==="popstate"?t===so?!1:(so=t,!0):(so=null,!1)}var nh=typeof setTimeout=="function"?setTimeout:void 0,jg=typeof clearTimeout=="function"?clearTimeout:void 0,ih=typeof Promise=="function"?Promise:void 0,Ng=typeof queueMicrotask=="function"?queueMicrotask:typeof ih<"u"?function(t){return ih.resolve(null).then(t).catch(wg)}:nh;function wg(t){setTimeout(function(){throw t})}function pa(t){return t==="head"}function rh(t,s){var a=s,l=0;do{var i=a.nextSibling;if(t.removeChild(a),i&&i.nodeType===8)if(a=i.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(i),kl(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")xn(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,xn(a);for(var r=a.firstChild;r;){var g=r.nextSibling,S=r.nodeName;r[Oe]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&r.rel.toLowerCase()==="stylesheet"||a.removeChild(r),r=g}}else a==="body"&&xn(t.ownerDocument.body);a=i}while(a);kl(s)}function ch(t,s){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function ao(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ao(a),Xe(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Sg(t,s,a,l){for(;t.nodeType===1;){var i=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Oe])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var r=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=os(t.nextSibling),t===null)break}return null}function Cg(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=os(t.nextSibling),t===null))return null;return t}function oh(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=os(t.nextSibling),t===null))return null;return t}function lo(t){return t.data==="$?"||t.data==="$~"}function no(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function _g(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function os(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var io=null;function dh(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return os(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function uh(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function mh(t,s,a){switch(s=Oi(a),t){case"html":if(t=s.documentElement,!t)throw Error(o(452));return t;case"head":if(t=s.head,!t)throw Error(o(453));return t;case"body":if(t=s.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function xn(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Xe(t)}var ds=new Map,hh=new Set;function Li(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ps=M.d;M.d={f:kg,r:Eg,D:Dg,C:Ag,L:Tg,m:Mg,X:zg,S:Rg,M:Og};function kg(){var t=Ps.f(),s=ki();return t||s}function Eg(t){var s=es(t);s!==null&&s.tag===5&&s.type==="form"?Au(s):Ps.r(t)}var Sl=typeof document>"u"?null:document;function fh(t,s,a){var l=Sl;if(l&&typeof s=="string"&&s){var i=ss(s);i='link[rel="'+t+'"][href="'+i+'"]',typeof a=="string"&&(i+='[crossorigin="'+a+'"]'),hh.has(i)||(hh.add(i),t={rel:t,crossOrigin:a,href:s},l.querySelector(i)===null&&(s=l.createElement("link"),At(s,"link",t),wt(s),l.head.appendChild(s)))}}function Dg(t){Ps.D(t),fh("dns-prefetch",t,null)}function Ag(t,s){Ps.C(t,s),fh("preconnect",t,s)}function Tg(t,s,a){Ps.L(t,s,a);var l=Sl;if(l&&t&&s){var i='link[rel="preload"][as="'+ss(s)+'"]';s==="image"&&a&&a.imageSrcSet?(i+='[imagesrcset="'+ss(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(i+='[imagesizes="'+ss(a.imageSizes)+'"]')):i+='[href="'+ss(t)+'"]';var r=i;switch(s){case"style":r=Cl(t);break;case"script":r=_l(t)}ds.has(r)||(t=y({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),ds.set(r,t),l.querySelector(i)!==null||s==="style"&&l.querySelector(gn(r))||s==="script"&&l.querySelector(pn(r))||(s=l.createElement("link"),At(s,"link",t),wt(s),l.head.appendChild(s)))}}function Mg(t,s){Ps.m(t,s);var a=Sl;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",i='link[rel="modulepreload"][as="'+ss(l)+'"][href="'+ss(t)+'"]',r=i;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=_l(t)}if(!ds.has(r)&&(t=y({rel:"modulepreload",href:t},s),ds.set(r,t),a.querySelector(i)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(pn(r)))return}l=a.createElement("link"),At(l,"link",t),wt(l),a.head.appendChild(l)}}}function Rg(t,s,a){Ps.S(t,s,a);var l=Sl;if(l&&t){var i=Ws(l).hoistableStyles,r=Cl(t);s=s||"default";var g=i.get(r);if(!g){var S={loading:0,preload:null};if(g=l.querySelector(gn(r)))S.loading=5;else{t=y({rel:"stylesheet",href:t,"data-precedence":s},a),(a=ds.get(r))&&ro(t,a);var O=g=l.createElement("link");wt(O),At(O,"link",t),O._p=new Promise(function(Z,ne){O.onload=Z,O.onerror=ne}),O.addEventListener("load",function(){S.loading|=1}),O.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Ui(g,s,l)}g={type:"stylesheet",instance:g,count:1,state:S},i.set(r,g)}}}function zg(t,s){Ps.X(t,s);var a=Sl;if(a&&t){var l=Ws(a).hoistableScripts,i=_l(t),r=l.get(i);r||(r=a.querySelector(pn(i)),r||(t=y({src:t,async:!0},s),(s=ds.get(i))&&co(t,s),r=a.createElement("script"),wt(r),At(r,"link",t),a.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(i,r))}}function Og(t,s){Ps.M(t,s);var a=Sl;if(a&&t){var l=Ws(a).hoistableScripts,i=_l(t),r=l.get(i);r||(r=a.querySelector(pn(i)),r||(t=y({src:t,async:!0,type:"module"},s),(s=ds.get(i))&&co(t,s),r=a.createElement("script"),wt(r),At(r,"link",t),a.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(i,r))}}function xh(t,s,a,l){var i=(i=K.current)?Li(i):null;if(!i)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Cl(a.href),a=Ws(i).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Cl(a.href);var r=Ws(i).hoistableStyles,g=r.get(t);if(g||(i=i.ownerDocument||i,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,g),(r=i.querySelector(gn(t)))&&!r._p&&(g.instance=r,g.state.loading=5),ds.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ds.set(t,a),r||Lg(i,t,a,g.state))),s&&l===null)throw Error(o(528,""));return g}if(s&&l!==null)throw Error(o(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=_l(a),a=Ws(i).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Cl(t){return'href="'+ss(t)+'"'}function gn(t){return'link[rel="stylesheet"]['+t+"]"}function gh(t){return y({},t,{"data-precedence":t.precedence,precedence:null})}function Lg(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),At(s,"link",a),wt(s),t.head.appendChild(s))}function _l(t){return'[src="'+ss(t)+'"]'}function pn(t){return"script[async]"+t}function ph(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+ss(a.href)+'"]');if(l)return s.instance=l,wt(l),l;var i=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),wt(l),At(l,"style",i),Ui(l,a.precedence,t),s.instance=l;case"stylesheet":i=Cl(a.href);var r=t.querySelector(gn(i));if(r)return s.state.loading|=4,s.instance=r,wt(r),r;l=gh(a),(i=ds.get(i))&&ro(l,i),r=(t.ownerDocument||t).createElement("link"),wt(r);var g=r;return g._p=new Promise(function(S,O){g.onload=S,g.onerror=O}),At(r,"link",l),s.state.loading|=4,Ui(r,a.precedence,t),s.instance=r;case"script":return r=_l(a.src),(i=t.querySelector(pn(r)))?(s.instance=i,wt(i),i):(l=a,(i=ds.get(r))&&(l=y({},a),co(l,i)),t=t.ownerDocument||t,i=t.createElement("script"),wt(i),At(i,"link",l),t.head.appendChild(i),s.instance=i);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Ui(l,a.precedence,t));return s.instance}function Ui(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=l.length?l[l.length-1]:null,r=i,g=0;g<l.length;g++){var S=l[g];if(S.dataset.precedence===s)r=S;else if(r!==i)break}r?r.parentNode.insertBefore(t,r.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function ro(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function co(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Bi=null;function bh(t,s,a){if(Bi===null){var l=new Map,i=Bi=new Map;i.set(a,l)}else i=Bi,l=i.get(a),l||(l=new Map,i.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),i=0;i<a.length;i++){var r=a[i];if(!(r[Oe]||r[jt]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var g=r.getAttribute(s)||"";g=t+g;var S=l.get(g);S?S.push(r):l.set(g,[r])}}return l}function vh(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function Ug(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(t=s.disabled,typeof s.precedence=="string"&&t==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function yh(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Bg(t,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var i=Cl(l.href),r=s.querySelector(gn(i));if(r){s=r._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Hi.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=r,wt(r);return}r=s.ownerDocument||s,l=gh(l),(i=ds.get(i))&&ro(l,i),r=r.createElement("link"),wt(r);var g=r;g._p=new Promise(function(S,O){g.onload=S,g.onerror=O}),At(r,"link",l),a.instance=r}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Hi.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var oo=0;function Hg(t,s){return t.stylesheets&&t.count===0&&Fi(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Fi(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4+s);0<t.imgBytes&&oo===0&&(oo=62500*vg());var i=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Fi(t,t.stylesheets),t.unsuspend)){var r=t.unsuspend;t.unsuspend=null,r()}},(t.imgBytes>oo?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(i)}}:null}function Hi(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fi(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var qi=null;function Fi(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,qi=new Map,s.forEach(qg,t),qi=null,Hi.call(t))}function qg(t,s){if(!(s.state.loading&4)){var a=qi.get(t);if(a)var l=a.get(null);else{a=new Map,qi.set(t,a);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<i.length;r++){var g=i[r];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(a.set(g.dataset.precedence,g),l=g)}l&&a.set(null,l)}i=s.instance,g=i.getAttribute("data-precedence"),r=a.get(g)||l,r===l&&a.set(null,i),a.set(g,i),this.count++,l=Hi.bind(this),i.addEventListener("load",l),i.addEventListener("error",l),r?r.parentNode.insertBefore(i,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),s.state.loading|=4}}var bn={$$typeof:L,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function Fg(t,s,a,l,i,r,g,S,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ml(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ml(0),this.hiddenUpdates=Ml(null),this.identifierPrefix=l,this.onUncaughtError=i,this.onCaughtError=r,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function jh(t,s,a,l,i,r,g,S,O,Z,ne,ce){return t=new Fg(t,s,a,g,O,Z,ne,ce,S),s=1,r===!0&&(s|=24),r=Pt(3,null,null,s),t.current=r,r.stateNode=t,s=Gr(),s.refCount++,t.pooledCache=s,s.refCount++,r.memoizedState={element:l,isDehydrated:a,cache:s},Xr(r),t}function Nh(t){return t?(t=al,t):al}function wh(t,s,a,l,i,r){i=Nh(i),l.context===null?l.context=i:l.pendingContext=i,l=ia(s),l.payload={element:a},r=r===void 0?null:r,r!==null&&(l.callback=r),a=ra(t,l,s),a!==null&&(Ft(a,t,s),Zl(a,t,s))}function Sh(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function uo(t,s){Sh(t,s),(t=t.alternate)&&Sh(t,s)}function Ch(t){if(t.tag===13||t.tag===31){var s=Aa(t,67108864);s!==null&&Ft(s,t,67108864),uo(t,67108864)}}function _h(t){if(t.tag===13||t.tag===31){var s=Jt();s=Rl(s);var a=Aa(t,s);a!==null&&Ft(a,t,s),uo(t,s)}}var Gi=!0;function Gg(t,s,a,l){var i=_.T;_.T=null;var r=M.p;try{M.p=2,mo(t,s,a,l)}finally{M.p=r,_.T=i}}function Yg(t,s,a,l){var i=_.T;_.T=null;var r=M.p;try{M.p=8,mo(t,s,a,l)}finally{M.p=r,_.T=i}}function mo(t,s,a,l){if(Gi){var i=ho(l);if(i===null)Kc(t,s,l,Yi,a),Eh(t,l);else if(Pg(i,t,s,a,l))l.stopPropagation();else if(Eh(t,l),s&4&&-1<$g.indexOf(t)){for(;i!==null;){var r=es(i);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var g=Yt(r.pendingLanes);if(g!==0){var S=r;for(S.pendingLanes|=2,S.entangledLanes|=2;g;){var O=1<<31-_t(g);S.entanglements[1]|=O,g&=~O}Ns(r),(Ke&6)===0&&(Ci=be()+500,mn(0))}}break;case 31:case 13:S=Aa(r,2),S!==null&&Ft(S,r,2),ki(),uo(r,2)}if(r=ho(l),r===null&&Kc(t,s,l,Yi,a),r===i)break;i=r}i!==null&&l.stopPropagation()}else Kc(t,s,l,null,a)}}function ho(t){return t=fr(t),fo(t)}var Yi=null;function fo(t){if(Yi=null,t=bs(t),t!==null){var s=b(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=m(s),t!==null)return t;t=null}else if(a===31){if(t=v(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Yi=t,null}function kh(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Re()){case Ge:return 2;case Je:return 8;case Ce:case ft:return 32;case zt:return 268435456;default:return 32}default:return 32}}var xo=!1,ba=null,va=null,ya=null,vn=new Map,yn=new Map,ja=[],$g="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Eh(t,s){switch(t){case"focusin":case"focusout":ba=null;break;case"dragenter":case"dragleave":va=null;break;case"mouseover":case"mouseout":ya=null;break;case"pointerover":case"pointerout":vn.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":yn.delete(s.pointerId)}}function jn(t,s,a,l,i,r){return t===null||t.nativeEvent!==r?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:r,targetContainers:[i]},s!==null&&(s=es(s),s!==null&&Ch(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,i!==null&&s.indexOf(i)===-1&&s.push(i),t)}function Pg(t,s,a,l,i){switch(s){case"focusin":return ba=jn(ba,t,s,a,l,i),!0;case"dragenter":return va=jn(va,t,s,a,l,i),!0;case"mouseover":return ya=jn(ya,t,s,a,l,i),!0;case"pointerover":var r=i.pointerId;return vn.set(r,jn(vn.get(r)||null,t,s,a,l,i)),!0;case"gotpointercapture":return r=i.pointerId,yn.set(r,jn(yn.get(r)||null,t,s,a,l,i)),!0}return!1}function Dh(t){var s=bs(t.target);if(s!==null){var a=b(s);if(a!==null){if(s=a.tag,s===13){if(s=m(a),s!==null){t.blockedOn=s,Ln(t.priority,function(){_h(a)});return}}else if(s===31){if(s=v(a),s!==null){t.blockedOn=s,Ln(t.priority,function(){_h(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $i(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=ho(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);hr=l,a.target.dispatchEvent(l),hr=null}else return s=es(a),s!==null&&Ch(s),t.blockedOn=a,!1;s.shift()}return!0}function Ah(t,s,a){$i(t)&&a.delete(s)}function Xg(){xo=!1,ba!==null&&$i(ba)&&(ba=null),va!==null&&$i(va)&&(va=null),ya!==null&&$i(ya)&&(ya=null),vn.forEach(Ah),yn.forEach(Ah)}function Pi(t,s){t.blockedOn===s&&(t.blockedOn=null,xo||(xo=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Xg)))}var Xi=null;function Th(t){Xi!==t&&(Xi=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Xi===t&&(Xi=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],i=t[s+2];if(typeof l!="function"){if(fo(l||a)===null)continue;break}var r=es(a);r!==null&&(t.splice(s,3),s-=3,mc(r,{pending:!0,data:i,method:a.method,action:l},l,i))}}))}function kl(t){function s(O){return Pi(O,t)}ba!==null&&Pi(ba,t),va!==null&&Pi(va,t),ya!==null&&Pi(ya,t),vn.forEach(s),yn.forEach(s);for(var a=0;a<ja.length;a++){var l=ja[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ja.length&&(a=ja[0],a.blockedOn===null);)Dh(a),a.blockedOn===null&&ja.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var i=a[l],r=a[l+1],g=i[Mt]||null;if(typeof r=="function")g||Th(a);else if(g){var S=null;if(r&&r.hasAttribute("formAction")){if(i=r,g=r[Mt]||null)S=g.formAction;else if(fo(i)!==null)continue}else S=g.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),Th(a)}}}function Mh(){function t(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(g){return i=g})},focusReset:"manual",scroll:"manual"})}function s(){i!==null&&(i(),i=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,i=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),i!==null&&(i(),i=null)}}}function go(t){this._internalRoot=t}Vi.prototype.render=go.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(o(409));var a=s.current,l=Jt();wh(a,l,t,s,null,null)},Vi.prototype.unmount=go.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;wh(t.current,2,null,t,null,null),ki(),s[Is]=null}};function Vi(t){this._internalRoot=t}Vi.prototype.unstable_scheduleHydration=function(t){if(t){var s=On();t={blockedOn:null,target:t,priority:s};for(var a=0;a<ja.length&&s!==0&&s<ja[a].priority;a++);ja.splice(a,0,t),a===0&&Dh(t)}};var Rh=d.version;if(Rh!=="19.2.3")throw Error(o(527,Rh,"19.2.3"));M.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=p(s),t=t!==null?w(t):null,t=t===null?null:t.stateNode,t};var Vg={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qi.isDisabled&&Qi.supportsFiber)try{Ss=Qi.inject(Vg),ut=Qi}catch{}}return wn.createRoot=function(t,s){if(!u(t))throw Error(o(299));var a=!1,l="",i=qu,r=Fu,g=Gu;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(i=s.onUncaughtError),s.onCaughtError!==void 0&&(r=s.onCaughtError),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),s=jh(t,1,!1,null,null,a,l,null,i,r,g,Mh),t[Is]=s.current,Jc(t),new go(s)},wn.hydrateRoot=function(t,s,a){if(!u(t))throw Error(o(299));var l=!1,i="",r=qu,g=Fu,S=Gu,O=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(i=a.identifierPrefix),a.onUncaughtError!==void 0&&(r=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),s=jh(t,1,!0,s,a??null,l,i,O,r,g,S,Mh),s.context=Nh(null),a=s.current,l=Jt(),l=Rl(l),i=ia(l),i.callback=null,ra(a,i,l),a=l,s.current.lanes=a,Sa(s,a),Ns(s),t[Is]=s.current,Jc(t),new Vi(s)},wn.version="19.2.3",wn}var Yh;function ap(){if(Yh)return vo.exports;Yh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(d){console.error(d)}}return n(),vo.exports=sp(),vo.exports}var lp=ap();var $h="popstate";function np(n={}){function d(u,b){let{pathname:m="/",search:v="",hash:h=""}=$a(u.location.hash.substring(1));return!m.startsWith("/")&&!m.startsWith(".")&&(m="/"+m),Eo("",{pathname:m,search:v,hash:h},b.state&&b.state.usr||null,b.state&&b.state.key||"default")}function c(u,b){let m=u.document.querySelector("base"),v="";if(m&&m.getAttribute("href")){let h=u.location.href,p=h.indexOf("#");v=p===-1?h:h.slice(0,p)}return v+"#"+(typeof b=="string"?b:_n(b))}function o(u,b){Kt(u.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(b)})`)}return rp(d,c,o,n)}function dt(n,d){if(n===!1||n===null||typeof n>"u")throw new Error(d)}function Kt(n,d){if(!n){typeof console<"u"&&console.warn(d);try{throw new Error(d)}catch{}}}function ip(){return Math.random().toString(36).substring(2,10)}function Ph(n,d){return{usr:n.state,key:n.key,idx:d}}function Eo(n,d,c=null,o){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof d=="string"?$a(d):d,state:c,key:d&&d.key||o||ip()}}function _n({pathname:n="/",search:d="",hash:c=""}){return d&&d!=="?"&&(n+=d.charAt(0)==="?"?d:"?"+d),c&&c!=="#"&&(n+=c.charAt(0)==="#"?c:"#"+c),n}function $a(n){let d={};if(n){let c=n.indexOf("#");c>=0&&(d.hash=n.substring(c),n=n.substring(0,c));let o=n.indexOf("?");o>=0&&(d.search=n.substring(o),n=n.substring(0,o)),n&&(d.pathname=n)}return d}function rp(n,d,c,o={}){let{window:u=document.defaultView,v5Compat:b=!1}=o,m=u.history,v="POP",h=null,p=w();p==null&&(p=0,m.replaceState({...m.state,idx:p},""));function w(){return(m.state||{idx:null}).idx}function y(){v="POP";let E=w(),k=E==null?null:E-p;p=E,h&&h({action:v,location:C.location,delta:k})}function j(E,k){v="PUSH";let R=Eo(C.location,E,k);c&&c(R,E),p=w()+1;let L=Ph(R,p),A=C.createHref(R);try{m.pushState(L,"",A)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;u.location.assign(A)}b&&h&&h({action:v,location:C.location,delta:1})}function N(E,k){v="REPLACE";let R=Eo(C.location,E,k);c&&c(R,E),p=w();let L=Ph(R,p),A=C.createHref(R);m.replaceState(L,"",A),b&&h&&h({action:v,location:C.location,delta:0})}function x(E){return cp(E)}let C={get action(){return v},get location(){return n(u,m)},listen(E){if(h)throw new Error("A history only accepts one active listener");return u.addEventListener($h,y),h=E,()=>{u.removeEventListener($h,y),h=null}},createHref(E){return d(u,E)},createURL:x,encodeLocation(E){let k=x(E);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:j,replace:N,go(E){return m.go(E)}};return C}function cp(n,d=!1){let c="http://localhost";typeof window<"u"&&(c=window.location.origin!=="null"?window.location.origin:window.location.href),dt(c,"No window.location.(origin|href) available to create URL");let o=typeof n=="string"?n:_n(n);return o=o.replace(/ $/,"%20"),!d&&o.startsWith("//")&&(o=c+o),new URL(o,c)}function af(n,d,c="/"){return op(n,d,c,!1)}function op(n,d,c,o){let u=typeof d=="string"?$a(d):d,b=Vs(u.pathname||"/",c);if(b==null)return null;let m=lf(n);dp(m);let v=null;for(let h=0;v==null&&h<m.length;++h){let p=jp(b);v=vp(m[h],p,o)}return v}function lf(n,d=[],c=[],o="",u=!1){let b=(m,v,h=u,p)=>{let w={relativePath:p===void 0?m.path||"":p,caseSensitive:m.caseSensitive===!0,childrenIndex:v,route:m};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(o)&&h)return;dt(w.relativePath.startsWith(o),`Absolute route path "${w.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(o.length)}let y=Xs([o,w.relativePath]),j=c.concat(w);m.children&&m.children.length>0&&(dt(m.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),lf(m.children,d,j,y,h)),!(m.path==null&&!m.index)&&d.push({path:y,score:pp(y,m.index),routesMeta:j})};return n.forEach((m,v)=>{if(m.path===""||!m.path?.includes("?"))b(m,v);else for(let h of nf(m.path))b(m,v,!0,h)}),d}function nf(n){let d=n.split("/");if(d.length===0)return[];let[c,...o]=d,u=c.endsWith("?"),b=c.replace(/\?$/,"");if(o.length===0)return u?[b,""]:[b];let m=nf(o.join("/")),v=[];return v.push(...m.map(h=>h===""?b:[b,h].join("/"))),u&&v.push(...m),v.map(h=>n.startsWith("/")&&h===""?"/":h)}function dp(n){n.sort((d,c)=>d.score!==c.score?c.score-d.score:bp(d.routesMeta.map(o=>o.childrenIndex),c.routesMeta.map(o=>o.childrenIndex)))}var up=/^:[\w-]+$/,mp=3,hp=2,fp=1,xp=10,gp=-2,Xh=n=>n==="*";function pp(n,d){let c=n.split("/"),o=c.length;return c.some(Xh)&&(o+=gp),d&&(o+=hp),c.filter(u=>!Xh(u)).reduce((u,b)=>u+(up.test(b)?mp:b===""?fp:xp),o)}function bp(n,d){return n.length===d.length&&n.slice(0,-1).every((o,u)=>o===d[u])?n[n.length-1]-d[d.length-1]:0}function vp(n,d,c=!1){let{routesMeta:o}=n,u={},b="/",m=[];for(let v=0;v<o.length;++v){let h=o[v],p=v===o.length-1,w=b==="/"?d:d.slice(b.length)||"/",y=Wi({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},w),j=h.route;if(!y&&p&&c&&!o[o.length-1].route.index&&(y=Wi({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},w)),!y)return null;Object.assign(u,y.params),m.push({params:u,pathname:Xs([b,y.pathname]),pathnameBase:Cp(Xs([b,y.pathnameBase])),route:j}),y.pathnameBase!=="/"&&(b=Xs([b,y.pathnameBase]))}return m}function Wi(n,d){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[c,o]=yp(n.path,n.caseSensitive,n.end),u=d.match(c);if(!u)return null;let b=u[0],m=b.replace(/(.)\/+$/,"$1"),v=u.slice(1);return{params:o.reduce((p,{paramName:w,isOptional:y},j)=>{if(w==="*"){let x=v[j]||"";m=b.slice(0,b.length-x.length).replace(/(.)\/+$/,"$1")}const N=v[j];return y&&!N?p[w]=void 0:p[w]=(N||"").replace(/%2F/g,"/"),p},{}),pathname:b,pathnameBase:m,pattern:n}}function yp(n,d=!1,c=!0){Kt(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let o=[],u="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,v,h)=>(o.push({paramName:v,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(o.push({paramName:"*"}),u+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):c?u+="\\/*$":n!==""&&n!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,d?void 0:"i"),o]}function jp(n){try{return n.split("/").map(d=>decodeURIComponent(d).replace(/\//g,"%2F")).join("/")}catch(d){return Kt(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${d}).`),n}}function Vs(n,d){if(d==="/")return n;if(!n.toLowerCase().startsWith(d.toLowerCase()))return null;let c=d.endsWith("/")?d.length-1:d.length,o=n.charAt(c);return o&&o!=="/"?null:n.slice(c)||"/"}var rf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Np=n=>rf.test(n);function wp(n,d="/"){let{pathname:c,search:o="",hash:u=""}=typeof n=="string"?$a(n):n,b;if(c)if(Np(c))b=c;else{if(c.includes("//")){let m=c;c=c.replace(/\/\/+/g,"/"),Kt(!1,`Pathnames cannot have embedded double slashes - normalizing ${m} -> ${c}`)}c.startsWith("/")?b=Vh(c.substring(1),"/"):b=Vh(c,d)}else b=d;return{pathname:b,search:_p(o),hash:kp(u)}}function Vh(n,d){let c=d.replace(/\/+$/,"").split("/");return n.split("/").forEach(u=>{u===".."?c.length>1&&c.pop():u!=="."&&c.push(u)}),c.length>1?c.join("/"):"/"}function wo(n,d,c,o){return`Cannot include a '${n}' character in a manually specified \`to.${d}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${c}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Sp(n){return n.filter((d,c)=>c===0||d.route.path&&d.route.path.length>0)}function Mo(n){let d=Sp(n);return d.map((c,o)=>o===d.length-1?c.pathname:c.pathnameBase)}function Ro(n,d,c,o=!1){let u;typeof n=="string"?u=$a(n):(u={...n},dt(!u.pathname||!u.pathname.includes("?"),wo("?","pathname","search",u)),dt(!u.pathname||!u.pathname.includes("#"),wo("#","pathname","hash",u)),dt(!u.search||!u.search.includes("#"),wo("#","search","hash",u)));let b=n===""||u.pathname==="",m=b?"/":u.pathname,v;if(m==null)v=c;else{let y=d.length-1;if(!o&&m.startsWith("..")){let j=m.split("/");for(;j[0]==="..";)j.shift(),y-=1;u.pathname=j.join("/")}v=y>=0?d[y]:"/"}let h=wp(u,v),p=m&&m!=="/"&&m.endsWith("/"),w=(b||m===".")&&c.endsWith("/");return!h.pathname.endsWith("/")&&(p||w)&&(h.pathname+="/"),h}var Xs=n=>n.join("/").replace(/\/\/+/g,"/"),Cp=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),_p=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,kp=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Ep=class{constructor(n,d,c,o=!1){this.status=n,this.statusText=d||"",this.internal=o,c instanceof Error?(this.data=c.toString(),this.error=c):this.data=c}};function Dp(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function Ap(n){return n.map(d=>d.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var cf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function of(n,d){let c=n;if(typeof c!="string"||!rf.test(c))return{absoluteURL:void 0,isExternal:!1,to:c};let o=c,u=!1;if(cf)try{let b=new URL(window.location.href),m=c.startsWith("//")?new URL(b.protocol+c):new URL(c),v=Vs(m.pathname,d);m.origin===b.origin&&v!=null?c=v+m.search+m.hash:u=!0}catch{Kt(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:u,to:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var df=["POST","PUT","PATCH","DELETE"];new Set(df);var Tp=["GET",...df];new Set(Tp);var Dl=f.createContext(null);Dl.displayName="DataRouter";var tr=f.createContext(null);tr.displayName="DataRouterState";var Mp=f.createContext(!1),uf=f.createContext({isTransitioning:!1});uf.displayName="ViewTransition";var Rp=f.createContext(new Map);Rp.displayName="Fetchers";var zp=f.createContext(null);zp.displayName="Await";var It=f.createContext(null);It.displayName="Navigation";var kn=f.createContext(null);kn.displayName="Location";var xs=f.createContext({outlet:null,matches:[],isDataRoute:!1});xs.displayName="Route";var zo=f.createContext(null);zo.displayName="RouteError";var mf="REACT_ROUTER_ERROR",Op="REDIRECT",Lp="ROUTE_ERROR_RESPONSE";function Up(n){if(n.startsWith(`${mf}:${Op}:{`))try{let d=JSON.parse(n.slice(28));if(typeof d=="object"&&d&&typeof d.status=="number"&&typeof d.statusText=="string"&&typeof d.location=="string"&&typeof d.reloadDocument=="boolean"&&typeof d.replace=="boolean")return d}catch{}}function Bp(n){if(n.startsWith(`${mf}:${Lp}:{`))try{let d=JSON.parse(n.slice(40));if(typeof d=="object"&&d&&typeof d.status=="number"&&typeof d.statusText=="string")return new Ep(d.status,d.statusText,d.data)}catch{}}function Hp(n,{relative:d}={}){dt(Al(),"useHref() may be used only in the context of a <Router> component.");let{basename:c,navigator:o}=f.useContext(It),{hash:u,pathname:b,search:m}=En(n,{relative:d}),v=b;return c!=="/"&&(v=b==="/"?c:Xs([c,b])),o.createHref({pathname:v,search:m,hash:u})}function Al(){return f.useContext(kn)!=null}function Qs(){return dt(Al(),"useLocation() may be used only in the context of a <Router> component."),f.useContext(kn).location}var hf="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ff(n){f.useContext(It).static||f.useLayoutEffect(n)}function Zs(){let{isDataRoute:n}=f.useContext(xs);return n?Wp():qp()}function qp(){dt(Al(),"useNavigate() may be used only in the context of a <Router> component.");let n=f.useContext(Dl),{basename:d,navigator:c}=f.useContext(It),{matches:o}=f.useContext(xs),{pathname:u}=Qs(),b=JSON.stringify(Mo(o)),m=f.useRef(!1);return ff(()=>{m.current=!0}),f.useCallback((h,p={})=>{if(Kt(m.current,hf),!m.current)return;if(typeof h=="number"){c.go(h);return}let w=Ro(h,JSON.parse(b),u,p.relative==="path");n==null&&d!=="/"&&(w.pathname=w.pathname==="/"?d:Xs([d,w.pathname])),(p.replace?c.replace:c.push)(w,p.state,p)},[d,c,b,u,n])}f.createContext(null);function Fp(){let{matches:n}=f.useContext(xs),d=n[n.length-1];return d?d.params:{}}function En(n,{relative:d}={}){let{matches:c}=f.useContext(xs),{pathname:o}=Qs(),u=JSON.stringify(Mo(c));return f.useMemo(()=>Ro(n,JSON.parse(u),o,d==="path"),[n,u,o,d])}function Gp(n,d){return xf(n,d)}function xf(n,d,c,o,u){dt(Al(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:b}=f.useContext(It),{matches:m}=f.useContext(xs),v=m[m.length-1],h=v?v.params:{},p=v?v.pathname:"/",w=v?v.pathnameBase:"/",y=v&&v.route;{let R=y&&y.path||"";pf(p,!y||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let j=Qs(),N;if(d){let R=typeof d=="string"?$a(d):d;dt(w==="/"||R.pathname?.startsWith(w),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${w}" but pathname "${R.pathname}" was given in the \`location\` prop.`),N=R}else N=j;let x=N.pathname||"/",C=x;if(w!=="/"){let R=w.replace(/^\//,"").split("/");C="/"+x.replace(/^\//,"").split("/").slice(R.length).join("/")}let E=af(n,{pathname:C});Kt(y||E!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Kt(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=Vp(E&&E.map(R=>Object.assign({},R,{params:Object.assign({},h,R.params),pathname:Xs([w,b.encodeLocation?b.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?w:Xs([w,b.encodeLocation?b.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),m,c,o,u);return d&&k?f.createElement(kn.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},k):k}function Yp(){let n=Ip(),d=Dp(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),c=n instanceof Error?n.stack:null,o="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:o},b={padding:"2px 4px",backgroundColor:o},m=null;return console.error("Error handled by React Router default ErrorBoundary:",n),m=f.createElement(f.Fragment,null,f.createElement("p",null," Hey developer "),f.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",f.createElement("code",{style:b},"ErrorBoundary")," or"," ",f.createElement("code",{style:b},"errorElement")," prop on your route.")),f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},d),c?f.createElement("pre",{style:u},c):null,m)}var $p=f.createElement(Yp,null),gf=class extends f.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,d){return d.location!==n.location||d.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:d.error,location:d.location,revalidation:n.revalidation||d.revalidation}}componentDidCatch(n,d){this.props.onError?this.props.onError(n,d):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const c=Bp(n.digest);c&&(n=c)}let d=n!==void 0?f.createElement(xs.Provider,{value:this.props.routeContext},f.createElement(zo.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?f.createElement(Pp,{error:n},d):d}};gf.contextType=Mp;var So=new WeakMap;function Pp({children:n,error:d}){let{basename:c}=f.useContext(It);if(typeof d=="object"&&d&&"digest"in d&&typeof d.digest=="string"){let o=Up(d.digest);if(o){let u=So.get(d);if(u)throw u;let b=of(o.location,c);if(cf&&!So.get(d))if(b.isExternal||o.reloadDocument)window.location.href=b.absoluteURL||b.to;else{const m=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(b.to,{replace:o.replace}));throw So.set(d,m),m}return f.createElement("meta",{httpEquiv:"refresh",content:`0;url=${b.absoluteURL||b.to}`})}}return n}function Xp({routeContext:n,match:d,children:c}){let o=f.useContext(Dl);return o&&o.static&&o.staticContext&&(d.route.errorElement||d.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=d.route.id),f.createElement(xs.Provider,{value:n},c)}function Vp(n,d=[],c=null,o=null,u=null){if(n==null){if(!c)return null;if(c.errors)n=c.matches;else if(d.length===0&&!c.initialized&&c.matches.length>0)n=c.matches;else return null}let b=n,m=c?.errors;if(m!=null){let w=b.findIndex(y=>y.route.id&&m?.[y.route.id]!==void 0);dt(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(m).join(",")}`),b=b.slice(0,Math.min(b.length,w+1))}let v=!1,h=-1;if(c)for(let w=0;w<b.length;w++){let y=b[w];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(h=w),y.route.id){let{loaderData:j,errors:N}=c,x=y.route.loader&&!j.hasOwnProperty(y.route.id)&&(!N||N[y.route.id]===void 0);if(y.route.lazy||x){v=!0,h>=0?b=b.slice(0,h+1):b=[b[0]];break}}}let p=c&&o?(w,y)=>{o(w,{location:c.location,params:c.matches?.[0]?.params??{},unstable_pattern:Ap(c.matches),errorInfo:y})}:void 0;return b.reduceRight((w,y,j)=>{let N,x=!1,C=null,E=null;c&&(N=m&&y.route.id?m[y.route.id]:void 0,C=y.route.errorElement||$p,v&&(h<0&&j===0?(pf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,E=null):h===j&&(x=!0,E=y.route.hydrateFallbackElement||null)));let k=d.concat(b.slice(0,j+1)),R=()=>{let L;return N?L=C:x?L=E:y.route.Component?L=f.createElement(y.route.Component,null):y.route.element?L=y.route.element:L=w,f.createElement(Xp,{match:y,routeContext:{outlet:w,matches:k,isDataRoute:c!=null},children:L})};return c&&(y.route.ErrorBoundary||y.route.errorElement||j===0)?f.createElement(gf,{location:c.location,revalidation:c.revalidation,component:C,error:N,children:R(),routeContext:{outlet:null,matches:k,isDataRoute:!0},onError:p}):R()},null)}function Oo(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qp(n){let d=f.useContext(Dl);return dt(d,Oo(n)),d}function Zp(n){let d=f.useContext(tr);return dt(d,Oo(n)),d}function Jp(n){let d=f.useContext(xs);return dt(d,Oo(n)),d}function Lo(n){let d=Jp(n),c=d.matches[d.matches.length-1];return dt(c.route.id,`${n} can only be used on routes that contain a unique "id"`),c.route.id}function Kp(){return Lo("useRouteId")}function Ip(){let n=f.useContext(zo),d=Zp("useRouteError"),c=Lo("useRouteError");return n!==void 0?n:d.errors?.[c]}function Wp(){let{router:n}=Qp("useNavigate"),d=Lo("useNavigate"),c=f.useRef(!1);return ff(()=>{c.current=!0}),f.useCallback(async(u,b={})=>{Kt(c.current,hf),c.current&&(typeof u=="number"?await n.navigate(u):await n.navigate(u,{fromRouteId:d,...b}))},[n,d])}var Qh={};function pf(n,d,c){!d&&!Qh[n]&&(Qh[n]=!0,Kt(!1,c))}f.memo(e0);function e0({routes:n,future:d,state:c,onError:o}){return xf(n,void 0,c,o,d)}function t0({to:n,replace:d,state:c,relative:o}){dt(Al(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=f.useContext(It);Kt(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:b}=f.useContext(xs),{pathname:m}=Qs(),v=Zs(),h=Ro(n,Mo(b),m,o==="path"),p=JSON.stringify(h);return f.useEffect(()=>{v(JSON.parse(p),{replace:d,state:c,relative:o})},[v,p,o,d,c]),null}function El(n){dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function s0({basename:n="/",children:d=null,location:c,navigationType:o="POP",navigator:u,static:b=!1,unstable_useTransitions:m}){dt(!Al(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let v=n.replace(/^\/*/,"/"),h=f.useMemo(()=>({basename:v,navigator:u,static:b,unstable_useTransitions:m,future:{}}),[v,u,b,m]);typeof c=="string"&&(c=$a(c));let{pathname:p="/",search:w="",hash:y="",state:j=null,key:N="default"}=c,x=f.useMemo(()=>{let C=Vs(p,v);return C==null?null:{location:{pathname:C,search:w,hash:y,state:j,key:N},navigationType:o}},[v,p,w,y,j,N,o]);return Kt(x!=null,`<Router basename="${v}"> is not able to match the URL "${p}${w}${y}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:f.createElement(It.Provider,{value:h},f.createElement(kn.Provider,{children:d,value:x}))}function a0({children:n,location:d}){return Gp(Do(n),d)}function Do(n,d=[]){let c=[];return f.Children.forEach(n,(o,u)=>{if(!f.isValidElement(o))return;let b=[...d,u];if(o.type===f.Fragment){c.push.apply(c,Do(o.props.children,b));return}dt(o.type===El,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dt(!o.props.index||!o.props.children,"An index route cannot have child routes.");let m={id:o.props.id||b.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(m.children=Do(o.props.children,b)),c.push(m)}),c}var Ki="get",Ii="application/x-www-form-urlencoded";function sr(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function l0(n){return sr(n)&&n.tagName.toLowerCase()==="button"}function n0(n){return sr(n)&&n.tagName.toLowerCase()==="form"}function i0(n){return sr(n)&&n.tagName.toLowerCase()==="input"}function r0(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function c0(n,d){return n.button===0&&(!d||d==="_self")&&!r0(n)}var Zi=null;function o0(){if(Zi===null)try{new FormData(document.createElement("form"),0),Zi=!1}catch{Zi=!0}return Zi}var d0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Co(n){return n!=null&&!d0.has(n)?(Kt(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ii}"`),null):n}function u0(n,d){let c,o,u,b,m;if(n0(n)){let v=n.getAttribute("action");o=v?Vs(v,d):null,c=n.getAttribute("method")||Ki,u=Co(n.getAttribute("enctype"))||Ii,b=new FormData(n)}else if(l0(n)||i0(n)&&(n.type==="submit"||n.type==="image")){let v=n.form;if(v==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||v.getAttribute("action");if(o=h?Vs(h,d):null,c=n.getAttribute("formmethod")||v.getAttribute("method")||Ki,u=Co(n.getAttribute("formenctype"))||Co(v.getAttribute("enctype"))||Ii,b=new FormData(v,n),!o0()){let{name:p,type:w,value:y}=n;if(w==="image"){let j=p?`${p}.`:"";b.append(`${j}x`,"0"),b.append(`${j}y`,"0")}else p&&b.append(p,y)}}else{if(sr(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');c=Ki,o=null,u=Ii,m=n}return b&&u==="text/plain"&&(m=b,b=void 0),{action:o,method:c.toLowerCase(),encType:u,formData:b,body:m}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Uo(n,d){if(n===!1||n===null||typeof n>"u")throw new Error(d)}function m0(n,d,c){let o=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return o.pathname==="/"?o.pathname=`_root.${c}`:d&&Vs(o.pathname,d)==="/"?o.pathname=`${d.replace(/\/$/,"")}/_root.${c}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${c}`,o}async function h0(n,d){if(n.id in d)return d[n.id];try{let c=await import(n.module);return d[n.id]=c,c}catch(c){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(c),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function f0(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function x0(n,d,c){let o=await Promise.all(n.map(async u=>{let b=d.routes[u.route.id];if(b){let m=await h0(b,c);return m.links?m.links():[]}return[]}));return v0(o.flat(1).filter(f0).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function Zh(n,d,c,o,u,b){let m=(h,p)=>c[p]?h.route.id!==c[p].route.id:!0,v=(h,p)=>c[p].pathname!==h.pathname||c[p].route.path?.endsWith("*")&&c[p].params["*"]!==h.params["*"];return b==="assets"?d.filter((h,p)=>m(h,p)||v(h,p)):b==="data"?d.filter((h,p)=>{let w=o.routes[h.route.id];if(!w||!w.hasLoader)return!1;if(m(h,p)||v(h,p))return!0;if(h.route.shouldRevalidate){let y=h.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:c[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function g0(n,d,{includeHydrateFallback:c}={}){return p0(n.map(o=>{let u=d.routes[o.route.id];if(!u)return[];let b=[u.module];return u.clientActionModule&&(b=b.concat(u.clientActionModule)),u.clientLoaderModule&&(b=b.concat(u.clientLoaderModule)),c&&u.hydrateFallbackModule&&(b=b.concat(u.hydrateFallbackModule)),u.imports&&(b=b.concat(u.imports)),b}).flat(1))}function p0(n){return[...new Set(n)]}function b0(n){let d={},c=Object.keys(n).sort();for(let o of c)d[o]=n[o];return d}function v0(n,d){let c=new Set;return new Set(d),n.reduce((o,u)=>{let b=JSON.stringify(b0(u));return c.has(b)||(c.add(b),o.push({key:b,link:u})),o},[])}function bf(){let n=f.useContext(Dl);return Uo(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function y0(){let n=f.useContext(tr);return Uo(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Bo=f.createContext(void 0);Bo.displayName="FrameworkContext";function vf(){let n=f.useContext(Bo);return Uo(n,"You must render this element inside a <HydratedRouter> element"),n}function j0(n,d){let c=f.useContext(Bo),[o,u]=f.useState(!1),[b,m]=f.useState(!1),{onFocus:v,onBlur:h,onMouseEnter:p,onMouseLeave:w,onTouchStart:y}=d,j=f.useRef(null);f.useEffect(()=>{if(n==="render"&&m(!0),n==="viewport"){let C=k=>{k.forEach(R=>{m(R.isIntersecting)})},E=new IntersectionObserver(C,{threshold:.5});return j.current&&E.observe(j.current),()=>{E.disconnect()}}},[n]),f.useEffect(()=>{if(o){let C=setTimeout(()=>{m(!0)},100);return()=>{clearTimeout(C)}}},[o]);let N=()=>{u(!0)},x=()=>{u(!1),m(!1)};return c?n!=="intent"?[b,j,{}]:[b,j,{onFocus:Sn(v,N),onBlur:Sn(h,x),onMouseEnter:Sn(p,N),onMouseLeave:Sn(w,x),onTouchStart:Sn(y,N)}]:[!1,j,{}]}function Sn(n,d){return c=>{n&&n(c),c.defaultPrevented||d(c)}}function N0({page:n,...d}){let{router:c}=bf(),o=f.useMemo(()=>af(c.routes,n,c.basename),[c.routes,n,c.basename]);return o?f.createElement(S0,{page:n,matches:o,...d}):null}function w0(n){let{manifest:d,routeModules:c}=vf(),[o,u]=f.useState([]);return f.useEffect(()=>{let b=!1;return x0(n,d,c).then(m=>{b||u(m)}),()=>{b=!0}},[n,d,c]),o}function S0({page:n,matches:d,...c}){let o=Qs(),{manifest:u,routeModules:b}=vf(),{basename:m}=bf(),{loaderData:v,matches:h}=y0(),p=f.useMemo(()=>Zh(n,d,h,u,o,"data"),[n,d,h,u,o]),w=f.useMemo(()=>Zh(n,d,h,u,o,"assets"),[n,d,h,u,o]),y=f.useMemo(()=>{if(n===o.pathname+o.search+o.hash)return[];let x=new Set,C=!1;if(d.forEach(k=>{let R=u.routes[k.route.id];!R||!R.hasLoader||(!p.some(L=>L.route.id===k.route.id)&&k.route.id in v&&b[k.route.id]?.shouldRevalidate||R.hasClientLoader?C=!0:x.add(k.route.id))}),x.size===0)return[];let E=m0(n,m,"data");return C&&x.size>0&&E.searchParams.set("_routes",d.filter(k=>x.has(k.route.id)).map(k=>k.route.id).join(",")),[E.pathname+E.search]},[m,v,o,u,p,d,n,b]),j=f.useMemo(()=>g0(w,u),[w,u]),N=w0(w);return f.createElement(f.Fragment,null,y.map(x=>f.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...c})),j.map(x=>f.createElement("link",{key:x,rel:"modulepreload",href:x,...c})),N.map(({key:x,link:C})=>f.createElement("link",{key:x,nonce:c.nonce,...C})))}function C0(...n){return d=>{n.forEach(c=>{typeof c=="function"?c(d):c!=null&&(c.current=d)})}}var _0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_0&&(window.__reactRouterVersion="7.11.0")}catch{}function k0({basename:n,children:d,unstable_useTransitions:c,window:o}){let u=f.useRef();u.current==null&&(u.current=np({window:o,v5Compat:!0}));let b=u.current,[m,v]=f.useState({action:b.action,location:b.location}),h=f.useCallback(p=>{c===!1?v(p):f.startTransition(()=>v(p))},[c]);return f.useLayoutEffect(()=>b.listen(h),[b,h]),f.createElement(s0,{basename:n,children:d,location:m.location,navigationType:m.action,navigator:b,unstable_useTransitions:c})}var yf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jf=f.forwardRef(function({onClick:d,discover:c="render",prefetch:o="none",relative:u,reloadDocument:b,replace:m,state:v,target:h,to:p,preventScrollReset:w,viewTransition:y,unstable_defaultShouldRevalidate:j,...N},x){let{basename:C,unstable_useTransitions:E}=f.useContext(It),k=typeof p=="string"&&yf.test(p),R=of(p,C);p=R.to;let L=Hp(p,{relative:u}),[A,G,P]=j0(o,N),T=T0(p,{replace:m,state:v,target:h,preventScrollReset:w,relative:u,viewTransition:y,unstable_defaultShouldRevalidate:j,unstable_useTransitions:E});function xe(me){d&&d(me),me.defaultPrevented||T(me)}let ve=f.createElement("a",{...N,...P,href:R.absoluteURL||L,onClick:R.isExternal||b?d:xe,ref:C0(x,G),target:h,"data-discover":!k&&c==="render"?"true":void 0});return A&&!k?f.createElement(f.Fragment,null,ve,f.createElement(N0,{page:L})):ve});jf.displayName="Link";var E0=f.forwardRef(function({"aria-current":d="page",caseSensitive:c=!1,className:o="",end:u=!1,style:b,to:m,viewTransition:v,children:h,...p},w){let y=En(m,{relative:p.relative}),j=Qs(),N=f.useContext(tr),{navigator:x,basename:C}=f.useContext(It),E=N!=null&&L0(y)&&v===!0,k=x.encodeLocation?x.encodeLocation(y).pathname:y.pathname,R=j.pathname,L=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;c||(R=R.toLowerCase(),L=L?L.toLowerCase():null,k=k.toLowerCase()),L&&C&&(L=Vs(L,C)||L);const A=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let G=R===k||!u&&R.startsWith(k)&&R.charAt(A)==="/",P=L!=null&&(L===k||!u&&L.startsWith(k)&&L.charAt(k.length)==="/"),T={isActive:G,isPending:P,isTransitioning:E},xe=G?d:void 0,ve;typeof o=="function"?ve=o(T):ve=[o,G?"active":null,P?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let me=typeof b=="function"?b(T):b;return f.createElement(jf,{...p,"aria-current":xe,className:ve,ref:w,style:me,to:m,viewTransition:v},typeof h=="function"?h(T):h)});E0.displayName="NavLink";var D0=f.forwardRef(({discover:n="render",fetcherKey:d,navigate:c,reloadDocument:o,replace:u,state:b,method:m=Ki,action:v,onSubmit:h,relative:p,preventScrollReset:w,viewTransition:y,unstable_defaultShouldRevalidate:j,...N},x)=>{let{unstable_useTransitions:C}=f.useContext(It),E=z0(),k=O0(v,{relative:p}),R=m.toLowerCase()==="get"?"get":"post",L=typeof v=="string"&&yf.test(v),A=G=>{if(h&&h(G),G.defaultPrevented)return;G.preventDefault();let P=G.nativeEvent.submitter,T=P?.getAttribute("formmethod")||m,xe=()=>E(P||G.currentTarget,{fetcherKey:d,method:T,navigate:c,replace:u,state:b,relative:p,preventScrollReset:w,viewTransition:y,unstable_defaultShouldRevalidate:j});C&&c!==!1?f.startTransition(()=>xe()):xe()};return f.createElement("form",{ref:x,method:R,action:k,onSubmit:o?h:A,...N,"data-discover":!L&&n==="render"?"true":void 0})});D0.displayName="Form";function A0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nf(n){let d=f.useContext(Dl);return dt(d,A0(n)),d}function T0(n,{target:d,replace:c,state:o,preventScrollReset:u,relative:b,viewTransition:m,unstable_defaultShouldRevalidate:v,unstable_useTransitions:h}={}){let p=Zs(),w=Qs(),y=En(n,{relative:b});return f.useCallback(j=>{if(c0(j,d)){j.preventDefault();let N=c!==void 0?c:_n(w)===_n(y),x=()=>p(n,{replace:N,state:o,preventScrollReset:u,relative:b,viewTransition:m,unstable_defaultShouldRevalidate:v});h?f.startTransition(()=>x()):x()}},[w,p,y,c,o,d,n,u,b,m,v,h])}var M0=0,R0=()=>`__${String(++M0)}__`;function z0(){let{router:n}=Nf("useSubmit"),{basename:d}=f.useContext(It),c=Kp(),o=n.fetch,u=n.navigate;return f.useCallback(async(b,m={})=>{let{action:v,method:h,encType:p,formData:w,body:y}=u0(b,d);if(m.navigate===!1){let j=m.fetcherKey||R0();await o(j,c,m.action||v,{unstable_defaultShouldRevalidate:m.unstable_defaultShouldRevalidate,preventScrollReset:m.preventScrollReset,formData:w,body:y,formMethod:m.method||h,formEncType:m.encType||p,flushSync:m.flushSync})}else await u(m.action||v,{unstable_defaultShouldRevalidate:m.unstable_defaultShouldRevalidate,preventScrollReset:m.preventScrollReset,formData:w,body:y,formMethod:m.method||h,formEncType:m.encType||p,replace:m.replace,state:m.state,fromRouteId:c,flushSync:m.flushSync,viewTransition:m.viewTransition})},[o,u,d,c])}function O0(n,{relative:d}={}){let{basename:c}=f.useContext(It),o=f.useContext(xs);dt(o,"useFormAction must be used inside a RouteContext");let[u]=o.matches.slice(-1),b={...En(n||".",{relative:d})},m=Qs();if(n==null){b.search=m.search;let v=new URLSearchParams(b.search),h=v.getAll("index");if(h.some(w=>w==="")){v.delete("index"),h.filter(y=>y).forEach(y=>v.append("index",y));let w=v.toString();b.search=w?`?${w}`:""}}return(!n||n===".")&&u.route.index&&(b.search=b.search?b.search.replace(/^\?/,"?index&"):"?index"),c!=="/"&&(b.pathname=b.pathname==="/"?c:Xs([c,b.pathname])),_n(b)}function L0(n,{relative:d}={}){let c=f.useContext(uf);dt(c!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=Nf("useViewTransitionState"),u=En(n,{relative:d});if(!c.isTransitioning)return!1;let b=Vs(c.currentLocation.pathname,o)||c.currentLocation.pathname,m=Vs(c.nextLocation.pathname,o)||c.nextLocation.pathname;return Wi(u.pathname,m)!=null||Wi(u.pathname,b)!=null}var Ho=sf();const U0=Zg(Ho),Cn={companyName:"SanctumEMHR",systemName:"Electronic Mental Health Record",tagline:"Where modern design meets clinical insight.",logoText:"S",logoUrl:"/app/SanctumLogo.png",colors:{primary:"#6B9AC4",secondary:"#A8C5A5",accent:"#E8DCC4"}};function B0(){const n=Zs(),[d,c]=f.useState(""),[o,u]=f.useState(""),[b,m]=f.useState(!1),[v,h]=f.useState(""),p=async w=>{w.preventDefault(),m(!0),h("");try{const y=await fetch("/custom/api/login.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:d,password:o})}),j=await y.json();if(!y.ok){j.error==="Account locked"?h(j.message||"This account has been locked due to multiple failed login attempts. Please contact an administrator."):j.error==="Account inactive"?h(j.message||"This account has been deactivated. Please contact an administrator."):h(j.error||"Invalid username or password");return}j.success?(j.user&&localStorage.setItem("user",JSON.stringify(j.user)),n("/dashboard")):h(j.error||"Login failed")}catch(y){console.error("Login error:",y),h("An error occurred during login. Please try again.")}finally{m(!1)}};return e.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-mental"}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"particle particle-1"}),e.jsx("div",{className:"particle particle-2"}),e.jsx("div",{className:"particle particle-3"}),e.jsx("div",{className:"particle particle-4"}),e.jsx("div",{className:"particle particle-5"})]}),e.jsx("div",{className:"relative z-10 w-full max-w-6xl mx-4",children:e.jsx("div",{className:"rounded-3xl overflow-hidden",style:{backdropFilter:"blur(60px) saturate(180%)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0.4) 100%)",boxShadow:"0 8px 32px rgba(107, 154, 196, 0.12), 0 2px 8px rgba(0, 0, 0, 0.06), inset 0 1px 0 rgba(255, 255, 255, 0.8)",border:"1px solid rgba(255, 255, 255, 0.6)"},children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[e.jsx("div",{className:"p-8 flex flex-col items-center justify-center",children:e.jsx("div",{className:"w-full max-w-lg rounded-2xl p-6",style:{backdropFilter:"blur(40px)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.1) 100%)",boxShadow:"0 4px 16px rgba(107, 154, 196, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.3)",border:"1px solid rgba(255, 255, 255, 0.3)"},children:Cn.logoUrl?e.jsx("img",{src:Cn.logoUrl,alt:`${Cn.companyName} logo`,className:"w-full h-auto object-contain"}):e.jsx("div",{className:"text-9xl text-gray-700 font-bold text-center",children:Cn.logoText})})}),e.jsxs("div",{className:"p-8",children:[e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-800 text-sm font-semibold mb-2",children:"Username"}),e.jsx("input",{type:"text",value:d,onChange:w=>c(w.target.value),className:"input-lg",placeholder:"Enter your username",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-800 text-sm font-semibold mb-2",children:"Password"}),e.jsx("input",{type:"password",value:o,onChange:w=>u(w.target.value),className:"input-lg",placeholder:"Enter your password",required:!0})]}),v&&e.jsx("div",{className:"error-message",children:v}),e.jsx("button",{type:"submit",disabled:b,className:"btn-search w-full disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Signing in...":"Sign In"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full border",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.7) 0%, rgba(255, 255, 255, 0.6) 100%)",backdropFilter:"blur(40px)",borderColor:"rgba(255, 255, 255, 0.7)",boxShadow:"0 2px 8px rgba(107, 154, 196, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.9)"},children:[e.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700 text-xs font-semibold",children:"HIPAA Compliant & Secure"})]})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-gray-600 text-xs",children:"Version 0.3.0-alpha"})}),e.jsxs("div",{className:"mt-6 text-center border-t border-white/30 pt-4",children:[e.jsx("p",{className:"text-gray-600 text-xs",children:"SanctumEMHR is Copyright  2026 Sacred Wandering"}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Proprietary and Confidential"})]})]})]})})})]})}function H0({user:n,onLogout:d,setActiveNav:c}){return e.jsxs("div",{className:"flex items-center gap-3 bg-white/40 backdrop-blur-sm rounded-2xl px-4 py-2 border border-white/50",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white font-bold text-sm",children:n.initials})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:n.name}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("button",{onClick:()=>c("settings"),className:"text-xs text-gray-600 hover:text-gray-900 transition-all",children:"Settings"}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("button",{onClick:d,className:"text-xs text-gray-600 hover:text-gray-900 transition-all",children:"Sign Out"})]})]})]})}function q0({branding:n,today:d,user:c,onLogout:o,setActiveNav:u}){return e.jsx("header",{className:"relative z-10 backdrop-blur-3xl bg-white/45 shadow-lg border-b border-white/60 sticky top-0",style:{boxShadow:"0 4px 16px rgba(107, 154, 196, 0.1), inset 0 -1px 0 rgba(255, 255, 255, 0.8)"},children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center border overflow-hidden",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.7) 0%, rgba(255, 255, 255, 0.6) 100%)",backdropFilter:"blur(40px)",borderColor:"rgba(255, 255, 255, 0.7)",boxShadow:"0 4px 12px rgba(107, 154, 196, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.9)"},children:[n.logoUrl?e.jsx("img",{src:n.logoUrl,alt:n.companyName,className:"w-full h-full object-contain p-1",onError:b=>{b.target.style.display="none",b.target.nextSibling.style.display="block"}}):null,e.jsx("span",{className:"text-xl font-bold text-gray-700",style:{display:n.logoUrl?"none":"block"},children:n.logoText})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:n.companyName}),e.jsx("p",{className:"text-xs text-gray-600",children:d})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{className:"relative p-2 rounded-xl transition-all border border-transparent",style:{transition:"all 300ms"},onMouseEnter:b=>{b.target.style.background="rgba(255, 255, 255, 0.4)",b.target.style.backdropFilter="blur(20px)",b.target.style.borderColor="rgba(255, 255, 255, 0.5)"},onMouseLeave:b=>{b.target.style.background="transparent",b.target.style.backdropFilter="none",b.target.style.borderColor="transparent"},children:[e.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),c?.unreadMessages>0&&e.jsx("span",{className:"absolute top-1 right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center border-2 border-white",children:c.unreadMessages})]}),e.jsx(H0,{user:c,onLogout:o,setActiveNav:u})]})]})})})}function F0(){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-mental"}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"particle particle-1"}),e.jsx("div",{className:"particle particle-2"}),e.jsx("div",{className:"particle particle-3"}),e.jsx("div",{className:"particle particle-4"}),e.jsx("div",{className:"particle particle-5"})]})]})}function G0({item:n,isActive:d,onClick:c}){const o=Zs(),u=()=>{c(),o("/dashboard",{state:{activeNav:n.id}})};return e.jsx("button",{onClick:u,className:d?"nav-main-active":"nav-main-inactive",children:n.label})}function Y0({activeNav:n,setActiveNav:d,user:c}){const o=c?.permissions?.includes("admin")||c?.permissions?.includes("emergency_login"),u=c?.isAdmin||c?.userType==="admin",b=[{id:"dashboard",label:"Dashboard"},{id:"calendar",label:"Calendar"},{id:"clients",label:"Clients"},{id:"messages",label:"Messages"},...u?[{id:"billing",label:"Billing"}]:[],{id:"reports",label:"Reports"},...o?[{id:"admin",label:"Admin Settings"}]:[]];return e.jsx("nav",{className:"rounded-3xl p-2",style:{backdropFilter:"blur(60px) saturate(180%)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0.4) 100%)",boxShadow:"0 8px 32px rgba(107, 154, 196, 0.12), 0 2px 8px rgba(0, 0, 0, 0.06), inset 0 1px 0 rgba(255, 255, 255, 0.8)",border:"1px solid rgba(255, 255, 255, 0.6)"},children:e.jsx("div",{className:"flex gap-2",children:b.map(m=>e.jsx(G0,{item:m,isActive:n===m.id,onClick:()=>d(m.id)},m.id))})})}function wf({user:n,activeNav:d,setActiveNav:c,today:o,children:u,onLogout:b,wide:m=!1}){const v=m?"max-w-[1600px]":"max-w-7xl";return e.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[e.jsx(F0,{}),e.jsx(q0,{branding:Cn,today:o,user:n,onLogout:b,setActiveNav:c}),e.jsx("div",{className:`relative z-10 ${v} mx-auto px-6 pt-6`,children:e.jsx(Y0,{activeNav:d,setActiveNav:c,user:n})}),e.jsx("main",{className:`relative z-10 ${v} mx-auto px-6 py-8`,children:u})]})}function $0(){const n=new Date().getHours();return n>=5&&n<12?"Good morning":n>=12&&n<17?"Good afternoon":"Good evening"}function P0(){return e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:[$0(),"!"]}),e.jsx("p",{className:"text-gray-600",children:"Here's what's happening today."})]})}function Ji({value:n,label:d,trend:c,gradientFrom:o,gradientTo:u,icon:b}){const m=c.direction==="up"?d==="Unbilled Appointments"?"text-red-600":"text-green-600":d==="Unbilled Appointments"?"text-green-600":"text-red-600",v=c.direction==="up"?"+":"-";return e.jsxs("div",{className:"card-main transform hover:scale-105 transition-all hover:shadow-3xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`w-10 h-10 bg-gradient-to-br ${o} ${u} rounded-xl flex items-center justify-center shadow-lg flex-shrink-0`,children:b}),e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:d})]}),e.jsxs("div",{className:"flex items-baseline gap-3",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-800",children:n}),e.jsxs("div",{className:`text-xs font-semibold flex items-center gap-1 ${m}`,children:[c.direction==="up"?"":""," ",v,Math.abs(c.change)," ",c.label]})]})]})}function X0({stats:n,onNewClient:d,onNewAppointment:c}){return e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{className:"card-main transform hover:scale-105 transition-all hover:shadow-3xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-slate-500 to-slate-700 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Quick Actions"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:c,className:"w-full px-3 py-2 text-sm font-medium text-white bg-blue-500 hover:bg-blue-600 rounded-lg transition-colors",children:"+ New Appointment"}),e.jsx("button",{onClick:d,className:"w-full px-3 py-2 text-sm font-medium text-white bg-green-500 hover:bg-green-600 rounded-lg transition-colors",children:"+ Add New Client"})]})]}),e.jsx(Ji,{value:n.todayAppointments.value,label:"Today's Appointments",trend:n.todayAppointments.trend,gradientFrom:"from-blue-400",gradientTo:"to-blue-600",icon:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx(Ji,{value:n.unbilledAppointments.value,label:"Unbilled Appointments",trend:n.unbilledAppointments.trend,gradientFrom:"from-amber-400",gradientTo:"to-orange-600",icon:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx(Ji,{value:n.sessionsYTD.value,label:"Sessions This Year",trend:n.sessionsYTD.trend,gradientFrom:"from-green-400",gradientTo:"to-emerald-600",icon:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx(Ji,{value:n.activeClients.value,label:"Active Clients",trend:n.activeClients.trend,gradientFrom:"from-purple-400",gradientTo:"to-purple-600",icon:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})]})}function V0({todaysAppointments:n,onAppointmentClick:d}){return e.jsxs("div",{className:"card-main",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h3",{className:"text-lg font-bold text-gray-800",children:["Today's Appointments (",n.length,")"]})}),n.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{children:"No appointments scheduled for today"})]}):e.jsx("div",{className:"space-y-3",children:n.map((c,o)=>e.jsx("div",{onClick:()=>d&&d(c),className:`${c.isNext?"backdrop-blur-2xl bg-gradient-to-r from-blue-500/40 to-purple-500/40 border-white/60":"backdrop-blur-xl bg-white/60"} rounded-2xl p-5 border-2 ${c.isNext?"border-blue-400":"border-transparent"} cursor-pointer hover:shadow-xl transition-all hover:scale-[1.02]`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[c.isNext&&e.jsx("div",{className:"w-12 h-12 bg-white/90 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[c.isNext&&e.jsxs("p",{className:"text-xs font-bold text-white/90 mb-1",children:["NEXT UP  ",c.minutesUntil," minutes"]}),e.jsxs("p",{className:`text-lg font-bold ${c.isNext?"text-white":"text-gray-800"}`,children:[c.time,"  ",c.client]}),e.jsxs("p",{className:`text-sm mt-1 ${c.isNext?"text-white/80":"text-gray-600"}`,children:[c.type,"  ",c.duration,c.room&&`  ${c.room}`,c.participants&&`  ${c.participants}`]})]})]}),c.isNext&&e.jsx("button",{className:"px-4 py-2 bg-white/90 hover:bg-white text-blue-600 font-semibold rounded-xl transition-all shadow-md hover:shadow-lg text-sm",children:"View Details"})]})},o))})]})}async function Be(n,d={}){const c=await fetch(n,{...d,credentials:"include",headers:{"Content-Type":"application/json",...d.headers}}),o=await c.json();if(!c.ok)throw c.status===401?(d.noRedirect||(localStorage.removeItem("user"),window.location.href="/app/"),new Error("Authentication required")):new Error(o.message||o.error||`API request failed: ${c.statusText}`);return o}function ar(){const n=localStorage.getItem("user");if(!n)return null;try{return JSON.parse(n)}catch(d){return console.error("Error parsing user data:",d),null}}async function Q0(){try{const n=await Be("/custom/api/session_user.php",{noRedirect:!0});if(console.log("Session user response:",n),n&&n.username)return localStorage.setItem("user",JSON.stringify(n)),{id:n.id||null,fname:n.firstName||n.fname||"",lname:n.lastName||n.lname||"",fullName:n.fullName||n.fullName||"",displayName:n.displayName||n.fullName||"",admin:n.isAdmin||n.admin||!1,isAdmin:n.isAdmin||n.admin||!1,isSupervisor:n.isSupervisor||!1,isSocialWorker:n.isSocialWorker||!1,isProvider:n.isProvider||!1,userType:n.userType||"user",username:n.username||null}}catch(n){console.log("Session user fetch failed:",n.message)}return null}async function Sf(n){if(!n||n.trim()==="")return[];const d=n.trim().split(/\s+/),c=new URLSearchParams;return d.length===1?c.append("fname",d[0]):d.length>=2&&(c.append("fname",d[0]),c.append("lname",d[d.length-1])),Be(`/custom/api/patient_search.php?${c.toString()}`)}async function Cf(){return Be("/custom/api/client_stats.php")}async function Z0(){return Be("/custom/api/client_demographics.php")}async function J0(n="all"){const d=n!=="all"?`?status=${n}`:"";return Be(`/custom/api/client_list.php${d}`)}async function _f(n){console.log("Fetching client detail for ID:",n);const d=await fetch(`/custom/api/client_detail.php?id=${n}`,{credentials:"include",headers:{"Content-Type":"application/json"}}),c=await d.json();if(d.status===403&&c.accessDenied)return{accessDenied:!0,accessInfo:c.accessInfo};if(!d.ok)throw d.status===401?(localStorage.removeItem("user"),window.location.href="/app/",new Error("Authentication required")):new Error(c.message||c.error||`API request failed: ${d.statusText}`);return c}async function K0(n){return console.log("Fetching encounter detail for ID:",n),Be(`/custom/api/encounter_detail.php?encounter_id=${n}`)}async function Ao(n){return console.log("Creating clinical note:",n),Be("/custom/api/notes/create_note.php",{method:"POST",body:JSON.stringify(n)})}async function I0(n,d={}){console.log("Fetching patient notes for ID:",n);const c=new URLSearchParams({patient_id:n});return d.note_type&&c.append("note_type",d.note_type),d.status&&c.append("status",d.status),d.start_date&&c.append("start_date",d.start_date),d.end_date&&c.append("end_date",d.end_date),Be(`/custom/api/notes/get_patient_notes.php?${c.toString()}`)}async function kf(n,d=!1){console.log("Fetching note:",n);const c=d?`note_uuid=${n}`:`note_id=${n}`;return Be(`/custom/api/notes/get_note.php?${c}`)}async function Jh(n,d){return console.log("Updating note:",n),Be("/custom/api/notes/update_note.php",{method:"POST",body:JSON.stringify({noteId:n,...d})})}async function W0(n){return Be("/custom/api/notes/autosave_note.php",{method:"POST",body:JSON.stringify(n)})}async function Ef(n,d=null){return console.log("Signing note:",n),Be("/custom/api/notes/sign_note.php",{method:"POST",body:JSON.stringify({noteId:n,signatureData:d})})}async function eb(n){return console.log("Deleting note:",n),Be("/custom/api/notes/delete_note.php",{method:"DELETE",body:JSON.stringify({note_id:n})})}async function tb(n={}){console.log("Fetching interventions");const d=new URLSearchParams;n.tier&&d.append("tier",n.tier),n.modality&&d.append("modality",n.modality),n.include_inactive&&d.append("include_inactive",n.include_inactive);const c=d.toString();return Be(`/custom/api/notes/get_interventions.php${c?"?"+c:""}`)}async function qo(n,d={}){console.log("Fetching treatment goals for patient:",n);const c=new URLSearchParams({patient_id:n});return d.status&&c.append("status",d.status),d.include_all&&c.append("include_all",d.include_all),Be(`/custom/api/notes/get_treatment_goals.php?${c.toString()}`)}async function sb(n,d="ICD10",c=50){console.log("Searching codes:",{searchTerm:n,codeType:d,limit:c});const o=new URLSearchParams({search:n,code_type:d,limit:c.toString()});return Be(`/custom/api/search_codes.php?${o.toString()}`)}async function ab(n,d={}){console.log("Fetching patient diagnoses:",{patientId:n,options:d});const c=new URLSearchParams({patient_id:n.toString()});return d.activeAsOf&&c.append("active_as_of",d.activeAsOf),d.includeRetired!==void 0&&c.append("include_retired",d.includeRetired?"1":"0"),Be(`/custom/api/get_patient_diagnoses.php?${c.toString()}`)}async function lb(n){console.log("Fetching draft:",n);const d=new URLSearchParams;return n.note_id&&d.append("note_id",n.note_id),n.appointment_id&&d.append("appointment_id",n.appointment_id),n.patient_id&&d.append("patient_id",n.patient_id),Be(`/custom/api/notes/get_draft.php?${d.toString()}`)}async function nb(){return console.log("Fetching clinical settings"),Be("/custom/api/notes/get_clinical_settings.php")}async function ib(n){return console.log("Fetching billing for patient ID:",n),Be(`/custom/api/billing.php?patient_id=${n}`)}async function rb(n,d){return console.log("Updating demographics for patient ID:",n),Be("/custom/api/update_demographics.php",{method:"POST",body:JSON.stringify({patient_id:n,...d})})}async function cb(n){return console.log("Creating new client:",n.fname,n.lname),Be("/custom/api/create_client.php",{method:"POST",body:JSON.stringify(n)})}async function Ya(n){return console.log("Fetching list options for:",n),Be(`/custom/api/get_list_options.php?list_id=${n}`)}async function lr(){return console.log("Fetching providers list"),Be("/custom/api/get_providers.php")}async function _o(n){return console.log("Fetching related persons for patient:",n),Be(`/custom/api/get_related_persons.php?patient_id=${n}`)}async function ob(n){return console.log("Saving related person:",n),Be("/custom/api/save_related_person.php",{method:"POST",body:JSON.stringify(n)})}async function db(n){return console.log("Deleting related person relation:",n),Be("/custom/api/delete_related_person.php",{method:"POST",body:JSON.stringify({relation_id:n})})}async function ub(n,d){return console.log("Updating insurance ID:",n),Be("/custom/api/update_insurance.php",{method:"POST",body:JSON.stringify({insurance_id:n,...d})})}async function mb(){return console.log("Fetching insurance companies list"),Be("/custom/api/get_insurance_companies.php")}async function Fo(){return console.log("Fetching calendar settings"),Be("/custom/api/get_calendar_settings.php")}async function hb(n){return console.log("Updating calendar settings:",n),Be("/custom/api/update_calendar_settings.php",{method:"POST",body:JSON.stringify(n)})}async function Go(n,d,c=null){console.log("Fetching appointments from",n,"to",d);const o=new URLSearchParams({start_date:n,end_date:d});return c&&c!=="all"&&o.append("provider_id",c),Be(`/custom/api/get_appointments.php?${o.toString()}`)}async function Df(n=0,d=null){console.log("Fetching appointment categories (type:",n,", exclude:",d,")");let c=[];n!==null&&c.push(`type=${n}`),d!==null&&c.push(`exclude=${d}`);const o=c.length>0?`?${c.join("&")}`:"";return Be(`/custom/api/get_appointment_categories.php${o}`)}async function fb(){return console.log("Fetching rooms list"),Be("/custom/api/get_rooms.php")}async function xb(n){return console.log("Fetching supervisees for supervisor:",n),Be(`/custom/api/get_supervisees.php?supervisor_id=${n}`)}async function Af(n){return console.log("Creating appointment:",n),Be("/custom/api/create_appointment.php",{method:"POST",body:JSON.stringify(n)})}async function Tf(n,d){return console.log("Updating appointment:",n,d),Be("/custom/api/update_appointment.php",{method:"POST",body:JSON.stringify({appointmentId:n,...d})})}async function Mf(n,d=null){return console.log("Deleting appointment:",n,d),Be("/custom/api/delete_appointment.php",{method:"POST",body:JSON.stringify({appointmentId:n,seriesData:d})})}async function Rf(){try{await fetch("/custom/api/session_logout.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})}catch(n){console.error("Logout error:",n)}finally{localStorage.removeItem("user"),window.location.href="/app/"}}function gb(){const n=[{age:"3 days ago",color:"border-red-400"},{age:"2 days ago",color:"border-amber-400"},{age:"Yesterday",color:"border-yellow-400"}];return e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Pending Documentation"}),e.jsx("div",{className:"space-y-3",children:n.map((d,c)=>e.jsxs("div",{className:`backdrop-blur-xl bg-white/60 ${d.color} border-l-4 rounded-2xl p-4 cursor-pointer hover:shadow-lg transition-all hover:bg-white/70`,children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:d.age}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Complete session note"})]},c))})]})}function te({children:n,htmlFor:d,className:c="",...o}){return e.jsx("label",{htmlFor:d,className:`block text-label mb-2 ${c}`,...o,children:n})}function De(){return e.jsx("span",{className:"text-red-600",children:"*"})}function zf({onClose:n,onClientCreated:d}){const[c,o]=f.useState({fname:"",mname:"",lname:"",DOB:"",sex:"",ss:"",street:"",city:"",state:"",postal_code:"",phone_cell:"",phone_home:"",email:"",care_team_status:"active"}),[u,b]=f.useState(!1),[m,v]=f.useState(null),h=(w,y)=>{o(j=>({...j,[w]:y}))},p=async w=>{w.preventDefault(),b(!0),v(null);try{if(!c.fname||!c.lname)throw new Error("First name and last name are required");if(!c.DOB)throw new Error("Date of birth is required");if(c.email&&!c.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/))throw new Error("Invalid email format");const y=await cb(c);d&&y.patient_id&&d(y.patient_id),n()}catch(y){v(y.message||"Failed to create client")}finally{b(!1)}};return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container modal-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"New Client"}),e.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:p,className:"modal-body",children:[m&&e.jsx("div",{className:"error-message",children:m}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(te,{children:["First Name ",e.jsx(De,{})]}),e.jsx("input",{type:"text",required:!0,value:c.fname,onChange:w=>h("fname",w.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Middle Name"}),e.jsx("input",{type:"text",value:c.mname,onChange:w=>h("mname",w.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsxs(te,{children:["Last Name ",e.jsx(De,{})]}),e.jsx("input",{type:"text",required:!0,value:c.lname,onChange:w=>h("lname",w.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsxs(te,{children:["Date of Birth ",e.jsx(De,{})]}),e.jsx("input",{type:"date",required:!0,value:c.DOB,onChange:w=>h("DOB",w.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Sex"}),e.jsxs("select",{value:c.sex,onChange:w=>h("sex",w.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Social Security Number"}),e.jsx("input",{type:"text",value:c.ss,onChange:w=>h("ss",w.target.value),placeholder:"XXX-XX-XXXX",maxLength:"11",className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Status"}),e.jsxs("select",{value:c.care_team_status,onChange:w=>h("care_team_status",w.target.value),className:"input-field",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"discharged",children:"Discharged"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(te,{children:"Street Address"}),e.jsx("input",{type:"text",value:c.street,onChange:w=>h("street",w.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"City"}),e.jsx("input",{type:"text",value:c.city,onChange:w=>h("city",w.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"State"}),e.jsx("input",{type:"text",value:c.state,onChange:w=>h("state",w.target.value),maxLength:"2",placeholder:"CA",className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Postal Code"}),e.jsx("input",{type:"text",value:c.postal_code,onChange:w=>h("postal_code",w.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Mobile Phone"}),e.jsx("input",{type:"tel",value:c.phone_cell,onChange:w=>h("phone_cell",w.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Home Phone"}),e.jsx("input",{type:"tel",value:c.phone_home,onChange:w=>h("phone_home",w.target.value),className:"input-field"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(te,{children:"Email"}),e.jsx("input",{type:"email",value:c.email,onChange:w=>h("email",w.target.value),className:"input-field"})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:n,disabled:u,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u,className:"btn-action btn-primary btn-compact disabled:opacity-50",children:u?"Creating Client...":"Create Client"})]})]})]})})}function pb(){const n=Zs(),[d,c]=f.useState(""),[o,u]=f.useState([]),[b,m]=f.useState(!1),[v,h]=f.useState(""),[p,w]=f.useState(!1),[y,j]=f.useState({activeClients:0,inactiveClients:0,dischargedClients:0,todayClients:0}),[N,x]=f.useState(!0),[C,E]=f.useState([]),[k,R]=f.useState(!0),[L,A]=f.useState("active"),[G,P]=f.useState(!1);f.useEffect(()=>{(async()=>{try{const U=await Cf();j(U)}catch(U){console.error("Failed to fetch data:",U)}finally{x(!1)}})()},[]),f.useEffect(()=>{(async()=>{try{R(!0);const U=await J0(L);E(U||[])}catch(U){console.error("Failed to fetch clients:",U),E([])}finally{R(!1)}})()},[L]);const T=async H=>{if(H.preventDefault(),!d.trim()){h("Please enter a search term");return}m(!0),h(""),w(!0);try{const U=await Sf(d);u(U||[])}catch(U){console.error("Search error:",U),h("Failed to search patients. Please try again."),u([])}finally{m(!1)}},xe=H=>{console.log("=== CLICKING CLIENT ==="),console.log("Patient ID:",H),console.log("About to navigate to:",`/clients/${H}`),n(`/clients/${H}`),console.log("Navigate called")},ve=H=>{console.log("New client created with ID:",H),n(`/clients/${H}`)},me=H=>{if(!H)return"N/A";try{const[U,ae,D]=H.split(/[-T]/);return new Date(U,ae-1,D).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},oe=H=>{const U=(H||"").toLowerCase();return U==="active"?"badge-solid-success":U==="inactive"?"badge-solid-warning":"badge-solid-neutral"};return e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"w-80 flex-shrink-0 space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:"Clients"}),e.jsx("p",{className:"text-gray-600 text-xs",children:"Manage client records"})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-4",children:"Caseload Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"stat-box",children:N?e.jsxs("div",{className:"skeleton-pulse",children:[e.jsx("div",{className:"h-3 bg-gray-300 rounded w-16 mb-2"}),e.jsx("div",{className:"h-6 bg-gray-300 rounded w-8"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:y.activeClients})]})}),e.jsx("div",{className:"stat-box",children:N?e.jsxs("div",{className:"skeleton-pulse",children:[e.jsx("div",{className:"h-3 bg-gray-300 rounded w-16 mb-2"}),e.jsx("div",{className:"h-6 bg-gray-300 rounded w-8"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Inactive"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:y.inactiveClients})]})}),e.jsx("div",{className:"stat-box",children:N?e.jsxs("div",{className:"skeleton-pulse",children:[e.jsx("div",{className:"h-3 bg-gray-300 rounded w-16 mb-2"}),e.jsx("div",{className:"h-6 bg-gray-300 rounded w-8"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Discharged"}),e.jsx("p",{className:"text-2xl font-bold text-gray-500",children:y.dischargedClients})]})})]})]}),e.jsx(gb,{})]}),e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsx("div",{className:"card-main",children:e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-gray-800 text-sm font-semibold mb-2",children:"Search by Name"}),e.jsx("input",{type:"text",value:d,onChange:H=>c(H.target.value),className:"input-lg",placeholder:"Enter client name..."})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"submit",disabled:b,className:"btn-search disabled:opacity-50 disabled:cursor-not-allowed",children:b?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Searching..."]}):"Search"})})]}),v&&e.jsx("div",{className:"error-message",children:v})]})}),p&&e.jsx("div",{className:"card-main",children:b?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"spinner spinner-md mx-auto"}),e.jsx("p",{className:"text-label mt-3",children:"Searching..."})]}):o.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("p",{className:"text-gray-600",children:['No clients found matching "',d,'"']}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Try a different search term"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-label",children:["Found ",o.length," client",o.length!==1?"s":""]})}),o.map(H=>e.jsx("div",{onClick:()=>xe(H.id||H.pid),className:"card-item",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:[H.fname," ",H.lname]}),e.jsxs("div",{className:"flex gap-6 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"DOB:"})," ",me(H.DOB)]}),H.phone_cell&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",H.phone_cell]})]})]}),e.jsx("div",{className:"ml-4",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},H.id||H.pid))]})}),e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Client List"}),e.jsxs("button",{onClick:()=>P(!0),className:"btn-solid btn-solid-green btn-icon",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Client"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>A("active"),className:`filter-btn-enhanced ${L==="active"?"filter-btn-active-base bg-green-500":"filter-btn-inactive"}`,children:"Active"}),e.jsx("button",{onClick:()=>A("inactive"),className:`filter-btn-enhanced ${L==="inactive"?"filter-btn-active-base bg-yellow-500":"filter-btn-inactive"}`,children:"Inactive"}),e.jsx("button",{onClick:()=>A("discharged"),className:`filter-btn-enhanced ${L==="discharged"?"filter-btn-active-base bg-gray-500":"filter-btn-inactive"}`,children:"Discharged"}),e.jsx("button",{onClick:()=>A("all"),className:`filter-btn-enhanced ${L==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Clients"})]})]}),k?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"spinner spinner-lg mx-auto"}),e.jsx("p",{className:"text-label mt-4",children:"Loading clients..."})]}):C.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("p",{className:"text-gray-600 text-lg",children:["No ",L!=="all"?L:""," clients found"]})]}):e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-label",children:[C.length," ",L!=="all"?L:""," client",C.length!==1?"s":""]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(H=>e.jsxs("div",{onClick:()=>xe(H.pid),className:"card-item",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-800",children:[H.fname," ",H.lname]}),e.jsx("span",{className:oe(H.care_team_status),children:(H.care_team_status||"Unknown").toUpperCase()})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Age:"})," ",H.age]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"DOB:"})," ",me(H.DOB)]}),(H.phone_cell||H.phone_home)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",H.phone_cell||H.phone_home]})]})]},H.pid))})]})]})]}),G&&e.jsx(zf,{onClose:()=>P(!1),onClientCreated:ve})]})}function bb(){const[n,d]=f.useState({age:[],gender:[],race:[],ethnicity:[]}),[c,o]=f.useState(!0);f.useEffect(()=>{(async()=>{try{const m=await Z0();d(m)}catch(m){console.error("Failed to fetch demographics:",m)}finally{o(!1)}})()},[]);const u=(b,m)=>{if(!b||b.length===0)return e.jsx("div",{className:"text-gray-500 text-sm text-center py-4",children:"No data available"});const v=b.reduce((h,p)=>h+p.count,0);return e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:m}),e.jsx("div",{className:"space-y-2",children:b.map((h,p)=>{const w=v>0?h.count/v*100:0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-gray-600",children:h.category}),e.jsx("span",{className:"text-gray-500 font-semibold",children:h.count})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${w}%`}})})]},p)})})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:"Reports"}),e.jsx("p",{className:"text-gray-600 text-xs",children:"Analytics and demographic insights"})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-4",children:"Active Demographics"}),c?e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(b=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-3 bg-gray-300 rounded w-20 mb-2"}),e.jsx("div",{className:"h-2 bg-gray-300 rounded"})]},b))}):e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{children:u(n.age,"Age Range")}),e.jsx("div",{children:u(n.gender,"Gender")}),e.jsx("div",{children:u(n.race,"Race")}),e.jsx("div",{children:u(n.ethnicity,"Ethnicity")})]})]})]})}function vb({currentDate:n,onDateClick:d}){const[c,o]=f.useState(new Date(n)),u=x=>{const C=x.getFullYear(),E=x.getMonth();return new Date(C,E+1,0).getDate()},b=x=>{const C=x.getFullYear(),E=x.getMonth();return new Date(C,E,1).getDay()},m=()=>{const x=u(c),C=b(c),E=[];for(let k=0;k<C;k++)E.push(null);for(let k=1;k<=x;k++)E.push(k);return E},v=()=>{const x=new Date(c);x.setMonth(x.getMonth()-1),o(x)},h=()=>{const x=new Date(c);x.setMonth(x.getMonth()+1),o(x)},p=x=>{if(!x)return;const C=new Date(c.getFullYear(),c.getMonth(),x);d(C)},w=x=>{if(!x)return!1;const C=new Date;return x===C.getDate()&&c.getMonth()===C.getMonth()&&c.getFullYear()===C.getFullYear()},y=x=>{if(!x)return!1;const C=new Date(c.getFullYear(),c.getMonth(),x),E=L=>{const A=new Date(L),G=A.getDay(),P=A.getDate()-G;return new Date(A.setDate(P))},k=E(C),R=E(n);return k.toDateString()===R.toDateString()},j=m(),N=["S","M","T","W","T","F","S"];return e.jsxs("div",{className:"select-none",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("button",{onClick:v,className:"p-1 hover:bg-gray-100 rounded transition-colors","aria-label":"Previous month",children:e.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:c.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:h,className:"p-1 hover:bg-gray-100 rounded transition-colors","aria-label":"Next month",children:e.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[N.map((x,C)=>e.jsx("div",{className:"text-center text-xs font-medium text-gray-500 py-1",children:x},C)),j.map((x,C)=>{const E=w(x),k=y(x);return e.jsx("button",{onClick:()=>p(x),disabled:!x,className:`
                aspect-square flex items-center justify-center text-sm rounded-lg
                transition-colors
                ${x?"":"invisible"}
                ${E?"bg-blue-600 text-white font-bold hover:bg-blue-700":""}
                ${!E&&k?"bg-blue-100 text-blue-900 font-semibold":""}
                ${!E&&!k?"hover:bg-gray-100 text-gray-700":""}
              `,children:x},C)})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 text-xs text-gray-600 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded"}),e.jsx("span",{children:"Today"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-100 border border-blue-300 rounded"}),e.jsx("span",{children:"Selected week"})]})]})]})}function tt({children:n,className:d=""}){return e.jsx("div",{className:`p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm ${d}`,children:n})}function us({children:n,className:d="",...c}){return e.jsx("button",{className:`px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors ${d}`,...c,children:n})}function Ve({children:n,className:d="",...c}){return e.jsx("button",{className:`px-4 py-2 bg-blue-600 text-white font-medium rounded-lg
         hover:bg-blue-700 transition-colors disabled:opacity-50 ${d}`,...c,children:n})}function Tt({children:n,className:d="",...c}){return e.jsx("button",{className:`px-4 py-2 border border-gray-300 rounded-lg
         hover:bg-gray-50 transition-colors disabled:opacity-50 ${d}`,...c,children:n})}function Of({isOpen:n,onClose:d,onSave:c,initialDate:o,initialTime:u,providerId:b,providers:m,appointment:v}){const[h,p]=f.useState(!1),[w,y]=f.useState(null),[j,N]=f.useState(null),[x,C]=f.useState(null),[E,k]=f.useState(null),[R,L]=f.useState(""),[A,G]=f.useState(""),[P,T]=f.useState(b||""),[xe,ve]=f.useState(""),[me,oe]=f.useState(o||new Date().toISOString().split("T")[0]),[H,U]=f.useState(u||"09:00"),[ae,D]=f.useState(50),[_,M]=f.useState(""),[Q,le]=f.useState(""),[ge,z]=f.useState(""),[B,q]=f.useState("scheduled"),[X,W]=f.useState([]),[K,ie]=f.useState([]),[we,ke]=f.useState(""),[J,he]=f.useState(""),[Ee,Te]=f.useState(null),[Me,de]=f.useState(null),[je,Fe]=f.useState(!1),[st,Ct]=f.useState({mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1}),[Y,ue]=f.useState("1"),[fe,Ae]=f.useState("count"),[be,Re]=f.useState(10),[Ge,Je]=f.useState(""),[Ce,ft]=f.useState(!1),[zt,ws]=f.useState("single"),[An,Ss]=f.useState(null),[ut,gs]=f.useState([]),[_t,ir]=f.useState([]),[Tn,Pa]=f.useState([]),[Xa,Cs]=f.useState(!1),[Va,Yt]=f.useState(""),[wa,ps]=f.useState([]),[Js,Ks]=f.useState([]);f.useEffect(()=>{n&&(Ml(),Sa(),rr(),Mn())},[n]),f.useEffect(()=>{console.log("Categories state updated:",ut)},[ut]),f.useEffect(()=>{console.log("Rooms state updated:",_t)},[_t]),f.useEffect(()=>{b&&T(b)},[b]),f.useEffect(()=>{o&&oe(o),u&&U(u)},[o,u]),f.useEffect(()=>{if(v&&n&&(L(v.patientId||""),G(v.patientName||""),Yt(v.patientName||""),T(v.providerId||""),ve(v.categoryId||""),oe(v.eventDate||""),U(v.startTime?v.startTime.substring(0,5):""),D(v.duration||50),M(v.title||""),le(v.comments||""),z(v.roomId||v.room||""),q(v.apptstatus||v.status||"scheduled"),ke(v.cancellationReason||""),he(v.cptCodeId||""),v.patientId&&fetch(`/custom/api/get_client.php?pid=${v.patientId}`).then(ee=>ee.json()).then(ee=>{ee.success&&ee.client&&de(ee.client.payment_type||"insurance")}).catch(ee=>{console.error("Failed to fetch patient payment type:",ee),de("insurance")}),v.isRecurring&&v.recurrenceId?(ft(!0),Ss(v.recurrenceId),ws("single")):(ft(!1),Ss(null)),v.attendees&&v.attendees.length>0)){const ee=v.attendees.filter(pe=>pe.role==="supervisee").map(pe=>pe.userId);Ks(ee)}},[v,n]);const Ml=async()=>{try{const ee=await Df("client");console.log("getAppointmentCategories response:",ee),console.log("Categories array:",ee.categories),gs(ee.categories||[]),ee.categories&&ee.categories.length>0&&!v?(console.log("Auto-selecting first category:",ee.categories[0]),ve(ee.categories[0].id),ee.categories[0].defaultDuration>0&&D(ee.categories[0].defaultDuration)):console.log("No categories to auto-select or editing existing appointment")}catch(ee){console.error("Failed to load appointment categories:",ee),y("Failed to load appointment types")}},Sa=async()=>{try{const ee=await fb();console.log("getRooms response:",ee),console.log("Rooms array:",ee.rooms),ir(ee.rooms||[])}catch(ee){console.error("Failed to load rooms:",ee)}},rr=async()=>{try{const ee=await fetch("/custom/api/settings_lists.php?list_id=appointment_statuses",{credentials:"include"});if(ee.ok){const pe=await ee.json();W(pe.items||[])}}catch(ee){console.error("Failed to load statuses:",ee)}},Mn=async()=>{try{const ee=await fetch("/custom/api/settings_lists.php?list_id=cancellation_reasons",{credentials:"include"});if(ee.ok){const pe=await ee.json();ie(pe.items||[])}}catch(ee){console.error("Failed to load cancellation reasons:",ee)}},Rn=async ee=>{if(Yt(ee),ee.length<2){Pa([]),Cs(!1);return}try{const pe=await Sf(ee);Pa(pe||[]),Cs(!0)}catch(pe){console.error("Patient search failed:",pe),Pa([])}},zn=async ee=>{L(ee.pid),G(`${ee.fname} ${ee.lname}`),Yt(`${ee.fname} ${ee.lname}`),Cs(!1);try{const Oe=await(await fetch(`/custom/api/get_client.php?pid=${ee.pid}`)).json();Oe.success&&Oe.client&&de(Oe.client.payment_type||"insurance")}catch(pe){console.error("Failed to fetch patient payment type:",pe),de("insurance")}},Rl=ee=>{ve(ee);const pe=ut.find(Oe=>Oe.id===parseInt(ee));he(""),Te(null),L(""),G(""),Yt(""),Ks([]),pe&&pe.defaultDuration>0&&D(pe.defaultDuration)},Ca=async ee=>{T(ee);const pe=ut.find(Oe=>Oe.id===parseInt(xe));if(pe&&pe.name==="Supervision"&&ee)try{const Oe=await xb(ee);ps(Oe.supervisees||[])}catch(Oe){console.error("Failed to load supervisees:",Oe),ps([])}else ps([]),Ks([])},On=ee=>{Ks(pe=>pe.includes(ee)?pe.filter(Oe=>Oe!==ee):[...pe,ee])},Ln=ee=>{he(ee);const pe=ut.find(Oe=>Oe.id===parseInt(xe));if(pe&&pe.linkedCptCodes){const Oe=pe.linkedCptCodes.find(Xe=>Xe.id===parseInt(ee));Te(Oe),Oe&&Oe.standardDuration>0&&D(Oe.standardDuration)}},Wt=async(ee,pe=!1)=>{if(ee?.preventDefault(),p(!0),y(null),N(null),C(null),!xe){y("Please select an appointment type"),p(!1);return}const Oe=ut.find(Xe=>Xe.id===parseInt(xe));if(!Oe){y("Invalid appointment type"),p(!1);return}if(Oe.categoryType==="client"){if(!R){y("Please select a client"),p(!1);return}if(!P){y("Please select a provider"),p(!1);return}}else if(Oe.name==="Supervision"){if(!P){y("Please select a supervisor"),p(!1);return}if(Js.length===0){y("Please select at least one supervisee"),p(!1);return}}else if(Oe.name!=="Staff Meeting"&&!P){y("Please select a provider"),p(!1);return}if(Oe&&Oe.requiresCptSelection&&Me==="insurance"&&!J){y("CPT code is required for insurance patients with this appointment type"),p(!1);return}if(je){if(Object.values(st).filter(Boolean).length===0){y("Please select at least one day for recurrence"),p(!1);return}if(fe==="date"&&!Ge){y("Please select an end date for recurrence"),p(!1);return}if(fe==="count"&&(!be||be<1)){y("Please enter a valid number of occurrences"),p(!1);return}}try{const Xe=H.includes(":")?`${H}:00`:`${H}:00:00`,bs=[];Js.length>0&&Js.forEach(Ws=>{bs.push({userId:Ws,role:"supervisee"})});const es={categoryId:parseInt(xe),eventDate:me,startTime:Xe,duration:parseInt(ae),title:_||A||Oe.name,comments:Q,room:ge,apptstatus:B,cancellationReason:B==="cancelled"||B==="no_show"?we:null,overrideAvailability:pe,...R&&{patientId:parseInt(R)},...P&&{providerId:parseInt(P)},...bs.length>0&&{attendees:bs},...J&&{cptCodeId:parseInt(J)},...Ee?.standardFee&&{billingFee:Ee.standardFee},...Me&&{patientPaymentType:Me}};Ce&&(es.seriesUpdate={scope:zt,recurrenceId:An}),je&&!v&&(es.recurrence={enabled:!0,days:st,interval:parseInt(Y),endType:fe,endCount:fe==="count"?parseInt(be):null,endDate:fe==="date"?Ge:null}),console.log(v?"Updating appointment:":"Creating appointment:",es);const ks=v?await Tf(v.id,es):await Af(es);ks.success?(N(v?"Appointment updated successfully!":"Appointment created successfully!"),c&&c(ks.appointment),setTimeout(()=>{_s()},1500)):y(ks.message||`Failed to ${v?"update":"create"} appointment`)}catch(Xe){console.error(`Failed to ${v?"update":"create"} appointment:`,Xe),Xe.conflicts?k({conflicts:Xe.conflicts,totalOccurrences:Xe.totalOccurrences,conflictCount:Xe.conflictCount}):Xe.message&&Xe.message.includes("Provider is unavailable")?C(Xe.message):y(Xe.message||`Failed to ${v?"update":"create"} appointment`)}finally{p(!1)}},jt=()=>{C(null),Wt(null,!0)},Mt=()=>{k(null),Wt(null,!0)},Is=async()=>{if(!v)return;let ee=`Are you sure you want to delete this appointment for ${A}?`;if(Ce&&(zt==="all"?ee=`Are you sure you want to delete ALL occurrences in this recurring series for ${A}?`:zt==="future"&&(ee=`Are you sure you want to delete this and all future occurrences for ${A}?`)),!!confirm(ee)){p(!0),y(null),N(null);try{const pe=Ce?{scope:zt,recurrenceId:An}:null,Oe=await Mf(v.id,pe);if(Oe.success){const Xe=Ce&&zt!=="single"?`${Oe.deletedCount||"Multiple"} appointment(s) deleted successfully!`:"Appointment deleted successfully!";N(Xe),setTimeout(()=>{_s(),c&&c()},1e3)}else y(Oe.message||"Failed to delete appointment")}catch(pe){console.error("Failed to delete appointment:",pe),y(pe.message||"Failed to delete appointment")}finally{p(!1)}}},_s=()=>{L(""),G(""),Yt(""),ve(""),M(""),le(""),z(""),q("scheduled"),ke(""),y(null),N(null),C(null),k(null),Pa([]),Cs(!1),Fe(!1),Ct({mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1}),ue("1"),Ae("count"),Re(10),Je(""),ft(!1),ws("single"),Ss(null),ps([]),Ks([]),d()};if(!n)return null;const cr=[15,30,50,90];return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",style:{position:"fixed",top:0,left:0,right:0,bottom:0},children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/60 backdrop-blur-md transition-opacity",onClick:_s,"aria-hidden":"true"}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-2xl w-full my-8 border border-gray-200 z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-200 px-8 pt-6 bg-gradient-to-r from-blue-50 to-purple-50",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:v?"Edit Appointment":"New Appointment"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:v?"Update appointment details":"Schedule a new appointment"})]}),e.jsx("button",{onClick:_s,className:"p-2 hover:bg-white/80 rounded-xl transition-all hover:scale-110",disabled:h,children:e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"px-8 pb-8",children:[x&&e.jsx("div",{className:"mb-6 p-4 bg-amber-50 border-l-4 border-amber-500 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-amber-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-amber-700 font-medium mb-2",children:x}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:jt,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white text-sm font-medium rounded-lg transition-colors",children:"Override and Book Anyway"}),e.jsx("button",{type:"button",onClick:()=>C(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-medium rounded-lg transition-colors",children:"Cancel"})]})]})]})}),E&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-700 font-bold mb-2",children:"Scheduling Conflicts Detected"}),e.jsxs("p",{className:"text-red-600 text-sm mb-3",children:[E.conflictCount," of ",E.totalOccurrences," recurring appointments have conflicts:"]}),e.jsx("div",{className:"max-h-48 overflow-y-auto mb-4 space-y-2",children:E.conflicts.map((ee,pe)=>e.jsxs("div",{className:"bg-white border border-red-200 rounded p-2 text-sm",children:[e.jsxs("div",{className:"font-medium text-red-700",children:[new Date(ee.date).toLocaleDateString()," at ",ee.time]}),e.jsx("div",{className:"text-red-600",children:ee.reason})]},pe))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:Mt,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors",children:"Create Anyway (Skip Conflicts)"}),e.jsx("button",{type:"button",onClick:()=>k(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-medium rounded-lg transition-colors",children:"Cancel"})]})]})]})}),w&&e.jsxs(tt,{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("span",{children:w})]}),j&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 border-l-4 border-green-500 rounded-lg text-green-700 flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{children:j})]}),Ce&&e.jsx("div",{className:"mb-6 p-4 bg-blue-50 border-l-4 border-blue-500 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-blue-700 font-medium mb-2",children:"Recurring Appointment Series"}),e.jsx("p",{className:"text-blue-600 text-sm mb-3",children:"This appointment is part of a recurring series. Choose what to update:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"seriesScope",value:"single",checked:zt==="single",onChange:ee=>ws(ee.target.value),className:"text-blue-600 focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm text-blue-700",children:["Just this occurrence (",new Date(me).toLocaleDateString(),")"]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"seriesScope",value:"future",checked:zt==="future",onChange:ee=>ws(ee.target.value),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-blue-700",children:"This and all future occurrences"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"seriesScope",value:"all",checked:zt==="all",onChange:ee=>ws(ee.target.value),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-blue-700",children:"All occurrences in the series"})]})]})]})]})}),e.jsxs("form",{onSubmit:Wt,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(te,{children:["Appointment Type ",e.jsx(De,{})]}),e.jsxs("select",{value:xe,onChange:ee=>Rl(ee.target.value),className:"input-field",required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),ut.map(ee=>e.jsx("option",{value:ee.id,children:ee.name},ee.id))]})]}),v&&e.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Status"}),e.jsx("select",{value:B,onChange:ee=>q(ee.target.value),className:"input-field",children:X.length>0?X.filter(ee=>ee.is_active).map(ee=>e.jsx("option",{value:ee.option_id,children:ee.title},ee.option_id)):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"arrived",children:"Arrived"}),e.jsx("option",{value:"in_session",children:"In Session"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"no_show",children:"No Show"})]})})]}),(B==="cancelled"||B==="no_show")&&e.jsxs("div",{children:[e.jsxs(te,{children:["Cancellation Reason ",e.jsx(De,{})]}),e.jsxs("select",{value:we,onChange:ee=>ke(ee.target.value),className:"input-field",required:!0,children:[e.jsx("option",{value:"",children:"Select a reason..."}),K.length>0?K.filter(ee=>ee.is_active).map(ee=>e.jsx("option",{value:ee.option_id,children:ee.title},ee.option_id)):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"no_show",children:"No Show"}),e.jsx("option",{value:"client_cancelled",children:"Client Cancelled"}),e.jsx("option",{value:"provider_cancelled",children:"Provider Cancelled"}),e.jsx("option",{value:"emergency",children:"Emergency"}),e.jsx("option",{value:"rescheduled",children:"Rescheduled"}),e.jsx("option",{value:"other",children:"Other"})]})]})]})]}),xe&&(()=>{const ee=ut.find(pe=>pe.id===parseInt(xe));return ee?ee.categoryType==="client"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsxs(te,{children:["Client ",e.jsx(De,{})]}),e.jsx("input",{type:"text",value:Va,onChange:pe=>Rn(pe.target.value),placeholder:"Search by name...",className:"input-field",required:!0}),Xa&&Tn.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:Tn.map(pe=>e.jsxs("button",{type:"button",onClick:()=>zn(pe),className:"w-full text-left px-4 py-3 hover:bg-blue-50 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[pe.fname," ",pe.lname]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["DOB: ",pe.DOB,"  PID: ",pe.pid]})]},pe.pid))}),A&&e.jsxs("div",{className:"mt-2 text-sm text-green-600",children:["Selected: ",A]})]}),e.jsxs("div",{children:[e.jsxs(te,{children:["Provider ",e.jsx(De,{})]}),e.jsxs("select",{value:P,onChange:pe=>Ca(pe.target.value),className:"input-field",required:!0,children:[e.jsx("option",{value:"",children:"Select Provider"}),m.map(pe=>e.jsx("option",{value:pe.value,children:pe.label},pe.value))]})]})]}):ee.name==="Supervision"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs(te,{children:["Supervisor ",e.jsx(De,{})]}),e.jsxs("select",{value:P,onChange:pe=>Ca(pe.target.value),className:"input-field",required:!0,children:[e.jsx("option",{value:"",children:"Select Supervisor"}),m.map(pe=>e.jsx("option",{value:pe.value,children:pe.label},pe.value))]})]}),P&&wa.length>0&&e.jsxs("div",{children:[e.jsxs(te,{children:["Supervisees ",e.jsx(De,{})]}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto space-y-2",children:wa.map(pe=>e.jsxs("label",{className:"flex items-center gap-2 hover:bg-gray-50 p-2 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Js.includes(pe.id),onChange:()=>On(pe.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-900",children:pe.label}),pe.title&&e.jsxs("span",{className:"text-xs text-gray-500",children:["(",pe.title,")"]})]},pe.id))}),Js.length>0&&e.jsxs("div",{className:"mt-2 text-sm text-green-600",children:[Js.length," supervisee(s) selected"]})]})]}):ee.name==="Staff Meeting"?e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"All-Staff Meeting:"})," This appointment will be visible to all providers."]})}):ee.categoryType==="clinic"?e.jsxs("div",{children:[e.jsxs(te,{children:["Provider ",e.jsx(De,{})]}),e.jsxs("select",{value:P,onChange:pe=>Ca(pe.target.value),className:"input-field",required:!0,children:[e.jsx("option",{value:"",children:"Select Provider"}),m.map(pe=>e.jsx("option",{value:pe.value,children:pe.label},pe.value))]})]}):null:null})(),xe&&(()=>{const ee=ut.find(Xe=>Xe.id===parseInt(xe)),pe=ee&&ee.requiresCptSelection&&ee.linkedCptCodes&&ee.linkedCptCodes.length>0,Oe=Me==="insurance";return pe?e.jsxs("div",{children:[e.jsxs(te,{children:["CPT Code ",Oe&&e.jsx(De,{}),!Oe&&e.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["(Optional for ",Me,")"]})]}),e.jsxs("select",{value:J,onChange:Xe=>Ln(Xe.target.value),className:"input-field",required:Oe,children:[e.jsx("option",{value:"",children:"Select CPT Code"}),ee.linkedCptCodes.map(Xe=>e.jsxs("option",{value:Xe.id,children:[Xe.code," - ",Xe.description," (",Xe.standardDuration,"min",Xe.standardFee?`, $${Xe.standardFee}`:"",")"]},Xe.id))]}),Ee&&e.jsxs("div",{className:"mt-2 text-sm text-blue-600",children:["Standard fee: $",Ee.standardFee||"Not set","  Duration: ",Ee.standardDuration," minutes"]})]}):null})(),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(te,{children:["Date ",e.jsx(De,{})]}),e.jsx("input",{type:"date",value:me,onChange:ee=>oe(ee.target.value),className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsxs(te,{children:["Time ",e.jsx(De,{})]}),e.jsx("input",{type:"time",value:H,onChange:ee=>U(ee.target.value),className:"input-field",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(te,{children:["Duration (minutes) ",e.jsx(De,{})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:cr.map(ee=>e.jsxs("button",{type:"button",onClick:()=>D(ee),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${ae===ee?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[ee,"m"]},ee))}),e.jsx("input",{type:"number",value:ae,onChange:ee=>D(ee.target.value),min:"5",step:"5",className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Location"}),e.jsxs("select",{value:ge,onChange:ee=>z(ee.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"Select Location (Optional)"}),_t.map(ee=>e.jsx("option",{value:ee.value,children:ee.label},ee.id))]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx("input",{type:"checkbox",checked:je,onChange:ee=>Fe(ee.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),"Make this recurring"]})}),je&&e.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-blue-200",children:[e.jsxs("div",{children:[e.jsxs(te,{children:["Repeat on ",e.jsx(De,{})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"sun",label:"Sun"},{key:"mon",label:"Mon"},{key:"tue",label:"Tue"},{key:"wed",label:"Wed"},{key:"thu",label:"Thu"},{key:"fri",label:"Fri"},{key:"sat",label:"Sat"}].map(ee=>e.jsx("button",{type:"button",onClick:()=>Ct(pe=>({...pe,[ee.key]:!pe[ee.key]})),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${st[ee.key]?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:ee.label},ee.key))})]}),e.jsxs("div",{children:[e.jsxs(te,{children:["Frequency ",e.jsx(De,{})]}),e.jsxs("select",{value:Y,onChange:ee=>ue(ee.target.value),className:"input-field",children:[e.jsx("option",{value:"1",children:"Weekly"}),e.jsx("option",{value:"2",children:"Every 2 weeks"}),e.jsx("option",{value:"3",children:"Every 3 weeks"}),e.jsx("option",{value:"4",children:"Every 4 weeks"})]})]}),e.jsxs("div",{children:[e.jsxs(te,{children:["Ends ",e.jsx(De,{})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:fe==="count",onChange:()=>Ae("count"),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"checkbox-label",children:"After"}),e.jsx("input",{type:"number",value:be,onChange:ee=>Re(parseInt(ee.target.value)||1),disabled:fe!=="count",min:"1",max:"52",className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm disabled:bg-gray-100 focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"checkbox-label",children:"occurrences"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:fe==="date",onChange:()=>Ae("date"),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"checkbox-label",children:"On"}),e.jsx("input",{type:"date",value:Ge,onChange:ee=>Je(ee.target.value),disabled:fe!=="date",className:"px-2 py-1 border border-gray-300 rounded text-sm disabled:bg-gray-100 focus:ring-2 focus:ring-blue-500"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Title (Optional)"}),e.jsx("input",{type:"text",value:_,onChange:ee=>M(ee.target.value),placeholder:"Defaults to client name if left blank",className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Comments"}),e.jsx("textarea",{value:Q,onChange:ee=>le(ee.target.value),rows:3,placeholder:"Optional notes about this appointment",className:"input-field"})]}),e.jsxs("div",{className:"flex gap-3 pt-6 mt-6 border-t border-gray-200",children:[v&&e.jsx(us,{type:"button",onClick:Is,disabled:h,title:"Permanently delete this appointment record",children:"Delete"}),e.jsx("div",{className:"flex-1"}),e.jsx(Tt,{type:"button",onClick:_s,disabled:h,children:"Close"}),e.jsx(Ve,{type:"submit",disabled:h,className:"min-w-[160px]",children:h?v?"Saving...":"Creating...":v?"Save Changes":"Create Appointment"})]})]})]})]})]})})}function yb(){const[n,d]=f.useState("week"),[c,o]=f.useState(new Date),[u,b]=f.useState([]),[m,v]=f.useState([]),[h,p]=f.useState("all"),[w,y]=f.useState(!0),[j,N]=f.useState(null),[x,C]=f.useState({startHour:8,endHour:18,interval:15,viewType:"week"}),[E,k]=f.useState(!1),[R,L]=f.useState(null),[A,G]=f.useState(null),[P,T]=f.useState(null),[xe,ve]=f.useState(null),oe=(()=>{const Y=[],ue=x.interval,fe=60/ue;for(let Ae=x.startHour;Ae<x.endHour;Ae++)for(let be=0;be<fe;be++){const Re=be*ue;Y.push({hour:Ae,minutes:Re})}return Y})();f.useEffect(()=>{(async()=>{try{const ue=await Fo();console.log("Calendar settings response:",ue),ue.settings?(console.log("Setting calendar hours to:",ue.settings),C(ue.settings),ue.settings.viewType&&d(ue.settings.viewType)):console.log("No settings in response, using defaults")}catch(ue){console.error("Failed to load calendar settings:",ue)}})()},[]),f.useEffect(()=>{(async()=>{try{const ue=await lr();v(ue.providers||[])}catch(ue){console.error("Failed to load providers:",ue)}})()},[]),f.useEffect(()=>{H()},[c,h,n]);const H=async()=>{y(!0),N(null);try{const{startDate:Y,endDate:ue}=U();console.log("Loading appointments:",{startDate:Y,endDate:ue,currentDate:c,view:n});const fe=await Go(Y,ue,h);console.log("Appointments loaded:",fe.appointments),b(fe.appointments||[])}catch(Y){console.error("Failed to load appointments:",Y),N("Failed to load appointments")}finally{y(!1)}},U=()=>{const Y=new Date(c),ue=new Date(c);if(n==="week"){const fe=Y.getDay(),Ae=Y.getDate()-fe;Y.setDate(Ae),Y.setHours(0,0,0,0),ue.setDate(Y.getDate()+6),ue.setHours(23,59,59,999)}else n==="day"?(Y.setHours(0,0,0,0),ue.setHours(23,59,59,999)):n==="month"&&(Y.setDate(1),Y.setHours(0,0,0,0),ue.setMonth(ue.getMonth()+1),ue.setDate(0),ue.setHours(23,59,59,999));return{startDate:Y.toISOString().split("T")[0],endDate:ue.toISOString().split("T")[0]}},ae=()=>{const Y=new Date(c),ue=Y.getDay(),fe=Y.getDate()-ue;Y.setDate(fe),Y.setHours(0,0,0,0);const Ae=Array.from({length:7},(be,Re)=>new Date(Y.getTime()+Re*24*60*60*1e3));return console.log("Week days:",Ae.map(be=>be.toISOString().split("T")[0])),Ae},D=()=>{const Y=new Date(c);n==="week"?Y.setDate(Y.getDate()-7):n==="day"?Y.setDate(Y.getDate()-1):n==="month"&&Y.setMonth(Y.getMonth()-1),o(Y)},_=()=>{const Y=new Date(c);n==="week"?Y.setDate(Y.getDate()+7):n==="day"?Y.setDate(Y.getDate()+1):n==="month"&&Y.setMonth(Y.getMonth()+1),o(Y)},M=()=>{o(new Date)},Q=Y=>{if(!Y)return"";const[ue,fe]=Y.split(":"),Ae=parseInt(ue),be=Ae>=12?"PM":"AM";return`${Ae===0?12:Ae>12?Ae-12:Ae}:${fe} ${be}`},le=Y=>{if(!Y)return"";const ue=Y.trim().split(" ");if(ue.length===1)return ue[0];const fe=ue[0],Ae=ue[ue.length-1];return`${fe} ${Ae.charAt(0)}.`},ge=Y=>{if(!Y.providerFirstName)return Y.providerName||"";const ue=Y.providerFirstName,fe=Y.providerLastName||"";return fe?`${ue} ${fe.charAt(0)}.`:ue},z=Y=>Y.patientName?`${le(Y.patientName)} / ${ge(Y)}`:ge(Y),B=Y=>{const ue=Q(Y.startTime).replace(" ","");return Y.patientName?`${ue} ${le(Y.patientName)}`:`${ue} ${Y.categoryName||ge(Y)}`},q=Y=>Y==="cancelled"||Y==="no_show",X=Y=>Y.categoryType!=="client",W=Y=>Y.categoryColor||"#9CA3AF",K=Y=>{const ue=Y.replace("#",""),fe=parseInt(ue.substr(0,2),16),Ae=parseInt(ue.substr(2,2),16),be=parseInt(ue.substr(4,2),16),Re=Math.round(fe*.35+255*.65),Ge=Math.round(Ae*.35+255*.65),Je=Math.round(be*.35+255*.65);return`rgb(${Re}, ${Ge}, ${Je})`},ie=Y=>{const ue=Y.replace("#",""),fe=parseInt(ue.substr(0,2),16),Ae=parseInt(ue.substr(2,2),16),be=parseInt(ue.substr(4,2),16),Re=Math.round(fe*.5+255*.5),Ge=Math.round(Ae*.5+255*.5),Je=Math.round(be*.5+255*.5);return`rgb(${Re}, ${Ge}, ${Je})`},we=Y=>{if(q(Y.status))return{isCancelled:!0,textClass:"line-through text-gray-500",secondaryTextClass:"text-gray-400"};const fe=Y.categoryType==="client"?Y.providerColor||"#3B82F6":Y.categoryColor||"#9CA3AF",Ae=K(fe);return{isCancelled:!1,borderColor:ie(fe),textClass:"text-gray-800",secondaryTextClass:"text-gray-600",gradient:`linear-gradient(135deg, ${Ae} 0%, ${Ae.replace("rgb","rgba").replace(")",", 0.85)")} 100%)`}},ke=(Y,ue,fe)=>{const Ae=Y.toISOString().split("T")[0];return u.filter(be=>{if(be.eventDate!==Ae)return!1;const[Re,Ge]=be.startTime.split(":"),Je=parseInt(Re),Ce=parseInt(Ge);return Je===ue&&Ce===fe})},J=Y=>Y.duration?Math.ceil(Y.duration/x.interval):1,he=Y=>{const[ue,fe]=Y.startTime.split(":").map(Number),Ae=ue*60+fe,be=x.startHour*60,Ge=(Ae-be)/x.interval,Je=60,Ce=Ge*Je,ws=(Y.duration||0)/x.interval*Je;return{top:Ce,height:ws}},Ee=Y=>{const ue=Y.toISOString().split("T")[0];return u.filter(fe=>fe.eventDate===ue)},Te=Y=>{const ue=Y.toISOString().split("T")[0];return u.filter(fe=>fe.eventDate===ue)},Me=()=>{const Y=c.getFullYear(),ue=c.getMonth(),fe=new Date(Y,ue,1),Ae=fe.getDay(),be=new Date(fe);return be.setDate(be.getDate()-Ae),be.setHours(0,0,0,0),Array.from({length:42},(Ge,Je)=>new Date(be.getTime()+Je*24*60*60*1e3))},de=()=>{if(n==="week"){const Y=ae(),ue=Y[0],fe=Y[6];return`${ue.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${fe.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}else return n==="day"?c.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):c.toLocaleDateString("en-US",{month:"long",year:"numeric"})},je=(Y=null,ue=null,fe=null)=>{ve(null),L(Y||c.toISOString().split("T")[0]),G(ue),T(fe||(h!=="all"?h:null)),k(!0)},Fe=(Y,ue)=>{ue.stopPropagation(),ve(Y),L(null),G(null),T(null),k(!0)},st=(Y,ue,fe)=>{const Ae=Y.toISOString().split("T")[0],be=`${ue.toString().padStart(2,"0")}:${fe.toString().padStart(2,"0")}`;je(Ae,be,h!=="all"?h:null)},Ct=Y=>{console.log("New appointment created:",Y),H()};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"glass-card p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Calendar"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>je(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Appointment"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>d("day"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="day"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Day"}),e.jsx("button",{onClick:()=>d("week"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="week"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Week"}),e.jsx("button",{onClick:()=>d("month"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="month"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Month"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:D,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:_,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsx(Ve,{onClick:M,children:"Today"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:de()})]})]}),j&&e.jsx("div",{className:"glass-card-sm bg-red-100/60 border-red-300/50 text-red-700 px-4 py-3 mb-6",children:j}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"w-80 flex-shrink-0 space-y-6",children:[e.jsx("div",{className:"glass-card p-4",children:e.jsx(vb,{currentDate:c,onDateClick:o})}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Providers"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>p("all"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors ${h==="all"?"bg-blue-100 text-blue-900 font-medium":"hover:bg-gray-100 text-gray-700"}`,children:"All Providers"}),m.map(Y=>e.jsx("button",{onClick:()=>p(Y.value),className:`w-full text-left px-3 py-2 rounded-lg transition-colors ${h===Y.value?"bg-blue-100 text-blue-900 font-medium":"hover:bg-gray-100 text-gray-700"}`,children:Y.label},Y.value))]})]})]}),e.jsxs("div",{className:"flex-1",children:[w?e.jsx("div",{className:"glass-card p-12 text-center",children:e.jsx("div",{className:"text-gray-700",children:"Loading appointments..."})}):n==="week"&&(h==="all"?e.jsxs("div",{className:"glass-card overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-[160px_repeat(7,1fr)] border-b border-white/30",children:[e.jsx("div",{className:"p-4 bg-white/20 border-r border-white/30 font-semibold text-gray-700",children:"Provider"}),ae().map((Y,ue)=>{const fe=Y.toDateString()===new Date().toDateString();return e.jsxs("div",{className:`p-4 border-r border-white/30 text-center ${fe?"bg-blue-100/40":"bg-white/20"}`,children:[e.jsx("div",{className:"text-sm text-gray-600",children:Y.toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("div",{className:`text-lg font-semibold ${fe?"text-blue-600":"text-gray-900"}`,children:Y.getDate()})]},ue)})]}),e.jsx("div",{children:m.map(Y=>{const ue=u.filter(fe=>String(fe.providerId)===String(Y.value));return e.jsxs("div",{className:"grid grid-cols-[160px_repeat(7,1fr)] border-b border-white/30 min-h-[80px]",children:[e.jsx("div",{className:"p-3 bg-white/10 border-r border-white/30 flex items-start",style:{borderLeft:`4px solid ${ue[0]?.providerColor||"#3B82F6"}`},children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:Y.label}),e.jsxs("div",{className:"text-xs text-gray-500",children:[ue.filter(fe=>!X(fe)).length," appts"]})]})}),ae().map((fe,Ae)=>{const be=fe.toISOString().split("T")[0],Re=ue.filter(Ce=>Ce.eventDate===be&&X(Ce)),Ge=ue.filter(Ce=>Ce.eventDate===be&&!X(Ce)).sort((Ce,ft)=>Ce.startTime.localeCompare(ft.startTime)),Je=fe.toDateString()===new Date().toDateString();return e.jsxs("div",{onClick:()=>{L(be),G("09:00"),T(Y.value),ve(null),k(!0)},className:`p-2 border-r border-white/30 hover:bg-white/10 cursor-pointer transition-colors relative ${Je?"bg-blue-50/30":""}`,children:[Re.length>0&&e.jsx("div",{className:"availability-block absolute inset-0 pointer-events-none z-0",style:{"--block-color":W(Re[0])},title:Re.map(Ce=>Ce.categoryName).join(", ")}),e.jsxs("div",{className:"space-y-1 relative z-10",children:[Re.map(Ce=>e.jsxs("div",{onClick:ft=>{ft.stopPropagation(),Fe(Ce,ft)},className:"availability-block-label px-2 py-1 rounded text-xs text-gray-700",style:{"--block-color":W(Ce)},children:[e.jsx("span",{className:"font-medium",children:Q(Ce.startTime).replace(" ","")})," ",Ce.categoryName]},Ce.id)),Ge.slice(0,4).map(Ce=>{const ft=we(Ce);return e.jsx("div",{onClick:zt=>{zt.stopPropagation(),Fe(Ce,zt)},className:`px-2 py-1.5 rounded-lg text-sm border cursor-pointer ${ft.isCancelled?"glass-appointment-cancelled border-dashed":"glass-appointment"}`,style:ft.isCancelled?void 0:{background:ft.gradient,borderColor:ft.borderColor},title:`${Ce.patientName||Ce.categoryName} - ${Ce.categoryName}`,children:e.jsx("div",{className:`font-semibold truncate ${ft.textClass}`,children:B(Ce)})},Ce.id)}),Ge.length>4&&e.jsxs("div",{className:"text-xs text-gray-500 pl-1",children:["+",Ge.length-4," more"]})]})]},Ae)})]},Y.value)})})]}):e.jsxs("div",{className:"glass-card overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-white/30",children:[e.jsx("div",{className:"w-20 flex-shrink-0 p-4 bg-white/20 border-r border-white/30 font-semibold text-gray-700",children:"Time"}),e.jsx("div",{className:"flex-1 flex",children:ae().map((Y,ue)=>{const fe=Y.toDateString()===new Date().toDateString();return e.jsxs("div",{className:`flex-1 p-4 border-r border-white/30 text-center ${fe?"bg-blue-100/40":"bg-white/20"}`,children:[e.jsx("div",{className:"text-sm text-gray-600",children:Y.toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("div",{className:`text-lg font-semibold ${fe?"text-blue-600":"text-gray-900"}`,children:Y.getDate()})]},ue)})})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-20 flex-shrink-0 border-r border-white/30 bg-white/20",children:oe.map(Y=>e.jsxs("div",{className:"h-[60px] p-2 border-b border-white/30 text-xs text-gray-700 font-medium",children:[Y.hour===0?"12":Y.hour<12?Y.hour:Y.hour===12?"12":Y.hour-12,":",Y.minutes.toString().padStart(2,"0")," ",Y.hour<12?"AM":"PM"]},`time-${Y.hour}-${Y.minutes}`))}),e.jsx("div",{className:"flex-1 flex",children:ae().map((Y,ue)=>{const fe=Ee(Y),Ae=oe.length*60;return e.jsxs("div",{className:"flex-1 border-r border-white/30 relative",style:{height:`${Ae}px`},children:[oe.map(be=>e.jsx("div",{onClick:()=>st(Y,be.hour,be.minutes),className:"absolute w-full h-[60px] border-b border-white/30 hover:bg-white/10 cursor-pointer transition-colors",style:{top:`${oe.findIndex(Re=>Re.hour===be.hour&&Re.minutes===be.minutes)*60}px`}},`slot-${be.hour}-${be.minutes}`)),fe.map(be=>{const{top:Re,height:Ge}=he(be);if(X(be))return e.jsx("div",{onClick:ft=>Fe(be,ft),className:"availability-block absolute left-0 right-0 z-5",style:{"--block-color":W(be),top:`${Re}px`,height:`${Ge}px`},title:`${be.categoryName}${be.comments?": "+be.comments:""}`,children:e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"font-semibold text-gray-800 text-sm",children:ge(be)}),e.jsx("div",{className:"text-gray-600 text-xs",children:be.categoryName})]})},be.id);const Ce=we(be);return e.jsxs("div",{onClick:ft=>Fe(be,ft),className:`absolute left-1 right-1 px-3 py-2 rounded-xl text-sm border cursor-pointer z-10 overflow-hidden ${Ce.isCancelled?"glass-appointment-cancelled border-dashed":"glass-appointment"}`,style:Ce.isCancelled?{top:`${Re}px`,height:`${Ge}px`}:{top:`${Re}px`,height:`${Ge}px`,background:Ce.gradient,borderColor:Ce.borderColor},children:[e.jsx("div",{className:`font-semibold ${Ce.textClass}`,children:z(be)}),Ge>40&&e.jsx("div",{className:`truncate ${Ce.secondaryTextClass}`,children:be.categoryName}),Ge>60&&be.room&&e.jsxs("div",{className:`truncate text-xs mt-1 ${Ce.secondaryTextClass} ${Ce.isCancelled?"line-through":""}`,children:["Room: ",be.room]})]},be.id)})]},ue)})})]})]})),!w&&n==="day"&&e.jsxs("div",{className:"glass-card overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-[150px_1fr] border-b border-white/30",children:[e.jsx("div",{className:"p-4 bg-white/20 border-r border-white/30 font-semibold text-gray-700",children:"Time"}),(()=>{const Y=c.toDateString()===new Date().toDateString();return e.jsxs("div",{className:`p-4 border-r border-white/30 text-center ${Y?"bg-blue-100/40":"bg-white/20"}`,children:[e.jsx("div",{className:"text-sm text-gray-600",children:c.toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("div",{className:`text-lg font-semibold ${Y?"text-blue-600":"text-gray-900"}`,children:c.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})})()]}),oe.map(Y=>e.jsxs("div",{className:"grid grid-cols-[150px_1fr] border-b border-white/30",children:[e.jsxs("div",{className:"p-3 border-r border-white/30 bg-white/20 text-sm text-gray-700 font-medium",children:[Y.hour===0?"12":Y.hour<12?Y.hour:Y.hour===12?"12":Y.hour-12,":",Y.minutes.toString().padStart(2,"0")," ",Y.hour<12?"AM":"PM"]}),(()=>{const ue=ke(c,Y.hour,Y.minutes);return e.jsx("div",{onClick:()=>st(c,Y.hour,Y.minutes),className:"p-2 border-r border-white/30 hover:bg-white/10 cursor-pointer transition-colors min-h-[60px]",children:ue.map(fe=>{const Ae=X(fe);q(fe.status);const Re=J(fe)*60-8;if(Ae)return e.jsxs("div",{onClick:Je=>Fe(fe,Je),className:"availability-block-card mb-1 px-3 py-2 rounded-xl text-sm",style:{"--block-color":W(fe),height:`${Re}px`},children:[e.jsxs("div",{className:"font-semibold text-gray-800 flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),fe.categoryName]}),fe.comments&&e.jsx("div",{className:"text-gray-600 truncate text-xs italic",children:fe.comments})]},fe.id);const Ge=we(fe);return e.jsxs("div",{onClick:Je=>Fe(fe,Je),className:`mb-1 px-3 py-2 rounded-xl text-sm border cursor-pointer ${Ge.isCancelled?"glass-appointment-cancelled border-dashed":"glass-appointment"}`,style:Ge.isCancelled?{height:`${Re}px`}:{height:`${Re}px`,background:Ge.gradient,borderColor:Ge.borderColor},children:[e.jsx("div",{className:`font-semibold ${Ge.textClass}`,children:z(fe)}),e.jsx("div",{className:`truncate ${Ge.secondaryTextClass}`,children:fe.categoryName}),fe.room&&e.jsxs("div",{className:`truncate text-xs ${Ge.secondaryTextClass} ${Ge.isCancelled?"line-through":""}`,children:["Room: ",fe.room]})]},fe.id)})})})()]},`${Y.hour}-${Y.minutes}`))]}),!w&&n==="month"&&e.jsxs("div",{className:"glass-card overflow-hidden",children:[e.jsx("div",{className:"grid grid-cols-7 border-b border-white/30",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(Y=>e.jsx("div",{className:"p-4 bg-white/20 border-r border-white/30 text-center font-semibold text-gray-700",children:Y},Y))}),e.jsx("div",{className:"grid grid-cols-7",children:Me().map((Y,ue)=>{const fe=Y.toDateString()===new Date().toDateString(),Ae=Y.getMonth()===c.getMonth(),be=Te(Y);return e.jsxs("div",{className:`min-h-[120px] border-r border-b border-white/30 p-2 hover:bg-white/10 cursor-pointer transition-colors ${Ae?"":"bg-white/5"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full text-sm font-semibold ${fe?"bg-blue-600 text-white":Ae?"text-gray-900":"text-gray-400"}`,children:Y.getDate()}),be.length>0&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-900 px-2 py-0.5 rounded-full font-medium",children:be.length})]}),e.jsxs("div",{className:"space-y-1.5",children:[be.slice(0,3).map(Re=>{const Ge=X(Re);if(q(Re.status),Ge)return e.jsx("div",{onClick:Ce=>Fe(Re,Ce),className:"availability-block-card px-2 py-1.5 rounded-lg text-xs truncate",style:{"--block-color":W(Re)},children:e.jsxs("div",{className:"font-semibold text-gray-800 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),e.jsx("span",{className:"truncate",children:Re.categoryName})]})},Re.id);const Je=we(Re);return e.jsxs("div",{onClick:Ce=>Fe(Re,Ce),className:`px-2 py-1.5 rounded-lg text-xs border cursor-pointer ${Je.isCancelled?"glass-appointment-cancelled border-dashed":"glass-appointment"}`,style:Je.isCancelled?void 0:{background:Je.gradient,borderColor:Je.borderColor},children:[e.jsx("div",{className:`font-semibold truncate ${Je.textClass}`,children:z(Re)}),e.jsx("div",{className:`truncate text-[11px] ${Je.secondaryTextClass} ${Je.isCancelled?"line-through":""}`,children:Re.categoryName})]},Re.id)}),be.length>3&&e.jsxs("div",{className:"text-xs text-gray-600 pl-2",children:["+",be.length-3," more"]})]})]},ue)})})]})]})]}),e.jsx(Of,{isOpen:E,onClose:()=>k(!1),onSave:Ct,initialDate:R,initialTime:A,providerId:P,providers:m,appointment:xe})]})}const Kh={sm:"modal-sm",md:"modal-md",lg:"modal-lg"};function Ie({isOpen:n,onClose:d,title:c,size:o="md",children:u,showCloseButton:b=!0}){if(!n)return null;const m=Kh[o]||Kh.md;return Ho.createPortal(e.jsx("div",{className:"modal-backdrop",onClick:d,children:e.jsxs("div",{className:`modal-container ${m}`,onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:c}),b&&e.jsx("button",{onClick:d,className:"text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Close modal",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"modal-body",children:u})]})}),document.body)}function jb({children:n}){return e.jsx("div",{className:"modal-footer",children:n})}Ie.Footer=jb;function Dn({children:n,className:d=""}){return e.jsx("div",{className:`flex flex-wrap gap-2 p-2 rounded-xl ${d}`,style:{backdropFilter:"blur(60px) saturate(180%)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0.4) 100%)",boxShadow:"0 8px 32px rgba(107, 154, 196, 0.12), 0 2px 8px rgba(0, 0, 0, 0.06), inset 0 1px 0 rgba(255, 255, 255, 0.8)",border:"1px solid rgba(255, 255, 255, 0.6)"},children:n})}function Gt({active:n,onClick:d,children:c,className:o=""}){const u={padding:"0.75rem 1.25rem",fontWeight:600,transition:"all 300ms",whiteSpace:"nowrap",borderRadius:"0.75rem",cursor:"pointer",border:"none",outline:"none"},b={...u,background:"linear-gradient(135deg, rgba(232, 220, 196, 0.6) 0%, rgba(107, 154, 196, 0.5) 100%)",backdropFilter:"blur(20px)",color:"rgb(30, 58, 88)",boxShadow:"0 4px 12px rgba(107, 154, 196, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.6)",border:"1px solid rgba(255, 255, 255, 0.5)"},m={...u,background:"transparent",color:"rgb(55, 65, 81)",border:"1px solid transparent"};return e.jsx("button",{onClick:d,className:`hover:bg-white/35 ${o}`,style:n?b:m,onMouseEnter:v=>{n||(v.currentTarget.style.color="rgb(17, 24, 39)",v.currentTarget.style.background="rgba(255, 255, 255, 0.35)",v.currentTarget.style.backdropFilter="blur(20px)",v.currentTarget.style.boxShadow="0 2px 8px rgba(107, 154, 196, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.5)",v.currentTarget.style.border="1px solid rgba(255, 255, 255, 0.4)")},onMouseLeave:v=>{n||(v.currentTarget.style.color="rgb(55, 65, 81)",v.currentTarget.style.background="transparent",v.currentTarget.style.backdropFilter="none",v.currentTarget.style.boxShadow="none",v.currentTarget.style.border="1px solid transparent")},children:c})}function Nb(){const[n,d]=f.useState([]),[c,o]=f.useState([]),[u,b]=f.useState(!0),[m,v]=f.useState(""),[h,p]=f.useState(""),[w,y]=f.useState("all"),[j,N]=f.useState(!1),[x,C]=f.useState(!1),[E,k]=f.useState({id:null,name:"",description:"",color:"#3B82F6",default_duration:50,is_billable:1,is_active:1,category_type:"client",requires_cpt_selection:0,blocks_availability:0,linked_cpt_codes:[],sort_order:0}),[R,L]=f.useState(""),[A,G]=f.useState(!1);f.useEffect(()=>{P(),T()},[]);const P=async()=>{try{b(!0);const D=await fetch("/custom/api/calendar_categories.php",{credentials:"include"});if(!D.ok)throw new Error("Failed to fetch calendar categories");const _=await D.json();d(_.categories||[])}catch(D){v(D.message)}finally{b(!1)}},T=async()=>{try{const D=await fetch("/custom/api/cpt_codes.php",{credentials:"include"});if(!D.ok)throw new Error("Failed to fetch CPT codes");const _=await D.json();o(_.cpt_codes?.filter(M=>M.is_active)||[])}catch(D){console.error("Failed to load CPT codes:",D)}},xe=()=>{k({id:null,name:"",description:"",color:"#3B82F6",default_duration:50,is_billable:1,is_active:1,category_type:"client",requires_cpt_selection:0,blocks_availability:0,linked_cpt_codes:[],sort_order:0}),L(""),N(!0)},ve=async D=>{try{const _=await fetch(`/custom/api/calendar_categories.php?action=get&id=${D.id}`,{credentials:"include"});if(!_.ok)throw new Error("Failed to fetch category details");const Q=(await _.json()).category;k({id:Q.id,name:Q.name,description:Q.description||"",color:Q.color||"#3B82F6",default_duration:Q.default_duration||50,is_billable:Q.is_billable,is_active:Q.is_active,category_type:Q.category_type||"client",requires_cpt_selection:Q.requires_cpt_selection||0,blocks_availability:Q.blocks_availability||0,linked_cpt_codes:Q.linked_cpt_codes||[],sort_order:Q.sort_order||0}),L(""),C(!0)}catch(_){v(_.message)}},me=async()=>{if(L(""),!E.name.trim()){L("Category name is required");return}try{G(!0);const D=E.id?"update":"create",_=await fetch("/custom/api/calendar_categories.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:D,...E})}),M=await _.json();if(!_.ok||!M.success)throw new Error(M.error||"Failed to save category");await P(),N(!1),C(!1)}catch(D){L(D.message)}finally{G(!1)}},oe=async D=>{if(confirm("Are you sure you want to delete this category? This cannot be undone."))try{const _=await fetch("/custom/api/calendar_categories.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete",id:D})}),M=await _.json();if(!_.ok||!M.success)throw new Error(M.error||"Failed to delete category");await P()}catch(_){v(_.message)}},H=async D=>{try{const _=await fetch("/custom/api/calendar_categories.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",id:D.id,is_active:D.is_active?0:1})}),M=await _.json();if(!_.ok||!M.success)throw new Error(M.error||"Failed to update status");await P()}catch(_){v(_.message)}},U=D=>{k(_=>({..._,linked_cpt_codes:_.linked_cpt_codes.includes(D)?_.linked_cpt_codes.filter(M=>M!==D):[..._.linked_cpt_codes,D]}))},ae=n.filter(D=>{const _=D.name.toLowerCase().includes(h.toLowerCase())||(D.description||"").toLowerCase().includes(h.toLowerCase()),M=w==="all"||D.category_type===w;return _&&M});return u?e.jsx("div",{className:"text-center text-gray-600 py-8",children:"Loading calendar categories..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Calendar Categories"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage appointment types and link them to billing codes"})]}),e.jsx(Ve,{onClick:xe,children:"+ Add Category"})]}),m&&e.jsx(tt,{children:m}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search categories...",value:h,onChange:D=>p(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsxs("select",{value:w,onChange:D=>y(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"client",children:"Client Appointments"}),e.jsx("option",{value:"clinic",children:"Clinic/Internal"}),e.jsx("option",{value:"holiday",children:"Holidays/Closures"})]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Duration"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Billable"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"CPT Required"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:ae.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:"No categories found"})}):ae.map(D=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[D.category_type!=="client"&&e.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300 flex-shrink-0",style:{backgroundColor:D.color||"#3B82F6"},title:D.color||"Default blue"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:D.name}),D.description&&e.jsx("div",{className:"text-xs text-gray-500",children:D.description})]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${D.category_type==="client"?"bg-blue-100 text-blue-700":D.category_type==="clinic"?"bg-purple-100 text-purple-700":"bg-orange-100 text-orange-700"}`,children:D.category_type==="client"?"Client":D.category_type==="clinic"?"Clinic":"Holiday"})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700 text-center",children:[D.default_duration," min"]}),e.jsx("td",{className:"px-4 py-3 text-center",children:D.is_billable?e.jsx("span",{className:"text-green-600",children:""}):e.jsx("span",{className:"text-gray-400",children:""})}),e.jsx("td",{className:"px-4 py-3 text-center",children:D.requires_cpt_selection?e.jsx("span",{className:"text-green-600",children:""}):e.jsx("span",{className:"text-gray-400",children:""})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>H(D),className:`px-3 py-1 text-xs rounded-full ${D.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:D.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(Tt,{onClick:()=>ve(D),children:"Edit"}),e.jsx(us,{onClick:()=>oe(D.id),children:"Delete"})]})})]},D.id))})]})}),e.jsx(Ie,{isOpen:j||x,onClose:()=>{N(!1),C(!1)},title:E.id?"Edit Category":"Add Category",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[R&&e.jsx(tt,{children:R}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(te,{children:["Category Name ",e.jsx(De,{})]}),e.jsx("input",{type:"text",value:E.name,onChange:D=>k({...E,name:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Office Visit"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Category Type"}),e.jsxs("select",{value:E.category_type,onChange:D=>k({...E,category_type:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"client",children:"Client Appointment"}),e.jsx("option",{value:"clinic",children:"Clinic/Internal"}),e.jsx("option",{value:"holiday",children:"Holiday/Closure"})]})]})]}),E.category_type!=="client"&&e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx(te,{children:"Category Color"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",value:E.color,onChange:D=>k({...E,color:D.target.value}),className:"w-12 h-10 rounded border border-gray-300 cursor-pointer"}),e.jsx("input",{type:"text",value:E.color,onChange:D=>k({...E,color:D.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono",placeholder:"#3B82F6"}),e.jsx("div",{className:"w-10 h-10 rounded-lg border border-gray-300",style:{backgroundColor:E.color},title:"Color preview"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used for availability blocks on calendars"})]})}),e.jsxs("div",{children:[e.jsx(te,{children:"Description"}),e.jsx("textarea",{value:E.description,onChange:D=>k({...E,description:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"2",placeholder:"Brief description of this category"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Default Duration (min)"}),e.jsx("input",{type:"number",value:E.default_duration,onChange:D=>k({...E,default_duration:parseInt(D.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Sort Order"}),e.jsx("input",{type:"number",value:E.sort_order,onChange:D=>k({...E,sort_order:parseInt(D.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Settings"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:E.is_billable===1,onChange:D=>k({...E,is_billable:D.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Billable"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:E.requires_cpt_selection===1,onChange:D=>k({...E,requires_cpt_selection:D.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Requires CPT Code Selection"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:E.blocks_availability===1,onChange:D=>k({...E,blocks_availability:D.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Blocks Provider Availability"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:E.is_active===1,onChange:D=>k({...E,is_active:D.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Active"})]})]})]}),E.requires_cpt_selection===1&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Linked CPT Codes"}),e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 max-h-64 overflow-y-auto",children:c.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No active CPT codes available"}):e.jsx("div",{className:"space-y-2",children:c.map(D=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:E.linked_cpt_codes.includes(D.id),onChange:()=>U(D.id),className:"mr-2 checkbox"}),e.jsxs("span",{className:"checkbox-label",children:[e.jsx("span",{className:"font-mono font-semibold",children:D.code})," - ",D.description]})]},D.id))})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Selected CPT codes will be available when scheduling appointments with this category"})]}),e.jsxs(Ie.Footer,{children:[e.jsx(Tt,{onClick:()=>{N(!1),C(!1)},disabled:A,children:"Cancel"}),e.jsx(Ve,{onClick:me,disabled:A,children:A?"Saving...":"Save Category"})]})]})})]})}function wb(){const[n,d]=f.useState("general");return e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs(Dn,{className:"mb-6",children:[e.jsx(Gt,{active:n==="general",onClick:()=>d("general"),children:"General Settings"}),e.jsx(Gt,{active:n==="categories",onClick:()=>d("categories"),children:"Categories"}),e.jsx(Gt,{active:n==="statuses",onClick:()=>d("statuses"),children:"Appointment Statuses"}),e.jsx(Gt,{active:n==="reasons",onClick:()=>d("reasons"),children:"Cancellation Reasons"})]}),n==="general"&&e.jsx(Sb,{}),n==="categories"&&e.jsx(Nb,{}),n==="statuses"&&e.jsx(Ih,{listId:"appointment_statuses",title:"Appointment Statuses",description:"Define the status options for appointments",itemLabel:"Status"}),n==="reasons"&&e.jsx(Ih,{listId:"cancellation_reasons",title:"Cancellation Reasons",description:"Define reasons for appointment cancellations (including no-shows)",itemLabel:"Reason"})]})}function Sb(){const[n,d]=f.useState({startHour:8,endHour:17,interval:15,viewType:"week",eventColor:"1",providersSeeAll:!0}),[c,o]=f.useState(!0),[u,b]=f.useState(!1),[m,v]=f.useState(null);f.useEffect(()=>{h()},[]);const h=async()=>{o(!0);try{const y=await Fo();y.settings&&d({startHour:y.settings.startHour||8,endHour:y.settings.endHour||17,interval:y.settings.interval||15,viewType:y.settings.viewType||"week",eventColor:y.settings.eventColor||"1",providersSeeAll:y.settings.providersSeeAll!==void 0?y.settings.providersSeeAll:!0})}catch(y){console.error("Failed to load calendar settings:",y),v({type:"error",text:"Failed to load settings"})}finally{o(!1)}},p=async()=>{b(!0),v(null);try{await hb(n),v({type:"success",text:"Settings saved successfully!"})}catch(y){console.error("Failed to save calendar settings:",y),v({type:"error",text:"Failed to save settings"})}finally{b(!1)}},w=(y,j)=>{d(N=>({...N,[y]:j}))};return c?e.jsx("div",{className:"text-center text-gray-700 py-8",children:"Loading settings..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"General Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure calendar display and behavior"})]}),m&&e.jsx("div",{className:`mb-6 px-4 py-3 rounded-lg ${m.type==="success"?"bg-green-100/60 border-green-300/50 text-green-700":"bg-red-100/60 border-red-300/50 text-red-700"} border`,children:m.text}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Calendar Starting Hour"}),e.jsx("select",{value:n.startHour,onChange:y=>w("startHour",parseInt(y.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:Array.from({length:24},(y,j)=>e.jsx("option",{value:j,children:j===0?"12 AM":j<12?`${j} AM`:j===12?"12 PM":`${j-12} PM`},j))})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Calendar Ending Hour"}),e.jsx("select",{value:n.endHour,onChange:y=>w("endHour",parseInt(y.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:Array.from({length:24},(y,j)=>e.jsx("option",{value:j,children:j===0?"12 AM":j<12?`${j} AM`:j===12?"12 PM":`${j-12} PM`},j))})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Calendar Interval (minutes)"}),e.jsxs("select",{value:n.interval,onChange:y=>w("interval",parseInt(y.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:[e.jsx("option",{value:15,children:"15 minutes"}),e.jsx("option",{value:30,children:"30 minutes"}),e.jsx("option",{value:60,children:"60 minutes"})]})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Default Calendar View"}),e.jsxs("select",{value:n.viewType,onChange:y=>w("viewType",y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:[e.jsx("option",{value:"day",children:"Day"}),e.jsx("option",{value:"week",children:"Week"}),e.jsx("option",{value:"month",children:"Month"})]})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Appointment/Event Color"}),e.jsxs("select",{value:n.eventColor,onChange:y=>w("eventColor",y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:[e.jsx("option",{value:"1",children:"Category Color Schema"}),e.jsx("option",{value:"2",children:"Facility Color Schema"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:n.providersSeeAll,onChange:y=>w("providersSeeAll",y.target.checked),className:"checkbox"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Providers See Entire Calendar"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-8",children:"Allow providers to see all appointments, not just their own"})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsx(Ve,{onClick:p,disabled:u,children:u?"Saving...":"Save Settings"})})]})}function Ih({listId:n,title:d,description:c,itemLabel:o}){const[u,b]=f.useState([]),[m,v]=f.useState(!0),[h,p]=f.useState(""),[w,y]=f.useState(!1),[j,N]=f.useState(!1),[x,C]=f.useState({option_id:"",title:"",notes:"",is_active:1,is_default:0,sort_order:0}),[E,k]=f.useState(""),[R,L]=f.useState(!1);f.useEffect(()=>{A()},[n]);const A=async()=>{try{v(!0),p("");const oe=await fetch(`/custom/api/settings_lists.php?list_id=${n}`,{credentials:"include"});if(!oe.ok)throw new Error(`Failed to fetch ${d.toLowerCase()}`);const H=await oe.json();b(H.items||[])}catch(oe){p(oe.message)}finally{v(!1)}},G=()=>{C({option_id:"",title:"",notes:"",is_active:1,is_default:0,sort_order:u.length+1}),k(""),y(!0)},P=oe=>{C({option_id:oe.option_id,title:oe.title,notes:oe.notes||"",is_active:oe.is_active,is_default:oe.is_default,sort_order:oe.sort_order}),k(""),N(!0)},T=async()=>{if(!x.option_id?.trim()){k(`${o} ID is required`);return}if(!x.title?.trim()){k(`${o} name is required`);return}try{L(!0),k("");const oe=j?"PUT":"POST",H=await fetch(`/custom/api/settings_lists.php?list_id=${n}`,{method:oe,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...x,list_id:n})});if(!H.ok){const U=await H.json();throw new Error(U.error||`Failed to ${j?"update":"create"} ${o.toLowerCase()}`)}await A(),y(!1),N(!1)}catch(oe){k(oe.message)}finally{L(!1)}},xe=async oe=>{if(confirm(`Are you sure you want to delete this ${o.toLowerCase()}?`))try{if(!(await fetch(`/custom/api/settings_lists.php?list_id=${n}&option_id=${oe}`,{method:"DELETE",credentials:"include"})).ok)throw new Error(`Failed to delete ${o.toLowerCase()}`);await A()}catch(H){alert("Error: "+H.message)}},ve=async oe=>{try{if(!(await fetch(`/custom/api/settings_lists.php?list_id=${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({list_id:n,option_id:oe.option_id,is_active:oe.is_active?0:1})})).ok)throw new Error("Failed to update status");await A()}catch(H){alert("Error: "+H.message)}},me=()=>{y(!1),N(!1),k("")};return m?e.jsxs("div",{className:"text-center text-gray-700 py-8",children:["Loading ",d.toLowerCase(),"..."]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:d}),e.jsx("p",{className:"text-gray-600 mt-1",children:c})]}),e.jsxs(Ve,{onClick:G,children:["+ Add ",o]})]}),h&&e.jsx(tt,{children:h}),u.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("p",{className:"text-gray-600 text-lg",children:["No ",d.toLowerCase()," configured"]}),e.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:['Click "+ Add ',o,'" to create your first entry']})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Order"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:u.map(oe=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-mono font-semibold text-gray-900",children:oe.option_id}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[oe.title,oe.is_default===1&&e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-700",children:"Default"})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 max-w-xs truncate",children:oe.notes||""}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 text-center",children:oe.sort_order}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>ve(oe),className:`px-3 py-1 text-xs rounded-full ${oe.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:oe.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-4 py-3 text-center whitespace-nowrap",children:[e.jsx("button",{onClick:()=>P(oe),className:"text-blue-600 hover:text-blue-800 mr-3",children:"Edit"}),e.jsx(us,{onClick:()=>xe(oe.option_id),children:"Delete"})]})]},oe.option_id))})]})}),e.jsx(Ie,{isOpen:w||j,onClose:me,title:j?`Edit ${o}`:`Add ${o}`,size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[E&&e.jsx(tt,{children:E}),e.jsxs("div",{children:[e.jsxs(te,{children:[o," ID ",e.jsx(De,{})]}),e.jsx("input",{type:"text",value:x.option_id,onChange:oe=>C({...x,option_id:oe.target.value.toLowerCase().replace(/\s+/g,"_")}),className:"input-field",placeholder:"e.g., scheduled",disabled:j}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unique identifier (lowercase, no spaces)"})]}),e.jsxs("div",{children:[e.jsxs(te,{children:[o," Name ",e.jsx(De,{})]}),e.jsx("input",{type:"text",value:x.title,onChange:oe=>C({...x,title:oe.target.value}),className:"input-field",placeholder:"e.g., Scheduled"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Description"}),e.jsx("textarea",{value:x.notes,onChange:oe=>C({...x,notes:oe.target.value}),className:"input-field",rows:2,placeholder:"Optional description..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Sort Order"}),e.jsx("input",{type:"number",value:x.sort_order,onChange:oe=>C({...x,sort_order:parseInt(oe.target.value)||0}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Options"}),e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:x.is_active===1,onChange:oe=>C({...x,is_active:oe.target.checked?1:0}),className:"checkbox mr-2"}),e.jsx("span",{className:"checkbox-label",children:"Active"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:x.is_default===1,onChange:oe=>C({...x,is_default:oe.target.checked?1:0}),className:"checkbox mr-2"}),e.jsx("span",{className:"checkbox-label",children:"Default"})]})]})]})]}),e.jsxs(Ie.Footer,{children:[e.jsx(Tt,{onClick:me,disabled:R,children:"Cancel"}),e.jsx(Ve,{onClick:T,disabled:R,children:R?"Saving...":j?"Save Changes":`Add ${o}`})]})]})})]})}function Tl({children:n,className:d=""}){return e.jsx("div",{className:`text-red-600 text-sm ${d}`,children:n})}function Cb(){const[n,d]=f.useState([]),[c,o]=f.useState(!0),[u,b]=f.useState(null),[m,v]=f.useState(!1),[h,p]=f.useState(!1),[w,y]=f.useState(!1),[j,N]=f.useState(null),[x,C]=f.useState({name:"",parent_id:null}),[E,k]=f.useState(!1),[R,L]=f.useState(null);f.useEffect(()=>{A()},[]);const A=async()=>{try{o(!0);const D=await fetch("/custom/api/document_categories.php",{credentials:"include"});if(!D.ok)throw new Error("Failed to fetch categories");const _=await D.json();d(_.categories||[]),b(null)}catch(D){console.error("Error fetching categories:",D),b(D.message)}finally{o(!1)}},G=D=>{const _=[],M={};return D.forEach(Q=>{M[Q.id]={...Q,children:[]}}),D.forEach(Q=>{Q.parent&&M[Q.parent]?M[Q.parent].children.push(M[Q.id]):_.push(M[Q.id])}),_},P=(D,_=0)=>{let M=[];return D.forEach(Q=>{M.push({...Q,level:_}),Q.children&&Q.children.length>0&&(M=M.concat(P(Q.children,_+1)))}),M},T=()=>{if(!j)return n;const D=new Set([j.id]),_=G(n),M=le=>{le.children&&le.children.forEach(ge=>{D.add(ge.id),M(ge)})},Q=le=>{le.forEach(ge=>{ge.id===j.id&&M(ge),ge.children&&Q(ge.children)})};return Q(_),n.filter(le=>!D.has(le.id))},xe=()=>{C({name:"",parent_id:null}),L(null),v(!0)},ve=D=>{N(D),C({name:D.name,parent_id:D.parent?parseInt(D.parent):null}),L(null),p(!0)},me=D=>{N(D),L(null),y(!0)},oe=async()=>{if(!x.name||x.name.trim()===""){L("Category name is required");return}try{k(!0),L(null);const D=await fetch("/custom/api/document_categories.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:x.name.trim(),parent_id:x.parent_id||null})}),_=await D.json();if(!D.ok)throw new Error(_.error||"Failed to create category");await A(),v(!1)}catch(D){console.error("Error creating category:",D),L(D.message)}finally{k(!1)}},H=async()=>{if(!x.name||x.name.trim()===""){L("Category name is required");return}try{k(!0),L(null);const D=await fetch("/custom/api/document_categories.php",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:j.id,name:x.name.trim(),parent_id:x.parent_id||null})}),_=await D.json();if(!D.ok)throw new Error(_.error||"Failed to update category");await A(),p(!1)}catch(D){console.error("Error updating category:",D),L(D.message)}finally{k(!1)}},U=async()=>{try{k(!0),L(null);const D=await fetch(`/custom/api/document_categories.php?id=${j.id}`,{method:"DELETE",credentials:"include"}),_=await D.json();if(!D.ok)throw new Error(_.error||"Failed to delete category");await A(),y(!1)}catch(D){console.error("Error deleting category:",D),L(D.message)}finally{k(!1)}},ae=()=>{v(!1),p(!1),y(!1),N(null),C({name:"",parent_id:null}),L(null)};return c?e.jsx("div",{className:"glass-card p-8",children:e.jsx("div",{className:"text-center text-gray-700",children:"Loading categories..."})}):u?e.jsxs("div",{className:"glass-card p-8",children:[e.jsxs(Tl,{children:["Error: ",u]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(Ve,{onClick:A,children:"Retry"})})]}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Document Categories"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage categories for organizing client documents"})]}),e.jsx(Ve,{onClick:xe,children:"+ Add Category"})]}),n.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:'No categories defined. Click "Add Category" to create one.'}):e.jsx("div",{className:"space-y-2",children:P(G(n)).map(D=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",style:{marginLeft:`${D.level*2}rem`},children:[e.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[D.level>0&&e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("div",{className:"font-medium text-gray-900",children:D.name}),D.children&&D.children.length>0&&e.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:[D.children.length," ",D.children.length===1?"subcategory":"subcategories"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ve(D),className:"px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"Edit"}),e.jsx(us,{onClick:()=>me(D),children:" Delete "})]})]},D.id))}),e.jsx(Ie,{isOpen:m,onClose:ae,title:"Add Category",size:"sm",children:e.jsxs("form",{onSubmit:D=>{D.preventDefault(),oe()},children:[R&&e.jsx(tt,{children:R}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(te,{children:["Category Name ",e.jsx(De,{})]}),e.jsx("input",{type:"text",value:x.name,onChange:D=>C({...x,name:D.target.value}),placeholder:"e.g., Consent Forms, Insurance Documents",className:"input-field",autoFocus:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(te,{children:"Parent Category (Optional)"}),e.jsxs("select",{value:x.parent_id||"",onChange:D=>{const _=D.target.value;C({...x,parent_id:_?parseInt(_,10):null})},className:"input-field",children:[e.jsx("option",{value:"",children:"None (Top Level)"}),n.map(D=>e.jsx("option",{value:D.id,children:D.name},D.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a parent to create a subcategory"})]}),e.jsxs(Ie.Footer,{children:[e.jsx(Tt,{type:"button",onClick:ae,disabled:E,children:"Cancel"}),e.jsx(Ve,{type:"submit",disabled:E,children:E?"Creating...":"Create Category"})]})]})}),e.jsx(Ie,{isOpen:h,onClose:ae,title:"Edit Category",size:"sm",children:e.jsxs("form",{onSubmit:D=>{D.preventDefault(),H()},children:[R&&e.jsx(tt,{children:R}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(te,{children:["Category Name ",e.jsx(De,{})]}),e.jsx("input",{type:"text",value:x.name,onChange:D=>C({...x,name:D.target.value}),className:"input-field",autoFocus:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(te,{children:"Parent Category (Optional)"}),e.jsxs("select",{value:x.parent_id||"",onChange:D=>{const _=D.target.value;C({...x,parent_id:_?parseInt(_,10):null})},className:"input-field",children:[e.jsx("option",{value:"",children:"None (Top Level)"}),T().map(D=>e.jsx("option",{value:D.id,children:D.name},D.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a parent to make this a subcategory"})]}),e.jsxs(Ie.Footer,{children:[e.jsx(Tt,{type:"button",onClick:ae,disabled:E,children:"Cancel"}),e.jsx(Ve,{type:"submit",disabled:E,children:E?"Saving...":"Save Changes"})]})]})}),e.jsx(Ie,{isOpen:w,onClose:ae,title:"Delete Category",size:"sm",children:e.jsxs("form",{onSubmit:D=>{D.preventDefault(),U()},children:[R&&e.jsx(tt,{children:R}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to delete the category ",e.jsxs("strong",{children:['"',j?.name,'"']}),"?"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Note: You cannot delete a category that has documents or subcategories."})]}),e.jsxs(Ie.Footer,{children:[e.jsx(Tt,{type:"button",onClick:ae,disabled:E,children:"Cancel"}),e.jsx(us,{type:"submit",disabled:E,children:E?"Deleting...":"Delete Category"})]})]})})]})}function _b({listType:n,title:d,description:c,apiEndpoint:o}){const[u,b]=f.useState([]),[m,v]=f.useState(!0),[h,p]=f.useState(null),[w,y]=f.useState(!1),[j,N]=f.useState(!1),[x,C]=f.useState(!1),[E,k]=f.useState(null),[R,L]=f.useState({name:"",description:"",active:!0}),[A,G]=f.useState(!1),[P,T]=f.useState(null);f.useEffect(()=>{xe()},[n]);const xe=async()=>{try{v(!0);const _=await fetch(`${o}?type=${n}`,{credentials:"include"});if(!_.ok)throw new Error(`Failed to fetch ${d.toLowerCase()}`);const M=await _.json();b(M.items||[]),p(null)}catch(_){console.error(`Error fetching ${d}:`,_),p(_.message)}finally{v(!1)}},ve=()=>{L({name:"",description:"",active:!0}),T(null),y(!0)},me=_=>{k(_),L({name:_.name||"",description:_.description||"",active:_.active!==void 0?_.active:!0}),T(null),N(!0)},oe=_=>{k(_),T(null),C(!0)},H=async()=>{if(!R.name||R.name.trim()===""){T("Name is required");return}try{G(!0),T(null);const _=await fetch(o,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:n,name:R.name.trim(),description:R.description?.trim()||"",active:R.active})}),M=await _.json();if(!_.ok)throw new Error(M.error||`Failed to create ${d.toLowerCase()}`);await xe(),y(!1)}catch(_){console.error(`Error creating ${d}:`,_),T(_.message)}finally{G(!1)}},U=async()=>{if(!R.name||R.name.trim()===""){T("Name is required");return}try{G(!0),T(null);const _=await fetch(o,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:n,id:E.id,name:R.name.trim(),description:R.description?.trim()||"",active:R.active})}),M=await _.json();if(!_.ok)throw new Error(M.error||`Failed to update ${d.toLowerCase()}`);await xe(),N(!1)}catch(_){console.error(`Error updating ${d}:`,_),T(_.message)}finally{G(!1)}},ae=async()=>{try{G(!0),T(null);const _=await fetch(`${o}?type=${n}&id=${E.id}`,{method:"DELETE",credentials:"include"}),M=await _.json();if(!_.ok)throw new Error(M.error||`Failed to delete ${d.toLowerCase()}`);await xe(),C(!1)}catch(_){console.error(`Error deleting ${d}:`,_),T(_.message)}finally{G(!1)}},D=()=>{y(!1),N(!1),C(!1),k(null),L({name:"",description:"",active:!0}),T(null)};return m?e.jsx("div",{className:"glass-card p-8",children:e.jsxs("div",{className:"text-center text-gray-700",children:["Loading ",d.toLowerCase(),"..."]})}):h?e.jsxs("div",{className:"glass-card p-8",children:[e.jsxs(tt,{className:"text-center",children:["Error: ",h]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(Ve,{onClick:xe,children:"Retry"})})]}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:d}),e.jsx("p",{className:"text-gray-600 mt-1",children:c})]}),e.jsxs(Ve,{onClick:ve,children:["+ Add ",d.replace(/s$/,"")]})]}),u.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:['No items defined. Click "Add ',d.replace(/s$/,""),'" to create one.']}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4",children:u.map(_=>e.jsxs("div",{className:"glass-card-sm p-4 hover:shadow-lg transition-all duration-200 group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900 text-lg mb-1",children:_.name}),_.description&&e.jsx("div",{className:"text-sm text-gray-600 leading-relaxed",children:_.description})]}),e.jsx("div",{className:"flex items-center gap-1 ml-3",children:_.active?e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full",children:"Active"}):e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium text-gray-600 bg-gray-200 rounded-full",children:"Inactive"})})]}),e.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-gray-200/50",children:[e.jsxs("button",{onClick:()=>me(_),className:"flex-1 px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-white hover:bg-blue-600 rounded-lg transition-all duration-200",title:"Edit item",children:[e.jsx("svg",{className:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),e.jsxs(us,{onClick:()=>oe(_),title:"Delete item",children:[e.jsx("svg",{className:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]},_.id))}),e.jsx(Ie,{isOpen:w,onClose:D,title:`Add ${d.replace(/s$/,"")}`,size:"sm",children:e.jsxs("form",{onSubmit:_=>{_.preventDefault(),H()},children:[P&&e.jsx(tt,{children:P}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(te,{children:["Name ",e.jsx(De,{})]}),e.jsx("input",{type:"text",value:R.name,onChange:_=>L({...R,name:_.target.value}),placeholder:"e.g., Heterosexual, Male, Single",className:"input-field",autoFocus:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(te,{children:"Description (Optional)"}),e.jsx("input",{type:"text",value:R.description,onChange:_=>L({...R,description:_.target.value}),placeholder:"Additional details or clarification",className:"input-field"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:R.active,onChange:_=>L({...R,active:_.target.checked}),className:"checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Active"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"Inactive items won't appear in selection lists"})]}),e.jsxs(Ie.Footer,{children:[e.jsx(Tt,{type:"button",onClick:D,disabled:A,children:"Cancel"}),e.jsx(Ve,{type:"submit",disabled:A,children:A?"Creating...":`Create ${d.replace(/s$/,"")}`})]})]})}),e.jsx(Ie,{isOpen:j,onClose:D,title:`Edit ${d.replace(/s$/,"")}`,size:"sm",children:e.jsxs("form",{onSubmit:_=>{_.preventDefault(),U()},children:[P&&e.jsx(tt,{children:P}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(te,{children:["Name ",e.jsx(De,{})]}),e.jsx("input",{type:"text",value:R.name,onChange:_=>L({...R,name:_.target.value}),className:"input-field",autoFocus:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(te,{children:"Description (Optional)"}),e.jsx("input",{type:"text",value:R.description,onChange:_=>L({...R,description:_.target.value}),placeholder:"Additional details or clarification",className:"input-field"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:R.active,onChange:_=>L({...R,active:_.target.checked}),className:"checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Active"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"Inactive items won't appear in selection lists"})]}),e.jsxs(Ie.Footer,{children:[e.jsx(Tt,{type:"button",onClick:D,disabled:A,children:"Cancel"}),e.jsx(Ve,{type:"submit",disabled:A,children:A?"Saving...":"Save Changes"})]})]})}),e.jsx(Ie,{isOpen:x,onClose:D,title:`Delete ${d.replace(/s$/,"")}`,size:"sm",children:e.jsxs("form",{onSubmit:_=>{_.preventDefault(),ae()},children:[P&&e.jsx(tt,{children:P}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to delete ",e.jsxs("strong",{children:['"',E?.name,'"']}),"?"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Note: You cannot delete items that are currently in use by client records."})]}),e.jsxs(Ie.Footer,{children:[e.jsx(Tt,{type:"button",onClick:D,disabled:A,children:"Cancel"}),e.jsx(us,{type:"submit",disabled:A,children:A?"Deleting...":`Delete ${d.replace(/s$/,"")}`})]})]})})]})}function kb(){const[n,d]=f.useState("sexual-orientation"),c=[{id:"sexual-orientation",label:"Sexual Orientation",title:"Sexual Orientations",description:"Manage sexual orientation options for client demographics"},{id:"gender-identity",label:"Gender Identity",title:"Gender Identities",description:"Manage gender identity options for client demographics"},{id:"pronouns",label:"Pronouns",title:"Pronouns",description:"Manage pronoun options for client demographics"},{id:"marital-status",label:"Marital Status",title:"Marital Statuses",description:"Manage marital status options for client demographics"},{id:"client-status",label:"Client Status",title:"Client Statuses",description:"Manage client status options (Active, Discharged, etc.)"},{id:"ethnicity",label:"Ethnicity/Race",title:"Ethnicity/Race Options",description:"Manage ethnicity and race options for client demographics"},{id:"insurance-type",label:"Insurance Types",title:"Insurance Types",description:"Manage insurance type categories"},{id:"referral-source",label:"Referral Sources",title:"Referral Sources",description:"Manage referral source options for client intake"},{id:"treatment-modality",label:"Treatment Modalities",title:"Treatment Modalities",description:"Manage treatment modality options (CBT, DBT, etc.)"},{id:"discharge-reason",label:"Discharge Reasons",title:"Discharge Reasons",description:"Manage discharge reason options for client records"}],o=c.find(u=>u.id===n);return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"glass-card p-6 mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reference Lists"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage clinical and demographic lookup lists"})]}),e.jsx(Dn,{className:"mb-6",children:c.map(u=>e.jsx(Gt,{active:n===u.id,onClick:()=>d(u.id),children:u.label},u.id))}),o&&e.jsx(_b,{listType:n,title:o.title,description:o.description,apiEndpoint:"/custom/api/reference_lists.php"},n)]})}function Eb(){const[n,d]=f.useState([]),[c,o]=f.useState([]),[u,b]=f.useState([]),[m,v]=f.useState(!0),[h,p]=f.useState(null),[w,y]=f.useState(""),[j,N]=f.useState("active"),[x,C]=f.useState(!1),[E,k]=f.useState(!1),[R,L]=f.useState(null),[A,G]=f.useState(!1),[P,T]=f.useState(null),[xe,ve]=f.useState(!1),[me,oe]=f.useState({username:"",password:"",fname:"",mname:"",lname:"",title:"",suffix:"",email:"",phone:"",phonecell:"",npi:"",federaltaxid:"",taxonomy:"",state_license_number:"",supervisor_id:"",supervisor_ids:[],facility_id:"",authorized:!1,is_supervisor:!1,is_social_worker:!1,active:!0,calendar:!1,portal_user:!1,color:"",notes:""});f.useEffect(()=>{H(),U(),ae()},[j]);const H=async()=>{try{v(!0);const K=await fetch(`/custom/api/users.php?action=list&status=${j}`,{credentials:"include"});if(!K.ok)throw new Error("Failed to fetch users");const ie=await K.json();d(ie.users||[]),p(null)}catch(K){console.error("Error fetching users:",K),p(K.message)}finally{v(!1)}},U=async()=>{try{const K=await fetch("/custom/api/users.php?action=supervisors",{credentials:"include"});if(!K.ok)return;const ie=await K.json();o(ie.supervisors||[])}catch(K){console.error("Error fetching supervisors:",K)}},ae=async()=>{try{const K=await fetch("/custom/api/users.php?action=facilities",{credentials:"include"});if(!K.ok)return;const ie=await K.json();b(ie.facilities||[])}catch(K){console.error("Error fetching facilities:",K)}},D=()=>{oe({username:"",password:"",fname:"",mname:"",lname:"",title:"",suffix:"",email:"",phone:"",phonecell:"",npi:"",federaltaxid:"",taxonomy:"",state_license_number:"",supervisor_id:"",supervisor_ids:[],facility_id:"",authorized:!1,is_supervisor:!1,is_social_worker:!1,active:!0,calendar:!1,portal_user:!1,color:"",notes:""}),ve(!1),T(null)},_=()=>{D(),C(!0)},M=async K=>{console.log("handleEdit called for user:",K),L(K),T(null);try{console.log("Fetching user details for ID:",K.id);const ie=await fetch(`/custom/api/users.php?action=get&id=${K.id}`,{credentials:"include"});console.log("Response status:",ie.status),console.log("Response headers:",ie.headers.get("content-type"));const we=await ie.text();if(console.log("Response text:",we),!we)throw new Error("Empty response from server. Check server logs.");let ke;try{ke=JSON.parse(we)}catch(Te){throw console.error("JSON parse error:",Te),new Error(`Invalid JSON response: ${we.substring(0,100)}`)}if(!ie.ok)throw new Error(ke.error||"Failed to fetch user details");const J=ke.user;if(!J)throw new Error("No user data in response");const he=await fetch(`/custom/api/users.php?action=user_supervisors&id=${K.id}`,{credentials:"include"});let Ee=[];he.ok&&(Ee=((await he.json()).supervisor_ids||[]).map(Me=>String(Me))),oe({id:J.id,username:J.username||"",password:"",fname:J.fname||"",mname:J.mname||"",lname:J.lname||"",title:J.title||"",suffix:J.suffix||"",email:J.email||"",phone:J.phone||"",phonecell:J.phonecell||"",npi:J.npi||"",federaltaxid:J.federaltaxid||"",taxonomy:J.taxonomy||"",state_license_number:J.state_license_number||"",supervisor_id:J.supervisor_id||"",supervisor_ids:Ee,facility_id:J.facility_id||"",authorized:J.authorized==="1"||J.authorized===1,is_supervisor:J.is_supervisor==="1"||J.is_supervisor===1,is_social_worker:J.is_social_worker==="1"||J.is_social_worker===1,active:J.active==="1"||J.active===1,calendar:J.calendar==="1"||J.calendar===1,portal_user:J.portal_user==="1"||J.portal_user===1,color:J.color||"",notes:J.notes||""}),k(!0)}catch(ie){console.error("Error fetching user details:",ie),alert("Failed to load user details: "+ie.message+`

Check the browser console and server logs for more details.`),T(ie.message)}},Q=async()=>{if(!me.username||!me.password||!me.fname||!me.lname||!me.email){T("Username, password, email, first name, and last name are required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(me.email)){T("Please enter a valid email address");return}if(me.password.length<8){T("Password must be at least 8 characters long");return}if(!/[a-z]/.test(me.password)){T("Password must contain at least one lowercase letter");return}if(!/[A-Z]/.test(me.password)){T("Password must contain at least one uppercase letter");return}if(!/[0-9]/.test(me.password)){T("Password must contain at least one number");return}if(!/[^a-zA-Z0-9]/.test(me.password)){T("Password must contain at least one special character");return}try{G(!0),T(null);const ie=await fetch("/custom/api/users.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(me)}),we=await ie.json();if(!ie.ok)throw new Error(we.error||"Failed to create user");await H(),await U(),C(!1),D()}catch(ie){console.error("Error creating user:",ie),T(ie.message)}finally{G(!1)}},le=async()=>{if(!me.fname||!me.lname){T("First name and last name are required");return}if(me.password&&me.password.trim()!==""){if(me.password.length<8){T("Password must be at least 8 characters long");return}if(!/[a-z]/.test(me.password)){T("Password must contain at least one lowercase letter");return}if(!/[A-Z]/.test(me.password)){T("Password must contain at least one uppercase letter");return}if(!/[0-9]/.test(me.password)){T("Password must contain at least one number");return}if(!/[^a-zA-Z0-9]/.test(me.password)){T("Password must contain at least one special character");return}}try{G(!0),T(null);const K=await fetch("/custom/api/users.php",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(me)}),ie=await K.json();if(!K.ok)throw new Error(ie.error||"Failed to update user");await H(),await U(),k(!1),D()}catch(K){console.error("Error updating user:",K),T(K.message)}finally{G(!1)}},ge=async K=>{if(confirm("Are you sure you want to deactivate this user?"))try{if(!(await fetch(`/custom/api/users.php?id=${K}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to deactivate user");await H()}catch(ie){console.error("Error deactivating user:",ie),alert("Failed to deactivate user: "+ie.message)}},z=async K=>{if(confirm("Unlock this user account? This will reset failed login attempts and allow them to log in again."))try{const ie=await fetch(`/custom/api/users.php?action=unlock&id=${K}`,{method:"GET",credentials:"include"});if(!ie.ok){const we=await ie.json();throw new Error(we.error||"Failed to unlock account")}await H(),alert("Account unlocked successfully")}catch(ie){console.error("Error unlocking account:",ie),alert("Failed to unlock account: "+ie.message)}},B=()=>{C(!1),k(!1),L(null),D()},q=(K,ie)=>{oe(we=>({...we,[K]:ie}))},X=K=>{const ie=String(K);oe(we=>{const ke=we.supervisor_ids||[],J=ke.includes(ie);return{...we,supervisor_ids:J?ke.filter(he=>he!==ie):[...ke,ie]}})},W=n.filter(K=>{const ie=w.toLowerCase();return K.fname?.toLowerCase().includes(ie)||K.lname?.toLowerCase().includes(ie)||K.username?.toLowerCase().includes(ie)||K.email?.toLowerCase().includes(ie)});return m?e.jsx("div",{className:"glass-card p-8",children:e.jsx("div",{className:"text-center text-gray-700",children:"Loading users..."})}):h?e.jsxs("div",{className:"glass-card p-8",children:[e.jsxs(tt,{className:"text-center",children:["Error: ",h]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(Ve,{onClick:H,children:"Retry"})})]}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"User Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage system users and providers"})]}),e.jsxs("button",{onClick:_,className:"btn-solid btn-solid-green btn-icon",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add User"]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",placeholder:"Search by name, username, or email...",value:w,onChange:K=>y(K.target.value),className:"input-lg"})}),e.jsxs("div",{className:"flex gap-3 mb-6",children:[e.jsx("button",{onClick:()=>N("active"),className:`filter-btn-enhanced ${j==="active"?"filter-btn-active-base bg-green-500":"filter-btn-inactive"}`,children:"Active"}),e.jsx("button",{onClick:()=>N("inactive"),className:`filter-btn-enhanced ${j==="inactive"?"filter-btn-active-base bg-red-500":"filter-btn-inactive"}`,children:"Inactive"}),e.jsx("button",{onClick:()=>N("all"),className:`filter-btn-enhanced ${j==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Users"})]}),W.length>0&&e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-label",children:[W.length," user",W.length!==1?"s":""]})}),W.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),e.jsxs("p",{className:"text-gray-600 text-lg",children:["No ",j!=="all"?j:""," users found"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:W.map(K=>e.jsxs("div",{className:"card-item",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-base font-bold text-gray-800 leading-tight",children:[K.fname," ",K.lname]}),K.title&&e.jsx("p",{className:"text-xs text-gray-600",children:K.title})]}),e.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[e.jsx("span",{className:K.active==="1"?"badge-solid-success":"badge-solid-danger",children:K.active==="1"?"ACTIVE":"INACTIVE"}),K.is_locked==="1"&&e.jsx("span",{className:"badge-solid-danger text-xs",children:"LOCKED"})]})]}),e.jsxs("div",{className:"space-y-0.5 text-sm text-gray-600 mb-2",children:[(K.phonecell||K.phone)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",K.phonecell||K.phone]}),K.email&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",K.email]}),(K.is_supervisor==="1"||K.authorized==="1"||K.calendar==="1"||K.is_social_worker==="1")&&e.jsxs("div",{className:"flex gap-2 mt-1.5 flex-wrap",children:[K.is_supervisor==="1"&&e.jsx("span",{className:"badge-outline-warning text-xs",children:"Supervisor"}),K.authorized==="1"&&e.jsx("span",{className:"badge-outline-success text-xs",children:"Provider"}),K.is_social_worker==="1"&&e.jsx("span",{className:"badge-outline-purple text-xs",children:"Social Worker"}),K.calendar==="1"&&e.jsx("span",{className:"badge-outline-info text-xs",children:"Admin"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>M(K),className:"flex-1 px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"Edit"}),K.is_locked==="1"&&e.jsx("button",{onClick:()=>z(K.id),className:"flex-1 px-3 py-1.5 text-sm font-medium text-orange-600 hover:text-orange-800 hover:bg-orange-50 rounded-lg transition-colors",children:"Unlock"}),K.active==="1"&&e.jsx(us,{onClick:()=>ge(K.id),children:"Deactivate"})]})]},K.id))}),e.jsx(Db,{isOpen:x||E,isEdit:E,formData:me,formError:P,saving:A,showPassword:xe,setShowPassword:ve,supervisors:c,facilities:u,onFormChange:q,onToggleSupervisor:X,onSave:E?le:Q,onClose:B})]})}function Db({isOpen:n,isEdit:d,formData:c,formError:o,saving:u,showPassword:b,setShowPassword:m,supervisors:v,facilities:h,onFormChange:p,onToggleSupervisor:w,onSave:y,onClose:j}){return e.jsx(Ie,{isOpen:n,onClose:j,title:d?"Edit User":"Add New User",size:"lg",children:e.jsxs("form",{onSubmit:N=>{N.preventDefault(),y()},children:[o&&e.jsx("div",{className:"error-message",children:o}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Login Credentials"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(te,{children:["Username ",e.jsx(De,{})]}),e.jsx("input",{type:"text",value:c.username,onChange:N=>p("username",N.target.value),disabled:d,className:"input-field disabled:bg-gray-100"})]}),e.jsxs("div",{children:[e.jsxs(te,{children:[d?"New Password (leave blank to keep current)":"Password"," ",!d&&e.jsx(De,{})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:b?"text":"password",value:c.password,onChange:N=>p("password",N.target.value),className:"input-field"}),e.jsx("button",{type:"button",onClick:()=>m(!b),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-sm text-gray-600 hover:text-gray-800",children:b?"Hide":"Show"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(te,{children:["Legal First Name ",e.jsx(De,{})]}),e.jsx("input",{type:"text",value:c.fname,onChange:N=>p("fname",N.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Middle Name"}),e.jsx("input",{type:"text",value:c.mname,onChange:N=>p("mname",N.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsxs(te,{children:["Legal Last Name ",e.jsx(De,{})]}),e.jsx("input",{type:"text",value:c.lname,onChange:N=>p("lname",N.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Professional Credentials"}),e.jsx("input",{type:"text",value:c.title,onChange:N=>p("title",N.target.value),placeholder:"MD, LCSW, PhD, etc.",className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Suffix"}),e.jsx("input",{type:"text",value:c.suffix,onChange:N=>p("suffix",N.target.value),placeholder:"Jr., Sr., III, etc.",className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"State License Number"}),e.jsx("input",{type:"text",value:c.state_license_number,onChange:N=>p("state_license_number",N.target.value),className:"input-field"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(te,{children:["Email ",e.jsx(De,{})]}),e.jsx("input",{type:"email",value:c.email,onChange:N=>p("email",N.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Office Phone"}),e.jsx("input",{type:"tel",value:c.phone,onChange:N=>p("phone",N.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Cell Phone"}),e.jsx("input",{type:"tel",value:c.phonecell,onChange:N=>p("phonecell",N.target.value),className:"input-field"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Professional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"NPI"}),e.jsx("input",{type:"text",value:c.npi,onChange:N=>p("npi",N.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Federal Tax ID"}),e.jsx("input",{type:"text",value:c.federaltaxid,onChange:N=>p("federaltaxid",N.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Taxonomy Code"}),e.jsx("input",{type:"text",value:c.taxonomy,onChange:N=>p("taxonomy",N.target.value),placeholder:"207Q00000X",className:"input-field"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Access Control"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.authorized,onChange:N=>p("authorized",N.target.checked),className:"checkbox"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Provider (Can create clinical notes)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.is_supervisor,onChange:N=>p("is_supervisor",N.target.checked),className:"checkbox"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Supervisor (Can supervise other providers)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.is_social_worker,onChange:N=>p("is_social_worker",N.target.checked),className:"checkbox"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Social Worker (Case management, limited clinical access)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.calendar,onChange:N=>p("calendar",N.target.checked),className:"checkbox"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Administrator (Access to Settings)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.portal_user,onChange:N=>p("portal_user",N.target.checked),className:"checkbox"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Portal Access"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.active,onChange:N=>p("active",N.target.checked),className:"checkbox"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})]})]}),c.authorized&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Calendar Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Calendar Color"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",value:c.color||"#3B82F6",onChange:N=>p("color",N.target.value),className:"w-12 h-10 rounded border border-gray-300 cursor-pointer"}),e.jsx("input",{type:"text",value:c.color||"",onChange:N=>p("color",N.target.value),placeholder:"#3B82F6",className:"input-field flex-1",maxLength:7})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This color will be used for all appointments on the calendar"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Color Preview"}),e.jsxs("div",{className:"h-10 rounded-lg border border-gray-200 flex items-center px-3 text-sm font-medium text-gray-800",style:{backgroundColor:`${c.color||"#3B82F6"}B3`},children:[c.fname||"Provider"," ",c.lname?.charAt(0)||"N","."]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Organization"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Supervisors (select one or more)"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto bg-white",children:v.length===0?e.jsx("div",{className:"text-sm text-gray-500 italic",children:"No supervisors available. Mark users as supervisors in Access Control."}):e.jsx("div",{className:"space-y-2",children:v.map(N=>e.jsxs("label",{className:"flex items-center gap-2 hover:bg-gray-50 p-1 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.supervisor_ids.includes(String(N.id)),onChange:()=>w(N.id),className:"checkbox"}),e.jsxs("span",{className:"checkbox-label",children:[N.fname," ",N.lname," ",N.title&&`(${N.title})`]})]},N.id))})})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Default Facility"}),e.jsxs("select",{value:c.facility_id,onChange:N=>p("facility_id",N.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"None"}),h.map(N=>e.jsx("option",{value:N.id,children:N.name},N.id))]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(te,{children:"Notes"}),e.jsx("textarea",{value:c.notes,onChange:N=>p("notes",N.target.value),rows:3,className:"input-field",placeholder:"Additional information about this user..."})]})]}),e.jsxs(Ie.Footer,{children:[e.jsx(Tt,{type:"button",onClick:j,disabled:u,children:"Cancel"}),e.jsx(Ve,{type:"submit",disabled:u,children:u?"Saving...":d?"Save Changes":"Create User"})]})]})})}function Ab(){const[n,d]=f.useState("facilities");return e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs(Dn,{className:"mb-6",children:[e.jsx(Gt,{active:n==="facilities",onClick:()=>d("facilities"),children:"Facilities"}),e.jsx(Gt,{active:n==="rooms",onClick:()=>d("rooms"),children:"Counseling Rooms"})]}),n==="facilities"?e.jsx(Tb,{}):e.jsx(Mb,{})]})}function Tb(){const[n,d]=f.useState([]),[c,o]=f.useState(!0),[u,b]=f.useState(""),[m,v]=f.useState(""),[h,p]=f.useState("active"),[w,y]=f.useState(!1),[j,N]=f.useState(!1),[x,C]=f.useState({id:null,name:"",phone:"",fax:"",website:"",email:"",street:"",city:"",state:"",postal_code:"",country_code:"United States",mail_street:"",mail_city:"",mail_state:"",mail_zip:"",color:"#99FFFF",pos_code:"11",facility_npi:"",federal_ein:"",tax_id_type:"EIN",facility_taxonomy:"",attn:"",info:"",billing_location:0,accepts_assignment:0,service_location:1,primary_business_entity:0,inactive:0}),[E,k]=f.useState(""),[R,L]=f.useState(!1),[A,G]=f.useState("physical"),P=[{value:"11",label:"11: Office"},{value:"02",label:"02: Telehealth"},{value:"10",label:"10: Telehealth (Patient Home)"},{value:"12",label:"12: Home"},{value:"21",label:"21: Inpatient Hospital"},{value:"22",label:"22: Outpatient Hospital"},{value:"23",label:"23: Emergency Room"},{value:"31",label:"31: Skilled Nursing Facility"},{value:"32",label:"32: Nursing Facility"},{value:"49",label:"49: Independent Clinic"},{value:"50",label:"50: Federally Qualified Health Center"},{value:"71",label:"71: State/Local Public Health Clinic"},{value:"81",label:"81: Independent Laboratory"}];f.useEffect(()=>{T()},[]);const T=async()=>{try{o(!0);const M=await fetch("/custom/api/facilities.php",{credentials:"include"});if(!M.ok)throw new Error("Failed to fetch facilities");const Q=await M.json();d(Q.facilities||[])}catch(M){b(M.message)}finally{o(!1)}},xe=()=>{C({id:null,name:"",phone:"",fax:"",website:"",email:"",street:"",address_line2:"",city:"",state:"",postal_code:"",country_code:"United States",mail_street:"",mailing_address_line2:"",mail_city:"",mail_state:"",mail_zip:"",mailing_same_as_physical:"1",billing_street:"",billing_address_line2:"",billing_city:"",billing_state:"",billing_zip:"",billing_same_as_physical:"1",color:"#99FFFF",pos_code:"11",facility_npi:"",federal_ein:"",tax_id_type:"EIN",facility_taxonomy:"",attn:"",info:"",billing_location:0,accepts_assignment:0,service_location:1,primary_business_entity:0,inactive:0}),k(""),G("physical"),y(!0)},ve=async M=>{try{const Q=await fetch(`/custom/api/facilities.php?action=get&id=${M.id}`,{credentials:"include"});if(!Q.ok)throw new Error("Failed to load facility details");const le=await Q.json();C({...le,billing_location:le.billing_location==="1"||le.billing_location===1?1:0,accepts_assignment:le.accepts_assignment==="1"||le.accepts_assignment===1?1:0,service_location:le.service_location==="1"||le.service_location===1?1:0,primary_business_entity:le.primary_business_entity==="1"||le.primary_business_entity===1?1:0,inactive:le.inactive==="1"||le.inactive===1?1:0,mailing_same_as_physical:le.mailing_same_as_physical==="1"||le.mailing_same_as_physical===1?"1":"0",billing_same_as_physical:le.billing_same_as_physical==="1"||le.billing_same_as_physical===1?"1":"0"}),k(""),G("physical"),N(!0)}catch(Q){alert("Failed to load facility details: "+Q.message)}},me=async()=>{if(!x.name?.trim()){k("Facility name is required");return}try{L(!0),k("");const M=await fetch("/custom/api/facilities.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(x)});if(!M.ok){const Q=await M.json();throw new Error(Q.error||"Failed to create facility")}await T(),y(!1)}catch(M){k(M.message)}finally{L(!1)}},oe=async()=>{if(!x.name?.trim()){k("Facility name is required");return}try{L(!0),k("");const M=await fetch("/custom/api/facilities.php",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(x)});if(!M.ok){const Q=await M.json();throw new Error(Q.error||"Failed to update facility")}await T(),N(!1)}catch(M){k(M.message)}finally{L(!1)}},H=async M=>{if(confirm("Are you sure you want to deactivate this facility?"))try{if(!(await fetch(`/custom/api/facilities.php?id=${M}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to deactivate facility");await T()}catch(Q){alert("Error: "+Q.message)}},U=()=>{y(!1),N(!1),k("")},ae=(M,Q)=>{C(le=>({...le,[M]:Q}))},D=M=>{C(Q=>({...Q,[M]:Q[M]?0:1}))},_=n.filter(M=>{const Q=M.inactive==="0"||M.inactive===0;if(h==="active"&&!Q||h==="inactive"&&Q)return!1;if(m){const le=m.toLowerCase();return M.name?.toLowerCase().includes(le)||M.city?.toLowerCase().includes(le)||M.state?.toLowerCase().includes(le)}return!0});return c?e.jsx("div",{className:"text-center text-gray-700 py-8",children:"Loading facilities..."}):u?e.jsxs("div",{children:[e.jsxs(tt,{className:"text-center",children:["Error: ",u]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(Ve,{onClick:T,children:"Retry"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Facilities"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage practice locations and facilities"})]}),e.jsxs("button",{onClick:xe,className:"btn-solid btn-solid-green btn-icon",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Facility"]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",placeholder:"Search by name, city, or state...",value:m,onChange:M=>v(M.target.value),className:"input-lg"})}),e.jsxs("div",{className:"flex gap-3 mb-6",children:[e.jsx("button",{onClick:()=>p("active"),className:`filter-btn-enhanced ${h==="active"?"filter-btn-active-base bg-green-500":"filter-btn-inactive"}`,children:"Active"}),e.jsx("button",{onClick:()=>p("inactive"),className:`filter-btn-enhanced ${h==="inactive"?"filter-btn-active-base bg-red-500":"filter-btn-inactive"}`,children:"Inactive"}),e.jsx("button",{onClick:()=>p("all"),className:`filter-btn-enhanced ${h==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Facilities"})]}),_.length>0&&e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-label",children:[_.length," ",h!=="all"?h:""," facilit",_.length!==1?"ies":"y"]})}),_.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsxs("p",{className:"text-gray-600 text-lg",children:["No ",h!=="all"?h:""," facilities found"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(M=>e.jsxs("div",{className:"card-item",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("div",{children:e.jsx("h4",{className:"text-base font-bold text-gray-800 leading-tight",children:M.name})}),e.jsx("span",{className:M.inactive==="0"||M.inactive===0?"badge-solid-success":"badge-solid-danger",children:M.inactive==="0"||M.inactive===0?"ACTIVE":"INACTIVE"})]}),e.jsxs("div",{className:"space-y-0.5 text-sm text-gray-600 mb-2",children:[M.street&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Address:"})," ",M.street,", ",M.city,", ",M.state," ",M.postal_code]}),M.phone&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",M.phone]}),M.fax&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Fax:"})," ",M.fax]}),e.jsxs("div",{className:"flex gap-2 mt-1.5 flex-wrap",children:[(M.billing_location==="1"||M.billing_location===1)&&e.jsx("span",{className:"badge-outline-info text-xs",children:"Billing"}),(M.service_location==="1"||M.service_location===1)&&e.jsx("span",{className:"badge-outline-success text-xs",children:"Service"}),(M.primary_business_entity==="1"||M.primary_business_entity===1)&&e.jsx("span",{className:"badge-outline-warning text-xs",children:"Primary"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>ve(M),className:"flex-1 px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"Edit"}),(M.inactive==="0"||M.inactive===0)&&e.jsx(us,{onClick:()=>H(M.id),children:"Deactivate"})]})]},M.id))}),e.jsx(Rb,{isOpen:w||j,isEdit:j,formData:x,formError:E,saving:R,addressTab:A,setAddressTab:G,posCodeOptions:P,onFormChange:ae,onToggle:D,onSave:j?oe:me,onClose:U})]})}function Mb(){const[n,d]=f.useState([]),[c,o]=f.useState(!0),[u,b]=f.useState(""),[m,v]=f.useState(!1),[h,p]=f.useState(!1),[w,y]=f.useState({option_id:"",title:"",sort_order:0,is_default:0,notes:""}),[j,N]=f.useState(""),[x,C]=f.useState(!1);f.useEffect(()=>{E()},[]);const E=async()=>{try{o(!0);const P=await fetch("/custom/api/get_rooms.php",{credentials:"include"});if(!P.ok)throw new Error("Failed to fetch rooms");const T=await P.json();d(T.rooms||[])}catch(P){b(P.message)}finally{o(!1)}},k=()=>{y({option_id:"",title:"",sort_order:n.length+1,is_default:0,notes:""}),N(""),v(!0)},R=P=>{y({option_id:P.value||P.option_id,title:P.label||P.title,sort_order:P.sort_order||0,is_default:P.is_default||0,notes:P.notes||""}),N(""),p(!0)},L=async()=>{if(!w.option_id?.trim()){N("Room ID is required");return}if(!w.title?.trim()){N("Room name is required");return}try{C(!0),N("");const T=await fetch("/custom/api/rooms.php",{method:h?"PUT":"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...w,list_id:"rooms"})});if(!T.ok){const xe=await T.json();throw new Error(xe.error||`Failed to ${h?"update":"create"} room`)}await E(),v(!1),p(!1)}catch(P){N(P.message)}finally{C(!1)}},A=async P=>{if(confirm("Are you sure you want to delete this room?"))try{if(!(await fetch(`/custom/api/rooms.php?option_id=${P}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete room");await E()}catch(T){alert("Error: "+T.message)}},G=()=>{v(!1),p(!1),N("")};return c?e.jsx("div",{className:"text-center text-gray-700 py-8",children:"Loading rooms..."}):u?e.jsxs("div",{children:[e.jsxs(tt,{className:"text-center",children:["Error: ",u]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(Ve,{onClick:E,children:"Retry"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Counseling Rooms"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage rooms/offices for appointment scheduling"})]}),e.jsx(Ve,{onClick:k,children:"+ Add Room"})]}),u&&e.jsx(tt,{children:u}),n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-600 text-lg",children:"No rooms configured"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:'Click "+ Add Room" to create your first counseling room'})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Room ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Room Name"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Sort Order"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Default"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Notes"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:n.map((P,T)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-mono font-semibold text-gray-900",children:P.value||P.option_id}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:P.label||P.title}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 text-center",children:P.sort_order||0}),e.jsx("td",{className:"px-4 py-3 text-center",children:P.is_default===1||P.is_default==="1"?e.jsx("span",{className:"px-3 py-1 text-xs rounded-full bg-green-100 text-green-700",children:"Yes"}):e.jsx("span",{className:"text-gray-400",children:"No"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 max-w-xs truncate",children:P.notes||""}),e.jsxs("td",{className:"px-4 py-3 text-center",children:[e.jsx("button",{onClick:()=>R(P),className:"text-blue-600 hover:text-blue-800 mr-3",children:"Edit"}),e.jsx(us,{onClick:()=>A(P.value||P.option_id),children:"Delete"})]})]},P.value||P.option_id||T))})]})}),e.jsx(Ie,{isOpen:m||h,onClose:G,title:h?"Edit Room":"Add Room",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[j&&e.jsx(tt,{children:j}),e.jsxs("div",{children:[e.jsxs(te,{children:["Room ID ",e.jsx(De,{})]}),e.jsx("input",{type:"text",value:w.option_id,onChange:P=>y({...w,option_id:P.target.value.toLowerCase().replace(/\s+/g,"_")}),className:"input-field",placeholder:"office1",disabled:h}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unique identifier (no spaces)"})]}),e.jsxs("div",{children:[e.jsxs(te,{children:["Room Name ",e.jsx(De,{})]}),e.jsx("input",{type:"text",value:w.title,onChange:P=>y({...w,title:P.target.value}),className:"input-field",placeholder:"Office 1"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Sort Order"}),e.jsx("input",{type:"number",value:w.sort_order,onChange:P=>y({...w,sort_order:parseInt(P.target.value)||0}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Default Room"}),e.jsxs("label",{className:"flex items-center mt-2",children:[e.jsx("input",{type:"checkbox",checked:w.is_default===1,onChange:P=>y({...w,is_default:P.target.checked?1:0}),className:"checkbox mr-2"}),e.jsx("span",{className:"checkbox-label",children:"Set as default"})]})]})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Notes"}),e.jsx("textarea",{value:w.notes,onChange:P=>y({...w,notes:P.target.value}),className:"input-field",rows:2,placeholder:"Optional notes about this room..."})]}),e.jsxs(Ie.Footer,{children:[e.jsx(Tt,{onClick:G,disabled:x,children:"Cancel"}),e.jsx(Ve,{onClick:L,disabled:x,children:x?"Saving...":h?"Save Changes":"Add Room"})]})]})})]})}function Rb({isOpen:n,isEdit:d,formData:c,formError:o,saving:u,addressTab:b,setAddressTab:m,posCodeOptions:v,onFormChange:h,onToggle:p,onSave:w,onClose:y}){return e.jsx(Ie,{isOpen:n,onClose:y,title:d?"Edit Facility":"Add New Facility",size:"lg",children:e.jsxs("div",{children:[o&&e.jsx("div",{className:"error-message mb-4",children:o}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(te,{children:["Facility Name ",e.jsx(De,{})]}),e.jsx("input",{type:"text",value:c.name||"",onChange:j=>h("name",j.target.value),className:"input-field",placeholder:"Enter facility name"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(Dn,{className:"mb-4",children:[e.jsx(Gt,{active:b==="physical",onClick:()=>m("physical"),children:"Physical Address"}),e.jsx(Gt,{active:b==="mailing",onClick:()=>m("mailing"),children:"Mailing Address"}),e.jsx(Gt,{active:b==="billing",onClick:()=>m("billing"),children:"Billing Address"})]}),b==="physical"?e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Street Address Line 1"}),e.jsx("input",{type:"text",value:c.street||"",onChange:j=>h("street",j.target.value),className:"input-field",placeholder:"123 Main Street"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Street Address Line 2"}),e.jsx("input",{type:"text",value:c.address_line2||"",onChange:j=>h("address_line2",j.target.value),className:"input-field",placeholder:"Suite 100"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"City"}),e.jsx("input",{type:"text",value:c.city||"",onChange:j=>h("city",j.target.value),className:"input-field",placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"State"}),e.jsx("input",{type:"text",value:c.state||"",onChange:j=>h("state",j.target.value),className:"input-field",placeholder:"WI",maxLength:2})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Zip Code"}),e.jsx("input",{type:"text",value:c.postal_code||"",onChange:j=>h("postal_code",j.target.value),className:"input-field",placeholder:"53092"})]})]})]}):b==="mailing"?e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer mb-2",children:[e.jsx("input",{type:"checkbox",checked:c.mailing_same_as_physical==="1",onChange:j=>{j.target.checked?(h("mailing_same_as_physical","1"),h("mail_street",c.street||""),h("mailing_address_line2",c.address_line2||""),h("mail_city",c.city||""),h("mail_state",c.state||""),h("mail_zip",c.postal_code||"")):h("mailing_same_as_physical","0")},className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Same as Physical Address"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Mailing Address Line 1"}),e.jsx("input",{type:"text",value:c.mail_street||"",onChange:j=>h("mail_street",j.target.value),className:"input-field",placeholder:"Enter mailing street address",disabled:c.mailing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Mailing Address Line 2"}),e.jsx("input",{type:"text",value:c.mailing_address_line2||"",onChange:j=>h("mailing_address_line2",j.target.value),className:"input-field",placeholder:"Suite, Apt, etc.",disabled:c.mailing_same_as_physical==="1"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"City"}),e.jsx("input",{type:"text",value:c.mail_city||"",onChange:j=>h("mail_city",j.target.value),className:"input-field",placeholder:"City",disabled:c.mailing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"State"}),e.jsx("input",{type:"text",value:c.mail_state||"",onChange:j=>h("mail_state",j.target.value),className:"input-field",placeholder:"WI",maxLength:2,disabled:c.mailing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Zip Code"}),e.jsx("input",{type:"text",value:c.mail_zip||"",onChange:j=>h("mail_zip",j.target.value),className:"input-field",placeholder:"53092",disabled:c.mailing_same_as_physical==="1"})]})]})]}):e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer mb-2",children:[e.jsx("input",{type:"checkbox",checked:c.billing_same_as_physical==="1",onChange:j=>{j.target.checked?(h("billing_same_as_physical","1"),h("billing_street",c.street||""),h("billing_address_line2",c.address_line2||""),h("billing_city",c.city||""),h("billing_state",c.state||""),h("billing_zip",c.postal_code||"")):h("billing_same_as_physical","0")},className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Same as Physical Address"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Billing Address Line 1"}),e.jsx("input",{type:"text",value:c.billing_street||"",onChange:j=>h("billing_street",j.target.value),className:"input-field",placeholder:"Enter billing street address",disabled:c.billing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Billing Address Line 2"}),e.jsx("input",{type:"text",value:c.billing_address_line2||"",onChange:j=>h("billing_address_line2",j.target.value),className:"input-field",placeholder:"Suite, Apt, etc.",disabled:c.billing_same_as_physical==="1"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"City"}),e.jsx("input",{type:"text",value:c.billing_city||"",onChange:j=>h("billing_city",j.target.value),className:"input-field",placeholder:"City",disabled:c.billing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"State"}),e.jsx("input",{type:"text",value:c.billing_state||"",onChange:j=>h("billing_state",j.target.value),className:"input-field",placeholder:"WI",maxLength:2,disabled:c.billing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Zip Code"}),e.jsx("input",{type:"text",value:c.billing_zip||"",onChange:j=>h("billing_zip",j.target.value),className:"input-field",placeholder:"53092",disabled:c.billing_same_as_physical==="1"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Phone"}),e.jsx("input",{type:"tel",value:c.phone||"",onChange:j=>h("phone",j.target.value),className:"input-field",placeholder:"262-345-7229"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Fax"}),e.jsx("input",{type:"tel",value:c.fax||"",onChange:j=>h("fax",j.target.value),className:"input-field",placeholder:"262-345-7229"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Website"}),e.jsx("input",{type:"url",value:c.website||"",onChange:j=>h("website",j.target.value),className:"input-field",placeholder:"https://example.com"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Email"}),e.jsx("input",{type:"email",value:c.email||"",onChange:j=>h("email",j.target.value),className:"input-field",placeholder:"contact@example.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Color"}),e.jsx("input",{type:"color",value:c.color||"#99FFFF",onChange:j=>h("color",j.target.value),className:"input-field h-10"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"POS Code"}),e.jsx("select",{value:c.pos_code||"11",onChange:j=>h("pos_code",j.target.value),className:"input-field",children:v.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Facility NPI"}),e.jsx("input",{type:"text",value:c.facility_npi||"",onChange:j=>h("facility_npi",j.target.value),className:"input-field",placeholder:"1811342058"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Tax ID"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("select",{value:c.tax_id_type||"EIN",onChange:j=>h("tax_id_type",j.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",style:{width:"90px"},children:[e.jsx("option",{value:"EIN",children:"EIN"}),e.jsx("option",{value:"SSN",children:"SSN"})]}),e.jsx("input",{type:"text",value:c.federal_ein||"",onChange:j=>h("federal_ein",j.target.value),className:"input-field flex-1",placeholder:"566611885"})]})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Facility Taxonomy"}),e.jsx("input",{type:"text",value:c.facility_taxonomy||"",onChange:j=>h("facility_taxonomy",j.target.value),className:"input-field",placeholder:"101YP2500X"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Attn"}),e.jsx("input",{type:"text",value:c.attn||"",onChange:j=>h("attn",j.target.value),className:"input-field",placeholder:"Kenneth J Nelan"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.billing_location===1,onChange:()=>p("billing_location"),className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Billing Location"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.accepts_assignment===1,onChange:()=>p("accepts_assignment"),className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Accepts Assignment"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.service_location===1,onChange:()=>p("service_location"),className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Service Location"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.primary_business_entity===1,onChange:()=>p("primary_business_entity"),className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Primary Business Entity"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.inactive===1,onChange:()=>p("inactive"),className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Facility Inactive"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(te,{children:"Info"}),e.jsx("textarea",{value:c.info||"",onChange:j=>h("info",j.target.value),className:"input-field",rows:4,placeholder:"Additional information about this facility..."})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"text-red-600",children:"*"})," Required"]}),e.jsxs(Ie.Footer,{children:[e.jsx(Tt,{onClick:y,disabled:u,children:"Cancel"}),e.jsx(Ve,{onClick:w,disabled:u,children:u?"Saving...":d?"Save Changes":"Add Facility"})]})]})})}function zb(){const[n,d]=f.useState([]),[c,o]=f.useState(!0),[u,b]=f.useState(!1),[m,v]=f.useState(null),[h,p]=f.useState({});f.useEffect(()=>{w()},[]);const w=async()=>{try{o(!0);const C=await fetch("/custom/api/settings.php?category=security",{credentials:"include"});if(!C.ok)throw new Error("Failed to fetch settings");const E=await C.json();d(E.settings||[]);const k={};E.settings.forEach(R=>{k[R.setting_key]=R.setting_value}),p(k)}catch(C){console.error("Error fetching settings:",C),v({type:"error",text:"Failed to load security settings"})}finally{o(!1)}},y=(C,E)=>{p(k=>({...k,[C]:E}))},j=async()=>{try{b(!0),v(null);const C=await fetch("/custom/api/settings.php",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({settings:h})}),E=await C.json();if(!C.ok)throw new Error(E.message||"Failed to save settings");v({type:"success",text:"Settings saved successfully!"}),setTimeout(()=>v(null),3e3)}catch(C){console.error("Error saving settings:",C),v({type:"error",text:C.message||"Failed to save settings"})}finally{b(!1)}},N=C=>{const E=C.setting_key,k=h[E]||C.setting_value;return C.setting_type==="boolean"?e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:k==="1"||k===!0,onChange:R=>y(E,R.target.checked?"1":"0"),disabled:!C.is_editable,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}):C.setting_type==="integer"?e.jsx("input",{type:"number",value:k,onChange:R=>y(E,R.target.value),disabled:!C.is_editable,className:"w-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50 text-gray-900",min:"0"}):e.jsx("input",{type:"text",value:k,onChange:R=>y(E,R.target.value),disabled:!C.is_editable,className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50 text-gray-900"})},x=C=>C.split(".").pop().split("_").map(E=>E.charAt(0).toUpperCase()+E.slice(1)).join(" ");return c?e.jsx("div",{className:"glass-card p-12 text-center",children:e.jsx("div",{className:"text-gray-700",children:"Loading security settings..."})}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Security Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure security and authentication parameters"})]}),m&&e.jsx("div",{className:`mb-6 px-4 py-3 rounded-lg border ${m.type==="success"?"bg-green-100/60 border-green-300/50 text-green-700":"bg-red-100/60 border-red-300/50 text-red-700"}`,children:m.text}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/30 backdrop-blur-sm rounded-xl p-6 border border-white/40",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Account Lockout"}),e.jsx("div",{className:"space-y-5",children:n.filter(C=>C.setting_key.includes("login_attempts")||C.setting_key.includes("lockout")).map(C=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("label",{className:"block font-medium text-gray-900 text-sm",children:x(C.setting_key)}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:C.description})]}),e.jsx("div",{className:"flex-shrink-0",children:N(C)})]},C.setting_key))})]}),e.jsxs("div",{className:"bg-white/30 backdrop-blur-sm rounded-xl p-6 border border-white/40",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Password Requirements"}),e.jsx("div",{className:"space-y-5",children:n.filter(C=>C.setting_key.includes("password")).map(C=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("label",{className:"block font-medium text-gray-900 text-sm",children:x(C.setting_key)}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:C.description})]}),e.jsx("div",{className:"flex-shrink-0",children:N(C)})]},C.setting_key))})]}),e.jsxs("div",{className:"bg-white/30 backdrop-blur-sm rounded-xl p-6 border border-white/40",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Session Management"}),e.jsx("div",{className:"space-y-5",children:n.filter(C=>C.setting_key.includes("session")).map(C=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("label",{className:"block font-medium text-gray-900 text-sm",children:x(C.setting_key)}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:C.description})]}),e.jsx("div",{className:"flex-shrink-0",children:N(C)})]},C.setting_key))})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:j,disabled:u,className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-blue-500 text-white font-medium rounded-lg hover:from-blue-700 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:u?"Saving Changes...":"Save Changes"})})]})]})}function Ob(){const[n,d]=f.useState([]),[c,o]=f.useState(!0),[u,b]=f.useState(""),[m,v]=f.useState(""),[h,p]=f.useState("all"),[w,y]=f.useState(!1),[j,N]=f.useState(!1),[x,C]=f.useState({id:null,code:"",category:"Individual Therapy",type:"CPT4",description:"",standard_duration_minutes:50,standard_fee:"",is_active:1,is_addon:0,requires_primary_code:"",sort_order:0}),[E,k]=f.useState(""),[R,L]=f.useState(!1),A=["Individual Therapy","Family Therapy","Group Therapy","Intake","Crisis","Assessment","Case Management","Non-Billable","Other"];f.useEffect(()=>{G()},[]);const G=async()=>{try{o(!0);const U=await fetch("/custom/api/cpt_codes.php",{credentials:"include"});if(!U.ok)throw new Error("Failed to fetch CPT codes");const ae=await U.json();d(ae.cpt_codes||[])}catch(U){b(U.message)}finally{o(!1)}},P=()=>{C({id:null,code:"",category:"Individual Therapy",type:"CPT4",description:"",standard_duration_minutes:50,standard_fee:"",is_active:1,is_addon:0,requires_primary_code:"",sort_order:0}),k(""),y(!0)},T=U=>{C({id:U.id,code:U.code,category:U.category,type:U.type,description:U.description,standard_duration_minutes:U.standard_duration_minutes,standard_fee:U.standard_fee||"",is_active:U.is_active,is_addon:U.is_addon,requires_primary_code:U.requires_primary_code||"",sort_order:U.sort_order}),k(""),N(!0)},xe=async()=>{if(k(""),!x.code.trim()){k("CPT code is required");return}if(!x.description.trim()){k("Description is required");return}try{L(!0);const U=x.id?"update":"create",ae=await fetch("/custom/api/cpt_codes.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:U,...x})}),D=await ae.json();if(!ae.ok||!D.success)throw new Error(D.error||"Failed to save CPT code");await G(),y(!1),N(!1)}catch(U){k(U.message)}finally{L(!1)}},ve=async U=>{if(confirm("Are you sure you want to delete this CPT code? This cannot be undone."))try{const ae=await fetch("/custom/api/cpt_codes.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete",id:U})}),D=await ae.json();if(!ae.ok||!D.success)throw new Error(D.error||"Failed to delete CPT code");await G()}catch(ae){b(ae.message)}},me=async U=>{try{const ae=await fetch("/custom/api/cpt_codes.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",id:U.id,is_active:U.is_active?0:1})}),D=await ae.json();if(!ae.ok||!D.success)throw new Error(D.error||"Failed to update status");await G()}catch(ae){b(ae.message)}},oe=n.filter(U=>{const ae=U.code.toLowerCase().includes(m.toLowerCase())||U.description.toLowerCase().includes(m.toLowerCase()),D=h==="all"||U.category===h;return ae&&D}).sort((U,ae)=>{const D=U.code.toString(),_=ae.code.toString();return D.localeCompare(_,void 0,{numeric:!0})}),H=[...new Set(n.map(U=>U.category))];return c?e.jsx("div",{className:"glass-card p-8",children:e.jsx("div",{className:"text-center text-gray-600",children:"Loading CPT codes..."})}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"CPT Codes"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage billing codes for clinical services"})]}),e.jsx(Ve,{onClick:P,children:"+ Add CPT Code"})]}),u&&e.jsx(tt,{children:u}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search codes or descriptions...",value:m,onChange:U=>v(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsxs("select",{value:h,onChange:U=>p(U.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Categories"}),H.map(U=>e.jsx("option",{value:U,children:U},U))]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Code"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Duration"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Fee"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:oe.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:"No CPT codes found"})}):oe.map(U=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-4 py-3 text-sm font-mono font-semibold text-gray-900",children:[U.code,U.is_addon===1&&e.jsx("span",{className:"ml-2 text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded",children:"Add-on"})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:U.category}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:U.description}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700 text-center",children:[U.standard_duration_minutes," min"]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right font-medium",children:U.standard_fee?`$${parseFloat(U.standard_fee).toFixed(2)}`:""}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>me(U),className:`px-3 py-1 text-xs rounded-full ${U.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:U.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-4 py-3 text-center",children:[e.jsx("button",{onClick:()=>T(U),className:"text-blue-600 hover:text-blue-800 mr-3",children:"Edit"}),e.jsx(us,{onClick:()=>ve(U.id),children:"Delete"})]})]},U.id))})]})}),e.jsx(Ie,{isOpen:w||j,onClose:()=>{y(!1),N(!1)},title:x.id?"Edit CPT Code":"Add CPT Code",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[E&&e.jsx(tt,{children:E}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(te,{children:["CPT Code ",e.jsx(De,{})]}),e.jsx("input",{type:"text",value:x.code,onChange:U=>C({...x,code:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"90834"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Category"}),e.jsx("select",{value:x.category,onChange:U=>C({...x,category:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:A.map(U=>e.jsx("option",{value:U,children:U},U))})]})]}),e.jsxs("div",{children:[e.jsxs(te,{children:["Description ",e.jsx(De,{})]}),e.jsx("input",{type:"text",value:x.description,onChange:U=>C({...x,description:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Psychotherapy 45-50 minutes"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(te,{children:"Standard Duration (minutes)"}),e.jsx("input",{type:"number",value:x.standard_duration_minutes,onChange:U=>C({...x,standard_duration_minutes:parseInt(U.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Standard Fee ($)"}),e.jsx("input",{type:"number",step:"0.01",value:x.standard_fee,onChange:U=>C({...x,standard_fee:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"150.00"})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:x.is_addon===1,onChange:U=>C({...x,is_addon:U.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Add-on Code"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:x.is_active===1,onChange:U=>C({...x,is_active:U.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Active"})]})]}),x.is_addon===1&&e.jsxs("div",{children:[e.jsx(te,{children:"Requires Primary Code"}),e.jsx("input",{type:"text",value:x.requires_primary_code,onChange:U=>C({...x,requires_primary_code:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"90834"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Which primary CPT code is required for this add-on?"})]}),e.jsxs(Ie.Footer,{children:[e.jsx(Tt,{onClick:()=>{y(!1),N(!1)},disabled:R,children:"Cancel"}),e.jsx(Ve,{onClick:xe,disabled:R,children:R?"Saving...":"Save CPT Code"})]})]})})]})}function Lb(){const[n,d]=f.useState([]),[c,o]=f.useState(!0),[u,b]=f.useState(""),[m,v]=f.useState(""),[h,p]=f.useState("all"),[w,y]=f.useState(!1),[j,N]=f.useState(!1),[x,C]=f.useState({id:null,code:"",description:"",modifier_type:"clinician",is_active:1,sort_order:0}),[E,k]=f.useState(""),[R,L]=f.useState(!1),A=[{value:"telehealth",label:"Telehealth"},{value:"clinician",label:"Clinician Type"},{value:"administrative",label:"Administrative"},{value:"mh-specific",label:"MH-Specific"}];f.useEffect(()=>{G()},[]);const G=async()=>{try{o(!0);const H=await fetch("/custom/api/billing_modifiers.php",{credentials:"include"});if(!H.ok)throw new Error("Failed to fetch billing modifiers");const U=await H.json();d(U.modifiers||[])}catch(H){b(H.message)}finally{o(!1)}},P=()=>{C({id:null,code:"",description:"",modifier_type:"clinician",is_active:1,sort_order:0}),k(""),y(!0)},T=H=>{C({id:H.id,code:H.code,description:H.description,modifier_type:H.modifier_type,is_active:H.is_active,sort_order:H.sort_order}),k(""),N(!0)},xe=async()=>{if(k(""),!x.code.trim()){k("Modifier code is required");return}if(!x.description.trim()){k("Description is required");return}try{L(!0);const H=x.id?"update":"create",U=await fetch("/custom/api/billing_modifiers.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:H,...x})}),ae=await U.json();if(!U.ok||!ae.success)throw new Error(ae.error||"Failed to save modifier");await G(),y(!1),N(!1)}catch(H){k(H.message)}finally{L(!1)}},ve=async H=>{if(confirm("Are you sure you want to delete this modifier? This cannot be undone."))try{const U=await fetch("/custom/api/billing_modifiers.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete",id:H})}),ae=await U.json();if(!U.ok||!ae.success)throw new Error(ae.error||"Failed to delete modifier");await G()}catch(U){b(U.message)}},me=async H=>{try{const U=await fetch("/custom/api/billing_modifiers.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",id:H.id,is_active:H.is_active?0:1})}),ae=await U.json();if(!U.ok||!ae.success)throw new Error(ae.error||"Failed to update status");await G()}catch(U){b(U.message)}},oe=n.filter(H=>{const U=H.code.toLowerCase().includes(m.toLowerCase())||H.description.toLowerCase().includes(m.toLowerCase()),ae=h==="all"||H.modifier_type===h;return U&&ae});return c?e.jsx("div",{className:"glass-card p-8",children:e.jsx("div",{className:"text-center text-gray-600",children:"Loading billing modifiers..."})}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Billing Modifiers"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage CPT code modifiers for billing"})]}),e.jsx(Ve,{onClick:P,children:"+ Add Modifier"})]}),u&&e.jsx(tt,{children:u}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search modifiers...",value:m,onChange:H=>v(H.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsxs("select",{value:h,onChange:H=>p(H.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Types"}),A.map(H=>e.jsx("option",{value:H.value,children:H.label},H.value))]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Code"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:oe.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-4 py-8 text-center text-gray-500",children:"No modifiers found"})}):oe.map(H=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-mono font-semibold text-gray-900",children:H.code}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${H.modifier_type==="telehealth"?"bg-blue-100 text-blue-700":H.modifier_type==="clinician"?"bg-green-100 text-green-700":H.modifier_type==="administrative"?"bg-purple-100 text-purple-700":"bg-orange-100 text-orange-700"}`,children:A.find(U=>U.value===H.modifier_type)?.label})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:H.description}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>me(H),className:`px-3 py-1 text-xs rounded-full ${H.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:H.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-4 py-3 text-center",children:[e.jsx("button",{onClick:()=>T(H),className:"text-blue-600 hover:text-blue-800 mr-3",children:"Edit"}),e.jsx(us,{onClick:()=>ve(H.id),children:"Delete"})]})]},H.id))})]})}),e.jsx(Ie,{isOpen:w||j,onClose:()=>{y(!1),N(!1)},title:x.id?"Edit Modifier":"Add Modifier",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[E&&e.jsx(tt,{children:E}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(te,{children:["Modifier Code ",e.jsx(De,{})]}),e.jsx("input",{type:"text",value:x.code,onChange:H=>C({...x,code:H.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"HO",maxLength:"10"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Type"}),e.jsx("select",{value:x.modifier_type,onChange:H=>C({...x,modifier_type:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:A.map(H=>e.jsx("option",{value:H.value,children:H.label},H.value))})]})]}),e.jsxs("div",{children:[e.jsxs(te,{children:["Description ",e.jsx(De,{})]}),e.jsx("input",{type:"text",value:x.description,onChange:H=>C({...x,description:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Master's Level Therapist"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:x.is_active===1,onChange:H=>C({...x,is_active:H.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Active"})]})}),e.jsxs(Ie.Footer,{children:[e.jsx(Tt,{onClick:()=>{y(!1),N(!1)},disabled:R,children:"Cancel"}),e.jsx(Ve,{onClick:xe,disabled:R,children:R?"Saving...":"Save Modifier"})]})]})})]})}function Lf(){const[n,d]=f.useState(null),[c,o]=f.useState("replace_all"),[u,b]=f.useState(!1),[m,v]=f.useState(null),[h,p]=f.useState(null),[w,y]=f.useState(null),j=x=>{const C=x.target.files[0];C&&(d(C),p(null),y(null))},N=async()=>{if(!n){p("Please select a file first");return}b(!0),p(null),v("Uploading file...");try{const x=new FormData;x.append("icd10_file",n),x.append("action",c);const C=await fetch("/custom/api/import_icd10_codes.php",{method:"POST",body:x,credentials:"include"}),E=await C.json();if(!C.ok)throw new Error(E.message||E.error||"Import failed");v(null),y(E),d(null),document.getElementById("file-input").value=""}catch(x){console.error("Import error:",x),p(x.message||"Import failed. Please try again."),v(null)}finally{b(!1)}};return e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:" ICD-10 Code Import"}),e.jsx("p",{className:"text-gray-600",children:"Import ICD-10-CM diagnosis codes from CMS (Centers for Medicare & Medicaid Services)"})]}),e.jsxs("div",{className:"card-main mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:" Instructions"}),e.jsxs("div",{className:"card-inner space-y-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"1. Download ICD-10-CM File"}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["Visit: ",e.jsx("a",{href:"https://www.cms.gov/medicare/coding-billing/icd-10-codes",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"https://www.cms.gov/medicare/coding-billing/icd-10-codes"})]}),e.jsx("p",{className:"text-gray-600",children:"Download the current year's ICD-10-CM Code Descriptions (tab-delimited text file)"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"2. Select Import Action"}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("strong",{children:"Replace All:"})," Deletes existing codes and imports fresh (recommended for annual updates)",e.jsx("br",{}),e.jsx("strong",{children:"Update Only:"})," Updates existing codes and adds new ones (preserves custom codes)"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"3. Upload File"}),e.jsx("p",{className:"text-gray-600",children:'Select the downloaded file and click "Import Codes". This may take 1-2 minutes to process ~72,000 codes.'})]})]})]}),e.jsxs("div",{className:"card-main mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Import Settings"}),e.jsxs("div",{className:"card-inner space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Import Action"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 border-2 border-gray-300 rounded-lg cursor-pointer hover:bg-blue-50 hover:border-blue-300 transition-colors",children:[e.jsx("input",{type:"radio",name:"action",value:"replace_all",checked:c==="replace_all",onChange:x=>o(x.target.value),disabled:u,className:"w-4 h-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Replace All Codes"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Deletes all existing ICD-10 codes and imports fresh (recommended)"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 border-2 border-gray-300 rounded-lg cursor-pointer hover:bg-blue-50 hover:border-blue-300 transition-colors",children:[e.jsx("input",{type:"radio",name:"action",value:"update_only",checked:c==="update_only",onChange:x=>o(x.target.value),disabled:u,className:"w-4 h-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Update Only"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Updates existing codes and adds new ones (preserves custom codes)"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Select ICD-10-CM File"}),e.jsx("input",{id:"file-input",type:"file",accept:".txt,.csv,.tsv",onChange:j,disabled:u,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm disabled:bg-gray-100 disabled:cursor-not-allowed"}),n&&e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",e.jsx("span",{className:"font-semibold",children:n.name})," (",(n.size/1024/1024).toFixed(2)," MB)"]})]}),e.jsx("button",{onClick:N,disabled:!n||u,className:"w-full px-6 py-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-blue-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all shadow-lg text-lg",children:u?e.jsxs("span",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"}),"Importing Codes..."]}):" Import ICD-10 Codes"})]})]}),m&&e.jsx("div",{className:"card-main mb-6 bg-blue-50 border-blue-300",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-blue-600 border-t-transparent rounded-full"}),e.jsx("span",{className:"text-blue-900 font-semibold",children:m})]})}),h&&e.jsx("div",{className:"card-main mb-6 bg-red-50 border-red-300",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-900 mb-1",children:"Import Failed"}),e.jsx("p",{className:"text-red-800",children:h})]})]})}),w&&e.jsxs("div",{className:"card-main bg-green-50 border-green-300",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("span",{className:"text-3xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-green-900 mb-1",children:"Import Successful!"}),e.jsx("p",{className:"text-green-800",children:w.message})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-2xl font-bold text-green-700",children:w.imported.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"Imported"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:w.total_active.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Active"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:w.skipped.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"Skipped"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-2xl font-bold text-red-700",children:w.errors.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"Errors"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-white rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:" Next Steps:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-700 space-y-1",children:[e.jsx("li",{children:"ICD-10 codes are now available for diagnosis notes"}),e.jsx("li",{children:"Test by creating a diagnosis note and searching for codes"}),e.jsx("li",{children:"Codes update annually on October 1st - re-import then"})]})]})]}),e.jsx("div",{className:"card-main bg-yellow-50 border-yellow-300 mt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:"Important Notes"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-yellow-800 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"File Size:"})," ICD-10 files are typically 10-15 MB with ~72,000 codes"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Import Time:"})," Expect 1-2 minutes to process all codes"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Backup:"}),' If using "Replace All", existing custom codes will be deleted']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Annual Updates:"})," ICD-10 codes are updated every October 1st"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Admin Only:"})," This function requires admin privileges"]})]})]})]})})]})}function Ub(){const[n,d]=f.useState({supervision_require_cosign:!1}),[c,o]=f.useState(!0),[u,b]=f.useState(!1),[m,v]=f.useState(null),[h,p]=f.useState(null);f.useEffect(()=>{w()},[]);const w=async()=>{try{o(!0);const N=await fetch("/custom/api/settings.php?category=supervision",{credentials:"include"});if(!N.ok)throw new Error("Failed to fetch settings");const x=await N.json(),C={};(x.settings||[]).forEach(E=>{C[E.setting_key]=E.setting_value==="1"||E.setting_value==="true"}),d(E=>({...E,...C})),v(null)}catch(N){console.error("Error fetching settings:",N),v(N.message)}finally{o(!1)}},y=async()=>{try{b(!0),v(null),p(null);const N=await fetch("/custom/api/settings.php",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:{"supervision.require_cosign":n.supervision_require_cosign?"1":"0"}})}),x=await N.json();if(!N.ok)throw new Error(x.error||"Failed to save settings");p("Settings saved successfully"),setTimeout(()=>p(null),3e3)}catch(N){console.error("Error saving settings:",N),v(N.message)}finally{b(!1)}},j=N=>{d(x=>({...x,[N]:!x[N]}))};return c?e.jsx("div",{className:"glass-card p-6",children:e.jsx("div",{className:"text-center text-gray-600",children:"Loading settings..."})}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Clinical Settings"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Configure clinical documentation and supervision settings"}),m&&e.jsx(tt,{className:"mb-4",children:m}),h&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm",children:h}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 pb-2 border-b border-gray-200",children:"Supervision Settings"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("label",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:n.supervision_require_cosign||!1,onChange:()=>j("supervision_require_cosign"),className:"mt-1 w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"block font-medium text-gray-800",children:"Require Supervisor Co-signature on Notes"}),e.jsx("span",{className:"block text-sm text-gray-600 mt-1",children:"When enabled, clinical notes from providers who have assigned supervisors will require their supervisor to co-sign before the note is fully locked. The provider can still sign and lock their portion, but a supervisor review will be required."})]})]})})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:e.jsx(Ve,{onClick:y,disabled:u,children:u?"Saving...":"Save Settings"})})]})}function Bb(){return e.jsxs("div",{className:"glass-card p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"About SanctumEMHR EMHR"}),e.jsxs("div",{className:"flex items-center justify-between mb-8 pb-6 border-b border-white/30",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-48 h-48 backdrop-blur-xl bg-white/40 rounded-2xl flex items-center justify-center p-3 shadow-lg",children:e.jsx("img",{src:"/app/SanctumLogo.png",alt:"SanctumEMHR Logo",className:"w-full h-full object-contain"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:"SanctumEMHR"}),e.jsx("p",{className:"text-lg text-gray-700 mt-1",children:"Electronic Mental Health Records"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2 italic",children:"Where modern design meets clinical insight"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-900 font-semibold",children:"Kenneth J. Nelan"}),e.jsx("p",{className:"text-gray-700 mt-1",children:"Sacred Wandering"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Version Information"}),e.jsxs("div",{className:"bg-white/40 backdrop-blur-sm rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Version:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:"0.3.0-alpha"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Release Stage:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:"Alpha Testing"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Build Date:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]})]}),e.jsxs("div",{className:"bg-blue-50/60 backdrop-blur-sm rounded-lg p-6 border border-blue-200/50",children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-3",children:"What is EMHR?"}),e.jsx("div",{className:"mb-4 pb-4 border-b border-blue-200/30",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"SanctumEMHR is a purpose-built Electronic Mental Health Records (EMHR) system designed specifically for outpatient mental health practices. Combining modern design principles with specialized clinical functionality, SanctumEMHR streamlines client management, appointment scheduling, clinical documentation, and billing workflowsall within a beautiful, intuitive interface."})}),e.jsxs("p",{className:"text-gray-700 leading-relaxed mb-4",children:[e.jsx("strong",{className:"text-blue-900",children:"EMHR (Electronic Mental Health Records)"})," is a term we've introduced to distinguish mental health-specific documentation systems from general medical EMRs. While EMRs focus on physical health, EMHRs are purpose-built for the unique workflows, documentation requirements, and clinical needs of mental health and behavioral health practices."]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"SanctumEMHR represents a new generation of EMHR systems designed from the ground up for outpatient mental health providers, combining modern UX with specialized clinical functionality."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Current Features"}),e.jsx("div",{className:"bg-white/40 backdrop-blur-sm rounded-lg p-4",children:e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Client management with comprehensive demographics"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Calendar with day/week/month views"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Appointment creation and scheduling"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Insurance and billing information tracking"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Guardian/related persons management"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Modern glassmorphism UI design"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"HIPAA-compliant security and encryption"})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"System Information"}),e.jsxs("div",{className:"bg-white/40 backdrop-blur-sm rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Frontend Framework:"}),e.jsx("span",{className:"text-gray-900",children:"React 18 + Vite"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Styling:"}),e.jsx("span",{className:"text-gray-900",children:"Tailwind CSS v4"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Authentication:"}),e.jsx("span",{className:"text-gray-900",children:"Session-based (PHP)"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Database:"}),e.jsx("span",{className:"text-gray-900",children:"MySQL/MariaDB"})]})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50/80 to-purple-50/80 backdrop-blur-sm rounded-lg p-6 border border-white/50",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 font-semibold text-lg",children:"SanctumEMHR is Copyright  2026 Sacred Wandering"}),e.jsx("p",{className:"text-gray-700 font-medium mt-1",children:"Proprietary and Confidential"})]}),e.jsxs("div",{className:"pt-3 border-t border-white/50",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"This software is licensed for authorized use only."}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Unauthorized copying, modification, distribution, or use is strictly prohibited."})]})]})})]})]})}function Hb(){const[n,d]=f.useState("calendar-settings"),[c,o]=f.useState({system:!0,clinical:!0,scheduling:!0,billing:!0,communications:!0,organization:!0}),u=[{id:"system",label:"System",icon:"",sections:[{id:"security",label:"Security",available:!0},{id:"appearance",label:"Appearance",available:!1},{id:"features",label:"Features",available:!1}]},{id:"clinical",label:"Documentation",icon:"",sections:[{id:"clinical-settings",label:"Clinical Settings",available:!0},{id:"reference-lists",label:"Reference Lists",available:!0},{id:"document-categories",label:"Document Categories",available:!0},{id:"icd10-codes",label:"ICD-10 Codes",available:!0}]},{id:"scheduling",label:"Calendar",icon:"",sections:[{id:"calendar-settings",label:"Calendar Settings",available:!0}]},{id:"billing",label:"Billing",icon:"",sections:[{id:"cpt-codes",label:"CPT Codes",available:!0},{id:"billing-modifiers",label:"Billing Modifiers",available:!0},{id:"billing-settings",label:"Billing Settings",available:!1},{id:"payment-methods",label:"Payment Methods",available:!1}]},{id:"communications",label:"Communications",icon:"",sections:[{id:"sms-settings",label:"SMS Settings",available:!1},{id:"email-settings",label:"Email Settings",available:!1}]},{id:"organization",label:"Organization",icon:"",sections:[{id:"facilities",label:"Facilities",available:!0},{id:"users",label:"Users",available:!0}]}],b=m=>{o(v=>({...v,[m]:!v[m]}))};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"glass-card p-6 mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Settings"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage system configuration and preferences"})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-72 flex-shrink-0",children:e.jsx("div",{className:"glass-card p-4",children:e.jsxs("nav",{className:"space-y-1",children:[u.map(m=>e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>b(m.id),className:"w-full flex items-center justify-between px-3 py-2 text-label text-sm hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:m.icon}),e.jsx("span",{children:m.label})]}),e.jsx("svg",{className:`w-4 h-4 transition-transform ${c[m.id]?"":"rotate-90"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),!c[m.id]&&e.jsx("div",{className:"ml-4 mt-1 space-y-1",children:m.sections.map(v=>e.jsxs("button",{onClick:()=>v.available&&d(v.id),disabled:!v.available,className:`w-full text-left px-4 py-2 rounded-lg transition-colors text-sm ${n===v.id?"bg-blue-600 text-white font-medium":v.available?"hover:bg-gray-100 text-gray-700":"text-gray-400 cursor-not-allowed"}`,children:[v.label,!v.available&&e.jsx("span",{className:"text-xs ml-2",children:"(Soon)"})]},v.id))})]},m.id)),e.jsx("div",{className:"border-t border-gray-200 my-2"}),e.jsxs("button",{onClick:()=>d("about"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors text-sm flex items-center gap-2 ${n==="about"?"bg-blue-600 text-white font-medium":"hover:bg-gray-100 text-gray-700"}`,children:[e.jsx("span",{children:""}),e.jsx("span",{children:"About"})]})]})})}),e.jsxs("div",{className:"flex-1",children:[n==="security"&&e.jsx(zb,{}),n==="calendar-settings"&&e.jsx(wb,{}),n==="reference-lists"&&e.jsx(kb,{}),n==="document-categories"&&e.jsx(Cb,{}),n==="icd10-codes"&&e.jsx(Lf,{}),n==="clinical-settings"&&e.jsx(Ub,{}),n==="cpt-codes"&&e.jsx(Ob,{}),n==="billing-modifiers"&&e.jsx(Lb,{}),n==="facilities"&&e.jsx(Ab,{}),n==="users"&&e.jsx(Eb,{}),n==="about"&&e.jsx(Bb,{}),!["security","calendar-settings","reference-lists","document-categories","icd10-codes","clinical-settings","cpt-codes","billing-modifiers","facilities","users","about"].includes(n)&&e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx("div",{className:"text-gray-700 text-lg font-semibold",children:u.flatMap(m=>m.sections).find(m=>m.id===n)?.label}),e.jsx("p",{className:"text-gray-600 mt-2",children:"This section is coming soon"})]})]})]})]})}const qb=async()=>{try{return await Be("/custom/api/notes/pending_supervisor_review.php",{credentials:"include"})}catch(n){throw console.error("Error fetching pending reviews:",n),n}},Fb=async()=>{try{return await Be("/custom/api/notes/my_pending_notes.php",{credentials:"include"})}catch(n){throw console.error("Error fetching my pending notes:",n),n}};function nr(){const n=Zs(),[d,c]=f.useState(null),[o,u]=f.useState([]),[b,m]=f.useState(!0);return f.useEffect(()=>{async function v(){try{const h=ar();if(!h){n("/");return}let p=h.fullName||h.username||"User",w=p.substring(0,2).toUpperCase(),y=h.admin||!1,j=h.id,N=!1,x=!1,C=!1,E="user";try{const L=await Q0();if(L){L.fullName&&(p=L.fullName),L.admin!==void 0&&(y=L.admin),L.id&&(j=L.id),N=L.isSupervisor||!1,x=L.isSocialWorker||!1,C=L.isProvider||!1,E=L.userType||"user";const A=p.trim().split(/\s+/);A.length>1?w=(A[0][0]+A[A.length-1][0]).toUpperCase():w=p.substring(0,2).toUpperCase()}}catch(L){console.log("Could not verify session, using cached data:",L),n("/");return}let k="user";y?k="admin":N?k="supervisor":x?k="social_worker":C&&(k="provider");const R=[];y&&R.push("admin","view_all_clients","edit_all_clients","view_all_notes"),N&&R.push("view_supervisee_clients","view_supervisee_notes"),C&&R.push("view_own_clients","edit_own_clients","view_own_notes","create_clinical_notes"),x&&R.push("view_assigned_clients","edit_demographics","create_case_notes"),c({id:j,name:p,initials:w,role:k,userType:E,isAdmin:y,isSupervisor:N,isSocialWorker:x,isProvider:C,permissions:R,unreadMessages:0});try{const L=new Date,A=L.getFullYear(),G=String(L.getMonth()+1).padStart(2,"0"),P=String(L.getDate()).padStart(2,"0"),T=`${A}-${G}-${P}`,xe=await Go(T,T);u(xe.appointments||[])}catch(L){console.error("Failed to load today's appointments:",L),u([])}m(!1)}catch(h){console.error("Error loading dashboard data:",h),n("/")}}v()},[n]),{user:d,appointments:o,loading:b}}function Gb({isOpen:n,onClose:d,onSave:c,initialDate:o,initialTime:u,categories:b,block:m}){const{user:v}=nr(),[h,p]=f.useState(!1),[w,y]=f.useState(null),[j,N]=f.useState(null),[x,C]=f.useState(null),[E,k]=f.useState(""),[R,L]=f.useState(o||new Date().toISOString().split("T")[0]),[A,G]=f.useState(u||"09:00"),[P,T]=f.useState(""),[xe,ve]=f.useState(50),[me,oe]=f.useState(""),[H,U]=f.useState(!1),[ae,D]=f.useState({mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1}),[_,M]=f.useState("1"),[Q,le]=f.useState("count"),[ge,z]=f.useState(10),[B,q]=f.useState(""),[X,W]=f.useState(!1),[K,ie]=f.useState("single"),[we,ke]=f.useState(null),J=[30,50,90,240,480];f.useEffect(()=>{o&&L(o),u&&G(u)},[o,u]),f.useEffect(()=>{m&&n&&(k(m.categoryId||""),L(m.eventDate||""),G(m.startTime?m.startTime.substring(0,5):""),ve(m.duration||50),oe(m.comments||""),m.isRecurring&&m.recurrenceId?(W(!0),ke(m.recurrenceId),ie("single")):(W(!1),ke(null)))},[m,n]),f.useEffect(()=>{b&&b.length>0&&!E&&(k(b[0].id),b[0].defaultDuration>0&&ve(b[0].defaultDuration/60))},[b]),f.useEffect(()=>{if(A&&P){const[de,je]=A.split(":").map(Number),[Fe,st]=P.split(":").map(Number),Ct=de*60+je,ue=Fe*60+st-Ct;ue>0&&ve(ue)}},[A,P]);const he=async(de,je=!1)=>{if(de.preventDefault(),p(!0),y(null),N(null),C(null),!E){y("Please select an availability type"),p(!1);return}if(H){if(Object.values(ae).filter(Boolean).length===0){y("Please select at least one day for recurrence"),p(!1);return}if(Q==="date"&&!B){y("Please select an end date for recurrence"),p(!1);return}if(Q==="count"&&(!ge||ge<1)){y("Please enter a valid number of occurrences"),p(!1);return}}try{const Fe=A.includes(":")?`${A}:00`:`${A}:00:00`,st={patientId:null,providerId:v.id,categoryId:parseInt(E),eventDate:R,startTime:Fe,duration:parseInt(xe),title:b.find(Y=>Y.id===parseInt(E))?.name||"Blocked",comments:me,room:"",apptstatus:m?m.apptstatus:"-",overrideAvailability:je};X&&(st.seriesUpdate={scope:K,recurrenceId:we}),H&&!m&&(st.recurrence={enabled:!0,days:ae,interval:parseInt(_),endType:Q,endCount:Q==="count"?parseInt(ge):null,endDate:Q==="date"?B:null}),console.log(m?"Updating availability block:":"Creating availability block:",st);const Ct=m?await Tf(m.id,st):await Af(st);Ct.success?(N(m?"Availability updated successfully!":"Availability saved successfully!"),setTimeout(()=>{Me()},1e3)):y(Ct.message||`Failed to ${m?"update":"create"} block`)}catch(Fe){console.error(`Failed to ${m?"update":"create"} block:`,Fe),Fe.conflicts?C({conflicts:Fe.conflicts,totalOccurrences:Fe.totalOccurrences,conflictCount:Fe.conflictCount}):y(Fe.message||`Failed to ${m?"update":"create"} block`)}finally{p(!1)}},Ee=()=>{C(null),he({preventDefault:()=>{}},!0)},Te=async()=>{if(!m)return;let de="Are you sure you want to delete this availability entry?";if(X&&(K==="all"?de="Are you sure you want to delete ALL occurrences in this recurring series?":K==="future"&&(de="Are you sure you want to delete this and all future occurrences?")),!!confirm(de)){p(!0),y(null),N(null);try{const je=X?{scope:K,recurrenceId:we}:null,Fe=await Mf(m.id,je);if(Fe.success){const st=X&&K!=="single"?`${Fe.deletedCount||"Multiple"} entries deleted successfully!`:"Availability deleted successfully!";N(st),setTimeout(()=>{Me()},1e3)}else y(Fe.message||"Failed to delete block")}catch(je){console.error("Failed to delete block:",je),y(je.message||"Failed to delete block")}finally{p(!1)}}},Me=()=>{k(""),oe(""),y(null),N(null),C(null),U(!1),D({mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1}),M("1"),le("count"),z(10),q(""),W(!1),ie("single"),ke(null),d(),c&&c()};return n?Ho.createPortal(e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/60 backdrop-blur-md transition-opacity",onClick:Me,"aria-hidden":"true"}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-y-auto",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",maxWidth:"48rem",maxHeight:"90vh",zIndex:10},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-200 px-8 pt-6 bg-gradient-to-r from-purple-50 to-pink-50",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:m?"Edit Availability":"Add Availability"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m?"Update or remove this availability entry":"Define when you are available or unavailable"})]}),e.jsx("button",{onClick:Me,className:"p-2 hover:bg-white/80 rounded-xl transition-all hover:scale-110",disabled:h,children:e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"px-8 pb-8",children:[x&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-700 font-bold mb-2",children:"Scheduling Conflicts Detected"}),e.jsxs("p",{className:"text-red-600 text-sm mb-3",children:[x.conflictCount," of ",x.totalOccurrences," recurring blocks have conflicts:"]}),e.jsx("div",{className:"max-h-48 overflow-y-auto mb-4 space-y-2",children:x.conflicts.map((de,je)=>e.jsxs("div",{className:"bg-white border border-red-200 rounded p-2 text-sm",children:[e.jsxs("div",{className:"font-medium text-red-700",children:[new Date(de.date).toLocaleDateString()," at ",de.time]}),e.jsx("div",{className:"text-red-600",children:de.reason})]},je))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:Ee,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors",children:"Create Anyway (Skip Conflicts)"}),e.jsx("button",{type:"button",onClick:()=>C(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-medium rounded-lg transition-colors",children:"Cancel"})]})]})]})}),w&&e.jsxs(tt,{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("span",{children:w})]}),j&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 border-l-4 border-green-500 rounded-lg text-green-700 flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{children:j})]}),X&&e.jsx("div",{className:"mb-6 p-4 bg-purple-50 border-l-4 border-purple-500 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-purple-700 font-medium mb-2",children:"Recurring Availability Series"}),e.jsx("p",{className:"text-purple-600 text-sm mb-3",children:"This is part of a recurring series. Choose what to update:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"seriesScope",value:"single",checked:K==="single",onChange:de=>ie(de.target.value),className:"text-purple-600 focus:ring-purple-500"}),e.jsxs("span",{className:"text-sm text-purple-700",children:["Just this occurrence (",new Date(R).toLocaleDateString(),")"]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"seriesScope",value:"future",checked:K==="future",onChange:de=>ie(de.target.value),className:"text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-purple-700",children:"This and all future occurrences"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"seriesScope",value:"all",checked:K==="all",onChange:de=>ie(de.target.value),className:"text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-purple-700",children:"All occurrences in the series"})]})]})]})]})}),e.jsxs("form",{onSubmit:he,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(te,{children:["Reason ",e.jsx(De,{})]}),e.jsxs("select",{value:E,onChange:de=>k(de.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Reason"}),b.map(de=>e.jsx("option",{value:de.id,children:de.name},de.id))]})]}),e.jsxs("div",{children:[e.jsxs(te,{children:["Date ",e.jsx(De,{})]}),e.jsx("input",{type:"date",value:R,onChange:de=>L(de.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(te,{children:["Start Time ",e.jsx(De,{})]}),e.jsx("input",{type:"time",value:A,onChange:de=>G(de.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx(te,{children:"End Time"}),e.jsx("input",{type:"time",value:P,onChange:de=>T(de.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white"})]})]}),e.jsxs("div",{children:[e.jsxs(te,{children:["Duration (minutes) ",e.jsx(De,{})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3 items-center",children:[J.map(de=>e.jsx("button",{type:"button",onClick:()=>ve(de),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${xe===de?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:de>=60?`${de/60}h`:`${de}m`},de)),e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(12-hours = 720 minutes)"})]}),e.jsx("input",{type:"number",value:xe,onChange:de=>ve(de.target.value),min:"5",step:"5",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",required:!0})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx("input",{type:"checkbox",checked:H,onChange:de=>U(de.target.checked),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),"Make this recurring"]})}),H&&e.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-purple-200",children:[e.jsxs("div",{children:[e.jsxs(te,{children:["Repeat on ",e.jsx(De,{})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"sun",label:"Sun"},{key:"mon",label:"Mon"},{key:"tue",label:"Tue"},{key:"wed",label:"Wed"},{key:"thu",label:"Thu"},{key:"fri",label:"Fri"},{key:"sat",label:"Sat"}].map(de=>e.jsx("button",{type:"button",onClick:()=>D(je=>({...je,[de.key]:!je[de.key]})),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${ae[de.key]?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:de.label},de.key))})]}),e.jsxs("div",{children:[e.jsxs(te,{children:["Frequency ",e.jsx(De,{})]}),e.jsxs("select",{value:_,onChange:de=>M(de.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",children:[e.jsx("option",{value:"1",children:"Weekly"}),e.jsx("option",{value:"2",children:"Every 2 weeks"}),e.jsx("option",{value:"3",children:"Every 3 weeks"}),e.jsx("option",{value:"4",children:"Every 4 weeks"})]})]}),e.jsxs("div",{children:[e.jsxs(te,{children:["Ends ",e.jsx(De,{})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:Q==="count",onChange:()=>le("count"),className:"text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"checkbox-label",children:"After"}),e.jsx("input",{type:"number",value:ge,onChange:de=>z(parseInt(de.target.value)||1),disabled:Q!=="count",min:"1",max:"52",className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm disabled:bg-gray-100 focus:ring-2 focus:ring-purple-500"}),e.jsx("span",{className:"checkbox-label",children:"occurrences"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:Q==="date",onChange:()=>le("date"),className:"text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"checkbox-label",children:"On"}),e.jsx("input",{type:"date",value:B,onChange:de=>q(de.target.value),disabled:Q!=="date",className:"px-2 py-1 border border-gray-300 rounded text-sm disabled:bg-gray-100 focus:ring-2 focus:ring-purple-500"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Notes (Optional)"}),e.jsx("textarea",{value:me,onChange:de=>oe(de.target.value),rows:3,placeholder:"Add any notes about this availability entry...",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white"})]}),e.jsxs("div",{className:"flex gap-4 pt-6 mt-6 border-t border-gray-200",children:[m&&e.jsx("button",{type:"button",onClick:Te,className:"px-6 py-3 bg-red-100 hover:bg-red-200 text-red-700 font-semibold rounded-xl transition-all hover:shadow-md",disabled:h,children:"Delete"}),e.jsx("button",{type:"button",onClick:Me,className:"flex-1 px-6 py-3 bg-gray-100 hover:bg-gray-200 text-label rounded-xl transition-all hover:shadow-md",disabled:h,children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold rounded-xl transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",disabled:h,children:h?m?"Updating...":"Saving...":m?"Update Availability":"Save Availability"})]})]})]})]})]}),document.body):null}function Yb(){const[n,d]=f.useState(new Date),[c,o]=f.useState("week"),[u,b]=f.useState([]),[m,v]=f.useState([]),[h,p]=f.useState(!0),[w,y]=f.useState(!1),[j,N]=f.useState(null),[x,C]=f.useState(null),[E,k]=f.useState({startHour:8,endHour:17,interval:15});f.useEffect(()=>{R(),L()},[]),f.useEffect(()=>{A()},[n,c]);const R=async()=>{try{const q=await Fo();q.settings&&k({startHour:q.settings.startHour||8,endHour:q.settings.endHour||17,interval:q.settings.interval||15})}catch(q){console.error("Failed to load calendar settings:",q)}},L=async()=>{try{const q=await Df(null,"client");v(q.categories||[])}catch(q){console.error("Failed to load availability categories:",q)}},A=async()=>{p(!0);try{const q=ar();if(console.log("[CalendarAvailability] Current user:",q),!q||!q.id){console.error("No current user found"),b([]),p(!1);return}const{startDate:X,endDate:W}=G();console.log("[CalendarAvailability] Date range:",{startDate:X,endDate:W}),console.log("[CalendarAvailability] Fetching for provider ID:",q.id);const K=await Go(X,W,"all");console.log("[CalendarAvailability] API response:",K),console.log("[CalendarAvailability] Total appointments:",K.appointments?.length);const ie=K.appointments.filter(we=>{const ke=we.categoryType!=="client",J=we.providerId==q.id;return console.log("[CalendarAvailability] Checking appointment:",{id:we.id,categoryType:we.categoryType,providerId:we.providerId,currentUserId:q.id,isAvailabilityBlock:ke,isCurrentProvider:J}),ke&&J});console.log("[CalendarAvailability] Filtered blocks:",ie),b(ie)}catch(q){console.error("Failed to load availability blocks:",q)}finally{p(!1)}},G=()=>{const q=new Date(n),X=new Date(n);if(c==="week"){const W=q.getDay(),K=q.getDate()-W;q.setDate(K),q.setHours(0,0,0,0),X.setDate(q.getDate()+6),X.setHours(23,59,59,999)}else c==="day"&&(q.setHours(0,0,0,0),X.setHours(23,59,59,999));return{startDate:q.toISOString().split("T")[0],endDate:X.toISOString().split("T")[0]}},P=()=>{const q=new Date(n),X=q.getDay(),W=q.getDate()-X;return q.setDate(W),q.setHours(0,0,0,0),Array.from({length:7},(K,ie)=>new Date(q.getTime()+ie*24*60*60*1e3))},T=(q,X,W)=>{const K=q.toISOString().split("T")[0],ie=`${X.toString().padStart(2,"0")}:${W.toString().padStart(2,"0")}`;C(null),N({date:K,time:ie}),y(!0)},xe=(q,X)=>{X.stopPropagation(),C(q),N(null),y(!0)},ve=()=>{y(!1),C(null),A()},me=()=>{const q=new Date(n);c==="week"?q.setDate(q.getDate()-7):q.setDate(q.getDate()-1),d(q)},oe=()=>{const q=new Date(n);c==="week"?q.setDate(q.getDate()+7):q.setDate(q.getDate()+1),d(q)},H=()=>{d(new Date)},U=()=>{if(c==="week"){const q=P(),X=q[0],W=q[6];return`${X.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${W.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}else return n.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})},{startHour:ae,endHour:D,interval:_}=E,M=60/_,le=(D-ae)*M,ge=Array.from({length:le},(q,X)=>{const W=Math.floor(X/M)+ae,K=X%M*_;return{hour:W,minutes:K}}),z=q=>{const[X,W]=q.startTime.split(":").map(Number),K=X*60+W,ie=ae*60,ke=(K-ie)/_,J=60,he=ke*J,Me=(q.duration||0)/_*J;return{top:he,height:Me}},B=q=>{const X=q.toISOString().split("T")[0];return u.filter(W=>W.eventDate===X)};return e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Manage My Availability"}),e.jsx("p",{className:"text-gray-600",children:"Set your availability for vacation, meetings, lunch breaks, in-office hours, and more"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:me,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:oe,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsx("button",{onClick:H,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Today"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:U()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>o("day"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="day"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Day"}),e.jsx("button",{onClick:()=>o("week"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="week"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Week"})]})]}),h?e.jsx("div",{className:"text-center py-12 text-gray-600",children:"Loading..."}):e.jsx("div",{className:"bg-white rounded-lg overflow-hidden border border-gray-200",children:c==="week"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsx("div",{className:"w-20 p-4 bg-gray-50 border-r border-gray-200 font-semibold text-gray-700 flex-shrink-0",children:"Time"}),P().map((q,X)=>{const W=q.toDateString()===new Date().toDateString();return e.jsxs("div",{className:`flex-1 p-4 border-r border-gray-200 text-center ${W?"bg-blue-50":"bg-gray-50"}`,children:[e.jsx("div",{className:"text-sm text-gray-600",children:q.toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("div",{className:`text-lg font-semibold ${W?"text-blue-600":"text-gray-900"}`,children:q.getDate()})]},X)})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-20 flex-shrink-0 border-r border-gray-200 bg-gray-50",children:ge.map(q=>e.jsxs("div",{className:"h-[60px] p-3 border-b border-gray-200 text-sm text-gray-700 font-medium",children:[q.hour===0?"12":q.hour<12?q.hour:q.hour===12?"12":q.hour-12,":",q.minutes.toString().padStart(2,"0")," ",q.hour<12?"AM":"PM"]},`time-${q.hour}-${q.minutes}`))}),e.jsx("div",{className:"flex-1 flex",children:P().map((q,X)=>{const W=B(q),K=ge.length*60;return e.jsxs("div",{className:"flex-1 border-r border-gray-200 relative",style:{height:`${K}px`},children:[ge.map(ie=>e.jsx("div",{onClick:()=>T(q,ie.hour,ie.minutes),className:"absolute w-full h-[60px] border-b border-gray-200 hover:bg-blue-50 cursor-pointer transition-colors",style:{top:`${ge.findIndex(we=>we.hour===ie.hour&&we.minutes===ie.minutes)*60}px`}},`slot-${ie.hour}-${ie.minutes}`)),W.map(ie=>{const{top:we,height:ke}=z(ie),J=ie.categoryColor||"#9CA3AF";return e.jsxs("div",{onClick:he=>xe(ie,he),className:"availability-block-card absolute left-1 right-1 px-2 py-1 rounded-lg text-xs z-10 overflow-hidden",style:{"--block-color":J,top:`${we}px`,height:`${ke}px`},children:[e.jsx("div",{className:"font-semibold text-gray-800",children:ie.categoryName}),ke>30&&ie.comments&&e.jsx("div",{className:"text-gray-600 text-[10px] truncate",children:ie.comments})]},ie.id)})]},X)})})]})]})}),e.jsx(Gb,{isOpen:w,onClose:()=>y(!1),onSave:ve,initialDate:j?.date,initialTime:j?.time,categories:m,block:x})]})}function $b(){const[n,d]=f.useState("availability"),c=[{id:"profile",label:"My Profile",available:!1},{id:"preferences",label:"Preferences",available:!1},{id:"calendar-settings",label:"Calendar Settings",available:!1},{id:"availability",label:"Calendar Availability",available:!0},{id:"notifications",label:"Notifications",available:!1}];return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"glass-card p-6 mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Settings"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your personal preferences and availability"})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-64 flex-shrink-0",children:e.jsx("div",{className:"glass-card p-4",children:e.jsx("nav",{className:"space-y-1",children:c.map(o=>e.jsxs("button",{onClick:()=>o.available&&d(o.id),disabled:!o.available,className:`w-full text-left px-4 py-2 rounded-lg transition-colors ${n===o.id?"bg-blue-600 text-white font-medium":o.available?"hover:bg-gray-100 text-gray-700":"text-gray-400 cursor-not-allowed"}`,children:[o.label,!o.available&&e.jsx("span",{className:"text-xs ml-2",children:"(Coming Soon)"})]},o.id))})})}),e.jsxs("div",{className:"flex-1",children:[n==="availability"&&e.jsx(Yb,{}),n!=="availability"&&e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx("div",{className:"text-gray-700 text-lg font-semibold",children:c.find(o=>o.id===n)?.label}),e.jsx("p",{className:"text-gray-600 mt-2",children:"This section is coming soon"})]})]})]})]})}function Pb(){const n=Qs(),d=Zs(),[c,o]=f.useState("dashboard"),{user:u,appointments:b,loading:m}=nr(),[v,h]=f.useState({activeClients:0}),[p,w]=f.useState({count:0,notes:[]}),[y,j]=f.useState({totalCount:0,combined:[]}),[N,x]=f.useState(!1),[C,E]=f.useState(!1),[k,R]=f.useState(null),[L,A]=f.useState([]);f.useEffect(()=>{n.state?.activeNav&&o(n.state.activeNav)},[n.state]),f.useEffect(()=>{const D=async()=>{try{const le=await Cf();h(le)}catch(le){console.error("Failed to fetch client stats:",le)}},_=async()=>{try{const le=await lr();A(le.providers||[])}catch(le){console.error("Failed to fetch providers:",le)}},M=async()=>{if(u?.isSupervisor)try{const le=await qb();w(le)}catch(le){console.error("Failed to fetch pending reviews:",le)}},Q=async()=>{try{const le=await Fb();j(le)}catch(le){console.error("Failed to fetch my pending notes:",le)}};u&&(D(),_(),M(),Q())},[u]);const G={todayAppointments:{value:b.filter(D=>D.categoryType!==1).length||0,trend:{direction:"up",change:0,label:"from yesterday"}},unbilledAppointments:{value:0,trend:{direction:"up",change:0,label:"from last week"}},sessionsYTD:{value:0,trend:{direction:"up",change:0,label:"from last month"}},activeClients:{value:v.activeClients||0,trend:{direction:"down",change:0,label:"from last month"}}},P=b.filter(D=>D.categoryType!==1).map(D=>{const _=D.patientName?D.patientName:D.providerFirstName?`${D.providerFirstName} ${D.providerLastName||""}`.trim():D.categoryName||"Appointment";return{...D,time:new Date(D.eventDate+" "+D.startTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),client:_,type:D.categoryName||"Appointment",duration:D.duration?`${D.duration} min`:"",room:D.room||"",isNext:!1}}),T=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),xe=async()=>{await Rf()},ve=()=>{x(!0)},me=D=>{console.log("New client created with ID:",D),x(!1),d(`/clients/${D}`)},oe=()=>{R(null),E(!0)},H=D=>{R(D),E(!0)},U=()=>{console.log("Appointment saved"),R(null),E(!1),window.location.reload()},ae=()=>{R(null),E(!1)};return m||!u?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-mental",children:e.jsxs("div",{className:"rounded-3xl p-8",style:{backdropFilter:"blur(60px) saturate(180%)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0.4) 100%)",boxShadow:"0 8px 32px rgba(107, 154, 196, 0.12), 0 2px 8px rgba(0, 0, 0, 0.06), inset 0 1px 0 rgba(255, 255, 255, 0.8)",border:"1px solid rgba(255, 255, 255, 0.6)"},children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 mx-auto",style:{border:"3px solid rgba(107, 154, 196, 0.3)",borderTopColor:"rgba(107, 154, 196, 0.9)"}}),e.jsx("p",{className:"text-label mt-4 text-center",children:"Loading dashboard..."})]})}):e.jsxs(wf,{user:u,activeNav:c,setActiveNav:o,today:T,onLogout:xe,wide:!0,children:[c==="dashboard"&&e.jsxs(e.Fragment,{children:[e.jsx(P0,{}),e.jsx(X0,{stats:G,onNewClient:ve,onNewAppointment:oe}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:u?.isSupervisor?"pb-4 border-b border-gray-200 mb-4":"",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Your Pending Notes"}),e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shadow-lg ${y.totalCount>0?"bg-gradient-to-br from-amber-400 to-orange-600":"bg-gradient-to-br from-gray-400 to-gray-600"}`,children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]}),y.totalCount===0?e.jsx("div",{className:"text-center py-4 text-gray-500",children:e.jsx("p",{className:"text-sm",children:"All caught up!"})}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:`text-2xl font-bold ${y.totalCount>0?"text-orange-600":"text-gray-800"}`,children:[y.totalCount," ",e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"pending"})]}),y.combined?.slice(0,3).map((D,_)=>e.jsxs("div",{className:"p-2 bg-white/60 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${D.type==="draft"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:D.type==="draft"?"Draft":"Missing"}),e.jsx("span",{className:"font-medium text-gray-800 text-sm truncate",children:D.patientName})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(D.serviceDate).toLocaleDateString()})]},_)),y.totalCount>3&&e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["+",y.totalCount-3," more"]})]})]}),u?.isSupervisor&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Notes Pending Review"}),e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shadow-lg ${p.count>0?"bg-gradient-to-br from-red-400 to-red-600":"bg-gradient-to-br from-gray-400 to-gray-600"}`,children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),p.count===0?e.jsx("div",{className:"text-center py-4 text-gray-500",children:e.jsx("p",{className:"text-sm",children:"No notes awaiting review"})}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:`text-2xl font-bold ${p.count>0?"text-red-600":"text-gray-800"}`,children:[p.count," ",e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"to review"})]}),p.notes?.slice(0,3).map((D,_)=>e.jsxs("div",{className:"p-2 bg-white/60 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"font-medium text-gray-800 text-sm truncate",children:D.patientName}),e.jsxs("p",{className:"text-xs text-gray-500",children:[D.providerName,"  ",new Date(D.serviceDate).toLocaleDateString()]})]},_)),p.count>3&&e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["+",p.count-3," more"]})]})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(V0,{todaysAppointments:P,onAppointmentClick:H})})]})]}),c==="clients"&&e.jsx(pb,{}),c==="calendar"&&e.jsx(yb,{}),c==="reports"&&e.jsx(bb,{}),c==="admin"&&e.jsx(Hb,{}),c==="settings"&&e.jsx($b,{}),c!=="dashboard"&&c!=="clients"&&c!=="calendar"&&c!=="reports"&&c!=="admin"&&c!=="settings"&&e.jsxs("div",{className:"backdrop-blur-2xl bg-white/40 rounded-3xl shadow-2xl border border-white/50 p-8 text-center",children:[e.jsxs("p",{className:"text-gray-700 text-lg font-semibold",children:[c.charAt(0).toUpperCase()+c.slice(1)," - Coming Soon"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"This feature is under development"})]}),N&&e.jsx(zf,{onClose:()=>x(!1),onClientCreated:me}),e.jsx(Of,{isOpen:C,onClose:ae,onSave:U,appointment:k,providers:L})]})}function Xb({client:n}){const d=Zs();if(!n)return null;const c=v=>{if(!v)return"bg-gray-500 text-white";const h=v.toLowerCase();return h==="active"?"bg-green-500 text-white":h==="inactive"?"bg-yellow-500 text-white":"bg-gray-500 text-white"},o=v=>v?v.charAt(0).toUpperCase()+v.slice(1).toLowerCase():"Unknown",u=v=>v?`${v} years old`:"",b=v=>{if(!v)return"";const[h,p,w]=v.split("-");return new Date(h,p-1,w).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},m=v=>{if(!v)return"";const[h,p,w]=v.split("-");return new Date(h,p-1,w).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};return e.jsx("div",{className:"card-main mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>d("/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-white/60 hover:bg-white/80 text-gray-700 rounded-lg transition-colors font-medium border border-gray-200",title:"Back to Dashboard",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),e.jsx("span",{children:"Back"})]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:[n.fname," ",n.mname&&n.mname+" ",n.lname]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-gray-600",children:[e.jsx("span",{children:u(n.age)}),e.jsx("span",{children:""}),e.jsxs("span",{children:["DOB: ",b(n.DOB)]}),e.jsx("span",{children:""}),e.jsxs("span",{children:["ID: ",n.pid]}),n.client_since&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["Client Since: ",m(n.client_since)]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[n.protection_indicator_code==="YES"&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("span",{className:"text-sm font-semibold text-red-800",children:"Risk Factors Documented"})]}),e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-medium ${c(n.care_team_status)}`,children:o(n.care_team_status)})]})]})})}function Vb({activeTab:n,onTabChange:d,permissions:c={}}){const o=[{id:"summary",label:"Summary",requiresPermission:null},{id:"demographics",label:"Demographics",requiresPermission:null},{id:"insurance",label:"Insurance",requiresPermission:null},{id:"encounters",label:"Sessions",requiresPermission:null,hideForSocialWorker:!0},{id:"clinical",label:"Notes",requiresPermission:"canAccessNotes"},{id:"documents",label:"Documents",requiresPermission:null},{id:"billing",label:"Billing",requiresPermission:null,adminOnly:!0},{id:"admin",label:"Admin Notes",requiresPermission:null}],u=c.canViewClinicalNotes||c.canCreateCaseNotes,b=o.filter(m=>m.adminOnly&&!c.isAdmin||m.hideForSocialWorker&&c.isSocialWorker&&!c.isAdmin?!1:m.requiresPermission==="canAccessNotes"?u:m.requiresPermission?c[m.requiresPermission]!==!1:!0);return e.jsx("div",{className:"tab-nav mb-6",children:e.jsx("div",{className:"flex gap-2",children:b.map(m=>e.jsx("button",{onClick:()=>d(m.id),className:n===m.id?"nav-tab-active":"nav-tab-inactive",children:m.label},m.id))})})}const ko={primary_clinician:"Primary Clinician",clinician:"Clinician",social_worker:"Social Worker",supervisor:"Supervisor",intern:"Intern"},Wh={primary_clinician:"bg-blue-100 text-blue-700",clinician:"bg-green-100 text-green-700",social_worker:"bg-purple-100 text-purple-700",supervisor:"bg-orange-100 text-orange-700",intern:"bg-gray-100 text-gray-700"};function Qb({clientId:n,isAdmin:d,providers:c=[]}){const[o,u]=f.useState([]),[b,m]=f.useState(!0),[v,h]=f.useState(null),[p,w]=f.useState(!1),[y,j]=f.useState({provider_id:"",role:"clinician",notes:""}),[N,x]=f.useState(!1);f.useEffect(()=>{n&&C()},[n]);const C=async()=>{try{m(!0);const A=await fetch(`/custom/api/client_providers.php?client_id=${n}`,{credentials:"include"});if(!A.ok)throw new Error("Failed to load assigned providers");const G=await A.json();u(G.providers||[])}catch(A){console.error("Failed to load assigned providers:",A),h(A.message)}finally{m(!1)}},E=async()=>{if(!y.provider_id){h("Please select a provider");return}try{x(!0),h(null);const A=await fetch("/custom/api/client_providers.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"add",client_id:n,provider_id:parseInt(y.provider_id),role:y.role,notes:y.notes||null})}),G=await A.json();if(!A.ok||!G.success)throw new Error(G.error||"Failed to add provider");await C(),w(!1),j({provider_id:"",role:"clinician",notes:""})}catch(A){h(A.message)}finally{x(!1)}},k=async(A,G)=>{if(confirm(`Remove ${G} from this client's care team?`))try{const P=await fetch("/custom/api/client_providers.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"remove",assignment_id:A})}),T=await P.json();if(!P.ok||!T.success)throw new Error(T.error||"Failed to remove provider");await C()}catch(P){h(P.message)}},R=async(A,G)=>{try{const P=await fetch("/custom/api/client_providers.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update_role",assignment_id:A,role:G})}),T=await P.json();if(!P.ok||!T.success)throw new Error(T.error||"Failed to update role");await C()}catch(P){h(P.message)}},L=c.filter(A=>!o.some(G=>G.provider_id===A.value));return b?e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading care team..."}):e.jsxs("div",{children:[v&&e.jsx(tt,{className:"mb-4",children:v}),e.jsx("div",{className:"space-y-2",children:o.length===0?e.jsx("div",{className:"text-gray-500 text-sm italic",children:"No providers assigned"}):o.map(A=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[A.provider_name,A.credentials&&e.jsxs("span",{className:"text-gray-500 text-sm ml-1",children:[", ",A.credentials]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[d?e.jsx("select",{value:A.role,onChange:G=>R(A.id,G.target.value),className:`text-xs px-2 py-1 rounded-full border-0 cursor-pointer ${Wh[A.role]||"bg-gray-100"}`,children:Object.entries(ko).map(([G,P])=>e.jsx("option",{value:G,children:P},G))}):e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Wh[A.role]||"bg-gray-100"}`,children:ko[A.role]||A.role}),e.jsxs("span",{className:"text-xs text-gray-500",children:["since ",new Date(A.assigned_at).toLocaleDateString()]})]})]})}),d&&e.jsx("button",{onClick:()=>k(A.id,A.provider_name),className:"text-red-600 hover:text-red-800 text-sm",title:"Remove from care team",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},A.id))}),d&&e.jsxs("button",{onClick:()=>w(!0),className:"mt-3 text-sm text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Provider"]}),e.jsx(Ie,{isOpen:p,onClose:()=>w(!1),title:"Add Provider to Care Team",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[v&&e.jsx(tt,{children:v}),e.jsxs("div",{children:[e.jsxs(te,{children:["Provider ",e.jsx(De,{})]}),e.jsxs("select",{value:y.provider_id,onChange:A=>j({...y,provider_id:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select a provider..."}),L.map(A=>e.jsx("option",{value:A.value,children:A.label},A.value))]})]}),e.jsxs("div",{children:[e.jsxs(te,{children:["Role ",e.jsx(De,{})]}),e.jsx("select",{value:y.role,onChange:A=>j({...y,role:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Object.entries(ko).map(([A,G])=>e.jsx("option",{value:A,children:G},A))})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Notes (Optional)"}),e.jsx("textarea",{value:y.notes,onChange:A=>j({...y,notes:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2,placeholder:"Reason for assignment, special instructions, etc."})]}),e.jsxs(Ie.Footer,{children:[e.jsx(Tt,{onClick:()=>w(!1),disabled:N,children:"Cancel"}),e.jsx(Ve,{onClick:E,disabled:N||!y.provider_id,children:N?"Adding...":"Add to Care Team"})]})]})})]})}function Zb({data:n}){const[d,c]=f.useState([]),[o,u]=f.useState(null);if(f.useEffect(()=>{const x=async()=>{try{const E=await lr();c(E.providers||[])}catch(E){console.error("Failed to load providers:",E)}},C=async()=>{try{const E=ar();u(E)}catch(E){console.error("Failed to load current user:",E)}};x(),C()},[]),!n)return e.jsx("div",{className:"text-gray-700 text-center py-8",children:"Loading client data..."});const{patient:b,upcomingAppointments:m,recentAppointments:v,problems:h,medications:p,encounters:w}=n,y=x=>{if(!x)return"";const[C,E,k]=x.split(/[-T]/);return new Date(C,E-1,k).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},j=x=>{if(!x)return"";const[C,E]=x.split(":"),k=parseInt(C),R=k>=12?"PM":"AM";return`${k%12||12}:${E} ${R}`},N=x=>{if(!x)return"";const C=x.split(/\s{3,}/);return C.length>1?C[1].trim():x.trim()};return e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Contact Information"}),e.jsx("div",{className:"bg-white/80 rounded-xl p-4 border border-gray-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"field-label",children:"Email:"}),e.jsx("div",{className:"field-value",children:b.email||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"field-label",children:"Cell Phone:"}),e.jsx("div",{className:"field-value",children:b.phone_cell||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"field-label",children:"Home Phone:"}),e.jsx("div",{className:"field-value",children:b.phone_home||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"field-label",children:"Address:"}),e.jsx("div",{className:"field-value",children:b.street&&b.city?e.jsxs(e.Fragment,{children:[b.street,e.jsx("br",{}),b.city,", ",b.state," ",b.postal_code]}):"Not provided"})]}),b.contact_relationship&&e.jsxs("div",{children:[e.jsx("span",{className:"field-label",children:"Emergency Contact:"}),e.jsx("div",{className:"field-value",children:b.contact_relationship})]})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:e.jsx("span",{className:"flex items-center gap-2",children:" Diagnosis"})}),h&&h.length>0?e.jsx("div",{className:"space-y-3",children:h.map(x=>e.jsx("div",{className:"card-inner border-l-4 border-blue-400",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-mono text-sm font-semibold text-blue-700 bg-blue-100 px-2 py-0.5 rounded",children:x.diagnosis}),x.enddate&&e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:"Retired"})]}),e.jsx("div",{className:"item-title text-gray-800",children:N(x.title)}),e.jsxs("div",{className:"item-tertiary mt-1",children:["Started: ",y(x.begdate),x.enddate&&`  Ended: ${y(x.enddate)}`]})]})})},x.id))}):e.jsx("div",{className:"empty-state",children:"No active diagnoses recorded"})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Care Team"}),e.jsx(Qb,{clientId:b.pid,isAdmin:o?.admin,providers:d})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:e.jsx("span",{className:"flex items-center gap-2",children:" Current Medications"})}),p&&p.length>0?e.jsx("div",{className:"space-y-3",children:p.map((x,C)=>e.jsxs("div",{className:"card-inner border-l-4 border-green-400",children:[e.jsx("div",{className:"item-title text-gray-900",children:x.name}),x.dosage&&e.jsxs("div",{className:"item-secondary text-green-700 font-semibold",children:[x.dosage,x.frequency&&` - ${x.frequency}`]}),x.purpose&&e.jsxs("div",{className:"item-tertiary",children:["For: ",x.purpose]}),x.prescriber&&e.jsxs("div",{className:"item-tertiary",children:["Prescribed by: ",x.prescriber]})]},C))}):e.jsx("div",{className:"empty-state",children:"No active medications"})]})]})]}),e.jsxs("div",{className:"w-80 flex-shrink-0 space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Appointments"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header",children:"Upcoming"}),m&&m.length>0?e.jsx("div",{className:"space-y-3",children:m.map(x=>e.jsxs("div",{className:"card-inner",children:[e.jsx("div",{className:"appt-date",children:y(x.pc_eventDate)}),e.jsxs("div",{className:"appt-time",children:[j(x.pc_startTime)," - ",j(x.pc_endTime)]}),e.jsx("div",{className:"appt-type",children:x.pc_catname||"Appointment"})]},x.pc_eid))}):e.jsx("div",{className:"text-muted",children:"No upcoming appointments"})]}),e.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[e.jsx("h3",{className:"section-header",children:"Recurring"}),e.jsx("div",{className:"text-muted",children:"No recurring appointments"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"section-header",children:"Recent Past"}),v&&v.length>0?e.jsx("div",{className:"space-y-3",children:v.slice(0,6).map(x=>e.jsxs("div",{className:"card-inner",children:[e.jsx("div",{className:"appt-date",children:y(x.pc_eventDate)}),e.jsxs("div",{className:"appt-time",children:[j(x.pc_startTime)," - ",j(x.pc_endTime)]}),e.jsx("div",{className:"appt-type",children:x.pc_catname||"Appointment"})]},x.pc_eid))}):e.jsx("div",{className:"text-muted",children:"No recent appointments"})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Portal Access"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("p",{className:"alert-header text-gray-700",children:"Portal Status"}),e.jsx("p",{className:"text-caption text-gray-600",children:"Patient Portal Not Enabled. Admin Can Enable Patient Portal."})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("p",{className:"alert-header text-gray-700 mb-2",children:"Credentials"}),e.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"+ Create"})]})]})]})]})]})}function Jb(n=[]){const[d,c]=f.useState({}),[o,u]=f.useState(!0),[b,m]=f.useState(null);return f.useEffect(()=>{(async()=>{if(n.length===0){u(!1);return}try{u(!0),m(null);const h=n.map(async y=>{const j=await fetch(`/custom/api/reference_lists.php?type=${y}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!j.ok)throw new Error(`Failed to fetch ${y}`);const N=await j.json();return{type:y,items:N.items||[]}}),p=await Promise.all(h),w={};p.forEach(({type:y,items:j})=>{w[y]=j.filter(N=>N.active!==!1).map(N=>({value:N.id,label:N.name,description:N.description}))}),c(w)}catch(h){console.error("Error fetching reference lists:",h),m(h.message)}finally{u(!1)}})()},[JSON.stringify(n)]),{data:d,loading:o,error:b}}function ef(){return e.jsx("span",{className:"required-field-label ml-0.5","aria-hidden":"true",children:"*"})}function Kb({data:n,onDataUpdate:d}){const[c,o]=f.useState(!1),[u,b]=f.useState({}),[m,v]=f.useState(!1),[h,p]=f.useState(null),[w,y]=f.useState({}),[j,N]=f.useState([]),[x,C]=f.useState([]),[E,k]=f.useState(!1),[R,L]=f.useState(null),{data:A,loading:G}=Jb(["sexual-orientation","gender-identity","marital-status","client-status","ethnicity"]);f.useEffect(()=>{!G&&A&&y({...w,sexual_orientation:A["sexual-orientation"]||[],gender_identity:A["gender-identity"]||[],marital_status:A["marital-status"]||[],status:A["client-status"]||[],ethnicity:A.ethnicity||[]})},[A,G]),f.useEffect(()=>{const M=async()=>{try{const[le,ge,z]=await Promise.all([Ya("sex"),Ya("state"),Ya("payment_type")]);y(B=>({...B,sex:le.options||[],state:ge.options||[],payment_type:z.options||[]}))}catch(le){console.error("Failed to load dropdown options:",le)}},Q=async()=>{try{const le=await lr();N(le.providers||[])}catch(le){console.error("Failed to load providers:",le)}};M(),Q()},[]),f.useEffect(()=>{(async()=>{if(n&&n.patient&&n.patient.age<18)try{const Q=await _o(n.patient.pid);C(Q.related_persons||[])}catch(Q){console.error("Failed to load guardians:",Q)}})()},[n]);const P=M=>{if(!M)return"";const[Q,le,ge]=M.split(/[-T]/);return new Date(Q,le-1,ge).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};if(!n)return e.jsx("div",{className:"empty-state",children:"Loading demographic data..."});const{patient:T}=n,xe=()=>{b({fname:T.fname||"",mname:T.mname||"",lname:T.lname||"",preferred_name:T.preferred_name||"",DOB:T.DOB||"",sex:T.sex||"",gender_identity:T.gender_identity||"",sexual_orientation:T.sexual_orientation||"",marital_status:T.marital_status||"",ethnicity:T.ethnicity||"",ss:T.ss||"",street:T.street||"",street_line_2:T.street_line_2||"",city:T.city||"",state:T.state||"",postal_code:T.postal_code||"",county:T.county||"",contact_relationship:T.contact_relationship||"",phone_contact:T.phone_contact||"",phone_home:T.phone_home||"",phone_cell:T.phone_cell||"",phone_biz:T.phone_biz||"",email:T.email||"",status:T.status||T.care_team_status||"active",payment_type:T.payment_type||"insurance",custom_session_fee:T.custom_session_fee||"",provider_id:T.provider_id||T.providerID||"",allow_patient_portal:T.allow_patient_portal||"",cmsportal_login:T.cmsportal_login||""}),o(!0),p(null)},ve=()=>{o(!1),b({}),p(null)},me=(M,Q)=>{b(le=>({...le,[M]:Q}))},oe=async()=>{v(!0),p(null);try{if(!u.fname||!u.lname)throw new Error("First name and last name are required");if(!u.email)throw new Error("Trusted Email is required");if(u.email&&!u.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/))throw new Error("Invalid email format");if(!u.phone_cell)throw new Error("Mobile Phone is required");if(!u.status)throw new Error("Client Status is required");if(!u.payment_type)throw new Error("Payment Type is required");await rb(T.pid,u),d&&await d(),o(!1),b({})}catch(M){p(M.message||"Failed to save changes")}finally{v(!1)}},H=()=>{L(null),k(!0)},U=M=>{L(M),k(!0)},ae=async M=>{if(window.confirm(`Are you sure you want to remove ${M.first_name} ${M.last_name} as a guardian?`))try{await db(M.relation_id);const Q=await _o(T.pid);C(Q.related_persons||[])}catch(Q){p(Q.message||"Failed to delete guardian")}},D=async M=>{try{await ob({patient_id:T.pid,person_id:R?.id,...M});const Q=await _o(T.pid);C(Q.related_persons||[]),k(!1),L(null)}catch(Q){throw new Error(Q.message||"Failed to save guardian")}},_=(M,Q,le,ge="text",z=null,B=!1)=>{const q=B?"form-field-label required-field-label":"form-field-label";if(c&&le)return z?e.jsxs("div",{className:"form-field",children:[e.jsxs("div",{className:q,children:[M,B&&e.jsx(ef,{})]}),e.jsx("select",{value:u[le]||"",onChange:X=>me(le,X.target.value),className:"input-md",required:B,children:z.map(X=>e.jsx("option",{value:X.value,children:X.label},X.value))})]}):e.jsxs("div",{className:"form-field",children:[e.jsxs("div",{className:q,children:[M,B&&e.jsx(ef,{})]}),e.jsx("input",{type:ge,value:u[le]||"",onChange:X=>me(le,X.target.value),className:"input-md",required:B})]});{let X=Q||"";if(z&&Q){const W=z.find(K=>K.value===Q);W&&(X=W.label)}return e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:M}),e.jsx("div",{className:"form-field-value",children:X})]})}};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end mb-4 space-x-2",children:c?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:ve,disabled:m,className:"btn-solid btn-solid-gray disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:oe,disabled:m,className:"btn-solid btn-solid-green disabled:opacity-50",children:m?"Saving...":"Save Changes"})]}):e.jsx("button",{onClick:xe,className:"btn-solid btn-solid-blue",children:"Edit Demographics"})}),h&&e.jsx("div",{className:"error-message mb-4",children:h}),c&&e.jsx("div",{className:"mb-4 px-4 py-2 bg-purple-50 border-l-4 border-purple-700 rounded",children:e.jsxs("p",{className:"text-sm text-purple-900",children:[e.jsx("span",{className:"required-field-label",children:"*"})," Required fields are marked with an asterisk and displayed in ",e.jsx("span",{className:"required-field-label",children:"purple"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Personal Information"}),e.jsx("div",{className:"card-inner",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:c?e.jsxs(e.Fragment,{children:[_("First Name",u.fname,"fname","text",null,!0),_("Middle Name",u.mname,"mname"),_("Last Name",u.lname,"lname","text",null,!0),_("Preferred Name",u.preferred_name,"preferred_name"),_("DOB",u.DOB,"DOB","date"),_("Legal Sex (For billing purposes ONLY)",u.sex,"sex","text",w.sex&&w.sex.length>0?[{value:"",label:"Select..."},...w.sex]:[{value:"",label:"Select..."},{value:"Male",label:"Male"},{value:"Female",label:"Female"}]),_("Gender Identity",u.gender_identity,"gender_identity","text",w.gender_identity&&w.gender_identity.length>0?[{value:"",label:"Select..."},...w.gender_identity]:null),_("Sexual Orientation",u.sexual_orientation,"sexual_orientation","text",w.sexual_orientation&&w.sexual_orientation.length>0?[{value:"",label:"Select..."},...w.sexual_orientation]:null),_("Marital Status",u.marital_status,"marital_status","text",w.marital_status&&w.marital_status.length>0?[{value:"",label:"Select..."},...w.marital_status]:null),_("Ethnicity",u.ethnicity,"ethnicity","text",w.ethnicity&&w.ethnicity.length>0?[{value:"",label:"Select..."},...w.ethnicity]:null),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"S.S."}),e.jsx("input",{type:"text",value:u.ss||"",onChange:M=>me("ss",M.target.value),placeholder:"XXX-XX-XXXX",maxLength:"11",className:"input-md"})]})]}):e.jsxs(e.Fragment,{children:[_("First Name",T.fname),_("Middle Name",T.mname),_("Last Name",T.lname),_("Preferred Name",T.preferred_name),_("DOB",P(T.DOB)),_("Legal Sex (For billing purposes ONLY)",T.sex,null,"text",[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"},{value:"unknown",label:"Unknown"}]),_("Gender Identity",T.gender_identity_text||T.gender_identity),_("Sexual Orientation",T.sexual_orientation_text||T.sexual_orientation),_("Marital Status",T.marital_status_text||T.marital_status),_("Ethnicity",T.ethnicity),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"S.S."}),e.jsx("div",{className:"form-field-value",children:T.ss?"***-**-"+T.ss.slice(-4):""})]})]})})})]}),T.age<18&&e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"card-header",children:"Guardian Information"}),e.jsx("button",{onClick:H,className:"btn-solid btn-solid-green btn-sm",children:"+ Add Guardian"})]}),e.jsx("div",{className:"card-inner",children:x.length===0?e.jsx("div",{className:"empty-state",children:'No guardians added yet. Click "Add Guardian" to add one.'}):e.jsx("div",{className:"space-y-4",children:x.map((M,Q)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"item-title",children:[M.first_name," ",M.middle_name," ",M.last_name]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>U(M),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Edit"}),e.jsx("button",{onClick:()=>ae(M),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Remove"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"field-label",children:"Relationship:"})," ",M.role]}),M.phone&&e.jsxs("div",{children:[e.jsx("span",{className:"field-label",children:"Phone:"})," ",M.phone]}),M.email&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"field-label",children:"Email:"})," ",M.email]}),M.street&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"field-label",children:"Address:"})," ",M.street,M.city&&`, ${M.city}`,M.state&&`, ${M.state}`,M.postal_code&&` ${M.postal_code}`]})]})]},M.id))})})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Contact Information"}),e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{className:"col-span-2",children:_("Address",T.street,"street")}),_("Address Line 2",T.street_line_2,"street_line_2"),_("City",T.city,"city"),_("State",T.state,"state","text",w.state&&w.state.length>0?[{value:"",label:"Select..."},...w.state]:null),_("Postal Code",T.postal_code,"postal_code"),_("County",T.county,"county"),_("Emergency Contact",T.contact_relationship,"contact_relationship"),_("Emergency Phone",T.phone_contact,"phone_contact","tel"),_("Home Phone",T.phone_home,"phone_home","tel"),_("Mobile Phone",T.phone_cell,"phone_cell","tel",null,!0),_("Work Phone",T.phone_biz,"phone_biz","tel"),_("Trusted Email",T.email,"email","email",null,!0),!c&&T.additional_addresses&&e.jsxs("div",{className:"col-span-2 form-field",children:[e.jsx("div",{className:"form-field-label",children:"Additional Addresses"}),e.jsx("div",{className:"form-field-value",children:T.additional_addresses})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Client Status"}),e.jsx("div",{className:"card-inner",children:c?e.jsxs("div",{className:"space-y-3",children:[_("Client Status",u.status,"status","text",[{value:"",label:"Select..."},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"discharged",label:"Discharged"},{value:"deceased",label:"Deceased"}],!0),_("Payment Type",u.payment_type,"payment_type","text",[{value:"",label:"Select..."},{value:"insurance",label:"Insurance"},{value:"self-pay",label:"Self-Pay"},{value:"pro-bono",label:"Pro Bono"}],!0),u.payment_type==="self-pay"&&_("Custom Session Fee ($)",u.custom_session_fee,"custom_session_fee","number",null,{step:"0.01",placeholder:"120.00"})]}):e.jsxs("div",{className:"space-y-3",children:[_("Client Status",T.status,null,"text",[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"discharged",label:"Discharged"},{value:"deceased",label:"Deceased"}]),_("Payment Type",T.payment_type,null,"text",[{value:"insurance",label:"Insurance"},{value:"self-pay",label:"Self-Pay"},{value:"pro-bono",label:"Pro Bono"}]),T.payment_type==="self-pay"&&T.custom_session_fee&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Custom Session Fee"}),e.jsxs("div",{className:"form-field-value",children:["$",parseFloat(T.custom_session_fee).toFixed(2)]})]})]})})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Portal Settings"}),e.jsx("div",{className:"card-inner",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:c?e.jsxs(e.Fragment,{children:[_("Allow Client Portal",u.allow_patient_portal,"allow_patient_portal","text",[{value:"",label:"Select..."},{value:"NO",label:"NO"},{value:"YES",label:"YES"}]),_("CMS Portal Login",u.cmsportal_login,"cmsportal_login")]}):e.jsxs(e.Fragment,{children:[_("Allow Client Portal",T.allow_patient_portal),_("CMS Portal Login",T.cmsportal_login)]})})})]})]})]}),E&&e.jsx(Ib,{guardian:R,stateOptions:w.state||[],onSave:D,onCancel:()=>{k(!1),L(null)}})]})}function Ib({guardian:n,stateOptions:d,onSave:c,onCancel:o}){const[u,b]=f.useState({first_name:n?.first_name||"",middle_name:n?.middle_name||"",last_name:n?.last_name||"",role:n?.role||"",phone:n?.phone||"",email:n?.email||"",street:n?.street||"",city:n?.city||"",state:n?.state||"",postal_code:n?.postal_code||"",notes:n?.notes||""}),[m,v]=f.useState(null),[h,p]=f.useState(!1),w=(j,N)=>{b(x=>({...x,[j]:N}))},y=async j=>{j.preventDefault(),v(null),p(!0);try{if(!u.first_name||!u.last_name||!u.role)throw new Error("First name, last name, and relationship are required");if(u.email&&!u.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/))throw new Error("Invalid email format");await c(u)}catch(N){v(N.message)}finally{p(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto m-4",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"card-header text-2xl",children:n?"Edit Guardian":"Add Guardian"}),m&&e.jsx("div",{className:"error-message mb-4",children:m}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"First Name *"}),e.jsx("input",{type:"text",value:u.first_name,onChange:j=>w("first_name",j.target.value),className:"input-md",required:!0})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"Middle Name"}),e.jsx("input",{type:"text",value:u.middle_name,onChange:j=>w("middle_name",j.target.value),className:"input-md"})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"Last Name *"}),e.jsx("input",{type:"text",value:u.last_name,onChange:j=>w("last_name",j.target.value),className:"input-md",required:!0})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"Relationship *"}),e.jsxs("select",{value:u.role,onChange:j=>w("role",j.target.value),className:"input-md",required:!0,children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"Mother",children:"Mother"}),e.jsx("option",{value:"Father",children:"Father"}),e.jsx("option",{value:"Grandmother",children:"Grandmother"}),e.jsx("option",{value:"Grandfather",children:"Grandfather"}),e.jsx("option",{value:"Aunt",children:"Aunt"}),e.jsx("option",{value:"Uncle",children:"Uncle"}),e.jsx("option",{value:"Foster Parent",children:"Foster Parent"}),e.jsx("option",{value:"Legal Guardian",children:"Legal Guardian"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"Phone"}),e.jsx("input",{type:"tel",value:u.phone,onChange:j=>w("phone",j.target.value),className:"input-md"})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"Email"}),e.jsx("input",{type:"email",value:u.email,onChange:j=>w("email",j.target.value),className:"input-md"})]}),e.jsxs("div",{className:"col-span-2 form-field",children:[e.jsx("label",{className:"form-field-label",children:"Street Address"}),e.jsx("input",{type:"text",value:u.street,onChange:j=>w("street",j.target.value),className:"input-md"})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"City"}),e.jsx("input",{type:"text",value:u.city,onChange:j=>w("city",j.target.value),className:"input-md"})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"State"}),e.jsxs("select",{value:u.state,onChange:j=>w("state",j.target.value),className:"input-md",children:[e.jsx("option",{value:"",children:"Select..."}),d.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))]})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"Postal Code"}),e.jsx("input",{type:"text",value:u.postal_code,onChange:j=>w("postal_code",j.target.value),className:"input-md"})]}),e.jsxs("div",{className:"col-span-2 form-field",children:[e.jsx("label",{className:"form-field-label",children:"Notes"}),e.jsx("textarea",{value:u.notes,onChange:j=>w("notes",j.target.value),className:"input-md",rows:"3"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{type:"button",onClick:o,disabled:h,className:"btn-solid btn-solid-gray",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h,className:"btn-solid btn-solid-green",children:h?"Saving...":"Save Guardian"})]})]})]})})})}function Yo({selectedInterventions:n=[],onChange:d,riskPresent:c=!1,showFavorites:o=!0}){const[u,b]=f.useState(!0),[m,v]=f.useState(null),[h,p]=f.useState(null),[w,y]=f.useState({}),[j,N]=f.useState("");f.useEffect(()=>{x()},[]);const x=async()=>{try{b(!0);const G=await tb();p(G),v(null)}catch(G){console.error("Error loading interventions:",G),v(G.message)}finally{b(!1)}},C=G=>{const P=n.includes(G);d(P?n.filter(T=>T!==G):[...n,G])},E=G=>{y(P=>({...P,[G]:!P[G]}))};if(u)return e.jsx("div",{className:"text-gray-600",children:"Loading interventions..."});if(m)return e.jsxs(Tl,{children:["Error loading interventions: ",m]});if(!h)return e.jsx("div",{className:"text-gray-600",children:"No interventions available"});const{grouped:k,favorites:R}=h,L=[...k.tier1||[],...k.tier3||[],...k.tier4||[],...Object.values(k.tier2||{}).flat()],A=j?L.filter(G=>G.intervention_name.toLowerCase().includes(j.toLowerCase())):null;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",value:j,onChange:G=>N(G.target.value),placeholder:"Search interventions...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm"})}),j&&A&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-label mb-3",children:["Search Results (",A.length,")"]}),A.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:A.map(G=>e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:n.includes(G.intervention_name),onChange:()=>C(G.intervention_name),className:"checkbox"}),e.jsx("span",{className:"text-sm text-gray-800",children:G.intervention_name})]},G.id))}):e.jsxs("div",{className:"text-gray-500 text-sm",children:['No interventions found matching "',j,'"']})]}),!j&&e.jsxs(e.Fragment,{children:[o&&R&&R.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-label mb-3 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Your Favorites"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:R.map(G=>e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:n.includes(G.intervention_name),onChange:()=>C(G.intervention_name),className:"checkbox"}),e.jsx("span",{className:"text-sm text-gray-800",children:G.intervention_name})]},G.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-label mb-3",children:"Core Interventions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:k.tier1.map(G=>e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:n.includes(G.intervention_name),onChange:()=>C(G.intervention_name),className:"checkbox"}),e.jsx("span",{className:"text-sm text-gray-800",children:G.intervention_name})]},G.id))})]}),Object.keys(k.tier2).length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-label mb-3",children:"Modality-Specific Interventions"}),e.jsx("div",{className:"space-y-2",children:Object.entries(k.tier2).map(([G,P])=>e.jsxs("div",{className:"card-inner",children:[e.jsxs("button",{onClick:()=>E(G),className:"w-full flex items-center justify-between p-3 text-left hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx("span",{className:"font-semibold text-gray-800",children:G}),e.jsx("svg",{className:`w-5 h-5 text-gray-600 transition-transform ${w[G]?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),w[G]&&e.jsx("div",{className:"px-3 pb-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:P.map(T=>e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:n.includes(T.intervention_name),onChange:()=>C(T.intervention_name),className:"checkbox"}),e.jsx("span",{className:"text-sm text-gray-800",children:T.intervention_name})]},T.id))})]},G))})]}),c&&k.tier3.length>0&&e.jsxs("div",{className:"border-2 border-orange-200 rounded-lg p-4 bg-orange-50",children:[e.jsxs("h4",{className:"text-sm font-semibold text-orange-800 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Crisis/Risk Interventions"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:k.tier3.map(G=>e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-orange-100 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:n.includes(G.intervention_name),onChange:()=>C(G.intervention_name),className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500"}),e.jsx("span",{className:"text-sm text-gray-800",children:G.intervention_name})]},G.id))})]}),k.tier4.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-label mb-3",children:"Administrative/Clinical Process"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:k.tier4.map(G=>e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:n.includes(G.intervention_name),onChange:()=>C(G.intervention_name),className:"checkbox"}),e.jsx("span",{className:"text-sm text-gray-800",children:G.intervention_name})]},G.id))})]})]}),n.length>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsxs("div",{className:"text-sm font-semibold text-blue-800 mb-2",children:["Selected (",n.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(G=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:[G,e.jsx("button",{onClick:()=>C(G),className:"hover:text-blue-600 focus:outline-none",title:"Remove",children:""})]},G))})]})]})}function $o({patientId:n,serviceDate:d,selectedDiagnoses:c=[],onChange:o}){const[u,b]=f.useState([]),[m,v]=f.useState(!0),[h,p]=f.useState(null);f.useEffect(()=>{n&&w()},[n,d]);const w=async()=>{try{v(!0),p(null);const R=await ab(n,{activeAsOf:d,includeRetired:!1});b(R.diagnoses||[])}catch(R){console.error("Error loading diagnoses:",R),p(R.message)}finally{v(!1)}},y=R=>R?R.length>=4?R.slice(0,3)+"."+R.slice(3):R:"",j=R=>{if(!R)return"";const L=R.split(/\s{3,}/);return L.length>1?L[1].trim():R.trim()},N=R=>c.some(L=>L.code===R||L===R),x=()=>{if(!c||c.length===0)return null;const R=c[0];return typeof R=="string"?R:R.code},C=R=>{const L=R.diagnosis;if(N(L)){const G=c.filter(P=>(typeof P=="string"?P:P.code)!==L);o(G)}else{const G={code:L,description:R.title,isPrimary:c.length===0,billable:!0};o([...c,G])}},E=R=>{const L=c.map(A=>({...typeof A=="string"?{code:A}:A,isPrimary:(typeof A=="string"?A:A.code)===R}));o(L)};if(m)return e.jsx("div",{className:"text-sm text-gray-600 italic",children:"Loading active diagnoses..."});if(h)return e.jsxs(Tl,{children:["Error loading diagnoses: ",h]});if(!u||u.length===0)return e.jsx("div",{className:"text-sm text-gray-600 bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:" No active diagnoses found for this patient. Please create a Diagnosis Note first."});const k=x();return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Select all diagnoses addressed in this session. The first selected diagnosis will be marked as primary for billing purposes."}),e.jsx("div",{className:"space-y-2",children:u.map(R=>{const L=R.diagnosis,A=N(L),G=L===k;return e.jsx("div",{className:`p-3 rounded-lg border-2 transition-all cursor-pointer ${A?"border-blue-400 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>C(R),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:A,onChange:()=>C(R),onClick:P=>P.stopPropagation(),className:"mt-1 w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-mono text-sm font-semibold text-blue-700 bg-blue-100 px-2 py-0.5 rounded",children:y(L)}),A&&G&&e.jsx("span",{className:"text-xs font-semibold text-green-700 bg-green-100 px-2 py-0.5 rounded",children:"PRIMARY"}),A&&!G&&e.jsx("button",{onClick:P=>{P.stopPropagation(),E(L)},className:"text-xs text-blue-600 hover:text-blue-800 underline",children:"Set as primary"})]}),e.jsx("div",{className:"text-sm text-gray-800",children:j(R.title)}),R.begdate&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Since: ",new Date(R.begdate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]})},R.id)})}),c.length>0&&e.jsxs("div",{className:"text-xs text-gray-600 bg-blue-50 border border-blue-200 rounded-lg p-2 mt-2",children:[" ",c.length," diagnosis code",c.length!==1?"s":""," selected for this session"]})]})}function Wb({note:n,onChange:d,patientId:c,autoSave:o}){const[u,b]=f.useState([]),[m,v]=f.useState(!0),[h,p]=f.useState(n.riskPresent||!1);f.useEffect(()=>{w()},[c]);const w=async()=>{try{v(!0);const x=await qo(c,{status:"active"});b(x.goals||[])}catch(x){console.error("Error loading treatment goals:",x)}finally{v(!1)}},y=(x,C)=>{d(x,C),o&&setTimeout(()=>o(),500)},j=x=>{p(x),y("riskPresent",x)},N=x=>{const C=n.goalsAddressed||[];C.includes(x)?y("goalsAddressed",C.filter(k=>k!==x)):y("goalsAddressed",[...C,x])};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main bg-blue-50 border-2 border-blue-300",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Diagnosis Codes for This Session"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select all diagnoses addressed in this session. Required for billing and clinical documentation."})]}),e.jsx($o,{patientId:c,serviceDate:n.date_of_service||new Date().toISOString().split("T")[0],selectedDiagnoses:n.diagnosis_codes||[],onChange:x=>y("diagnosis_codes",x)})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"B"}),"Behavior / What You Observed"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Client presentation, affect, mood"})]}),e.jsx("textarea",{value:n.behaviorProblem||"",onChange:x=>y("behaviorProblem",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Client presented as anxious with tearful affect. Reported difficulty sleeping and increased worry about work performance..."})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Quick Tags (Optional)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Engaged","Tearful","Anxious","Flat affect","Guarded","Motivated","Resistant","Calm"].map(x=>{const C=(n.clientPresentation||[]).includes(x);return e.jsx("button",{onClick:()=>{const E=n.clientPresentation||[];C?y("clientPresentation",E.filter(k=>k!==x)):y("clientPresentation",[...E,x])},className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${C?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:x},x)})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"I"}),"Intervention / What You Did"]})}),e.jsx("textarea",{value:n.intervention||"",onChange:x=>y("intervention",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Narrative description of interventions used... (or use checkboxes below for quick selection)"})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("div",{className:"text-label mb-3",children:"Select Interventions Used"}),e.jsx(Yo,{selectedInterventions:n.interventionsSelected||[],onChange:x=>y("interventionsSelected",x),riskPresent:h})]})]}),e.jsx("div",{className:"card-main",children:e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"R"}),"Response / How Client Responded"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Client's reaction to interventions"})]}),e.jsx("textarea",{value:n.response||"",onChange:x=>y("response",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Client engaged well with cognitive restructuring. Reported feeling less overwhelmed after identifying automatic thoughts. Demonstrated understanding of homework assignment..."})]})}),e.jsxs("div",{className:"card-main",children:[e.jsxs("label",{className:"block mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"P"}),"Plan / What's Next"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Homework, next steps, follow-up"})]}),e.jsx("textarea",{value:n.plan||"",onChange:x=>y("plan",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Continue weekly sessions. Homework: Practice thought records daily. Will reassess anxiety levels next session. May refer to psychiatry if no improvement..."})]}),!m&&u.length>0&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("div",{className:"text-label mb-3",children:"Treatment Goals Addressed This Session"}),e.jsx("div",{className:"space-y-2",children:u.map(x=>e.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:(n.goalsAddressed||[]).includes(x.id),onChange:()=>N(x.id),className:"mt-0.5 w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-gray-800",children:x.goal_text}),x.goal_category&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:x.goal_category})]})]},x.id))})]})]}),e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[e.jsxs("label",{className:"flex items-center gap-3 mb-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:x=>j(x.target.checked),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500"}),e.jsx("span",{className:"font-semibold text-gray-800",children:" Risk Present (suicide, homicide, self-harm)"})]}),h&&e.jsx("div",{className:"border-t-2 border-orange-200 pt-3",children:e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm font-semibold text-orange-800 mb-2",children:"Risk Assessment Details (Required when risk is flagged)"}),e.jsx("textarea",{value:n.riskAssessment||"",onChange:x=>y("riskAssessment",x.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Document risk factors, protective factors, safety plan, level of risk, interventions used, follow-up plan...",required:h})]})})]})]})}function ev({note:n,onChange:d,patientId:c,autoSave:o}){const[u,b]=f.useState([]),[m,v]=f.useState(!0),[h,p]=f.useState(n.riskPresent||!1);f.useEffect(()=>{w()},[c]);const w=async()=>{try{v(!0);const x=await qo(c,{status:"active"});b(x.goals||[])}catch(x){console.error("Error loading treatment goals:",x)}finally{v(!1)}},y=(x,C)=>{d(x,C),o&&setTimeout(()=>o(),500)},j=x=>{p(x),y("riskPresent",x)},N=x=>{const C=n.goalsAddressed||[];C.includes(x)?y("goalsAddressed",C.filter(k=>k!==x)):y("goalsAddressed",[...C,x])};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main bg-blue-50 border-2 border-blue-300",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Diagnosis Codes for This Session"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select all diagnoses addressed in this session. Required for billing and clinical documentation."})]}),e.jsx($o,{patientId:c,serviceDate:n.date_of_service||new Date().toISOString().split("T")[0],selectedDiagnoses:n.diagnosis_codes||[],onChange:x=>y("diagnosis_codes",x)})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-purple-600 mr-2",children:"P"}),"Problem / Presenting Issue"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Chief complaint, reason for session"})]}),e.jsx("textarea",{value:n.behaviorProblem||"",onChange:x=>y("behaviorProblem",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Client reports increased anxiety related to work stress. Difficulty concentrating, racing thoughts, sleep disruption. Concerned about upcoming performance review..."})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Quick Tags (Optional)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Anxiety","Depression","Stress","Trauma","Grief","Relationship Issues","Work Stress","Sleep Issues","Anger","Self-Esteem"].map(x=>{const C=(n.clientPresentation||[]).includes(x);return e.jsx("button",{onClick:()=>{const E=n.clientPresentation||[];C?y("clientPresentation",E.filter(k=>k!==x)):y("clientPresentation",[...E,x])},className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${C?"bg-purple-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:x},x)})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-purple-600 mr-2",children:"I"}),"Intervention / What You Did"]})}),e.jsx("textarea",{value:n.intervention||"",onChange:x=>y("intervention",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Narrative description of interventions used... (or use checkboxes below for quick selection)"})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("div",{className:"text-label mb-3",children:"Select Interventions Used"}),e.jsx(Yo,{selectedInterventions:n.interventionsSelected||[],onChange:x=>y("interventionsSelected",x),riskPresent:h})]})]}),e.jsx("div",{className:"card-main",children:e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-purple-600 mr-2",children:"R"}),"Response / How Client Responded"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Client's reaction to interventions"})]}),e.jsx("textarea",{value:n.response||"",onChange:x=>y("response",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Client reported feeling validated after reframing negative thoughts. Expressed willingness to practice relaxation techniques. Appeared more hopeful by end of session..."})]})}),e.jsxs("div",{className:"card-main",children:[e.jsxs("label",{className:"block mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-purple-600 mr-2",children:"P"}),"Plan / What's Next"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Homework, next steps, follow-up"})]}),e.jsx("textarea",{value:n.plan||"",onChange:x=>y("plan",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Continue weekly sessions. Homework: Practice deep breathing 3x daily. Client will monitor anxiety levels in journal. Follow up on work situation next session..."})]}),!m&&u.length>0&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("div",{className:"text-label mb-3",children:"Treatment Goals Addressed This Session"}),e.jsx("div",{className:"space-y-2",children:u.map(x=>e.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-purple-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:(n.goalsAddressed||[]).includes(x.id),onChange:()=>N(x.id),className:"mt-0.5 w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-gray-800",children:x.goal_text}),x.goal_category&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:x.goal_category})]})]},x.id))})]})]}),e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[e.jsxs("label",{className:"flex items-center gap-3 mb-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:x=>j(x.target.checked),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500"}),e.jsx("span",{className:"font-semibold text-gray-800",children:" Risk Present (suicide, homicide, self-harm)"})]}),h&&e.jsx("div",{className:"border-t-2 border-orange-200 pt-3",children:e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm font-semibold text-orange-800 mb-2",children:"Risk Assessment Details (Required when risk is flagged)"}),e.jsx("textarea",{value:n.riskAssessment||"",onChange:x=>y("riskAssessment",x.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Document risk factors, protective factors, safety plan, level of risk, interventions used, follow-up plan...",required:h})]})})]})]})}function tv({note:n,onChange:d,patientId:c,autoSave:o}){const[u,b]=f.useState([]),[m,v]=f.useState(!0),[h,p]=f.useState(n.riskPresent||!1);f.useEffect(()=>{w()},[c]);const w=async()=>{try{v(!0);const x=await qo(c,{status:"active"});b(x.goals||[])}catch(x){console.error("Error loading treatment goals:",x)}finally{v(!1)}},y=(x,C)=>{d(x,C),o&&setTimeout(()=>o(),500)},j=x=>{p(x),y("riskPresent",x)},N=x=>{const C=n.goalsAddressed||[];C.includes(x)?y("goalsAddressed",C.filter(k=>k!==x)):y("goalsAddressed",[...C,x])};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main bg-blue-50 border-2 border-blue-300",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Diagnosis Codes for This Session"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select all diagnoses addressed in this session. Required for billing and clinical documentation."})]}),e.jsx($o,{patientId:c,serviceDate:n.date_of_service||new Date().toISOString().split("T")[0],selectedDiagnoses:n.diagnosis_codes||[],onChange:x=>y("diagnosis_codes",x)})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-green-600 mr-2",children:"S"}),"Subjective / What Client Reports"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Client's symptoms, feelings, history"})]}),e.jsx("textarea",{value:n.subjective||"",onChange:x=>y("subjective",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Client reports feeling 'overwhelmed and anxious' over the past two weeks. States difficulty sleeping, racing thoughts, and increased irritability. Denies changes in appetite. Reports work stress as primary trigger..."})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Reported Symptoms (Optional)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Anxiety","Depression","Sleep Issues","Appetite Changes","Fatigue","Racing Thoughts","Irritability","Hopelessness","Difficulty Concentrating","Social Withdrawal"].map(x=>{const C=(n.reportedSymptoms||[]).includes(x);return e.jsx("button",{onClick:()=>{const E=n.reportedSymptoms||[];C?y("reportedSymptoms",E.filter(k=>k!==x)):y("reportedSymptoms",[...E,x])},className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${C?"bg-green-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:x},x)})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-green-600 mr-2",children:"O"}),"Objective / Clinical Observations"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Mental status, appearance, behavior"})]}),e.jsx("textarea",{value:n.objective||"",onChange:x=>y("objective",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Client arrived on time, appropriately dressed. Appeared anxious with fidgeting and rapid speech. Affect congruent with stated mood. Eye contact intermittent. Thought process organized. No evidence of psychosis..."})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Presentation Tags (Optional)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Engaged","Cooperative","Tearful","Anxious","Flat affect","Guarded","Appropriate dress","Good eye contact","Poor eye contact","Oriented x3"].map(x=>{const C=(n.clientPresentation||[]).includes(x);return e.jsx("button",{onClick:()=>{const E=n.clientPresentation||[];C?y("clientPresentation",E.filter(k=>k!==x)):y("clientPresentation",[...E,x])},className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${C?"bg-green-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:x},x)})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("label",{className:"block mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-green-600 mr-2",children:"A"}),"Assessment / Clinical Impression"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Progress, insights, clinical judgment"})]}),e.jsx("textarea",{value:n.assessment||"",onChange:x=>y("assessment",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Client presents with symptoms consistent with Generalized Anxiety Disorder. Symptoms appear to be exacerbated by work stress. Making progress on coping skills but requires continued support..."})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("div",{className:"text-label mb-3",children:"Interventions Used This Session"}),e.jsx(Yo,{selectedInterventions:n.interventionsSelected||[],onChange:x=>y("interventionsSelected",x),riskPresent:h})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("label",{className:"block mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-green-600 mr-2",children:"P"}),"Plan / Treatment Plan"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Next steps, homework, referrals"})]}),e.jsx("textarea",{value:n.plan||"",onChange:x=>y("plan",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Continue weekly therapy sessions. Homework: Practice relaxation techniques daily, complete thought log. Consider medication consultation if symptoms persist. Follow up on sleep hygiene next session..."})]}),!m&&u.length>0&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("div",{className:"text-label mb-3",children:"Treatment Goals Addressed This Session"}),e.jsx("div",{className:"space-y-2",children:u.map(x=>e.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-green-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:(n.goalsAddressed||[]).includes(x.id),onChange:()=>N(x.id),className:"mt-0.5 w-4 h-4 text-green-600 rounded focus:ring-green-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-gray-800",children:x.goal_text}),x.goal_category&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:x.goal_category})]})]},x.id))})]})]}),e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[e.jsxs("label",{className:"flex items-center gap-3 mb-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:x=>j(x.target.checked),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Risk Present (suicide, homicide, self-harm)"})]}),h&&e.jsx("div",{className:"border-t-2 border-orange-200 pt-3",children:e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm font-semibold text-orange-800 mb-2",children:"Risk Assessment Details (Required when risk is flagged)"}),e.jsx("textarea",{value:n.riskAssessment||"",onChange:x=>y("riskAssessment",x.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Document risk factors, protective factors, safety plan, level of risk, interventions used, follow-up plan...",required:h})]})})]})]})}function sv({note:n,onChange:d,autoSave:c}){const o=(h,p)=>{d(h,p),c&&setTimeout(()=>c(),500)},u=h=>{const p=n.servicesProvided||[];p.includes(h)?o("servicesProvided",p.filter(y=>y!==h)):o("servicesProvided",[...p,h])},b=[{value:"in_person",label:"In-Person Meeting"},{value:"phone",label:"Phone Call"},{value:"video",label:"Video Call"},{value:"email",label:"Email"},{value:"text",label:"Text Message"},{value:"collateral",label:"Collateral Contact"},{value:"home_visit",label:"Home Visit"},{value:"community",label:"Community Visit"}],m=[{title:"Resource Coordination",color:"blue",services:["Housing assistance","Food/nutrition resources","Transportation assistance","Utility assistance","Clothing/personal items","Financial assistance"]},{title:"Referrals & Linkages",color:"purple",services:["Medical referral","Psychiatric referral","Substance abuse treatment","Legal services","Employment services","Educational services","Childcare services","Domestic violence resources"]},{title:"Advocacy & Support",color:"green",services:["Benefits application","Insurance navigation","Appointment coordination","Care team communication","Family support","Crisis intervention","Discharge planning","System navigation"]},{title:"Documentation & Administrative",color:"gray",services:["Assessment completion","Care plan review","Progress monitoring","Release of information","Records request","Report preparation"]}],v=["Client engaged and receptive","Client declined services","Unable to reach client","Left voicemail","Referral accepted","Referral pending","Follow-up needed","Goal completed","No answer"];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main bg-teal-50 border-2 border-teal-300",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2 mb-4",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Contact Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Contact Type"}),e.jsxs("select",{value:n.contactType||"",onChange:h=>o("contactType",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white",children:[e.jsx("option",{value:"",children:"Select contact type..."}),b.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Duration (minutes)"}),e.jsx("input",{type:"number",value:n.duration||"",onChange:h=>o("duration",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white",placeholder:"e.g., 30",min:"1"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Contact With"}),e.jsx("input",{type:"text",value:n.contactWith||"",onChange:h=>o("contactWith",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white",placeholder:"e.g., Client, Family member (relationship), Agency name, etc."})]})]})]}),e.jsx("div",{className:"card-main",children:e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-800",children:"Purpose of Contact"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Why this contact was made"})]}),e.jsx("textarea",{value:n.purposeOfContact||"",onChange:h=>o("purposeOfContact",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Example: Follow-up on housing application submitted last week. Check in on client's overall well-being and current needs..."})]})}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Services Provided"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:m.map(h=>e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-semibold text-${h.color}-700 mb-2`,children:h.title}),e.jsx("div",{className:"space-y-2",children:h.services.map(p=>{const w=(n.servicesProvided||[]).includes(p);return e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:w,onChange:()=>u(p),className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:p})]},p)})})]},h.title))}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Other Services (not listed above)"}),e.jsx("input",{type:"text",value:n.otherServices||"",onChange:h=>o("otherServices",h.target.value),className:"mt-1 w-full px-4 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white",placeholder:"Describe any other services provided..."})]})})]}),e.jsx("div",{className:"card-main",children:e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-800",children:"Narrative / Details"}),e.jsx("span",{className:"text-xs text-gray-500",children:"What happened during the contact"})]}),e.jsx("textarea",{value:n.narrative||"",onChange:h=>o("narrative",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Example: Spoke with client regarding housing application. Client reported they received a call from the housing authority and have an interview scheduled for next Tuesday. Reviewed what documents to bring. Client expressed feeling hopeful about the process. Discussed backup plans if this application is not approved..."})]})}),e.jsxs("div",{className:"card-main",children:[e.jsxs("label",{className:"block mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-800",children:"Client Status / Response"}),e.jsx("span",{className:"text-xs text-gray-500",children:"How client is doing, their response"})]}),e.jsx("textarea",{value:n.clientStatus||"",onChange:h=>o("clientStatus",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Example: Client was engaged and receptive during our conversation. Reports feeling more stable since starting new medication. Mood appeared improved from last contact..."})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Contact Outcome (Optional)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(h=>{const p=(n.contactOutcome||[]).includes(h);return e.jsx("button",{onClick:()=>{const w=n.contactOutcome||[];p?o("contactOutcome",w.filter(y=>y!==h)):o("contactOutcome",[...w,h])},className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${p?"bg-teal-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:h},h)})})]})]}),e.jsxs("div",{className:"card-main bg-yellow-50 border-2 border-yellow-300",children:[e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("span",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("span",{children:""}),"Follow-up Plan / Next Steps"]})}),e.jsx("textarea",{value:n.followUpPlan||"",onChange:h=>o("followUpPlan",h.target.value),className:"w-full px-4 py-3 border-2 border-yellow-400 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Example: Will call client Thursday to follow up on housing interview. Need to research additional food bank options in client's new neighborhood. Schedule care team meeting for next month..."})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Next Follow-up Date:"}),e.jsx("input",{type:"date",value:n.followUpDate||"",onChange:h=>o("followUpDate",h.target.value),className:"px-3 py-1 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500"})]})})]}),e.jsx("div",{className:"card-main",children:e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-semibold text-gray-800",children:"Barriers / Concerns (Optional)"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Challenges or obstacles noted"})]}),e.jsx("textarea",{value:n.barriers||"",onChange:h=>o("barriers",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Example: Client lacks transportation to attend housing interview. Language barrier making it difficult to navigate benefits application..."})]})})]})}function av({note:n,onChange:d,autoSave:c}){const[o,u]=f.useState(n.riskPresent||!1),b=(y,j)=>{d(y,j),c&&setTimeout(()=>c(),500)},m=y=>{u(y),b("riskPresent",y)},v=y=>(n.mentalStatusExam||{})[y]||"",h=(y,j)=>{const N=n.mentalStatusExam||{};b("mentalStatusExam",{...N,[y]:j})},p=({label:y,field:j,options:N})=>e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:y}),e.jsxs("select",{value:v(j),onChange:x=>h(j,x.target.value),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white shadow-sm",children:[e.jsx("option",{value:"",children:"Select..."}),N.map(x=>e.jsx("option",{value:x,children:x},x))]})]})}),w=({label:y,field:j,placeholder:N,rows:x=3})=>e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:y}),e.jsx("textarea",{value:v(j),onChange:C=>h(j,C.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 resize-none bg-white shadow-sm",rows:x,placeholder:N})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-teal",children:[e.jsx("span",{className:"mr-2",children:""}),"Appearance & Grooming"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(p,{label:"General Appearance",field:"appearance",options:["Well-groomed","Disheveled","Unkempt","Bizarre","Appropriate","Casual"]}),e.jsx(p,{label:"Hygiene",field:"hygiene",options:["Good","Fair","Poor","Malodorous"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(w,{label:"Additional Notes",field:"appearanceNotes",placeholder:"Additional observations about appearance...",rows:2})})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-teal",children:[e.jsx("span",{className:"mr-2",children:""}),"Behavior & Motor Activity"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(p,{label:"Psychomotor Activity",field:"psychomotorActivity",options:["Normal","Agitated","Retarded","Restless","Hyperactive","Lethargic"]}),e.jsx(p,{label:"Eye Contact",field:"eyeContact",options:["Good","Fair","Poor","Avoidant","Intense/Staring"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(w,{label:"Additional Behavioral Observations",field:"behaviorNotes",placeholder:"Tics, tremors, mannerisms, gait, posture...",rows:2})})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-teal",children:[e.jsx("span",{className:"mr-2",children:""}),"Speech"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(p,{label:"Rate",field:"speechRate",options:["Normal","Slow","Rapid","Pressured"]}),e.jsx(p,{label:"Volume",field:"speechVolume",options:["Normal","Loud","Soft","Whispered"]}),e.jsx(p,{label:"Tone",field:"speechTone",options:["Normal","Monotone","Varied","Flat"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(w,{label:"Speech Characteristics",field:"speechNotes",placeholder:"Slurred, stuttering, articulation issues...",rows:2})})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-teal",children:[e.jsx("span",{className:"mr-2",children:""}),"Mood & Affect"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Mood (subjective)"}),e.jsx("input",{type:"text",value:v("mood"),onChange:y=>h("mood",y.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white shadow-sm",placeholder:"Client's own words (e.g., 'sad', 'anxious')"})]})}),e.jsx(p,{label:"Affect (objective)",field:"affect",options:["Appropriate","Flat","Blunted","Labile","Restricted","Congruent","Incongruent"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(w,{label:"Mood & Affect Details",field:"moodNotes",placeholder:"Congruence, range, reactivity...",rows:2})})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-teal",children:[e.jsx("span",{className:"mr-2",children:""}),"Thought Process"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(p,{label:"Organization",field:"thoughtProcess",options:["Logical","Goal-directed","Tangential","Circumstantial","Loose associations","Flight of ideas","Thought blocking"]}),e.jsx(p,{label:"Flow",field:"thoughtFlow",options:["Normal","Rapid","Slow","Interrupted"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(w,{label:"Additional Observations",field:"thoughtProcessNotes",placeholder:"Racing thoughts, ruminations, perseverations...",rows:2})})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-teal",children:[e.jsx("span",{className:"mr-2",children:""}),"Thought Content"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-wrap gap-3",children:["Suicidal ideation","Homicidal ideation","Delusions","Obsessions","Phobias","Paranoia"].map(y=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:(v("thoughtContent")||[]).includes(y),onChange:j=>{const N=v("thoughtContent")||[],x=j.target.checked?[...N,y]:N.filter(C=>C!==y);h("thoughtContent",x)},className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"}),e.jsx("span",{className:"checkbox-label",children:y})]},y))}),e.jsx(w,{label:"Thought Content Details",field:"thoughtContentNotes",placeholder:"Describe any concerning thought content, including intent, plan, means...",rows:3})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-teal",children:[e.jsx("span",{className:"mr-2",children:""}),"Perception"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-wrap gap-3",children:["No perceptual disturbances","Auditory hallucinations","Visual hallucinations","Tactile hallucinations","Illusions","Depersonalization","Derealization"].map(y=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:(v("perception")||[]).includes(y),onChange:j=>{const N=v("perception")||[],x=j.target.checked?[...N,y]:N.filter(C=>C!==y);h("perception",x)},className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"}),e.jsx("span",{className:"checkbox-label",children:y})]},y))}),e.jsx(w,{label:"Perception Details",field:"perceptionNotes",placeholder:"Describe any perceptual disturbances...",rows:2})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-teal",children:[e.jsx("span",{className:"mr-2",children:""}),"Cognition"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(p,{label:"Orientation",field:"orientation",options:["Oriented x4","Oriented x3","Oriented x2","Oriented x1","Disoriented"]}),e.jsx(p,{label:"Memory",field:"memory",options:["Intact","Impaired recent","Impaired remote","Impaired both"]}),e.jsx(p,{label:"Concentration",field:"concentration",options:["Good","Fair","Poor","Distractible"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(w,{label:"Cognitive Details",field:"cognitionNotes",placeholder:"Attention, abstract thinking, calculations...",rows:2})})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-teal",children:[e.jsx("span",{className:"mr-2",children:""}),"Insight & Judgment"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(p,{label:"Insight",field:"insight",options:["Good","Fair","Poor","Absent"]}),e.jsx(p,{label:"Judgment",field:"judgment",options:["Good","Fair","Poor","Impaired"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(w,{label:"Insight & Judgment Details",field:"insightJudgmentNotes",placeholder:"Awareness of illness, decision-making capacity...",rows:2})})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-teal",children:[e.jsx("span",{className:"mr-2",children:""}),"Clinical Summary & Impressions"]}),e.jsx(w,{label:"Summary",field:"summary",placeholder:"Overall clinical impression, diagnostic considerations, recommendations...",rows:5})]}),e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[e.jsxs("label",{className:"flex items-center gap-3 mb-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:y=>m(y.target.checked),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500"}),e.jsx("span",{className:"font-semibold text-gray-800",children:" Risk Present (suicide, homicide, self-harm)"})]}),o&&e.jsx("div",{className:"border-t-2 border-orange-200 pt-3",children:e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm font-semibold text-orange-800 mb-2",children:"Risk Assessment Details (Required when risk is flagged)"}),e.jsx("textarea",{value:n.riskAssessment||"",onChange:y=>b("riskAssessment",y.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Document risk factors, protective factors, safety plan, level of risk, interventions used, follow-up plan...",required:o})]})})]})]})}function lv({medications:n=[],onChange:d}){const[c,o]=f.useState(!1),[u,b]=f.useState(null),[m,v]=f.useState({name:"",dosage:"",frequency:"",prescriber:"",purpose:""}),h=()=>{v({name:"",dosage:"",frequency:"",prescriber:"",purpose:""}),o(!1),b(null)},p=()=>{if(!m.name.trim())return;const N={...m},x=[...n,N];d(x),h()},w=N=>{v(n[N]),b(N),o(!0)},y=()=>{if(!m.name.trim())return;const N=[...n];N[u]={...m},d(N),h()},j=N=>{const x=n.filter((C,E)=>E!==N);d(x)};return e.jsxs("div",{className:"space-y-4",children:[n.length>0&&e.jsx("div",{className:"space-y-2",children:n.map((N,x)=>e.jsx("div",{className:"p-3 bg-white border-2 border-gray-300 rounded-lg hover:border-indigo-400 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[N.name,N.dosage&&e.jsx("span",{className:"ml-2 text-indigo-600",children:N.dosage})]}),N.frequency&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Frequency: ",N.frequency]}),N.prescriber&&e.jsxs("div",{className:"text-sm text-gray-600",children:["Prescribed by: ",N.prescriber]}),N.purpose&&e.jsxs("div",{className:"text-sm text-gray-600",children:["For: ",N.purpose]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>w(x),className:"text-sm text-indigo-600 hover:text-indigo-800 underline",children:"Edit"}),e.jsx("button",{onClick:()=>j(x),className:"text-sm text-red-600 hover:text-red-800 underline",children:"Remove"})]})]})},x))}),c?e.jsxs("div",{className:"p-4 bg-indigo-50 border-2 border-indigo-300 rounded-lg space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:["Medication Name ",e.jsx(De,{})]}),e.jsx("input",{type:"text",value:m.name,onChange:N=>v({...m,name:N.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Sertraline, Adderall XR",autoFocus:!0})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Dosage"}),e.jsx("input",{type:"text",value:m.dosage,onChange:N=>v({...m,dosage:N.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., 50mg, 20mg XR"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Frequency"}),e.jsx("input",{type:"text",value:m.frequency,onChange:N=>v({...m,frequency:N.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Once daily, Twice daily"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Prescriber"}),e.jsx("input",{type:"text",value:m.prescriber,onChange:N=>v({...m,prescriber:N.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Dr. Smith, Psychiatrist"})]})}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"What it's for"}),e.jsx("input",{type:"text",value:m.purpose,onChange:N=>v({...m,purpose:N.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Depression, ADHD, Anxiety"})]})})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:u!==null?y:p,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:u!==null?"Update Medication":"Add Medication"}),e.jsx("button",{onClick:h,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 font-medium",children:"Cancel"})]})]}):e.jsx("button",{onClick:()=>o(!0),className:"w-full px-4 py-3 border-2 border-dashed border-indigo-400 rounded-lg text-indigo-700 font-medium hover:bg-indigo-50 transition-colors",children:"+ Add Medication"}),n.length===0&&!c&&e.jsx("div",{className:"text-sm text-gray-500 italic text-center py-2",children:"No medications documented yet"})]})}function nv({note:n,onChange:d,autoSave:c}){const[o,u]=f.useState(n.riskPresent||!1),b=(p,w)=>{d(p,w),c&&setTimeout(()=>c(),500)},m=p=>{u(p),b("riskPresent",p)},v=p=>(n.presentingConcerns||{})[p]||"",h=(p,w)=>{const y=n.presentingConcerns||{};b("presentingConcerns",{...y,[p]:w})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"Presenting Problem / Chief Complaint"]}),e.jsx("textarea",{value:n.behaviorProblem||"",onChange:p=>b("behaviorProblem",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"In client's own words: What brings you in today? What are you hoping to work on?"})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"History of Present Illness"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Duration & Onset"}),e.jsx("textarea",{value:v("duration"),onChange:p=>h("duration",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"When did symptoms begin? What was happening at that time?"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Frequency & Severity"}),e.jsx("textarea",{value:v("frequency"),onChange:p=>h("frequency",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"How often? How severe? What makes it better/worse?"})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"Previous Mental Health Treatment"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Prior Therapy/Counseling"}),e.jsx("textarea",{value:v("priorTherapy"),onChange:p=>h("priorTherapy",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"When? With whom? What was helpful/not helpful?"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Psychiatric Hospitalizations"}),e.jsx("textarea",{value:v("hospitalizations"),onChange:p=>h("hospitalizations",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Dates, reasons, outcomes..."})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"Family History"]}),e.jsx("textarea",{value:v("familyHistory"),onChange:p=>h("familyHistory",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Mental health diagnoses, substance use, suicide attempts in family members..."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"Substance Use"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Alcohol Use"}),e.jsx("textarea",{value:v("alcoholUse"),onChange:p=>h("alcoholUse",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Frequency, amount, history of abuse..."})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Drug Use (Recreational/Prescription)"}),e.jsx("textarea",{value:v("drugUse"),onChange:p=>h("drugUse",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Substances, frequency, history..."})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"Medical History"]}),e.jsx("textarea",{value:v("medicalHistory"),onChange:p=>h("medicalHistory",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Chronic conditions, surgeries, head injuries, neurological issues..."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"Current Medications"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-4",children:"Document all medications the client is currently taking (psychiatric, medical, OTC, supplements). This includes medications prescribed by psychiatrists, PCPs, and other providers."}),e.jsx(lv,{medications:n.currentMedications||[],onChange:p=>b("currentMedications",p)})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"Social & Developmental History"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Childhood/Development"}),e.jsx("textarea",{value:v("childhood"),onChange:p=>h("childhood",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Developmental milestones, childhood experiences, trauma..."})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Education & Employment"}),e.jsx("textarea",{value:v("education"),onChange:p=>h("education",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Highest education, current employment, work history..."})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Relationships & Support System"}),e.jsx("textarea",{value:v("relationships"),onChange:p=>h("relationships",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Marital status, children, family support, friends..."})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"Current Functioning"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Sleep"}),e.jsx("input",{type:"text",value:v("sleep"),onChange:p=>h("sleep",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white shadow-sm",placeholder:"Hours per night, quality, difficulties..."})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Appetite/Eating"}),e.jsx("input",{type:"text",value:v("appetite"),onChange:p=>h("appetite",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white shadow-sm",placeholder:"Changes, patterns, concerns..."})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Energy Level"}),e.jsx("input",{type:"text",value:v("energy"),onChange:p=>h("energy",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white shadow-sm",placeholder:"Fatigue, motivation, activity level..."})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"Treatment Goals"]}),e.jsx("textarea",{value:n.plan||"",onChange:p=>b("plan",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"What does the client hope to achieve? What are the initial treatment goals? Recommended frequency of sessions?"})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"Clinical Impressions & Diagnostic Considerations"]}),e.jsx("textarea",{value:v("impressions"),onChange:p=>h("impressions",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Initial clinical formulation, provisional diagnoses, treatment recommendations..."})]}),e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[e.jsxs("label",{className:"flex items-center gap-3 mb-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:p=>m(p.target.checked),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500"}),e.jsx("span",{className:"font-semibold text-gray-800",children:" Risk Present (suicide, homicide, self-harm)"})]}),o&&e.jsx("div",{className:"border-t-2 border-orange-200 pt-3",children:e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm font-semibold text-orange-800 mb-2",children:"Risk Assessment Details (Required when risk is flagged)"}),e.jsx("textarea",{value:n.riskAssessment||"",onChange:p=>b("riskAssessment",p.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Document risk factors, protective factors, safety plan, level of risk, interventions used, follow-up plan...",required:o})]})})]})]})}function iv({note:n,onChange:d,autoSave:c}){const o=(m,v)=>{d(m,v),c&&setTimeout(()=>c(),500)},u=m=>(n.clinicalObservations||{})[m]||"",b=(m,v)=>{const h=n.clinicalObservations||{};o("clinicalObservations",{...h,[m]:v})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-emerald",children:[e.jsx("span",{className:"mr-2",children:""}),"Reason for Discharge"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-wrap gap-3",children:["Treatment goals achieved","Client request","Mutual agreement","Client no-show","Administrative discharge","Transfer to another provider","Other"].map(m=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"dischargeReason",value:m,checked:u("dischargeReason")===m,onChange:v=>b("dischargeReason",v.target.value),className:"w-4 h-4 text-emerald-600"}),e.jsx("span",{className:"checkbox-label",children:m})]},m))}),e.jsx("textarea",{value:u("dischargeReasonDetails"),onChange:m=>b("dischargeReasonDetails",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Additional details..."})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-emerald",children:[e.jsx("span",{className:"mr-2",children:""}),"Treatment Summary"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Dates of Treatment"}),e.jsx("input",{type:"text",value:u("treatmentDates"),onChange:m=>b("treatmentDates",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white shadow-sm",placeholder:"From [date] to [date] - Total of X sessions"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Presenting Problem (at intake)"}),e.jsx("textarea",{value:n.behaviorProblem||"",onChange:m=>o("behaviorProblem",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"What brought client to treatment..."})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Diagnosis/Diagnoses"}),e.jsx("textarea",{value:u("diagnoses"),onChange:m=>b("diagnoses",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Primary and secondary diagnoses..."})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-emerald",children:[e.jsx("span",{className:"mr-2",children:""}),"Interventions & Treatment Modalities"]}),e.jsx("textarea",{value:n.intervention||"",onChange:m=>o("intervention",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"CBT, DBT, EMDR, supportive counseling, psychoeducation, medication management..."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-emerald",children:[e.jsx("span",{className:"mr-2",children:""}),"Progress & Treatment Outcomes"]}),e.jsx("textarea",{value:n.response||"",onChange:m=>o("response",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Describe client progress toward treatment goals, symptom reduction, skill development, behavioral changes..."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-emerald",children:[e.jsx("span",{className:"mr-2",children:""}),"Current Status at Discharge"]}),e.jsx("textarea",{value:u("currentStatus"),onChange:m=>b("currentStatus",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Current symptoms, functioning level, remaining challenges, strengths..."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-emerald",children:[e.jsx("span",{className:"mr-2",children:""}),"Recommendations & Follow-Up Plan"]}),e.jsx("textarea",{value:n.plan||"",onChange:m=>o("plan",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Future treatment recommendations, referrals, follow-up care, relapse prevention strategies, resources provided..."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-emerald",children:[e.jsx("span",{className:"mr-2",children:""}),"Prognosis"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex gap-4",children:["Excellent","Good","Fair","Guarded","Poor"].map(m=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"prognosis",value:m,checked:u("prognosis")===m,onChange:v=>b("prognosis",v.target.value),className:"w-4 h-4 text-emerald-600"}),e.jsx("span",{className:"checkbox-label",children:m})]},m))}),e.jsx("textarea",{value:u("prognosisDetails"),onChange:m=>b("prognosisDetails",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Additional prognosis details..."})]})]})]})}function rv({note:n,onChange:d,autoSave:c}){const o=(u,b)=>{d(u,b),c&&setTimeout(()=>c(),500)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main bg-red-50 border-2 border-red-400",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-3xl",children:""}),e.jsx("h3",{className:"text-xl font-bold text-red-800",children:"Crisis/Emergency Documentation"})]}),e.jsx("p",{className:"text-sm text-red-700",children:"Document all crisis assessments, interventions, and safety planning thoroughly."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-red",children:[e.jsx("span",{className:"mr-2",children:""}),"Crisis Presentation"]}),e.jsx("textarea",{value:n.behaviorProblem||"",onChange:u=>o("behaviorProblem",u.target.value),className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Describe the crisis situation: What happened? When? Who was involved? Client's presentation and immediate concerns...",required:!0})]}),e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-400",children:[e.jsxs("h3",{className:"text-lg font-semibold text-orange-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Risk Assessment (REQUIRED)"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-orange-800 mb-2 block",children:"Risk Level"}),e.jsx("div",{className:"flex gap-4",children:["Low","Moderate","High","Imminent"].map(u=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"riskLevel",value:u,className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:`text-sm font-medium ${u==="Imminent"||u==="High"?"text-red-700":"text-gray-700"}`,children:u})]},u))})]})}),e.jsx("textarea",{value:n.riskAssessment||"",onChange:u=>o("riskAssessment",u.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"6",placeholder:`DETAILED RISK ASSESSMENT REQUIRED:
- Suicidal ideation (intent, plan, means, timeline)?
- Homicidal ideation (intent, plan, means, target)?
- Self-harm behaviors?
- Substance use/intoxication?
- Risk factors vs. protective factors
- Access to lethal means
- Support system availability
- History of attempts`,required:!0})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-red",children:[e.jsx("span",{className:"mr-2",children:""}),"Crisis Interventions Provided"]}),e.jsx("textarea",{value:n.intervention||"",onChange:u=>o("intervention",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"What interventions were used? (e.g., crisis counseling, de-escalation, safety planning, referrals, emergency contacts, medication evaluation, hospitalization consideration...)",required:!0})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-red",children:[e.jsx("span",{className:"mr-2",children:""}),"Client Response to Intervention"]}),e.jsx("textarea",{value:n.response||"",onChange:u=>o("response",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"How did client respond to interventions? Mood/affect changes? Willingness to engage in safety planning?",required:!0})]}),e.jsxs("div",{className:"card-main bg-green-50 border-2 border-green-400",children:[e.jsxs("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Safety Plan (REQUIRED)"]}),e.jsx("textarea",{value:n.plan||"",onChange:u=>o("plan",u.target.value),className:"w-full px-4 py-3 border-2 border-green-400 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none bg-white shadow-sm",rows:"6",placeholder:`DETAILED SAFETY PLAN REQUIRED:
- Warning signs/triggers identified
- Internal coping strategies
- People/places for distraction
- Support contacts (names & numbers)
- Professional resources (crisis line, emergency services)
- Means restriction (removing lethal means)
- Follow-up plan
- Emergency numbers provided (988, local crisis line, etc.)`,required:!0})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-red",children:[e.jsx("span",{className:"mr-2",children:""}),"Disposition & Follow-Up Plan"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Disposition"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:["Returned home with safety plan","Emergency contact notified","Referred to higher level of care","Voluntary hospitalization","Involuntary commitment initiated","Police/EMS contacted","Other"].map(u=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-red-600 rounded"}),e.jsx("span",{className:"checkbox-label",children:u})]},u))})]})}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Follow-up plan: Next appointment scheduled? Emergency contacts? Referrals made?"})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-red",children:[e.jsx("span",{className:"mr-2",children:""}),"Collateral Contacts (if any)"]}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Document any contact with family, emergency services, other providers, etc."})]})]})}function cv({note:n,onChange:d,autoSave:c}){const o=n.riskAssessment||{suicidalIdeation:{present:!1,frequency:"None",intentLevel:"No intent",planDetails:"",accessToMeans:"",timeline:"",previousAttempts:""},homicidalIdeation:{present:!1,details:""},selfHarm:{present:!1,details:""},riskFactors:"",protectiveFactors:"",overallRiskLevel:"Low",safetyPlan:"",dispositionRecommendations:""},u=(m,v)=>{d(m,v),c&&setTimeout(()=>c(),500)},b=(m,v)=>{const h={...o},p=m.split(".");let w=h;for(let y=0;y<p.length-1;y++)w=w[p[y]];w[p[p.length-1]]=v,u("riskAssessment",h)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-400",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-3xl",children:""}),e.jsx("h3",{className:"text-xl font-bold text-orange-800",children:"Comprehensive Risk Assessment"})]}),e.jsx("p",{className:"text-sm text-orange-700",children:"Thorough evaluation of suicide, homicide, and self-harm risk with safety planning."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-orange",children:[e.jsx("span",{className:"mr-2",children:""}),"Reason for Assessment"]}),e.jsx("textarea",{value:n.behaviorProblem||"",onChange:m=>u("behaviorProblem",m.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"What prompted this risk assessment?"})]}),e.jsxs("div",{className:"card-main bg-red-50 border-2 border-red-300",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Suicidal Ideation Assessment"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3 mb-2",children:[e.jsx("input",{type:"checkbox",className:"w-5 h-5 text-red-600 rounded",checked:o.suicidalIdeation.present,onChange:m=>b("suicidalIdeation.present",m.target.checked)}),e.jsx("span",{className:"font-semibold text-red-800",children:"Current suicidal ideation present"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Ideation Frequency"}),e.jsxs("select",{className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg bg-white shadow-sm",value:o.suicidalIdeation.frequency,onChange:m=>b("suicidalIdeation.frequency",m.target.value),children:[e.jsx("option",{children:"None"}),e.jsx("option",{children:"Rare (few times/year)"}),e.jsx("option",{children:"Occasional (monthly)"}),e.jsx("option",{children:"Frequent (weekly)"}),e.jsx("option",{children:"Daily"}),e.jsx("option",{children:"Constant"})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Intent Level"}),e.jsxs("select",{className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg bg-white shadow-sm",value:o.suicidalIdeation.intentLevel,onChange:m=>b("suicidalIdeation.intentLevel",m.target.value),children:[e.jsx("option",{children:"No intent"}),e.jsx("option",{children:"Low (passive wishes)"}),e.jsx("option",{children:"Moderate (some intent)"}),e.jsx("option",{children:"High (strong intent)"}),e.jsx("option",{children:"Imminent"})]})]})})]}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Plan Details"}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Is there a plan? How specific? How lethal?",value:o.suicidalIdeation.planDetails,onChange:m=>b("suicidalIdeation.planDetails",m.target.value)})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Access to Means"}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Does client have access to lethal means (firearms, medications, etc.)?",value:o.suicidalIdeation.accessToMeans,onChange:m=>b("suicidalIdeation.accessToMeans",m.target.value)})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Timeline"}),e.jsx("input",{type:"text",className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 bg-white shadow-sm",placeholder:"When? Immediate? Within days/weeks?",value:o.suicidalIdeation.timeline,onChange:m=>b("suicidalIdeation.timeline",m.target.value)})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Previous Attempts"}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-red-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"History of suicide attempts? When? Method? Outcome?",value:o.suicidalIdeation.previousAttempts,onChange:m=>b("suicidalIdeation.previousAttempts",m.target.value)})]})})]})]}),e.jsxs("div",{className:"card-main bg-red-50 border-2 border-red-300",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Homicidal/Violence Risk Assessment"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3 mb-2",children:[e.jsx("input",{type:"checkbox",className:"w-5 h-5 text-red-600 rounded",checked:o.homicidalIdeation.present,onChange:m=>b("homicidalIdeation.present",m.target.checked)}),e.jsx("span",{className:"font-semibold text-red-800",children:"Homicidal ideation or violence risk present"})]})}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Target identified? Plan? Access to weapons? History of violence? Duty to warn considerations?",value:o.homicidalIdeation.details,onChange:m=>b("homicidalIdeation.details",m.target.value)})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-orange",children:[e.jsx("span",{className:"mr-2",children:""}),"Self-Harm Assessment"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3 mb-2",children:[e.jsx("input",{type:"checkbox",className:"w-5 h-5 text-orange-600 rounded",checked:o.selfHarm.present,onChange:m=>b("selfHarm.present",m.target.checked)}),e.jsx("span",{className:"font-semibold text-gray-700",children:"Non-suicidal self-injury present"})]})}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-orange-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Methods? Frequency? Function (emotion regulation, punishment, etc.)?",value:o.selfHarm.details,onChange:m=>b("selfHarm.details",m.target.value)})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-orange",children:[e.jsx("span",{className:"mr-2",children:""}),"Risk & Protective Factors"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-red-700 mb-2 block",children:"Risk Factors"}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 resize-none bg-white shadow-sm",rows:"5",placeholder:`- Recent losses
- Substance use
- Social isolation
- Hopelessness
- Impulsivity
- Access to means
- Mental health symptoms
- Financial/legal problems`,value:o.riskFactors,onChange:m=>b("riskFactors",m.target.value)})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-green-700 mb-2 block",children:"Protective Factors"}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-green-400 rounded-lg focus:ring-2 focus:ring-green-500 resize-none bg-white shadow-sm",rows:"5",placeholder:`- Strong support system
- Reasons for living
- Engaged in treatment
- Coping skills
- Religious/spiritual beliefs
- Future goals
- Responsibility to others
- Problem-solving ability`,value:o.protectiveFactors,onChange:m=>b("protectiveFactors",m.target.value)})]})})]})]}),e.jsxs("div",{className:"card-main bg-orange-100 border-2 border-orange-400",children:[e.jsxs("h3",{className:"text-lg font-semibold text-orange-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Overall Risk Level"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-wrap gap-4",children:["Low","Low-Moderate","Moderate","Moderate-High","High","Imminent"].map(m=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"overallRisk",value:m,className:"w-4 h-4 text-orange-600",checked:o.overallRiskLevel===m,onChange:v=>b("overallRiskLevel",v.target.value)}),e.jsx("span",{className:`text-sm font-medium ${m.includes("High")||m==="Imminent"?"text-red-700":"text-gray-700"}`,children:m})]},m))}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Clinical Rationale"}),e.jsx("textarea",{value:o.dispositionRecommendations,onChange:m=>b("dispositionRecommendations",m.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Clinical rationale for risk level determination...",required:!0})]})})]})]}),e.jsxs("div",{className:"card-main bg-green-50 border-2 border-green-400",children:[e.jsxs("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Interventions & Safety Plan"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Interventions Provided"}),e.jsx("textarea",{value:n.intervention||"",onChange:m=>u("intervention",m.target.value),className:"w-full px-4 py-3 border-2 border-green-400 rounded-lg focus:ring-2 focus:ring-green-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Crisis counseling, means restriction, emergency contacts, referrals..."})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Safety Plan"}),e.jsx("textarea",{value:n.plan||"",onChange:m=>u("plan",m.target.value),className:"w-full px-4 py-3 border-2 border-green-400 rounded-lg focus:ring-2 focus:ring-green-500 resize-none bg-white shadow-sm",rows:"6",placeholder:`Detailed safety plan:
- Warning signs
- Coping strategies
- Distraction activities
- Support contacts (names & numbers)
- Professional resources
- Crisis line numbers (988)
- Means restriction plan
- Follow-up schedule`,required:!0})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-orange",children:[e.jsx("span",{className:"mr-2",children:""}),"Follow-Up Plan & Recommendations"]}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-orange-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Next appointment? Frequency of contact? Collateral involvement? Referrals? Hospitalization? Level of care recommendations?",value:o.safetyPlan,onChange:m=>b("safetyPlan",m.target.value)})]})]})}function ov({note:n,onChange:d,autoSave:c}){const o=(u,b)=>{d(u,b),c&&setTimeout(()=>c(),500)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Type of Administrative Note"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:["Care coordination","Consultation with colleague","Phone contact","Email correspondence","Collateral contact","Documentation review","Treatment planning","Case management","Supervision notes","Peer review","Quality assurance","Insurance coordination","Referral coordination","Records request","Other"].map(u=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-gray-600 rounded"}),e.jsx("span",{className:"checkbox-label",children:u})]},u))})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Details"]}),e.jsx("textarea",{value:n.behaviorProblem||"",onChange:u=>o("behaviorProblem",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 resize-none bg-white shadow-sm",rows:"8",placeholder:`Document the administrative activity:

- Date and time
- Who was involved (names, roles)
- Purpose of contact/activity
- Information discussed or exchanged
- Decisions made
- Follow-up needed
- Documents generated or reviewed`})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Participants/Contacts"]}),e.jsx("textarea",{value:n.intervention||"",onChange:u=>o("intervention",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Who was involved? (Names, organizations, roles)"})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Outcome & Actions Taken"]}),e.jsx("textarea",{value:n.response||"",onChange:u=>o("response",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"What was accomplished? Any decisions or agreements?"})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Follow-Up Required"]}),e.jsx("textarea",{value:n.plan||"",onChange:u=>o("plan",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Next steps? Who is responsible? Timeline?"})]}),e.jsxs("div",{className:"card-main bg-gray-50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Additional Notes"]}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Any other relevant information..."})]}),e.jsxs("div",{className:"card-main bg-blue-50 border-2 border-blue-300",children:[e.jsxs("h3",{className:"section-header-blue",children:[e.jsx("span",{className:"mr-2",children:""}),"Time Documentation"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Duration (minutes)"}),e.jsx("input",{type:"number",className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white shadow-sm",placeholder:"0",min:"0"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Billable?"}),e.jsxs("select",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white shadow-sm",children:[e.jsx("option",{children:"Yes"}),e.jsx("option",{children:"No"}),e.jsx("option",{children:"To be determined"})]})]})})]})]})]})}const dv=["Mild","Moderate","Severe","In partial remission","In full remission","With psychotic features","Unspecified"],tf=n=>!n||n.length<4?n:n.slice(0,3)+"."+n.slice(3);function uv({selectedCodes:n=[],onChange:d,maxBillable:c=4,showBillableToggle:o=!0,showPrimarySelector:u=!0,showSeveritySelector:b=!0,disabled:m=!1}){const[v,h]=f.useState(""),[p,w]=f.useState([]),[y,j]=f.useState(!1),[N,x]=f.useState(!1),[C,E]=f.useState(null),[k,R]=f.useState({top:0,left:0,width:0}),L=f.useRef(null),A=f.useRef(null),G=f.useRef(null);f.useEffect(()=>{if(L.current&&clearTimeout(L.current),v.length<2){w([]),x(!1);return}return L.current=setTimeout(async()=>{j(!0),E(null);try{const U=await sb(v,"ICD10",50);w(U.codes||[]),x(!0)}catch(U){console.error("Error searching codes:",U),E("Failed to search codes. Please try again."),w([])}finally{j(!1)}},300),()=>{L.current&&clearTimeout(L.current)}},[v]),f.useEffect(()=>{if(N&&G.current){const U=G.current.getBoundingClientRect();R({top:U.bottom+window.scrollY,left:U.left+window.scrollX,width:U.width})}},[N]),f.useEffect(()=>{const U=ae=>{A.current&&!A.current.contains(ae.target)&&x(!1)};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]);const P=U=>{if(n.some(_=>_.code===U.code)){E(`${U.code} is already selected`);return}const ae=n.filter(_=>_.billable).length,D={code:U.code,description:U.description,billable:ae<c,primary:n.length===0,severity:null};d([...n,D]),h(""),x(!1),E(null)},T=U=>{const ae=n.filter(D=>D.code!==U);n.find(D=>D.code===U)?.primary&&ae.length>0&&(ae[0].primary=!0),d(ae)},xe=(U,ae,D)=>{const _=n.map(M=>{if(M.code===U){const Q={...M,[ae]:D};return Q}return ae==="primary"&&D===!0?{...M,primary:!1}:M});if(ae==="billable"&&D===!0&&_.filter(Q=>Q.billable).length>c){E(`Maximum ${c} billable diagnoses allowed`);return}d(_),E(null)},ve=U=>{if(U===0)return;const ae=[...n];[ae[U-1],ae[U]]=[ae[U],ae[U-1]],d(ae)},me=U=>{if(U===n.length-1)return;const ae=[...n];[ae[U],ae[U+1]]=[ae[U+1],ae[U]],d(ae)},oe=n.filter(U=>U.billable).length,H=()=>{if(!N)return null;const U=e.jsx("div",{ref:A,style:{position:"absolute",top:`${k.top}px`,left:`${k.left}px`,width:`${k.width}px`,zIndex:9999},className:"mt-2 bg-white border-2 border-gray-200 rounded-lg shadow-xl max-h-96 overflow-y-auto",children:p.length>0?p.map((ae,D)=>e.jsxs("button",{onClick:()=>P(ae),className:"w-full px-4 py-3 text-left hover:bg-blue-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:tf(ae.code)}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:ae.description})]},D)):!y&&v.length>=2&&e.jsxs("div",{className:"p-4 text-center text-gray-500",children:['No codes found matching "',v,'"']})});return U0.createPortal(U,document.body)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(te,{children:["Search ICD-10 Codes",e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",oe,"/",c," billable selected)"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:G,type:"text",value:v,onChange:U=>h(U.target.value),placeholder:"Search by code or description (e.g., F41.1 or anxiety)...",disabled:m,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm disabled:bg-gray-100 disabled:cursor-not-allowed"}),y&&e.jsx("div",{className:"absolute right-3 top-3",children:e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-blue-500 border-t-transparent rounded-full"})})]})]}),H(),C&&e.jsx(tt,{children:C}),n.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700",children:["Selected Diagnoses (",n.length,")"]}),n.map((U,ae)=>e.jsx("div",{className:`bg-white border-2 rounded-lg p-4 ${U.primary?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-bold text-gray-900",children:tf(U.code)}),U.primary&&e.jsx("span",{className:"px-2 py-0.5 bg-blue-500 text-white text-xs font-semibold rounded",children:"PRIMARY"}),U.billable&&e.jsx("span",{className:"px-2 py-0.5 bg-green-500 text-white text-xs font-semibold rounded",children:"BILLABLE"})]}),e.jsx("p",{className:"checkbox-label",children:U.description}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-3",children:[o&&e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:U.billable,onChange:D=>xe(U.code,"billable",D.target.checked),disabled:m||!U.billable&&oe>=c,className:"checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Billable"})]}),u&&e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"primary-diagnosis",checked:U.primary,onChange:()=>xe(U.code,"primary",!0),disabled:m,className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"checkbox-label",children:"Primary"})]}),b&&e.jsxs("select",{value:U.severity||"",onChange:D=>xe(U.code,"severity",D.target.value||null),disabled:m,className:"text-sm border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"-- Severity --"}),dv.map(D=>e.jsx("option",{value:D,children:D},D))]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{onClick:()=>ve(ae),disabled:m||ae===0,className:"p-1 text-gray-500 hover:text-gray-700 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move up",children:""}),e.jsx("button",{onClick:()=>me(ae),disabled:m||ae===n.length-1,className:"p-1 text-gray-500 hover:text-gray-700 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move down",children:""}),e.jsx("button",{onClick:()=>T(U.code),disabled:m,className:"p-1 text-red-500 hover:text-red-700 disabled:opacity-30 disabled:cursor-not-allowed",title:"Remove",children:""})]})]})},U.code))]}),n.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:"No diagnoses selected. Search and select ICD-10 codes above."})]})}function mv({note:n,onChange:d,disabled:c=!1}){const o=(m,v)=>{d(m,v)},u=m=>{o("diagnosis_codes",JSON.stringify(m))};let b=[];try{if(n.diagnosis_codes)if(typeof n.diagnosis_codes=="string"){const m=n.diagnosis_codes.trim();m.length>0&&(b=JSON.parse(m))}else Array.isArray(n.diagnosis_codes)&&(b=n.diagnosis_codes)}catch(m){console.error("Failed to parse diagnosis_codes, using empty array:",m,n.diagnosis_codes),b=[]}return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border-2 border-purple-200 rounded-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Diagnosis Assessment"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This diagnosis note serves as the clinical source of truth and will automatically sync billable codes to the billing system when signed."})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"ICD-10 Diagnosis Codes"}),e.jsx("div",{className:"card-inner",children:e.jsx(uv,{selectedCodes:b,onChange:u,maxBillable:4,showBillableToggle:!0,showPrimarySelector:!0,showSeveritySelector:!0,disabled:c})})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Clinical Assessment"}),e.jsxs("div",{className:"card-inner space-y-6",children:[e.jsxs("div",{children:[e.jsxs(te,{children:["Symptoms Reported by Client",e.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(What the client describes)"})]}),e.jsx("textarea",{value:n.symptoms_reported||"",onChange:m=>o("symptoms_reported",m.target.value),disabled:c,rows:4,placeholder:"Document symptoms as reported by the client in their own words...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsxs(te,{children:["Symptoms Observed by Clinician",e.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(What you directly observe)"})]}),e.jsx("textarea",{value:n.symptoms_observed||"",onChange:m=>o("symptoms_observed",m.target.value),disabled:c,rows:4,placeholder:"Document observable symptoms, behavioral indicators, presentation...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Duration of Symptoms"}),e.jsx("textarea",{value:n.duration_of_symptoms||"",onChange:m=>o("duration_of_symptoms",m.target.value),disabled:c,rows:2,placeholder:"How long have symptoms been present? When did they begin?",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Diagnostic Reasoning"}),e.jsxs("div",{className:"card-inner space-y-6",children:[e.jsxs("div",{children:[e.jsxs(te,{children:["Clinical Justification",e.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(Why this diagnosis?)"})]}),e.jsx("textarea",{value:n.clinical_justification||"",onChange:m=>o("clinical_justification",m.target.value),disabled:c,rows:5,placeholder:"Explain the clinical reasoning for this diagnosis. Include DSM-5 criteria met, frequency/intensity of symptoms, impact on functioning...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsxs(te,{children:["Differential Diagnosis",e.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(What else was considered and ruled out?)"})]}),e.jsx("textarea",{value:n.differential_diagnosis||"",onChange:m=>o("differential_diagnosis",m.target.value),disabled:c,rows:4,placeholder:"Document other diagnoses considered and reasons they were ruled out...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsxs(te,{children:["Severity & Specifiers",e.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(Additional clinical details)"})]}),e.jsx("textarea",{value:n.severity_specifiers||"",onChange:m=>o("severity_specifiers",m.target.value),disabled:c,rows:3,placeholder:"Document severity level, course specifiers, additional features (e.g., 'with anxious distress', 'in partial remission')...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Functional Impact"}),e.jsxs("div",{className:"card-inner",children:[e.jsxs(te,{children:["Functional Impairment",e.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(How symptoms affect daily life and functioning)"})]}),e.jsx("textarea",{value:n.functional_impairment||"",onChange:m=>o("functional_impairment",m.target.value),disabled:c,rows:4,placeholder:"Document impact on work, relationships, self-care, social functioning, occupational performance...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Diagnosis History"}),e.jsxs("div",{className:"card-inner",children:[e.jsxs(te,{children:["Previous Diagnoses",e.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(Prior diagnostic history and changes)"})]}),e.jsx("textarea",{value:n.previous_diagnoses||"",onChange:m=>o("previous_diagnoses",m.target.value),disabled:c,rows:3,placeholder:"Document previous diagnoses, when they were assigned, by whom, and any changes or revisions...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-6",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:" Billing Integration"}),e.jsx("p",{className:"text-sm text-blue-800",children:"When you sign this diagnosis note, the following will happen automatically:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-800 mt-2 space-y-1",children:[e.jsxs("li",{children:["Billable diagnoses (",b.filter(m=>m.billable).length," selected) will be added to the billing system"]}),e.jsx("li",{children:"Previous diagnoses will be marked as inactive"}),e.jsx("li",{children:"This note becomes the source of truth for all clinical documentation"}),e.jsx("li",{children:"Other notes will reference these diagnoses automatically"})]})]})]})}function hv({note:n,onChange:d,autoSave:c}){const o=(m,v)=>{d(m,v),c&&setTimeout(()=>c(),500)},u=m=>(n.treatmentPlan||{})[m]||"",b=(m,v)=>{const h=n.treatmentPlan||{};o("treatmentPlan",{...h,[m]:v})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-blue",children:[e.jsx("span",{className:"mr-2",children:""}),"Treatment Goals"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"What are the primary goals of treatment? What does the client hope to achieve?"}),e.jsx("textarea",{value:u("goals"),onChange:m=>b("goals",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"5",placeholder:`Example:
1. Reduce anxiety symptoms to manageable levels
2. Develop healthy coping strategies for stress
3. Improve relationships with family members
4. Return to work/school functioning`})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-blue",children:[e.jsx("span",{className:"mr-2",children:""}),"Target Behaviors & Objectives"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"Specific, measurable objectives. What behaviors or symptoms will change?"}),e.jsx("textarea",{value:u("objectives"),onChange:m=>b("objectives",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"5",placeholder:`Example:
- Client will identify and challenge 3 cognitive distortions per week
- Client will practice deep breathing exercises daily
- Client will attend all scheduled sessions
- Client will report anxiety level of 5 or below (0-10 scale) within 8 weeks`})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-blue",children:[e.jsx("span",{className:"mr-2",children:""}),"Interventions & Treatment Modalities"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"What therapeutic approaches, techniques, or interventions will be used?"}),e.jsx("textarea",{value:u("interventions"),onChange:m=>b("interventions",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"5",placeholder:`Example:
- Cognitive Behavioral Therapy (CBT)
- Dialectical Behavior Therapy (DBT) skills training
- Mindfulness and relaxation techniques
- EMDR for trauma processing
- Family therapy sessions (as needed)
- Psychoeducation about anxiety/depression`})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-blue",children:[e.jsx("span",{className:"mr-2",children:""}),"Treatment Frequency & Expected Duration"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Session Frequency"}),e.jsx("textarea",{value:u("frequency"),onChange:m=>b("frequency",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Example: Weekly 50-minute sessions, with option to increase to twice weekly if needed"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Expected Duration of Treatment"}),e.jsx("textarea",{value:u("duration"),onChange:m=>b("duration",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Example: 12-16 weeks of weekly therapy, with ongoing reassessment of progress"})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-blue",children:[e.jsx("span",{className:"mr-2",children:""}),"Potential Barriers & Mitigation Strategies"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"What might interfere with treatment success? How will barriers be addressed?"}),e.jsx("textarea",{value:u("barriers"),onChange:m=>b("barriers",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:`Example:
- Transportation issues  Offer telehealth options
- Work schedule conflicts  Offer early morning or evening appointments
- Financial concerns  Sliding scale fee, connect with financial assistance resources
- Language barriers  Provide interpreter services`})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-blue",children:[e.jsx("span",{className:"mr-2",children:""}),"Discharge Criteria & Success Indicators"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"How will we know treatment has been successful? What indicates readiness for discharge?"}),e.jsx("textarea",{value:u("dischargeCriteria"),onChange:m=>b("dischargeCriteria",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:`Example:
- Client reports anxiety symptoms manageable without therapy support
- Client demonstrates consistent use of coping skills
- Client feels confident managing stressors independently
- Client has achieved treatment goals
- Client expresses readiness to discontinue therapy`})]}),e.jsxs("div",{className:"card-main bg-blue-50 border-2 border-blue-300",children:[e.jsxs("h3",{className:"section-header-blue",children:[e.jsx("span",{className:"mr-2",children:""}),"Client Agreement & Collaboration"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"Document client's understanding, agreement, and input on the treatment plan"}),e.jsx("textarea",{value:u("clientAgreement"),onChange:m=>b("clientAgreement",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Example: Client reviewed treatment plan and expressed agreement with goals and proposed interventions. Client voiced concerns about time commitment, and we agreed to reassess frequency after 4 weeks."})]})]})}function fv({note:n,onChange:d,autoSave:c}){const o=(m,v)=>{d(m,v),c&&setTimeout(()=>c(),500)},u=[{value:"noshow",label:"No Show",description:"Client did not attend, no notice given"},{value:"late_cancel",label:"Late Cancellation",description:"Canceled within 24 hours of appointment"},{value:"cancel",label:"Cancellation",description:"Canceled with adequate notice"},{value:"late_arrival",label:"Late Arrival",description:"Client arrived late to session"}],b=n.appointmentStatus||"noshow";return u.find(m=>m.value===b),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main bg-gray-50",children:[e.jsxs("h3",{className:"section-header-gray",children:[e.jsx("span",{className:"mr-2",children:""}),"Appointment Status"]}),e.jsx("div",{className:"space-y-3",children:u.map(m=>e.jsxs("label",{className:`flex items-start gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all ${b===m.value?"border-blue-500 bg-blue-50":"border-gray-300 bg-white hover:border-gray-400"}`,children:[e.jsx("input",{type:"radio",name:"appointmentStatus",value:m.value,checked:b===m.value,onChange:v=>o("appointmentStatus",v.target.value),className:"mt-1 w-4 h-4 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:m.label}),e.jsx("div",{className:"text-sm text-gray-600",children:m.description})]})]},m.value))})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-gray",children:[e.jsx("span",{className:"mr-2",children:""}),"Reason / Additional Details"]}),e.jsx("textarea",{value:n.statusReason||"",onChange:m=>o("statusReason",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Provide additional context: Why did the client cancel? When were you notified? Any relevant circumstances?"})]}),e.jsxs("div",{className:"card-main bg-yellow-50 border-2 border-yellow-300",children:[e.jsxs("h3",{className:"section-header-gray",children:[e.jsx("span",{className:"mr-2",children:""}),"Billing Impact"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:n.chargeApplied||!1,onChange:m=>o("chargeApplied",m.target.checked),className:"checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Late cancellation/no-show charge applied"})]}),n.chargeApplied&&e.jsx("textarea",{value:n.chargeDetails||"",onChange:m=>o("chargeDetails",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Charge amount and details..."})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-gray",children:[e.jsx("span",{className:"mr-2",children:""}),"Follow-up Action"]}),e.jsx("textarea",{value:n.followUpAction||"",onChange:m=>o("followUpAction",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"What follow-up is needed? Call client to reschedule? Send reminder? Review cancellation policy?"})]})]})}function xv({note:n,onChange:d,autoSave:c}){const o=(m,v)=>{d(m,v),c&&setTimeout(()=>c(),500)},u=[{value:"phone",label:" Phone Call",icon:""},{value:"email",label:" Email",icon:""},{value:"text",label:" Text Message",icon:""},{value:"portal",label:" Patient Portal",icon:""},{value:"voicemail",label:" Voicemail",icon:""}],b=n.contactMethod||"phone";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main bg-blue-50",children:[e.jsxs("h3",{className:"section-header-gray",children:[e.jsx("span",{className:"mr-2",children:""}),"Contact Method"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:u.map(m=>e.jsxs("label",{className:`flex flex-col items-center gap-2 p-4 rounded-lg border-2 cursor-pointer transition-all ${b===m.value?"border-blue-500 bg-blue-100":"border-gray-300 bg-white hover:border-gray-400"}`,children:[e.jsx("input",{type:"radio",name:"contactMethod",value:m.value,checked:b===m.value,onChange:v=>o("contactMethod",v.target.value),className:"sr-only"}),e.jsx("div",{className:"text-3xl",children:m.icon}),e.jsx("div",{className:"text-sm font-semibold text-gray-800 text-center",children:m.label.replace(/^.+ /,"")})]},m.value))})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-gray",children:[e.jsx("span",{className:"mr-2",children:""}),"Date & Time of Contact"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Date"}),e.jsx("input",{type:"date",value:n.contactDate||"",onChange:m=>o("contactDate",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Time"}),e.jsx("input",{type:"time",value:n.contactTime||"",onChange:m=>o("contactTime",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm"})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-gray",children:[e.jsx("span",{className:"mr-2",children:""}),"Reason for Contact"]}),e.jsx("textarea",{value:n.contactReason||"",onChange:m=>o("contactReason",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Why did the client reach out? What did they need or want to discuss?"})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-gray",children:[e.jsx("span",{className:"mr-2",children:""}),"Summary of Communication"]}),e.jsx("textarea",{value:n.communicationSummary||"",onChange:m=>o("communicationSummary",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Summarize the content of the communication. What was discussed? What information was provided?"})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-gray",children:[e.jsx("span",{className:"mr-2",children:""}),"Action Taken / Response Provided"]}),e.jsx("textarea",{value:n.actionTaken||"",onChange:m=>o("actionTaken",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"How did you respond? What actions were taken? Any referrals or resources provided? Follow-up needed?"})]}),e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.urgentFlag||!1,onChange:m=>o("urgentFlag",m.target.checked),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-semibold text-gray-800",children:" Urgent or Crisis-Related Contact"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Check if this contact involved safety concerns, crisis, or urgent clinical needs"})]})]}),n.urgentFlag&&e.jsx("div",{className:"mt-4",children:e.jsx("textarea",{value:n.urgentDetails||"",onChange:m=>o("urgentDetails",m.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Describe the urgent nature of the contact and actions taken to address safety/crisis concerns..."})})]})]})}function gv({noteType:n,patientId:d,appointmentId:c=null,serviceDate:o,onSave:u,onCancel:b}){const[m,v]=f.useState(""),[h,p]=f.useState(!1),[w,y]=f.useState(""),[j,N]=f.useState(""),[x,C]=f.useState(!1),[E,k]=f.useState(!0),[R,L]=f.useState(!1),[A,G]=f.useState(null),P=n==="noshow",T=n==="cancel",xe=async ve=>{ve.preventDefault(),L(!0),G(null);try{let me="";P?(me=`CLIENT DID NOT ATTEND SCHEDULED APPOINTMENT

`,m&&(me+=`Reason (if known): ${m}

`),h?(me+=`Contact Attempted: Yes
`,me+=`Method: ${w}
`,me+=`Result: ${j}

`):me+=`Contact Attempted: No

`,me+=`Plan: ${x?"Billable no-show fee applies.":"No-show fee waived."} Will follow up to reschedule.`):T&&(me=`APPOINTMENT CANCELLED

`,m&&(me+=`Reason: ${m}

`),me+="Plan: Will reschedule as needed.");const H=await Ao({patientId:d,appointmentId:c,noteType:n,serviceDate:o,templateType:"quick",plan:me,status:E?"signed":"draft"});E&&H.noteId&&await Ef(H.noteId),u&&u(H)}catch(me){console.error("Error saving quick note:",me),G(me.message||"Failed to save note")}finally{L(!1)}};return e.jsx("div",{className:"max-w-2xl mx-auto p-6",children:e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:P?" No-Show Note":" Cancellation Note"}),e.jsxs("p",{className:"text-gray-600",children:["Quick documentation for ",P?"missed appointment":"cancelled session"]})]}),A&&e.jsx(tt,{children:A}),e.jsxs("form",{onSubmit:xe,className:"space-y-6",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:P?"Reason (if known)":"Reason for Cancellation"}),e.jsx("textarea",{value:m,onChange:ve=>v(ve.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:"3",placeholder:P?"e.g., Client called to report illness":"e.g., Family emergency"})]})}),P&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[e.jsxs("label",{className:"flex items-center gap-3 mb-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:ve=>p(ve.target.checked),className:"checkbox"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Attempted to contact client"})]}),h&&e.jsxs("div",{className:"space-y-3 ml-8",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Contact Method"}),e.jsxs("select",{value:w,onChange:ve=>y(ve.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select method..."}),e.jsx("option",{value:"Phone",children:"Phone"}),e.jsx("option",{value:"Email",children:"Email"}),e.jsx("option",{value:"Text/SMS",children:"Text/SMS"}),e.jsx("option",{value:"Patient Portal",children:"Patient Portal"})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Result"}),e.jsxs("select",{value:j,onChange:ve=>N(ve.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select result..."}),e.jsx("option",{value:"Left voicemail",children:"Left voicemail"}),e.jsx("option",{value:"Spoke with client",children:"Spoke with client"}),e.jsx("option",{value:"No answer",children:"No answer"}),e.jsx("option",{value:"Message sent",children:"Message sent"}),e.jsx("option",{value:"Awaiting response",children:"Awaiting response"})]})]})})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:ve=>C(ve.target.checked),className:"checkbox"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Apply no-show fee (billable)"})]})})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E,onChange:ve=>k(ve.target.checked),className:"checkbox"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Sign and lock note immediately"})]}),e.jsx("p",{className:"text-xs text-gray-600 ml-8 mt-1",children:"Recommended for simple administrative notes"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:b,disabled:R,className:"flex-1 px-6 py-3 bg-gray-500 text-white font-semibold rounded-xl hover:bg-gray-600 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:R,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:R?"Saving...":"Save Note"})]})]})]})})}function pv({patient:n,provider:d,serviceInfo:c,diagnosis:o,serviceDate:u}){const b=h=>{if(!h)return"N/A";const[p,w,y]=h.split(/[-T]/);return new Date(p,w-1,y).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})},m=h=>{if(!h)return"Not set";const p=Math.floor(h/60),w=h%60;return p>0&&w>0?`${p}h ${w}m`:p>0?`${p}h`:`${w}m`},v=h=>{if(!h)return"";const p=h.split(/\s{3,}/);return p.length>1?p[1].trim():h.trim()};return e.jsxs("div",{className:"card-main mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Patient Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Name:"}),e.jsxs("span",{className:"text-base font-semibold text-gray-900",children:[n?.fname," ",n?.mname," ",n?.lname]})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"DOB:"}),e.jsxs("span",{className:"text-sm text-gray-800",children:[n?.DOB?b(n.DOB):"N/A",n?.DOB&&e.jsxs("span",{className:"ml-2 text-gray-500",children:["(Age ",new Date().getFullYear()-new Date(n.DOB).getFullYear(),")"]})]})]}),n?.pid&&e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Patient ID:"}),e.jsx("span",{className:"text-sm text-gray-800 font-mono",children:n.pid})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Service Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Provider:"}),e.jsxs("span",{className:"text-base font-semibold text-gray-900",children:[d?.fullName||d?.fname+" "+d?.lname,d?.credentials&&e.jsx("span",{className:"ml-2 text-sm font-normal text-gray-600",children:d.credentials})]})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Date:"}),e.jsx("span",{className:"text-sm text-gray-800 font-semibold",children:b(u)})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Type:"}),e.jsx("span",{className:"text-sm text-gray-800",children:c?.type||"Individual Therapy"})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Location:"}),e.jsx("span",{className:"text-sm text-gray-800",children:c?.location||"Office"})]}),c?.duration&&e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Duration:"}),e.jsx("span",{className:"text-sm text-gray-800",children:m(c.duration)})]})]})]})]}),o&&e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Primary Diagnosis:"}),e.jsx("span",{className:"text-sm text-gray-900 font-medium",children:v(o)})]})})]})}const bv=(n,d=null)=>n==="progress"&&d?d:{progress:"BIRP",intake:"Intake",diagnosis:"Diagnosis",treatment_plan:"TreatmentPlan",mse:"MSE",discharge:"Discharge",crisis:"Crisis",risk_assessment:"RiskAssessment",appointment_status:"AppointmentStatus",client_communication:"ClientCommunication",case_management:"CaseManagement",admin:"Administrative",noshow:"AppointmentStatus",cancel:"AppointmentStatus"}[n]||"BIRP";function er({noteId:n=null,patientId:d,appointmentId:c=null,noteType:o,templateFormat:u=null,onClose:b,onSave:m}){const v=bv(o,u),[h,p]=f.useState({patientId:d,appointmentId:c,noteType:o,templateType:v,serviceDate:new Date().toISOString().split("T")[0],behaviorProblem:"",intervention:"",response:"",plan:"",riskPresent:!1,riskAssessment:"",interventionsSelected:[],clientPresentation:[],goalsAddressed:[],status:"draft"}),[w,y]=f.useState(!1),[j,N]=f.useState(!1),[x,C]=f.useState(!1),[E,k]=f.useState(null),[R,L]=f.useState(null),[A,G]=f.useState(null),[P,T]=f.useState(null),[xe,ve]=f.useState(null),[me,oe]=f.useState(null),[H,U]=f.useState(null),ae=f.useRef(null),D=f.useRef(n);f.useEffect(()=>{_(),M(),Q()},[n,c,d]),f.useEffect(()=>(ae.current&&clearTimeout(ae.current),ae.current=setTimeout(()=>{le()},3e3),()=>{ae.current&&clearTimeout(ae.current)}),[h]);const _=async()=>{y(!0),L(null);try{if(n){const W=await kf(n);p({...h,...W.note}),D.current=n}else{const W={};c?W.appointment_id=c:d&&(W.patient_id=d);try{const ie=await lb(W);if(ie.draft){const we=ie.draft.draft_content;we.noteType===o?(p({...h,...we}),console.log("Restored draft from server")):console.log("Server draft note type mismatch, skipping restore. Expected:",o,"Got:",we.noteType)}}catch{console.log("No draft found, starting fresh")}const K=localStorage.getItem(`note_draft_${d}_${c||"new"}_${o}`);if(K)try{const ie=JSON.parse(K);ie.noteType===o?(p({...h,...ie}),console.log("Restored draft from localStorage")):(console.log("Draft note type mismatch, skipping restore"),localStorage.removeItem(`note_draft_${d}_${c||"new"}_${o}`))}catch{console.error("Failed to parse localStorage draft")}}}catch(W){console.error("Error loading note:",W),L(W.message)}finally{y(!1)}},M=async()=>{try{const W=await nb();G(W.settings),!h.templateType&&W.settings.default_note_template&&p(K=>({...K,templateType:W.settings.default_note_template}))}catch(W){console.error("Error loading settings:",W)}},Q=async()=>{try{if(d)try{const W=await _f(d);if(console.log(" Patient data loaded:",W),T(W.patient),W.problems&&W.problems.length>0){const K=W.problems[0],ie=K.title||K.diagnosis||null;U(ie),console.log(" Primary diagnosis loaded:",ie)}}catch(W){console.error(" Error loading patient data:",W)}try{const W=await ar();console.log(" Provider data loaded:",W),ve(W)}catch(W){console.error(" Error loading provider data:",W)}oe({type:"Individual Therapy",location:"Office",duration:null})}catch(W){console.error(" Error loading metadata:",W)}},le=f.useCallback(async()=>{if(!(h.status==="signed"||h.is_locked)){C(!0);try{localStorage.setItem(`note_draft_${d}_${c||"new"}_${h.noteType}`,JSON.stringify(h));const W={noteId:D.current,patientId:h.patientId,appointmentId:h.appointmentId,noteType:h.noteType,serviceDate:h.serviceDate,draftContent:h};await W0(W),k(new Date)}catch(W){console.error("Auto-save failed:",W)}finally{C(!1)}}},[h,d,c]),ge=(W,K)=>{p(ie=>({...ie,[W]:K}))},z=async()=>{N(!0),L(null);try{if(D.current)await Jh(D.current,h);else{const W=await Ao(h);D.current=W.noteId}k(new Date),m&&m({noteId:D.current,status:"draft"})}catch(W){console.error("Error saving draft:",W),L(W.message)}finally{N(!1)}},B=async()=>{N(!0),L(null);try{if(D.current)await Jh(D.current,h);else{const W=await Ao({...h,status:"draft"});D.current=W.noteId}await Ef(D.current),localStorage.removeItem(`note_draft_${d}_${c||"new"}_${h.noteType}`),m&&m({noteId:D.current,status:"signed"}),b&&b()}catch(W){console.error("Error signing note:",W),L(W.message)}finally{N(!1)}},q=()=>{b&&b()},X=async()=>{if(window.confirm("Are you sure you want to delete this draft? This cannot be undone.")){N(!0),L(null);try{await eb(D.current),localStorage.removeItem(`note_draft_${d}_${c||"new"}_${h.noteType}`),b&&b()}catch(W){console.error("Error deleting note:",W),L("Failed to delete note: "+W.message)}finally{N(!1)}}};return o==="noshow"||o==="cancel"?e.jsx(gv,{noteType:o,patientId:d,appointmentId:c,serviceDate:h.serviceDate,onSave:m,onCancel:b}):w?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"text-gray-600",children:"Loading note..."})}):e.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h1",{className:"text-2xl font-semibold text-gray-800",children:[o==="progress"&&` Progress Note (${h.templateType})`,o==="intake"&&" Intake Assessment",o==="crisis"&&" Crisis Note",o==="discharge"&&" Discharge Summary",o==="mse"&&" Mental Status Exam",o==="risk_assessment"&&" Risk Assessment",o==="diagnosis"&&" Diagnosis Note",o==="case_management"&&" Case Management Note",o==="treatment_plan"&&" Treatment Plan",o==="appointment_status"&&" Appointment Status",o==="client_communication"&&" Client Communication",o==="admin"&&" Administrative Note"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[x&&e.jsx("span",{className:"text-sm text-blue-600",children:"Saving..."}),E&&!x&&e.jsxs("span",{className:"text-sm text-gray-600",children:["Saved ",E.toLocaleTimeString()]})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Service Date:"}),e.jsx("input",{type:"date",value:h.serviceDate,onChange:W=>ge("serviceDate",W.target.value),className:"px-3 py-1 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})})]}),R&&e.jsx(tt,{children:R}),(P||xe)&&e.jsx(pv,{patient:P,provider:xe,serviceInfo:me,diagnosis:H,serviceDate:h.serviceDate}),e.jsxs("div",{className:"mb-6",children:[h.templateType==="BIRP"&&e.jsx(Wb,{note:h,onChange:ge,patientId:d,autoSave:le}),h.templateType==="PIRP"&&e.jsx(ev,{note:h,onChange:ge,patientId:d,autoSave:le}),h.templateType==="SOAP"&&e.jsx(tv,{note:h,onChange:ge,patientId:d,autoSave:le}),h.templateType==="CaseManagement"&&e.jsx(sv,{note:h,onChange:ge,autoSave:le}),h.templateType==="MSE"&&e.jsx(av,{note:h,onChange:ge,autoSave:le}),h.templateType==="Intake"&&e.jsx(nv,{note:h,onChange:ge,autoSave:le}),h.templateType==="Discharge"&&e.jsx(iv,{note:h,onChange:ge,autoSave:le}),h.templateType==="Crisis"&&e.jsx(rv,{note:h,onChange:ge,autoSave:le}),h.templateType==="RiskAssessment"&&e.jsx(cv,{note:h,onChange:ge,autoSave:le}),h.templateType==="Diagnosis"&&e.jsx(mv,{note:h,onChange:ge,disabled:h.is_locked}),h.templateType==="TreatmentPlan"&&e.jsx(hv,{note:h,onChange:ge,autoSave:le}),h.templateType==="AppointmentStatus"&&e.jsx(fv,{note:h,onChange:ge,autoSave:le}),h.templateType==="ClientCommunication"&&e.jsx(xv,{note:h,onChange:ge,autoSave:le}),h.templateType==="Administrative"&&e.jsx(ov,{note:h,onChange:ge,autoSave:le})]}),e.jsx("div",{className:"sticky bottom-6 mt-8",children:e.jsx("div",{className:"card-main shadow-2xl",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:q,disabled:j,className:"px-6 py-3 bg-gray-500 text-white font-semibold rounded-xl hover:bg-gray-600 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),D.current&&!h.is_locked&&h.status!=="signed"&&e.jsx("button",{type:"button",onClick:X,disabled:j,className:"px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white font-semibold rounded-xl hover:from-red-600 hover:to-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:" Delete Draft"}),e.jsx("button",{type:"button",onClick:z,disabled:j||x,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-semibold rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:j?"Saving...":"Save Draft"}),e.jsx("button",{type:"button",onClick:B,disabled:j||x,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white font-semibold rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:j?"Signing...":" Sign & Lock Note"})]})})})]})}function Uf({noteId:n,onClose:d,onEdit:c,onAddendum:o}){const[u,b]=f.useState(null),[m,v]=f.useState(!0),[h,p]=f.useState(null);f.useEffect(()=>{w()},[n]);const w=async()=>{v(!0),p(null);try{const E=await kf(n);b(E.note)}catch(E){console.error("Error loading note:",E),p(E.message)}finally{v(!1)}},y=E=>{if(!E)return"N/A";const[k,R,L]=E.split(/[-T]/);return new Date(k,R-1,L).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})},j=E=>E?new Date(E).toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}):"N/A",N=E=>{if(!E)return"";const k=E.split(/\s{3,}/);return k.length>1?k[1].trim():E.trim()};if(m)return e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"text-gray-600",children:"Loading note..."})})});if(h)return e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsxs("div",{className:"card-main text-center p-12",children:[e.jsxs(Tl,{children:["Error: ",h]}),e.jsx("button",{onClick:d,className:"btn-secondary",children:"Close"})]})});if(!u)return null;const x=u.is_locked||u.status==="signed",C=u.status==="draft";return e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h1",{className:"text-2xl font-semibold text-gray-800",children:[u.note_type==="progress"&&" Progress Note",u.note_type==="intake"&&" Intake Assessment",u.note_type==="crisis"&&" Crisis Note",u.note_type==="discharge"&&" Discharge Summary",u.note_type==="mse"&&" Mental Status Exam",u.note_type==="diagnosis"&&" Diagnosis Note",u.note_type==="admin"&&" Administrative Note"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[x&&e.jsx("span",{className:"badge-sm badge-light-success",children:" Signed & Locked"}),C&&e.jsx("span",{className:"badge-sm badge-light-warning",children:"Draft"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Service Date:"}),e.jsx("div",{className:"text-gray-800",children:y(u.service_date)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Provider:"}),e.jsx("div",{className:"text-gray-800",children:u.provider_name||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Created:"}),e.jsx("div",{className:"text-gray-800",children:j(u.created_at)})]}),u.signed_at&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Signed:"}),e.jsx("div",{className:"text-gray-800",children:j(u.signed_at)})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[u.template_type==="Diagnosis"&&e.jsxs(e.Fragment,{children:[u.diagnosis_codes&&u.diagnosis_codes.length>0&&e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:" ICD-10 Diagnosis Codes"}),e.jsx("div",{className:"space-y-2",children:u.diagnosis_codes.map((E,k)=>{const R=E.code||E,L=E.description||"",A=E.isPrimary||!1,G=E.billable||!1,P=E.severity||null,T=R.length>=4?R.slice(0,3)+"."+R.slice(3):R;return e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border-l-4 border-blue-400",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-mono text-sm font-semibold text-blue-700 bg-blue-100 px-2 py-0.5 rounded",children:T}),e.jsxs("div",{className:"flex gap-2",children:[A&&e.jsx("span",{className:"badge-sm badge-light-primary",children:"Primary"}),G&&e.jsx("span",{className:"badge-sm badge-light-success",children:"Billable"}),P&&e.jsx("span",{className:"badge-sm badge-light-warning",children:P})]})]}),L&&e.jsx("div",{className:"text-gray-800",children:N(L)})]})},k)})})]}),(u.symptoms_reported||u.symptoms_observed||u.duration_of_symptoms)&&e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Clinical Assessment"}),e.jsxs("div",{className:"space-y-4",children:[u.symptoms_reported&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Symptoms Reported by Client"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.symptoms_reported})]}),u.symptoms_observed&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Symptoms Observed by Clinician"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.symptoms_observed})]}),u.duration_of_symptoms&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Duration of Symptoms"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.duration_of_symptoms})]})]})]}),(u.clinical_justification||u.differential_diagnosis||u.severity_specifiers)&&e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Diagnostic Reasoning"}),e.jsxs("div",{className:"space-y-4",children:[u.clinical_justification&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Clinical Justification"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.clinical_justification})]}),u.differential_diagnosis&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Differential Diagnosis"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.differential_diagnosis})]}),u.severity_specifiers&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Severity Specifiers"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.severity_specifiers})]})]})]}),u.functional_impairment&&e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Functional Impairment"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.functional_impairment})]}),u.previous_diagnoses&&e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Previous Diagnoses"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.previous_diagnoses})]})]}),u.template_type==="BIRP"&&e.jsxs(e.Fragment,{children:[u.behavior_problem&&e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"B"}),"Behavior / Observations"]}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.behavior_problem}),u.client_presentation&&u.client_presentation.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:u.client_presentation.map((E,k)=>e.jsx("span",{className:"badge-sm badge-light-info",children:E},k))})]}),(u.intervention||u.interventions_selected&&u.interventions_selected.length>0)&&e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"I"}),"Interventions Used"]}),u.intervention&&e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap mb-3",children:u.intervention}),u.interventions_selected&&u.interventions_selected.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Selected Interventions:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:u.interventions_selected.map((E,k)=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:E},k))})]})]}),u.response&&e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"R"}),"Client Response"]}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.response})]}),u.plan&&e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"P"}),"Plan / Next Steps"]}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.plan})]})]}),u.risk_present&&u.risk_assessment&&e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[e.jsx("h3",{className:"font-semibold text-orange-800 mb-3",children:" Risk Assessment"}),e.jsx("div",{className:"text-gray-800 whitespace-pre-wrap",children:u.risk_assessment})]}),u.addenda&&u.addenda.length>0&&e.jsxs("div",{className:"card-main bg-blue-50 border-2 border-blue-300",children:[e.jsxs("h3",{className:"font-semibold text-blue-800 mb-3",children:[" Addenda (",u.addenda.length,")"]}),e.jsx("div",{className:"space-y-3",children:u.addenda.map((E,k)=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-800",children:["Addendum ",k+1]}),e.jsxs("span",{className:"text-xs text-gray-600",children:[j(E.created_at),"  ",E.provider_name]})]}),e.jsxs("div",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"font-semibold",children:"Reason:"})," ",E.addendum_reason]})]},E.id))})]}),x&&e.jsx("div",{className:"card-main bg-green-50 border-2 border-green-300",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-green-800",children:"Digitally Signed"}),e.jsxs("div",{className:"checkbox-label",children:[u.signed_by_name,"  ",j(u.signed_at)]})]})]})})]}),e.jsxs("div",{className:"flex gap-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:d,className:"px-6 py-3 bg-gray-500 text-white font-semibold rounded-xl hover:bg-gray-600 transition-all shadow-lg",children:"Close"}),C&&c&&e.jsx("button",{onClick:()=>c(u.id),className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all shadow-lg",children:"Edit Draft"}),x&&o&&e.jsx("button",{onClick:()=>o(u.id),className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-semibold rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all shadow-lg",children:"Add Addendum"})]})]})}function vv({data:n}){const[d,c]=f.useState(!1),[o,u]=f.useState(!1),[b,m]=f.useState({}),[v,h]=f.useState({}),[p,w]=f.useState("list"),[y,j]=f.useState(null);if(!n)return e.jsx("div",{className:"text-gray-700 text-center py-8",children:"Loading admin notes..."});const{patient:N}=n,x=()=>{m({language:N.language||"",ethnicity:N.ethnicity||"",race:N.race||"",nationality:N.nationality||"",religion:N.religion||"",referral_source:N.referral_source||"",tribal_affiliations:N.tribal_affiliations||""}),c(!0)},C=()=>{h({homeless_status:N.homeless_status||"",financial_review_date:N.financial_review_date||"",family_size:N.family_size||"",monthly_income:N.monthly_income||""}),u(!0)},E=async()=>{console.log("Saving demographics:",b),alert("Demographics save not yet implemented - needs API endpoint"),c(!1)},k=async()=>{console.log("Saving financial data:",v),alert("Financial data save not yet implemented - needs API endpoint"),u(!1)},R=()=>{c(!1),m({})},L=()=>{u(!1),h({})},A=()=>{w("create")},G=()=>{w("list"),j(null)},P=()=>{w("list"),j(null)};return p==="create"?e.jsx(er,{patientId:N.pid,noteType:"admin",onSave:G,onClose:P}):p==="edit"?e.jsx(er,{noteId:y,patientId:N.pid,noteType:"admin",onSave:G,onClose:P}):p==="view"?e.jsx(Uf,{noteId:y,onClose:P}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Demographics & Statistics"}),!d&&e.jsx("button",{onClick:x,className:"px-4 py-2 text-sm font-medium text-blue-700 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-colors",children:" Edit"})]}),e.jsxs("div",{className:"card-inner",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Language"}),d?e.jsx("input",{type:"text",value:b.language,onChange:T=>m({...b,language:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:N.language||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Ethnicity"}),d?e.jsx("input",{type:"text",value:b.ethnicity,onChange:T=>m({...b,ethnicity:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:N.ethnicity||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Race"}),d?e.jsx("input",{type:"text",value:b.race,onChange:T=>m({...b,race:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:N.race||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Nationality"}),d?e.jsx("input",{type:"text",value:b.nationality,onChange:T=>m({...b,nationality:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:N.nationality||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Religion"}),d?e.jsx("input",{type:"text",value:b.religion,onChange:T=>m({...b,religion:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:N.religion||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Referral Source"}),d?e.jsx("input",{type:"text",value:b.referral_source,onChange:T=>m({...b,referral_source:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:N.referral_source||""})]}),e.jsxs("div",{className:"col-span-2 form-field",children:[e.jsx("div",{className:"form-field-label",children:"Tribal Affiliations"}),d?e.jsx("input",{type:"text",value:b.tribal_affiliations,onChange:T=>m({...b,tribal_affiliations:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:N.tribal_affiliations||""})]})]}),d&&e.jsxs("div",{className:"flex gap-3 mt-4 pt-4 border-t border-gray-200",children:[e.jsx(Ve,{onClick:E,children:" Save Changes"}),e.jsx("button",{onClick:R,className:"px-4 py-2 bg-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Financial & Housing Status"}),!o&&e.jsx("button",{onClick:C,className:"px-4 py-2 text-sm font-medium text-blue-700 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-colors",children:" Edit"})]}),e.jsxs("div",{className:"card-inner",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Homeless"}),o?e.jsxs("select",{value:v.homeless_status,onChange:T=>h({...v,homeless_status:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"No",children:"No"}),e.jsx("option",{value:"Yes",children:"Yes"}),e.jsx("option",{value:"At Risk",children:"At Risk"})]}):e.jsx("div",{className:"form-field-value",children:N.homeless_status||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Financial Review"}),o?e.jsx("input",{type:"date",value:v.financial_review_date,onChange:T=>h({...v,financial_review_date:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:N.financial_review_date?new Date(N.financial_review_date).toLocaleDateString():""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Family Size"}),o?e.jsx("input",{type:"number",value:v.family_size,onChange:T=>h({...v,family_size:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:N.family_size||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Monthly Income"}),o?e.jsx("input",{type:"number",value:v.monthly_income,onChange:T=>h({...v,monthly_income:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"}):e.jsx("div",{className:"form-field-value",children:N.monthly_income?`$${N.monthly_income}`:""})]})]}),o&&e.jsxs("div",{className:"flex gap-3 mt-4 pt-4 border-t border-gray-200",children:[e.jsx(Ve,{onClick:k,children:" Save Changes"}),e.jsx("button",{onClick:L,className:"px-4 py-2 bg-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Administrative Notes"}),e.jsx(Ve,{onClick:A,children:"+ New Admin Note"})]}),e.jsx("div",{className:"text-gray-600 text-sm",children:"Create administrative notes for this client's record"})]})})]})}function yv({data:n,onDataUpdate:d}){const[c,o]=f.useState(!1),[u,b]=f.useState(!1),[m,v]=f.useState(!1),[h,p]=f.useState(!1),[w,y]=f.useState(!1),[j,N]=f.useState(!1),[x,C]=f.useState({}),[E,k]=f.useState({}),[R,L]=f.useState({}),[A,G]=f.useState(!1),[P,T]=f.useState(null),[xe,ve]=f.useState([]),[me,oe]=f.useState({});if(f.useEffect(()=>{(async()=>{try{const Ee=(await mb())?.companies||[];ve(Ee.map(Fe=>({value:Fe.id,label:Fe.name})));const[Te,Me,de,je]=await Promise.all([Ya("sub_relation"),Ya("sex"),Ya("state"),Ya("yesno")]);oe({relationship:Te.options||[],sex:Me.options||[],state:de.options||[],accept_assignment:je.options||[]})}catch(he){console.error("Failed to load dropdown options:",he)}})()},[]),!n)return e.jsx("div",{className:"text-gray-700 text-center py-8",children:"Loading insurance data..."});const{patient:H,insurances:U}=n,ae=H.payment_type==="self-pay"||H.payment_type==="pro-bono",{primaryInsurance:D,secondaryInsurance:_,tertiaryInsurance:M}=f.useMemo(()=>{const J=Me=>({id:null,type:Me,provider:"",plan_name:"",effective_date:"",effective_date_end:"",policy_number:"",group_number:"",subscriber_relationship:"",subscriber_fname:"",subscriber_mname:"",subscriber_lname:"",subscriber_DOB:"",subscriber_sex:"",subscriber_ss:"",subscriber_street:"",subscriber_street_line_2:"",subscriber_city:"",subscriber_state:"",subscriber_postal_code:"",subscriber_employer:"",subscriber_employer_street:"",subscriber_employer_street_line_2:"",subscriber_employer_city:"",subscriber_employer_state:"",subscriber_employer_postal_code:"",copay:"",accept_assignment:""});let he=U?.find(Me=>Me.type==="primary"),Ee=U?.find(Me=>Me.type==="secondary"),Te=U?.find(Me=>Me.type==="tertiary");return he||(he=J("primary")),ae||(Ee||(Ee=J("secondary")),Te||(Te=J("tertiary"))),{primaryInsurance:he,secondaryInsurance:Ee,tertiaryInsurance:Te}},[U,ae]),Q=J=>J?{provider:J.provider||"",plan_name:J.plan_name||"",date:J.effective_date||"",date_end:J.effective_date_end||"",policy_number:J.policy_number||"",group_number:J.group_number||"",subscriber_relationship:J.subscriber_relationship||"",subscriber_fname:J.subscriber_fname||"",subscriber_mname:J.subscriber_mname||"",subscriber_lname:J.subscriber_lname||"",subscriber_DOB:J.subscriber_DOB||"",subscriber_sex:J.subscriber_sex||"",subscriber_ss:J.subscriber_ss||"",subscriber_street:J.subscriber_street||"",subscriber_street_line_2:J.subscriber_street_line_2||"",subscriber_city:J.subscriber_city||"",subscriber_state:J.subscriber_state||"",subscriber_postal_code:J.subscriber_postal_code||"",subscriber_employer:J.subscriber_employer||"",subscriber_employer_street:J.subscriber_employer_street||"",subscriber_employer_street_line_2:J.subscriber_employer_street_line_2||"",subscriber_employer_city:J.subscriber_employer_city||"",subscriber_employer_state:J.subscriber_employer_state||"",subscriber_employer_postal_code:J.subscriber_employer_postal_code||"",copay:J.copay||"",accept_assignment:J.accept_assignment||"",policy_type:J.policy_type||"",type:J.type}:{},le=J=>{let he;J==="primary"?(he=D,C(Q(he)),p(!0)):J==="secondary"?(he=_,k(Q(he)),y(!0)):J==="tertiary"&&(he=M,L(Q(he)),N(!0)),T(null)},ge=J=>{J==="primary"?(p(!1),C({})):J==="secondary"?(y(!1),k({})):J==="tertiary"&&(N(!1),L({})),T(null)},z=(J,he,Ee)=>{if(he==="subscriber_relationship"&&Ee.toLowerCase()==="self"){const Te={[he]:Ee,subscriber_fname:H.fname||"",subscriber_mname:H.mname||"",subscriber_lname:H.lname||"",subscriber_DOB:H.DOB||"",subscriber_sex:H.sex||"",subscriber_ss:H.ss||"",subscriber_street:H.street||"",subscriber_street_line_2:H.street_line_2||"",subscriber_city:H.city||"",subscriber_state:H.state||"",subscriber_postal_code:H.postal_code||""};J==="primary"?C(Me=>({...Me,...Te})):J==="secondary"?k(Me=>({...Me,...Te})):J==="tertiary"&&L(Me=>({...Me,...Te}))}else J==="primary"?C(Te=>({...Te,[he]:Ee})):J==="secondary"?k(Te=>({...Te,[he]:Ee})):J==="tertiary"&&L(Te=>({...Te,[he]:Ee}))},B=J=>{const Ee=[{field:"provider",label:"Insurance Company"},{field:"date",label:"Effective Date"},{field:"policy_number",label:"Policy Number"},{field:"subscriber_relationship",label:"Relationship"},{field:"subscriber_fname",label:"Subscriber First Name"},{field:"subscriber_lname",label:"Subscriber Last Name"},{field:"subscriber_DOB",label:"D.O.B."},{field:"subscriber_sex",label:"Sex"},{field:"subscriber_ss",label:"S.S."},{field:"subscriber_street",label:"Subscriber Address"},{field:"subscriber_city",label:"City"},{field:"subscriber_state",label:"State"},{field:"subscriber_postal_code",label:"Zip Code"}].filter(({field:Te})=>!J[Te]||J[Te].trim()==="");if(Ee.length>0)throw new Error(`Required fields missing: ${Ee.map(Te=>Te.label).join(", ")}`)},q=async J=>{G(!0),T(null);try{let he,Ee;J==="primary"?(he=x,Ee=D):J==="secondary"?(he=E,Ee=_):J==="tertiary"&&(he=R,Ee=M),B(he);const Te={...he};Ee.id||(Te.patient_id=H.pid,Te.type=J),await ub(Ee.id,Te),d&&await d(),ge(J)}catch(he){T(he.message||"Failed to save insurance changes")}finally{G(!1)}},X=(J,he,Ee,Te,Me,de,je=null,Fe="text",st=!1)=>{const Ct=st?"form-field-label required-field-label":"form-field-label";if(Me&&Ee)return je?e.jsxs("div",{className:"form-field",children:[e.jsxs("div",{className:Ct,children:[J,st&&" *"]}),e.jsxs("select",{value:de[Ee]||"",onChange:Y=>z(Te,Ee,Y.target.value),className:"input-md",required:st,children:[e.jsx("option",{value:"",children:"Select..."}),je.map(Y=>e.jsx("option",{value:Y.value,children:Y.label},Y.value))]})]}):e.jsxs("div",{className:"form-field",children:[e.jsxs("div",{className:Ct,children:[J,st&&" *"]}),e.jsx("input",{type:Fe,value:de[Ee]||"",onChange:Y=>z(Te,Ee,Y.target.value),className:"input-md",required:st})]});{let Y=he||"";if(je&&he){const ue=je.find(fe=>fe.value===he);ue&&(Y=ue.label)}return e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:J}),e.jsx("div",{className:"form-field-value",children:Y})]})}},W=(J,he,Ee=!1,Te=!0,Me=null)=>{if(!J)return null;const de=he==="primary"&&h||he==="secondary"&&w||he==="tertiary"&&j,je=he==="primary"?x:he==="secondary"?E:R,Fe=st=>({primary:"Primary Insurance",secondary:"Secondary Insurance",tertiary:"Tertiary Insurance"})[st]||`Insurance ${st}`;return e.jsxs("div",{className:"card-main mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:`flex items-center gap-4 ${Ee?"cursor-pointer":""}`,onClick:Ee?Me:void 0,children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:Fe(J.type)}),Ee&&e.jsx("button",{className:"text-gray-600 hover:text-gray-800 transition-colors",children:Te?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsx("div",{className:"flex space-x-2",children:de?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ge(he),disabled:A,className:"btn-solid btn-solid-gray disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:()=>q(he),disabled:A,className:"btn-solid btn-solid-green disabled:opacity-50",children:A?"Saving...":"Save Changes"})]}):e.jsx("button",{onClick:()=>le(he),className:"btn-solid btn-solid-blue",children:"Edit Insurance"})})]}),Te&&de&&e.jsx("div",{className:"mb-4 px-4 py-2 bg-purple-50 border-l-4 border-purple-700 rounded",children:e.jsxs("p",{className:"text-sm text-purple-900",children:[e.jsx("span",{className:"required-field-label",children:"*"})," Required fields are marked with an asterisk and displayed in ",e.jsx("span",{className:"required-field-label",children:"purple"})]})}),Te&&e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"Insurance Details"}),X("Insurance Company",J.insurance_company_name||J.provider,"provider",he,de,je,xe,"text",!0),X("Plan Name",J.plan_name,"plan_name",he,de,je),X("Effective Date",J.effective_date,"date",he,de,je,null,"date",!0),X("Effective Date End",J.effective_date_end,"date_end",he,de,je,null,"date"),X("Policy Number",J.policy_number,"policy_number",he,de,je,null,"text",!0),X("Group Number",J.group_number,"group_number",he,de,je),X("CoPay",J.copay,"copay",he,de,je,null,"text"),X("Accept Assignment",J.accept_assignment,"accept_assignment",he,de,je,me.accept_assignment||[]),J.type==="secondary"&&X("Secondary Medicare Type",J.policy_type,"policy_type",he,de,je)]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"Subscriber Information"}),X("Relationship",J.subscriber_relationship,"subscriber_relationship",he,de,je,me.relationship||[],"text",!0),X("Subscriber First Name",J.subscriber_fname,"subscriber_fname",he,de,je,null,"text",!0),X("Subscriber Middle Name",J.subscriber_mname,"subscriber_mname",he,de,je),X("Subscriber Last Name",J.subscriber_lname,"subscriber_lname",he,de,je,null,"text",!0),X("D.O.B.",J.subscriber_DOB,"subscriber_DOB",he,de,je,null,"date",!0),X("Sex",J.subscriber_sex,"subscriber_sex",he,de,je,me.sex||[],"text",!0),de?X("S.S.",je.subscriber_ss,"subscriber_ss",he,de,je,null,"text",!0):e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"S.S."}),e.jsx("div",{className:"form-field-value",children:J.subscriber_ss?"***-**-"+J.subscriber_ss.slice(-4):""})]}),X("Subscriber Address",J.subscriber_street,"subscriber_street",he,de,je,null,"text",!0),X("Address Line 2",J.subscriber_street_line_2,"subscriber_street_line_2",he,de,je),X("City",J.subscriber_city,"subscriber_city",he,de,je,null,"text",!0),X("State",J.subscriber_state,"subscriber_state",he,de,je,me.state||[],"text",!0),X("Zip Code",J.subscriber_postal_code,"subscriber_postal_code",he,de,je,null,"text",!0)]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"Subscriber Employer"}),X("Subscriber Employer (SE)",J.subscriber_employer,"subscriber_employer",he,de,je),X("SE Address",J.subscriber_employer_street,"subscriber_employer_street",he,de,je),X("SE Address Line 2",J.subscriber_employer_street_line_2,"subscriber_employer_street_line_2",he,de,je),X("SE City",J.subscriber_employer_city,"subscriber_employer_city",he,de,je),X("SE State",J.subscriber_employer_state,"subscriber_employer_state",he,de,je,me.state||[]),X("SE Zip Code",J.subscriber_employer_postal_code,"subscriber_employer_postal_code",he,de,je)]})]})})]},J.id||`placeholder-${he}`)},K=H.employer||H.employer_street||H.employer_city||H.employer_state||H.employer_postal_code||H.employer_occupation,we={insurance:"Insurance","self-pay":"Self-Pay","pro-bono":"Pro Bono"}[H.payment_type]||H.payment_type,ke=!ae||m;return f.useEffect(()=>{_&&o(!0),M&&b(!0)},[_,M]),e.jsxs("div",{className:"space-y-6",children:[P&&e.jsx("div",{className:"error-message",children:P}),e.jsx("div",{className:"card-main",children:e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"flex items-center justify-between py-3 px-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:"Payment Type:"}),e.jsx("div",{className:`text-lg font-bold ${ae?"text-orange-600":"text-blue-600"}`,children:we})]}),ae&&U&&U.length>0&&e.jsx("button",{onClick:()=>v(!m),className:"px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:m?"Hide Insurance Records":"Show Insurance Records"})]})})}),ke&&e.jsxs(e.Fragment,{children:[K&&e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Client Employer Information"}),e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"col-span-2 form-field",children:[e.jsx("div",{className:"form-field-label",children:"Employer Name"}),e.jsx("div",{className:"form-field-value",children:H.employer||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Start Date"}),e.jsx("div",{className:"form-field-value",children:H.employer_start_date?new Date(H.employer_start_date).toLocaleDateString():""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"End Date"}),e.jsx("div",{className:"form-field-value",children:H.employer_end_date?new Date(H.employer_end_date).toLocaleDateString():""})]}),e.jsxs("div",{className:"col-span-2 form-field",children:[e.jsx("div",{className:"form-field-label",children:"Address"}),e.jsxs("div",{className:"form-field-value",children:[H.employer_street||"",H.employer_street_line_2&&`, ${H.employer_street_line_2}`]})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"City"}),e.jsx("div",{className:"form-field-value",children:H.employer_city||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"State"}),e.jsx("div",{className:"form-field-value",children:H.employer_state||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Postal Code"}),e.jsx("div",{className:"form-field-value",children:H.employer_postal_code||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Country"}),e.jsx("div",{className:"form-field-value",children:H.employer_country||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Occupation"}),e.jsx("div",{className:"form-field-value",children:H.employer_occupation||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Industry"}),e.jsx("div",{className:"form-field-value",children:H.employer_industry||""})]})]})})]}),D&&W(D,"primary",!1,!0,null),_&&W(_,"secondary",!0,c,()=>o(!c)),M&&W(M,"tertiary",!0,u,()=>b(!u))]})]})}function Bf({encounterId:n,onClose:d}){const[c,o]=f.useState(!0),[u,b]=f.useState(null),[m,v]=f.useState(null),[h,p]=f.useState("notes");f.useEffect(()=>{n&&(async()=>{try{o(!0),v(null);const N=await K0(n);b(N)}catch(N){console.error("Error fetching encounter detail:",N),v(N.message||"Failed to load encounter details")}finally{o(!1)}})()},[n]);const w=j=>{if(!j)return"N/A";const[N,x,C]=j.split(/[-T]/);return new Date(N,x-1,C).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},y=j=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(j||0);return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Encounter Details"}),u&&e.jsxs("p",{className:"text-blue-100 text-sm mt-1",children:[w(u.encounter.date),"  ",u.encounter.patient_name]})]}),e.jsx("button",{onClick:d,className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)]",children:c?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),e.jsx("p",{className:"text-gray-700 mt-4",children:"Loading encounter details..."})]}):m?e.jsx("div",{className:"p-12 text-center",children:e.jsxs("div",{className:"text-red-600 font-semibold",children:["Error: ",m]})}):u?e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"card-main mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Session Information"}),e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Date"}),e.jsx("div",{className:"form-field-value",children:w(u.encounter.date)})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Provider"}),e.jsx("div",{className:"form-field-value",children:u.encounter.provider_name||"N/A"})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Facility"}),e.jsx("div",{className:"form-field-value",children:u.encounter.facility_name||"N/A"})]}),e.jsxs("div",{className:"col-span-2 md:col-span-3 form-field",children:[e.jsx("div",{className:"form-field-label",children:"Reason for Visit"}),e.jsx("div",{className:"form-field-value",children:u.encounter.reason||"Not specified"})]}),u.encounter.encounter_type_description&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Encounter Type"}),e.jsx("div",{className:"form-field-value",children:u.encounter.encounter_type_description})]})]})})]}),e.jsxs(Dn,{className:"mb-6",children:[e.jsxs(Gt,{active:h==="notes",onClick:()=>p("notes"),children:["Clinical Notes (",u.forms.length,")"]}),e.jsxs(Gt,{active:h==="billing",onClick:()=>p("billing"),children:["Billing (",u.billing.length,")"]}),e.jsxs(Gt,{active:h==="vitals",onClick:()=>p("vitals"),children:["Vitals (",u.vitals.length,")"]}),e.jsxs(Gt,{active:h==="diagnoses",onClick:()=>p("diagnoses"),children:["Diagnoses (",u.diagnoses.length,")"]})]}),h==="notes"&&e.jsx("div",{className:"space-y-3",children:u.forms.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No clinical notes recorded"}):u.forms.map(j=>e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:j.form_name||j.formdir}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[w(j.date),"  ",j.user_name||"Unknown user"]})]}),j.authorized==="1"&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded",children:"Authorized"})]})},j.id))}),h==="billing"&&e.jsx("div",{className:"space-y-4",children:u.billing.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No billing charges recorded"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"Total Charges"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:y(u.total_charges)})]}),e.jsx("div",{className:"space-y-2",children:u.billing.map(j=>e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-gray-800",children:[j.code_type,": ",j.code]}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:j.code_text}),j.modifier&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Modifier: ",j.modifier]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsx("div",{className:"font-bold text-gray-800",children:y(j.fee*j.units)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[j.units," unit",j.units!=="1"?"s":"","  ",y(j.fee)]}),j.billed==="1"&&e.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-semibold rounded",children:"Billed"})]})]})},j.id))})]})}),h==="vitals"&&e.jsx("div",{className:"space-y-3",children:u.vitals.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No vitals recorded"}):u.vitals.map(j=>e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"col-span-2 md:col-span-4 form-field",children:[e.jsx("div",{className:"form-field-label",children:"Recorded"}),e.jsxs("div",{className:"form-field-value",children:[w(j.date),"  ",j.user_name||"Unknown user"]})]}),j.bps&&j.bpd&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Blood Pressure"}),e.jsxs("div",{className:"form-field-value",children:[j.bps,"/",j.bpd]})]}),j.pulse&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Pulse"}),e.jsxs("div",{className:"form-field-value",children:[j.pulse," bpm"]})]}),j.temperature&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Temperature"}),e.jsxs("div",{className:"form-field-value",children:[j.temperature,"F"]})]}),j.weight&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Weight"}),e.jsxs("div",{className:"form-field-value",children:[j.weight," lbs"]})]}),j.height&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Height"}),e.jsxs("div",{className:"form-field-value",children:[j.height," in"]})]}),j.BMI&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"BMI"}),e.jsx("div",{className:"form-field-value",children:j.BMI})]}),j.oxygen_saturation&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"O2 Saturation"}),e.jsxs("div",{className:"form-field-value",children:[j.oxygen_saturation,"%"]})]}),j.respiration&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Respiration"}),e.jsxs("div",{className:"form-field-value",children:[j.respiration," /min"]})]})]})},j.id))}),h==="diagnoses"&&e.jsx("div",{className:"space-y-3",children:u.diagnoses.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No diagnoses recorded for this encounter"}):u.diagnoses.map(j=>e.jsxs("div",{className:"card-inner",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:j.title}),j.diagnosis&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Code: ",j.diagnosis]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Started: ",w(j.begdate),j.enddate&&`  Ended: ${w(j.enddate)}`]}),j.outcome&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Outcome: ",j.outcome]})]},j.id))})]}):null}),e.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50 flex justify-end gap-3",children:e.jsx("button",{onClick:d,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg transition-colors font-medium",children:"Close"})})]})}):null}function jv({data:n}){const[d,c]=f.useState("all"),[o,u]=f.useState("date-desc"),[b,m]=f.useState(null);if(!n)return e.jsx("div",{className:"empty-state",children:"Loading encounter history..."});const{encounters:v,patient:h}=n,p=j=>{if(!j)return"N/A";const[N,x,C]=j.split(/[-T]/);return new Date(N,x-1,C).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},w=f.useMemo(()=>{if(!v||v.length===0)return[];let j=[...v];const N=new Date;if(d==="recent"){const x=new Date(N.getTime()-2592e6);j=j.filter(C=>new Date(C.date)>=x)}else if(d==="past-year"){const x=new Date(N.getTime()-31536e6);j=j.filter(C=>new Date(C.date)>=x)}return o==="date-desc"?j.sort((x,C)=>new Date(C.date)-new Date(x.date)):o==="date-asc"?j.sort((x,C)=>new Date(x.date)-new Date(C.date)):o==="provider"&&j.sort((x,C)=>{const E=x.provider_name||"",k=C.provider_name||"";return E.localeCompare(k)}),j},[v,d,o]),y=f.useMemo(()=>{if(!v||v.length===0)return{total:0,lastVisit:null,avgPerMonth:0,thisYear:0};const j=new Date,N=new Date(j.getTime()-365*24*60*60*1e3),x=new Date(j.getFullYear(),0,1),C=v.map(A=>new Date(A.date)),E=C.length>0?new Date(Math.max(...C.map(A=>A.getTime()))):null,R=v.filter(A=>new Date(A.date)>=N).length/12,L=v.filter(A=>new Date(A.date)>=x);return{total:v.length,lastVisit:E?p(E):"N/A",avgPerMonth:R.toFixed(1),thisYear:L.length}},[v]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Visit Statistics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"stat-box",children:[e.jsx("div",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Total Visits"}),e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:y.total})]}),e.jsxs("div",{className:"stat-box",children:[e.jsx("div",{className:"text-caption text-gray-600 font-semibold mb-1",children:"This Year"}),e.jsx("div",{className:"text-3xl font-bold text-green-600",children:y.thisYear})]}),e.jsxs("div",{className:"stat-box",children:[e.jsx("div",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Avg/Month (Past Year)"}),e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:y.avgPerMonth})]}),e.jsxs("div",{className:"stat-box",children:[e.jsx("div",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Last Visit"}),e.jsx("div",{className:"text-lg font-bold text-gray-700",children:y.lastVisit})]})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"section-header",children:"Filter By"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>c("all"),className:`w-full text-left filter-btn-enhanced ${d==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Encounters"}),e.jsx("button",{onClick:()=>c("recent"),className:`w-full text-left filter-btn-enhanced ${d==="recent"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Last 30 Days"}),e.jsx("button",{onClick:()=>c("past-year"),className:`w-full text-left filter-btn-enhanced ${d==="past-year"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Past Year"})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"section-header",children:"Sort By"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>u("date-desc"),className:`w-full text-left filter-btn-enhanced ${o==="date-desc"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Newest First"}),e.jsx("button",{onClick:()=>u("date-asc"),className:`w-full text-left filter-btn-enhanced ${o==="date-asc"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Oldest First"}),e.jsx("button",{onClick:()=>u("provider"),className:`w-full text-left filter-btn-enhanced ${o==="provider"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"By Provider"})]})]})]}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"card-main",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Encounter History",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",w.length," ",w.length===1?"visit":"visits",")"]})]})}),w.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-gray-600 text-lg",children:"No encounters found"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:d!=="all"?"Try adjusting your filters":"No visit history recorded"})]}):e.jsx("div",{className:"space-y-3",children:w.map(j=>e.jsx("div",{className:"card-inner hover:bg-white/90 transition-colors cursor-pointer",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"text-lg font-bold text-gray-800",children:p(j.date)}),e.jsxs("span",{className:"badge-sm badge-light-info",children:["ID: ",j.encounter]})]}),j.reason&&e.jsx("div",{className:"text-gray-900 font-medium mb-2",children:j.reason}),e.jsxs("div",{className:"flex gap-6 text-sm text-gray-600",children:[j.provider_name&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Provider:"})," ",j.provider_name]}),j.facility_name&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Facility:"})," ",j.facility_name]})]})]}),e.jsx("button",{onClick:N=>{N.stopPropagation(),m(j.encounter)},className:"ml-4 btn-mini",children:"View Details"})]})},j.encounter))})]})})]}),b&&e.jsx(Bf,{encounterId:b,onClose:()=>m(null)})]})}function Nv({patientId:n,onNoteClick:d,onCreateNote:c}){const[o,u]=f.useState([]),[b,m]=f.useState(!0),[v,h]=f.useState(null),[p,w]=f.useState({note_type:null,status:null,start_date:null,end_date:null});f.useEffect(()=>{y()},[n,p]);const y=async()=>{m(!0),h(null);try{const k=await I0(n,p);u(k.notes||[])}catch(k){console.error("Error loading notes:",k),h(k.message)}finally{m(!1)}},j=k=>{if(!k)return"N/A";const[R,L,A]=k.split(/[-T]/);return new Date(R,L-1,A).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},N=k=>k?new Date(k).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}):"N/A",x=k=>({progress:"",intake:"",crisis:"",discharge:"",mse:"",admin:"",noshow:"",cancel:""})[k]||"",C=k=>({progress:"Progress",intake:"Intake",crisis:"Crisis",discharge:"Discharge",mse:"Mental Status",admin:"Administrative",noshow:"No-Show",cancel:"Cancellation"})[k]||k,E=k=>k.is_locked||k.status==="signed"?e.jsx("span",{className:"badge-sm badge-light-success",children:"Signed"}):k.status==="draft"?e.jsx("span",{className:"badge-sm badge-light-warning",children:"Draft"}):k.supervisor_review_required&&k.supervisor_review_status==="pending"?e.jsx("span",{className:"badge-sm badge-light-info",children:"Pending Review"}):null;return b?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"text-gray-600",children:"Loading notes..."})}):v?e.jsxs("div",{className:"p-6 text-center",children:[e.jsxs(Tl,{children:["Error loading notes: ",v]}),e.jsx("button",{onClick:y,className:"px-6 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-semibold rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all shadow-lg",children:"Retry"})]}):e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-64 flex-shrink-0",children:e.jsxs("div",{className:"card-main sticky top-6",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Filter Notes"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 mb-2 block",children:"Note Type"}),e.jsxs("select",{value:p.note_type||"",onChange:k=>w({...p,note_type:k.target.value||null}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"progress",children:"Progress"}),e.jsx("option",{value:"intake",children:"Intake"}),e.jsx("option",{value:"crisis",children:"Crisis"}),e.jsx("option",{value:"discharge",children:"Discharge"}),e.jsx("option",{value:"mse",children:"Mental Status"}),e.jsx("option",{value:"admin",children:"Administrative"})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 mb-2 block",children:"Status"}),e.jsxs("select",{value:p.status||"",onChange:k=>w({...p,status:k.target.value||null}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"draft",children:"Drafts"}),e.jsx("option",{value:"signed",children:"Signed"})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 mb-2 block",children:"From Date"}),e.jsx("input",{type:"date",value:p.start_date||"",onChange:k=>w({...p,start_date:k.target.value||null}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 mb-2 block",children:"To Date"}),e.jsx("input",{type:"date",value:p.end_date||"",onChange:k=>w({...p,end_date:k.target.value||null}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white"})]})})]})]})}),e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Clinical Notes",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",o.length," ",o.length===1?"note":"notes",")"]})]}),c&&e.jsx("button",{onClick:c,className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all shadow-lg",children:"+ New Note"})]}),o.length===0?e.jsxs("div",{className:"card-main text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-lg text-gray-600 mb-2",children:"No clinical notes found"}),e.jsx("p",{className:"text-sm text-gray-500",children:p.note_type||p.status?"Try adjusting your filters":"Create your first note to get started"})]}):e.jsx("div",{className:"space-y-3",children:o.map(k=>{const R=k.status==="draft";return e.jsx("div",{onClick:()=>d&&d(k.id,R,k.note_type),className:"card-main hover:shadow-2xl hover:scale-[1.01] hover:border-blue-400 cursor-pointer transition-all duration-200",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:x(k.note_type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[C(k.note_type)," Note"]}),E(k),k.is_addendum&&e.jsx("span",{className:"badge-sm badge-light-info",children:"Addendum"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Service Date: ",j(k.service_date),"  ",k.provider_name||"Unknown provider"]})]})]}),k.behavior_problem&&e.jsxs("div",{className:"text-sm text-gray-700 line-clamp-2 mt-2",children:[k.behavior_problem.substring(0,150),"..."]}),e.jsxs("div",{className:"flex gap-4 text-xs text-gray-500 mt-2",children:[e.jsxs("span",{children:["Created: ",N(k.created_at)]}),k.signed_at&&e.jsxs("span",{children:["Signed: ",N(k.signed_at)]}),k.addenda&&k.addenda.length>0&&e.jsxs("span",{className:"text-blue-600 font-medium",children:[k.addenda.length," ",k.addenda.length===1?"addendum":"addenda"]})]})]}),e.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm font-semibold rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all shadow-md",children:R?"Edit":"View"})]})},k.id)})})]})]})}function wv({onSelect:n,preselected:d=null,appointment:c=null}){const{user:o}=nr(),[u,b]=f.useState(!1),m=o?.isSocialWorker||!1,v=o?.isProvider||!1,h=[{id:"intake",label:"Intake Assessment",description:"First session with client",icon:"",row:1,cols:3},{id:"diagnosis",label:"Diagnosis Note",description:"ICD-10 diagnosis assessment and documentation",icon:"",row:1,cols:3},{id:"treatment_plan",label:"Treatment Plan",description:"Goals, objectives, interventions",icon:"",row:1,cols:3},{id:"progress",label:"Progress Note",description:"Regular therapy session",icon:"",row:1,cols:3},{id:"mse",label:"Mental Status Exam",description:"Standalone MSE assessment",icon:"",row:2,cols:6},{id:"discharge",label:"Discharge Summary",description:"Final session, treatment conclusion",icon:"",row:2,cols:6},{id:"crisis",label:"Crisis Note",description:"Emergency or high-risk session",icon:"",row:3,cols:6},{id:"risk_assessment",label:"Risk Assessment",description:"SI/HI safety evaluation",icon:"",row:3,cols:6},{id:"appointment_status",label:"Appointment Status",description:"No show, late cancel, cancellation",icon:"",row:4,cols:6,quick:!0},{id:"client_communication",label:"Client Communication",description:"Phone calls, emails, client contact",icon:"",row:4,cols:6,quick:!0},{id:"case_management",label:"Case Management Note",description:"Resource coordination, referrals, advocacy",icon:"",row:5,cols:12,socialWorkerOnly:!0}],p=[{id:"BIRP",label:"BIRP",description:"Behavior, Intervention, Response, Plan",color:"blue"},{id:"PIRP",label:"PIRP",description:"Problem, Intervention, Response, Plan",color:"purple"},{id:"SOAP",label:"SOAP",description:"Subjective, Objective, Assessment, Plan",color:"green"}],y=d||"progress",j=A=>{if(A==="progress"&&v){b(!0);return}n(A)},N=A=>{n("progress",A)},x=()=>{b(!1)},C=h.filter(A=>A.row===1&&!A.socialWorkerOnly),E=h.filter(A=>A.row===2&&!A.socialWorkerOnly),k=h.filter(A=>A.row===3&&!A.socialWorkerOnly),R=h.filter(A=>A.row===4&&!A.socialWorkerOnly),L=h.filter(A=>A.row===5&&A.socialWorkerOnly&&m);return u?e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("button",{onClick:x,className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-6",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Back to note types"})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Choose Your Progress Note Format"}),e.jsx("p",{className:"text-gray-600",children:"Select the documentation format you prefer"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:p.map(A=>e.jsx("button",{onClick:()=>N(A.id),className:`card-main text-left p-6 hover:bg-${A.color}-50 hover:border-${A.color}-300 transition-all`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-3xl font-bold text-${A.color}-600 mb-3`,children:A.id}),e.jsx("div",{className:"text-sm text-gray-600",children:A.description})]})},A.id))}),e.jsxs("div",{className:"mt-8 card-main bg-gray-50",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Format Guide"}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-blue-600",children:"BIRP:"})," Focuses on client behavior observed during session, interventions used, client response, and future plan."]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-purple-600",children:"PIRP:"})," Starts with presenting problem/issue, then documents interventions, response, and plan."]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-green-600",children:"SOAP:"})," Medical model format - subjective reports, objective observations, clinical assessment, and treatment plan."]})]})]})]}):e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"What kind of note are you writing?"}),e.jsx("p",{className:"text-gray-600",children:"Select the type of clinical documentation"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Clinical Notes"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:C.map(A=>e.jsx("button",{onClick:()=>j(A.id),className:`card-main text-left p-4 hover:bg-blue-50 hover:border-blue-300 transition-all ${y===A.id?"ring-2 ring-blue-500 bg-blue-50":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:A.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-base font-semibold text-gray-800 mb-1",children:[A.label,A.suggested&&e.jsx("span",{className:"ml-2 badge-sm badge-light-success",children:"Suggested"})]}),e.jsx("div",{className:"text-xs text-gray-600",children:A.description})]})]})},A.id))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:E.map(A=>e.jsx("button",{onClick:()=>j(A.id),className:"card-main text-left p-4 hover:bg-blue-50 hover:border-blue-300 transition-all",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:A.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-base font-semibold text-gray-800 mb-1",children:A.label}),e.jsx("div",{className:"text-xs text-gray-600",children:A.description})]})]})},A.id))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:k.map(A=>e.jsx("button",{onClick:()=>j(A.id),className:"card-main text-left p-4 hover:bg-orange-50 hover:border-orange-300 transition-all",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:A.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-base font-semibold text-gray-800 mb-1",children:A.label}),e.jsx("div",{className:"text-xs text-gray-600",children:A.description})]})]})},A.id))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:R.map(A=>e.jsx("button",{onClick:()=>j(A.id),className:"card-main text-left p-4 hover:bg-gray-50 hover:border-gray-400 transition-all",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:A.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-base font-semibold text-gray-800 mb-1",children:A.label}),e.jsx("div",{className:"text-xs text-gray-600",children:A.description}),A.quick&&e.jsx("div",{className:"mt-1 text-xs text-blue-600 font-medium",children:" Quick note"})]})]})},A.id))}),L.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-sm font-semibold text-teal-600 uppercase tracking-wide mt-6",children:"Case Management"}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:L.map(A=>e.jsx("button",{onClick:()=>j(A.id),className:"card-main text-left p-4 hover:bg-teal-50 hover:border-teal-300 transition-all",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:A.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-base font-semibold text-gray-800 mb-1",children:A.label}),e.jsx("div",{className:"text-xs text-gray-600",children:A.description})]})]})},A.id))})]})]})]})}function Sv({data:n}){const[d,c]=f.useState("list"),[o,u]=f.useState(null),[b,m]=f.useState(null),[v,h]=f.useState(null),p=()=>{c("selectType"),m(null),h(null)},w=(C,E=null)=>{m(C),h(E),c("create")},y=(C,E,k)=>{u(C),m(k),c(E?"edit":"view")},j=C=>{u(C),c("edit")},N=()=>{c("list"),u(null),m(null),h(null)},x=()=>{c("list"),u(null),m(null),h(null)};return d==="selectType"?e.jsx(wv,{onSelect:w,patientId:n?.patient?.pid}):d==="create"?e.jsx(er,{patientId:n?.patient?.pid,noteType:b,templateFormat:v,onSave:N,onClose:x}):d==="edit"?e.jsx(er,{noteId:o,patientId:n?.patient?.pid,noteType:b,onSave:N,onClose:x}):d==="view"?e.jsx(Uf,{noteId:o,onClose:x,onEdit:j}):e.jsx(Nv,{patientId:n?.patient?.pid,onNoteClick:y,onCreateNote:p})}function Hf({tabName:n}){return e.jsxs("div",{className:"card-main text-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:[n," Coming Soon"]}),e.jsx("p",{className:"text-gray-600",children:"This feature is under development and will be available in a future update."})]})}function Cv({data:n}){const[d,c]=f.useState(null),[o,u]=f.useState(!0),[b,m]=f.useState(null),[v,h]=f.useState("all"),[p,w]=f.useState(null);f.useEffect(()=>{(async()=>{if(n?.patient?.pid)try{u(!0),m(null);const C=await ib(n.patient.pid);c(C)}catch(C){console.error("Error fetching billing:",C),m(C.message||"Failed to load billing information")}finally{u(!1)}})()},[n]);const y=x=>{if(!x)return"N/A";const[C,E,k]=x.split(/[-T]/);return new Date(C,E-1,k).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},j=x=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(x||0),N=f.useMemo(()=>{if(!d?.charges)return[];let x=[...d.charges];return v==="billed"?x=x.filter(C=>C.billed==="1"):v==="unbilled"&&(x=x.filter(C=>C.billed!=="1")),x},[d,v]);return o?e.jsx("div",{className:"text-gray-700 text-center py-8",children:"Loading billing information..."}):b?e.jsx(Hf,{tabName:"Billing"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Financial Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"stat-box stat-box-blue",children:[e.jsx("div",{className:"text-gray-600 text-xs font-semibold mb-1",children:"Total Charges"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:j(d?.summary?.total_charges||0)})]}),e.jsxs("div",{className:"stat-box stat-box-green",children:[e.jsx("div",{className:"text-gray-600 text-xs font-semibold mb-1",children:"Total Payments"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:j(d?.summary?.total_payments||0)})]}),e.jsxs("div",{className:`stat-box ${(d?.summary?.balance||0)>0?"stat-box-red":"stat-box"}`,children:[e.jsx("div",{className:"text-gray-600 text-xs font-semibold mb-1",children:"Balance Due"}),e.jsx("div",{className:`text-2xl font-bold ${(d?.summary?.balance||0)>0?"text-red-600":"text-gray-600"}`,children:j(d?.summary?.balance||0)})]})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"section-header",children:"Filter By"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>h("all"),className:`w-full text-left filter-btn-enhanced ${v==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Charges"}),e.jsx("button",{onClick:()=>h("unbilled"),className:`w-full text-left filter-btn-enhanced ${v==="unbilled"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Unbilled"}),e.jsx("button",{onClick:()=>h("billed"),className:`w-full text-left filter-btn-enhanced ${v==="billed"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Billed"})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Recent Payments"}),d?.payments&&d.payments.length>0?e.jsx("div",{className:"space-y-2",children:d.payments.slice(0,5).map(x=>e.jsxs("div",{className:"stat-box",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:j(x.pay_amount)}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:y(x.dtime)}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:x.method||"Payment"})]},x.session_id))}):e.jsx("div",{className:"text-sm text-gray-500",children:"No payments recorded"})]})]}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"card-main",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Billing Charges",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",N.length," ",N.length===1?"charge":"charges",")"]})]})}),N.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 14l6-6m-5.5.5h.01m4.99 5h.01M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16l3.5-2 3.5 2 3.5-2 3.5 2zM10 8.5a.5.5 0 11-1 0 .5.5 0 011 0zm5 5a.5.5 0 11-1 0 .5.5 0 011 0z"})}),e.jsx("p",{className:"text-gray-600 text-lg",children:"No charges found"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:v!=="all"?"Try adjusting your filters":"No billing charges recorded"})]}):e.jsx("div",{className:"space-y-3",children:N.map(x=>e.jsx("div",{className:"card-inner hover:bg-white/90 transition-colors cursor-pointer",onClick:()=>w(x.encounter),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("div",{className:"font-bold text-gray-800",children:[x.code_type,": ",x.code]}),x.billed==="1"?e.jsx("span",{className:"badge-sm badge-light-success",children:"Billed"}):e.jsx("span",{className:"badge-sm badge-light-warning",children:"Unbilled"}),x.authorized==="1"&&e.jsx("span",{className:"badge-sm badge-light-info",children:"Authorized"})]}),e.jsx("div",{className:"text-sm text-gray-700 mb-2",children:x.code_text}),x.encounter_reason&&e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("span",{className:"font-semibold",children:"Encounter:"})," ",x.encounter_reason]}),e.jsxs("div",{className:"flex gap-6 text-xs text-gray-500",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Date:"})," ",y(x.encounter_date)]}),x.provider_name&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Provider:"})," ",x.provider_name]}),x.facility_name&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Facility:"})," ",x.facility_name]}),x.modifier&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Modifier:"})," ",x.modifier]})]})]}),e.jsxs("div",{className:"ml-4 text-right",children:[e.jsx("div",{className:"font-bold text-gray-800 text-lg",children:j(parseFloat(x.fee)*parseFloat(x.units))}),e.jsxs("div",{className:"text-xs text-gray-500",children:[x.units," unit",x.units!=="1"?"s":"","  ",j(x.fee)]}),e.jsx("button",{className:"mt-2 btn-mini",children:"View Encounter"})]})]})},x.id))})]})})]}),p&&e.jsx(Bf,{encounterId:p,onClose:()=>w(null)})]})}function _v({data:n}){const[d,c]=f.useState([]),[o,u]=f.useState([]),[b,m]=f.useState([]),[v,h]=f.useState({}),[p,w]=f.useState(!0),[y,j]=f.useState(null),[N,x]=f.useState(!1),[C,E]=f.useState(!1),[k,R]=f.useState(null),[L,A]=f.useState(null),[G,P]=f.useState({name:"",category_id:""}),T=n?.patient?.pid;f.useEffect(()=>{T&&(xe(),ve())},[T]);const xe=async()=>{try{w(!0);const B=await fetch(`/custom/api/client_documents.php?id=${T}`,{credentials:"include"});if(!B.ok)throw new Error("Failed to fetch documents");const q=await B.json();c(q.documents||[]),u(q.categories||[]);const X={};q.categories?.forEach(W=>{X[W.id]=!0}),h(X)}catch(B){console.error("Error fetching documents:",B),j(B.message)}finally{w(!1)}},ve=async()=>{try{const B=await fetch("/custom/api/client_documents.php?action=categories",{credentials:"include"});if(!B.ok)throw new Error("Failed to fetch categories");const q=await B.json();m(q.categories||[])}catch(B){console.error("Error fetching categories:",B)}},me=B=>{h(q=>({...q,[B]:!q[B]}))},oe=B=>{const q=B.target.files[0];q&&(A(q),G.name||P(X=>({...X,name:q.name})))},H=(B,q)=>{P(X=>({...X,[B]:q}))},U=()=>{x(!0),R(null),A(null),P({name:"",category_id:""})},ae=()=>{x(!1),R(null),A(null),P({name:"",category_id:""})},D=async()=>{if(!L){R("Please select a file to upload");return}try{E(!0),R(null);const B=new FormData;B.append("file",L),B.append("patient_id",T),B.append("name",G.name||L.name),G.category_id&&B.append("category_id",G.category_id);const q=await fetch("/custom/api/client_documents.php",{method:"POST",credentials:"include",body:B}),X=await q.json();if(!q.ok)throw new Error(X.error||"Failed to upload document");await xe(),ae()}catch(B){console.error("Error uploading document:",B),R(B.message)}finally{E(!1)}},_=B=>B?B.includes("pdf")?"":B.includes("image")?"":B.includes("word")||B.includes("document")?"":B.includes("excel")||B.includes("spreadsheet")?"":"":"",M=B=>{if(!B)return"";const q=B/1024;return q<1024?`${q.toFixed(1)} KB`:`${(q/1024).toFixed(1)} MB`},Q=B=>{if(B.name)return B.name;if(!B.url)return"Untitled Document";const X=B.url.replace(/^file:\/\//,"").split("/");return X[X.length-1]||"Untitled Document"},le=B=>{B.file_path?window.open(B.file_path,"_blank"):console.error("Document file path not available")},ge=B=>{const q=`/custom/api/client_documents.php?action=download&document_id=${B.id}`;window.open(q,"_blank")},z={};return d.forEach(B=>{const q=B.category_id||"uncategorized";z[q]||(z[q]=[]),z[q].push(B)}),p?e.jsx("div",{className:"card-main",children:e.jsx("div",{className:"card-inner text-center py-8",children:e.jsx("div",{className:"text-gray-700",children:"Loading documents..."})})}):y?e.jsx("div",{className:"card-main",children:e.jsx("div",{className:"card-inner text-center py-8",children:e.jsxs("div",{className:"text-red-600",children:["Error loading documents: ",y]})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(Ve,{onClick:U,children:" Upload Document"})}),d.length===0&&e.jsx("div",{className:"card-main",children:e.jsx("div",{className:"card-inner text-center py-8",children:e.jsx("div",{className:"text-gray-500",children:"No documents on file"})})}),o.map(B=>{const q=z[B.id]||[],X=v[B.id];return q.length===0?null:e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer",onClick:()=>me(B.id),children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:[B.name," (",q.length,")"]}),e.jsx("button",{className:"text-gray-600 hover:text-gray-800 transition-colors",children:X?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),X&&e.jsx("div",{className:"card-inner",children:e.jsx("div",{className:"space-y-3",children:q.map(W=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("span",{className:"text-2xl",children:_(W.mimetype)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:Q(W)}),e.jsxs("div",{className:"text-sm text-gray-500",children:[W.date&&new Date(W.date).toLocaleDateString(),"  ",M(W.size)]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>le(W),className:"px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"View"}),e.jsx("button",{onClick:()=>ge(W),className:"px-3 py-1.5 text-sm font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:"Download"})]})]},W.id))})})]},B.id)}),z.uncategorized&&z.uncategorized.length>0&&e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer",onClick:()=>me("uncategorized"),children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Uncategorized (",z.uncategorized.length,")"]}),e.jsx("button",{className:"text-gray-600 hover:text-gray-800 transition-colors",children:v.uncategorized?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),v.uncategorized&&e.jsx("div",{className:"card-inner",children:e.jsx("div",{className:"space-y-3",children:z.uncategorized.map(B=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("span",{className:"text-2xl",children:_(B.mimetype)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:Q(B)}),e.jsxs("div",{className:"text-sm text-gray-500",children:[B.date&&new Date(B.date).toLocaleDateString(),"  ",M(B.size)]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>le(B),className:"px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"View"}),e.jsx("button",{onClick:()=>ge(B),className:"px-3 py-1.5 text-sm font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:"Download"})]})]},B.id))})})]}),e.jsx(Ie,{isOpen:N,onClose:ae,title:"Upload Document",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[k&&e.jsx(tt,{children:k}),e.jsxs("div",{children:[e.jsxs(te,{children:["Select File ",e.jsx(De,{})]}),e.jsx("input",{type:"file",onChange:oe,className:"input-field"}),L&&e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",L.name," (",(L.size/1024).toFixed(1)," KB)"]})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Document Name"}),e.jsx("input",{type:"text",value:G.name,onChange:B=>H("name",B.target.value),placeholder:"Enter document name",className:"input-field"}),e.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Leave blank to use filename"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"Category (Optional)"}),e.jsxs("select",{value:G.category_id,onChange:B=>H("category_id",B.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"Select a category..."}),b.map(B=>e.jsx("option",{value:B.id,children:B.name},B.id))]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"text-red-600",children:"*"})," Required"]}),e.jsxs(Ie.Footer,{children:[e.jsx(Tt,{onClick:ae,disabled:C,children:"Cancel"}),e.jsx(Ve,{onClick:D,disabled:C||!L,children:C?"Uploading...":"Upload"})]})]})})]})}function kv(){const{id:n}=Fp(),d=Zs(),{user:c,loading:o}=nr(),[u,b]=f.useState(null),[m,v]=f.useState(null),[h,p]=f.useState("summary"),[w,y]=f.useState("clients"),[j,N]=f.useState(!0),[x,C]=f.useState(null),E=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),k=async()=>{await Rf()},R=async()=>{try{N(!0),C(null),v(null),console.log("Fetching client data for ID:",n);const A=await _f(n);console.log("Client data received:",A),A.accessDenied?(v(A.accessInfo),b(null)):b(A)}catch(A){console.error("Error fetching client data:",A),C(A.message||"Failed to load client data")}finally{N(!1)}};f.useEffect(()=>{n&&R()},[n]);const L=()=>{if(j)return e.jsx("div",{className:"card-main p-12 text-center",children:e.jsx("div",{className:"text-gray-700",children:"Loading client data..."})});if(m)return e.jsx("div",{className:"card-main p-8",children:e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6 max-w-2xl mx-auto",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:m.title||"Client Not on Your Caseload"}),e.jsx("p",{className:"text-blue-800 mb-4",children:m.message||"This client is not currently on your caseload. If you need access to work with this client, please contact your supervisor or an administrator to be added to their care team."}),e.jsxs("button",{onClick:()=>d("/app/clients"),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),m.actionText||"Return to Client List"]})]})]})})});if(x)return e.jsx("div",{className:"card-main p-12 text-center",children:e.jsxs(Tl,{children:["Error: ",x]})});switch(h){case"summary":return e.jsx(Zb,{data:u});case"demographics":return e.jsx(Kb,{data:u,onDataUpdate:R});case"insurance":return e.jsx(yv,{data:u});case"encounters":return e.jsx(jv,{data:u});case"clinical":return e.jsx(Sv,{data:u});case"documents":return e.jsx(_v,{data:u});case"billing":return e.jsx(Cv,{data:u});case"admin":return e.jsx(vv,{data:u});default:return e.jsx(Hf,{tabName:"This Tab"})}};return o||!c?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-mental",children:e.jsxs("div",{className:"backdrop-blur-2xl bg-white/90 rounded-3xl shadow-2xl p-8 border border-white/50",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto"}),e.jsx("p",{className:"text-label mt-4 text-center",children:"Loading..."})]})}):e.jsxs(wf,{user:c,activeNav:w,setActiveNav:y,today:E,onLogout:k,children:[e.jsx(Xb,{client:u?.patient}),e.jsx(Vb,{activeTab:h,onTabChange:p,permissions:u?.permissions||{}}),L()]})}function Ev(){return e.jsx(k0,{children:e.jsxs(a0,{children:[e.jsx(El,{path:"/",element:e.jsx(B0,{})}),e.jsx(El,{path:"/dashboard",element:e.jsx(Pb,{})}),e.jsx(El,{path:"/clients/:id",element:e.jsx(kv,{})}),e.jsx(El,{path:"/admin/icd10-import",element:e.jsx(Lf,{})}),e.jsx(El,{path:"*",element:e.jsx(t0,{to:"/",replace:!0})})]})})}lp.createRoot(document.getElementById("root")).render(e.jsx(Ev,{}));
