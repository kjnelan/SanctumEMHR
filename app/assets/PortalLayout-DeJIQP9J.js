import{u as d,r as l,j as e,N as x,t as n}from"./index-DSJ8qQsI.js";import{h,i as f}from"./PortalService-CisPuOln.js";function p(){const i=d(),[t,r]=l.useState(null),[s,o]=l.useState(!0);return l.useEffect(()=>{async function m(){try{if(!localStorage.getItem("portalClient")){i("/mycare/login");return}const a=await h();a&&a.id?r({id:a.id,firstName:a.firstName,lastName:a.lastName,fullName:a.fullName,email:a.email,phone:a.phone,dateOfBirth:a.dateOfBirth,providerName:a.providerName,forcePasswordChange:a.forcePasswordChange,initials:(a.firstName?.[0]||"")+(a.lastName?.[0]||"")}):(localStorage.removeItem("portalClient"),i("/mycare/login"))}catch(c){console.log("Portal session check failed:",c.message),localStorage.removeItem("portalClient"),i("/mycare/login")}finally{o(!1)}}m()},[i]),{client:t,loading:s}}function u({children:i}){const{client:t,loading:r}=p();if(r)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-mental",children:e.jsxs("div",{className:"sanctum-glass-main p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 mx-auto",style:{border:"3px solid rgba(107, 154, 196, 0.3)",borderTopColor:"rgba(107, 154, 196, 0.9)"}}),e.jsx("p",{className:"text-label mt-4 text-center",children:"Loading..."})]})});if(!t)return null;if(t.forcePasswordChange)return e.jsx(x,{to:"/mycare/change-password",replace:!0});const s=window.location.hash?.replace("#/mycare/","")||"dashboard";return e.jsxs("div",{className:"min-h-screen bg-gradient-mental",children:[e.jsx("nav",{className:"sticky top-0 z-50 px-4 py-3",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"sanctum-glass-main px-6 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[n.logoUrl?e.jsx("img",{src:n.logoUrl,alt:n.companyName,className:"h-8 w-auto"}):e.jsx("span",{className:"text-xl font-bold text-gray-800",children:n.logoText}),e.jsx("span",{className:"text-sm font-semibold text-gray-500",children:"Client Portal"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-1",children:[e.jsx("a",{href:"#/mycare/dashboard",className:s==="dashboard"?"nav-main-active":"nav-main-inactive",children:"Dashboard"}),e.jsx("a",{href:"#/mycare/appointments",className:s==="appointments"?"nav-main-active":"nav-main-inactive",children:"Appointments"}),e.jsx("a",{href:"#/mycare/profile",className:s==="profile"?"nav-main-active":"nav-main-inactive",children:"My Profile"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:t.fullName}),t.providerName&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Provider: ",t.providerName]})]}),e.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white text-sm font-bold",children:t.initials}),e.jsx("button",{onClick:f,className:"text-sm text-gray-600 hover:text-gray-800 font-medium",children:"Sign Out"})]})]}),e.jsxs("div",{className:"flex md:hidden items-center gap-1 mt-3 pt-3 border-t border-white/30",children:[e.jsx("a",{href:"#/mycare/dashboard",className:`flex-1 text-center text-sm py-2 rounded-lg font-semibold ${s==="dashboard"?"nav-main-active":"nav-main-inactive"}`,children:"Dashboard"}),e.jsx("a",{href:"#/mycare/appointments",className:`flex-1 text-center text-sm py-2 rounded-lg font-semibold ${s==="appointments"?"nav-main-active":"nav-main-inactive"}`,children:"Appointments"}),e.jsx("a",{href:"#/mycare/profile",className:`flex-1 text-center text-sm py-2 rounded-lg font-semibold ${s==="profile"?"nav-main-active":"nav-main-inactive"}`,children:"Profile"})]})]})})}),e.jsx("main",{className:"max-w-6xl mx-auto px-4 py-6",children:i}),e.jsx("footer",{className:"text-center py-6",children:e.jsxs("p",{className:"text-gray-500 text-xs",children:["Â© ",new Date().getFullYear()," ",n.companyName,". All rights reserved."]})})]})}export{u as P,p as u};
