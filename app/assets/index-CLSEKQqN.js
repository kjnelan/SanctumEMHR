(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))d(u);new MutationObserver(u=>{for(const b of u)if(b.type==="childList")for(const h of b.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&d(h)}).observe(document,{childList:!0,subtree:!0});function o(u){const b={};return u.integrity&&(b.integrity=u.integrity),u.referrerPolicy&&(b.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?b.credentials="include":u.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function d(u){if(u.ep)return;u.ep=!0;const b=o(u);fetch(u.href,b)}})();function M0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var $c={exports:{}},Is={};var xh;function R0(){if(xh)return Is;xh=1;var i=Symbol.for("react.transitional.element"),c=Symbol.for("react.fragment");function o(d,u,b){var h=null;if(b!==void 0&&(h=""+b),u.key!==void 0&&(h=""+u.key),"key"in u){b={};for(var x in u)x!=="key"&&(b[x]=u[x])}else b=u;return u=b.ref,{$$typeof:i,type:d,key:h,ref:u!==void 0?u:null,props:b}}return Is.Fragment=c,Is.jsx=o,Is.jsxs=o,Is}var gh;function z0(){return gh||(gh=1,$c.exports=R0()),$c.exports}var t=z0(),Jc={exports:{}},Se={};var ph;function O0(){if(ph)return Se;ph=1;var i=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),h=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),y=Symbol.iterator;function S(C){return C===null||typeof C!="object"?null:(C=y&&C[y]||C["@@iterator"],typeof C=="function"?C:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,O={};function E(C,M,W){this.props=C,this.context=M,this.refs=O,this.updater=W||N}E.prototype.isReactComponent={},E.prototype.setState=function(C,M){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,M,"setState")},E.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function H(){}H.prototype=E.prototype;function Q(C,M,W){this.props=C,this.context=M,this.refs=O,this.updater=W||N}var le=Q.prototype=new H;le.constructor=Q,k(le,E.prototype),le.isPureReactComponent=!0;var $=Array.isArray;function U(){}var P={H:null,A:null,T:null,S:null},ve=Object.prototype.hasOwnProperty;function he(C,M,W){var B=W.ref;return{$$typeof:i,type:C,key:M,ref:B!==void 0?B:null,props:W}}function me(C,M){return he(C.type,M,C.props)}function ue(C){return typeof C=="object"&&C!==null&&C.$$typeof===i}function K(C){var M={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(W){return M[W]})}var te=/\/+/g;function Y(C,M){return typeof C=="object"&&C!==null&&C.key!=null?K(""+C.key):M.toString(36)}function A(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(U,U):(C.status="pending",C.then(function(M){C.status==="pending"&&(C.status="fulfilled",C.value=M)},function(M){C.status==="pending"&&(C.status="rejected",C.reason=M)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function _(C,M,W,B,Z){var re=typeof C;(re==="undefined"||re==="boolean")&&(C=null);var pe=!1;if(C===null)pe=!0;else switch(re){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(C.$$typeof){case i:case c:pe=!0;break;case j:return pe=C._init,_(pe(C._payload),M,W,B,Z)}}if(pe)return Z=Z(C),pe=B===""?"."+Y(C,0):B,$(Z)?(W="",pe!=null&&(W=pe.replace(te,"$&/")+"/"),_(Z,M,W,"",function(R){return R})):Z!=null&&(ue(Z)&&(Z=me(Z,W+(Z.key==null||C&&C.key===Z.key?"":(""+Z.key).replace(te,"$&/")+"/")+pe)),M.push(Z)),1;pe=0;var Ce=B===""?".":B+":";if($(C))for(var G=0;G<C.length;G++)B=C[G],re=Ce+Y(B,G),pe+=_(B,M,W,re,Z);else if(G=S(C),typeof G=="function")for(C=G.call(C),G=0;!(B=C.next()).done;)B=B.value,re=Ce+Y(B,G++),pe+=_(B,M,W,re,Z);else if(re==="object"){if(typeof C.then=="function")return _(A(C),M,W,B,Z);throw M=String(C),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return pe}function T(C,M,W){if(C==null)return C;var B=[],Z=0;return _(C,B,"","",function(re){return M.call(W,re,Z++)}),B}function q(C){if(C._status===-1){var M=C._result;M=M(),M.then(function(W){(C._status===0||C._status===-1)&&(C._status=1,C._result=W)},function(W){(C._status===0||C._status===-1)&&(C._status=2,C._result=W)}),C._status===-1&&(C._status=0,C._result=M)}if(C._status===1)return C._result.default;throw C._result}var ne=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},fe={map:T,forEach:function(C,M,W){T(C,function(){M.apply(this,arguments)},W)},count:function(C){var M=0;return T(C,function(){M++}),M},toArray:function(C){return T(C,function(M){return M})||[]},only:function(C){if(!ue(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return Se.Activity=f,Se.Children=fe,Se.Component=E,Se.Fragment=o,Se.Profiler=u,Se.PureComponent=Q,Se.StrictMode=d,Se.Suspense=v,Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Se.__COMPILER_RUNTIME={__proto__:null,c:function(C){return P.H.useMemoCache(C)}},Se.cache=function(C){return function(){return C.apply(null,arguments)}},Se.cacheSignal=function(){return null},Se.cloneElement=function(C,M,W){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var B=k({},C.props),Z=C.key;if(M!=null)for(re in M.key!==void 0&&(Z=""+M.key),M)!ve.call(M,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&M.ref===void 0||(B[re]=M[re]);var re=arguments.length-2;if(re===1)B.children=W;else if(1<re){for(var pe=Array(re),Ce=0;Ce<re;Ce++)pe[Ce]=arguments[Ce+2];B.children=pe}return he(C.type,Z,B)},Se.createContext=function(C){return C={$$typeof:h,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:b,_context:C},C},Se.createElement=function(C,M,W){var B,Z={},re=null;if(M!=null)for(B in M.key!==void 0&&(re=""+M.key),M)ve.call(M,B)&&B!=="key"&&B!=="__self"&&B!=="__source"&&(Z[B]=M[B]);var pe=arguments.length-2;if(pe===1)Z.children=W;else if(1<pe){for(var Ce=Array(pe),G=0;G<pe;G++)Ce[G]=arguments[G+2];Z.children=Ce}if(C&&C.defaultProps)for(B in pe=C.defaultProps,pe)Z[B]===void 0&&(Z[B]=pe[B]);return he(C,re,Z)},Se.createRef=function(){return{current:null}},Se.forwardRef=function(C){return{$$typeof:x,render:C}},Se.isValidElement=ue,Se.lazy=function(C){return{$$typeof:j,_payload:{_status:-1,_result:C},_init:q}},Se.memo=function(C,M){return{$$typeof:p,type:C,compare:M===void 0?null:M}},Se.startTransition=function(C){var M=P.T,W={};P.T=W;try{var B=C(),Z=P.S;Z!==null&&Z(W,B),typeof B=="object"&&B!==null&&typeof B.then=="function"&&B.then(U,ne)}catch(re){ne(re)}finally{M!==null&&W.types!==null&&(M.types=W.types),P.T=M}},Se.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Se.use=function(C){return P.H.use(C)},Se.useActionState=function(C,M,W){return P.H.useActionState(C,M,W)},Se.useCallback=function(C,M){return P.H.useCallback(C,M)},Se.useContext=function(C){return P.H.useContext(C)},Se.useDebugValue=function(){},Se.useDeferredValue=function(C,M){return P.H.useDeferredValue(C,M)},Se.useEffect=function(C,M){return P.H.useEffect(C,M)},Se.useEffectEvent=function(C){return P.H.useEffectEvent(C)},Se.useId=function(){return P.H.useId()},Se.useImperativeHandle=function(C,M,W){return P.H.useImperativeHandle(C,M,W)},Se.useInsertionEffect=function(C,M){return P.H.useInsertionEffect(C,M)},Se.useLayoutEffect=function(C,M){return P.H.useLayoutEffect(C,M)},Se.useMemo=function(C,M){return P.H.useMemo(C,M)},Se.useOptimistic=function(C,M){return P.H.useOptimistic(C,M)},Se.useReducer=function(C,M,W){return P.H.useReducer(C,M,W)},Se.useRef=function(C){return P.H.useRef(C)},Se.useState=function(C){return P.H.useState(C)},Se.useSyncExternalStore=function(C,M,W){return P.H.useSyncExternalStore(C,M,W)},Se.useTransition=function(){return P.H.useTransition()},Se.version="19.2.3",Se}var bh;function ro(){return bh||(bh=1,Jc.exports=O0()),Jc.exports}var g=ro(),Kc={exports:{}},en={},Wc={exports:{}},Pc={};var vh;function L0(){return vh||(vh=1,(function(i){function c(_,T){var q=_.length;_.push(T);e:for(;0<q;){var ne=q-1>>>1,fe=_[ne];if(0<u(fe,T))_[ne]=T,_[q]=fe,q=ne;else break e}}function o(_){return _.length===0?null:_[0]}function d(_){if(_.length===0)return null;var T=_[0],q=_.pop();if(q!==T){_[0]=q;e:for(var ne=0,fe=_.length,C=fe>>>1;ne<C;){var M=2*(ne+1)-1,W=_[M],B=M+1,Z=_[B];if(0>u(W,q))B<fe&&0>u(Z,W)?(_[ne]=Z,_[B]=q,ne=B):(_[ne]=W,_[M]=q,ne=M);else if(B<fe&&0>u(Z,q))_[ne]=Z,_[B]=q,ne=B;else break e}}return T}function u(_,T){var q=_.sortIndex-T.sortIndex;return q!==0?q:_.id-T.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var b=performance;i.unstable_now=function(){return b.now()}}else{var h=Date,x=h.now();i.unstable_now=function(){return h.now()-x}}var v=[],p=[],j=1,f=null,y=3,S=!1,N=!1,k=!1,O=!1,E=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function le(_){for(var T=o(p);T!==null;){if(T.callback===null)d(p);else if(T.startTime<=_)d(p),T.sortIndex=T.expirationTime,c(v,T);else break;T=o(p)}}function $(_){if(k=!1,le(_),!N)if(o(v)!==null)N=!0,U||(U=!0,K());else{var T=o(p);T!==null&&A($,T.startTime-_)}}var U=!1,P=-1,ve=5,he=-1;function me(){return O?!0:!(i.unstable_now()-he<ve)}function ue(){if(O=!1,U){var _=i.unstable_now();he=_;var T=!0;try{e:{N=!1,k&&(k=!1,H(P),P=-1),S=!0;var q=y;try{t:{for(le(_),f=o(v);f!==null&&!(f.expirationTime>_&&me());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,y=f.priorityLevel;var fe=ne(f.expirationTime<=_);if(_=i.unstable_now(),typeof fe=="function"){f.callback=fe,le(_),T=!0;break t}f===o(v)&&d(v),le(_)}else d(v);f=o(v)}if(f!==null)T=!0;else{var C=o(p);C!==null&&A($,C.startTime-_),T=!1}}break e}finally{f=null,y=q,S=!1}T=void 0}}finally{T?K():U=!1}}}var K;if(typeof Q=="function")K=function(){Q(ue)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,Y=te.port2;te.port1.onmessage=ue,K=function(){Y.postMessage(null)}}else K=function(){E(ue,0)};function A(_,T){P=E(function(){_(i.unstable_now())},T)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(_){_.callback=null},i.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ve=0<_?Math.floor(1e3/_):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_next=function(_){switch(y){case 1:case 2:case 3:var T=3;break;default:T=y}var q=y;y=T;try{return _()}finally{y=q}},i.unstable_requestPaint=function(){O=!0},i.unstable_runWithPriority=function(_,T){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var q=y;y=_;try{return T()}finally{y=q}},i.unstable_scheduleCallback=function(_,T,q){var ne=i.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?ne+q:ne):q=ne,_){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=q+fe,_={id:j++,callback:T,priorityLevel:_,startTime:q,expirationTime:fe,sortIndex:-1},q>ne?(_.sortIndex=q,c(p,_),o(v)===null&&_===o(p)&&(k?(H(P),P=-1):k=!0,A($,q-ne))):(_.sortIndex=fe,c(v,_),N||S||(N=!0,U||(U=!0,K()))),_},i.unstable_shouldYield=me,i.unstable_wrapCallback=function(_){var T=y;return function(){var q=y;y=T;try{return _.apply(this,arguments)}finally{y=q}}}})(Pc)),Pc}var yh;function U0(){return yh||(yh=1,Wc.exports=L0()),Wc.exports}var Ic={exports:{}},xt={};var jh;function B0(){if(jh)return xt;jh=1;var i=ro();function c(v){var p="https://react.dev/errors/"+v;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)p+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+v+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var d={d:{f:o,r:function(){throw Error(c(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},u=Symbol.for("react.portal");function b(v,p,j){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:f==null?null:""+f,children:v,containerInfo:p,implementation:j}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function x(v,p){if(v==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return xt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=d,xt.createPortal=function(v,p){var j=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(c(299));return b(v,p,null,j)},xt.flushSync=function(v){var p=h.T,j=d.p;try{if(h.T=null,d.p=2,v)return v()}finally{h.T=p,d.p=j,d.d.f()}},xt.preconnect=function(v,p){typeof v=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,d.d.C(v,p))},xt.prefetchDNS=function(v){typeof v=="string"&&d.d.D(v)},xt.preinit=function(v,p){if(typeof v=="string"&&p&&typeof p.as=="string"){var j=p.as,f=x(j,p.crossOrigin),y=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;j==="style"?d.d.S(v,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:f,integrity:y,fetchPriority:S}):j==="script"&&d.d.X(v,{crossOrigin:f,integrity:y,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},xt.preinitModule=function(v,p){if(typeof v=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var j=x(p.as,p.crossOrigin);d.d.M(v,{crossOrigin:j,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&d.d.M(v)},xt.preload=function(v,p){if(typeof v=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var j=p.as,f=x(j,p.crossOrigin);d.d.L(v,j,{crossOrigin:f,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},xt.preloadModule=function(v,p){if(typeof v=="string")if(p){var j=x(p.as,p.crossOrigin);d.d.m(v,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:j,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else d.d.m(v)},xt.requestFormReset=function(v){d.d.r(v)},xt.unstable_batchedUpdates=function(v,p){return v(p)},xt.useFormState=function(v,p,j){return h.H.useFormState(v,p,j)},xt.useFormStatus=function(){return h.H.useHostTransitionStatus()},xt.version="19.2.3",xt}var Nh;function Rh(){if(Nh)return Ic.exports;Nh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(c){console.error(c)}}return i(),Ic.exports=B0(),Ic.exports}var wh;function H0(){if(wh)return en;wh=1;var i=U0(),c=ro(),o=Rh();function d(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function b(e){var a=e,l=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(l=a.return),e=a.return;while(e)}return a.tag===3?l:null}function h(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function x(e){if(e.tag===31){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function v(e){if(b(e)!==e)throw Error(d(188))}function p(e){var a=e.alternate;if(!a){if(a=b(e),a===null)throw Error(d(188));return a!==e?null:e}for(var l=e,s=a;;){var n=l.return;if(n===null)break;var r=n.alternate;if(r===null){if(s=n.return,s!==null){l=s;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===l)return v(n),e;if(r===s)return v(n),a;r=r.sibling}throw Error(d(188))}if(l.return!==s.return)l=n,s=r;else{for(var m=!1,w=n.child;w;){if(w===l){m=!0,l=n,s=r;break}if(w===s){m=!0,s=n,l=r;break}w=w.sibling}if(!m){for(w=r.child;w;){if(w===l){m=!0,l=r,s=n;break}if(w===s){m=!0,s=r,l=n;break}w=w.sibling}if(!m)throw Error(d(189))}}if(l.alternate!==s)throw Error(d(190))}if(l.tag!==3)throw Error(d(188));return l.stateNode.current===l?e:a}function j(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=j(e),a!==null)return a;e=e.sibling}return null}var f=Object.assign,y=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),he=Symbol.for("react.activity"),me=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function K(e){return e===null||typeof e!="object"?null:(e=ue&&e[ue]||e["@@iterator"],typeof e=="function"?e:null)}var te=Symbol.for("react.client.reference");function Y(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===te?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case k:return"Fragment";case E:return"Profiler";case O:return"StrictMode";case $:return"Suspense";case U:return"SuspenseList";case he:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case N:return"Portal";case Q:return e.displayName||"Context";case H:return(e._context.displayName||"Context")+".Consumer";case le:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case P:return a=e.displayName||null,a!==null?a:Y(e.type)||"Memo";case ve:a=e._payload,e=e._init;try{return Y(e(a))}catch{}}return null}var A=Array.isArray,_=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,T=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},ne=[],fe=-1;function C(e){return{current:e}}function M(e){0>fe||(e.current=ne[fe],ne[fe]=null,fe--)}function W(e,a){fe++,ne[fe]=e.current,e.current=a}var B=C(null),Z=C(null),re=C(null),pe=C(null);function Ce(e,a){switch(W(re,a),W(Z,e),W(B,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?Bm(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=Bm(a),e=Hm(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}M(B),W(B,e)}function G(){M(B),M(Z),M(re)}function R(e){e.memoizedState!==null&&W(pe,e);var a=B.current,l=Hm(a,e.type);a!==l&&(W(Z,e),W(B,l))}function ce(e){Z.current===e&&(M(B),M(Z)),pe.current===e&&(M(pe),Js._currentValue=q)}var de,ge;function ie(e){if(de===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);de=a&&a[1]||"",ge=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+de+e+ge}var I=!1;function je(e,a){if(!e||I)return"";I=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(a){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(J){var V=J}Reflect.construct(e,[],se)}else{try{se.call()}catch(J){V=J}e.call(se.prototype)}}else{try{throw Error()}catch(J){V=J}(se=e())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(J){if(J&&V&&typeof J.stack=="string")return[J.stack,V.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=s.DetermineComponentFrameRoot(),m=r[0],w=r[1];if(m&&w){var D=m.split(`
`),X=w.split(`
`);for(n=s=0;s<D.length&&!D[s].includes("DetermineComponentFrameRoot");)s++;for(;n<X.length&&!X[n].includes("DetermineComponentFrameRoot");)n++;if(s===D.length||n===X.length)for(s=D.length-1,n=X.length-1;1<=s&&0<=n&&D[s]!==X[n];)n--;for(;1<=s&&0<=n;s--,n--)if(D[s]!==X[n]){if(s!==1||n!==1)do if(s--,n--,0>n||D[s]!==X[n]){var ee=`
`+D[s].replace(" at new "," at ");return e.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",e.displayName)),ee}while(1<=s&&0<=n);break}}}finally{I=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?ie(l):""}function we(e,a){switch(e.tag){case 26:case 27:case 5:return ie(e.type);case 16:return ie("Lazy");case 13:return e.child!==a&&a!==null?ie("Suspense Fallback"):ie("Suspense");case 19:return ie("SuspenseList");case 0:case 15:return je(e.type,!1);case 11:return je(e.type.render,!1);case 1:return je(e.type,!0);case 31:return ie("Activity");default:return""}}function Ue(e){try{var a="",l=null;do a+=we(e,l),l=e,e=e.return;while(e);return a}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var qe=Object.prototype.hasOwnProperty,ct=i.unstable_scheduleCallback,Lt=i.unstable_cancelCallback,Ai=i.unstable_shouldYield,Ti=i.unstable_requestPaint,ft=i.unstable_now,bl=i.unstable_getCurrentPriorityLevel,rn=i.unstable_ImmediatePriority,Wa=i.unstable_UserBlockingPriority,vl=i.unstable_NormalPriority,yl=i.unstable_LowPriority,cn=i.unstable_IdlePriority,Mi=i.log,Ri=i.unstable_setDisableYieldValue,Pa=null,gt=null;function Ut(e){if(typeof Mi=="function"&&Ri(e),gt&&typeof gt.setStrictMode=="function")try{gt.setStrictMode(Pa,e)}catch{}}var pt=Math.clz32?Math.clz32:Ia,zi=Math.log,Oi=Math.LN2;function Ia(e){return e>>>=0,e===0?32:31-(zi(e)/Oi|0)|0}var jl=256,oe=262144,$e=4194304;function Qe(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Bt(e,a,l){var s=e.pendingLanes;if(s===0)return 0;var n=0,r=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var w=s&134217727;return w!==0?(s=w&~r,s!==0?n=Qe(s):(m&=w,m!==0?n=Qe(m):l||(l=w&~e,l!==0&&(n=Qe(l))))):(w=s&~r,w!==0?n=Qe(w):m!==0?n=Qe(m):l||(l=s&~e,l!==0&&(n=Qe(l)))),n===0?0:a!==0&&a!==n&&(a&r)===0&&(r=n&-n,l=a&-a,r>=l||r===32&&(l&4194048)!==0)?a:n}function la(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function vf(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vo(){var e=$e;return $e<<=1,($e&62914560)===0&&($e=4194304),e}function Li(e){for(var a=[],l=0;31>l;l++)a.push(e);return a}function os(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function yf(e,a,l,s,n,r){var m=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var w=e.entanglements,D=e.expirationTimes,X=e.hiddenUpdates;for(l=m&~l;0<l;){var ee=31-pt(l),se=1<<ee;w[ee]=0,D[ee]=-1;var V=X[ee];if(V!==null)for(X[ee]=null,ee=0;ee<V.length;ee++){var J=V[ee];J!==null&&(J.lane&=-536870913)}l&=~se}s!==0&&yo(e,s,0),r!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=r&~(m&~a))}function yo(e,a,l){e.pendingLanes|=a,e.suspendedLanes&=~a;var s=31-pt(a);e.entangledLanes|=a,e.entanglements[s]=e.entanglements[s]|1073741824|l&261930}function jo(e,a){var l=e.entangledLanes|=a;for(e=e.entanglements;l;){var s=31-pt(l),n=1<<s;n&a|e[s]&a&&(e[s]|=a),l&=~n}}function No(e,a){var l=a&-a;return l=(l&42)!==0?1:Ui(l),(l&(e.suspendedLanes|a))!==0?0:l}function Ui(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Bi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function wo(){var e=T.p;return e!==0?e:(e=window.event,e===void 0?32:ch(e.type))}function So(e,a){var l=T.p;try{return T.p=e,a()}finally{T.p=l}}var _a=Math.random().toString(36).slice(2),ot="__reactFiber$"+_a,vt="__reactProps$"+_a,Nl="__reactContainer$"+_a,Hi="__reactEvents$"+_a,jf="__reactListeners$"+_a,Nf="__reactHandles$"+_a,_o="__reactResources$"+_a,ds="__reactMarker$"+_a;function qi(e){delete e[ot],delete e[vt],delete e[Hi],delete e[jf],delete e[Nf]}function wl(e){var a=e[ot];if(a)return a;for(var l=e.parentNode;l;){if(a=l[Nl]||l[ot]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(e=Vm(e);e!==null;){if(l=e[ot])return l;e=Vm(e)}return a}e=l,l=e.parentNode}return null}function Sl(e){if(e=e[ot]||e[Nl]){var a=e.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return e}return null}function us(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(d(33))}function _l(e){var a=e[_o];return a||(a=e[_o]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function it(e){e[ds]=!0}var Co=new Set,Eo={};function el(e,a){Cl(e,a),Cl(e+"Capture",a)}function Cl(e,a){for(Eo[e]=a,e=0;e<a.length;e++)Co.add(a[e])}var wf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Do={},ko={};function Sf(e){return qe.call(ko,e)?!0:qe.call(Do,e)?!1:wf.test(e)?ko[e]=!0:(Do[e]=!0,!1)}function on(e,a,l){if(Sf(a))if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var s=a.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+l)}}function dn(e,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+l)}}function sa(e,a,l,s){if(s===null)e.removeAttribute(l);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(a,l,""+s)}}function Ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ao(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function _f(e,a,l){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,a);if(!e.hasOwnProperty(a)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,r=s.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return n.call(this)},set:function(m){l=""+m,r.call(this,m)}}),Object.defineProperty(e,a,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(m){l=""+m},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function Yi(e){if(!e._valueTracker){var a=Ao(e)?"checked":"value";e._valueTracker=_f(e,a,""+e[a])}}function To(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var l=a.getValue(),s="";return e&&(s=Ao(e)?e.checked?"true":"false":e.value),e=s,e!==l?(a.setValue(e),!0):!1}function un(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Cf=/[\n"\\]/g;function qt(e){return e.replace(Cf,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Gi(e,a,l,s,n,r,m,w){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),a!=null?m==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+Ht(a)):e.value!==""+Ht(a)&&(e.value=""+Ht(a)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),a!=null?Fi(e,m,Ht(a)):l!=null?Fi(e,m,Ht(l)):s!=null&&e.removeAttribute("value"),n==null&&r!=null&&(e.defaultChecked=!!r),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+Ht(w):e.removeAttribute("name")}function Mo(e,a,l,s,n,r,m,w){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),a!=null||l!=null){if(!(r!=="submit"&&r!=="reset"||a!=null)){Yi(e);return}l=l!=null?""+Ht(l):"",a=a!=null?""+Ht(a):l,w||a===e.value||(e.value=a),e.defaultValue=a}s=s??n,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=w?e.checked:!!s,e.defaultChecked=!!s,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),Yi(e)}function Fi(e,a,l){a==="number"&&un(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function El(e,a,l,s){if(e=e.options,a){a={};for(var n=0;n<l.length;n++)a["$"+l[n]]=!0;for(l=0;l<e.length;l++)n=a.hasOwnProperty("$"+e[l].value),e[l].selected!==n&&(e[l].selected=n),n&&s&&(e[l].defaultSelected=!0)}else{for(l=""+Ht(l),a=null,n=0;n<e.length;n++){if(e[n].value===l){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}a!==null||e[n].disabled||(a=e[n])}a!==null&&(a.selected=!0)}}function Ro(e,a,l){if(a!=null&&(a=""+Ht(a),a!==e.value&&(e.value=a),l==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=l!=null?""+Ht(l):""}function zo(e,a,l,s){if(a==null){if(s!=null){if(l!=null)throw Error(d(92));if(A(s)){if(1<s.length)throw Error(d(93));s=s[0]}l=s}l==null&&(l=""),a=l}l=Ht(a),e.defaultValue=l,s=e.textContent,s===l&&s!==""&&s!==null&&(e.value=s),Yi(e)}function Dl(e,a){if(a){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=a;return}}e.textContent=a}var Ef=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Oo(e,a,l){var s=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?s?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":s?e.setProperty(a,l):typeof l!="number"||l===0||Ef.has(a)?a==="float"?e.cssFloat=l:e[a]=(""+l).trim():e[a]=l+"px"}function Lo(e,a,l){if(a!=null&&typeof a!="object")throw Error(d(62));if(e=e.style,l!=null){for(var s in l)!l.hasOwnProperty(s)||a!=null&&a.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var n in a)s=a[n],a.hasOwnProperty(n)&&l[n]!==s&&Oo(e,n,s)}else for(var r in a)a.hasOwnProperty(r)&&Oo(e,r,a[r])}function Xi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Df=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mn(e){return kf.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function na(){}var Qi=null;function Vi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var kl=null,Al=null;function Uo(e){var a=Sl(e);if(a&&(e=a.stateNode)){var l=e[vt]||null;e:switch(e=a.stateNode,a.type){case"input":if(Gi(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+qt(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var s=l[a];if(s!==e&&s.form===e.form){var n=s[vt]||null;if(!n)throw Error(d(90));Gi(s,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(a=0;a<l.length;a++)s=l[a],s.form===e.form&&To(s)}break e;case"textarea":Ro(e,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&El(e,!!l.multiple,a,!1)}}}var Zi=!1;function Bo(e,a,l){if(Zi)return e(a,l);Zi=!0;try{var s=e(a);return s}finally{if(Zi=!1,(kl!==null||Al!==null)&&(In(),kl&&(a=kl,e=Al,Al=kl=null,Uo(a),e)))for(a=0;a<e.length;a++)Uo(e[a])}}function ms(e,a){var l=e.stateNode;if(l===null)return null;var s=l[vt]||null;if(s===null)return null;l=s[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(d(231,a,typeof l));return l}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$i=!1;if(ia)try{var hs={};Object.defineProperty(hs,"passive",{get:function(){$i=!0}}),window.addEventListener("test",hs,hs),window.removeEventListener("test",hs,hs)}catch{$i=!1}var Ca=null,Ji=null,hn=null;function Ho(){if(hn)return hn;var e,a=Ji,l=a.length,s,n="value"in Ca?Ca.value:Ca.textContent,r=n.length;for(e=0;e<l&&a[e]===n[e];e++);var m=l-e;for(s=1;s<=m&&a[l-s]===n[r-s];s++);return hn=n.slice(e,1<s?1-s:void 0)}function fn(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function xn(){return!0}function qo(){return!1}function yt(e){function a(l,s,n,r,m){this._reactName=l,this._targetInst=n,this.type=s,this.nativeEvent=r,this.target=m,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(l=e[w],this[w]=l?l(r):r[w]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?xn:qo,this.isPropagationStopped=qo,this}return f(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=xn)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=xn)},persist:function(){},isPersistent:xn}),a}var tl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gn=yt(tl),fs=f({},tl,{view:0,detail:0}),Af=yt(fs),Ki,Wi,xs,pn=f({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ii,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xs&&(xs&&e.type==="mousemove"?(Ki=e.screenX-xs.screenX,Wi=e.screenY-xs.screenY):Wi=Ki=0,xs=e),Ki)},movementY:function(e){return"movementY"in e?e.movementY:Wi}}),Yo=yt(pn),Tf=f({},pn,{dataTransfer:0}),Mf=yt(Tf),Rf=f({},fs,{relatedTarget:0}),Pi=yt(Rf),zf=f({},tl,{animationName:0,elapsedTime:0,pseudoElement:0}),Of=yt(zf),Lf=f({},tl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Uf=yt(Lf),Bf=f({},tl,{data:0}),Go=yt(Bf),Hf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gf(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=Yf[e])?!!a[e]:!1}function Ii(){return Gf}var Ff=f({},fs,{key:function(e){if(e.key){var a=Hf[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=fn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ii,charCode:function(e){return e.type==="keypress"?fn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Xf=yt(Ff),Qf=f({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fo=yt(Qf),Vf=f({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ii}),Zf=yt(Vf),$f=f({},tl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jf=yt($f),Kf=f({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Wf=yt(Kf),Pf=f({},tl,{newState:0,oldState:0}),If=yt(Pf),ex=[9,13,27,32],er=ia&&"CompositionEvent"in window,gs=null;ia&&"documentMode"in document&&(gs=document.documentMode);var tx=ia&&"TextEvent"in window&&!gs,Xo=ia&&(!er||gs&&8<gs&&11>=gs),Qo=" ",Vo=!1;function Zo(e,a){switch(e){case"keyup":return ex.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $o(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Tl=!1;function ax(e,a){switch(e){case"compositionend":return $o(a);case"keypress":return a.which!==32?null:(Vo=!0,Qo);case"textInput":return e=a.data,e===Qo&&Vo?null:e;default:return null}}function lx(e,a){if(Tl)return e==="compositionend"||!er&&Zo(e,a)?(e=Ho(),hn=Ji=Ca=null,Tl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Xo&&a.locale!=="ko"?null:a.data;default:return null}}var sx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jo(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!sx[e.type]:a==="textarea"}function Ko(e,a,l,s){kl?Al?Al.push(s):Al=[s]:kl=s,a=ii(a,"onChange"),0<a.length&&(l=new gn("onChange","change",null,l,s),e.push({event:l,listeners:a}))}var ps=null,bs=null;function nx(e){Mm(e,0)}function bn(e){var a=us(e);if(To(a))return e}function Wo(e,a){if(e==="change")return a}var Po=!1;if(ia){var tr;if(ia){var ar="oninput"in document;if(!ar){var Io=document.createElement("div");Io.setAttribute("oninput","return;"),ar=typeof Io.oninput=="function"}tr=ar}else tr=!1;Po=tr&&(!document.documentMode||9<document.documentMode)}function ed(){ps&&(ps.detachEvent("onpropertychange",td),bs=ps=null)}function td(e){if(e.propertyName==="value"&&bn(bs)){var a=[];Ko(a,bs,e,Vi(e)),Bo(nx,a)}}function ix(e,a,l){e==="focusin"?(ed(),ps=a,bs=l,ps.attachEvent("onpropertychange",td)):e==="focusout"&&ed()}function rx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bn(bs)}function cx(e,a){if(e==="click")return bn(a)}function ox(e,a){if(e==="input"||e==="change")return bn(a)}function dx(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var Ct=typeof Object.is=="function"?Object.is:dx;function vs(e,a){if(Ct(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var l=Object.keys(e),s=Object.keys(a);if(l.length!==s.length)return!1;for(s=0;s<l.length;s++){var n=l[s];if(!qe.call(a,n)||!Ct(e[n],a[n]))return!1}return!0}function ad(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ld(e,a){var l=ad(e);e=0;for(var s;l;){if(l.nodeType===3){if(s=e+l.textContent.length,e<=a&&s>=a)return{node:l,offset:a-e};e=s}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ad(l)}}function sd(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?sd(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function nd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=un(e.document);a instanceof e.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)e=a.contentWindow;else break;a=un(e.document)}return a}function lr(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var ux=ia&&"documentMode"in document&&11>=document.documentMode,Ml=null,sr=null,ys=null,nr=!1;function id(e,a,l){var s=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;nr||Ml==null||Ml!==un(s)||(s=Ml,"selectionStart"in s&&lr(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ys&&vs(ys,s)||(ys=s,s=ii(sr,"onSelect"),0<s.length&&(a=new gn("onSelect","select",null,a,l),e.push({event:a,listeners:s}),a.target=Ml)))}function al(e,a){var l={};return l[e.toLowerCase()]=a.toLowerCase(),l["Webkit"+e]="webkit"+a,l["Moz"+e]="moz"+a,l}var Rl={animationend:al("Animation","AnimationEnd"),animationiteration:al("Animation","AnimationIteration"),animationstart:al("Animation","AnimationStart"),transitionrun:al("Transition","TransitionRun"),transitionstart:al("Transition","TransitionStart"),transitioncancel:al("Transition","TransitionCancel"),transitionend:al("Transition","TransitionEnd")},ir={},rd={};ia&&(rd=document.createElement("div").style,"AnimationEvent"in window||(delete Rl.animationend.animation,delete Rl.animationiteration.animation,delete Rl.animationstart.animation),"TransitionEvent"in window||delete Rl.transitionend.transition);function ll(e){if(ir[e])return ir[e];if(!Rl[e])return e;var a=Rl[e],l;for(l in a)if(a.hasOwnProperty(l)&&l in rd)return ir[e]=a[l];return e}var cd=ll("animationend"),od=ll("animationiteration"),dd=ll("animationstart"),mx=ll("transitionrun"),hx=ll("transitionstart"),fx=ll("transitioncancel"),ud=ll("transitionend"),md=new Map,rr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rr.push("scrollEnd");function Jt(e,a){md.set(e,a),el(a,[e])}var vn=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Yt=[],zl=0,cr=0;function yn(){for(var e=zl,a=cr=zl=0;a<e;){var l=Yt[a];Yt[a++]=null;var s=Yt[a];Yt[a++]=null;var n=Yt[a];Yt[a++]=null;var r=Yt[a];if(Yt[a++]=null,s!==null&&n!==null){var m=s.pending;m===null?n.next=n:(n.next=m.next,m.next=n),s.pending=n}r!==0&&hd(l,n,r)}}function jn(e,a,l,s){Yt[zl++]=e,Yt[zl++]=a,Yt[zl++]=l,Yt[zl++]=s,cr|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function or(e,a,l,s){return jn(e,a,l,s),Nn(e)}function sl(e,a){return jn(e,null,null,a),Nn(e)}function hd(e,a,l){e.lanes|=l;var s=e.alternate;s!==null&&(s.lanes|=l);for(var n=!1,r=e.return;r!==null;)r.childLanes|=l,s=r.alternate,s!==null&&(s.childLanes|=l),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(n=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,n&&a!==null&&(n=31-pt(l),e=r.hiddenUpdates,s=e[n],s===null?e[n]=[a]:s.push(a),a.lane=l|536870912),r):null}function Nn(e){if(50<Gs)throw Gs=0,bc=null,Error(d(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var Ol={};function xx(e,a,l,s){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Et(e,a,l,s){return new xx(e,a,l,s)}function dr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ra(e,a){var l=e.alternate;return l===null?(l=Et(e.tag,a,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=a,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,a=e.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function fd(e,a){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,a=l.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function wn(e,a,l,s,n,r){var m=0;if(s=e,typeof e=="function")dr(e)&&(m=1);else if(typeof e=="string")m=y0(e,l,B.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case he:return e=Et(31,l,a,n),e.elementType=he,e.lanes=r,e;case k:return nl(l.children,n,r,a);case O:m=8,n|=24;break;case E:return e=Et(12,l,a,n|2),e.elementType=E,e.lanes=r,e;case $:return e=Et(13,l,a,n),e.elementType=$,e.lanes=r,e;case U:return e=Et(19,l,a,n),e.elementType=U,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Q:m=10;break e;case H:m=9;break e;case le:m=11;break e;case P:m=14;break e;case ve:m=16,s=null;break e}m=29,l=Error(d(130,e===null?"null":typeof e,"")),s=null}return a=Et(m,l,a,n),a.elementType=e,a.type=s,a.lanes=r,a}function nl(e,a,l,s){return e=Et(7,e,s,a),e.lanes=l,e}function ur(e,a,l){return e=Et(6,e,null,a),e.lanes=l,e}function xd(e){var a=Et(18,null,null,0);return a.stateNode=e,a}function mr(e,a,l){return a=Et(4,e.children!==null?e.children:[],e.key,a),a.lanes=l,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var gd=new WeakMap;function Gt(e,a){if(typeof e=="object"&&e!==null){var l=gd.get(e);return l!==void 0?l:(a={value:e,source:a,stack:Ue(a)},gd.set(e,a),a)}return{value:e,source:a,stack:Ue(a)}}var Ll=[],Ul=0,Sn=null,js=0,Ft=[],Xt=0,Ea=null,It=1,ea="";function ca(e,a){Ll[Ul++]=js,Ll[Ul++]=Sn,Sn=e,js=a}function pd(e,a,l){Ft[Xt++]=It,Ft[Xt++]=ea,Ft[Xt++]=Ea,Ea=e;var s=It;e=ea;var n=32-pt(s)-1;s&=~(1<<n),l+=1;var r=32-pt(a)+n;if(30<r){var m=n-n%5;r=(s&(1<<m)-1).toString(32),s>>=m,n-=m,It=1<<32-pt(a)+n|l<<n|s,ea=r+e}else It=1<<r|l<<n|s,ea=e}function hr(e){e.return!==null&&(ca(e,1),pd(e,1,0))}function fr(e){for(;e===Sn;)Sn=Ll[--Ul],Ll[Ul]=null,js=Ll[--Ul],Ll[Ul]=null;for(;e===Ea;)Ea=Ft[--Xt],Ft[Xt]=null,ea=Ft[--Xt],Ft[Xt]=null,It=Ft[--Xt],Ft[Xt]=null}function bd(e,a){Ft[Xt++]=It,Ft[Xt++]=ea,Ft[Xt++]=Ea,It=a.id,ea=a.overflow,Ea=e}var dt=null,Ve=null,Re=!1,Da=null,Qt=!1,xr=Error(d(519));function ka(e){var a=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ns(Gt(a,e)),xr}function vd(e){var a=e.stateNode,l=e.type,s=e.memoizedProps;switch(a[ot]=e,a[vt]=s,l){case"dialog":Ae("cancel",a),Ae("close",a);break;case"iframe":case"object":case"embed":Ae("load",a);break;case"video":case"audio":for(l=0;l<Xs.length;l++)Ae(Xs[l],a);break;case"source":Ae("error",a);break;case"img":case"image":case"link":Ae("error",a),Ae("load",a);break;case"details":Ae("toggle",a);break;case"input":Ae("invalid",a),Mo(a,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Ae("invalid",a);break;case"textarea":Ae("invalid",a),zo(a,s.value,s.defaultValue,s.children)}l=s.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||s.suppressHydrationWarning===!0||Lm(a.textContent,l)?(s.popover!=null&&(Ae("beforetoggle",a),Ae("toggle",a)),s.onScroll!=null&&Ae("scroll",a),s.onScrollEnd!=null&&Ae("scrollend",a),s.onClick!=null&&(a.onclick=na),a=!0):a=!1,a||ka(e,!0)}function yd(e){for(dt=e.return;dt;)switch(dt.tag){case 5:case 31:case 13:Qt=!1;return;case 27:case 3:Qt=!0;return;default:dt=dt.return}}function Bl(e){if(e!==dt)return!1;if(!Re)return yd(e),Re=!0,!1;var a=e.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||Rc(e.type,e.memoizedProps)),l=!l),l&&Ve&&ka(e),yd(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));Ve=Qm(e)}else if(a===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));Ve=Qm(e)}else a===27?(a=Ve,Fa(e.type)?(e=Bc,Bc=null,Ve=e):Ve=a):Ve=dt?Zt(e.stateNode.nextSibling):null;return!0}function il(){Ve=dt=null,Re=!1}function gr(){var e=Da;return e!==null&&(St===null?St=e:St.push.apply(St,e),Da=null),e}function Ns(e){Da===null?Da=[e]:Da.push(e)}var pr=C(null),rl=null,oa=null;function Aa(e,a,l){W(pr,a._currentValue),a._currentValue=l}function da(e){e._currentValue=pr.current,M(pr)}function br(e,a,l){for(;e!==null;){var s=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,s!==null&&(s.childLanes|=a)):s!==null&&(s.childLanes&a)!==a&&(s.childLanes|=a),e===l)break;e=e.return}}function vr(e,a,l,s){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var r=n.dependencies;if(r!==null){var m=n.child;r=r.firstContext;e:for(;r!==null;){var w=r;r=n;for(var D=0;D<a.length;D++)if(w.context===a[D]){r.lanes|=l,w=r.alternate,w!==null&&(w.lanes|=l),br(r.return,l,e),s||(m=null);break e}r=w.next}}else if(n.tag===18){if(m=n.return,m===null)throw Error(d(341));m.lanes|=l,r=m.alternate,r!==null&&(r.lanes|=l),br(m,l,e),m=null}else m=n.child;if(m!==null)m.return=n;else for(m=n;m!==null;){if(m===e){m=null;break}if(n=m.sibling,n!==null){n.return=m.return,m=n;break}m=m.return}n=m}}function Hl(e,a,l,s){e=null;for(var n=a,r=!1;n!==null;){if(!r){if((n.flags&524288)!==0)r=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var m=n.alternate;if(m===null)throw Error(d(387));if(m=m.memoizedProps,m!==null){var w=n.type;Ct(n.pendingProps.value,m.value)||(e!==null?e.push(w):e=[w])}}else if(n===pe.current){if(m=n.alternate,m===null)throw Error(d(387));m.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(Js):e=[Js])}n=n.return}e!==null&&vr(a,e,l,s),a.flags|=262144}function _n(e){for(e=e.firstContext;e!==null;){if(!Ct(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function cl(e){rl=e,oa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ut(e){return jd(rl,e)}function Cn(e,a){return rl===null&&cl(e),jd(e,a)}function jd(e,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},oa===null){if(e===null)throw Error(d(308));oa=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else oa=oa.next=a;return l}var gx=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(l,s){e.push(s)}};this.abort=function(){a.aborted=!0,e.forEach(function(l){return l()})}},px=i.unstable_scheduleCallback,bx=i.unstable_NormalPriority,tt={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yr(){return{controller:new gx,data:new Map,refCount:0}}function ws(e){e.refCount--,e.refCount===0&&px(bx,function(){e.controller.abort()})}var Ss=null,jr=0,ql=0,Yl=null;function vx(e,a){if(Ss===null){var l=Ss=[];jr=0,ql=Sc(),Yl={status:"pending",value:void 0,then:function(s){l.push(s)}}}return jr++,a.then(Nd,Nd),a}function Nd(){if(--jr===0&&Ss!==null){Yl!==null&&(Yl.status="fulfilled");var e=Ss;Ss=null,ql=0,Yl=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function yx(e,a){var l=[],s={status:"pending",value:null,reason:null,then:function(n){l.push(n)}};return e.then(function(){s.status="fulfilled",s.value=a;for(var n=0;n<l.length;n++)(0,l[n])(a)},function(n){for(s.status="rejected",s.reason=n,n=0;n<l.length;n++)(0,l[n])(void 0)}),s}var wd=_.S;_.S=function(e,a){im=ft(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&vx(e,a),wd!==null&&wd(e,a)};var ol=C(null);function Nr(){var e=ol.current;return e!==null?e:Xe.pooledCache}function En(e,a){a===null?W(ol,ol.current):W(ol,a.pool)}function Sd(){var e=Nr();return e===null?null:{parent:tt._currentValue,pool:e}}var Gl=Error(d(460)),wr=Error(d(474)),Dn=Error(d(542)),kn={then:function(){}};function _d(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Cd(e,a,l){switch(l=e[l],l===void 0?e.push(a):l!==a&&(a.then(na,na),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,Dd(e),e;default:if(typeof a.status=="string")a.then(na,na);else{if(e=Xe,e!==null&&100<e.shellSuspendCounter)throw Error(d(482));e=a,e.status="pending",e.then(function(s){if(a.status==="pending"){var n=a;n.status="fulfilled",n.value=s}},function(s){if(a.status==="pending"){var n=a;n.status="rejected",n.reason=s}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,Dd(e),e}throw ul=a,Gl}}function dl(e){try{var a=e._init;return a(e._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ul=l,Gl):l}}var ul=null;function Ed(){if(ul===null)throw Error(d(459));var e=ul;return ul=null,e}function Dd(e){if(e===Gl||e===Dn)throw Error(d(483))}var Fl=null,_s=0;function An(e){var a=_s;return _s+=1,Fl===null&&(Fl=[]),Cd(Fl,e,a)}function Cs(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function Tn(e,a){throw a.$$typeof===y?Error(d(525)):(e=Object.prototype.toString.call(a),Error(d(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function kd(e){function a(L,z){if(e){var F=L.deletions;F===null?(L.deletions=[z],L.flags|=16):F.push(z)}}function l(L,z){if(!e)return null;for(;z!==null;)a(L,z),z=z.sibling;return null}function s(L){for(var z=new Map;L!==null;)L.key!==null?z.set(L.key,L):z.set(L.index,L),L=L.sibling;return z}function n(L,z){return L=ra(L,z),L.index=0,L.sibling=null,L}function r(L,z,F){return L.index=F,e?(F=L.alternate,F!==null?(F=F.index,F<z?(L.flags|=67108866,z):F):(L.flags|=67108866,z)):(L.flags|=1048576,z)}function m(L){return e&&L.alternate===null&&(L.flags|=67108866),L}function w(L,z,F,ae){return z===null||z.tag!==6?(z=ur(F,L.mode,ae),z.return=L,z):(z=n(z,F),z.return=L,z)}function D(L,z,F,ae){var ye=F.type;return ye===k?ee(L,z,F.props.children,ae,F.key):z!==null&&(z.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===ve&&dl(ye)===z.type)?(z=n(z,F.props),Cs(z,F),z.return=L,z):(z=wn(F.type,F.key,F.props,null,L.mode,ae),Cs(z,F),z.return=L,z)}function X(L,z,F,ae){return z===null||z.tag!==4||z.stateNode.containerInfo!==F.containerInfo||z.stateNode.implementation!==F.implementation?(z=mr(F,L.mode,ae),z.return=L,z):(z=n(z,F.children||[]),z.return=L,z)}function ee(L,z,F,ae,ye){return z===null||z.tag!==7?(z=nl(F,L.mode,ae,ye),z.return=L,z):(z=n(z,F),z.return=L,z)}function se(L,z,F){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=ur(""+z,L.mode,F),z.return=L,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case S:return F=wn(z.type,z.key,z.props,null,L.mode,F),Cs(F,z),F.return=L,F;case N:return z=mr(z,L.mode,F),z.return=L,z;case ve:return z=dl(z),se(L,z,F)}if(A(z)||K(z))return z=nl(z,L.mode,F,null),z.return=L,z;if(typeof z.then=="function")return se(L,An(z),F);if(z.$$typeof===Q)return se(L,Cn(L,z),F);Tn(L,z)}return null}function V(L,z,F,ae){var ye=z!==null?z.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ye!==null?null:w(L,z,""+F,ae);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case S:return F.key===ye?D(L,z,F,ae):null;case N:return F.key===ye?X(L,z,F,ae):null;case ve:return F=dl(F),V(L,z,F,ae)}if(A(F)||K(F))return ye!==null?null:ee(L,z,F,ae,null);if(typeof F.then=="function")return V(L,z,An(F),ae);if(F.$$typeof===Q)return V(L,z,Cn(L,F),ae);Tn(L,F)}return null}function J(L,z,F,ae,ye){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return L=L.get(F)||null,w(z,L,""+ae,ye);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case S:return L=L.get(ae.key===null?F:ae.key)||null,D(z,L,ae,ye);case N:return L=L.get(ae.key===null?F:ae.key)||null,X(z,L,ae,ye);case ve:return ae=dl(ae),J(L,z,F,ae,ye)}if(A(ae)||K(ae))return L=L.get(F)||null,ee(z,L,ae,ye,null);if(typeof ae.then=="function")return J(L,z,F,An(ae),ye);if(ae.$$typeof===Q)return J(L,z,F,Cn(z,ae),ye);Tn(z,ae)}return null}function xe(L,z,F,ae){for(var ye=null,ze=null,be=z,Ee=z=0,Me=null;be!==null&&Ee<F.length;Ee++){be.index>Ee?(Me=be,be=null):Me=be.sibling;var Oe=V(L,be,F[Ee],ae);if(Oe===null){be===null&&(be=Me);break}e&&be&&Oe.alternate===null&&a(L,be),z=r(Oe,z,Ee),ze===null?ye=Oe:ze.sibling=Oe,ze=Oe,be=Me}if(Ee===F.length)return l(L,be),Re&&ca(L,Ee),ye;if(be===null){for(;Ee<F.length;Ee++)be=se(L,F[Ee],ae),be!==null&&(z=r(be,z,Ee),ze===null?ye=be:ze.sibling=be,ze=be);return Re&&ca(L,Ee),ye}for(be=s(be);Ee<F.length;Ee++)Me=J(be,L,Ee,F[Ee],ae),Me!==null&&(e&&Me.alternate!==null&&be.delete(Me.key===null?Ee:Me.key),z=r(Me,z,Ee),ze===null?ye=Me:ze.sibling=Me,ze=Me);return e&&be.forEach(function($a){return a(L,$a)}),Re&&ca(L,Ee),ye}function Ne(L,z,F,ae){if(F==null)throw Error(d(151));for(var ye=null,ze=null,be=z,Ee=z=0,Me=null,Oe=F.next();be!==null&&!Oe.done;Ee++,Oe=F.next()){be.index>Ee?(Me=be,be=null):Me=be.sibling;var $a=V(L,be,Oe.value,ae);if($a===null){be===null&&(be=Me);break}e&&be&&$a.alternate===null&&a(L,be),z=r($a,z,Ee),ze===null?ye=$a:ze.sibling=$a,ze=$a,be=Me}if(Oe.done)return l(L,be),Re&&ca(L,Ee),ye;if(be===null){for(;!Oe.done;Ee++,Oe=F.next())Oe=se(L,Oe.value,ae),Oe!==null&&(z=r(Oe,z,Ee),ze===null?ye=Oe:ze.sibling=Oe,ze=Oe);return Re&&ca(L,Ee),ye}for(be=s(be);!Oe.done;Ee++,Oe=F.next())Oe=J(be,L,Ee,Oe.value,ae),Oe!==null&&(e&&Oe.alternate!==null&&be.delete(Oe.key===null?Ee:Oe.key),z=r(Oe,z,Ee),ze===null?ye=Oe:ze.sibling=Oe,ze=Oe);return e&&be.forEach(function(T0){return a(L,T0)}),Re&&ca(L,Ee),ye}function Fe(L,z,F,ae){if(typeof F=="object"&&F!==null&&F.type===k&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case S:e:{for(var ye=F.key;z!==null;){if(z.key===ye){if(ye=F.type,ye===k){if(z.tag===7){l(L,z.sibling),ae=n(z,F.props.children),ae.return=L,L=ae;break e}}else if(z.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===ve&&dl(ye)===z.type){l(L,z.sibling),ae=n(z,F.props),Cs(ae,F),ae.return=L,L=ae;break e}l(L,z);break}else a(L,z);z=z.sibling}F.type===k?(ae=nl(F.props.children,L.mode,ae,F.key),ae.return=L,L=ae):(ae=wn(F.type,F.key,F.props,null,L.mode,ae),Cs(ae,F),ae.return=L,L=ae)}return m(L);case N:e:{for(ye=F.key;z!==null;){if(z.key===ye)if(z.tag===4&&z.stateNode.containerInfo===F.containerInfo&&z.stateNode.implementation===F.implementation){l(L,z.sibling),ae=n(z,F.children||[]),ae.return=L,L=ae;break e}else{l(L,z);break}else a(L,z);z=z.sibling}ae=mr(F,L.mode,ae),ae.return=L,L=ae}return m(L);case ve:return F=dl(F),Fe(L,z,F,ae)}if(A(F))return xe(L,z,F,ae);if(K(F)){if(ye=K(F),typeof ye!="function")throw Error(d(150));return F=ye.call(F),Ne(L,z,F,ae)}if(typeof F.then=="function")return Fe(L,z,An(F),ae);if(F.$$typeof===Q)return Fe(L,z,Cn(L,F),ae);Tn(L,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,z!==null&&z.tag===6?(l(L,z.sibling),ae=n(z,F),ae.return=L,L=ae):(l(L,z),ae=ur(F,L.mode,ae),ae.return=L,L=ae),m(L)):l(L,z)}return function(L,z,F,ae){try{_s=0;var ye=Fe(L,z,F,ae);return Fl=null,ye}catch(be){if(be===Gl||be===Dn)throw be;var ze=Et(29,be,null,L.mode);return ze.lanes=ae,ze.return=L,ze}}}var ml=kd(!0),Ad=kd(!1),Ta=!1;function Sr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _r(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ma(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ra(e,a,l){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Le&2)!==0){var n=s.pending;return n===null?a.next=a:(a.next=n.next,n.next=a),s.pending=a,a=Nn(e),hd(e,null,l),a}return jn(e,s,a,l),Nn(e)}function Es(e,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var s=a.lanes;s&=e.pendingLanes,l|=s,a.lanes=l,jo(e,l)}}function Cr(e,a){var l=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,l===s)){var n=null,r=null;if(l=l.firstBaseUpdate,l!==null){do{var m={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};r===null?n=r=m:r=r.next=m,l=l.next}while(l!==null);r===null?n=r=a:r=r.next=a}else n=r=a;l={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:s.shared,callbacks:s.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=a:e.next=a,l.lastBaseUpdate=a}var Er=!1;function Ds(){if(Er){var e=Yl;if(e!==null)throw e}}function ks(e,a,l,s){Er=!1;var n=e.updateQueue;Ta=!1;var r=n.firstBaseUpdate,m=n.lastBaseUpdate,w=n.shared.pending;if(w!==null){n.shared.pending=null;var D=w,X=D.next;D.next=null,m===null?r=X:m.next=X,m=D;var ee=e.alternate;ee!==null&&(ee=ee.updateQueue,w=ee.lastBaseUpdate,w!==m&&(w===null?ee.firstBaseUpdate=X:w.next=X,ee.lastBaseUpdate=D))}if(r!==null){var se=n.baseState;m=0,ee=X=D=null,w=r;do{var V=w.lane&-536870913,J=V!==w.lane;if(J?(Te&V)===V:(s&V)===V){V!==0&&V===ql&&(Er=!0),ee!==null&&(ee=ee.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var xe=e,Ne=w;V=a;var Fe=l;switch(Ne.tag){case 1:if(xe=Ne.payload,typeof xe=="function"){se=xe.call(Fe,se,V);break e}se=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Ne.payload,V=typeof xe=="function"?xe.call(Fe,se,V):xe,V==null)break e;se=f({},se,V);break e;case 2:Ta=!0}}V=w.callback,V!==null&&(e.flags|=64,J&&(e.flags|=8192),J=n.callbacks,J===null?n.callbacks=[V]:J.push(V))}else J={lane:V,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ee===null?(X=ee=J,D=se):ee=ee.next=J,m|=V;if(w=w.next,w===null){if(w=n.shared.pending,w===null)break;J=w,w=J.next,J.next=null,n.lastBaseUpdate=J,n.shared.pending=null}}while(!0);ee===null&&(D=se),n.baseState=D,n.firstBaseUpdate=X,n.lastBaseUpdate=ee,r===null&&(n.shared.lanes=0),Ba|=m,e.lanes=m,e.memoizedState=se}}function Td(e,a){if(typeof e!="function")throw Error(d(191,e));e.call(a)}function Md(e,a){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)Td(l[e],a)}var Xl=C(null),Mn=C(0);function Rd(e,a){e=va,W(Mn,e),W(Xl,a),va=e|a.baseLanes}function Dr(){W(Mn,va),W(Xl,Xl.current)}function kr(){va=Mn.current,M(Xl),M(Mn)}var Dt=C(null),Vt=null;function za(e){var a=e.alternate;W(Ie,Ie.current&1),W(Dt,e),Vt===null&&(a===null||Xl.current!==null||a.memoizedState!==null)&&(Vt=e)}function Ar(e){W(Ie,Ie.current),W(Dt,e),Vt===null&&(Vt=e)}function zd(e){e.tag===22?(W(Ie,Ie.current),W(Dt,e),Vt===null&&(Vt=e)):Oa()}function Oa(){W(Ie,Ie.current),W(Dt,Dt.current)}function kt(e){M(Dt),Vt===e&&(Vt=null),M(Ie)}var Ie=C(0);function Rn(e){for(var a=e;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Lc(l)||Uc(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ua=0,_e=null,Ye=null,at=null,zn=!1,Ql=!1,hl=!1,On=0,As=0,Vl=null,jx=0;function We(){throw Error(d(321))}function Tr(e,a){if(a===null)return!1;for(var l=0;l<a.length&&l<e.length;l++)if(!Ct(e[l],a[l]))return!1;return!0}function Mr(e,a,l,s,n,r){return ua=r,_e=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,_.H=e===null||e.memoizedState===null?pu:Zr,hl=!1,r=l(s,n),hl=!1,Ql&&(r=Ld(a,l,s,n)),Od(e),r}function Od(e){_.H=Rs;var a=Ye!==null&&Ye.next!==null;if(ua=0,at=Ye=_e=null,zn=!1,As=0,Vl=null,a)throw Error(d(300));e===null||lt||(e=e.dependencies,e!==null&&_n(e)&&(lt=!0))}function Ld(e,a,l,s){_e=e;var n=0;do{if(Ql&&(Vl=null),As=0,Ql=!1,25<=n)throw Error(d(301));if(n+=1,at=Ye=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}_.H=bu,r=a(l,s)}while(Ql);return r}function Nx(){var e=_.H,a=e.useState()[0];return a=typeof a.then=="function"?Ts(a):a,e=e.useState()[0],(Ye!==null?Ye.memoizedState:null)!==e&&(_e.flags|=1024),a}function Rr(){var e=On!==0;return On=0,e}function zr(e,a,l){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~l}function Or(e){if(zn){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}zn=!1}ua=0,at=Ye=_e=null,Ql=!1,As=On=0,Vl=null}function bt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?_e.memoizedState=at=e:at=at.next=e,at}function et(){if(Ye===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var a=at===null?_e.memoizedState:at.next;if(a!==null)at=a,Ye=e;else{if(e===null)throw _e.alternate===null?Error(d(467)):Error(d(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},at===null?_e.memoizedState=at=e:at=at.next=e}return at}function Ln(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ts(e){var a=As;return As+=1,Vl===null&&(Vl=[]),e=Cd(Vl,e,a),a=_e,(at===null?a.memoizedState:at.next)===null&&(a=a.alternate,_.H=a===null||a.memoizedState===null?pu:Zr),e}function Un(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ts(e);if(e.$$typeof===Q)return ut(e)}throw Error(d(438,String(e)))}function Lr(e){var a=null,l=_e.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var s=_e.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(a={data:s.data.map(function(n){return n.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Ln(),_e.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(e),s=0;s<e;s++)l[s]=me;return a.index++,l}function ma(e,a){return typeof a=="function"?a(e):a}function Bn(e){var a=et();return Ur(a,Ye,e)}function Ur(e,a,l){var s=e.queue;if(s===null)throw Error(d(311));s.lastRenderedReducer=l;var n=e.baseQueue,r=s.pending;if(r!==null){if(n!==null){var m=n.next;n.next=r.next,r.next=m}a.baseQueue=n=r,s.pending=null}if(r=e.baseState,n===null)e.memoizedState=r;else{a=n.next;var w=m=null,D=null,X=a,ee=!1;do{var se=X.lane&-536870913;if(se!==X.lane?(Te&se)===se:(ua&se)===se){var V=X.revertLane;if(V===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),se===ql&&(ee=!0);else if((ua&V)===V){X=X.next,V===ql&&(ee=!0);continue}else se={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},D===null?(w=D=se,m=r):D=D.next=se,_e.lanes|=V,Ba|=V;se=X.action,hl&&l(r,se),r=X.hasEagerState?X.eagerState:l(r,se)}else V={lane:se,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},D===null?(w=D=V,m=r):D=D.next=V,_e.lanes|=se,Ba|=se;X=X.next}while(X!==null&&X!==a);if(D===null?m=r:D.next=w,!Ct(r,e.memoizedState)&&(lt=!0,ee&&(l=Yl,l!==null)))throw l;e.memoizedState=r,e.baseState=m,e.baseQueue=D,s.lastRenderedState=r}return n===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Br(e){var a=et(),l=a.queue;if(l===null)throw Error(d(311));l.lastRenderedReducer=e;var s=l.dispatch,n=l.pending,r=a.memoizedState;if(n!==null){l.pending=null;var m=n=n.next;do r=e(r,m.action),m=m.next;while(m!==n);Ct(r,a.memoizedState)||(lt=!0),a.memoizedState=r,a.baseQueue===null&&(a.baseState=r),l.lastRenderedState=r}return[r,s]}function Ud(e,a,l){var s=_e,n=et(),r=Re;if(r){if(l===void 0)throw Error(d(407));l=l()}else l=a();var m=!Ct((Ye||n).memoizedState,l);if(m&&(n.memoizedState=l,lt=!0),n=n.queue,Yr(qd.bind(null,s,n,e),[e]),n.getSnapshot!==a||m||at!==null&&at.memoizedState.tag&1){if(s.flags|=2048,Zl(9,{destroy:void 0},Hd.bind(null,s,n,l,a),null),Xe===null)throw Error(d(349));r||(ua&127)!==0||Bd(s,a,l)}return l}function Bd(e,a,l){e.flags|=16384,e={getSnapshot:a,value:l},a=_e.updateQueue,a===null?(a=Ln(),_e.updateQueue=a,a.stores=[e]):(l=a.stores,l===null?a.stores=[e]:l.push(e))}function Hd(e,a,l,s){a.value=l,a.getSnapshot=s,Yd(a)&&Gd(e)}function qd(e,a,l){return l(function(){Yd(a)&&Gd(e)})}function Yd(e){var a=e.getSnapshot;e=e.value;try{var l=a();return!Ct(e,l)}catch{return!0}}function Gd(e){var a=sl(e,2);a!==null&&_t(a,e,2)}function Hr(e){var a=bt();if(typeof e=="function"){var l=e;if(e=l(),hl){Ut(!0);try{l()}finally{Ut(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:e},a}function Fd(e,a,l,s){return e.baseState=l,Ur(e,Ye,typeof s=="function"?s:ma)}function wx(e,a,l,s,n){if(Yn(e))throw Error(d(485));if(e=a.action,e!==null){var r={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){r.listeners.push(m)}};_.T!==null?l(!0):r.isTransition=!1,s(r),l=a.pending,l===null?(r.next=a.pending=r,Xd(a,r)):(r.next=l.next,a.pending=l.next=r)}}function Xd(e,a){var l=a.action,s=a.payload,n=e.state;if(a.isTransition){var r=_.T,m={};_.T=m;try{var w=l(n,s),D=_.S;D!==null&&D(m,w),Qd(e,a,w)}catch(X){qr(e,a,X)}finally{r!==null&&m.types!==null&&(r.types=m.types),_.T=r}}else try{r=l(n,s),Qd(e,a,r)}catch(X){qr(e,a,X)}}function Qd(e,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(s){Vd(e,a,s)},function(s){return qr(e,a,s)}):Vd(e,a,l)}function Vd(e,a,l){a.status="fulfilled",a.value=l,Zd(a),e.state=l,a=e.pending,a!==null&&(l=a.next,l===a?e.pending=null:(l=l.next,a.next=l,Xd(e,l)))}function qr(e,a,l){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do a.status="rejected",a.reason=l,Zd(a),a=a.next;while(a!==s)}e.action=null}function Zd(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function $d(e,a){return a}function Jd(e,a){if(Re){var l=Xe.formState;if(l!==null){e:{var s=_e;if(Re){if(Ve){t:{for(var n=Ve,r=Qt;n.nodeType!==8;){if(!r){n=null;break t}if(n=Zt(n.nextSibling),n===null){n=null;break t}}r=n.data,n=r==="F!"||r==="F"?n:null}if(n){Ve=Zt(n.nextSibling),s=n.data==="F!";break e}}ka(s)}s=!1}s&&(a=l[0])}}return l=bt(),l.memoizedState=l.baseState=a,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$d,lastRenderedState:a},l.queue=s,l=fu.bind(null,_e,s),s.dispatch=l,s=Hr(!1),r=Vr.bind(null,_e,!1,s.queue),s=bt(),n={state:a,dispatch:null,action:e,pending:null},s.queue=n,l=wx.bind(null,_e,n,r,l),n.dispatch=l,s.memoizedState=e,[a,l,!1]}function Kd(e){var a=et();return Wd(a,Ye,e)}function Wd(e,a,l){if(a=Ur(e,a,$d)[0],e=Bn(ma)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var s=Ts(a)}catch(m){throw m===Gl?Dn:m}else s=a;a=et();var n=a.queue,r=n.dispatch;return l!==a.memoizedState&&(_e.flags|=2048,Zl(9,{destroy:void 0},Sx.bind(null,n,l),null)),[s,r,e]}function Sx(e,a){e.action=a}function Pd(e){var a=et(),l=Ye;if(l!==null)return Wd(a,l,e);et(),a=a.memoizedState,l=et();var s=l.queue.dispatch;return l.memoizedState=e,[a,s,!1]}function Zl(e,a,l,s){return e={tag:e,create:l,deps:s,inst:a,next:null},a=_e.updateQueue,a===null&&(a=Ln(),_e.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=e.next=e:(s=l.next,l.next=e,e.next=s,a.lastEffect=e),e}function Id(){return et().memoizedState}function Hn(e,a,l,s){var n=bt();_e.flags|=e,n.memoizedState=Zl(1|a,{destroy:void 0},l,s===void 0?null:s)}function qn(e,a,l,s){var n=et();s=s===void 0?null:s;var r=n.memoizedState.inst;Ye!==null&&s!==null&&Tr(s,Ye.memoizedState.deps)?n.memoizedState=Zl(a,r,l,s):(_e.flags|=e,n.memoizedState=Zl(1|a,r,l,s))}function eu(e,a){Hn(8390656,8,e,a)}function Yr(e,a){qn(2048,8,e,a)}function _x(e){_e.flags|=4;var a=_e.updateQueue;if(a===null)a=Ln(),_e.updateQueue=a,a.events=[e];else{var l=a.events;l===null?a.events=[e]:l.push(e)}}function tu(e){var a=et().memoizedState;return _x({ref:a,nextImpl:e}),function(){if((Le&2)!==0)throw Error(d(440));return a.impl.apply(void 0,arguments)}}function au(e,a){return qn(4,2,e,a)}function lu(e,a){return qn(4,4,e,a)}function su(e,a){if(typeof a=="function"){e=e();var l=a(e);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function nu(e,a,l){l=l!=null?l.concat([e]):null,qn(4,4,su.bind(null,a,e),l)}function Gr(){}function iu(e,a){var l=et();a=a===void 0?null:a;var s=l.memoizedState;return a!==null&&Tr(a,s[1])?s[0]:(l.memoizedState=[e,a],e)}function ru(e,a){var l=et();a=a===void 0?null:a;var s=l.memoizedState;if(a!==null&&Tr(a,s[1]))return s[0];if(s=e(),hl){Ut(!0);try{e()}finally{Ut(!1)}}return l.memoizedState=[s,a],s}function Fr(e,a,l){return l===void 0||(ua&1073741824)!==0&&(Te&261930)===0?e.memoizedState=a:(e.memoizedState=l,e=cm(),_e.lanes|=e,Ba|=e,l)}function cu(e,a,l,s){return Ct(l,a)?l:Xl.current!==null?(e=Fr(e,l,s),Ct(e,a)||(lt=!0),e):(ua&42)===0||(ua&1073741824)!==0&&(Te&261930)===0?(lt=!0,e.memoizedState=l):(e=cm(),_e.lanes|=e,Ba|=e,a)}function ou(e,a,l,s,n){var r=T.p;T.p=r!==0&&8>r?r:8;var m=_.T,w={};_.T=w,Vr(e,!1,a,l);try{var D=n(),X=_.S;if(X!==null&&X(w,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var ee=yx(D,s);Ms(e,a,ee,Mt(e))}else Ms(e,a,s,Mt(e))}catch(se){Ms(e,a,{then:function(){},status:"rejected",reason:se},Mt())}finally{T.p=r,m!==null&&w.types!==null&&(m.types=w.types),_.T=m}}function Cx(){}function Xr(e,a,l,s){if(e.tag!==5)throw Error(d(476));var n=du(e).queue;ou(e,n,a,q,l===null?Cx:function(){return uu(e),l(s)})}function du(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:q},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:l},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function uu(e){var a=du(e);a.next===null&&(a=e.alternate.memoizedState),Ms(e,a.next.queue,{},Mt())}function Qr(){return ut(Js)}function mu(){return et().memoizedState}function hu(){return et().memoizedState}function Ex(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var l=Mt();e=Ma(l);var s=Ra(a,e,l);s!==null&&(_t(s,a,l),Es(s,a,l)),a={cache:yr()},e.payload=a;return}a=a.return}}function Dx(e,a,l){var s=Mt();l={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Yn(e)?xu(a,l):(l=or(e,a,l,s),l!==null&&(_t(l,e,s),gu(l,a,s)))}function fu(e,a,l){var s=Mt();Ms(e,a,l,s)}function Ms(e,a,l,s){var n={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Yn(e))xu(a,n);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=a.lastRenderedReducer,r!==null))try{var m=a.lastRenderedState,w=r(m,l);if(n.hasEagerState=!0,n.eagerState=w,Ct(w,m))return jn(e,a,n,0),Xe===null&&yn(),!1}catch{}if(l=or(e,a,n,s),l!==null)return _t(l,e,s),gu(l,a,s),!0}return!1}function Vr(e,a,l,s){if(s={lane:2,revertLane:Sc(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Yn(e)){if(a)throw Error(d(479))}else a=or(e,l,s,2),a!==null&&_t(a,e,2)}function Yn(e){var a=e.alternate;return e===_e||a!==null&&a===_e}function xu(e,a){Ql=zn=!0;var l=e.pending;l===null?a.next=a:(a.next=l.next,l.next=a),e.pending=a}function gu(e,a,l){if((l&4194048)!==0){var s=a.lanes;s&=e.pendingLanes,l|=s,a.lanes=l,jo(e,l)}}var Rs={readContext:ut,use:Un,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We};Rs.useEffectEvent=We;var pu={readContext:ut,use:Un,useCallback:function(e,a){return bt().memoizedState=[e,a===void 0?null:a],e},useContext:ut,useEffect:eu,useImperativeHandle:function(e,a,l){l=l!=null?l.concat([e]):null,Hn(4194308,4,su.bind(null,a,e),l)},useLayoutEffect:function(e,a){return Hn(4194308,4,e,a)},useInsertionEffect:function(e,a){Hn(4,2,e,a)},useMemo:function(e,a){var l=bt();a=a===void 0?null:a;var s=e();if(hl){Ut(!0);try{e()}finally{Ut(!1)}}return l.memoizedState=[s,a],s},useReducer:function(e,a,l){var s=bt();if(l!==void 0){var n=l(a);if(hl){Ut(!0);try{l(a)}finally{Ut(!1)}}}else n=a;return s.memoizedState=s.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=Dx.bind(null,_e,e),[s.memoizedState,e]},useRef:function(e){var a=bt();return e={current:e},a.memoizedState=e},useState:function(e){e=Hr(e);var a=e.queue,l=fu.bind(null,_e,a);return a.dispatch=l,[e.memoizedState,l]},useDebugValue:Gr,useDeferredValue:function(e,a){var l=bt();return Fr(l,e,a)},useTransition:function(){var e=Hr(!1);return e=ou.bind(null,_e,e.queue,!0,!1),bt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,l){var s=_e,n=bt();if(Re){if(l===void 0)throw Error(d(407));l=l()}else{if(l=a(),Xe===null)throw Error(d(349));(Te&127)!==0||Bd(s,a,l)}n.memoizedState=l;var r={value:l,getSnapshot:a};return n.queue=r,eu(qd.bind(null,s,r,e),[e]),s.flags|=2048,Zl(9,{destroy:void 0},Hd.bind(null,s,r,l,a),null),l},useId:function(){var e=bt(),a=Xe.identifierPrefix;if(Re){var l=ea,s=It;l=(s&~(1<<32-pt(s)-1)).toString(32)+l,a="_"+a+"R_"+l,l=On++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=jx++,a="_"+a+"r_"+l.toString(32)+"_";return e.memoizedState=a},useHostTransitionStatus:Qr,useFormState:Jd,useActionState:Jd,useOptimistic:function(e){var a=bt();a.memoizedState=a.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Vr.bind(null,_e,!0,l),l.dispatch=a,[e,a]},useMemoCache:Lr,useCacheRefresh:function(){return bt().memoizedState=Ex.bind(null,_e)},useEffectEvent:function(e){var a=bt(),l={impl:e};return a.memoizedState=l,function(){if((Le&2)!==0)throw Error(d(440));return l.impl.apply(void 0,arguments)}}},Zr={readContext:ut,use:Un,useCallback:iu,useContext:ut,useEffect:Yr,useImperativeHandle:nu,useInsertionEffect:au,useLayoutEffect:lu,useMemo:ru,useReducer:Bn,useRef:Id,useState:function(){return Bn(ma)},useDebugValue:Gr,useDeferredValue:function(e,a){var l=et();return cu(l,Ye.memoizedState,e,a)},useTransition:function(){var e=Bn(ma)[0],a=et().memoizedState;return[typeof e=="boolean"?e:Ts(e),a]},useSyncExternalStore:Ud,useId:mu,useHostTransitionStatus:Qr,useFormState:Kd,useActionState:Kd,useOptimistic:function(e,a){var l=et();return Fd(l,Ye,e,a)},useMemoCache:Lr,useCacheRefresh:hu};Zr.useEffectEvent=tu;var bu={readContext:ut,use:Un,useCallback:iu,useContext:ut,useEffect:Yr,useImperativeHandle:nu,useInsertionEffect:au,useLayoutEffect:lu,useMemo:ru,useReducer:Br,useRef:Id,useState:function(){return Br(ma)},useDebugValue:Gr,useDeferredValue:function(e,a){var l=et();return Ye===null?Fr(l,e,a):cu(l,Ye.memoizedState,e,a)},useTransition:function(){var e=Br(ma)[0],a=et().memoizedState;return[typeof e=="boolean"?e:Ts(e),a]},useSyncExternalStore:Ud,useId:mu,useHostTransitionStatus:Qr,useFormState:Pd,useActionState:Pd,useOptimistic:function(e,a){var l=et();return Ye!==null?Fd(l,Ye,e,a):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:Lr,useCacheRefresh:hu};bu.useEffectEvent=tu;function $r(e,a,l,s){a=e.memoizedState,l=l(s,a),l=l==null?a:f({},a,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var Jr={enqueueSetState:function(e,a,l){e=e._reactInternals;var s=Mt(),n=Ma(s);n.payload=a,l!=null&&(n.callback=l),a=Ra(e,n,s),a!==null&&(_t(a,e,s),Es(a,e,s))},enqueueReplaceState:function(e,a,l){e=e._reactInternals;var s=Mt(),n=Ma(s);n.tag=1,n.payload=a,l!=null&&(n.callback=l),a=Ra(e,n,s),a!==null&&(_t(a,e,s),Es(a,e,s))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var l=Mt(),s=Ma(l);s.tag=2,a!=null&&(s.callback=a),a=Ra(e,s,l),a!==null&&(_t(a,e,l),Es(a,e,l))}};function vu(e,a,l,s,n,r,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,r,m):a.prototype&&a.prototype.isPureReactComponent?!vs(l,s)||!vs(n,r):!0}function yu(e,a,l,s){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,s),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,s),a.state!==e&&Jr.enqueueReplaceState(a,a.state,null)}function fl(e,a){var l=a;if("ref"in a){l={};for(var s in a)s!=="ref"&&(l[s]=a[s])}if(e=e.defaultProps){l===a&&(l=f({},l));for(var n in e)l[n]===void 0&&(l[n]=e[n])}return l}function ju(e){vn(e)}function Nu(e){console.error(e)}function wu(e){vn(e)}function Gn(e,a){try{var l=e.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(s){setTimeout(function(){throw s})}}function Su(e,a,l){try{var s=e.onCaughtError;s(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function Kr(e,a,l){return l=Ma(l),l.tag=3,l.payload={element:null},l.callback=function(){Gn(e,a)},l}function _u(e){return e=Ma(e),e.tag=3,e}function Cu(e,a,l,s){var n=l.type.getDerivedStateFromError;if(typeof n=="function"){var r=s.value;e.payload=function(){return n(r)},e.callback=function(){Su(a,l,s)}}var m=l.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){Su(a,l,s),typeof n!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})})}function kx(e,a,l,s,n){if(l.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(a=l.alternate,a!==null&&Hl(a,l,n,!0),l=Dt.current,l!==null){switch(l.tag){case 31:case 13:return Vt===null?ei():l.alternate===null&&Pe===0&&(Pe=3),l.flags&=-257,l.flags|=65536,l.lanes=n,s===kn?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([s]):a.add(s),jc(e,s,n)),!1;case 22:return l.flags|=65536,s===kn?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([s])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([s]):l.add(s)),jc(e,s,n)),!1}throw Error(d(435,l.tag))}return jc(e,s,n),ei(),!1}if(Re)return a=Dt.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=n,s!==xr&&(e=Error(d(422),{cause:s}),Ns(Gt(e,l)))):(s!==xr&&(a=Error(d(423),{cause:s}),Ns(Gt(a,l))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,s=Gt(s,l),n=Kr(e.stateNode,s,n),Cr(e,n),Pe!==4&&(Pe=2)),!1;var r=Error(d(520),{cause:s});if(r=Gt(r,l),Ys===null?Ys=[r]:Ys.push(r),Pe!==4&&(Pe=2),a===null)return!0;s=Gt(s,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,e=n&-n,l.lanes|=e,e=Kr(l.stateNode,s,e),Cr(l,e),!1;case 1:if(a=l.type,r=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Ha===null||!Ha.has(r))))return l.flags|=65536,n&=-n,l.lanes|=n,n=_u(n),Cu(n,e,l,s),Cr(l,n),!1}l=l.return}while(l!==null);return!1}var Wr=Error(d(461)),lt=!1;function mt(e,a,l,s){a.child=e===null?Ad(a,null,l,s):ml(a,e.child,l,s)}function Eu(e,a,l,s,n){l=l.render;var r=a.ref;if("ref"in s){var m={};for(var w in s)w!=="ref"&&(m[w]=s[w])}else m=s;return cl(a),s=Mr(e,a,l,m,r,n),w=Rr(),e!==null&&!lt?(zr(e,a,n),ha(e,a,n)):(Re&&w&&hr(a),a.flags|=1,mt(e,a,s,n),a.child)}function Du(e,a,l,s,n){if(e===null){var r=l.type;return typeof r=="function"&&!dr(r)&&r.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=r,ku(e,a,r,s,n)):(e=wn(l.type,null,s,a,a.mode,n),e.ref=a.ref,e.return=a,a.child=e)}if(r=e.child,!nc(e,n)){var m=r.memoizedProps;if(l=l.compare,l=l!==null?l:vs,l(m,s)&&e.ref===a.ref)return ha(e,a,n)}return a.flags|=1,e=ra(r,s),e.ref=a.ref,e.return=a,a.child=e}function ku(e,a,l,s,n){if(e!==null){var r=e.memoizedProps;if(vs(r,s)&&e.ref===a.ref)if(lt=!1,a.pendingProps=s=r,nc(e,n))(e.flags&131072)!==0&&(lt=!0);else return a.lanes=e.lanes,ha(e,a,n)}return Pr(e,a,l,s,n)}function Au(e,a,l,s){var n=s.children,r=e!==null?e.memoizedState:null;if(e===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((a.flags&128)!==0){if(r=r!==null?r.baseLanes|l:l,e!==null){for(s=a.child=e.child,n=0;s!==null;)n=n|s.lanes|s.childLanes,s=s.sibling;s=n&~r}else s=0,a.child=null;return Tu(e,a,r,l,s)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&En(a,r!==null?r.cachePool:null),r!==null?Rd(a,r):Dr(),zd(a);else return s=a.lanes=536870912,Tu(e,a,r!==null?r.baseLanes|l:l,l,s)}else r!==null?(En(a,r.cachePool),Rd(a,r),Oa(),a.memoizedState=null):(e!==null&&En(a,null),Dr(),Oa());return mt(e,a,n,l),a.child}function zs(e,a){return e!==null&&e.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Tu(e,a,l,s,n){var r=Nr();return r=r===null?null:{parent:tt._currentValue,pool:r},a.memoizedState={baseLanes:l,cachePool:r},e!==null&&En(a,null),Dr(),zd(a),e!==null&&Hl(e,a,s,!0),a.childLanes=n,null}function Fn(e,a){return a=Qn({mode:a.mode,children:a.children},e.mode),a.ref=e.ref,e.child=a,a.return=e,a}function Mu(e,a,l){return ml(a,e.child,null,l),e=Fn(a,a.pendingProps),e.flags|=2,kt(a),a.memoizedState=null,e}function Ax(e,a,l){var s=a.pendingProps,n=(a.flags&128)!==0;if(a.flags&=-129,e===null){if(Re){if(s.mode==="hidden")return e=Fn(a,s),a.lanes=536870912,zs(null,e);if(Ar(a),(e=Ve)?(e=Xm(e,Qt),e=e!==null&&e.data==="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:Ea!==null?{id:It,overflow:ea}:null,retryLane:536870912,hydrationErrors:null},l=xd(e),l.return=a,a.child=l,dt=a,Ve=null)):e=null,e===null)throw ka(a);return a.lanes=536870912,null}return Fn(a,s)}var r=e.memoizedState;if(r!==null){var m=r.dehydrated;if(Ar(a),n)if(a.flags&256)a.flags&=-257,a=Mu(e,a,l);else if(a.memoizedState!==null)a.child=e.child,a.flags|=128,a=null;else throw Error(d(558));else if(lt||Hl(e,a,l,!1),n=(l&e.childLanes)!==0,lt||n){if(s=Xe,s!==null&&(m=No(s,l),m!==0&&m!==r.retryLane))throw r.retryLane=m,sl(e,m),_t(s,e,m),Wr;ei(),a=Mu(e,a,l)}else e=r.treeContext,Ve=Zt(m.nextSibling),dt=a,Re=!0,Da=null,Qt=!1,e!==null&&bd(a,e),a=Fn(a,s),a.flags|=4096;return a}return e=ra(e.child,{mode:s.mode,children:s.children}),e.ref=a.ref,a.child=e,e.return=a,e}function Xn(e,a){var l=a.ref;if(l===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(d(284));(e===null||e.ref!==l)&&(a.flags|=4194816)}}function Pr(e,a,l,s,n){return cl(a),l=Mr(e,a,l,s,void 0,n),s=Rr(),e!==null&&!lt?(zr(e,a,n),ha(e,a,n)):(Re&&s&&hr(a),a.flags|=1,mt(e,a,l,n),a.child)}function Ru(e,a,l,s,n,r){return cl(a),a.updateQueue=null,l=Ld(a,s,l,n),Od(e),s=Rr(),e!==null&&!lt?(zr(e,a,r),ha(e,a,r)):(Re&&s&&hr(a),a.flags|=1,mt(e,a,l,r),a.child)}function zu(e,a,l,s,n){if(cl(a),a.stateNode===null){var r=Ol,m=l.contextType;typeof m=="object"&&m!==null&&(r=ut(m)),r=new l(s,r),a.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Jr,a.stateNode=r,r._reactInternals=a,r=a.stateNode,r.props=s,r.state=a.memoizedState,r.refs={},Sr(a),m=l.contextType,r.context=typeof m=="object"&&m!==null?ut(m):Ol,r.state=a.memoizedState,m=l.getDerivedStateFromProps,typeof m=="function"&&($r(a,l,m,s),r.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(m=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),m!==r.state&&Jr.enqueueReplaceState(r,r.state,null),ks(a,s,r,n),Ds(),r.state=a.memoizedState),typeof r.componentDidMount=="function"&&(a.flags|=4194308),s=!0}else if(e===null){r=a.stateNode;var w=a.memoizedProps,D=fl(l,w);r.props=D;var X=r.context,ee=l.contextType;m=Ol,typeof ee=="object"&&ee!==null&&(m=ut(ee));var se=l.getDerivedStateFromProps;ee=typeof se=="function"||typeof r.getSnapshotBeforeUpdate=="function",w=a.pendingProps!==w,ee||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(w||X!==m)&&yu(a,r,s,m),Ta=!1;var V=a.memoizedState;r.state=V,ks(a,s,r,n),Ds(),X=a.memoizedState,w||V!==X||Ta?(typeof se=="function"&&($r(a,l,se,s),X=a.memoizedState),(D=Ta||vu(a,l,D,s,V,X,m))?(ee||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(a.flags|=4194308)):(typeof r.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=s,a.memoizedState=X),r.props=s,r.state=X,r.context=m,s=D):(typeof r.componentDidMount=="function"&&(a.flags|=4194308),s=!1)}else{r=a.stateNode,_r(e,a),m=a.memoizedProps,ee=fl(l,m),r.props=ee,se=a.pendingProps,V=r.context,X=l.contextType,D=Ol,typeof X=="object"&&X!==null&&(D=ut(X)),w=l.getDerivedStateFromProps,(X=typeof w=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(m!==se||V!==D)&&yu(a,r,s,D),Ta=!1,V=a.memoizedState,r.state=V,ks(a,s,r,n),Ds();var J=a.memoizedState;m!==se||V!==J||Ta||e!==null&&e.dependencies!==null&&_n(e.dependencies)?(typeof w=="function"&&($r(a,l,w,s),J=a.memoizedState),(ee=Ta||vu(a,l,ee,s,V,J,D)||e!==null&&e.dependencies!==null&&_n(e.dependencies))?(X||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(s,J,D),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(s,J,D)),typeof r.componentDidUpdate=="function"&&(a.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof r.componentDidUpdate!="function"||m===e.memoizedProps&&V===e.memoizedState||(a.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&V===e.memoizedState||(a.flags|=1024),a.memoizedProps=s,a.memoizedState=J),r.props=s,r.state=J,r.context=D,s=ee):(typeof r.componentDidUpdate!="function"||m===e.memoizedProps&&V===e.memoizedState||(a.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&V===e.memoizedState||(a.flags|=1024),s=!1)}return r=s,Xn(e,a),s=(a.flags&128)!==0,r||s?(r=a.stateNode,l=s&&typeof l.getDerivedStateFromError!="function"?null:r.render(),a.flags|=1,e!==null&&s?(a.child=ml(a,e.child,null,n),a.child=ml(a,null,l,n)):mt(e,a,l,n),a.memoizedState=r.state,e=a.child):e=ha(e,a,n),e}function Ou(e,a,l,s){return il(),a.flags|=256,mt(e,a,l,s),a.child}var Ir={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ec(e){return{baseLanes:e,cachePool:Sd()}}function tc(e,a,l){return e=e!==null?e.childLanes&~l:0,a&&(e|=Tt),e}function Lu(e,a,l){var s=a.pendingProps,n=!1,r=(a.flags&128)!==0,m;if((m=r)||(m=e!==null&&e.memoizedState===null?!1:(Ie.current&2)!==0),m&&(n=!0,a.flags&=-129),m=(a.flags&32)!==0,a.flags&=-33,e===null){if(Re){if(n?za(a):Oa(),(e=Ve)?(e=Xm(e,Qt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(a.memoizedState={dehydrated:e,treeContext:Ea!==null?{id:It,overflow:ea}:null,retryLane:536870912,hydrationErrors:null},l=xd(e),l.return=a,a.child=l,dt=a,Ve=null)):e=null,e===null)throw ka(a);return Uc(e)?a.lanes=32:a.lanes=536870912,null}var w=s.children;return s=s.fallback,n?(Oa(),n=a.mode,w=Qn({mode:"hidden",children:w},n),s=nl(s,n,l,null),w.return=a,s.return=a,w.sibling=s,a.child=w,s=a.child,s.memoizedState=ec(l),s.childLanes=tc(e,m,l),a.memoizedState=Ir,zs(null,s)):(za(a),ac(a,w))}var D=e.memoizedState;if(D!==null&&(w=D.dehydrated,w!==null)){if(r)a.flags&256?(za(a),a.flags&=-257,a=lc(e,a,l)):a.memoizedState!==null?(Oa(),a.child=e.child,a.flags|=128,a=null):(Oa(),w=s.fallback,n=a.mode,s=Qn({mode:"visible",children:s.children},n),w=nl(w,n,l,null),w.flags|=2,s.return=a,w.return=a,s.sibling=w,a.child=s,ml(a,e.child,null,l),s=a.child,s.memoizedState=ec(l),s.childLanes=tc(e,m,l),a.memoizedState=Ir,a=zs(null,s));else if(za(a),Uc(w)){if(m=w.nextSibling&&w.nextSibling.dataset,m)var X=m.dgst;m=X,s=Error(d(419)),s.stack="",s.digest=m,Ns({value:s,source:null,stack:null}),a=lc(e,a,l)}else if(lt||Hl(e,a,l,!1),m=(l&e.childLanes)!==0,lt||m){if(m=Xe,m!==null&&(s=No(m,l),s!==0&&s!==D.retryLane))throw D.retryLane=s,sl(e,s),_t(m,e,s),Wr;Lc(w)||ei(),a=lc(e,a,l)}else Lc(w)?(a.flags|=192,a.child=e.child,a=null):(e=D.treeContext,Ve=Zt(w.nextSibling),dt=a,Re=!0,Da=null,Qt=!1,e!==null&&bd(a,e),a=ac(a,s.children),a.flags|=4096);return a}return n?(Oa(),w=s.fallback,n=a.mode,D=e.child,X=D.sibling,s=ra(D,{mode:"hidden",children:s.children}),s.subtreeFlags=D.subtreeFlags&65011712,X!==null?w=ra(X,w):(w=nl(w,n,l,null),w.flags|=2),w.return=a,s.return=a,s.sibling=w,a.child=s,zs(null,s),s=a.child,w=e.child.memoizedState,w===null?w=ec(l):(n=w.cachePool,n!==null?(D=tt._currentValue,n=n.parent!==D?{parent:D,pool:D}:n):n=Sd(),w={baseLanes:w.baseLanes|l,cachePool:n}),s.memoizedState=w,s.childLanes=tc(e,m,l),a.memoizedState=Ir,zs(e.child,s)):(za(a),l=e.child,e=l.sibling,l=ra(l,{mode:"visible",children:s.children}),l.return=a,l.sibling=null,e!==null&&(m=a.deletions,m===null?(a.deletions=[e],a.flags|=16):m.push(e)),a.child=l,a.memoizedState=null,l)}function ac(e,a){return a=Qn({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function Qn(e,a){return e=Et(22,e,null,a),e.lanes=0,e}function lc(e,a,l){return ml(a,e.child,null,l),e=ac(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function Uu(e,a,l){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a),br(e.return,a,l)}function sc(e,a,l,s,n,r){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:s,tail:l,tailMode:n,treeForkCount:r}:(m.isBackwards=a,m.rendering=null,m.renderingStartTime=0,m.last=s,m.tail=l,m.tailMode=n,m.treeForkCount=r)}function Bu(e,a,l){var s=a.pendingProps,n=s.revealOrder,r=s.tail;s=s.children;var m=Ie.current,w=(m&2)!==0;if(w?(m=m&1|2,a.flags|=128):m&=1,W(Ie,m),mt(e,a,s,l),s=Re?js:0,!w&&e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Uu(e,l,a);else if(e.tag===19)Uu(e,l,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(n){case"forwards":for(l=a.child,n=null;l!==null;)e=l.alternate,e!==null&&Rn(e)===null&&(n=l),l=l.sibling;l=n,l===null?(n=a.child,a.child=null):(n=l.sibling,l.sibling=null),sc(a,!1,n,l,r,s);break;case"backwards":case"unstable_legacy-backwards":for(l=null,n=a.child,a.child=null;n!==null;){if(e=n.alternate,e!==null&&Rn(e)===null){a.child=n;break}e=n.sibling,n.sibling=l,l=n,n=e}sc(a,!0,l,null,r,s);break;case"together":sc(a,!1,null,null,void 0,s);break;default:a.memoizedState=null}return a.child}function ha(e,a,l){if(e!==null&&(a.dependencies=e.dependencies),Ba|=a.lanes,(l&a.childLanes)===0)if(e!==null){if(Hl(e,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(d(153));if(a.child!==null){for(e=a.child,l=ra(e,e.pendingProps),a.child=l,l.return=a;e.sibling!==null;)e=e.sibling,l=l.sibling=ra(e,e.pendingProps),l.return=a;l.sibling=null}return a.child}function nc(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&_n(e)))}function Tx(e,a,l){switch(a.tag){case 3:Ce(a,a.stateNode.containerInfo),Aa(a,tt,e.memoizedState.cache),il();break;case 27:case 5:R(a);break;case 4:Ce(a,a.stateNode.containerInfo);break;case 10:Aa(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Ar(a),null;break;case 13:var s=a.memoizedState;if(s!==null)return s.dehydrated!==null?(za(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Lu(e,a,l):(za(a),e=ha(e,a,l),e!==null?e.sibling:null);za(a);break;case 19:var n=(e.flags&128)!==0;if(s=(l&a.childLanes)!==0,s||(Hl(e,a,l,!1),s=(l&a.childLanes)!==0),n){if(s)return Bu(e,a,l);a.flags|=128}if(n=a.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),W(Ie,Ie.current),s)break;return null;case 22:return a.lanes=0,Au(e,a,l,a.pendingProps);case 24:Aa(a,tt,e.memoizedState.cache)}return ha(e,a,l)}function Hu(e,a,l){if(e!==null)if(e.memoizedProps!==a.pendingProps)lt=!0;else{if(!nc(e,l)&&(a.flags&128)===0)return lt=!1,Tx(e,a,l);lt=(e.flags&131072)!==0}else lt=!1,Re&&(a.flags&1048576)!==0&&pd(a,js,a.index);switch(a.lanes=0,a.tag){case 16:e:{var s=a.pendingProps;if(e=dl(a.elementType),a.type=e,typeof e=="function")dr(e)?(s=fl(e,s),a.tag=1,a=zu(null,a,e,s,l)):(a.tag=0,a=Pr(null,a,e,s,l));else{if(e!=null){var n=e.$$typeof;if(n===le){a.tag=11,a=Eu(null,a,e,s,l);break e}else if(n===P){a.tag=14,a=Du(null,a,e,s,l);break e}}throw a=Y(e)||e,Error(d(306,a,""))}}return a;case 0:return Pr(e,a,a.type,a.pendingProps,l);case 1:return s=a.type,n=fl(s,a.pendingProps),zu(e,a,s,n,l);case 3:e:{if(Ce(a,a.stateNode.containerInfo),e===null)throw Error(d(387));s=a.pendingProps;var r=a.memoizedState;n=r.element,_r(e,a),ks(a,s,null,l);var m=a.memoizedState;if(s=m.cache,Aa(a,tt,s),s!==r.cache&&vr(a,[tt],l,!0),Ds(),s=m.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:m.cache},a.updateQueue.baseState=r,a.memoizedState=r,a.flags&256){a=Ou(e,a,s,l);break e}else if(s!==n){n=Gt(Error(d(424)),a),Ns(n),a=Ou(e,a,s,l);break e}else for(e=a.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ve=Zt(e.firstChild),dt=a,Re=!0,Da=null,Qt=!0,l=Ad(a,null,s,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(il(),s===n){a=ha(e,a,l);break e}mt(e,a,s,l)}a=a.child}return a;case 26:return Xn(e,a),e===null?(l=Km(a.type,null,a.pendingProps,null))?a.memoizedState=l:Re||(l=a.type,e=a.pendingProps,s=ri(re.current).createElement(l),s[ot]=a,s[vt]=e,ht(s,l,e),it(s),a.stateNode=s):a.memoizedState=Km(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return R(a),e===null&&Re&&(s=a.stateNode=Zm(a.type,a.pendingProps,re.current),dt=a,Qt=!0,n=Ve,Fa(a.type)?(Bc=n,Ve=Zt(s.firstChild)):Ve=n),mt(e,a,a.pendingProps.children,l),Xn(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&Re&&((n=s=Ve)&&(s=r0(s,a.type,a.pendingProps,Qt),s!==null?(a.stateNode=s,dt=a,Ve=Zt(s.firstChild),Qt=!1,n=!0):n=!1),n||ka(a)),R(a),n=a.type,r=a.pendingProps,m=e!==null?e.memoizedProps:null,s=r.children,Rc(n,r)?s=null:m!==null&&Rc(n,m)&&(a.flags|=32),a.memoizedState!==null&&(n=Mr(e,a,Nx,null,null,l),Js._currentValue=n),Xn(e,a),mt(e,a,s,l),a.child;case 6:return e===null&&Re&&((e=l=Ve)&&(l=c0(l,a.pendingProps,Qt),l!==null?(a.stateNode=l,dt=a,Ve=null,e=!0):e=!1),e||ka(a)),null;case 13:return Lu(e,a,l);case 4:return Ce(a,a.stateNode.containerInfo),s=a.pendingProps,e===null?a.child=ml(a,null,s,l):mt(e,a,s,l),a.child;case 11:return Eu(e,a,a.type,a.pendingProps,l);case 7:return mt(e,a,a.pendingProps,l),a.child;case 8:return mt(e,a,a.pendingProps.children,l),a.child;case 12:return mt(e,a,a.pendingProps.children,l),a.child;case 10:return s=a.pendingProps,Aa(a,a.type,s.value),mt(e,a,s.children,l),a.child;case 9:return n=a.type._context,s=a.pendingProps.children,cl(a),n=ut(n),s=s(n),a.flags|=1,mt(e,a,s,l),a.child;case 14:return Du(e,a,a.type,a.pendingProps,l);case 15:return ku(e,a,a.type,a.pendingProps,l);case 19:return Bu(e,a,l);case 31:return Ax(e,a,l);case 22:return Au(e,a,l,a.pendingProps);case 24:return cl(a),s=ut(tt),e===null?(n=Nr(),n===null&&(n=Xe,r=yr(),n.pooledCache=r,r.refCount++,r!==null&&(n.pooledCacheLanes|=l),n=r),a.memoizedState={parent:s,cache:n},Sr(a),Aa(a,tt,n)):((e.lanes&l)!==0&&(_r(e,a),ks(a,null,null,l),Ds()),n=e.memoizedState,r=a.memoizedState,n.parent!==s?(n={parent:s,cache:s},a.memoizedState=n,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=n),Aa(a,tt,s)):(s=r.cache,Aa(a,tt,s),s!==n.cache&&vr(a,[tt],l,!0))),mt(e,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(d(156,a.tag))}function fa(e){e.flags|=4}function ic(e,a,l,s,n){if((a=(e.mode&32)!==0)&&(a=!1),a){if(e.flags|=16777216,(n&335544128)===n)if(e.stateNode.complete)e.flags|=8192;else if(mm())e.flags|=8192;else throw ul=kn,wr}else e.flags&=-16777217}function qu(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!th(a))if(mm())e.flags|=8192;else throw ul=kn,wr}function Vn(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?vo():536870912,e.lanes|=a,Wl|=a)}function Os(e,a){if(!Re)switch(e.tailMode){case"hidden":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var s=null;l!==null;)l.alternate!==null&&(s=l),l=l.sibling;s===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ze(e){var a=e.alternate!==null&&e.alternate.child===e.child,l=0,s=0;if(a)for(var n=e.child;n!==null;)l|=n.lanes|n.childLanes,s|=n.subtreeFlags&65011712,s|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)l|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=l,a}function Mx(e,a,l){var s=a.pendingProps;switch(fr(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(a),null;case 1:return Ze(a),null;case 3:return l=a.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),da(tt),G(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Bl(a)?fa(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,gr())),Ze(a),null;case 26:var n=a.type,r=a.memoizedState;return e===null?(fa(a),r!==null?(Ze(a),qu(a,r)):(Ze(a),ic(a,n,null,s,l))):r?r!==e.memoizedState?(fa(a),Ze(a),qu(a,r)):(Ze(a),a.flags&=-16777217):(e=e.memoizedProps,e!==s&&fa(a),Ze(a),ic(a,n,e,s,l)),null;case 27:if(ce(a),l=re.current,n=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==s&&fa(a);else{if(!s){if(a.stateNode===null)throw Error(d(166));return Ze(a),null}e=B.current,Bl(a)?vd(a):(e=Zm(n,s,l),a.stateNode=e,fa(a))}return Ze(a),null;case 5:if(ce(a),n=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==s&&fa(a);else{if(!s){if(a.stateNode===null)throw Error(d(166));return Ze(a),null}if(r=B.current,Bl(a))vd(a);else{var m=ri(re.current);switch(r){case 1:r=m.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:r=m.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":r=m.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":r=m.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":r=m.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof s.is=="string"?m.createElement("select",{is:s.is}):m.createElement("select"),s.multiple?r.multiple=!0:s.size&&(r.size=s.size);break;default:r=typeof s.is=="string"?m.createElement(n,{is:s.is}):m.createElement(n)}}r[ot]=a,r[vt]=s;e:for(m=a.child;m!==null;){if(m.tag===5||m.tag===6)r.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===a)break e;for(;m.sibling===null;){if(m.return===null||m.return===a)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}a.stateNode=r;e:switch(ht(r,n,s),n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&fa(a)}}return Ze(a),ic(a,a.type,e===null?null:e.memoizedProps,a.pendingProps,l),null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==s&&fa(a);else{if(typeof s!="string"&&a.stateNode===null)throw Error(d(166));if(e=re.current,Bl(a)){if(e=a.stateNode,l=a.memoizedProps,s=null,n=dt,n!==null)switch(n.tag){case 27:case 5:s=n.memoizedProps}e[ot]=a,e=!!(e.nodeValue===l||s!==null&&s.suppressHydrationWarning===!0||Lm(e.nodeValue,l)),e||ka(a,!0)}else e=ri(e).createTextNode(s),e[ot]=a,a.stateNode=e}return Ze(a),null;case 31:if(l=a.memoizedState,e===null||e.memoizedState!==null){if(s=Bl(a),l!==null){if(e===null){if(!s)throw Error(d(318));if(e=a.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(557));e[ot]=a}else il(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ze(a),e=!1}else l=gr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),e=!0;if(!e)return a.flags&256?(kt(a),a):(kt(a),null);if((a.flags&128)!==0)throw Error(d(558))}return Ze(a),null;case 13:if(s=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=Bl(a),s!==null&&s.dehydrated!==null){if(e===null){if(!n)throw Error(d(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(d(317));n[ot]=a}else il(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ze(a),n=!1}else n=gr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return a.flags&256?(kt(a),a):(kt(a),null)}return kt(a),(a.flags&128)!==0?(a.lanes=l,a):(l=s!==null,e=e!==null&&e.memoizedState!==null,l&&(s=a.child,n=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(n=s.alternate.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==n&&(s.flags|=2048)),l!==e&&l&&(a.child.flags|=8192),Vn(a,a.updateQueue),Ze(a),null);case 4:return G(),e===null&&Dc(a.stateNode.containerInfo),Ze(a),null;case 10:return da(a.type),Ze(a),null;case 19:if(M(Ie),s=a.memoizedState,s===null)return Ze(a),null;if(n=(a.flags&128)!==0,r=s.rendering,r===null)if(n)Os(s,!1);else{if(Pe!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(r=Rn(e),r!==null){for(a.flags|=128,Os(s,!1),e=r.updateQueue,a.updateQueue=e,Vn(a,e),a.subtreeFlags=0,e=l,l=a.child;l!==null;)fd(l,e),l=l.sibling;return W(Ie,Ie.current&1|2),Re&&ca(a,s.treeForkCount),a.child}e=e.sibling}s.tail!==null&&ft()>Wn&&(a.flags|=128,n=!0,Os(s,!1),a.lanes=4194304)}else{if(!n)if(e=Rn(r),e!==null){if(a.flags|=128,n=!0,e=e.updateQueue,a.updateQueue=e,Vn(a,e),Os(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!Re)return Ze(a),null}else 2*ft()-s.renderingStartTime>Wn&&l!==536870912&&(a.flags|=128,n=!0,Os(s,!1),a.lanes=4194304);s.isBackwards?(r.sibling=a.child,a.child=r):(e=s.last,e!==null?e.sibling=r:a.child=r,s.last=r)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ft(),e.sibling=null,l=Ie.current,W(Ie,n?l&1|2:l&1),Re&&ca(a,s.treeForkCount),e):(Ze(a),null);case 22:case 23:return kt(a),kr(),s=a.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(a.flags|=8192):s&&(a.flags|=8192),s?(l&536870912)!==0&&(a.flags&128)===0&&(Ze(a),a.subtreeFlags&6&&(a.flags|=8192)):Ze(a),l=a.updateQueue,l!==null&&Vn(a,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(a.flags|=2048),e!==null&&M(ol),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),da(tt),Ze(a),null;case 25:return null;case 30:return null}throw Error(d(156,a.tag))}function Rx(e,a){switch(fr(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return da(tt),G(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return ce(a),null;case 31:if(a.memoizedState!==null){if(kt(a),a.alternate===null)throw Error(d(340));il()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 13:if(kt(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(d(340));il()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return M(Ie),null;case 4:return G(),null;case 10:return da(a.type),null;case 22:case 23:return kt(a),kr(),e!==null&&M(ol),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return da(tt),null;case 25:return null;default:return null}}function Yu(e,a){switch(fr(a),a.tag){case 3:da(tt),G();break;case 26:case 27:case 5:ce(a);break;case 4:G();break;case 31:a.memoizedState!==null&&kt(a);break;case 13:kt(a);break;case 19:M(Ie);break;case 10:da(a.type);break;case 22:case 23:kt(a),kr(),e!==null&&M(ol);break;case 24:da(tt)}}function Ls(e,a){try{var l=a.updateQueue,s=l!==null?l.lastEffect:null;if(s!==null){var n=s.next;l=n;do{if((l.tag&e)===e){s=void 0;var r=l.create,m=l.inst;s=r(),m.destroy=s}l=l.next}while(l!==n)}}catch(w){He(a,a.return,w)}}function La(e,a,l){try{var s=a.updateQueue,n=s!==null?s.lastEffect:null;if(n!==null){var r=n.next;s=r;do{if((s.tag&e)===e){var m=s.inst,w=m.destroy;if(w!==void 0){m.destroy=void 0,n=a;var D=l,X=w;try{X()}catch(ee){He(n,D,ee)}}}s=s.next}while(s!==r)}}catch(ee){He(a,a.return,ee)}}function Gu(e){var a=e.updateQueue;if(a!==null){var l=e.stateNode;try{Md(a,l)}catch(s){He(e,e.return,s)}}}function Fu(e,a,l){l.props=fl(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(s){He(e,a,s)}}function Us(e,a){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof l=="function"?e.refCleanup=l(s):l.current=s}}catch(n){He(e,a,n)}}function ta(e,a){var l=e.ref,s=e.refCleanup;if(l!==null)if(typeof s=="function")try{s()}catch(n){He(e,a,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(n){He(e,a,n)}else l.current=null}function Xu(e){var a=e.type,l=e.memoizedProps,s=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&s.focus();break e;case"img":l.src?s.src=l.src:l.srcSet&&(s.srcset=l.srcSet)}}catch(n){He(e,e.return,n)}}function rc(e,a,l){try{var s=e.stateNode;t0(s,e.type,l,a),s[vt]=a}catch(n){He(e,e.return,n)}}function Qu(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Fa(e.type)||e.tag===4}function cc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Qu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Fa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function oc(e,a,l){var s=e.tag;if(s===5||s===6)e=e.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(e),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=na));else if(s!==4&&(s===27&&Fa(e.type)&&(l=e.stateNode,a=null),e=e.child,e!==null))for(oc(e,a,l),e=e.sibling;e!==null;)oc(e,a,l),e=e.sibling}function Zn(e,a,l){var s=e.tag;if(s===5||s===6)e=e.stateNode,a?l.insertBefore(e,a):l.appendChild(e);else if(s!==4&&(s===27&&Fa(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(Zn(e,a,l),e=e.sibling;e!==null;)Zn(e,a,l),e=e.sibling}function Vu(e){var a=e.stateNode,l=e.memoizedProps;try{for(var s=e.type,n=a.attributes;n.length;)a.removeAttributeNode(n[0]);ht(a,s,l),a[ot]=e,a[vt]=l}catch(r){He(e,e.return,r)}}var xa=!1,st=!1,dc=!1,Zu=typeof WeakSet=="function"?WeakSet:Set,rt=null;function zx(e,a){if(e=e.containerInfo,Tc=fi,e=nd(e),lr(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var s=l.getSelection&&l.getSelection();if(s&&s.rangeCount!==0){l=s.anchorNode;var n=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{l.nodeType,r.nodeType}catch{l=null;break e}var m=0,w=-1,D=-1,X=0,ee=0,se=e,V=null;t:for(;;){for(var J;se!==l||n!==0&&se.nodeType!==3||(w=m+n),se!==r||s!==0&&se.nodeType!==3||(D=m+s),se.nodeType===3&&(m+=se.nodeValue.length),(J=se.firstChild)!==null;)V=se,se=J;for(;;){if(se===e)break t;if(V===l&&++X===n&&(w=m),V===r&&++ee===s&&(D=m),(J=se.nextSibling)!==null)break;se=V,V=se.parentNode}se=J}l=w===-1||D===-1?null:{start:w,end:D}}else l=null}l=l||{start:0,end:0}}else l=null;for(Mc={focusedElem:e,selectionRange:l},fi=!1,rt=a;rt!==null;)if(a=rt,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,rt=e;else for(;rt!==null;){switch(a=rt,r=a.alternate,e=a.flags,a.tag){case 0:if((e&4)!==0&&(e=a.updateQueue,e=e!==null?e.events:null,e!==null))for(l=0;l<e.length;l++)n=e[l],n.ref.impl=n.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,l=a,n=r.memoizedProps,r=r.memoizedState,s=l.stateNode;try{var xe=fl(l.type,n);e=s.getSnapshotBeforeUpdate(xe,r),s.__reactInternalSnapshotBeforeUpdate=e}catch(Ne){He(l,l.return,Ne)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,l=e.nodeType,l===9)Oc(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Oc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(d(163))}if(e=a.sibling,e!==null){e.return=a.return,rt=e;break}rt=a.return}}function $u(e,a,l){var s=l.flags;switch(l.tag){case 0:case 11:case 15:pa(e,l),s&4&&Ls(5,l);break;case 1:if(pa(e,l),s&4)if(e=l.stateNode,a===null)try{e.componentDidMount()}catch(m){He(l,l.return,m)}else{var n=fl(l.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(n,a,e.__reactInternalSnapshotBeforeUpdate)}catch(m){He(l,l.return,m)}}s&64&&Gu(l),s&512&&Us(l,l.return);break;case 3:if(pa(e,l),s&64&&(e=l.updateQueue,e!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{Md(e,a)}catch(m){He(l,l.return,m)}}break;case 27:a===null&&s&4&&Vu(l);case 26:case 5:pa(e,l),a===null&&s&4&&Xu(l),s&512&&Us(l,l.return);break;case 12:pa(e,l);break;case 31:pa(e,l),s&4&&Wu(e,l);break;case 13:pa(e,l),s&4&&Pu(e,l),s&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=Fx.bind(null,l),o0(e,l))));break;case 22:if(s=l.memoizedState!==null||xa,!s){a=a!==null&&a.memoizedState!==null||st,n=xa;var r=st;xa=s,(st=a)&&!r?ba(e,l,(l.subtreeFlags&8772)!==0):pa(e,l),xa=n,st=r}break;case 30:break;default:pa(e,l)}}function Ju(e){var a=e.alternate;a!==null&&(e.alternate=null,Ju(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&qi(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Je=null,jt=!1;function ga(e,a,l){for(l=l.child;l!==null;)Ku(e,a,l),l=l.sibling}function Ku(e,a,l){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(Pa,l)}catch{}switch(l.tag){case 26:st||ta(l,a),ga(e,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:st||ta(l,a);var s=Je,n=jt;Fa(l.type)&&(Je=l.stateNode,jt=!1),ga(e,a,l),Vs(l.stateNode),Je=s,jt=n;break;case 5:st||ta(l,a);case 6:if(s=Je,n=jt,Je=null,ga(e,a,l),Je=s,jt=n,Je!==null)if(jt)try{(Je.nodeType===9?Je.body:Je.nodeName==="HTML"?Je.ownerDocument.body:Je).removeChild(l.stateNode)}catch(r){He(l,a,r)}else try{Je.removeChild(l.stateNode)}catch(r){He(l,a,r)}break;case 18:Je!==null&&(jt?(e=Je,Gm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),ns(e)):Gm(Je,l.stateNode));break;case 4:s=Je,n=jt,Je=l.stateNode.containerInfo,jt=!0,ga(e,a,l),Je=s,jt=n;break;case 0:case 11:case 14:case 15:La(2,l,a),st||La(4,l,a),ga(e,a,l);break;case 1:st||(ta(l,a),s=l.stateNode,typeof s.componentWillUnmount=="function"&&Fu(l,a,s)),ga(e,a,l);break;case 21:ga(e,a,l);break;case 22:st=(s=st)||l.memoizedState!==null,ga(e,a,l),st=s;break;default:ga(e,a,l)}}function Wu(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ns(e)}catch(l){He(a,a.return,l)}}}function Pu(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ns(e)}catch(l){He(a,a.return,l)}}function Ox(e){switch(e.tag){case 31:case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new Zu),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new Zu),a;default:throw Error(d(435,e.tag))}}function $n(e,a){var l=Ox(e);a.forEach(function(s){if(!l.has(s)){l.add(s);var n=Xx.bind(null,e,s);s.then(n,n)}})}function Nt(e,a){var l=a.deletions;if(l!==null)for(var s=0;s<l.length;s++){var n=l[s],r=e,m=a,w=m;e:for(;w!==null;){switch(w.tag){case 27:if(Fa(w.type)){Je=w.stateNode,jt=!1;break e}break;case 5:Je=w.stateNode,jt=!1;break e;case 3:case 4:Je=w.stateNode.containerInfo,jt=!0;break e}w=w.return}if(Je===null)throw Error(d(160));Ku(r,m,n),Je=null,jt=!1,r=n.alternate,r!==null&&(r.return=null),n.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Iu(a,e),a=a.sibling}var Kt=null;function Iu(e,a){var l=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Nt(a,e),wt(e),s&4&&(La(3,e,e.return),Ls(3,e),La(5,e,e.return));break;case 1:Nt(a,e),wt(e),s&512&&(st||l===null||ta(l,l.return)),s&64&&xa&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?s:l.concat(s))));break;case 26:var n=Kt;if(Nt(a,e),wt(e),s&512&&(st||l===null||ta(l,l.return)),s&4){var r=l!==null?l.memoizedState:null;if(s=e.memoizedState,l===null)if(s===null)if(e.stateNode===null){e:{s=e.type,l=e.memoizedProps,n=n.ownerDocument||n;t:switch(s){case"title":r=n.getElementsByTagName("title")[0],(!r||r[ds]||r[ot]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=n.createElement(s),n.head.insertBefore(r,n.querySelector("head > title"))),ht(r,s,l),r[ot]=e,it(r),s=r;break e;case"link":var m=Im("link","href",n).get(s+(l.href||""));if(m){for(var w=0;w<m.length;w++)if(r=m[w],r.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&r.getAttribute("rel")===(l.rel==null?null:l.rel)&&r.getAttribute("title")===(l.title==null?null:l.title)&&r.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){m.splice(w,1);break t}}r=n.createElement(s),ht(r,s,l),n.head.appendChild(r);break;case"meta":if(m=Im("meta","content",n).get(s+(l.content||""))){for(w=0;w<m.length;w++)if(r=m[w],r.getAttribute("content")===(l.content==null?null:""+l.content)&&r.getAttribute("name")===(l.name==null?null:l.name)&&r.getAttribute("property")===(l.property==null?null:l.property)&&r.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&r.getAttribute("charset")===(l.charSet==null?null:l.charSet)){m.splice(w,1);break t}}r=n.createElement(s),ht(r,s,l),n.head.appendChild(r);break;default:throw Error(d(468,s))}r[ot]=e,it(r),s=r}e.stateNode=s}else eh(n,e.type,e.stateNode);else e.stateNode=Pm(n,s,e.memoizedProps);else r!==s?(r===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):r.count--,s===null?eh(n,e.type,e.stateNode):Pm(n,s,e.memoizedProps)):s===null&&e.stateNode!==null&&rc(e,e.memoizedProps,l.memoizedProps)}break;case 27:Nt(a,e),wt(e),s&512&&(st||l===null||ta(l,l.return)),l!==null&&s&4&&rc(e,e.memoizedProps,l.memoizedProps);break;case 5:if(Nt(a,e),wt(e),s&512&&(st||l===null||ta(l,l.return)),e.flags&32){n=e.stateNode;try{Dl(n,"")}catch(xe){He(e,e.return,xe)}}s&4&&e.stateNode!=null&&(n=e.memoizedProps,rc(e,n,l!==null?l.memoizedProps:n)),s&1024&&(dc=!0);break;case 6:if(Nt(a,e),wt(e),s&4){if(e.stateNode===null)throw Error(d(162));s=e.memoizedProps,l=e.stateNode;try{l.nodeValue=s}catch(xe){He(e,e.return,xe)}}break;case 3:if(di=null,n=Kt,Kt=ci(a.containerInfo),Nt(a,e),Kt=n,wt(e),s&4&&l!==null&&l.memoizedState.isDehydrated)try{ns(a.containerInfo)}catch(xe){He(e,e.return,xe)}dc&&(dc=!1,em(e));break;case 4:s=Kt,Kt=ci(e.stateNode.containerInfo),Nt(a,e),wt(e),Kt=s;break;case 12:Nt(a,e),wt(e);break;case 31:Nt(a,e),wt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,$n(e,s)));break;case 13:Nt(a,e),wt(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Kn=ft()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,$n(e,s)));break;case 22:n=e.memoizedState!==null;var D=l!==null&&l.memoizedState!==null,X=xa,ee=st;if(xa=X||n,st=ee||D,Nt(a,e),st=ee,xa=X,wt(e),s&8192)e:for(a=e.stateNode,a._visibility=n?a._visibility&-2:a._visibility|1,n&&(l===null||D||xa||st||xl(e)),l=null,a=e;;){if(a.tag===5||a.tag===26){if(l===null){D=l=a;try{if(r=D.stateNode,n)m=r.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{w=D.stateNode;var se=D.memoizedProps.style,V=se!=null&&se.hasOwnProperty("display")?se.display:null;w.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(xe){He(D,D.return,xe)}}}else if(a.tag===6){if(l===null){D=a;try{D.stateNode.nodeValue=n?"":D.memoizedProps}catch(xe){He(D,D.return,xe)}}}else if(a.tag===18){if(l===null){D=a;try{var J=D.stateNode;n?Fm(J,!0):Fm(D.stateNode,!1)}catch(xe){He(D,D.return,xe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}s&4&&(s=e.updateQueue,s!==null&&(l=s.retryQueue,l!==null&&(s.retryQueue=null,$n(e,l))));break;case 19:Nt(a,e),wt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,$n(e,s)));break;case 30:break;case 21:break;default:Nt(a,e),wt(e)}}function wt(e){var a=e.flags;if(a&2){try{for(var l,s=e.return;s!==null;){if(Qu(s)){l=s;break}s=s.return}if(l==null)throw Error(d(160));switch(l.tag){case 27:var n=l.stateNode,r=cc(e);Zn(e,r,n);break;case 5:var m=l.stateNode;l.flags&32&&(Dl(m,""),l.flags&=-33);var w=cc(e);Zn(e,w,m);break;case 3:case 4:var D=l.stateNode.containerInfo,X=cc(e);oc(e,X,D);break;default:throw Error(d(161))}}catch(ee){He(e,e.return,ee)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function em(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;em(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function pa(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)$u(e,a.alternate,a),a=a.sibling}function xl(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:La(4,a,a.return),xl(a);break;case 1:ta(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Fu(a,a.return,l),xl(a);break;case 27:Vs(a.stateNode);case 26:case 5:ta(a,a.return),xl(a);break;case 22:a.memoizedState===null&&xl(a);break;case 30:xl(a);break;default:xl(a)}e=e.sibling}}function ba(e,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var s=a.alternate,n=e,r=a,m=r.flags;switch(r.tag){case 0:case 11:case 15:ba(n,r,l),Ls(4,r);break;case 1:if(ba(n,r,l),s=r,n=s.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(X){He(s,s.return,X)}if(s=r,n=s.updateQueue,n!==null){var w=s.stateNode;try{var D=n.shared.hiddenCallbacks;if(D!==null)for(n.shared.hiddenCallbacks=null,n=0;n<D.length;n++)Td(D[n],w)}catch(X){He(s,s.return,X)}}l&&m&64&&Gu(r),Us(r,r.return);break;case 27:Vu(r);case 26:case 5:ba(n,r,l),l&&s===null&&m&4&&Xu(r),Us(r,r.return);break;case 12:ba(n,r,l);break;case 31:ba(n,r,l),l&&m&4&&Wu(n,r);break;case 13:ba(n,r,l),l&&m&4&&Pu(n,r);break;case 22:r.memoizedState===null&&ba(n,r,l),Us(r,r.return);break;case 30:break;default:ba(n,r,l)}a=a.sibling}}function uc(e,a){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&ws(l))}function mc(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&ws(e))}function Wt(e,a,l,s){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)tm(e,a,l,s),a=a.sibling}function tm(e,a,l,s){var n=a.flags;switch(a.tag){case 0:case 11:case 15:Wt(e,a,l,s),n&2048&&Ls(9,a);break;case 1:Wt(e,a,l,s);break;case 3:Wt(e,a,l,s),n&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&ws(e)));break;case 12:if(n&2048){Wt(e,a,l,s),e=a.stateNode;try{var r=a.memoizedProps,m=r.id,w=r.onPostCommit;typeof w=="function"&&w(m,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(D){He(a,a.return,D)}}else Wt(e,a,l,s);break;case 31:Wt(e,a,l,s);break;case 13:Wt(e,a,l,s);break;case 23:break;case 22:r=a.stateNode,m=a.alternate,a.memoizedState!==null?r._visibility&2?Wt(e,a,l,s):Bs(e,a):r._visibility&2?Wt(e,a,l,s):(r._visibility|=2,$l(e,a,l,s,(a.subtreeFlags&10256)!==0||!1)),n&2048&&uc(m,a);break;case 24:Wt(e,a,l,s),n&2048&&mc(a.alternate,a);break;default:Wt(e,a,l,s)}}function $l(e,a,l,s,n){for(n=n&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var r=e,m=a,w=l,D=s,X=m.flags;switch(m.tag){case 0:case 11:case 15:$l(r,m,w,D,n),Ls(8,m);break;case 23:break;case 22:var ee=m.stateNode;m.memoizedState!==null?ee._visibility&2?$l(r,m,w,D,n):Bs(r,m):(ee._visibility|=2,$l(r,m,w,D,n)),n&&X&2048&&uc(m.alternate,m);break;case 24:$l(r,m,w,D,n),n&&X&2048&&mc(m.alternate,m);break;default:$l(r,m,w,D,n)}a=a.sibling}}function Bs(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=e,s=a,n=s.flags;switch(s.tag){case 22:Bs(l,s),n&2048&&uc(s.alternate,s);break;case 24:Bs(l,s),n&2048&&mc(s.alternate,s);break;default:Bs(l,s)}a=a.sibling}}var Hs=8192;function Jl(e,a,l){if(e.subtreeFlags&Hs)for(e=e.child;e!==null;)am(e,a,l),e=e.sibling}function am(e,a,l){switch(e.tag){case 26:Jl(e,a,l),e.flags&Hs&&e.memoizedState!==null&&j0(l,Kt,e.memoizedState,e.memoizedProps);break;case 5:Jl(e,a,l);break;case 3:case 4:var s=Kt;Kt=ci(e.stateNode.containerInfo),Jl(e,a,l),Kt=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Hs,Hs=16777216,Jl(e,a,l),Hs=s):Jl(e,a,l));break;default:Jl(e,a,l)}}function lm(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function qs(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var s=a[l];rt=s,nm(s,e)}lm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)sm(e),e=e.sibling}function sm(e){switch(e.tag){case 0:case 11:case 15:qs(e),e.flags&2048&&La(9,e,e.return);break;case 3:qs(e);break;case 12:qs(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,Jn(e)):qs(e);break;default:qs(e)}}function Jn(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var s=a[l];rt=s,nm(s,e)}lm(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:La(8,a,a.return),Jn(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Jn(a));break;default:Jn(a)}e=e.sibling}}function nm(e,a){for(;rt!==null;){var l=rt;switch(l.tag){case 0:case 11:case 15:La(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var s=l.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:ws(l.memoizedState.cache)}if(s=l.child,s!==null)s.return=l,rt=s;else e:for(l=e;rt!==null;){s=rt;var n=s.sibling,r=s.return;if(Ju(s),s===l){rt=null;break e}if(n!==null){n.return=r,rt=n;break e}rt=r}}}var Lx={getCacheForType:function(e){var a=ut(tt),l=a.data.get(e);return l===void 0&&(l=e(),a.data.set(e,l)),l},cacheSignal:function(){return ut(tt).controller.signal}},Ux=typeof WeakMap=="function"?WeakMap:Map,Le=0,Xe=null,ke=null,Te=0,Be=0,At=null,Ua=!1,Kl=!1,hc=!1,va=0,Pe=0,Ba=0,gl=0,fc=0,Tt=0,Wl=0,Ys=null,St=null,xc=!1,Kn=0,im=0,Wn=1/0,Pn=null,Ha=null,nt=0,qa=null,Pl=null,ya=0,gc=0,pc=null,rm=null,Gs=0,bc=null;function Mt(){return(Le&2)!==0&&Te!==0?Te&-Te:_.T!==null?Sc():wo()}function cm(){if(Tt===0)if((Te&536870912)===0||Re){var e=oe;oe<<=1,(oe&3932160)===0&&(oe=262144),Tt=e}else Tt=536870912;return e=Dt.current,e!==null&&(e.flags|=32),Tt}function _t(e,a,l){(e===Xe&&(Be===2||Be===9)||e.cancelPendingCommit!==null)&&(Il(e,0),Ya(e,Te,Tt,!1)),os(e,l),((Le&2)===0||e!==Xe)&&(e===Xe&&((Le&2)===0&&(gl|=l),Pe===4&&Ya(e,Te,Tt,!1)),aa(e))}function om(e,a,l){if((Le&6)!==0)throw Error(d(327));var s=!l&&(a&127)===0&&(a&e.expiredLanes)===0||la(e,a),n=s?qx(e,a):yc(e,a,!0),r=s;do{if(n===0){Kl&&!s&&Ya(e,a,0,!1);break}else{if(l=e.current.alternate,r&&!Bx(l)){n=yc(e,a,!1),r=!1;continue}if(n===2){if(r=a,e.errorRecoveryDisabledLanes&r)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){a=m;e:{var w=e;n=Ys;var D=w.current.memoizedState.isDehydrated;if(D&&(Il(w,m).flags|=256),m=yc(w,m,!1),m!==2){if(hc&&!D){w.errorRecoveryDisabledLanes|=r,gl|=r,n=4;break e}r=St,St=n,r!==null&&(St===null?St=r:St.push.apply(St,r))}n=m}if(r=!1,n!==2)continue}}if(n===1){Il(e,0),Ya(e,a,0,!0);break}e:{switch(s=e,r=n,r){case 0:case 1:throw Error(d(345));case 4:if((a&4194048)!==a)break;case 6:Ya(s,a,Tt,!Ua);break e;case 2:St=null;break;case 3:case 5:break;default:throw Error(d(329))}if((a&62914560)===a&&(n=Kn+300-ft(),10<n)){if(Ya(s,a,Tt,!Ua),Bt(s,0,!0)!==0)break e;ya=a,s.timeoutHandle=qm(dm.bind(null,s,l,St,Pn,xc,a,Tt,gl,Wl,Ua,r,"Throttled",-0,0),n);break e}dm(s,l,St,Pn,xc,a,Tt,gl,Wl,Ua,r,null,-0,0)}}break}while(!0);aa(e)}function dm(e,a,l,s,n,r,m,w,D,X,ee,se,V,J){if(e.timeoutHandle=-1,se=a.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:na},am(a,r,se);var xe=(r&62914560)===r?Kn-ft():(r&4194048)===r?im-ft():0;if(xe=N0(se,xe),xe!==null){ya=r,e.cancelPendingCommit=xe(bm.bind(null,e,a,r,l,s,n,m,w,D,ee,se,null,V,J)),Ya(e,r,m,!X);return}}bm(e,a,r,l,s,n,m,w,D)}function Bx(e){for(var a=e;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var s=0;s<l.length;s++){var n=l[s],r=n.getSnapshot;n=n.value;try{if(!Ct(r(),n))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ya(e,a,l,s){a&=~fc,a&=~gl,e.suspendedLanes|=a,e.pingedLanes&=~a,s&&(e.warmLanes|=a),s=e.expirationTimes;for(var n=a;0<n;){var r=31-pt(n),m=1<<r;s[r]=-1,n&=~m}l!==0&&yo(e,l,a)}function In(){return(Le&6)===0?(Fs(0),!1):!0}function vc(){if(ke!==null){if(Be===0)var e=ke.return;else e=ke,oa=rl=null,Or(e),Fl=null,_s=0,e=ke;for(;e!==null;)Yu(e.alternate,e),e=e.return;ke=null}}function Il(e,a){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,s0(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),ya=0,vc(),Xe=e,ke=l=ra(e.current,null),Te=a,Be=0,At=null,Ua=!1,Kl=la(e,a),hc=!1,Wl=Tt=fc=gl=Ba=Pe=0,St=Ys=null,xc=!1,(a&8)!==0&&(a|=a&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=a;0<s;){var n=31-pt(s),r=1<<n;a|=e[n],s&=~r}return va=a,yn(),l}function um(e,a){_e=null,_.H=Rs,a===Gl||a===Dn?(a=Ed(),Be=3):a===wr?(a=Ed(),Be=4):Be=a===Wr?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,At=a,ke===null&&(Pe=1,Gn(e,Gt(a,e.current)))}function mm(){var e=Dt.current;return e===null?!0:(Te&4194048)===Te?Vt===null:(Te&62914560)===Te||(Te&536870912)!==0?e===Vt:!1}function hm(){var e=_.H;return _.H=Rs,e===null?Rs:e}function fm(){var e=_.A;return _.A=Lx,e}function ei(){Pe=4,Ua||(Te&4194048)!==Te&&Dt.current!==null||(Kl=!0),(Ba&134217727)===0&&(gl&134217727)===0||Xe===null||Ya(Xe,Te,Tt,!1)}function yc(e,a,l){var s=Le;Le|=2;var n=hm(),r=fm();(Xe!==e||Te!==a)&&(Pn=null,Il(e,a)),a=!1;var m=Pe;e:do try{if(Be!==0&&ke!==null){var w=ke,D=At;switch(Be){case 8:vc(),m=6;break e;case 3:case 2:case 9:case 6:Dt.current===null&&(a=!0);var X=Be;if(Be=0,At=null,es(e,w,D,X),l&&Kl){m=0;break e}break;default:X=Be,Be=0,At=null,es(e,w,D,X)}}Hx(),m=Pe;break}catch(ee){um(e,ee)}while(!0);return a&&e.shellSuspendCounter++,oa=rl=null,Le=s,_.H=n,_.A=r,ke===null&&(Xe=null,Te=0,yn()),m}function Hx(){for(;ke!==null;)xm(ke)}function qx(e,a){var l=Le;Le|=2;var s=hm(),n=fm();Xe!==e||Te!==a?(Pn=null,Wn=ft()+500,Il(e,a)):Kl=la(e,a);e:do try{if(Be!==0&&ke!==null){a=ke;var r=At;t:switch(Be){case 1:Be=0,At=null,es(e,a,r,1);break;case 2:case 9:if(_d(r)){Be=0,At=null,gm(a);break}a=function(){Be!==2&&Be!==9||Xe!==e||(Be=7),aa(e)},r.then(a,a);break e;case 3:Be=7;break e;case 4:Be=5;break e;case 7:_d(r)?(Be=0,At=null,gm(a)):(Be=0,At=null,es(e,a,r,7));break;case 5:var m=null;switch(ke.tag){case 26:m=ke.memoizedState;case 5:case 27:var w=ke;if(m?th(m):w.stateNode.complete){Be=0,At=null;var D=w.sibling;if(D!==null)ke=D;else{var X=w.return;X!==null?(ke=X,ti(X)):ke=null}break t}}Be=0,At=null,es(e,a,r,5);break;case 6:Be=0,At=null,es(e,a,r,6);break;case 8:vc(),Pe=6;break e;default:throw Error(d(462))}}Yx();break}catch(ee){um(e,ee)}while(!0);return oa=rl=null,_.H=s,_.A=n,Le=l,ke!==null?0:(Xe=null,Te=0,yn(),Pe)}function Yx(){for(;ke!==null&&!Ai();)xm(ke)}function xm(e){var a=Hu(e.alternate,e,va);e.memoizedProps=e.pendingProps,a===null?ti(e):ke=a}function gm(e){var a=e,l=a.alternate;switch(a.tag){case 15:case 0:a=Ru(l,a,a.pendingProps,a.type,void 0,Te);break;case 11:a=Ru(l,a,a.pendingProps,a.type.render,a.ref,Te);break;case 5:Or(a);default:Yu(l,a),a=ke=fd(a,va),a=Hu(l,a,va)}e.memoizedProps=e.pendingProps,a===null?ti(e):ke=a}function es(e,a,l,s){oa=rl=null,Or(a),Fl=null,_s=0;var n=a.return;try{if(kx(e,n,a,l,Te)){Pe=1,Gn(e,Gt(l,e.current)),ke=null;return}}catch(r){if(n!==null)throw ke=n,r;Pe=1,Gn(e,Gt(l,e.current)),ke=null;return}a.flags&32768?(Re||s===1?e=!0:Kl||(Te&536870912)!==0?e=!1:(Ua=e=!0,(s===2||s===9||s===3||s===6)&&(s=Dt.current,s!==null&&s.tag===13&&(s.flags|=16384))),pm(a,e)):ti(a)}function ti(e){var a=e;do{if((a.flags&32768)!==0){pm(a,Ua);return}e=a.return;var l=Mx(a.alternate,a,va);if(l!==null){ke=l;return}if(a=a.sibling,a!==null){ke=a;return}ke=a=e}while(a!==null);Pe===0&&(Pe=5)}function pm(e,a){do{var l=Rx(e.alternate,e);if(l!==null){l.flags&=32767,ke=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(e=e.sibling,e!==null)){ke=e;return}ke=e=l}while(e!==null);Pe=6,ke=null}function bm(e,a,l,s,n,r,m,w,D){e.cancelPendingCommit=null;do ai();while(nt!==0);if((Le&6)!==0)throw Error(d(327));if(a!==null){if(a===e.current)throw Error(d(177));if(r=a.lanes|a.childLanes,r|=cr,yf(e,l,r,m,w,D),e===Xe&&(ke=Xe=null,Te=0),Pl=a,qa=e,ya=l,gc=r,pc=n,rm=s,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Qx(vl,function(){return wm(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||s){s=_.T,_.T=null,n=T.p,T.p=2,m=Le,Le|=4;try{zx(e,a,l)}finally{Le=m,T.p=n,_.T=s}}nt=1,vm(),ym(),jm()}}function vm(){if(nt===1){nt=0;var e=qa,a=Pl,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=_.T,_.T=null;var s=T.p;T.p=2;var n=Le;Le|=4;try{Iu(a,e);var r=Mc,m=nd(e.containerInfo),w=r.focusedElem,D=r.selectionRange;if(m!==w&&w&&w.ownerDocument&&sd(w.ownerDocument.documentElement,w)){if(D!==null&&lr(w)){var X=D.start,ee=D.end;if(ee===void 0&&(ee=X),"selectionStart"in w)w.selectionStart=X,w.selectionEnd=Math.min(ee,w.value.length);else{var se=w.ownerDocument||document,V=se&&se.defaultView||window;if(V.getSelection){var J=V.getSelection(),xe=w.textContent.length,Ne=Math.min(D.start,xe),Fe=D.end===void 0?Ne:Math.min(D.end,xe);!J.extend&&Ne>Fe&&(m=Fe,Fe=Ne,Ne=m);var L=ld(w,Ne),z=ld(w,Fe);if(L&&z&&(J.rangeCount!==1||J.anchorNode!==L.node||J.anchorOffset!==L.offset||J.focusNode!==z.node||J.focusOffset!==z.offset)){var F=se.createRange();F.setStart(L.node,L.offset),J.removeAllRanges(),Ne>Fe?(J.addRange(F),J.extend(z.node,z.offset)):(F.setEnd(z.node,z.offset),J.addRange(F))}}}}for(se=[],J=w;J=J.parentNode;)J.nodeType===1&&se.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<se.length;w++){var ae=se[w];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}fi=!!Tc,Mc=Tc=null}finally{Le=n,T.p=s,_.T=l}}e.current=a,nt=2}}function ym(){if(nt===2){nt=0;var e=qa,a=Pl,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=_.T,_.T=null;var s=T.p;T.p=2;var n=Le;Le|=4;try{$u(e,a.alternate,a)}finally{Le=n,T.p=s,_.T=l}}nt=3}}function jm(){if(nt===4||nt===3){nt=0,Ti();var e=qa,a=Pl,l=ya,s=rm;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?nt=5:(nt=0,Pl=qa=null,Nm(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(Ha=null),Bi(l),a=a.stateNode,gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(Pa,a,void 0,(a.current.flags&128)===128)}catch{}if(s!==null){a=_.T,n=T.p,T.p=2,_.T=null;try{for(var r=e.onRecoverableError,m=0;m<s.length;m++){var w=s[m];r(w.value,{componentStack:w.stack})}}finally{_.T=a,T.p=n}}(ya&3)!==0&&ai(),aa(e),n=e.pendingLanes,(l&261930)!==0&&(n&42)!==0?e===bc?Gs++:(Gs=0,bc=e):Gs=0,Fs(0)}}function Nm(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,ws(a)))}function ai(){return vm(),ym(),jm(),wm()}function wm(){if(nt!==5)return!1;var e=qa,a=gc;gc=0;var l=Bi(ya),s=_.T,n=T.p;try{T.p=32>l?32:l,_.T=null,l=pc,pc=null;var r=qa,m=ya;if(nt=0,Pl=qa=null,ya=0,(Le&6)!==0)throw Error(d(331));var w=Le;if(Le|=4,sm(r.current),tm(r,r.current,m,l),Le=w,Fs(0,!1),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(Pa,r)}catch{}return!0}finally{T.p=n,_.T=s,Nm(e,a)}}function Sm(e,a,l){a=Gt(l,a),a=Kr(e.stateNode,a,2),e=Ra(e,a,2),e!==null&&(os(e,2),aa(e))}function He(e,a,l){if(e.tag===3)Sm(e,e,l);else for(;a!==null;){if(a.tag===3){Sm(a,e,l);break}else if(a.tag===1){var s=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ha===null||!Ha.has(s))){e=Gt(l,e),l=_u(2),s=Ra(a,l,2),s!==null&&(Cu(l,s,a,e),os(s,2),aa(s));break}}a=a.return}}function jc(e,a,l){var s=e.pingCache;if(s===null){s=e.pingCache=new Ux;var n=new Set;s.set(a,n)}else n=s.get(a),n===void 0&&(n=new Set,s.set(a,n));n.has(l)||(hc=!0,n.add(l),e=Gx.bind(null,e,a,l),a.then(e,e))}function Gx(e,a,l){var s=e.pingCache;s!==null&&s.delete(a),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,Xe===e&&(Te&l)===l&&(Pe===4||Pe===3&&(Te&62914560)===Te&&300>ft()-Kn?(Le&2)===0&&Il(e,0):fc|=l,Wl===Te&&(Wl=0)),aa(e)}function _m(e,a){a===0&&(a=vo()),e=sl(e,a),e!==null&&(os(e,a),aa(e))}function Fx(e){var a=e.memoizedState,l=0;a!==null&&(l=a.retryLane),_m(e,l)}function Xx(e,a){var l=0;switch(e.tag){case 31:case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(l=n.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(d(314))}s!==null&&s.delete(a),_m(e,l)}function Qx(e,a){return ct(e,a)}var li=null,ts=null,Nc=!1,si=!1,wc=!1,Ga=0;function aa(e){e!==ts&&e.next===null&&(ts===null?li=ts=e:ts=ts.next=e),si=!0,Nc||(Nc=!0,Zx())}function Fs(e,a){if(!wc&&si){wc=!0;do for(var l=!1,s=li;s!==null;){if(e!==0){var n=s.pendingLanes;if(n===0)var r=0;else{var m=s.suspendedLanes,w=s.pingedLanes;r=(1<<31-pt(42|e)+1)-1,r&=n&~(m&~w),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(l=!0,km(s,r))}else r=Te,r=Bt(s,s===Xe?r:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(r&3)===0||la(s,r)||(l=!0,km(s,r));s=s.next}while(l);wc=!1}}function Vx(){Cm()}function Cm(){si=Nc=!1;var e=0;Ga!==0&&l0()&&(e=Ga);for(var a=ft(),l=null,s=li;s!==null;){var n=s.next,r=Em(s,a);r===0?(s.next=null,l===null?li=n:l.next=n,n===null&&(ts=l)):(l=s,(e!==0||(r&3)!==0)&&(si=!0)),s=n}nt!==0&&nt!==5||Fs(e),Ga!==0&&(Ga=0)}function Em(e,a){for(var l=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var m=31-pt(r),w=1<<m,D=n[m];D===-1?((w&l)===0||(w&s)!==0)&&(n[m]=vf(w,a)):D<=a&&(e.expiredLanes|=w),r&=~w}if(a=Xe,l=Te,l=Bt(e,e===a?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,l===0||e===a&&(Be===2||Be===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Lt(s),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||la(e,l)){if(a=l&-l,a===e.callbackPriority)return a;switch(s!==null&&Lt(s),Bi(l)){case 2:case 8:l=Wa;break;case 32:l=vl;break;case 268435456:l=cn;break;default:l=vl}return s=Dm.bind(null,e),l=ct(l,s),e.callbackPriority=a,e.callbackNode=l,a}return s!==null&&s!==null&&Lt(s),e.callbackPriority=2,e.callbackNode=null,2}function Dm(e,a){if(nt!==0&&nt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(ai()&&e.callbackNode!==l)return null;var s=Te;return s=Bt(e,e===Xe?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(om(e,s,a),Em(e,ft()),e.callbackNode!=null&&e.callbackNode===l?Dm.bind(null,e):null)}function km(e,a){if(ai())return null;om(e,a,!0)}function Zx(){n0(function(){(Le&6)!==0?ct(rn,Vx):Cm()})}function Sc(){if(Ga===0){var e=ql;e===0&&(e=jl,jl<<=1,(jl&261888)===0&&(jl=256)),Ga=e}return Ga}function Am(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:mn(""+e)}function Tm(e,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,e.id&&l.setAttribute("form",e.id),a.parentNode.insertBefore(l,a),e=new FormData(e),l.parentNode.removeChild(l),e}function $x(e,a,l,s,n){if(a==="submit"&&l&&l.stateNode===n){var r=Am((n[vt]||null).action),m=s.submitter;m&&(a=(a=m[vt]||null)?Am(a.formAction):m.getAttribute("formAction"),a!==null&&(r=a,m=null));var w=new gn("action","action",null,s,n);e.push({event:w,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Ga!==0){var D=m?Tm(n,m):new FormData(n);Xr(l,{pending:!0,data:D,method:n.method,action:r},null,D)}}else typeof r=="function"&&(w.preventDefault(),D=m?Tm(n,m):new FormData(n),Xr(l,{pending:!0,data:D,method:n.method,action:r},r,D))},currentTarget:n}]})}}for(var _c=0;_c<rr.length;_c++){var Cc=rr[_c],Jx=Cc.toLowerCase(),Kx=Cc[0].toUpperCase()+Cc.slice(1);Jt(Jx,"on"+Kx)}Jt(cd,"onAnimationEnd"),Jt(od,"onAnimationIteration"),Jt(dd,"onAnimationStart"),Jt("dblclick","onDoubleClick"),Jt("focusin","onFocus"),Jt("focusout","onBlur"),Jt(mx,"onTransitionRun"),Jt(hx,"onTransitionStart"),Jt(fx,"onTransitionCancel"),Jt(ud,"onTransitionEnd"),Cl("onMouseEnter",["mouseout","mouseover"]),Cl("onMouseLeave",["mouseout","mouseover"]),Cl("onPointerEnter",["pointerout","pointerover"]),Cl("onPointerLeave",["pointerout","pointerover"]),el("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),el("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),el("onBeforeInput",["compositionend","keypress","textInput","paste"]),el("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),el("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),el("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xs));function Mm(e,a){a=(a&4)!==0;for(var l=0;l<e.length;l++){var s=e[l],n=s.event;s=s.listeners;e:{var r=void 0;if(a)for(var m=s.length-1;0<=m;m--){var w=s[m],D=w.instance,X=w.currentTarget;if(w=w.listener,D!==r&&n.isPropagationStopped())break e;r=w,n.currentTarget=X;try{r(n)}catch(ee){vn(ee)}n.currentTarget=null,r=D}else for(m=0;m<s.length;m++){if(w=s[m],D=w.instance,X=w.currentTarget,w=w.listener,D!==r&&n.isPropagationStopped())break e;r=w,n.currentTarget=X;try{r(n)}catch(ee){vn(ee)}n.currentTarget=null,r=D}}}}function Ae(e,a){var l=a[Hi];l===void 0&&(l=a[Hi]=new Set);var s=e+"__bubble";l.has(s)||(Rm(a,e,2,!1),l.add(s))}function Ec(e,a,l){var s=0;a&&(s|=4),Rm(l,e,s,a)}var ni="_reactListening"+Math.random().toString(36).slice(2);function Dc(e){if(!e[ni]){e[ni]=!0,Co.forEach(function(l){l!=="selectionchange"&&(Wx.has(l)||Ec(l,!1,e),Ec(l,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[ni]||(a[ni]=!0,Ec("selectionchange",!1,a))}}function Rm(e,a,l,s){switch(ch(a)){case 2:var n=_0;break;case 8:n=C0;break;default:n=Fc}l=n.bind(null,a,l,e),n=void 0,!$i||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(a,l,{capture:!0,passive:n}):e.addEventListener(a,l,!0):n!==void 0?e.addEventListener(a,l,{passive:n}):e.addEventListener(a,l,!1)}function kc(e,a,l,s,n){var r=s;if((a&1)===0&&(a&2)===0&&s!==null)e:for(;;){if(s===null)return;var m=s.tag;if(m===3||m===4){var w=s.stateNode.containerInfo;if(w===n)break;if(m===4)for(m=s.return;m!==null;){var D=m.tag;if((D===3||D===4)&&m.stateNode.containerInfo===n)return;m=m.return}for(;w!==null;){if(m=wl(w),m===null)return;if(D=m.tag,D===5||D===6||D===26||D===27){s=r=m;continue e}w=w.parentNode}}s=s.return}Bo(function(){var X=r,ee=Vi(l),se=[];e:{var V=md.get(e);if(V!==void 0){var J=gn,xe=e;switch(e){case"keypress":if(fn(l)===0)break e;case"keydown":case"keyup":J=Xf;break;case"focusin":xe="focus",J=Pi;break;case"focusout":xe="blur",J=Pi;break;case"beforeblur":case"afterblur":J=Pi;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Yo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Mf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Zf;break;case cd:case od:case dd:J=Of;break;case ud:J=Jf;break;case"scroll":case"scrollend":J=Af;break;case"wheel":J=Wf;break;case"copy":case"cut":case"paste":J=Uf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Fo;break;case"toggle":case"beforetoggle":J=If}var Ne=(a&4)!==0,Fe=!Ne&&(e==="scroll"||e==="scrollend"),L=Ne?V!==null?V+"Capture":null:V;Ne=[];for(var z=X,F;z!==null;){var ae=z;if(F=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||F===null||L===null||(ae=ms(z,L),ae!=null&&Ne.push(Qs(z,ae,F))),Fe)break;z=z.return}0<Ne.length&&(V=new J(V,xe,null,l,ee),se.push({event:V,listeners:Ne}))}}if((a&7)===0){e:{if(V=e==="mouseover"||e==="pointerover",J=e==="mouseout"||e==="pointerout",V&&l!==Qi&&(xe=l.relatedTarget||l.fromElement)&&(wl(xe)||xe[Nl]))break e;if((J||V)&&(V=ee.window===ee?ee:(V=ee.ownerDocument)?V.defaultView||V.parentWindow:window,J?(xe=l.relatedTarget||l.toElement,J=X,xe=xe?wl(xe):null,xe!==null&&(Fe=b(xe),Ne=xe.tag,xe!==Fe||Ne!==5&&Ne!==27&&Ne!==6)&&(xe=null)):(J=null,xe=X),J!==xe)){if(Ne=Yo,ae="onMouseLeave",L="onMouseEnter",z="mouse",(e==="pointerout"||e==="pointerover")&&(Ne=Fo,ae="onPointerLeave",L="onPointerEnter",z="pointer"),Fe=J==null?V:us(J),F=xe==null?V:us(xe),V=new Ne(ae,z+"leave",J,l,ee),V.target=Fe,V.relatedTarget=F,ae=null,wl(ee)===X&&(Ne=new Ne(L,z+"enter",xe,l,ee),Ne.target=F,Ne.relatedTarget=Fe,ae=Ne),Fe=ae,J&&xe)t:{for(Ne=Px,L=J,z=xe,F=0,ae=L;ae;ae=Ne(ae))F++;ae=0;for(var ye=z;ye;ye=Ne(ye))ae++;for(;0<F-ae;)L=Ne(L),F--;for(;0<ae-F;)z=Ne(z),ae--;for(;F--;){if(L===z||z!==null&&L===z.alternate){Ne=L;break t}L=Ne(L),z=Ne(z)}Ne=null}else Ne=null;J!==null&&zm(se,V,J,Ne,!1),xe!==null&&Fe!==null&&zm(se,Fe,xe,Ne,!0)}}e:{if(V=X?us(X):window,J=V.nodeName&&V.nodeName.toLowerCase(),J==="select"||J==="input"&&V.type==="file")var ze=Wo;else if(Jo(V))if(Po)ze=ox;else{ze=rx;var be=ix}else J=V.nodeName,!J||J.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?X&&Xi(X.elementType)&&(ze=Wo):ze=cx;if(ze&&(ze=ze(e,X))){Ko(se,ze,l,ee);break e}be&&be(e,V,X),e==="focusout"&&X&&V.type==="number"&&X.memoizedProps.value!=null&&Fi(V,"number",V.value)}switch(be=X?us(X):window,e){case"focusin":(Jo(be)||be.contentEditable==="true")&&(Ml=be,sr=X,ys=null);break;case"focusout":ys=sr=Ml=null;break;case"mousedown":nr=!0;break;case"contextmenu":case"mouseup":case"dragend":nr=!1,id(se,l,ee);break;case"selectionchange":if(ux)break;case"keydown":case"keyup":id(se,l,ee)}var Ee;if(er)e:{switch(e){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else Tl?Zo(e,l)&&(Me="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(Me="onCompositionStart");Me&&(Xo&&l.locale!=="ko"&&(Tl||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&Tl&&(Ee=Ho()):(Ca=ee,Ji="value"in Ca?Ca.value:Ca.textContent,Tl=!0)),be=ii(X,Me),0<be.length&&(Me=new Go(Me,e,null,l,ee),se.push({event:Me,listeners:be}),Ee?Me.data=Ee:(Ee=$o(l),Ee!==null&&(Me.data=Ee)))),(Ee=tx?ax(e,l):lx(e,l))&&(Me=ii(X,"onBeforeInput"),0<Me.length&&(be=new Go("onBeforeInput","beforeinput",null,l,ee),se.push({event:be,listeners:Me}),be.data=Ee)),$x(se,e,X,l,ee)}Mm(se,a)})}function Qs(e,a,l){return{instance:e,listener:a,currentTarget:l}}function ii(e,a){for(var l=a+"Capture",s=[];e!==null;){var n=e,r=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||r===null||(n=ms(e,l),n!=null&&s.unshift(Qs(e,n,r)),n=ms(e,a),n!=null&&s.push(Qs(e,n,r))),e.tag===3)return s;e=e.return}return[]}function Px(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function zm(e,a,l,s,n){for(var r=a._reactName,m=[];l!==null&&l!==s;){var w=l,D=w.alternate,X=w.stateNode;if(w=w.tag,D!==null&&D===s)break;w!==5&&w!==26&&w!==27||X===null||(D=X,n?(X=ms(l,r),X!=null&&m.unshift(Qs(l,X,D))):n||(X=ms(l,r),X!=null&&m.push(Qs(l,X,D)))),l=l.return}m.length!==0&&e.push({event:a,listeners:m})}var Ix=/\r\n?/g,e0=/\u0000|\uFFFD/g;function Om(e){return(typeof e=="string"?e:""+e).replace(Ix,`
`).replace(e0,"")}function Lm(e,a){return a=Om(a),Om(e)===a}function Ge(e,a,l,s,n,r){switch(l){case"children":typeof s=="string"?a==="body"||a==="textarea"&&s===""||Dl(e,s):(typeof s=="number"||typeof s=="bigint")&&a!=="body"&&Dl(e,""+s);break;case"className":dn(e,"class",s);break;case"tabIndex":dn(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":dn(e,l,s);break;case"style":Lo(e,s,r);break;case"data":if(a!=="object"){dn(e,"data",s);break}case"src":case"href":if(s===""&&(a!=="a"||l!=="href")){e.removeAttribute(l);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(l);break}s=mn(""+s),e.setAttribute(l,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(l==="formAction"?(a!=="input"&&Ge(e,a,"name",n.name,n,null),Ge(e,a,"formEncType",n.formEncType,n,null),Ge(e,a,"formMethod",n.formMethod,n,null),Ge(e,a,"formTarget",n.formTarget,n,null)):(Ge(e,a,"encType",n.encType,n,null),Ge(e,a,"method",n.method,n,null),Ge(e,a,"target",n.target,n,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(l);break}s=mn(""+s),e.setAttribute(l,s);break;case"onClick":s!=null&&(e.onclick=na);break;case"onScroll":s!=null&&Ae("scroll",e);break;case"onScrollEnd":s!=null&&Ae("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(d(61));if(l=s.__html,l!=null){if(n.children!=null)throw Error(d(60));e.innerHTML=l}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}l=mn(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,""+s):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":s===!0?e.setAttribute(l,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,s):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(l,s):e.removeAttribute(l);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(l):e.setAttribute(l,s);break;case"popover":Ae("beforetoggle",e),Ae("toggle",e),on(e,"popover",s);break;case"xlinkActuate":sa(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":sa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":sa(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":sa(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":sa(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":sa(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":sa(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":sa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":sa(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":on(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Df.get(l)||l,on(e,l,s))}}function Ac(e,a,l,s,n,r){switch(l){case"style":Lo(e,s,r);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(d(61));if(l=s.__html,l!=null){if(n.children!=null)throw Error(d(60));e.innerHTML=l}}break;case"children":typeof s=="string"?Dl(e,s):(typeof s=="number"||typeof s=="bigint")&&Dl(e,""+s);break;case"onScroll":s!=null&&Ae("scroll",e);break;case"onScrollEnd":s!=null&&Ae("scrollend",e);break;case"onClick":s!=null&&(e.onclick=na);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Eo.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(n=l.endsWith("Capture"),a=l.slice(2,n?l.length-7:void 0),r=e[vt]||null,r=r!=null?r[l]:null,typeof r=="function"&&e.removeEventListener(a,r,n),typeof s=="function")){typeof r!="function"&&r!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(a,s,n);break e}l in e?e[l]=s:s===!0?e.setAttribute(l,""):on(e,l,s)}}}function ht(e,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",e),Ae("load",e);var s=!1,n=!1,r;for(r in l)if(l.hasOwnProperty(r)){var m=l[r];if(m!=null)switch(r){case"src":s=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,a));default:Ge(e,a,r,m,l,null)}}n&&Ge(e,a,"srcSet",l.srcSet,l,null),s&&Ge(e,a,"src",l.src,l,null);return;case"input":Ae("invalid",e);var w=r=m=n=null,D=null,X=null;for(s in l)if(l.hasOwnProperty(s)){var ee=l[s];if(ee!=null)switch(s){case"name":n=ee;break;case"type":m=ee;break;case"checked":D=ee;break;case"defaultChecked":X=ee;break;case"value":r=ee;break;case"defaultValue":w=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(d(137,a));break;default:Ge(e,a,s,ee,l,null)}}Mo(e,r,w,D,X,m,n,!1);return;case"select":Ae("invalid",e),s=m=r=null;for(n in l)if(l.hasOwnProperty(n)&&(w=l[n],w!=null))switch(n){case"value":r=w;break;case"defaultValue":m=w;break;case"multiple":s=w;default:Ge(e,a,n,w,l,null)}a=r,l=m,e.multiple=!!s,a!=null?El(e,!!s,a,!1):l!=null&&El(e,!!s,l,!0);return;case"textarea":Ae("invalid",e),r=n=s=null;for(m in l)if(l.hasOwnProperty(m)&&(w=l[m],w!=null))switch(m){case"value":s=w;break;case"defaultValue":n=w;break;case"children":r=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(d(91));break;default:Ge(e,a,m,w,l,null)}zo(e,s,n,r);return;case"option":for(D in l)l.hasOwnProperty(D)&&(s=l[D],s!=null)&&(D==="selected"?e.selected=s&&typeof s!="function"&&typeof s!="symbol":Ge(e,a,D,s,l,null));return;case"dialog":Ae("beforetoggle",e),Ae("toggle",e),Ae("cancel",e),Ae("close",e);break;case"iframe":case"object":Ae("load",e);break;case"video":case"audio":for(s=0;s<Xs.length;s++)Ae(Xs[s],e);break;case"image":Ae("error",e),Ae("load",e);break;case"details":Ae("toggle",e);break;case"embed":case"source":case"link":Ae("error",e),Ae("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in l)if(l.hasOwnProperty(X)&&(s=l[X],s!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,a));default:Ge(e,a,X,s,l,null)}return;default:if(Xi(a)){for(ee in l)l.hasOwnProperty(ee)&&(s=l[ee],s!==void 0&&Ac(e,a,ee,s,l,void 0));return}}for(w in l)l.hasOwnProperty(w)&&(s=l[w],s!=null&&Ge(e,a,w,s,l,null))}function t0(e,a,l,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,r=null,m=null,w=null,D=null,X=null,ee=null;for(J in l){var se=l[J];if(l.hasOwnProperty(J)&&se!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":D=se;default:s.hasOwnProperty(J)||Ge(e,a,J,null,s,se)}}for(var V in s){var J=s[V];if(se=l[V],s.hasOwnProperty(V)&&(J!=null||se!=null))switch(V){case"type":r=J;break;case"name":n=J;break;case"checked":X=J;break;case"defaultChecked":ee=J;break;case"value":m=J;break;case"defaultValue":w=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(d(137,a));break;default:J!==se&&Ge(e,a,V,J,s,se)}}Gi(e,m,w,D,X,ee,r,n);return;case"select":J=m=w=V=null;for(r in l)if(D=l[r],l.hasOwnProperty(r)&&D!=null)switch(r){case"value":break;case"multiple":J=D;default:s.hasOwnProperty(r)||Ge(e,a,r,null,s,D)}for(n in s)if(r=s[n],D=l[n],s.hasOwnProperty(n)&&(r!=null||D!=null))switch(n){case"value":V=r;break;case"defaultValue":w=r;break;case"multiple":m=r;default:r!==D&&Ge(e,a,n,r,s,D)}a=w,l=m,s=J,V!=null?El(e,!!l,V,!1):!!s!=!!l&&(a!=null?El(e,!!l,a,!0):El(e,!!l,l?[]:"",!1));return;case"textarea":J=V=null;for(w in l)if(n=l[w],l.hasOwnProperty(w)&&n!=null&&!s.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Ge(e,a,w,null,s,n)}for(m in s)if(n=s[m],r=l[m],s.hasOwnProperty(m)&&(n!=null||r!=null))switch(m){case"value":V=n;break;case"defaultValue":J=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(d(91));break;default:n!==r&&Ge(e,a,m,n,s,r)}Ro(e,V,J);return;case"option":for(var xe in l)V=l[xe],l.hasOwnProperty(xe)&&V!=null&&!s.hasOwnProperty(xe)&&(xe==="selected"?e.selected=!1:Ge(e,a,xe,null,s,V));for(D in s)V=s[D],J=l[D],s.hasOwnProperty(D)&&V!==J&&(V!=null||J!=null)&&(D==="selected"?e.selected=V&&typeof V!="function"&&typeof V!="symbol":Ge(e,a,D,V,s,J));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in l)V=l[Ne],l.hasOwnProperty(Ne)&&V!=null&&!s.hasOwnProperty(Ne)&&Ge(e,a,Ne,null,s,V);for(X in s)if(V=s[X],J=l[X],s.hasOwnProperty(X)&&V!==J&&(V!=null||J!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(d(137,a));break;default:Ge(e,a,X,V,s,J)}return;default:if(Xi(a)){for(var Fe in l)V=l[Fe],l.hasOwnProperty(Fe)&&V!==void 0&&!s.hasOwnProperty(Fe)&&Ac(e,a,Fe,void 0,s,V);for(ee in s)V=s[ee],J=l[ee],!s.hasOwnProperty(ee)||V===J||V===void 0&&J===void 0||Ac(e,a,ee,V,s,J);return}}for(var L in l)V=l[L],l.hasOwnProperty(L)&&V!=null&&!s.hasOwnProperty(L)&&Ge(e,a,L,null,s,V);for(se in s)V=s[se],J=l[se],!s.hasOwnProperty(se)||V===J||V==null&&J==null||Ge(e,a,se,V,s,J)}function Um(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function a0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,a=0,l=performance.getEntriesByType("resource"),s=0;s<l.length;s++){var n=l[s],r=n.transferSize,m=n.initiatorType,w=n.duration;if(r&&w&&Um(m)){for(m=0,w=n.responseEnd,s+=1;s<l.length;s++){var D=l[s],X=D.startTime;if(X>w)break;var ee=D.transferSize,se=D.initiatorType;ee&&Um(se)&&(D=D.responseEnd,m+=ee*(D<w?1:(w-X)/(D-X)))}if(--s,a+=8*(r+m)/(n.duration/1e3),e++,10<e)break}}if(0<e)return a/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Tc=null,Mc=null;function ri(e){return e.nodeType===9?e:e.ownerDocument}function Bm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hm(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function Rc(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var zc=null;function l0(){var e=window.event;return e&&e.type==="popstate"?e===zc?!1:(zc=e,!0):(zc=null,!1)}var qm=typeof setTimeout=="function"?setTimeout:void 0,s0=typeof clearTimeout=="function"?clearTimeout:void 0,Ym=typeof Promise=="function"?Promise:void 0,n0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ym<"u"?function(e){return Ym.resolve(null).then(e).catch(i0)}:qm;function i0(e){setTimeout(function(){throw e})}function Fa(e){return e==="head"}function Gm(e,a){var l=a,s=0;do{var n=l.nextSibling;if(e.removeChild(l),n&&n.nodeType===8)if(l=n.data,l==="/$"||l==="/&"){if(s===0){e.removeChild(n),ns(a);return}s--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")s++;else if(l==="html")Vs(e.ownerDocument.documentElement);else if(l==="head"){l=e.ownerDocument.head,Vs(l);for(var r=l.firstChild;r;){var m=r.nextSibling,w=r.nodeName;r[ds]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&r.rel.toLowerCase()==="stylesheet"||l.removeChild(r),r=m}}else l==="body"&&Vs(e.ownerDocument.body);l=n}while(l);ns(a)}function Fm(e,a){var l=e;e=0;do{var s=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),s&&s.nodeType===8)if(l=s.data,l==="/$"){if(e===0)break;e--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||e++;l=s}while(l)}function Oc(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Oc(l),qi(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function r0(e,a,l,s){for(;e.nodeType===1;){var n=l;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[ds])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var r=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=Zt(e.nextSibling),e===null)break}return null}function c0(e,a,l){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=Zt(e.nextSibling),e===null))return null;return e}function Xm(e,a){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Zt(e.nextSibling),e===null))return null;return e}function Lc(e){return e.data==="$?"||e.data==="$~"}function Uc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function o0(e,a){var l=e.ownerDocument;if(e.data==="$~")e._reactRetry=a;else if(e.data!=="$?"||l.readyState!=="loading")a();else{var s=function(){a(),l.removeEventListener("DOMContentLoaded",s)};l.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Zt(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return e}var Bc=null;function Qm(e){e=e.nextSibling;for(var a=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"||l==="/&"){if(a===0)return Zt(e.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}e=e.nextSibling}return null}function Vm(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return e;a--}else l!=="/$"&&l!=="/&"||a++}e=e.previousSibling}return null}function Zm(e,a,l){switch(a=ri(l),e){case"html":if(e=a.documentElement,!e)throw Error(d(452));return e;case"head":if(e=a.head,!e)throw Error(d(453));return e;case"body":if(e=a.body,!e)throw Error(d(454));return e;default:throw Error(d(451))}}function Vs(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);qi(e)}var $t=new Map,$m=new Set;function ci(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ja=T.d;T.d={f:d0,r:u0,D:m0,C:h0,L:f0,m:x0,X:p0,S:g0,M:b0};function d0(){var e=ja.f(),a=In();return e||a}function u0(e){var a=Sl(e);a!==null&&a.tag===5&&a.type==="form"?uu(a):ja.r(e)}var as=typeof document>"u"?null:document;function Jm(e,a,l){var s=as;if(s&&typeof a=="string"&&a){var n=qt(a);n='link[rel="'+e+'"][href="'+n+'"]',typeof l=="string"&&(n+='[crossorigin="'+l+'"]'),$m.has(n)||($m.add(n),e={rel:e,crossOrigin:l,href:a},s.querySelector(n)===null&&(a=s.createElement("link"),ht(a,"link",e),it(a),s.head.appendChild(a)))}}function m0(e){ja.D(e),Jm("dns-prefetch",e,null)}function h0(e,a){ja.C(e,a),Jm("preconnect",e,a)}function f0(e,a,l){ja.L(e,a,l);var s=as;if(s&&e&&a){var n='link[rel="preload"][as="'+qt(a)+'"]';a==="image"&&l&&l.imageSrcSet?(n+='[imagesrcset="'+qt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(n+='[imagesizes="'+qt(l.imageSizes)+'"]')):n+='[href="'+qt(e)+'"]';var r=n;switch(a){case"style":r=ls(e);break;case"script":r=ss(e)}$t.has(r)||(e=f({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:e,as:a},l),$t.set(r,e),s.querySelector(n)!==null||a==="style"&&s.querySelector(Zs(r))||a==="script"&&s.querySelector($s(r))||(a=s.createElement("link"),ht(a,"link",e),it(a),s.head.appendChild(a)))}}function x0(e,a){ja.m(e,a);var l=as;if(l&&e){var s=a&&typeof a.as=="string"?a.as:"script",n='link[rel="modulepreload"][as="'+qt(s)+'"][href="'+qt(e)+'"]',r=n;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=ss(e)}if(!$t.has(r)&&(e=f({rel:"modulepreload",href:e},a),$t.set(r,e),l.querySelector(n)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector($s(r)))return}s=l.createElement("link"),ht(s,"link",e),it(s),l.head.appendChild(s)}}}function g0(e,a,l){ja.S(e,a,l);var s=as;if(s&&e){var n=_l(s).hoistableStyles,r=ls(e);a=a||"default";var m=n.get(r);if(!m){var w={loading:0,preload:null};if(m=s.querySelector(Zs(r)))w.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":a},l),(l=$t.get(r))&&Hc(e,l);var D=m=s.createElement("link");it(D),ht(D,"link",e),D._p=new Promise(function(X,ee){D.onload=X,D.onerror=ee}),D.addEventListener("load",function(){w.loading|=1}),D.addEventListener("error",function(){w.loading|=2}),w.loading|=4,oi(m,a,s)}m={type:"stylesheet",instance:m,count:1,state:w},n.set(r,m)}}}function p0(e,a){ja.X(e,a);var l=as;if(l&&e){var s=_l(l).hoistableScripts,n=ss(e),r=s.get(n);r||(r=l.querySelector($s(n)),r||(e=f({src:e,async:!0},a),(a=$t.get(n))&&qc(e,a),r=l.createElement("script"),it(r),ht(r,"link",e),l.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(n,r))}}function b0(e,a){ja.M(e,a);var l=as;if(l&&e){var s=_l(l).hoistableScripts,n=ss(e),r=s.get(n);r||(r=l.querySelector($s(n)),r||(e=f({src:e,async:!0,type:"module"},a),(a=$t.get(n))&&qc(e,a),r=l.createElement("script"),it(r),ht(r,"link",e),l.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(n,r))}}function Km(e,a,l,s){var n=(n=re.current)?ci(n):null;if(!n)throw Error(d(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=ls(l.href),l=_l(n).hoistableStyles,s=l.get(a),s||(s={type:"style",instance:null,count:0,state:null},l.set(a,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=ls(l.href);var r=_l(n).hoistableStyles,m=r.get(e);if(m||(n=n.ownerDocument||n,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,m),(r=n.querySelector(Zs(e)))&&!r._p&&(m.instance=r,m.state.loading=5),$t.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},$t.set(e,l),r||v0(n,e,l,m.state))),a&&s===null)throw Error(d(528,""));return m}if(a&&s!==null)throw Error(d(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ss(l),l=_l(n).hoistableScripts,s=l.get(a),s||(s={type:"script",instance:null,count:0,state:null},l.set(a,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,e))}}function ls(e){return'href="'+qt(e)+'"'}function Zs(e){return'link[rel="stylesheet"]['+e+"]"}function Wm(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function v0(e,a,l,s){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?s.loading=1:(a=e.createElement("link"),s.preload=a,a.addEventListener("load",function(){return s.loading|=1}),a.addEventListener("error",function(){return s.loading|=2}),ht(a,"link",l),it(a),e.head.appendChild(a))}function ss(e){return'[src="'+qt(e)+'"]'}function $s(e){return"script[async]"+e}function Pm(e,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var s=e.querySelector('style[data-href~="'+qt(l.href)+'"]');if(s)return a.instance=s,it(s),s;var n=f({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),it(s),ht(s,"style",n),oi(s,l.precedence,e),a.instance=s;case"stylesheet":n=ls(l.href);var r=e.querySelector(Zs(n));if(r)return a.state.loading|=4,a.instance=r,it(r),r;s=Wm(l),(n=$t.get(n))&&Hc(s,n),r=(e.ownerDocument||e).createElement("link"),it(r);var m=r;return m._p=new Promise(function(w,D){m.onload=w,m.onerror=D}),ht(r,"link",s),a.state.loading|=4,oi(r,l.precedence,e),a.instance=r;case"script":return r=ss(l.src),(n=e.querySelector($s(r)))?(a.instance=n,it(n),n):(s=l,(n=$t.get(r))&&(s=f({},l),qc(s,n)),e=e.ownerDocument||e,n=e.createElement("script"),it(n),ht(n,"link",s),e.head.appendChild(n),a.instance=n);case"void":return null;default:throw Error(d(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(s=a.instance,a.state.loading|=4,oi(s,l.precedence,e));return a.instance}function oi(e,a,l){for(var s=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=s.length?s[s.length-1]:null,r=n,m=0;m<s.length;m++){var w=s[m];if(w.dataset.precedence===a)r=w;else if(r!==n)break}r?r.parentNode.insertBefore(e,r.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(e,a.firstChild))}function Hc(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function qc(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var di=null;function Im(e,a,l){if(di===null){var s=new Map,n=di=new Map;n.set(l,s)}else n=di,s=n.get(l),s||(s=new Map,n.set(l,s));if(s.has(e))return s;for(s.set(e,null),l=l.getElementsByTagName(e),n=0;n<l.length;n++){var r=l[n];if(!(r[ds]||r[ot]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var m=r.getAttribute(a)||"";m=e+m;var w=s.get(m);w?w.push(r):s.set(m,[r])}}return s}function eh(e,a,l){e=e.ownerDocument||e,e.head.insertBefore(l,a==="title"?e.querySelector("head > title"):null)}function y0(e,a,l){if(l===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(e=a.disabled,typeof a.precedence=="string"&&e==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function th(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function j0(e,a,l,s){if(l.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var n=ls(s.href),r=a.querySelector(Zs(n));if(r){a=r._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(e.count++,e=ui.bind(e),a.then(e,e)),l.state.loading|=4,l.instance=r,it(r);return}r=a.ownerDocument||a,s=Wm(s),(n=$t.get(n))&&Hc(s,n),r=r.createElement("link"),it(r);var m=r;m._p=new Promise(function(w,D){m.onload=w,m.onerror=D}),ht(r,"link",s),l.instance=r}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(e.count++,l=ui.bind(e),a.addEventListener("load",l),a.addEventListener("error",l))}}var Yc=0;function N0(e,a){return e.stylesheets&&e.count===0&&hi(e,e.stylesheets),0<e.count||0<e.imgCount?function(l){var s=setTimeout(function(){if(e.stylesheets&&hi(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4+a);0<e.imgBytes&&Yc===0&&(Yc=62500*a0());var n=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&hi(e,e.stylesheets),e.unsuspend)){var r=e.unsuspend;e.unsuspend=null,r()}},(e.imgBytes>Yc?50:800)+a);return e.unsuspend=l,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(n)}}:null}function ui(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hi(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var mi=null;function hi(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,mi=new Map,a.forEach(w0,e),mi=null,ui.call(e))}function w0(e,a){if(!(a.state.loading&4)){var l=mi.get(e);if(l)var s=l.get(null);else{l=new Map,mi.set(e,l);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<n.length;r++){var m=n[r];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(l.set(m.dataset.precedence,m),s=m)}s&&l.set(null,s)}n=a.instance,m=n.getAttribute("data-precedence"),r=l.get(m)||s,r===s&&l.set(null,n),l.set(m,n),this.count++,s=ui.bind(this),n.addEventListener("load",s),n.addEventListener("error",s),r?r.parentNode.insertBefore(n,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),a.state.loading|=4}}var Js={$$typeof:Q,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function S0(e,a,l,s,n,r,m,w,D){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Li(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Li(0),this.hiddenUpdates=Li(null),this.identifierPrefix=s,this.onUncaughtError=n,this.onCaughtError=r,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function ah(e,a,l,s,n,r,m,w,D,X,ee,se){return e=new S0(e,a,l,m,D,X,ee,se,w),a=1,r===!0&&(a|=24),r=Et(3,null,null,a),e.current=r,r.stateNode=e,a=yr(),a.refCount++,e.pooledCache=a,a.refCount++,r.memoizedState={element:s,isDehydrated:l,cache:a},Sr(r),e}function lh(e){return e?(e=Ol,e):Ol}function sh(e,a,l,s,n,r){n=lh(n),s.context===null?s.context=n:s.pendingContext=n,s=Ma(a),s.payload={element:l},r=r===void 0?null:r,r!==null&&(s.callback=r),l=Ra(e,s,a),l!==null&&(_t(l,e,a),Es(l,e,a))}function nh(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<a?l:a}}function Gc(e,a){nh(e,a),(e=e.alternate)&&nh(e,a)}function ih(e){if(e.tag===13||e.tag===31){var a=sl(e,67108864);a!==null&&_t(a,e,67108864),Gc(e,67108864)}}function rh(e){if(e.tag===13||e.tag===31){var a=Mt();a=Ui(a);var l=sl(e,a);l!==null&&_t(l,e,a),Gc(e,a)}}var fi=!0;function _0(e,a,l,s){var n=_.T;_.T=null;var r=T.p;try{T.p=2,Fc(e,a,l,s)}finally{T.p=r,_.T=n}}function C0(e,a,l,s){var n=_.T;_.T=null;var r=T.p;try{T.p=8,Fc(e,a,l,s)}finally{T.p=r,_.T=n}}function Fc(e,a,l,s){if(fi){var n=Xc(s);if(n===null)kc(e,a,s,xi,l),oh(e,s);else if(D0(n,e,a,l,s))s.stopPropagation();else if(oh(e,s),a&4&&-1<E0.indexOf(e)){for(;n!==null;){var r=Sl(n);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var m=Qe(r.pendingLanes);if(m!==0){var w=r;for(w.pendingLanes|=2,w.entangledLanes|=2;m;){var D=1<<31-pt(m);w.entanglements[1]|=D,m&=~D}aa(r),(Le&6)===0&&(Wn=ft()+500,Fs(0))}}break;case 31:case 13:w=sl(r,2),w!==null&&_t(w,r,2),In(),Gc(r,2)}if(r=Xc(s),r===null&&kc(e,a,s,xi,l),r===n)break;n=r}n!==null&&s.stopPropagation()}else kc(e,a,s,null,l)}}function Xc(e){return e=Vi(e),Qc(e)}var xi=null;function Qc(e){if(xi=null,e=wl(e),e!==null){var a=b(e);if(a===null)e=null;else{var l=a.tag;if(l===13){if(e=h(a),e!==null)return e;e=null}else if(l===31){if(e=x(a),e!==null)return e;e=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return xi=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bl()){case rn:return 2;case Wa:return 8;case vl:case yl:return 32;case cn:return 268435456;default:return 32}default:return 32}}var Vc=!1,Xa=null,Qa=null,Va=null,Ks=new Map,Ws=new Map,Za=[],E0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function oh(e,a){switch(e){case"focusin":case"focusout":Xa=null;break;case"dragenter":case"dragleave":Qa=null;break;case"mouseover":case"mouseout":Va=null;break;case"pointerover":case"pointerout":Ks.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ws.delete(a.pointerId)}}function Ps(e,a,l,s,n,r){return e===null||e.nativeEvent!==r?(e={blockedOn:a,domEventName:l,eventSystemFlags:s,nativeEvent:r,targetContainers:[n]},a!==null&&(a=Sl(a),a!==null&&ih(a)),e):(e.eventSystemFlags|=s,a=e.targetContainers,n!==null&&a.indexOf(n)===-1&&a.push(n),e)}function D0(e,a,l,s,n){switch(a){case"focusin":return Xa=Ps(Xa,e,a,l,s,n),!0;case"dragenter":return Qa=Ps(Qa,e,a,l,s,n),!0;case"mouseover":return Va=Ps(Va,e,a,l,s,n),!0;case"pointerover":var r=n.pointerId;return Ks.set(r,Ps(Ks.get(r)||null,e,a,l,s,n)),!0;case"gotpointercapture":return r=n.pointerId,Ws.set(r,Ps(Ws.get(r)||null,e,a,l,s,n)),!0}return!1}function dh(e){var a=wl(e.target);if(a!==null){var l=b(a);if(l!==null){if(a=l.tag,a===13){if(a=h(l),a!==null){e.blockedOn=a,So(e.priority,function(){rh(l)});return}}else if(a===31){if(a=x(l),a!==null){e.blockedOn=a,So(e.priority,function(){rh(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gi(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var l=Xc(e.nativeEvent);if(l===null){l=e.nativeEvent;var s=new l.constructor(l.type,l);Qi=s,l.target.dispatchEvent(s),Qi=null}else return a=Sl(l),a!==null&&ih(a),e.blockedOn=l,!1;a.shift()}return!0}function uh(e,a,l){gi(e)&&l.delete(a)}function k0(){Vc=!1,Xa!==null&&gi(Xa)&&(Xa=null),Qa!==null&&gi(Qa)&&(Qa=null),Va!==null&&gi(Va)&&(Va=null),Ks.forEach(uh),Ws.forEach(uh)}function pi(e,a){e.blockedOn===a&&(e.blockedOn=null,Vc||(Vc=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,k0)))}var bi=null;function mh(e){bi!==e&&(bi=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){bi===e&&(bi=null);for(var a=0;a<e.length;a+=3){var l=e[a],s=e[a+1],n=e[a+2];if(typeof s!="function"){if(Qc(s||l)===null)continue;break}var r=Sl(l);r!==null&&(e.splice(a,3),a-=3,Xr(r,{pending:!0,data:n,method:l.method,action:s},s,n))}}))}function ns(e){function a(D){return pi(D,e)}Xa!==null&&pi(Xa,e),Qa!==null&&pi(Qa,e),Va!==null&&pi(Va,e),Ks.forEach(a),Ws.forEach(a);for(var l=0;l<Za.length;l++){var s=Za[l];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Za.length&&(l=Za[0],l.blockedOn===null);)dh(l),l.blockedOn===null&&Za.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(s=0;s<l.length;s+=3){var n=l[s],r=l[s+1],m=n[vt]||null;if(typeof r=="function")m||mh(l);else if(m){var w=null;if(r&&r.hasAttribute("formAction")){if(n=r,m=r[vt]||null)w=m.formAction;else if(Qc(n)!==null)continue}else w=m.action;typeof w=="function"?l[s+1]=w:(l.splice(s,3),s-=3),mh(l)}}}function hh(){function e(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(m){return n=m})},focusReset:"manual",scroll:"manual"})}function a(){n!==null&&(n(),n=null),s||setTimeout(l,20)}function l(){if(!s&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,n=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),n!==null&&(n(),n=null)}}}function Zc(e){this._internalRoot=e}vi.prototype.render=Zc.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(d(409));var l=a.current,s=Mt();sh(l,s,e,a,null,null)},vi.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;sh(e.current,2,null,e,null,null),In(),a[Nl]=null}};function vi(e){this._internalRoot=e}vi.prototype.unstable_scheduleHydration=function(e){if(e){var a=wo();e={blockedOn:null,target:e,priority:a};for(var l=0;l<Za.length&&a!==0&&a<Za[l].priority;l++);Za.splice(l,0,e),l===0&&dh(e)}};var fh=c.version;if(fh!=="19.2.3")throw Error(d(527,fh,"19.2.3"));T.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(d(188)):(e=Object.keys(e).join(","),Error(d(268,e)));return e=p(a),e=e!==null?j(e):null,e=e===null?null:e.stateNode,e};var A0={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yi.isDisabled&&yi.supportsFiber)try{Pa=yi.inject(A0),gt=yi}catch{}}return en.createRoot=function(e,a){if(!u(e))throw Error(d(299));var l=!1,s="",n=ju,r=Nu,m=wu;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(s=a.identifierPrefix),a.onUncaughtError!==void 0&&(n=a.onUncaughtError),a.onCaughtError!==void 0&&(r=a.onCaughtError),a.onRecoverableError!==void 0&&(m=a.onRecoverableError)),a=ah(e,1,!1,null,null,l,s,null,n,r,m,hh),e[Nl]=a.current,Dc(e),new Zc(a)},en.hydrateRoot=function(e,a,l){if(!u(e))throw Error(d(299));var s=!1,n="",r=ju,m=Nu,w=wu,D=null;return l!=null&&(l.unstable_strictMode===!0&&(s=!0),l.identifierPrefix!==void 0&&(n=l.identifierPrefix),l.onUncaughtError!==void 0&&(r=l.onUncaughtError),l.onCaughtError!==void 0&&(m=l.onCaughtError),l.onRecoverableError!==void 0&&(w=l.onRecoverableError),l.formState!==void 0&&(D=l.formState)),a=ah(e,1,!0,a,l??null,s,n,D,r,m,w,hh),a.context=lh(null),l=a.current,s=Mt(),s=Ui(s),n=Ma(s),n.callback=null,Ra(l,n,s),l=s,a.current.lanes=l,os(a,l),aa(a),e[Nl]=a.current,Dc(e),new vi(a)},en.version="19.2.3",en}var Sh;function q0(){if(Sh)return Kc.exports;Sh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(c){console.error(c)}}return i(),Kc.exports=H0(),Kc.exports}var Y0=q0();var _h="popstate";function G0(i={}){function c(u,b){let{pathname:h="/",search:x="",hash:v=""}=pl(u.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),so("",{pathname:h,search:x,hash:v},b.state&&b.state.usr||null,b.state&&b.state.key||"default")}function o(u,b){let h=u.document.querySelector("base"),x="";if(h&&h.getAttribute("href")){let v=u.location.href,p=v.indexOf("#");x=p===-1?v:v.slice(0,p)}return x+"#"+(typeof b=="string"?b:ln(b))}function d(u,b){zt(u.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(b)})`)}return X0(c,o,d,i)}function Ke(i,c){if(i===!1||i===null||typeof i>"u")throw new Error(c)}function zt(i,c){if(!i){typeof console<"u"&&console.warn(c);try{throw new Error(c)}catch{}}}function F0(){return Math.random().toString(36).substring(2,10)}function Ch(i,c){return{usr:i.state,key:i.key,idx:c}}function so(i,c,o=null,d){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof c=="string"?pl(c):c,state:o,key:c&&c.key||d||F0()}}function ln({pathname:i="/",search:c="",hash:o=""}){return c&&c!=="?"&&(i+=c.charAt(0)==="?"?c:"?"+c),o&&o!=="#"&&(i+=o.charAt(0)==="#"?o:"#"+o),i}function pl(i){let c={};if(i){let o=i.indexOf("#");o>=0&&(c.hash=i.substring(o),i=i.substring(0,o));let d=i.indexOf("?");d>=0&&(c.search=i.substring(d),i=i.substring(0,d)),i&&(c.pathname=i)}return c}function X0(i,c,o,d={}){let{window:u=document.defaultView,v5Compat:b=!1}=d,h=u.history,x="POP",v=null,p=j();p==null&&(p=0,h.replaceState({...h.state,idx:p},""));function j(){return(h.state||{idx:null}).idx}function f(){x="POP";let O=j(),E=O==null?null:O-p;p=O,v&&v({action:x,location:k.location,delta:E})}function y(O,E){x="PUSH";let H=so(k.location,O,E);o&&o(H,O),p=j()+1;let Q=Ch(H,p),le=k.createHref(H);try{h.pushState(Q,"",le)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;u.location.assign(le)}b&&v&&v({action:x,location:k.location,delta:1})}function S(O,E){x="REPLACE";let H=so(k.location,O,E);o&&o(H,O),p=j();let Q=Ch(H,p),le=k.createHref(H);h.replaceState(Q,"",le),b&&v&&v({action:x,location:k.location,delta:0})}function N(O){return Q0(O)}let k={get action(){return x},get location(){return i(u,h)},listen(O){if(v)throw new Error("A history only accepts one active listener");return u.addEventListener(_h,f),v=O,()=>{u.removeEventListener(_h,f),v=null}},createHref(O){return c(u,O)},createURL:N,encodeLocation(O){let E=N(O);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:y,replace:S,go(O){return h.go(O)}};return k}function Q0(i,c=!1){let o="http://localhost";typeof window<"u"&&(o=window.location.origin!=="null"?window.location.origin:window.location.href),Ke(o,"No window.location.(origin|href) available to create URL");let d=typeof i=="string"?i:ln(i);return d=d.replace(/ $/,"%20"),!c&&d.startsWith("//")&&(d=o+d),new URL(d,o)}function zh(i,c,o="/"){return V0(i,c,o,!1)}function V0(i,c,o,d){let u=typeof c=="string"?pl(c):c,b=wa(u.pathname||"/",o);if(b==null)return null;let h=Oh(i);Z0(h);let x=null;for(let v=0;x==null&&v<h.length;++v){let p=sg(b);x=ag(h[v],p,d)}return x}function Oh(i,c=[],o=[],d="",u=!1){let b=(h,x,v=u,p)=>{let j={relativePath:p===void 0?h.path||"":p,caseSensitive:h.caseSensitive===!0,childrenIndex:x,route:h};if(j.relativePath.startsWith("/")){if(!j.relativePath.startsWith(d)&&v)return;Ke(j.relativePath.startsWith(d),`Absolute route path "${j.relativePath}" nested under path "${d}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),j.relativePath=j.relativePath.slice(d.length)}let f=Na([d,j.relativePath]),y=o.concat(j);h.children&&h.children.length>0&&(Ke(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Oh(h.children,c,y,f,v)),!(h.path==null&&!h.index)&&c.push({path:f,score:eg(f,h.index),routesMeta:y})};return i.forEach((h,x)=>{if(h.path===""||!h.path?.includes("?"))b(h,x);else for(let v of Lh(h.path))b(h,x,!0,v)}),c}function Lh(i){let c=i.split("/");if(c.length===0)return[];let[o,...d]=c,u=o.endsWith("?"),b=o.replace(/\?$/,"");if(d.length===0)return u?[b,""]:[b];let h=Lh(d.join("/")),x=[];return x.push(...h.map(v=>v===""?b:[b,v].join("/"))),u&&x.push(...h),x.map(v=>i.startsWith("/")&&v===""?"/":v)}function Z0(i){i.sort((c,o)=>c.score!==o.score?o.score-c.score:tg(c.routesMeta.map(d=>d.childrenIndex),o.routesMeta.map(d=>d.childrenIndex)))}var $0=/^:[\w-]+$/,J0=3,K0=2,W0=1,P0=10,I0=-2,Eh=i=>i==="*";function eg(i,c){let o=i.split("/"),d=o.length;return o.some(Eh)&&(d+=I0),c&&(d+=K0),o.filter(u=>!Eh(u)).reduce((u,b)=>u+($0.test(b)?J0:b===""?W0:P0),d)}function tg(i,c){return i.length===c.length&&i.slice(0,-1).every((d,u)=>d===c[u])?i[i.length-1]-c[c.length-1]:0}function ag(i,c,o=!1){let{routesMeta:d}=i,u={},b="/",h=[];for(let x=0;x<d.length;++x){let v=d[x],p=x===d.length-1,j=b==="/"?c:c.slice(b.length)||"/",f=_i({path:v.relativePath,caseSensitive:v.caseSensitive,end:p},j),y=v.route;if(!f&&p&&o&&!d[d.length-1].route.index&&(f=_i({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},j)),!f)return null;Object.assign(u,f.params),h.push({params:u,pathname:Na([b,f.pathname]),pathnameBase:cg(Na([b,f.pathnameBase])),route:y}),f.pathnameBase!=="/"&&(b=Na([b,f.pathnameBase]))}return h}function _i(i,c){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[o,d]=lg(i.path,i.caseSensitive,i.end),u=c.match(o);if(!u)return null;let b=u[0],h=b.replace(/(.)\/+$/,"$1"),x=u.slice(1);return{params:d.reduce((p,{paramName:j,isOptional:f},y)=>{if(j==="*"){let N=x[y]||"";h=b.slice(0,b.length-N.length).replace(/(.)\/+$/,"$1")}const S=x[y];return f&&!S?p[j]=void 0:p[j]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:b,pathnameBase:h,pattern:i}}function lg(i,c=!1,o=!0){zt(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let d=[],u="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,x,v)=>(d.push({paramName:x,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(d.push({paramName:"*"}),u+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?u+="\\/*$":i!==""&&i!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,c?void 0:"i"),d]}function sg(i){try{return i.split("/").map(c=>decodeURIComponent(c).replace(/\//g,"%2F")).join("/")}catch(c){return zt(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${c}).`),i}}function wa(i,c){if(c==="/")return i;if(!i.toLowerCase().startsWith(c.toLowerCase()))return null;let o=c.endsWith("/")?c.length-1:c.length,d=i.charAt(o);return d&&d!=="/"?null:i.slice(o)||"/"}var Uh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ng=i=>Uh.test(i);function ig(i,c="/"){let{pathname:o,search:d="",hash:u=""}=typeof i=="string"?pl(i):i,b;if(o)if(ng(o))b=o;else{if(o.includes("//")){let h=o;o=o.replace(/\/\/+/g,"/"),zt(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${o}`)}o.startsWith("/")?b=Dh(o.substring(1),"/"):b=Dh(o,c)}else b=c;return{pathname:b,search:og(d),hash:dg(u)}}function Dh(i,c){let o=c.replace(/\/+$/,"").split("/");return i.split("/").forEach(u=>{u===".."?o.length>1&&o.pop():u!=="."&&o.push(u)}),o.length>1?o.join("/"):"/"}function eo(i,c,o,d){return`Cannot include a '${i}' character in a manually specified \`to.${c}\` field [${JSON.stringify(d)}].  Please separate it out to the \`to.${o}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rg(i){return i.filter((c,o)=>o===0||c.route.path&&c.route.path.length>0)}function co(i){let c=rg(i);return c.map((o,d)=>d===c.length-1?o.pathname:o.pathnameBase)}function oo(i,c,o,d=!1){let u;typeof i=="string"?u=pl(i):(u={...i},Ke(!u.pathname||!u.pathname.includes("?"),eo("?","pathname","search",u)),Ke(!u.pathname||!u.pathname.includes("#"),eo("#","pathname","hash",u)),Ke(!u.search||!u.search.includes("#"),eo("#","search","hash",u)));let b=i===""||u.pathname==="",h=b?"/":u.pathname,x;if(h==null)x=o;else{let f=c.length-1;if(!d&&h.startsWith("..")){let y=h.split("/");for(;y[0]==="..";)y.shift(),f-=1;u.pathname=y.join("/")}x=f>=0?c[f]:"/"}let v=ig(u,x),p=h&&h!=="/"&&h.endsWith("/"),j=(b||h===".")&&o.endsWith("/");return!v.pathname.endsWith("/")&&(p||j)&&(v.pathname+="/"),v}var Na=i=>i.join("/").replace(/\/\/+/g,"/"),cg=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),og=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,dg=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,ug=class{constructor(i,c,o,d=!1){this.status=i,this.statusText=c||"",this.internal=d,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}};function mg(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function hg(i){return i.map(c=>c.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Bh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Hh(i,c){let o=i;if(typeof o!="string"||!Uh.test(o))return{absoluteURL:void 0,isExternal:!1,to:o};let d=o,u=!1;if(Bh)try{let b=new URL(window.location.href),h=o.startsWith("//")?new URL(b.protocol+o):new URL(o),x=wa(h.pathname,c);h.origin===b.origin&&x!=null?o=x+h.search+h.hash:u=!0}catch{zt(!1,`<Link to="${o}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:d,isExternal:u,to:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var qh=["POST","PUT","PATCH","DELETE"];new Set(qh);var fg=["GET",...qh];new Set(fg);var rs=g.createContext(null);rs.displayName="DataRouter";var Ei=g.createContext(null);Ei.displayName="DataRouterState";var xg=g.createContext(!1),Yh=g.createContext({isTransitioning:!1});Yh.displayName="ViewTransition";var gg=g.createContext(new Map);gg.displayName="Fetchers";var pg=g.createContext(null);pg.displayName="Await";var Ot=g.createContext(null);Ot.displayName="Navigation";var sn=g.createContext(null);sn.displayName="Location";var Pt=g.createContext({outlet:null,matches:[],isDataRoute:!1});Pt.displayName="Route";var uo=g.createContext(null);uo.displayName="RouteError";var Gh="REACT_ROUTER_ERROR",bg="REDIRECT",vg="ROUTE_ERROR_RESPONSE";function yg(i){if(i.startsWith(`${Gh}:${bg}:{`))try{let c=JSON.parse(i.slice(28));if(typeof c=="object"&&c&&typeof c.status=="number"&&typeof c.statusText=="string"&&typeof c.location=="string"&&typeof c.reloadDocument=="boolean"&&typeof c.replace=="boolean")return c}catch{}}function jg(i){if(i.startsWith(`${Gh}:${vg}:{`))try{let c=JSON.parse(i.slice(40));if(typeof c=="object"&&c&&typeof c.status=="number"&&typeof c.statusText=="string")return new ug(c.status,c.statusText,c.data)}catch{}}function Ng(i,{relative:c}={}){Ke(cs(),"useHref() may be used only in the context of a <Router> component.");let{basename:o,navigator:d}=g.useContext(Ot),{hash:u,pathname:b,search:h}=nn(i,{relative:c}),x=b;return o!=="/"&&(x=b==="/"?o:Na([o,b])),d.createHref({pathname:x,search:h,hash:u})}function cs(){return g.useContext(sn)!=null}function Sa(){return Ke(cs(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(sn).location}var Fh="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Xh(i){g.useContext(Ot).static||g.useLayoutEffect(i)}function Ka(){let{isDataRoute:i}=g.useContext(Pt);return i?Lg():wg()}function wg(){Ke(cs(),"useNavigate() may be used only in the context of a <Router> component.");let i=g.useContext(rs),{basename:c,navigator:o}=g.useContext(Ot),{matches:d}=g.useContext(Pt),{pathname:u}=Sa(),b=JSON.stringify(co(d)),h=g.useRef(!1);return Xh(()=>{h.current=!0}),g.useCallback((v,p={})=>{if(zt(h.current,Fh),!h.current)return;if(typeof v=="number"){o.go(v);return}let j=oo(v,JSON.parse(b),u,p.relative==="path");i==null&&c!=="/"&&(j.pathname=j.pathname==="/"?c:Na([c,j.pathname])),(p.replace?o.replace:o.push)(j,p.state,p)},[c,o,b,u,i])}g.createContext(null);function Sg(){let{matches:i}=g.useContext(Pt),c=i[i.length-1];return c?c.params:{}}function nn(i,{relative:c}={}){let{matches:o}=g.useContext(Pt),{pathname:d}=Sa(),u=JSON.stringify(co(o));return g.useMemo(()=>oo(i,JSON.parse(u),d,c==="path"),[i,u,d,c])}function _g(i,c){return Qh(i,c)}function Qh(i,c,o,d,u){Ke(cs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:b}=g.useContext(Ot),{matches:h}=g.useContext(Pt),x=h[h.length-1],v=x?x.params:{},p=x?x.pathname:"/",j=x?x.pathnameBase:"/",f=x&&x.route;{let H=f&&f.path||"";Zh(p,!f||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let y=Sa(),S;if(c){let H=typeof c=="string"?pl(c):c;Ke(j==="/"||H.pathname?.startsWith(j),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${j}" but pathname "${H.pathname}" was given in the \`location\` prop.`),S=H}else S=y;let N=S.pathname||"/",k=N;if(j!=="/"){let H=j.replace(/^\//,"").split("/");k="/"+N.replace(/^\//,"").split("/").slice(H.length).join("/")}let O=zh(i,{pathname:k});zt(f||O!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),zt(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=Ag(O&&O.map(H=>Object.assign({},H,{params:Object.assign({},v,H.params),pathname:Na([j,b.encodeLocation?b.encodeLocation(H.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?j:Na([j,b.encodeLocation?b.encodeLocation(H.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathnameBase])})),h,o,d,u);return c&&E?g.createElement(sn.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},E):E}function Cg(){let i=Og(),c=mg(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),o=i instanceof Error?i.stack:null,d="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:d},b={padding:"2px 4px",backgroundColor:d},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:b},"ErrorBoundary")," or"," ",g.createElement("code",{style:b},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},c),o?g.createElement("pre",{style:u},o):null,h)}var Eg=g.createElement(Cg,null),Vh=class extends g.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,c){return c.location!==i.location||c.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:c.error,location:c.location,revalidation:i.revalidation||c.revalidation}}componentDidCatch(i,c){this.props.onError?this.props.onError(i,c):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const o=jg(i.digest);o&&(i=o)}let c=i!==void 0?g.createElement(Pt.Provider,{value:this.props.routeContext},g.createElement(uo.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?g.createElement(Dg,{error:i},c):c}};Vh.contextType=xg;var to=new WeakMap;function Dg({children:i,error:c}){let{basename:o}=g.useContext(Ot);if(typeof c=="object"&&c&&"digest"in c&&typeof c.digest=="string"){let d=yg(c.digest);if(d){let u=to.get(c);if(u)throw u;let b=Hh(d.location,o);if(Bh&&!to.get(c))if(b.isExternal||d.reloadDocument)window.location.href=b.absoluteURL||b.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(b.to,{replace:d.replace}));throw to.set(c,h),h}return g.createElement("meta",{httpEquiv:"refresh",content:`0;url=${b.absoluteURL||b.to}`})}}return i}function kg({routeContext:i,match:c,children:o}){let d=g.useContext(rs);return d&&d.static&&d.staticContext&&(c.route.errorElement||c.route.ErrorBoundary)&&(d.staticContext._deepestRenderedBoundaryId=c.route.id),g.createElement(Pt.Provider,{value:i},o)}function Ag(i,c=[],o=null,d=null,u=null){if(i==null){if(!o)return null;if(o.errors)i=o.matches;else if(c.length===0&&!o.initialized&&o.matches.length>0)i=o.matches;else return null}let b=i,h=o?.errors;if(h!=null){let j=b.findIndex(f=>f.route.id&&h?.[f.route.id]!==void 0);Ke(j>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),b=b.slice(0,Math.min(b.length,j+1))}let x=!1,v=-1;if(o)for(let j=0;j<b.length;j++){let f=b[j];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(v=j),f.route.id){let{loaderData:y,errors:S}=o,N=f.route.loader&&!y.hasOwnProperty(f.route.id)&&(!S||S[f.route.id]===void 0);if(f.route.lazy||N){x=!0,v>=0?b=b.slice(0,v+1):b=[b[0]];break}}}let p=o&&d?(j,f)=>{d(j,{location:o.location,params:o.matches?.[0]?.params??{},unstable_pattern:hg(o.matches),errorInfo:f})}:void 0;return b.reduceRight((j,f,y)=>{let S,N=!1,k=null,O=null;o&&(S=h&&f.route.id?h[f.route.id]:void 0,k=f.route.errorElement||Eg,x&&(v<0&&y===0?(Zh("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,O=null):v===y&&(N=!0,O=f.route.hydrateFallbackElement||null)));let E=c.concat(b.slice(0,y+1)),H=()=>{let Q;return S?Q=k:N?Q=O:f.route.Component?Q=g.createElement(f.route.Component,null):f.route.element?Q=f.route.element:Q=j,g.createElement(kg,{match:f,routeContext:{outlet:j,matches:E,isDataRoute:o!=null},children:Q})};return o&&(f.route.ErrorBoundary||f.route.errorElement||y===0)?g.createElement(Vh,{location:o.location,revalidation:o.revalidation,component:k,error:S,children:H(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:p}):H()},null)}function mo(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Tg(i){let c=g.useContext(rs);return Ke(c,mo(i)),c}function Mg(i){let c=g.useContext(Ei);return Ke(c,mo(i)),c}function Rg(i){let c=g.useContext(Pt);return Ke(c,mo(i)),c}function ho(i){let c=Rg(i),o=c.matches[c.matches.length-1];return Ke(o.route.id,`${i} can only be used on routes that contain a unique "id"`),o.route.id}function zg(){return ho("useRouteId")}function Og(){let i=g.useContext(uo),c=Mg("useRouteError"),o=ho("useRouteError");return i!==void 0?i:c.errors?.[o]}function Lg(){let{router:i}=Tg("useNavigate"),c=ho("useNavigate"),o=g.useRef(!1);return Xh(()=>{o.current=!0}),g.useCallback(async(u,b={})=>{zt(o.current,Fh),o.current&&(typeof u=="number"?await i.navigate(u):await i.navigate(u,{fromRouteId:c,...b}))},[i,c])}var kh={};function Zh(i,c,o){!c&&!kh[i]&&(kh[i]=!0,zt(!1,o))}g.memo(Ug);function Ug({routes:i,future:c,state:o,onError:d}){return Qh(i,void 0,o,d,c)}function Bg({to:i,replace:c,state:o,relative:d}){Ke(cs(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=g.useContext(Ot);zt(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:b}=g.useContext(Pt),{pathname:h}=Sa(),x=Ka(),v=oo(i,co(b),h,d==="path"),p=JSON.stringify(v);return g.useEffect(()=>{x(JSON.parse(p),{replace:c,state:o,relative:d})},[x,p,d,c,o]),null}function is(i){Ke(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Hg({basename:i="/",children:c=null,location:o,navigationType:d="POP",navigator:u,static:b=!1,unstable_useTransitions:h}){Ke(!cs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let x=i.replace(/^\/*/,"/"),v=g.useMemo(()=>({basename:x,navigator:u,static:b,unstable_useTransitions:h,future:{}}),[x,u,b,h]);typeof o=="string"&&(o=pl(o));let{pathname:p="/",search:j="",hash:f="",state:y=null,key:S="default"}=o,N=g.useMemo(()=>{let k=wa(p,x);return k==null?null:{location:{pathname:k,search:j,hash:f,state:y,key:S},navigationType:d}},[x,p,j,f,y,S,d]);return zt(N!=null,`<Router basename="${x}"> is not able to match the URL "${p}${j}${f}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:g.createElement(Ot.Provider,{value:v},g.createElement(sn.Provider,{children:c,value:N}))}function qg({children:i,location:c}){return _g(no(i),c)}function no(i,c=[]){let o=[];return g.Children.forEach(i,(d,u)=>{if(!g.isValidElement(d))return;let b=[...c,u];if(d.type===g.Fragment){o.push.apply(o,no(d.props.children,b));return}Ke(d.type===is,`[${typeof d.type=="string"?d.type:d.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ke(!d.props.index||!d.props.children,"An index route cannot have child routes.");let h={id:d.props.id||b.join("-"),caseSensitive:d.props.caseSensitive,element:d.props.element,Component:d.props.Component,index:d.props.index,path:d.props.path,middleware:d.props.middleware,loader:d.props.loader,action:d.props.action,hydrateFallbackElement:d.props.hydrateFallbackElement,HydrateFallback:d.props.HydrateFallback,errorElement:d.props.errorElement,ErrorBoundary:d.props.ErrorBoundary,hasErrorBoundary:d.props.hasErrorBoundary===!0||d.props.ErrorBoundary!=null||d.props.errorElement!=null,shouldRevalidate:d.props.shouldRevalidate,handle:d.props.handle,lazy:d.props.lazy};d.props.children&&(h.children=no(d.props.children,b)),o.push(h)}),o}var wi="get",Si="application/x-www-form-urlencoded";function Di(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function Yg(i){return Di(i)&&i.tagName.toLowerCase()==="button"}function Gg(i){return Di(i)&&i.tagName.toLowerCase()==="form"}function Fg(i){return Di(i)&&i.tagName.toLowerCase()==="input"}function Xg(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function Qg(i,c){return i.button===0&&(!c||c==="_self")&&!Xg(i)}var ji=null;function Vg(){if(ji===null)try{new FormData(document.createElement("form"),0),ji=!1}catch{ji=!0}return ji}var Zg=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ao(i){return i!=null&&!Zg.has(i)?(zt(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Si}"`),null):i}function $g(i,c){let o,d,u,b,h;if(Gg(i)){let x=i.getAttribute("action");d=x?wa(x,c):null,o=i.getAttribute("method")||wi,u=ao(i.getAttribute("enctype"))||Si,b=new FormData(i)}else if(Yg(i)||Fg(i)&&(i.type==="submit"||i.type==="image")){let x=i.form;if(x==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=i.getAttribute("formaction")||x.getAttribute("action");if(d=v?wa(v,c):null,o=i.getAttribute("formmethod")||x.getAttribute("method")||wi,u=ao(i.getAttribute("formenctype"))||ao(x.getAttribute("enctype"))||Si,b=new FormData(x,i),!Vg()){let{name:p,type:j,value:f}=i;if(j==="image"){let y=p?`${p}.`:"";b.append(`${y}x`,"0"),b.append(`${y}y`,"0")}else p&&b.append(p,f)}}else{if(Di(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');o=wi,d=null,u=Si,h=i}return b&&u==="text/plain"&&(h=b,b=void 0),{action:d,method:o.toLowerCase(),encType:u,formData:b,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function fo(i,c){if(i===!1||i===null||typeof i>"u")throw new Error(c)}function Jg(i,c,o){let d=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return d.pathname==="/"?d.pathname=`_root.${o}`:c&&wa(d.pathname,c)==="/"?d.pathname=`${c.replace(/\/$/,"")}/_root.${o}`:d.pathname=`${d.pathname.replace(/\/$/,"")}.${o}`,d}async function Kg(i,c){if(i.id in c)return c[i.id];try{let o=await import(i.module);return c[i.id]=o,o}catch(o){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(o),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Wg(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function Pg(i,c,o){let d=await Promise.all(i.map(async u=>{let b=c.routes[u.route.id];if(b){let h=await Kg(b,o);return h.links?h.links():[]}return[]}));return ap(d.flat(1).filter(Wg).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function Ah(i,c,o,d,u,b){let h=(v,p)=>o[p]?v.route.id!==o[p].route.id:!0,x=(v,p)=>o[p].pathname!==v.pathname||o[p].route.path?.endsWith("*")&&o[p].params["*"]!==v.params["*"];return b==="assets"?c.filter((v,p)=>h(v,p)||x(v,p)):b==="data"?c.filter((v,p)=>{let j=d.routes[v.route.id];if(!j||!j.hasLoader)return!1;if(h(v,p)||x(v,p))return!0;if(v.route.shouldRevalidate){let f=v.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:o[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Ig(i,c,{includeHydrateFallback:o}={}){return ep(i.map(d=>{let u=c.routes[d.route.id];if(!u)return[];let b=[u.module];return u.clientActionModule&&(b=b.concat(u.clientActionModule)),u.clientLoaderModule&&(b=b.concat(u.clientLoaderModule)),o&&u.hydrateFallbackModule&&(b=b.concat(u.hydrateFallbackModule)),u.imports&&(b=b.concat(u.imports)),b}).flat(1))}function ep(i){return[...new Set(i)]}function tp(i){let c={},o=Object.keys(i).sort();for(let d of o)c[d]=i[d];return c}function ap(i,c){let o=new Set;return new Set(c),i.reduce((d,u)=>{let b=JSON.stringify(tp(u));return o.has(b)||(o.add(b),d.push({key:b,link:u})),d},[])}function $h(){let i=g.useContext(rs);return fo(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function lp(){let i=g.useContext(Ei);return fo(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var xo=g.createContext(void 0);xo.displayName="FrameworkContext";function Jh(){let i=g.useContext(xo);return fo(i,"You must render this element inside a <HydratedRouter> element"),i}function sp(i,c){let o=g.useContext(xo),[d,u]=g.useState(!1),[b,h]=g.useState(!1),{onFocus:x,onBlur:v,onMouseEnter:p,onMouseLeave:j,onTouchStart:f}=c,y=g.useRef(null);g.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let k=E=>{E.forEach(H=>{h(H.isIntersecting)})},O=new IntersectionObserver(k,{threshold:.5});return y.current&&O.observe(y.current),()=>{O.disconnect()}}},[i]),g.useEffect(()=>{if(d){let k=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(k)}}},[d]);let S=()=>{u(!0)},N=()=>{u(!1),h(!1)};return o?i!=="intent"?[b,y,{}]:[b,y,{onFocus:tn(x,S),onBlur:tn(v,N),onMouseEnter:tn(p,S),onMouseLeave:tn(j,N),onTouchStart:tn(f,S)}]:[!1,y,{}]}function tn(i,c){return o=>{i&&i(o),o.defaultPrevented||c(o)}}function np({page:i,...c}){let{router:o}=$h(),d=g.useMemo(()=>zh(o.routes,i,o.basename),[o.routes,i,o.basename]);return d?g.createElement(rp,{page:i,matches:d,...c}):null}function ip(i){let{manifest:c,routeModules:o}=Jh(),[d,u]=g.useState([]);return g.useEffect(()=>{let b=!1;return Pg(i,c,o).then(h=>{b||u(h)}),()=>{b=!0}},[i,c,o]),d}function rp({page:i,matches:c,...o}){let d=Sa(),{manifest:u,routeModules:b}=Jh(),{basename:h}=$h(),{loaderData:x,matches:v}=lp(),p=g.useMemo(()=>Ah(i,c,v,u,d,"data"),[i,c,v,u,d]),j=g.useMemo(()=>Ah(i,c,v,u,d,"assets"),[i,c,v,u,d]),f=g.useMemo(()=>{if(i===d.pathname+d.search+d.hash)return[];let N=new Set,k=!1;if(c.forEach(E=>{let H=u.routes[E.route.id];!H||!H.hasLoader||(!p.some(Q=>Q.route.id===E.route.id)&&E.route.id in x&&b[E.route.id]?.shouldRevalidate||H.hasClientLoader?k=!0:N.add(E.route.id))}),N.size===0)return[];let O=Jg(i,h,"data");return k&&N.size>0&&O.searchParams.set("_routes",c.filter(E=>N.has(E.route.id)).map(E=>E.route.id).join(",")),[O.pathname+O.search]},[h,x,d,u,p,c,i,b]),y=g.useMemo(()=>Ig(j,u),[j,u]),S=ip(j);return g.createElement(g.Fragment,null,f.map(N=>g.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...o})),y.map(N=>g.createElement("link",{key:N,rel:"modulepreload",href:N,...o})),S.map(({key:N,link:k})=>g.createElement("link",{key:N,nonce:o.nonce,...k})))}function cp(...i){return c=>{i.forEach(o=>{typeof o=="function"?o(c):o!=null&&(o.current=c)})}}var op=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{op&&(window.__reactRouterVersion="7.11.0")}catch{}function dp({basename:i,children:c,unstable_useTransitions:o,window:d}){let u=g.useRef();u.current==null&&(u.current=G0({window:d,v5Compat:!0}));let b=u.current,[h,x]=g.useState({action:b.action,location:b.location}),v=g.useCallback(p=>{o===!1?x(p):g.startTransition(()=>x(p))},[o]);return g.useLayoutEffect(()=>b.listen(v),[b,v]),g.createElement(Hg,{basename:i,children:c,location:h.location,navigationType:h.action,navigator:b,unstable_useTransitions:o})}var Kh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wh=g.forwardRef(function({onClick:c,discover:o="render",prefetch:d="none",relative:u,reloadDocument:b,replace:h,state:x,target:v,to:p,preventScrollReset:j,viewTransition:f,unstable_defaultShouldRevalidate:y,...S},N){let{basename:k,unstable_useTransitions:O}=g.useContext(Ot),E=typeof p=="string"&&Kh.test(p),H=Hh(p,k);p=H.to;let Q=Ng(p,{relative:u}),[le,$,U]=sp(d,S),P=fp(p,{replace:h,state:x,target:v,preventScrollReset:j,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:y,unstable_useTransitions:O});function ve(me){c&&c(me),me.defaultPrevented||P(me)}let he=g.createElement("a",{...S,...U,href:H.absoluteURL||Q,onClick:H.isExternal||b?c:ve,ref:cp(N,$),target:v,"data-discover":!E&&o==="render"?"true":void 0});return le&&!E?g.createElement(g.Fragment,null,he,g.createElement(np,{page:Q})):he});Wh.displayName="Link";var up=g.forwardRef(function({"aria-current":c="page",caseSensitive:o=!1,className:d="",end:u=!1,style:b,to:h,viewTransition:x,children:v,...p},j){let f=nn(h,{relative:p.relative}),y=Sa(),S=g.useContext(Ei),{navigator:N,basename:k}=g.useContext(Ot),O=S!=null&&vp(f)&&x===!0,E=N.encodeLocation?N.encodeLocation(f).pathname:f.pathname,H=y.pathname,Q=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;o||(H=H.toLowerCase(),Q=Q?Q.toLowerCase():null,E=E.toLowerCase()),Q&&k&&(Q=wa(Q,k)||Q);const le=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let $=H===E||!u&&H.startsWith(E)&&H.charAt(le)==="/",U=Q!=null&&(Q===E||!u&&Q.startsWith(E)&&Q.charAt(E.length)==="/"),P={isActive:$,isPending:U,isTransitioning:O},ve=$?c:void 0,he;typeof d=="function"?he=d(P):he=[d,$?"active":null,U?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let me=typeof b=="function"?b(P):b;return g.createElement(Wh,{...p,"aria-current":ve,className:he,ref:j,style:me,to:h,viewTransition:x},typeof v=="function"?v(P):v)});up.displayName="NavLink";var mp=g.forwardRef(({discover:i="render",fetcherKey:c,navigate:o,reloadDocument:d,replace:u,state:b,method:h=wi,action:x,onSubmit:v,relative:p,preventScrollReset:j,viewTransition:f,unstable_defaultShouldRevalidate:y,...S},N)=>{let{unstable_useTransitions:k}=g.useContext(Ot),O=pp(),E=bp(x,{relative:p}),H=h.toLowerCase()==="get"?"get":"post",Q=typeof x=="string"&&Kh.test(x),le=$=>{if(v&&v($),$.defaultPrevented)return;$.preventDefault();let U=$.nativeEvent.submitter,P=U?.getAttribute("formmethod")||h,ve=()=>O(U||$.currentTarget,{fetcherKey:c,method:P,navigate:o,replace:u,state:b,relative:p,preventScrollReset:j,viewTransition:f,unstable_defaultShouldRevalidate:y});k&&o!==!1?g.startTransition(()=>ve()):ve()};return g.createElement("form",{ref:N,method:H,action:E,onSubmit:d?v:le,...S,"data-discover":!Q&&i==="render"?"true":void 0})});mp.displayName="Form";function hp(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ph(i){let c=g.useContext(rs);return Ke(c,hp(i)),c}function fp(i,{target:c,replace:o,state:d,preventScrollReset:u,relative:b,viewTransition:h,unstable_defaultShouldRevalidate:x,unstable_useTransitions:v}={}){let p=Ka(),j=Sa(),f=nn(i,{relative:b});return g.useCallback(y=>{if(Qg(y,c)){y.preventDefault();let S=o!==void 0?o:ln(j)===ln(f),N=()=>p(i,{replace:S,state:d,preventScrollReset:u,relative:b,viewTransition:h,unstable_defaultShouldRevalidate:x});v?g.startTransition(()=>N()):N()}},[j,p,f,o,d,c,i,u,b,h,x,v])}var xp=0,gp=()=>`__${String(++xp)}__`;function pp(){let{router:i}=Ph("useSubmit"),{basename:c}=g.useContext(Ot),o=zg(),d=i.fetch,u=i.navigate;return g.useCallback(async(b,h={})=>{let{action:x,method:v,encType:p,formData:j,body:f}=$g(b,c);if(h.navigate===!1){let y=h.fetcherKey||gp();await d(y,o,h.action||x,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:j,body:f,formMethod:h.method||v,formEncType:h.encType||p,flushSync:h.flushSync})}else await u(h.action||x,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:j,body:f,formMethod:h.method||v,formEncType:h.encType||p,replace:h.replace,state:h.state,fromRouteId:o,flushSync:h.flushSync,viewTransition:h.viewTransition})},[d,u,c,o])}function bp(i,{relative:c}={}){let{basename:o}=g.useContext(Ot),d=g.useContext(Pt);Ke(d,"useFormAction must be used inside a RouteContext");let[u]=d.matches.slice(-1),b={...nn(i||".",{relative:c})},h=Sa();if(i==null){b.search=h.search;let x=new URLSearchParams(b.search),v=x.getAll("index");if(v.some(j=>j==="")){x.delete("index"),v.filter(f=>f).forEach(f=>x.append("index",f));let j=x.toString();b.search=j?`?${j}`:""}}return(!i||i===".")&&u.route.index&&(b.search=b.search?b.search.replace(/^\?/,"?index&"):"?index"),o!=="/"&&(b.pathname=b.pathname==="/"?o:Na([o,b.pathname])),ln(b)}function vp(i,{relative:c}={}){let o=g.useContext(Yh);Ke(o!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:d}=Ph("useViewTransitionState"),u=nn(i,{relative:c});if(!o.isTransitioning)return!1;let b=wa(o.currentLocation.pathname,d)||o.currentLocation.pathname,h=wa(o.nextLocation.pathname,d)||o.nextLocation.pathname;return _i(u.pathname,h)!=null||_i(u.pathname,b)!=null}var Ja=Rh();const yp=M0(Ja),an={companyName:"SanctumEMHR EMHR",systemName:"Electronic Mental Health Record",tagline:"Where modern design meets clinical insight.",logoText:"M",logoUrl:"/app/SanctumLogo.png",colors:{primary:"#6B9AC4",secondary:"#A8C5A5",accent:"#E8DCC4"}};function jp(){const i=Ka(),[c,o]=g.useState(""),[d,u]=g.useState(""),[b,h]=g.useState(!1),[x,v]=g.useState(""),p=async j=>{j.preventDefault(),h(!0),v("");try{const f=await fetch("/custom/api/login.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:c,password:d})});if(!f.ok)throw new Error("Invalid credentials");const y=await f.json();if(y.success)y.user&&localStorage.setItem("user",JSON.stringify(y.user)),i("/dashboard");else throw new Error(y.error||"Login failed")}catch(f){console.error("Login error:",f),v("Invalid username or password")}finally{h(!1)}};return t.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-mental"}),t.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[t.jsx("div",{className:"particle particle-1"}),t.jsx("div",{className:"particle particle-2"}),t.jsx("div",{className:"particle particle-3"}),t.jsx("div",{className:"particle particle-4"}),t.jsx("div",{className:"particle particle-5"})]}),t.jsx("div",{className:"relative z-10 w-full max-w-6xl mx-4",children:t.jsx("div",{className:"backdrop-blur-3xl bg-white/30 rounded-3xl shadow-2xl border border-white/50 overflow-hidden",children:t.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[t.jsx("div",{className:"p-12 flex flex-col items-center justify-center",children:t.jsx("div",{className:"w-full max-w-md backdrop-blur-xl bg-white/5 rounded-2xl p-6",children:an.logoUrl?t.jsx("img",{src:an.logoUrl,alt:`${an.companyName} logo`,className:"w-full h-auto object-contain"}):t.jsx("div",{className:"text-9xl text-gray-700 font-bold text-center",children:an.logoText})})}),t.jsxs("div",{className:"p-8",children:[t.jsxs("form",{onSubmit:p,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-800 text-sm font-semibold mb-2",children:"Username"}),t.jsx("input",{type:"text",value:c,onChange:j=>o(j.target.value),className:"input-lg",placeholder:"Enter your username",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-800 text-sm font-semibold mb-2",children:"Password"}),t.jsx("input",{type:"password",value:d,onChange:j=>u(j.target.value),className:"input-lg",placeholder:"Enter your password",required:!0})]}),x&&t.jsx("div",{className:"error-message",children:x}),t.jsx("button",{type:"submit",disabled:b,className:"btn-search w-full disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Signing in...":"Sign In"})]}),t.jsx("div",{className:"mt-6 text-center",children:t.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/60 px-4 py-2 rounded-full border border-gray-300 backdrop-blur-sm shadow-sm",children:[t.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),t.jsx("span",{className:"text-gray-700 text-xs font-semibold",children:"HIPAA Compliant & Secure"})]})}),t.jsx("div",{className:"mt-4 text-center",children:t.jsx("p",{className:"text-gray-600 text-xs",children:"Version 0.3.0-alpha"})}),t.jsxs("div",{className:"mt-6 text-center border-t border-white/30 pt-4",children:[t.jsx("p",{className:"text-gray-600 text-xs",children:"SanctumEMHR is Copyright  2026 Sacred Wandering"}),t.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Proprietary and Confidential"})]})]})]})})})]})}function Np({user:i,onLogout:c,setActiveNav:o}){return t.jsxs("div",{className:"flex items-center gap-3 bg-white/40 backdrop-blur-sm rounded-2xl px-4 py-2 border border-white/50",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-md",children:t.jsx("span",{className:"text-white font-bold text-sm",children:i.initials})}),t.jsxs("div",{className:"text-left",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-800",children:i.name}),t.jsxs("div",{className:"flex gap-2 items-center",children:[t.jsx("button",{onClick:()=>o("settings"),className:"text-xs text-gray-600 hover:text-gray-900 transition-all",children:"Settings"}),t.jsx("span",{className:"text-gray-400",children:""}),t.jsx("button",{onClick:c,className:"text-xs text-gray-600 hover:text-gray-900 transition-all",children:"Sign Out"})]})]})]})}function wp({branding:i,today:c,user:o,onLogout:d,setActiveNav:u}){return t.jsx("header",{className:"relative z-10 backdrop-blur-xl bg-white/30 shadow-lg border-b border-white/40 sticky top-0",children:t.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"w-12 h-12 bg-white/60 rounded-2xl flex items-center justify-center shadow-lg border border-white/70 backdrop-blur-sm overflow-hidden",children:[i.logoUrl?t.jsx("img",{src:i.logoUrl,alt:i.companyName,className:"w-full h-full object-contain p-1",onError:b=>{b.target.style.display="none",b.target.nextSibling.style.display="block"}}):null,t.jsx("span",{className:"text-xl font-bold text-gray-700",style:{display:i.logoUrl?"none":"block"},children:i.logoText})]}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-800",children:i.companyName}),t.jsx("p",{className:"text-xs text-gray-600",children:c})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("button",{className:"relative p-2 hover:bg-white/40 rounded-xl transition-all",children:[t.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),o?.unreadMessages>0&&t.jsx("span",{className:"absolute top-1 right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center border-2 border-white",children:o.unreadMessages})]}),t.jsx(Np,{user:o,onLogout:d,setActiveNav:u})]})]})})})}function Sp(){return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-mental"}),t.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[t.jsx("div",{className:"particle particle-1"}),t.jsx("div",{className:"particle particle-2"}),t.jsx("div",{className:"particle particle-3"}),t.jsx("div",{className:"particle particle-4"}),t.jsx("div",{className:"particle particle-5"})]})]})}function _p({item:i,isActive:c,onClick:o}){const d=Ka(),u=()=>{o(),d("/dashboard",{state:{activeNav:i.id}})};return t.jsx("button",{onClick:u,className:c?"nav-main-active":"nav-main-inactive",children:i.label})}function Cp({activeNav:i,setActiveNav:c,user:o}){const d=o?.permissions?.includes("admin")||o?.permissions?.includes("emergency_login"),u=[{id:"dashboard",label:"Dashboard"},{id:"calendar",label:"Calendar"},{id:"clients",label:"Clients"},{id:"messages",label:"Messages"},{id:"billing",label:"Billing"},{id:"reports",label:"Reports"},...d?[{id:"admin",label:"Settings"}]:[]];return t.jsx("nav",{className:"backdrop-blur-2xl bg-white/40 rounded-3xl shadow-2xl border border-white/50 p-2",children:t.jsx("div",{className:"flex gap-2",children:u.map(b=>t.jsx(_p,{item:b,isActive:i===b.id,onClick:()=>c(b.id)},b.id))})})}function Ih({user:i,activeNav:c,setActiveNav:o,today:d,children:u,onLogout:b,wide:h=!1}){const x=h?"max-w-[1600px]":"max-w-7xl";return t.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[t.jsx(Sp,{}),t.jsx(wp,{branding:an,today:d,user:i,onLogout:b,setActiveNav:o}),t.jsx("div",{className:`relative z-10 ${x} mx-auto px-6 pt-6`,children:t.jsx(Cp,{activeNav:c,setActiveNav:o,user:i})}),t.jsx("main",{className:`relative z-10 ${x} mx-auto px-6 py-8`,children:u})]})}function Ep(){const i=new Date().getHours();return i>=5&&i<12?"Good morning":i>=12&&i<17?"Good afternoon":"Good evening"}function Dp(){return t.jsxs("div",{className:"mb-8",children:[t.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:[Ep(),"!"]}),t.jsx("p",{className:"text-gray-600",children:"Here's what's happening today."})]})}function Ni({value:i,label:c,trend:o,gradientFrom:d,gradientTo:u,icon:b}){const h=o.direction==="up"?c==="Unbilled Appointments"?"text-red-600":"text-green-600":c==="Unbilled Appointments"?"text-green-600":"text-red-600",x=c==="Active Clients"?"-":"+";return t.jsxs("div",{className:"card-main transform hover:scale-105 transition-all hover:shadow-3xl",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${d} ${u} rounded-2xl flex items-center justify-center shadow-lg`,children:b})}),t.jsx("div",{className:"text-4xl font-bold text-gray-800 mb-1",children:i}),t.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-2",children:c}),t.jsxs("div",{className:`text-xs font-semibold flex items-center gap-1 ${h}`,children:[o.direction==="up"?"":""," ",x,o.change," ",o.label]})]})}function kp({stats:i}){return t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-8",children:[t.jsx(Ni,{value:i.todayAppointments.value,label:"Today's Appointments",trend:i.todayAppointments.trend,gradientFrom:"from-blue-400",gradientTo:"to-blue-600",icon:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),t.jsx(Ni,{value:i.unbilledAppointments.value,label:"Unbilled Appointments",trend:i.unbilledAppointments.trend,gradientFrom:"from-amber-400",gradientTo:"to-orange-600",icon:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),t.jsx(Ni,{value:i.sessionsYTD.value,label:"Sessions This Year",trend:i.sessionsYTD.trend,gradientFrom:"from-green-400",gradientTo:"to-emerald-600",icon:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),t.jsx(Ni,{value:i.activeClients.value,label:"Active Clients",trend:i.activeClients.trend,gradientFrom:"from-purple-400",gradientTo:"to-purple-600",icon:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})]})}function Ap({onNewClient:i,onNewAppointment:c}){return t.jsxs("div",{className:"card-main",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Quick Actions"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:c,className:"btn-action btn-primary",children:"+ New Appointment"}),t.jsx("button",{onClick:i,className:"btn-action btn-success",children:"+ Add New Client"})]})]})}function Tp({todaysAppointments:i,onAppointmentClick:c}){return t.jsx("div",{className:"lg:col-span-2",children:t.jsxs("div",{className:"card-main",children:[t.jsx("div",{className:"flex items-center justify-between mb-6",children:t.jsxs("h3",{className:"text-lg font-bold text-gray-800",children:["Today's Appointments (",i.length,")"]})}),t.jsx("div",{className:"space-y-3",children:i.map((o,d)=>t.jsx("div",{onClick:()=>c&&c(o),className:`${o.isNext?"backdrop-blur-2xl bg-gradient-to-r from-blue-500/40 to-purple-500/40 border-white/60":"backdrop-blur-xl bg-white/60"} rounded-2xl p-5 border-2 ${o.isNext?"border-blue-400":"border-transparent"} cursor-pointer hover:shadow-xl transition-all hover:scale-[1.02]`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[o.isNext&&t.jsx("div",{className:"w-12 h-12 bg-white/90 rounded-xl flex items-center justify-center shadow-lg",children:t.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),t.jsxs("div",{children:[o.isNext&&t.jsxs("p",{className:"text-xs font-bold text-white/90 mb-1",children:["NEXT UP  ",o.minutesUntil," minutes"]}),t.jsxs("p",{className:`text-lg font-bold ${o.isNext?"text-white":"text-gray-800"}`,children:[o.time,"  ",o.client]}),t.jsxs("p",{className:`text-sm mt-1 ${o.isNext?"text-white/80":"text-gray-600"}`,children:[o.type,"  ",o.duration,o.room&&`  ${o.room}`,o.participants&&`  ${o.participants}`]})]})]}),o.isNext&&t.jsx("button",{className:"px-4 py-2 bg-white/90 hover:bg-white text-blue-600 font-semibold rounded-xl transition-all shadow-md hover:shadow-lg text-sm",children:"View Details"})]})},d))})]})})}async function De(i,c={}){const o=await fetch(i,{...c,credentials:"include",headers:{"Content-Type":"application/json",...c.headers}}),d=await o.json();if(!o.ok)throw o.status===401?(c.noRedirect||(localStorage.removeItem("user"),window.location.href="/app/"),new Error("Authentication required")):new Error(d.message||d.error||`API request failed: ${o.statusText}`);return d}function ki(){const i=localStorage.getItem("user");if(!i)return null;try{return JSON.parse(i)}catch(c){return console.error("Error parsing user data:",c),null}}async function Mp(){try{const i=await De("/custom/api/session_user.php",{noRedirect:!0});if(console.log("Session user response:",i),i&&i.username)return localStorage.setItem("user",JSON.stringify(i)),{id:i.id||null,fname:i.fname||"",lname:i.lname||"",fullName:i.fullName,admin:i.admin||!1,username:i.username||null}}catch(i){console.log("Session user fetch failed:",i.message)}return null}async function ef(i){if(!i||i.trim()==="")return[];const c=i.trim().split(/\s+/),o=new URLSearchParams;return c.length===1?o.append("fname",c[0]):c.length>=2&&(o.append("fname",c[0]),o.append("lname",c[c.length-1])),De(`/custom/api/patient_search.php?${o.toString()}`)}async function tf(){return De("/custom/api/client_stats.php")}async function Rp(){return De("/custom/api/client_demographics.php")}async function zp(i="all"){const c=i!=="all"?`?status=${i}`:"";return De(`/custom/api/client_list.php${c}`)}async function af(i){return console.log("Fetching client detail for ID:",i),De(`/custom/api/client_detail.php?id=${i}`)}async function Op(i){return console.log("Fetching encounter detail for ID:",i),De(`/custom/api/encounter_detail.php?encounter_id=${i}`)}async function io(i){return console.log("Creating clinical note:",i),De("/custom/api/notes/create_note.php",{method:"POST",body:JSON.stringify(i)})}async function Lp(i,c={}){console.log("Fetching patient notes for ID:",i);const o=new URLSearchParams({patient_id:i});return c.note_type&&o.append("note_type",c.note_type),c.status&&o.append("status",c.status),c.start_date&&o.append("start_date",c.start_date),c.end_date&&o.append("end_date",c.end_date),De(`/custom/api/notes/get_patient_notes.php?${o.toString()}`)}async function lf(i,c=!1){console.log("Fetching note:",i);const o=c?`note_uuid=${i}`:`note_id=${i}`;return De(`/custom/api/notes/get_note.php?${o}`)}async function Th(i,c){return console.log("Updating note:",i),De("/custom/api/notes/update_note.php",{method:"POST",body:JSON.stringify({noteId:i,...c})})}async function Up(i){return De("/custom/api/notes/autosave_note.php",{method:"POST",body:JSON.stringify(i)})}async function sf(i,c=null){return console.log("Signing note:",i),De("/custom/api/notes/sign_note.php",{method:"POST",body:JSON.stringify({noteId:i,signatureData:c})})}async function Bp(i){return console.log("Deleting note:",i),De("/custom/api/notes/delete_note.php",{method:"DELETE",body:JSON.stringify({note_id:i})})}async function Hp(i={}){console.log("Fetching interventions");const c=new URLSearchParams;i.tier&&c.append("tier",i.tier),i.modality&&c.append("modality",i.modality),i.include_inactive&&c.append("include_inactive",i.include_inactive);const o=c.toString();return De(`/custom/api/notes/get_interventions.php${o?"?"+o:""}`)}async function nf(i,c={}){console.log("Fetching treatment goals for patient:",i);const o=new URLSearchParams({patient_id:i});return c.status&&o.append("status",c.status),c.include_all&&o.append("include_all",c.include_all),De(`/custom/api/notes/get_treatment_goals.php?${o.toString()}`)}async function qp(i,c="ICD10",o=50){console.log("Searching codes:",{searchTerm:i,codeType:c,limit:o});const d=new URLSearchParams({search:i,code_type:c,limit:o.toString()});return De(`/custom/api/search_codes.php?${d.toString()}`)}async function Yp(i,c={}){console.log("Fetching patient diagnoses:",{patientId:i,options:c});const o=new URLSearchParams({patient_id:i.toString()});return c.activeAsOf&&o.append("active_as_of",c.activeAsOf),c.includeRetired!==void 0&&o.append("include_retired",c.includeRetired?"1":"0"),De(`/custom/api/get_patient_diagnoses.php?${o.toString()}`)}async function Gp(i){console.log("Fetching draft:",i);const c=new URLSearchParams;return i.note_id&&c.append("note_id",i.note_id),i.appointment_id&&c.append("appointment_id",i.appointment_id),i.patient_id&&c.append("patient_id",i.patient_id),De(`/custom/api/notes/get_draft.php?${c.toString()}`)}async function Fp(){return console.log("Fetching clinical settings"),De("/custom/api/notes/get_clinical_settings.php")}async function Xp(i){return console.log("Fetching billing for patient ID:",i),De(`/custom/api/billing.php?patient_id=${i}`)}async function Qp(i,c){return console.log("Updating demographics for patient ID:",i),De("/custom/api/update_demographics.php",{method:"POST",body:JSON.stringify({patient_id:i,...c})})}async function Vp(i){return console.log("Creating new client:",i.fname,i.lname),De("/custom/api/create_client.php",{method:"POST",body:JSON.stringify(i)})}async function Rt(i){return console.log("Fetching list options for:",i),De(`/custom/api/get_list_options.php?list_id=${i}`)}async function go(){return console.log("Fetching providers list"),De("/custom/api/get_providers.php")}async function lo(i){return console.log("Fetching related persons for patient:",i),De(`/custom/api/get_related_persons.php?patient_id=${i}`)}async function Zp(i){return console.log("Saving related person:",i),De("/custom/api/save_related_person.php",{method:"POST",body:JSON.stringify(i)})}async function $p(i){return console.log("Deleting related person relation:",i),De("/custom/api/delete_related_person.php",{method:"POST",body:JSON.stringify({relation_id:i})})}async function Jp(i,c){return console.log("Updating insurance ID:",i),De("/custom/api/update_insurance.php",{method:"POST",body:JSON.stringify({insurance_id:i,...c})})}async function Kp(){return console.log("Fetching insurance companies list"),De("/custom/api/get_insurance_companies.php")}async function rf(){return console.log("Fetching calendar settings"),De("/custom/api/get_calendar_settings.php")}async function Wp(i){return console.log("Updating calendar settings:",i),De("/custom/api/update_calendar_settings.php",{method:"POST",body:JSON.stringify(i)})}async function po(i,c,o=null){console.log("Fetching appointments from",i,"to",c);const d=new URLSearchParams({start_date:i,end_date:c});return o&&o!=="all"&&d.append("provider_id",o),De(`/custom/api/get_appointments.php?${d.toString()}`)}async function cf(i=0){console.log("Fetching appointment categories (type:",i,")");const c=i!==null?`?type=${i}`:"";return De(`/custom/api/get_appointment_categories.php${c}`)}async function Pp(){return console.log("Fetching rooms list"),De("/custom/api/get_rooms.php")}async function of(i){return console.log("Creating appointment:",i),De("/custom/api/create_appointment.php",{method:"POST",body:JSON.stringify(i)})}async function df(i,c){return console.log("Updating appointment:",i,c),De("/custom/api/update_appointment.php",{method:"POST",body:JSON.stringify({appointmentId:i,...c})})}async function uf(i,c=null){return console.log("Deleting appointment:",i,c),De("/custom/api/delete_appointment.php",{method:"POST",body:JSON.stringify({appointmentId:i,seriesData:c})})}async function mf(){try{await fetch("/custom/api/session_logout.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})}catch(i){console.error("Logout error:",i)}finally{localStorage.removeItem("user"),window.location.href="/app/"}}function Ip(){const i=[{age:"3 days ago",color:"border-red-400"},{age:"2 days ago",color:"border-amber-400"},{age:"Yesterday",color:"border-yellow-400"}];return t.jsxs("div",{className:"card-main",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Pending Documentation"}),t.jsx("div",{className:"space-y-3",children:i.map((c,o)=>t.jsxs("div",{className:`backdrop-blur-xl bg-white/60 ${c.color} border-l-4 rounded-2xl p-4 cursor-pointer hover:shadow-lg transition-all hover:bg-white/70`,children:[t.jsx("p",{className:"text-sm font-semibold text-gray-800",children:c.age}),t.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Complete session note"})]},o))})]})}function hf({onClose:i,onClientCreated:c}){const[o,d]=g.useState({fname:"",mname:"",lname:"",DOB:"",sex:"",ss:"",street:"",city:"",state:"",postal_code:"",phone_cell:"",phone_home:"",email:"",care_team_status:"active"}),[u,b]=g.useState(!1),[h,x]=g.useState(null),v=(j,f)=>{d(y=>({...y,[j]:f}))},p=async j=>{j.preventDefault(),b(!0),x(null);try{if(!o.fname||!o.lname)throw new Error("First name and last name are required");if(!o.DOB)throw new Error("Date of birth is required");if(o.email&&!o.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/))throw new Error("Invalid email format");const f=await Vp(o);c&&f.patient_id&&c(f.patient_id),i()}catch(f){x(f.message||"Failed to create client")}finally{b(!1)}};return t.jsx("div",{className:"modal-backdrop",children:t.jsxs("div",{className:"modal-container modal-lg",children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"New Client"}),t.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700 transition-colors",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("form",{onSubmit:p,className:"modal-body",children:[h&&t.jsx("div",{className:"error-message",children:h}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Personal Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["First Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",required:!0,value:o.fname,onChange:j=>v("fname",j.target.value),className:"input-field"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Middle Name"}),t.jsx("input",{type:"text",value:o.mname,onChange:j=>v("mname",j.target.value),className:"input-field"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Last Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",required:!0,value:o.lname,onChange:j=>v("lname",j.target.value),className:"input-field"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Date of Birth ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"date",required:!0,value:o.DOB,onChange:j=>v("DOB",j.target.value),className:"input-field"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Sex"}),t.jsxs("select",{value:o.sex,onChange:j=>v("sex",j.target.value),className:"input-field",children:[t.jsx("option",{value:"",children:"Select..."}),t.jsx("option",{value:"Male",children:"Male"}),t.jsx("option",{value:"Female",children:"Female"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Social Security Number"}),t.jsx("input",{type:"text",value:o.ss,onChange:j=>v("ss",j.target.value),placeholder:"XXX-XX-XXXX",maxLength:"11",className:"input-field"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status"}),t.jsxs("select",{value:o.care_team_status,onChange:j=>v("care_team_status",j.target.value),className:"input-field",children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"}),t.jsx("option",{value:"discharged",children:"Discharged"})]})]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Contact Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Street Address"}),t.jsx("input",{type:"text",value:o.street,onChange:j=>v("street",j.target.value),className:"input-field"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"City"}),t.jsx("input",{type:"text",value:o.city,onChange:j=>v("city",j.target.value),className:"input-field"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"State"}),t.jsx("input",{type:"text",value:o.state,onChange:j=>v("state",j.target.value),maxLength:"2",placeholder:"CA",className:"input-field"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Postal Code"}),t.jsx("input",{type:"text",value:o.postal_code,onChange:j=>v("postal_code",j.target.value),className:"input-field"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mobile Phone"}),t.jsx("input",{type:"tel",value:o.phone_cell,onChange:j=>v("phone_cell",j.target.value),className:"input-field"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Home Phone"}),t.jsx("input",{type:"tel",value:o.phone_home,onChange:j=>v("phone_home",j.target.value),className:"input-field"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),t.jsx("input",{type:"email",value:o.email,onChange:j=>v("email",j.target.value),className:"input-field"})]})]})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",onClick:i,disabled:u,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:u,className:"btn-action btn-primary btn-compact disabled:opacity-50",children:u?"Creating Client...":"Create Client"})]})]})]})})}function eb(){const i=Ka(),[c,o]=g.useState(""),[d,u]=g.useState([]),[b,h]=g.useState(!1),[x,v]=g.useState(""),[p,j]=g.useState(!1),[f,y]=g.useState({activeClients:0,inactiveClients:0,dischargedClients:0,todayClients:0}),[S,N]=g.useState(!0),[k,O]=g.useState([]),[E,H]=g.useState(!0),[Q,le]=g.useState("active"),[$,U]=g.useState(!1);g.useEffect(()=>{(async()=>{try{const te=await tf();y(te)}catch(te){console.error("Failed to fetch data:",te)}finally{N(!1)}})()},[]),g.useEffect(()=>{(async()=>{try{H(!0);const te=await zp(Q);O(te||[])}catch(te){console.error("Failed to fetch clients:",te),O([])}finally{H(!1)}})()},[Q]);const P=async K=>{if(K.preventDefault(),!c.trim()){v("Please enter a search term");return}h(!0),v(""),j(!0);try{const te=await ef(c);u(te||[])}catch(te){console.error("Search error:",te),v("Failed to search patients. Please try again."),u([])}finally{h(!1)}},ve=K=>{console.log("=== CLICKING CLIENT ==="),console.log("Patient ID:",K),console.log("About to navigate to:",`/clients/${K}`),i(`/clients/${K}`),console.log("Navigate called")},he=K=>{console.log("New client created with ID:",K),i(`/clients/${K}`)},me=K=>{if(!K)return"N/A";try{return new Date(K).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},ue=K=>{const te=(K||"").toLowerCase();return te==="active"?"badge-solid-success":te==="inactive"?"badge-solid-warning":"badge-solid-neutral"};return t.jsxs("div",{className:"flex gap-6",children:[t.jsxs("div",{className:"w-80 flex-shrink-0 space-y-6",children:[t.jsxs("div",{className:"card-main",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:"Clients"}),t.jsx("p",{className:"text-gray-600 text-xs",children:"Manage client records"})]}),t.jsxs("div",{className:"card-main",children:[t.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-4",children:"Caseload Summary"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"stat-box",children:S?t.jsxs("div",{className:"skeleton-pulse",children:[t.jsx("div",{className:"h-3 bg-gray-300 rounded w-16 mb-2"}),t.jsx("div",{className:"h-6 bg-gray-300 rounded w-8"})]}):t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Active"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:f.activeClients})]})}),t.jsx("div",{className:"stat-box",children:S?t.jsxs("div",{className:"skeleton-pulse",children:[t.jsx("div",{className:"h-3 bg-gray-300 rounded w-16 mb-2"}),t.jsx("div",{className:"h-6 bg-gray-300 rounded w-8"})]}):t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Inactive"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:f.inactiveClients})]})}),t.jsx("div",{className:"stat-box",children:S?t.jsxs("div",{className:"skeleton-pulse",children:[t.jsx("div",{className:"h-3 bg-gray-300 rounded w-16 mb-2"}),t.jsx("div",{className:"h-6 bg-gray-300 rounded w-8"})]}):t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Discharged"}),t.jsx("p",{className:"text-2xl font-bold text-gray-500",children:f.dischargedClients})]})})]})]}),t.jsx(Ip,{})]}),t.jsxs("div",{className:"flex-1 space-y-6",children:[t.jsx("div",{className:"card-main",children:t.jsxs("form",{onSubmit:P,className:"space-y-4",children:[t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-gray-800 text-sm font-semibold mb-2",children:"Search by Name"}),t.jsx("input",{type:"text",value:c,onChange:K=>o(K.target.value),className:"input-lg",placeholder:"Enter client name..."})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{type:"submit",disabled:b,className:"btn-search disabled:opacity-50 disabled:cursor-not-allowed",children:b?t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Searching..."]}):"Search"})})]}),x&&t.jsx("div",{className:"error-message",children:x})]})}),p&&t.jsx("div",{className:"card-main",children:b?t.jsxs("div",{className:"text-center py-6",children:[t.jsx("div",{className:"spinner spinner-md mx-auto"}),t.jsx("p",{className:"text-gray-700 font-semibold mt-3",children:"Searching..."})]}):d.length===0?t.jsxs("div",{className:"text-center py-6",children:[t.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsxs("p",{className:"text-gray-600",children:['No clients found matching "',c,'"']}),t.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Try a different search term"})]}):t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"mb-4",children:t.jsxs("p",{className:"text-gray-700 font-semibold",children:["Found ",d.length," client",d.length!==1?"s":""]})}),d.map(K=>t.jsx("div",{onClick:()=>ve(K.id||K.pid),className:"card-item",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:[K.fname," ",K.lname]}),t.jsxs("div",{className:"flex gap-6 text-sm text-gray-600",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"DOB:"})," ",me(K.DOB)]}),K.phone_cell&&t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Phone:"})," ",K.phone_cell]})]})]}),t.jsx("div",{className:"ml-4",children:t.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},K.id||K.pid))]})}),t.jsxs("div",{className:"card-main",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Client List"}),t.jsxs("button",{onClick:()=>U(!0),className:"btn-solid btn-solid-green btn-icon",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Client"]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>le("active"),className:`filter-btn-enhanced ${Q==="active"?"filter-btn-active-base bg-green-500":"filter-btn-inactive"}`,children:"Active"}),t.jsx("button",{onClick:()=>le("inactive"),className:`filter-btn-enhanced ${Q==="inactive"?"filter-btn-active-base bg-yellow-500":"filter-btn-inactive"}`,children:"Inactive"}),t.jsx("button",{onClick:()=>le("discharged"),className:`filter-btn-enhanced ${Q==="discharged"?"filter-btn-active-base bg-gray-500":"filter-btn-inactive"}`,children:"Discharged"}),t.jsx("button",{onClick:()=>le("all"),className:`filter-btn-enhanced ${Q==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Clients"})]})]}),E?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"spinner spinner-lg mx-auto"}),t.jsx("p",{className:"text-gray-700 font-semibold mt-4",children:"Loading clients..."})]}):k.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsxs("p",{className:"text-gray-600 text-lg",children:["No ",Q!=="all"?Q:""," clients found"]})]}):t.jsxs("div",{children:[t.jsx("div",{className:"mb-4",children:t.jsxs("p",{className:"text-gray-700 font-semibold",children:[k.length," ",Q!=="all"?Q:""," client",k.length!==1?"s":""]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:k.map(K=>t.jsxs("div",{onClick:()=>ve(K.pid),className:"card-item",children:[t.jsxs("div",{className:"flex justify-between items-start mb-2",children:[t.jsxs("h4",{className:"text-lg font-bold text-gray-800",children:[K.fname," ",K.lname]}),t.jsx("span",{className:ue(K.care_team_status),children:(K.care_team_status||"Unknown").toUpperCase()})]}),t.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Age:"})," ",K.age]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"DOB:"})," ",me(K.DOB)]}),(K.phone_cell||K.phone_home)&&t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Phone:"})," ",K.phone_cell||K.phone_home]})]})]},K.pid))})]})]})]}),$&&t.jsx(hf,{onClose:()=>U(!1),onClientCreated:he})]})}function tb(){const[i,c]=g.useState({age:[],gender:[],race:[],ethnicity:[]}),[o,d]=g.useState(!0);g.useEffect(()=>{(async()=>{try{const h=await Rp();c(h)}catch(h){console.error("Failed to fetch demographics:",h)}finally{d(!1)}})()},[]);const u=(b,h)=>{if(!b||b.length===0)return t.jsx("div",{className:"text-gray-500 text-sm text-center py-4",children:"No data available"});const x=b.reduce((v,p)=>v+p.count,0);return t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:h}),t.jsx("div",{className:"space-y-2",children:b.map((v,p)=>{const j=x>0?v.count/x*100:0;return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[t.jsx("span",{className:"text-gray-600",children:v.category}),t.jsx("span",{className:"text-gray-500 font-semibold",children:v.count})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${j}%`}})})]},p)})})]})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"card-main",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:"Reports"}),t.jsx("p",{className:"text-gray-600 text-xs",children:"Analytics and demographic insights"})]}),t.jsxs("div",{className:"card-main",children:[t.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-4",children:"Active Demographics"}),o?t.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(b=>t.jsxs("div",{className:"animate-pulse",children:[t.jsx("div",{className:"h-3 bg-gray-300 rounded w-20 mb-2"}),t.jsx("div",{className:"h-2 bg-gray-300 rounded"})]},b))}):t.jsxs("div",{className:"space-y-5",children:[t.jsx("div",{children:u(i.age,"Age Range")}),t.jsx("div",{children:u(i.gender,"Gender")}),t.jsx("div",{children:u(i.race,"Race")}),t.jsx("div",{children:u(i.ethnicity,"Ethnicity")})]})]})]})}function ab({currentDate:i,onDateClick:c}){const[o,d]=g.useState(new Date(i)),u=N=>{const k=N.getFullYear(),O=N.getMonth();return new Date(k,O+1,0).getDate()},b=N=>{const k=N.getFullYear(),O=N.getMonth();return new Date(k,O,1).getDay()},h=()=>{const N=u(o),k=b(o),O=[];for(let E=0;E<k;E++)O.push(null);for(let E=1;E<=N;E++)O.push(E);return O},x=()=>{const N=new Date(o);N.setMonth(N.getMonth()-1),d(N)},v=()=>{const N=new Date(o);N.setMonth(N.getMonth()+1),d(N)},p=N=>{if(!N)return;const k=new Date(o.getFullYear(),o.getMonth(),N);c(k)},j=N=>{if(!N)return!1;const k=new Date;return N===k.getDate()&&o.getMonth()===k.getMonth()&&o.getFullYear()===k.getFullYear()},f=N=>{if(!N)return!1;const k=new Date(o.getFullYear(),o.getMonth(),N),O=Q=>{const le=new Date(Q),$=le.getDay(),U=le.getDate()-$;return new Date(le.setDate(U))},E=O(k),H=O(i);return E.toDateString()===H.toDateString()},y=h(),S=["S","M","T","W","T","F","S"];return t.jsxs("div",{className:"select-none",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("button",{onClick:x,className:"p-1 hover:bg-gray-100 rounded transition-colors","aria-label":"Previous month",children:t.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:o.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),t.jsx("button",{onClick:v,className:"p-1 hover:bg-gray-100 rounded transition-colors","aria-label":"Next month",children:t.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),t.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[S.map((N,k)=>t.jsx("div",{className:"text-center text-xs font-medium text-gray-500 py-1",children:N},k)),y.map((N,k)=>{const O=j(N),E=f(N);return t.jsx("button",{onClick:()=>p(N),disabled:!N,className:`
                aspect-square flex items-center justify-center text-sm rounded-lg
                transition-colors
                ${N?"":"invisible"}
                ${O?"bg-blue-600 text-white font-bold hover:bg-blue-700":""}
                ${!O&&E?"bg-blue-100 text-blue-900 font-semibold":""}
                ${!O&&!E?"hover:bg-gray-100 text-gray-700":""}
              `,children:N},k)})]}),t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 text-xs text-gray-600 space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded"}),t.jsx("span",{children:"Today"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 bg-blue-100 border border-blue-300 rounded"}),t.jsx("span",{children:"Selected week"})]})]})]})}function ff({isOpen:i,onClose:c,onSave:o,initialDate:d,initialTime:u,providerId:b,providers:h,appointment:x}){const[v,p]=g.useState(!1),[j,f]=g.useState(null),[y,S]=g.useState(null),[N,k]=g.useState(null),[O,E]=g.useState(null),[H,Q]=g.useState(""),[le,$]=g.useState(""),[U,P]=g.useState(b||""),[ve,he]=g.useState(""),[me,ue]=g.useState(d||new Date().toISOString().split("T")[0]),[K,te]=g.useState(u||"09:00"),[Y,A]=g.useState(50),[_,T]=g.useState(""),[q,ne]=g.useState(""),[fe,C]=g.useState(""),[M,W]=g.useState(!1),[B,Z]=g.useState({mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1}),[re,pe]=g.useState("1"),[Ce,G]=g.useState("count"),[R,ce]=g.useState(10),[de,ge]=g.useState(""),[ie,I]=g.useState(!1),[je,we]=g.useState("single"),[Ue,qe]=g.useState(null),[ct,Lt]=g.useState([]),[Ai,Ti]=g.useState([]),[ft,bl]=g.useState([]),[rn,Wa]=g.useState(!1),[vl,yl]=g.useState("");g.useEffect(()=>{i&&(cn(),Mi())},[i]),g.useEffect(()=>{b&&P(b)},[b]),g.useEffect(()=>{d&&ue(d),u&&te(u)},[d,u]),g.useEffect(()=>{x&&i&&(Q(x.patientId||""),$(x.patientName||""),yl(x.patientName||""),P(x.providerId||""),he(x.categoryId||""),ue(x.eventDate||""),te(x.startTime?x.startTime.substring(0,5):""),A(x.duration||50),T(x.title||""),ne(x.comments||""),C(x.roomId||x.room||""),x.isRecurring&&x.recurrenceId?(I(!0),qe(x.recurrenceId),we("single")):(I(!1),qe(null)))},[x,i]);const cn=async()=>{try{const oe=await cf();Lt(oe.categories||[]),oe.categories&&oe.categories.length>0&&!x&&(he(oe.categories[0].id),oe.categories[0].defaultDuration>0&&A(oe.categories[0].defaultDuration/60))}catch(oe){console.error("Failed to load appointment categories:",oe),f("Failed to load appointment types")}},Mi=async()=>{try{const oe=await Pp();Ti(oe.rooms||[])}catch(oe){console.error("Failed to load rooms:",oe)}},Ri=async oe=>{if(yl(oe),oe.length<2){bl([]),Wa(!1);return}try{const $e=await ef(oe);bl($e||[]),Wa(!0)}catch($e){console.error("Patient search failed:",$e),bl([])}},Pa=oe=>{Q(oe.pid),$(`${oe.fname} ${oe.lname}`),yl(`${oe.fname} ${oe.lname}`),Wa(!1)},gt=oe=>{he(oe);const $e=ct.find(Qe=>Qe.id===parseInt(oe));$e&&$e.defaultDuration>0&&A($e.defaultDuration/60)},Ut=async(oe,$e=!1)=>{if(oe?.preventDefault(),p(!0),f(null),S(null),k(null),!H){f("Please select a patient"),p(!1);return}if(!U){f("Please select a provider"),p(!1);return}if(!ve){f("Please select an appointment type"),p(!1);return}if(M){if(Object.values(B).filter(Boolean).length===0){f("Please select at least one day for recurrence"),p(!1);return}if(Ce==="date"&&!de){f("Please select an end date for recurrence"),p(!1);return}if(Ce==="count"&&(!R||R<1)){f("Please enter a valid number of occurrences"),p(!1);return}}try{const Qe=K.includes(":")?`${K}:00`:`${K}:00:00`,Bt={patientId:parseInt(H),providerId:parseInt(U),categoryId:parseInt(ve),eventDate:me,startTime:Qe,duration:parseInt(Y),title:_||le,comments:q,room:fe,apptstatus:x?x.apptstatus:"-",overrideAvailability:$e};ie&&(Bt.seriesUpdate={scope:je,recurrenceId:Ue}),M&&!x&&(Bt.recurrence={enabled:!0,days:B,interval:parseInt(re),endType:Ce,endCount:Ce==="count"?parseInt(R):null,endDate:Ce==="date"?de:null}),console.log(x?"Updating appointment:":"Creating appointment:",Bt);const la=x?await df(x.id,Bt):await of(Bt);la.success?(S(x?"Appointment updated successfully!":"Appointment created successfully!"),o&&o(la.appointment),setTimeout(()=>{Ia()},1500)):f(la.message||`Failed to ${x?"update":"create"} appointment`)}catch(Qe){console.error(`Failed to ${x?"update":"create"} appointment:`,Qe),Qe.conflicts?E({conflicts:Qe.conflicts,totalOccurrences:Qe.totalOccurrences,conflictCount:Qe.conflictCount}):Qe.message&&Qe.message.includes("Provider is unavailable")?k(Qe.message):f(Qe.message||`Failed to ${x?"update":"create"} appointment`)}finally{p(!1)}},pt=()=>{k(null),Ut(null,!0)},zi=()=>{E(null),Ut(null,!0)},Oi=async()=>{if(!x)return;let oe=`Are you sure you want to delete this appointment for ${le}?`;if(ie&&(je==="all"?oe=`Are you sure you want to delete ALL occurrences in this recurring series for ${le}?`:je==="future"&&(oe=`Are you sure you want to delete this and all future occurrences for ${le}?`)),!!confirm(oe)){p(!0),f(null),S(null);try{const $e=ie?{scope:je,recurrenceId:Ue}:null,Qe=await uf(x.id,$e);if(Qe.success){const Bt=ie&&je!=="single"?`${Qe.deletedCount||"Multiple"} appointment(s) deleted successfully!`:"Appointment deleted successfully!";S(Bt),setTimeout(()=>{Ia(),o&&o()},1e3)}else f(Qe.message||"Failed to delete appointment")}catch($e){console.error("Failed to delete appointment:",$e),f($e.message||"Failed to delete appointment")}finally{p(!1)}}},Ia=()=>{Q(""),$(""),yl(""),he(""),T(""),ne(""),C(""),f(null),S(null),k(null),E(null),bl([]),Wa(!1),W(!1),Z({mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1}),pe("1"),G("count"),ce(10),ge(""),I(!1),we("single"),qe(null),c()};if(!i)return null;const jl=[15,30,50,90];return t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",style:{position:"fixed",top:0,left:0,right:0,bottom:0},children:t.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[t.jsx("div",{className:"fixed inset-0 bg-gray-900/60 backdrop-blur-md transition-opacity",onClick:Ia,"aria-hidden":"true"}),t.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-2xl w-full my-8 border border-gray-200 z-10",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-200 px-8 pt-6 bg-gradient-to-r from-blue-50 to-purple-50",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:x?"Edit Appointment":"New Appointment"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:x?"Update appointment details":"Schedule a new appointment"})]}),t.jsx("button",{onClick:Ia,className:"p-2 hover:bg-white/80 rounded-xl transition-all hover:scale-110",disabled:v,children:t.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"px-8 pb-8",children:[N&&t.jsx("div",{className:"mb-6 p-4 bg-amber-50 border-l-4 border-amber-500 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-amber-600",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-amber-700 font-medium mb-2",children:N}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{type:"button",onClick:pt,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white text-sm font-medium rounded-lg transition-colors",children:"Override and Book Anyway"}),t.jsx("button",{type:"button",onClick:()=>k(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-medium rounded-lg transition-colors",children:"Cancel"})]})]})]})}),O&&t.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-red-700 font-bold mb-2",children:"Scheduling Conflicts Detected"}),t.jsxs("p",{className:"text-red-600 text-sm mb-3",children:[O.conflictCount," of ",O.totalOccurrences," recurring appointments have conflicts:"]}),t.jsx("div",{className:"max-h-48 overflow-y-auto mb-4 space-y-2",children:O.conflicts.map((oe,$e)=>t.jsxs("div",{className:"bg-white border border-red-200 rounded p-2 text-sm",children:[t.jsxs("div",{className:"font-medium text-red-700",children:[new Date(oe.date).toLocaleDateString()," at ",oe.time]}),t.jsx("div",{className:"text-red-600",children:oe.reason})]},$e))}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{type:"button",onClick:zi,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors",children:"Create Anyway (Skip Conflicts)"}),t.jsx("button",{type:"button",onClick:()=>E(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-medium rounded-lg transition-colors",children:"Cancel"})]})]})]})}),j&&t.jsxs("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg text-red-700 flex items-start gap-3",children:[t.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),t.jsx("span",{children:j})]}),y&&t.jsxs("div",{className:"mb-6 p-4 bg-green-50 border-l-4 border-green-500 rounded-lg text-green-700 flex items-start gap-3",children:[t.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),t.jsx("span",{children:y})]}),ie&&t.jsx("div",{className:"mb-6 p-4 bg-blue-50 border-l-4 border-blue-500 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-blue-700 font-medium mb-2",children:"Recurring Appointment Series"}),t.jsx("p",{className:"text-blue-600 text-sm mb-3",children:"This appointment is part of a recurring series. Choose what to update:"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"radio",name:"seriesScope",value:"single",checked:je==="single",onChange:oe=>we(oe.target.value),className:"text-blue-600 focus:ring-blue-500"}),t.jsxs("span",{className:"text-sm text-blue-700",children:["Just this occurrence (",new Date(me).toLocaleDateString(),")"]})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"radio",name:"seriesScope",value:"future",checked:je==="future",onChange:oe=>we(oe.target.value),className:"text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-blue-700",children:"This and all future occurrences"})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"radio",name:"seriesScope",value:"all",checked:je==="all",onChange:oe=>we(oe.target.value),className:"text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-blue-700",children:"All occurrences in the series"})]})]})]})]})}),t.jsxs("form",{onSubmit:Ut,className:"space-y-6",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Client ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:vl,onChange:oe=>Ri(oe.target.value),placeholder:"Search by name...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),rn&&ft.length>0&&t.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:ft.map(oe=>t.jsxs("button",{type:"button",onClick:()=>Pa(oe),className:"w-full text-left px-4 py-3 hover:bg-blue-50 border-b border-gray-100 last:border-b-0",children:[t.jsxs("div",{className:"font-medium text-gray-900",children:[oe.fname," ",oe.lname]}),t.jsxs("div",{className:"text-sm text-gray-600",children:["DOB: ",oe.DOB,"  PID: ",oe.pid]})]},oe.pid))}),le&&t.jsxs("div",{className:"mt-2 text-sm text-green-600",children:["Selected: ",le]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Provider ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:U,onChange:oe=>P(oe.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[t.jsx("option",{value:"",children:"Select Provider"}),h.map(oe=>t.jsx("option",{value:oe.value,children:oe.label},oe.value))]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Appointment Type ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:ve,onChange:oe=>gt(oe.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[t.jsx("option",{value:"",children:"Select Type"}),ct.map(oe=>t.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Date ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"date",value:me,onChange:oe=>ue(oe.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Time ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"time",value:K,onChange:oe=>te(oe.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Duration (minutes) ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:jl.map(oe=>t.jsxs("button",{type:"button",onClick:()=>A(oe),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${Y===oe?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[oe,"m"]},oe))}),t.jsx("input",{type:"number",value:Y,onChange:oe=>A(oe.target.value),min:"5",step:"5",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),t.jsxs("select",{value:fe,onChange:oe=>C(oe.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[t.jsx("option",{value:"",children:"Select Location (Optional)"}),Ai.map(oe=>t.jsx("option",{value:oe.value,children:oe.label},oe.id))]})]})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[t.jsx("div",{className:"mb-4",children:t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx("input",{type:"checkbox",checked:M,onChange:oe=>W(oe.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),"Make this recurring"]})}),M&&t.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-blue-200",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Repeat on ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"sun",label:"Sun"},{key:"mon",label:"Mon"},{key:"tue",label:"Tue"},{key:"wed",label:"Wed"},{key:"thu",label:"Thu"},{key:"fri",label:"Fri"},{key:"sat",label:"Sat"}].map(oe=>t.jsx("button",{type:"button",onClick:()=>Z($e=>({...$e,[oe.key]:!$e[oe.key]})),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${B[oe.key]?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:oe.label},oe.key))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Frequency ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:re,onChange:oe=>pe(oe.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[t.jsx("option",{value:"1",children:"Weekly"}),t.jsx("option",{value:"2",children:"Every 2 weeks"}),t.jsx("option",{value:"3",children:"Every 3 weeks"}),t.jsx("option",{value:"4",children:"Every 4 weeks"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ends ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"radio",checked:Ce==="count",onChange:()=>G("count"),className:"text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"After"}),t.jsx("input",{type:"number",value:R,onChange:oe=>ce(parseInt(oe.target.value)||1),disabled:Ce!=="count",min:"1",max:"52",className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm disabled:bg-gray-100 focus:ring-2 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"occurrences"})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"radio",checked:Ce==="date",onChange:()=>G("date"),className:"text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"On"}),t.jsx("input",{type:"date",value:de,onChange:oe=>ge(oe.target.value),disabled:Ce!=="date",className:"px-2 py-1 border border-gray-300 rounded text-sm disabled:bg-gray-100 focus:ring-2 focus:ring-blue-500"})]})]})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title (Optional)"}),t.jsx("input",{type:"text",value:_,onChange:oe=>T(oe.target.value),placeholder:"Defaults to client name if left blank",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comments"}),t.jsx("textarea",{value:q,onChange:oe=>ne(oe.target.value),rows:3,placeholder:"Optional notes about this appointment",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{className:"flex gap-4 pt-6 mt-6 border-t border-gray-200",children:[x&&t.jsx("button",{type:"button",onClick:Oi,className:"px-6 py-3 bg-red-100 hover:bg-red-200 text-red-700 font-semibold rounded-xl transition-all hover:shadow-md",disabled:v,children:"Delete"}),t.jsx("button",{type:"button",onClick:Ia,className:"flex-1 px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold rounded-xl transition-all hover:shadow-md",disabled:v,children:"Cancel"}),t.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold rounded-xl transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",disabled:v,children:v?x?"Updating...":"Creating...":x?"Update Appointment":"Create Appointment"})]})]})]})]})]})})}function lb(){const[i,c]=g.useState("week"),[o,d]=g.useState(new Date),[u,b]=g.useState([]),[h,x]=g.useState([]),[v,p]=g.useState("all"),[j,f]=g.useState(!0),[y,S]=g.useState(null),[N,k]=g.useState({startHour:8,endHour:18,interval:15,viewType:"week"}),[O,E]=g.useState(!1),[H,Q]=g.useState(null),[le,$]=g.useState(null),[U,P]=g.useState(null),[ve,he]=g.useState(null),ue=(()=>{const R=[],ce=N.interval,de=60/ce;for(let ge=N.startHour;ge<N.endHour;ge++)for(let ie=0;ie<de;ie++){const I=ie*ce;R.push({hour:ge,minutes:I})}return R})();g.useEffect(()=>{(async()=>{try{const ce=await rf();console.log("Calendar settings response:",ce),ce.settings?(console.log("Setting calendar hours to:",ce.settings),k(ce.settings),ce.settings.viewType&&c(ce.settings.viewType)):console.log("No settings in response, using defaults")}catch(ce){console.error("Failed to load calendar settings:",ce)}})()},[]),g.useEffect(()=>{(async()=>{try{const ce=await go();x(ce.providers||[])}catch(ce){console.error("Failed to load providers:",ce)}})()},[]),g.useEffect(()=>{K()},[o,v,i]);const K=async()=>{f(!0),S(null);try{const{startDate:R,endDate:ce}=te();console.log("Loading appointments:",{startDate:R,endDate:ce,currentDate:o,view:i});const de=await po(R,ce,v);console.log("Appointments loaded:",de.appointments),b(de.appointments||[])}catch(R){console.error("Failed to load appointments:",R),S("Failed to load appointments")}finally{f(!1)}},te=()=>{const R=new Date(o),ce=new Date(o);if(i==="week"){const de=R.getDay(),ge=R.getDate()-de;R.setDate(ge),R.setHours(0,0,0,0),ce.setDate(R.getDate()+6),ce.setHours(23,59,59,999)}else i==="day"?(R.setHours(0,0,0,0),ce.setHours(23,59,59,999)):i==="month"&&(R.setDate(1),R.setHours(0,0,0,0),ce.setMonth(ce.getMonth()+1),ce.setDate(0),ce.setHours(23,59,59,999));return{startDate:R.toISOString().split("T")[0],endDate:ce.toISOString().split("T")[0]}},Y=()=>{const R=new Date(o),ce=R.getDay(),de=R.getDate()-ce;R.setDate(de),R.setHours(0,0,0,0);const ge=Array.from({length:7},(ie,I)=>new Date(R.getTime()+I*24*60*60*1e3));return console.log("Week days:",ge.map(ie=>ie.toISOString().split("T")[0])),ge},A=()=>{const R=new Date(o);i==="week"?R.setDate(R.getDate()-7):i==="day"?R.setDate(R.getDate()-1):i==="month"&&R.setMonth(R.getMonth()-1),d(R)},_=()=>{const R=new Date(o);i==="week"?R.setDate(R.getDate()+7):i==="day"?R.setDate(R.getDate()+1):i==="month"&&R.setMonth(R.getMonth()+1),d(R)},T=()=>{d(new Date)},q=R=>{if(!R)return"";const[ce,de]=R.split(":"),ge=parseInt(ce),ie=ge>=12?"PM":"AM";return`${ge===0?12:ge>12?ge-12:ge}:${de} ${ie}`},ne=(R,ce,de)=>{const ge=R.toISOString().split("T")[0];return u.filter(ie=>{if(ie.eventDate!==ge)return!1;const[I,je]=ie.startTime.split(":"),we=parseInt(I),Ue=parseInt(je);return we===ce&&Ue===de})},fe=R=>R.duration?Math.ceil(R.duration/N.interval):1,C=R=>{const[ce,de]=R.startTime.split(":").map(Number),ge=ce*60+de,ie=N.startHour*60,je=(ge-ie)/N.interval,we=60,Ue=je*we,Lt=(R.duration||0)/N.interval*we;return{top:Ue,height:Lt}},M=R=>{const ce=R.toISOString().split("T")[0];return u.filter(de=>de.eventDate===ce)},W=R=>{const ce=R.toISOString().split("T")[0];return u.filter(de=>de.eventDate===ce)},B=()=>{const R=o.getFullYear(),ce=o.getMonth(),de=new Date(R,ce,1),ge=de.getDay(),ie=new Date(de);return ie.setDate(ie.getDate()-ge),ie.setHours(0,0,0,0),Array.from({length:42},(je,we)=>new Date(ie.getTime()+we*24*60*60*1e3))},Z=()=>{if(i==="week"){const R=Y(),ce=R[0],de=R[6];return`${ce.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${de.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}else return i==="day"?o.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):o.toLocaleDateString("en-US",{month:"long",year:"numeric"})},re=(R=null,ce=null,de=null)=>{he(null),Q(R||o.toISOString().split("T")[0]),$(ce),P(de||(v!=="all"?v:null)),E(!0)},pe=(R,ce)=>{ce.stopPropagation(),he(R),Q(null),$(null),P(null),E(!0)},Ce=(R,ce,de)=>{const ge=R.toISOString().split("T")[0],ie=`${ce.toString().padStart(2,"0")}:${de.toString().padStart(2,"0")}`;re(ge,ie,v!=="all"?v:null)},G=R=>{console.log("New appointment created:",R),K()};return t.jsxs("div",{className:"w-full",children:[t.jsxs("div",{className:"glass-card p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Calendar"}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:()=>re(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Appointment"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>c("day"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="day"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Day"}),t.jsx("button",{onClick:()=>c("week"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="week"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Week"}),t.jsx("button",{onClick:()=>c("month"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="month"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Month"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:A,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsx("button",{onClick:_,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),t.jsx("button",{onClick:T,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Today"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:Z()})]})]}),y&&t.jsx("div",{className:"glass-card-sm bg-red-100/60 border-red-300/50 text-red-700 px-4 py-3 mb-6",children:y}),t.jsxs("div",{className:"flex gap-6",children:[t.jsxs("div",{className:"w-80 flex-shrink-0 space-y-6",children:[t.jsx("div",{className:"glass-card p-4",children:t.jsx(ab,{currentDate:o,onDateClick:d})}),t.jsxs("div",{className:"glass-card p-4",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Providers"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("button",{onClick:()=>p("all"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors ${v==="all"?"bg-blue-100 text-blue-900 font-medium":"hover:bg-gray-100 text-gray-700"}`,children:"All Providers"}),h.map(R=>t.jsx("button",{onClick:()=>p(R.value),className:`w-full text-left px-3 py-2 rounded-lg transition-colors ${v===R.value?"bg-blue-100 text-blue-900 font-medium":"hover:bg-gray-100 text-gray-700"}`,children:R.label},R.value))]})]})]}),t.jsxs("div",{className:"flex-1",children:[j?t.jsx("div",{className:"glass-card p-12 text-center",children:t.jsx("div",{className:"text-gray-700",children:"Loading appointments..."})}):i==="week"&&t.jsxs("div",{className:"glass-card overflow-hidden",children:[t.jsxs("div",{className:"flex border-b border-white/30",children:[t.jsx("div",{className:"w-20 flex-shrink-0 p-4 bg-white/20 border-r border-white/30 font-semibold text-gray-700",children:"Time"}),t.jsx("div",{className:"flex-1 flex",children:Y().map((R,ce)=>{const de=R.toDateString()===new Date().toDateString();return t.jsxs("div",{className:`flex-1 p-4 border-r border-white/30 text-center ${de?"bg-blue-100/40":"bg-white/20"}`,children:[t.jsx("div",{className:"text-sm text-gray-600",children:R.toLocaleDateString("en-US",{weekday:"short"})}),t.jsx("div",{className:`text-lg font-semibold ${de?"text-blue-600":"text-gray-900"}`,children:R.getDate()})]},ce)})})]}),t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"w-20 flex-shrink-0 border-r border-white/30 bg-white/20",children:ue.map(R=>t.jsxs("div",{className:"h-[60px] p-2 border-b border-white/30 text-xs text-gray-700 font-medium",children:[R.hour===0?"12":R.hour<12?R.hour:R.hour===12?"12":R.hour-12,":",R.minutes.toString().padStart(2,"0")," ",R.hour<12?"AM":"PM"]},`time-${R.hour}-${R.minutes}`))}),t.jsx("div",{className:"flex-1 flex",children:Y().map((R,ce)=>{const de=M(R),ge=ue.length*60;return t.jsxs("div",{className:"flex-1 border-r border-white/30 relative",style:{height:`${ge}px`},children:[ue.map(ie=>t.jsx("div",{onClick:()=>Ce(R,ie.hour,ie.minutes),className:"absolute w-full h-[60px] border-b border-white/30 hover:bg-white/10 cursor-pointer transition-colors",style:{top:`${ue.findIndex(I=>I.hour===ie.hour&&I.minutes===ie.minutes)*60}px`}},`slot-${ie.hour}-${ie.minutes}`)),de.map(ie=>{const{top:I,height:je}=C(ie);if(ie.categoryType===1){const ct=ie.categoryColor||"#F3F4F6";return t.jsx("div",{className:"absolute left-0 right-0 pointer-events-none z-0",style:{top:`${I}px`,height:`${je}px`,backgroundColor:`${ct}40`,backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(0,0,0,.02) 10px, rgba(0,0,0,.02) 20px)"},title:`${ie.categoryName}${ie.comments?": "+ie.comments:""}`},ie.id)}const Ue=ie.categoryColor||"#DBEAFE",qe=ie.categoryColor?`${ie.categoryColor}80`:"#93C5FD80";return t.jsxs("div",{onClick:ct=>pe(ie,ct),className:"absolute left-1 right-1 px-2 py-1 rounded-lg text-xs border hover:opacity-80 hover:shadow-md transition-all cursor-pointer z-10 overflow-hidden",style:{top:`${I}px`,height:`${je}px`,backgroundColor:`${Ue}B3`,borderColor:qe},children:[t.jsx("div",{className:"font-semibold text-gray-900",children:q(ie.startTime)}),je>30&&t.jsx("div",{className:"text-gray-800 truncate",children:ie.patientName}),je>50&&t.jsx("div",{className:"text-gray-700 truncate text-[10px]",children:ie.categoryName}),je>70&&ie.room&&t.jsx("div",{className:"text-gray-600 truncate text-[10px]",children:ie.room})]},ie.id)})]},ce)})})]})]}),!j&&i==="day"&&t.jsxs("div",{className:"glass-card overflow-hidden",children:[t.jsxs("div",{className:"grid grid-cols-[150px_1fr] border-b border-white/30",children:[t.jsx("div",{className:"p-4 bg-white/20 border-r border-white/30 font-semibold text-gray-700",children:"Time"}),(()=>{const R=o.toDateString()===new Date().toDateString();return t.jsxs("div",{className:`p-4 border-r border-white/30 text-center ${R?"bg-blue-100/40":"bg-white/20"}`,children:[t.jsx("div",{className:"text-sm text-gray-600",children:o.toLocaleDateString("en-US",{weekday:"short"})}),t.jsx("div",{className:`text-lg font-semibold ${R?"text-blue-600":"text-gray-900"}`,children:o.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})})()]}),ue.map(R=>t.jsxs("div",{className:"grid grid-cols-[150px_1fr] border-b border-white/30",children:[t.jsxs("div",{className:"p-3 border-r border-white/30 bg-white/20 text-sm text-gray-700 font-medium",children:[R.hour===0?"12":R.hour<12?R.hour:R.hour===12?"12":R.hour-12,":",R.minutes.toString().padStart(2,"0")," ",R.hour<12?"AM":"PM"]}),(()=>{const ce=ne(o,R.hour,R.minutes);return t.jsx("div",{onClick:()=>Ce(o,R.hour,R.minutes),className:"p-2 border-r border-white/30 hover:bg-white/10 cursor-pointer transition-colors min-h-[60px]",children:ce.map(de=>{const ge=de.categoryType===1,I=fe(de)*60-8,je=de.categoryColor||(ge?"#E5E7EB":"#DBEAFE"),we=de.categoryColor?`${de.categoryColor}80`:ge?"#9CA3AF80":"#93C5FD80";return t.jsx("div",{onClick:Ue=>pe(de,Ue),className:`mb-1 px-2 py-1 rounded-lg text-xs border hover:opacity-80 hover:shadow-md transition-all cursor-pointer ${ge?"border-dashed":""}`,style:{height:`${I}px`,backgroundColor:ge?`${je}99`:`${je}B3`,borderColor:we,backgroundImage:ge?"repeating-linear-gradient(45deg, transparent, transparent 4px, rgba(255,255,255,.3) 4px, rgba(255,255,255,.3) 8px)":"none"},children:ge?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"font-semibold text-gray-900 flex items-center gap-1",children:[t.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),de.categoryName]}),de.comments&&t.jsx("div",{className:"text-gray-700 truncate text-[10px] italic",children:de.comments})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"font-semibold text-gray-900",children:q(de.startTime)}),t.jsx("div",{className:"text-gray-800 truncate",children:de.patientName}),t.jsx("div",{className:"text-gray-700 truncate text-[10px]",children:de.categoryName}),de.room&&t.jsx("div",{className:"text-gray-600 truncate text-[10px]",children:de.room})]})},de.id)})})})()]},`${R.hour}-${R.minutes}`))]}),!j&&i==="month"&&t.jsxs("div",{className:"glass-card overflow-hidden",children:[t.jsx("div",{className:"grid grid-cols-7 border-b border-white/30",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(R=>t.jsx("div",{className:"p-4 bg-white/20 border-r border-white/30 text-center font-semibold text-gray-700",children:R},R))}),t.jsx("div",{className:"grid grid-cols-7",children:B().map((R,ce)=>{const de=R.toDateString()===new Date().toDateString(),ge=R.getMonth()===o.getMonth(),ie=W(R);return t.jsxs("div",{className:`min-h-[120px] border-r border-b border-white/30 p-2 hover:bg-white/10 cursor-pointer transition-colors ${ge?"":"bg-white/5"}`,children:[t.jsxs("div",{className:"flex justify-between items-start mb-2",children:[t.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full text-sm font-semibold ${de?"bg-blue-600 text-white":ge?"text-gray-900":"text-gray-400"}`,children:R.getDate()}),ie.length>0&&t.jsx("span",{className:"text-xs bg-blue-100 text-blue-900 px-2 py-0.5 rounded-full font-medium",children:ie.length})]}),t.jsxs("div",{className:"space-y-1",children:[ie.slice(0,3).map(I=>{const je=I.categoryType===1,we=I.categoryColor||(je?"#E5E7EB":"#DBEAFE"),Ue=I.categoryColor?`${I.categoryColor}80`:je?"#9CA3AF80":"#93C5FD80";return t.jsx("div",{onClick:qe=>pe(I,qe),className:`px-2 py-1 rounded text-xs border truncate hover:opacity-80 hover:shadow-md transition-all cursor-pointer ${je?"border-dashed":""}`,style:{backgroundColor:je?`${we}99`:`${we}B3`,borderColor:Ue,backgroundImage:je?"repeating-linear-gradient(45deg, transparent, transparent 4px, rgba(255,255,255,.3) 4px, rgba(255,255,255,.3) 8px)":"none"},children:je?t.jsxs("div",{className:"font-semibold text-gray-900 flex items-center gap-1",children:[t.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 715.636 5.636m12.728 12.728L5.636 5.636"})}),t.jsx("span",{className:"truncate",children:I.categoryName})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"font-semibold text-gray-900",children:q(I.startTime)}),t.jsx("div",{className:"text-gray-800 truncate",children:I.patientName}),I.room&&t.jsx("div",{className:"text-gray-600 truncate text-[10px]",children:I.room})]})},I.id)}),ie.length>3&&t.jsxs("div",{className:"text-xs text-gray-600 pl-2",children:["+",ie.length-3," more"]})]})]},ce)})})]})]})]}),t.jsx(ff,{isOpen:O,onClose:()=>E(!1),onSave:G,initialDate:H,initialTime:le,providerId:U,providers:h,appointment:ve})]})}function sb(){const[i,c]=g.useState({startHour:8,endHour:17,interval:15,viewType:"week",eventColor:"1",providersSeeAll:!0}),[o,d]=g.useState(!0),[u,b]=g.useState(!1),[h,x]=g.useState(null);g.useEffect(()=>{v()},[]);const v=async()=>{d(!0);try{const f=await rf();f.settings&&c({startHour:f.settings.startHour||8,endHour:f.settings.endHour||17,interval:f.settings.interval||15,viewType:f.settings.viewType||"week",eventColor:f.settings.eventColor||"1",providersSeeAll:f.settings.providersSeeAll!==void 0?f.settings.providersSeeAll:!0})}catch(f){console.error("Failed to load calendar settings:",f),x({type:"error",text:"Failed to load settings"})}finally{d(!1)}},p=async()=>{b(!0),x(null);try{await Wp(i),x({type:"success",text:"Settings saved successfully!"})}catch(f){console.error("Failed to save calendar settings:",f),x({type:"error",text:"Failed to save settings"})}finally{b(!1)}},j=(f,y)=>{c(S=>({...S,[f]:y}))};return o?t.jsx("div",{className:"glass-card p-12 text-center",children:t.jsx("div",{className:"text-gray-700",children:"Loading calendar settings..."})}):t.jsxs("div",{className:"glass-card p-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Calendar Settings"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Configure calendar display and behavior"})]}),h&&t.jsx("div",{className:`mb-6 px-4 py-3 rounded-lg ${h.type==="success"?"bg-green-100/60 border-green-300/50 text-green-700":"bg-red-100/60 border-red-300/50 text-red-700"} border`,children:h.text}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Calendar Starting Hour"}),t.jsx("select",{value:i.startHour,onChange:f=>j("startHour",parseInt(f.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:Array.from({length:24},(f,y)=>t.jsx("option",{value:y,children:y===0?"12 AM":y<12?`${y} AM`:y===12?"12 PM":`${y-12} PM`},y))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Calendar Ending Hour"}),t.jsx("select",{value:i.endHour,onChange:f=>j("endHour",parseInt(f.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:Array.from({length:24},(f,y)=>t.jsx("option",{value:y,children:y===0?"12 AM":y<12?`${y} AM`:y===12?"12 PM":`${y-12} PM`},y))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Calendar Interval (minutes)"}),t.jsxs("select",{value:i.interval,onChange:f=>j("interval",parseInt(f.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:[t.jsx("option",{value:15,children:"15 minutes"}),t.jsx("option",{value:30,children:"30 minutes"}),t.jsx("option",{value:60,children:"60 minutes"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Calendar View"}),t.jsxs("select",{value:i.viewType,onChange:f=>j("viewType",f.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:[t.jsx("option",{value:"day",children:"Day"}),t.jsx("option",{value:"week",children:"Week"}),t.jsx("option",{value:"month",children:"Month"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appointment/Event Color"}),t.jsxs("select",{value:i.eventColor,onChange:f=>j("eventColor",f.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:[t.jsx("option",{value:"1",children:"Category Color Schema"}),t.jsx("option",{value:"2",children:"Facility Color Schema"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:i.providersSeeAll,onChange:f=>j("providersSeeAll",f.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),t.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Providers See Entire Calendar"})]}),t.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-8",children:"Allow providers to see all appointments, not just their own"})]})]}),t.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:t.jsx("button",{onClick:p,disabled:u,className:`px-6 py-3 rounded-lg font-medium transition-colors ${u?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:u?"Saving...":"Save Settings"})})]})}function nb(){const[i,c]=g.useState([]),[o,d]=g.useState(!0),[u,b]=g.useState(null),[h,x]=g.useState(!1),[v,p]=g.useState(!1),[j,f]=g.useState(!1),[y,S]=g.useState(null),[N,k]=g.useState({name:"",parent_id:null}),[O,E]=g.useState(!1),[H,Q]=g.useState(null);g.useEffect(()=>{le()},[]);const le=async()=>{try{d(!0);const A=await fetch("/custom/api/document_categories.php",{credentials:"include"});if(!A.ok)throw new Error("Failed to fetch categories");const _=await A.json();c(_.categories||[]),b(null)}catch(A){console.error("Error fetching categories:",A),b(A.message)}finally{d(!1)}},$=A=>{const _=[],T={};return A.forEach(q=>{T[q.id]={...q,children:[]}}),A.forEach(q=>{q.parent&&T[q.parent]?T[q.parent].children.push(T[q.id]):_.push(T[q.id])}),_},U=(A,_=0)=>{let T=[];return A.forEach(q=>{T.push({...q,level:_}),q.children&&q.children.length>0&&(T=T.concat(U(q.children,_+1)))}),T},P=()=>{if(!y)return i;const A=new Set([y.id]),_=$(i),T=ne=>{ne.children&&ne.children.forEach(fe=>{A.add(fe.id),T(fe)})},q=ne=>{ne.forEach(fe=>{fe.id===y.id&&T(fe),fe.children&&q(fe.children)})};return q(_),i.filter(ne=>!A.has(ne.id))},ve=()=>{k({name:"",parent_id:null}),Q(null),x(!0)},he=A=>{S(A),k({name:A.name,parent_id:A.parent?parseInt(A.parent):null}),Q(null),p(!0)},me=A=>{S(A),Q(null),f(!0)},ue=async()=>{if(!N.name||N.name.trim()===""){Q("Category name is required");return}try{E(!0),Q(null);const A=await fetch("/custom/api/document_categories.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:N.name.trim(),parent_id:N.parent_id||null})}),_=await A.json();if(!A.ok)throw new Error(_.error||"Failed to create category");await le(),x(!1)}catch(A){console.error("Error creating category:",A),Q(A.message)}finally{E(!1)}},K=async()=>{if(!N.name||N.name.trim()===""){Q("Category name is required");return}try{E(!0),Q(null);const A=await fetch("/custom/api/document_categories.php",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:y.id,name:N.name.trim(),parent_id:N.parent_id||null})}),_=await A.json();if(!A.ok)throw new Error(_.error||"Failed to update category");await le(),p(!1)}catch(A){console.error("Error updating category:",A),Q(A.message)}finally{E(!1)}},te=async()=>{try{E(!0),Q(null);const A=await fetch(`/custom/api/document_categories.php?id=${y.id}`,{method:"DELETE",credentials:"include"}),_=await A.json();if(!A.ok)throw new Error(_.error||"Failed to delete category");await le(),f(!1)}catch(A){console.error("Error deleting category:",A),Q(A.message)}finally{E(!1)}},Y=()=>{x(!1),p(!1),f(!1),S(null),k({name:"",parent_id:null}),Q(null)};return o?t.jsx("div",{className:"glass-card p-8",children:t.jsx("div",{className:"text-center text-gray-700",children:"Loading categories..."})}):u?t.jsxs("div",{className:"glass-card p-8",children:[t.jsxs("div",{className:"text-center text-red-600",children:["Error: ",u]}),t.jsx("div",{className:"text-center mt-4",children:t.jsx("button",{onClick:le,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})})]}):t.jsxs("div",{className:"glass-card p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Document Categories"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Manage categories for organizing client documents"})]}),t.jsx("button",{onClick:ve,className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"+ Add Category"})]}),i.length===0?t.jsx("div",{className:"text-center py-8 text-gray-500",children:'No categories defined. Click "Add Category" to create one.'}):t.jsx("div",{className:"space-y-2",children:U($(i)).map(A=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",style:{marginLeft:`${A.level*2}rem`},children:[t.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[A.level>0&&t.jsx("span",{className:"text-gray-400",children:""}),t.jsx("div",{className:"font-medium text-gray-900",children:A.name}),A.children&&A.children.length>0&&t.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:[A.children.length," ",A.children.length===1?"subcategory":"subcategories"]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>he(A),className:"px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"Edit"}),t.jsx("button",{onClick:()=>me(A),className:"px-3 py-1.5 text-sm font-medium text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",children:"Delete"})]})]},A.id))}),h&&Ja.createPortal(t.jsx("div",{className:"modal-backdrop",children:t.jsxs("div",{className:"modal-container max-w-lg",children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Add Category"}),t.jsx("button",{onClick:Y,className:"text-gray-500 hover:text-gray-700 transition-colors",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("form",{onSubmit:A=>{A.preventDefault(),ue()},className:"modal-body",children:[H&&t.jsx("div",{className:"error-message",children:H}),t.jsxs("div",{className:"mb-4",children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Category Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:N.name,onChange:A=>k({...N,name:A.target.value}),placeholder:"e.g., Consent Forms, Insurance Documents",className:"input-field",autoFocus:!0})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Parent Category (Optional)"}),t.jsxs("select",{value:N.parent_id||"",onChange:A=>{const _=A.target.value;k({...N,parent_id:_?parseInt(_,10):null})},className:"input-field",children:[t.jsx("option",{value:"",children:"None (Top Level)"}),i.map(A=>t.jsx("option",{value:A.id,children:A.name},A.id))]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a parent to create a subcategory"})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",onClick:Y,disabled:O,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:O,className:"btn-action btn-primary btn-compact disabled:opacity-50",children:O?"Creating...":"Create Category"})]})]})]})}),document.body),v&&Ja.createPortal(t.jsx("div",{className:"modal-backdrop",children:t.jsxs("div",{className:"modal-container max-w-lg",children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Category"}),t.jsx("button",{onClick:Y,className:"text-gray-500 hover:text-gray-700 transition-colors",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("form",{onSubmit:A=>{A.preventDefault(),K()},className:"modal-body",children:[H&&t.jsx("div",{className:"error-message",children:H}),t.jsxs("div",{className:"mb-4",children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Category Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:N.name,onChange:A=>k({...N,name:A.target.value}),className:"input-field",autoFocus:!0})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Parent Category (Optional)"}),t.jsxs("select",{value:N.parent_id||"",onChange:A=>{const _=A.target.value;k({...N,parent_id:_?parseInt(_,10):null})},className:"input-field",children:[t.jsx("option",{value:"",children:"None (Top Level)"}),P().map(A=>t.jsx("option",{value:A.id,children:A.name},A.id))]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a parent to make this a subcategory"})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",onClick:Y,disabled:O,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:O,className:"btn-action btn-primary btn-compact disabled:opacity-50",children:O?"Saving...":"Save Changes"})]})]})]})}),document.body),j&&Ja.createPortal(t.jsx("div",{className:"modal-backdrop",children:t.jsxs("div",{className:"modal-container max-w-lg",children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Delete Category"}),t.jsx("button",{onClick:Y,className:"text-gray-500 hover:text-gray-700 transition-colors",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("form",{onSubmit:A=>{A.preventDefault(),te()},className:"modal-body",children:[H&&t.jsx("div",{className:"error-message",children:H}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to delete the category ",t.jsxs("strong",{children:['"',y?.name,'"']}),"?"]}),t.jsx("p",{className:"text-sm text-gray-600",children:"Note: You cannot delete a category that has documents or subcategories."})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",onClick:Y,disabled:O,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:O,className:"btn-action btn-danger btn-compact disabled:opacity-50",children:O?"Deleting...":"Delete Category"})]})]})]})}),document.body)]})}function ib(){const[i,c]=g.useState([]),[o,d]=g.useState([]),[u,b]=g.useState([]),[h,x]=g.useState(!0),[v,p]=g.useState(null),[j,f]=g.useState(""),[y,S]=g.useState("active"),[N,k]=g.useState(!1),[O,E]=g.useState(!1),[H,Q]=g.useState(null),[le,$]=g.useState(!1),[U,P]=g.useState(null),[ve,he]=g.useState(!1),[me,ue]=g.useState({username:"",password:"",fname:"",mname:"",lname:"",title:"",suffix:"",email:"",phone:"",phonecell:"",npi:"",federaltaxid:"",taxonomy:"",state_license_number:"",supervisor_id:"",supervisor_ids:[],facility_id:"",authorized:!1,is_supervisor:!1,active:!0,calendar:!1,portal_user:!1,notes:""});g.useEffect(()=>{K(),te(),Y()},[y]);const K=async()=>{try{x(!0);const Z=await fetch(`/custom/api/users.php?action=list&status=${y}`,{credentials:"include"});if(!Z.ok)throw new Error("Failed to fetch users");const re=await Z.json();c(re.users||[]),p(null)}catch(Z){console.error("Error fetching users:",Z),p(Z.message)}finally{x(!1)}},te=async()=>{try{const Z=await fetch("/custom/api/users.php?action=supervisors",{credentials:"include"});if(!Z.ok)return;const re=await Z.json();d(re.supervisors||[])}catch(Z){console.error("Error fetching supervisors:",Z)}},Y=async()=>{try{const Z=await fetch("/custom/api/users.php?action=facilities",{credentials:"include"});if(!Z.ok)return;const re=await Z.json();b(re.facilities||[])}catch(Z){console.error("Error fetching facilities:",Z)}},A=()=>{ue({username:"",password:"",fname:"",mname:"",lname:"",title:"",suffix:"",email:"",phone:"",phonecell:"",npi:"",federaltaxid:"",taxonomy:"",state_license_number:"",supervisor_id:"",supervisor_ids:[],facility_id:"",authorized:!1,is_supervisor:!1,active:!0,calendar:!1,portal_user:!1,notes:""}),he(!1),P(null)},_=()=>{A(),k(!0)},T=async Z=>{console.log("handleEdit called for user:",Z),Q(Z),P(null);try{console.log("Fetching user details for ID:",Z.id);const re=await fetch(`/custom/api/users.php?action=get&id=${Z.id}`,{credentials:"include"});console.log("Response status:",re.status),console.log("Response headers:",re.headers.get("content-type"));const pe=await re.text();if(console.log("Response text:",pe),!pe)throw new Error("Empty response from server. Check server logs.");let Ce;try{Ce=JSON.parse(pe)}catch(de){throw console.error("JSON parse error:",de),new Error(`Invalid JSON response: ${pe.substring(0,100)}`)}if(!re.ok)throw new Error(Ce.error||"Failed to fetch user details");const G=Ce.user;if(!G)throw new Error("No user data in response");const R=await fetch(`/custom/api/users.php?action=user_supervisors&id=${Z.id}`,{credentials:"include"});let ce=[];R.ok&&(ce=((await R.json()).supervisor_ids||[]).map(ge=>String(ge))),ue({id:G.id,username:G.username||"",password:"",fname:G.fname||"",mname:G.mname||"",lname:G.lname||"",title:G.title||"",suffix:G.suffix||"",email:G.email||"",phone:G.phone||"",phonecell:G.phonecell||"",npi:G.npi||"",federaltaxid:G.federaltaxid||"",taxonomy:G.taxonomy||"",state_license_number:G.state_license_number||"",supervisor_id:G.supervisor_id||"",supervisor_ids:ce,facility_id:G.facility_id||"",authorized:G.authorized==="1"||G.authorized===1,is_supervisor:G.is_supervisor==="1"||G.is_supervisor===1,active:G.active==="1"||G.active===1,calendar:G.calendar==="1"||G.calendar===1,portal_user:G.portal_user==="1"||G.portal_user===1,notes:G.notes||""}),E(!0)}catch(re){console.error("Error fetching user details:",re),alert("Failed to load user details: "+re.message+`

Check the browser console and server logs for more details.`),P(re.message)}},q=async()=>{if(!me.username||!me.password||!me.fname||!me.lname){P("Username, password, first name, and last name are required");return}try{$(!0),P(null);const Z=await fetch("/custom/api/users.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(me)}),re=await Z.json();if(!Z.ok)throw new Error(re.error||"Failed to create user");await K(),await te(),k(!1),A()}catch(Z){console.error("Error creating user:",Z),P(Z.message)}finally{$(!1)}},ne=async()=>{if(!me.fname||!me.lname){P("First name and last name are required");return}try{$(!0),P(null);const Z=await fetch("/custom/api/users.php",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(me)}),re=await Z.json();if(!Z.ok)throw new Error(re.error||"Failed to update user");await K(),await te(),E(!1),A()}catch(Z){console.error("Error updating user:",Z),P(Z.message)}finally{$(!1)}},fe=async Z=>{if(confirm("Are you sure you want to deactivate this user?"))try{if(!(await fetch(`/custom/api/users.php?id=${Z}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to deactivate user");await K()}catch(re){console.error("Error deactivating user:",re),alert("Failed to deactivate user: "+re.message)}},C=()=>{k(!1),E(!1),Q(null),A()},M=(Z,re)=>{ue(pe=>({...pe,[Z]:re}))},W=Z=>{const re=String(Z);ue(pe=>{const Ce=pe.supervisor_ids||[],G=Ce.includes(re);return{...pe,supervisor_ids:G?Ce.filter(R=>R!==re):[...Ce,re]}})},B=i.filter(Z=>{const re=j.toLowerCase();return Z.fname?.toLowerCase().includes(re)||Z.lname?.toLowerCase().includes(re)||Z.username?.toLowerCase().includes(re)||Z.email?.toLowerCase().includes(re)});return h?t.jsx("div",{className:"glass-card p-8",children:t.jsx("div",{className:"text-center text-gray-700",children:"Loading users..."})}):v?t.jsxs("div",{className:"glass-card p-8",children:[t.jsxs("div",{className:"text-center text-red-600",children:["Error: ",v]}),t.jsx("div",{className:"text-center mt-4",children:t.jsx("button",{onClick:K,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})})]}):t.jsxs("div",{className:"glass-card p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"User Management"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Manage system users and providers"})]}),t.jsxs("button",{onClick:_,className:"btn-solid btn-solid-green btn-icon",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add User"]})]}),t.jsx("div",{className:"mb-6",children:t.jsx("input",{type:"text",placeholder:"Search by name, username, or email...",value:j,onChange:Z=>f(Z.target.value),className:"input-lg"})}),t.jsxs("div",{className:"flex gap-3 mb-6",children:[t.jsx("button",{onClick:()=>S("active"),className:`filter-btn-enhanced ${y==="active"?"filter-btn-active-base bg-green-500":"filter-btn-inactive"}`,children:"Active"}),t.jsx("button",{onClick:()=>S("inactive"),className:`filter-btn-enhanced ${y==="inactive"?"filter-btn-active-base bg-red-500":"filter-btn-inactive"}`,children:"Inactive"}),t.jsx("button",{onClick:()=>S("all"),className:`filter-btn-enhanced ${y==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Users"})]}),B.length>0&&t.jsx("div",{className:"mb-4",children:t.jsxs("p",{className:"text-gray-700 font-semibold",children:[B.length," user",B.length!==1?"s":""]})}),B.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),t.jsxs("p",{className:"text-gray-600 text-lg",children:["No ",y!=="all"?y:""," users found"]})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B.map(Z=>t.jsxs("div",{className:"card-item",children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"text-base font-bold text-gray-800 leading-tight",children:[Z.fname," ",Z.lname]}),Z.title&&t.jsx("p",{className:"text-xs text-gray-600",children:Z.title})]}),t.jsx("span",{className:Z.active==="1"?"badge-solid-success":"badge-solid-danger",children:Z.active==="1"?"ACTIVE":"INACTIVE"})]}),t.jsxs("div",{className:"space-y-0.5 text-sm text-gray-600 mb-2",children:[(Z.phonecell||Z.phone)&&t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Phone:"})," ",Z.phonecell||Z.phone]}),Z.email&&t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Email:"})," ",Z.email]}),(Z.is_supervisor==="1"||Z.authorized==="1"||Z.calendar==="1")&&t.jsxs("div",{className:"flex gap-2 mt-1.5",children:[Z.is_supervisor==="1"&&t.jsx("span",{className:"badge-outline-warning text-xs",children:"Supervisor"}),Z.authorized==="1"&&t.jsx("span",{className:"badge-outline-success text-xs",children:"Provider"}),Z.calendar==="1"&&t.jsx("span",{className:"badge-outline-info text-xs",children:"Admin"})]})]}),t.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-200",children:[t.jsx("button",{onClick:()=>T(Z),className:"flex-1 px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"Edit"}),Z.active==="1"&&t.jsx("button",{onClick:()=>fe(Z.id),className:"flex-1 px-3 py-1.5 text-sm font-medium text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",children:"Deactivate"})]})]},Z.id))}),(N||O)&&Ja.createPortal(t.jsx(rb,{isEdit:O,formData:me,formError:U,saving:le,showPassword:ve,setShowPassword:he,supervisors:o,facilities:u,onFormChange:M,onToggleSupervisor:W,onSave:O?ne:q,onClose:C}),document.body)]})}function rb({isEdit:i,formData:c,formError:o,saving:d,showPassword:u,setShowPassword:b,supervisors:h,facilities:x,onFormChange:v,onToggleSupervisor:p,onSave:j,onClose:f}){return t.jsx("div",{className:"modal-backdrop",children:t.jsxs("div",{className:"modal-container modal-lg",children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:i?"Edit User":"Add New User"}),t.jsx("button",{onClick:f,className:"text-gray-500 hover:text-gray-700 transition-colors",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("form",{onSubmit:y=>{y.preventDefault(),j()},className:"modal-body",children:[o&&t.jsx("div",{className:"error-message",children:o}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Login Credentials"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Username ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:c.username,onChange:y=>v("username",y.target.value),disabled:i,className:"input-field disabled:bg-gray-100"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[i?"New Password (leave blank to keep current)":"Password"," ",!i&&t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:u?"text":"password",value:c.password,onChange:y=>v("password",y.target.value),className:"input-field"}),t.jsx("button",{type:"button",onClick:()=>b(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-sm text-gray-600 hover:text-gray-800",children:u?"Hide":"Show"})]})]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Personal Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Legal First Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:c.fname,onChange:y=>v("fname",y.target.value),className:"input-field"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Middle Name"}),t.jsx("input",{type:"text",value:c.mname,onChange:y=>v("mname",y.target.value),className:"input-field"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Legal Last Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:c.lname,onChange:y=>v("lname",y.target.value),className:"input-field"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Professional Credentials"}),t.jsx("input",{type:"text",value:c.title,onChange:y=>v("title",y.target.value),placeholder:"MD, LCSW, PhD, etc.",className:"input-field"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Suffix"}),t.jsx("input",{type:"text",value:c.suffix,onChange:y=>v("suffix",y.target.value),placeholder:"Jr., Sr., III, etc.",className:"input-field"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"State License Number"}),t.jsx("input",{type:"text",value:c.state_license_number,onChange:y=>v("state_license_number",y.target.value),className:"input-field"})]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Contact Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),t.jsx("input",{type:"email",value:c.email,onChange:y=>v("email",y.target.value),className:"input-field"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Office Phone"}),t.jsx("input",{type:"tel",value:c.phone,onChange:y=>v("phone",y.target.value),className:"input-field"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Cell Phone"}),t.jsx("input",{type:"tel",value:c.phonecell,onChange:y=>v("phonecell",y.target.value),className:"input-field"})]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Professional Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"NPI"}),t.jsx("input",{type:"text",value:c.npi,onChange:y=>v("npi",y.target.value),className:"input-field"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Federal Tax ID"}),t.jsx("input",{type:"text",value:c.federaltaxid,onChange:y=>v("federaltaxid",y.target.value),className:"input-field"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Taxonomy Code"}),t.jsx("input",{type:"text",value:c.taxonomy,onChange:y=>v("taxonomy",y.target.value),placeholder:"207Q00000X",className:"input-field"})]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Access Control"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:c.authorized,onChange:y=>v("authorized",y.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Provider (Can create clinical notes)"})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:c.is_supervisor,onChange:y=>v("is_supervisor",y.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Supervisor (Can supervise other providers)"})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:c.calendar,onChange:y=>v("calendar",y.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Administrator (Access to Settings)"})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:c.portal_user,onChange:y=>v("portal_user",y.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Portal Access"})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:c.active,onChange:y=>v("active",y.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Organization"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Supervisors (select one or more)"}),t.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto bg-white",children:h.length===0?t.jsx("div",{className:"text-sm text-gray-500 italic",children:"No supervisors available. Mark users as supervisors in Access Control."}):t.jsx("div",{className:"space-y-2",children:h.map(y=>t.jsxs("label",{className:"flex items-center gap-2 hover:bg-gray-50 p-1 rounded cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:c.supervisor_ids.includes(String(y.id)),onChange:()=>p(y.id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),t.jsxs("span",{className:"text-sm text-gray-700",children:[y.fname," ",y.lname," ",y.title&&`(${y.title})`]})]},y.id))})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Default Facility"}),t.jsxs("select",{value:c.facility_id,onChange:y=>v("facility_id",y.target.value),className:"input-field",children:[t.jsx("option",{value:"",children:"None"}),x.map(y=>t.jsx("option",{value:y.id,children:y.name},y.id))]})]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes"}),t.jsx("textarea",{value:c.notes,onChange:y=>v("notes",y.target.value),rows:3,className:"input-field",placeholder:"Additional information about this user..."})]})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{type:"button",onClick:f,disabled:d,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:d,className:"btn-action btn-primary btn-compact disabled:opacity-50",children:d?"Saving...":i?"Save Changes":"Create User"})]})]})]})})}function cb(){const[i,c]=g.useState([]),[o,d]=g.useState(!0),[u,b]=g.useState(""),[h,x]=g.useState(""),[v,p]=g.useState("active"),[j,f]=g.useState(!1),[y,S]=g.useState(!1),[N,k]=g.useState({id:null,name:"",phone:"",fax:"",website:"",email:"",street:"",city:"",state:"",postal_code:"",country_code:"United States",mail_street:"",mail_city:"",mail_state:"",mail_zip:"",color:"#99FFFF",pos_code:"11",facility_npi:"",federal_ein:"",tax_id_type:"EIN",facility_taxonomy:"",attn:"",info:"",billing_location:0,accepts_assignment:0,service_location:1,primary_business_entity:0,inactive:0}),[O,E]=g.useState(""),[H,Q]=g.useState(!1),[le,$]=g.useState("physical"),U=[{value:"11",label:"11: Office"},{value:"02",label:"02: Telehealth"},{value:"10",label:"10: Telehealth (Patient Home)"},{value:"12",label:"12: Home"},{value:"21",label:"21: Inpatient Hospital"},{value:"22",label:"22: Outpatient Hospital"},{value:"23",label:"23: Emergency Room"},{value:"31",label:"31: Skilled Nursing Facility"},{value:"32",label:"32: Nursing Facility"},{value:"49",label:"49: Independent Clinic"},{value:"50",label:"50: Federally Qualified Health Center"},{value:"71",label:"71: State/Local Public Health Clinic"},{value:"81",label:"81: Independent Laboratory"}];g.useEffect(()=>{P()},[]);const P=async()=>{try{d(!0);const T=await fetch("/custom/api/facilities.php",{credentials:"include"});if(!T.ok)throw new Error("Failed to fetch facilities");const q=await T.json();c(q.facilities||[])}catch(T){b(T.message)}finally{d(!1)}},ve=()=>{k({id:null,name:"",phone:"",fax:"",website:"",email:"",street:"",city:"",state:"",postal_code:"",country_code:"United States",mail_street:"",mail_city:"",mail_state:"",mail_zip:"",color:"#99FFFF",pos_code:"11",facility_npi:"",federal_ein:"",tax_id_type:"EIN",facility_taxonomy:"",attn:"",info:"",billing_location:0,accepts_assignment:0,service_location:1,primary_business_entity:0,inactive:0}),E(""),$("physical"),f(!0)},he=async T=>{try{const q=await fetch(`/custom/api/facilities.php?action=get&id=${T.id}`,{credentials:"include"});if(!q.ok)throw new Error("Failed to load facility details");const ne=await q.json();k({...ne,billing_location:ne.billing_location==="1"||ne.billing_location===1?1:0,accepts_assignment:ne.accepts_assignment==="1"||ne.accepts_assignment===1?1:0,service_location:ne.service_location==="1"||ne.service_location===1?1:0,primary_business_entity:ne.primary_business_entity==="1"||ne.primary_business_entity===1?1:0,inactive:ne.inactive==="1"||ne.inactive===1?1:0}),E(""),$("physical"),S(!0)}catch(q){alert("Failed to load facility details: "+q.message)}},me=async()=>{if(!N.name?.trim()){E("Facility name is required");return}try{Q(!0),E("");const T=await fetch("/custom/api/facilities.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(N)});if(!T.ok){const q=await T.json();throw new Error(q.error||"Failed to create facility")}await P(),f(!1)}catch(T){E(T.message)}finally{Q(!1)}},ue=async()=>{if(!N.name?.trim()){E("Facility name is required");return}try{Q(!0),E("");const T=await fetch("/custom/api/facilities.php",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(N)});if(!T.ok){const q=await T.json();throw new Error(q.error||"Failed to update facility")}await P(),S(!1)}catch(T){E(T.message)}finally{Q(!1)}},K=async T=>{if(confirm("Are you sure you want to deactivate this facility?"))try{if(!(await fetch(`/custom/api/facilities.php?id=${T}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to deactivate facility");await P()}catch(q){alert("Error: "+q.message)}},te=()=>{f(!1),S(!1),E("")},Y=(T,q)=>{k(ne=>({...ne,[T]:q}))},A=T=>{k(q=>({...q,[T]:q[T]?0:1}))},_=i.filter(T=>{const q=T.inactive==="0"||T.inactive===0;if(v==="active"&&!q||v==="inactive"&&q)return!1;if(h){const ne=h.toLowerCase();return T.name?.toLowerCase().includes(ne)||T.city?.toLowerCase().includes(ne)||T.state?.toLowerCase().includes(ne)}return!0});return o?t.jsx("div",{className:"glass-card p-8",children:t.jsx("div",{className:"text-center text-gray-700",children:"Loading facilities..."})}):u?t.jsxs("div",{className:"glass-card p-8",children:[t.jsxs("div",{className:"text-center text-red-600",children:["Error: ",u]}),t.jsx("div",{className:"text-center mt-4",children:t.jsx("button",{onClick:P,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})})]}):t.jsxs("div",{className:"glass-card p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Facilities"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Manage practice locations and facilities"})]}),t.jsxs("button",{onClick:ve,className:"btn-solid btn-solid-green btn-icon",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Facility"]})]}),t.jsx("div",{className:"mb-6",children:t.jsx("input",{type:"text",placeholder:"Search by name, city, or state...",value:h,onChange:T=>x(T.target.value),className:"input-lg"})}),t.jsxs("div",{className:"flex gap-3 mb-6",children:[t.jsx("button",{onClick:()=>p("active"),className:`filter-btn-enhanced ${v==="active"?"filter-btn-active-base bg-green-500":"filter-btn-inactive"}`,children:"Active"}),t.jsx("button",{onClick:()=>p("inactive"),className:`filter-btn-enhanced ${v==="inactive"?"filter-btn-active-base bg-red-500":"filter-btn-inactive"}`,children:"Inactive"}),t.jsx("button",{onClick:()=>p("all"),className:`filter-btn-enhanced ${v==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Facilities"})]}),_.length>0&&t.jsx("div",{className:"mb-4",children:t.jsxs("p",{className:"text-gray-700 font-semibold",children:[_.length," ",v!=="all"?v:""," facilit",_.length!==1?"ies":"y"]})}),_.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),t.jsxs("p",{className:"text-gray-600 text-lg",children:["No ",v!=="all"?v:""," facilities found"]})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(T=>t.jsxs("div",{className:"card-item",children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsx("div",{children:t.jsx("h4",{className:"text-base font-bold text-gray-800 leading-tight",children:T.name})}),t.jsx("span",{className:T.inactive==="0"||T.inactive===0?"badge-solid-success":"badge-solid-danger",children:T.inactive==="0"||T.inactive===0?"ACTIVE":"INACTIVE"})]}),t.jsxs("div",{className:"space-y-0.5 text-sm text-gray-600 mb-2",children:[T.street&&t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Address:"})," ",T.street,", ",T.city,", ",T.state," ",T.postal_code]}),T.phone&&t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Phone:"})," ",T.phone]}),T.fax&&t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Fax:"})," ",T.fax]}),t.jsxs("div",{className:"flex gap-2 mt-1.5 flex-wrap",children:[(T.billing_location==="1"||T.billing_location===1)&&t.jsx("span",{className:"badge-outline-info text-xs",children:"Billing"}),(T.service_location==="1"||T.service_location===1)&&t.jsx("span",{className:"badge-outline-success text-xs",children:"Service"}),(T.primary_business_entity==="1"||T.primary_business_entity===1)&&t.jsx("span",{className:"badge-outline-warning text-xs",children:"Primary"})]})]}),t.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-200",children:[t.jsx("button",{onClick:()=>he(T),className:"flex-1 px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"Edit"}),(T.inactive==="0"||T.inactive===0)&&t.jsx("button",{onClick:()=>K(T.id),className:"flex-1 px-3 py-1.5 text-sm font-medium text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",children:"Deactivate"})]})]},T.id))}),(j||y)&&Ja.createPortal(t.jsx(ob,{isEdit:y,formData:N,formError:O,saving:H,addressTab:le,setAddressTab:$,posCodeOptions:U,onFormChange:Y,onToggle:A,onSave:y?ue:me,onClose:te}),document.body)]})}function ob({isEdit:i,formData:c,formError:o,saving:d,addressTab:u,setAddressTab:b,posCodeOptions:h,onFormChange:x,onToggle:v,onSave:p,onClose:j}){return t.jsx("div",{className:"modal-backdrop",children:t.jsxs("div",{className:"modal-container max-w-4xl",children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:i?"Edit Facility":"Add New Facility"}),t.jsx("button",{onClick:j,className:"text-gray-500 hover:text-gray-700",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"modal-body",children:[o&&t.jsx("div",{className:"error-message mb-4",children:o}),t.jsxs("div",{className:"mb-4",children:[t.jsxs("label",{className:"block text-gray-700 font-semibold mb-2",children:["Facility Name ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"text",value:c.name||"",onChange:f=>x("name",f.target.value),className:"input-field",placeholder:"Enter facility name"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsxs("div",{className:"flex border-b border-gray-300 mb-4",children:[t.jsx("button",{onClick:()=>b("physical"),className:`px-4 py-2 font-semibold ${u==="physical"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Physical Address"}),t.jsx("button",{onClick:()=>b("mailing"),className:`px-4 py-2 font-semibold ${u==="mailing"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"Mailing Address"})]}),u==="physical"?t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"Street Address"}),t.jsx("input",{type:"text",value:c.street||"",onChange:f=>x("street",f.target.value),className:"input-field",placeholder:"Enter street address"})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"City"}),t.jsx("input",{type:"text",value:c.city||"",onChange:f=>x("city",f.target.value),className:"input-field",placeholder:"City"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"State"}),t.jsx("input",{type:"text",value:c.state||"",onChange:f=>x("state",f.target.value),className:"input-field",placeholder:"WI",maxLength:2})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"Zip Code"}),t.jsx("input",{type:"text",value:c.postal_code||"",onChange:f=>x("postal_code",f.target.value),className:"input-field",placeholder:"53092"})]})]})]}):t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"Mailing Street"}),t.jsx("input",{type:"text",value:c.mail_street||"",onChange:f=>x("mail_street",f.target.value),className:"input-field",placeholder:"Enter mailing street address"})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"City"}),t.jsx("input",{type:"text",value:c.mail_city||"",onChange:f=>x("mail_city",f.target.value),className:"input-field",placeholder:"City"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"State"}),t.jsx("input",{type:"text",value:c.mail_state||"",onChange:f=>x("mail_state",f.target.value),className:"input-field",placeholder:"WI",maxLength:2})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"Zip Code"}),t.jsx("input",{type:"text",value:c.mail_zip||"",onChange:f=>x("mail_zip",f.target.value),className:"input-field",placeholder:"53092"})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"Phone"}),t.jsx("input",{type:"tel",value:c.phone||"",onChange:f=>x("phone",f.target.value),className:"input-field",placeholder:"262-345-7229"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"Fax"}),t.jsx("input",{type:"tel",value:c.fax||"",onChange:f=>x("fax",f.target.value),className:"input-field",placeholder:"262-345-7229"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"Website"}),t.jsx("input",{type:"url",value:c.website||"",onChange:f=>x("website",f.target.value),className:"input-field",placeholder:"https://example.com"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"Email"}),t.jsx("input",{type:"email",value:c.email||"",onChange:f=>x("email",f.target.value),className:"input-field",placeholder:"contact@example.com"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"Color"}),t.jsx("input",{type:"color",value:c.color||"#99FFFF",onChange:f=>x("color",f.target.value),className:"input-field h-10"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"POS Code"}),t.jsx("select",{value:c.pos_code||"11",onChange:f=>x("pos_code",f.target.value),className:"input-field",children:h.map(f=>t.jsx("option",{value:f.value,children:f.label},f.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"Facility NPI"}),t.jsx("input",{type:"text",value:c.facility_npi||"",onChange:f=>x("facility_npi",f.target.value),className:"input-field",placeholder:"1811342058"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"Tax ID"}),t.jsxs("div",{className:"flex gap-2 items-center",children:[t.jsxs("select",{value:c.tax_id_type||"EIN",onChange:f=>x("tax_id_type",f.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",style:{width:"90px"},children:[t.jsx("option",{value:"EIN",children:"EIN"}),t.jsx("option",{value:"SSN",children:"SSN"})]}),t.jsx("input",{type:"text",value:c.federal_ein||"",onChange:f=>x("federal_ein",f.target.value),className:"input-field flex-1",placeholder:"566611885"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"Facility Taxonomy"}),t.jsx("input",{type:"text",value:c.facility_taxonomy||"",onChange:f=>x("facility_taxonomy",f.target.value),className:"input-field",placeholder:"101YP2500X"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"Attn"}),t.jsx("input",{type:"text",value:c.attn||"",onChange:f=>x("attn",f.target.value),className:"input-field",placeholder:"Kenneth J Nelan"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:c.billing_location===1,onChange:()=>v("billing_location"),className:"w-5 h-5 rounded border-gray-300"}),t.jsx("span",{className:"text-gray-700 font-semibold",children:"Billing Location"})]}),t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:c.accepts_assignment===1,onChange:()=>v("accepts_assignment"),className:"w-5 h-5 rounded border-gray-300"}),t.jsx("span",{className:"text-gray-700 font-semibold",children:"Accepts Assignment"})]}),t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:c.service_location===1,onChange:()=>v("service_location"),className:"w-5 h-5 rounded border-gray-300"}),t.jsx("span",{className:"text-gray-700 font-semibold",children:"Service Location"})]}),t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:c.primary_business_entity===1,onChange:()=>v("primary_business_entity"),className:"w-5 h-5 rounded border-gray-300"}),t.jsx("span",{className:"text-gray-700 font-semibold",children:"Primary Business Entity"})]}),t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:c.inactive===1,onChange:()=>v("inactive"),className:"w-5 h-5 rounded border-gray-300"}),t.jsx("span",{className:"text-gray-700 font-semibold",children:"Facility Inactive"})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"Info"}),t.jsx("textarea",{value:c.info||"",onChange:f=>x("info",f.target.value),className:"input-field",rows:4,placeholder:"Additional information about this facility..."})]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"text-red-600",children:"*"})," Required"]})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{onClick:j,disabled:d,className:"btn-action btn-cancel",children:"Cancel"}),t.jsx("button",{onClick:p,disabled:d,className:"btn-action btn-primary",children:d?"Saving...":i?"Save Changes":"Add Facility"})]})]})})}function db(){return t.jsxs("div",{className:"glass-card p-8",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"About SanctumEMHR EMHR"}),t.jsxs("div",{className:"flex items-center justify-between mb-8 pb-6 border-b border-white/30",children:[t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsx("div",{className:"w-48 h-48 backdrop-blur-xl bg-white/40 rounded-2xl flex items-center justify-center p-3 shadow-lg",children:t.jsx("img",{src:"/app/SanctumLogo.png",alt:"SanctumEMHR Logo",className:"w-full h-full object-contain"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:"SanctumEMHR"}),t.jsx("p",{className:"text-lg text-gray-700 mt-1",children:"Electronic Mental Health Records"}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 italic",children:"Where modern design meets clinical insight"})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-gray-900 font-semibold",children:"Kenneth J. Nelan"}),t.jsx("p",{className:"text-gray-700 mt-1",children:"Sacred Wandering"})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Version Information"}),t.jsxs("div",{className:"bg-white/40 backdrop-blur-sm rounded-lg p-4 space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-700 font-medium",children:"Version:"}),t.jsx("span",{className:"text-gray-900 font-semibold",children:"0.3.0-alpha"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-700 font-medium",children:"Release Stage:"}),t.jsx("span",{className:"text-gray-900 font-semibold",children:"Alpha Testing"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-700 font-medium",children:"Build Date:"}),t.jsx("span",{className:"text-gray-900 font-semibold",children:new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]})]}),t.jsxs("div",{className:"bg-blue-50/60 backdrop-blur-sm rounded-lg p-6 border border-blue-200/50",children:[t.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-3",children:"What is EMHR?"}),t.jsx("div",{className:"mb-4 pb-4 border-b border-blue-200/30",children:t.jsx("p",{className:"text-gray-700 leading-relaxed",children:"SanctumEMHR is a purpose-built Electronic Mental Health Records (EMHR) system designed specifically for outpatient mental health practices. Combining modern design principles with specialized clinical functionality, SanctumEMHR streamlines client management, appointment scheduling, clinical documentation, and billing workflowsall within a beautiful, intuitive interface."})}),t.jsxs("p",{className:"text-gray-700 leading-relaxed mb-4",children:[t.jsx("strong",{className:"text-blue-900",children:"EMHR (Electronic Mental Health Records)"})," is a term we've introduced to distinguish mental health-specific documentation systems from general medical EMRs. While EMRs focus on physical health, EMHRs are purpose-built for the unique workflows, documentation requirements, and clinical needs of mental health and behavioral health practices."]}),t.jsx("p",{className:"text-gray-600 text-sm",children:"SanctumEMHR represents a new generation of EMHR systems designed from the ground up for outpatient mental health providers, combining modern UX with specialized clinical functionality."})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Current Features"}),t.jsx("div",{className:"bg-white/40 backdrop-blur-sm rounded-lg p-4",children:t.jsxs("ul",{className:"space-y-2",children:[t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),t.jsx("span",{className:"text-gray-700",children:"Client management with comprehensive demographics"})]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),t.jsx("span",{className:"text-gray-700",children:"Calendar with day/week/month views"})]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),t.jsx("span",{className:"text-gray-700",children:"Appointment creation and scheduling"})]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),t.jsx("span",{className:"text-gray-700",children:"Insurance and billing information tracking"})]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),t.jsx("span",{className:"text-gray-700",children:"Guardian/related persons management"})]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),t.jsx("span",{className:"text-gray-700",children:"Modern glassmorphism UI design"})]}),t.jsxs("li",{className:"flex items-start gap-2",children:[t.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),t.jsx("span",{className:"text-gray-700",children:"HIPAA-compliant security and encryption"})]})]})})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"System Information"}),t.jsxs("div",{className:"bg-white/40 backdrop-blur-sm rounded-lg p-4 space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-700 font-medium",children:"Frontend Framework:"}),t.jsx("span",{className:"text-gray-900",children:"React 18 + Vite"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-700 font-medium",children:"Styling:"}),t.jsx("span",{className:"text-gray-900",children:"Tailwind CSS v4"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-700 font-medium",children:"Authentication:"}),t.jsx("span",{className:"text-gray-900",children:"Session-based (PHP)"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-700 font-medium",children:"Database:"}),t.jsx("span",{className:"text-gray-900",children:"MySQL/MariaDB"})]})]})]}),t.jsx("div",{className:"bg-gradient-to-br from-blue-50/80 to-purple-50/80 backdrop-blur-sm rounded-lg p-6 border border-white/50",children:t.jsxs("div",{className:"text-center space-y-3",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-900 font-semibold text-lg",children:"SanctumEMHR is Copyright  2026 Sacred Wandering"}),t.jsx("p",{className:"text-gray-700 font-medium mt-1",children:"Proprietary and Confidential"})]}),t.jsxs("div",{className:"pt-3 border-t border-white/50",children:[t.jsx("p",{className:"text-gray-600 text-sm",children:"This software is licensed for authorized use only."}),t.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Unauthorized copying, modification, distribution, or use is strictly prohibited."})]})]})})]})]})}function ub(){const[i,c]=g.useState("calendar"),o=[{id:"appearance",label:"Appearance",available:!1},{id:"branding",label:"Branding",available:!1},{id:"calendar",label:"Calendar",available:!0},{id:"document-categories",label:"Document Categories",available:!0},{id:"features",label:"Features",available:!1},{id:"facilities",label:"Facilities",available:!0},{id:"users",label:"Users",available:!0},{id:"security",label:"Security",available:!1},{id:"about",label:"About",available:!0}];return t.jsxs("div",{className:"w-full",children:[t.jsxs("div",{className:"glass-card p-6 mb-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Manage system configuration and preferences"})]}),t.jsxs("div",{className:"flex gap-6",children:[t.jsx("div",{className:"w-64 flex-shrink-0",children:t.jsx("div",{className:"glass-card p-4",children:t.jsx("nav",{className:"space-y-1",children:o.map(d=>t.jsxs("button",{onClick:()=>d.available&&c(d.id),disabled:!d.available,className:`w-full text-left px-4 py-2 rounded-lg transition-colors ${i===d.id?"bg-blue-600 text-white font-medium":d.available?"hover:bg-gray-100 text-gray-700":"text-gray-400 cursor-not-allowed"}`,children:[d.label,!d.available&&t.jsx("span",{className:"text-xs ml-2",children:"(Coming Soon)"})]},d.id))})})}),t.jsxs("div",{className:"flex-1",children:[i==="calendar"&&t.jsx(sb,{}),i==="document-categories"&&t.jsx(nb,{}),i==="facilities"&&t.jsx(cb,{}),i==="users"&&t.jsx(ib,{}),i==="about"&&t.jsx(db,{}),i!=="calendar"&&i!=="document-categories"&&i!=="facilities"&&i!=="users"&&i!=="about"&&t.jsxs("div",{className:"glass-card p-12 text-center",children:[t.jsxs("div",{className:"text-gray-700 text-lg font-semibold",children:[o.find(d=>d.id===i)?.label," Settings"]}),t.jsx("p",{className:"text-gray-600 mt-2",children:"This section is coming soon"})]})]})]})]})}function bo(){const i=Ka(),[c,o]=g.useState(null),[d,u]=g.useState([]),[b,h]=g.useState(!0);return g.useEffect(()=>{async function x(){try{const v=ki();if(!v){i("/");return}let p=v.fullName||v.username||"User",j=p.substring(0,2).toUpperCase(),f=v.admin||!1,y=v.id;try{const S=await Mp();if(S){S.fullName&&(p=S.fullName),S.admin!==void 0&&(f=S.admin),S.id&&(y=S.id);const N=p.trim().split(/\s+/);N.length>1?j=(N[0][0]+N[N.length-1][0]).toUpperCase():j=p.substring(0,2).toUpperCase()}}catch(S){console.log("Could not verify session, using cached data:",S),i("/");return}o({id:y,name:p,initials:j,role:f?"admin":"user",permissions:f?["admin"]:[],unreadMessages:0});try{const S=new Date,N=S.getFullYear(),k=String(S.getMonth()+1).padStart(2,"0"),O=String(S.getDate()).padStart(2,"0"),E=`${N}-${k}-${O}`,H=await po(E,E);u(H.appointments||[])}catch(S){console.error("Failed to load today's appointments:",S),u([])}h(!1)}catch(v){console.error("Error loading dashboard data:",v),i("/")}}x()},[i]),{user:c,appointments:d,loading:b}}function mb({isOpen:i,onClose:c,onSave:o,initialDate:d,initialTime:u,categories:b,block:h}){const{user:x}=bo(),[v,p]=g.useState(!1),[j,f]=g.useState(null),[y,S]=g.useState(null),[N,k]=g.useState(null),[O,E]=g.useState(""),[H,Q]=g.useState(d||new Date().toISOString().split("T")[0]),[le,$]=g.useState(u||"09:00"),[U,P]=g.useState(""),[ve,he]=g.useState(50),[me,ue]=g.useState(""),[K,te]=g.useState(!1),[Y,A]=g.useState({mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1}),[_,T]=g.useState("1"),[q,ne]=g.useState("count"),[fe,C]=g.useState(10),[M,W]=g.useState(""),[B,Z]=g.useState(!1),[re,pe]=g.useState("single"),[Ce,G]=g.useState(null),R=[30,50,90,240,480];g.useEffect(()=>{d&&Q(d),u&&$(u)},[d,u]),g.useEffect(()=>{h&&i&&(E(h.categoryId||""),Q(h.eventDate||""),$(h.startTime?h.startTime.substring(0,5):""),he(h.duration||50),ue(h.comments||""),h.isRecurring&&h.recurrenceId?(Z(!0),G(h.recurrenceId),pe("single")):(Z(!1),G(null)))},[h,i]),g.useEffect(()=>{b&&b.length>0&&!O&&(E(b[0].id),b[0].defaultDuration>0&&he(b[0].defaultDuration/60))},[b]),g.useEffect(()=>{if(le&&U){const[I,je]=le.split(":").map(Number),[we,Ue]=U.split(":").map(Number),qe=I*60+je,Lt=we*60+Ue-qe;Lt>0&&he(Lt)}},[le,U]);const ce=async(I,je=!1)=>{if(I.preventDefault(),p(!0),f(null),S(null),k(null),!O){f("Please select a block type"),p(!1);return}if(K){if(Object.values(Y).filter(Boolean).length===0){f("Please select at least one day for recurrence"),p(!1);return}if(q==="date"&&!M){f("Please select an end date for recurrence"),p(!1);return}if(q==="count"&&(!fe||fe<1)){f("Please enter a valid number of occurrences"),p(!1);return}}try{const we=le.includes(":")?`${le}:00`:`${le}:00:00`,Ue={patientId:0,providerId:x.id,categoryId:parseInt(O),eventDate:H,startTime:we,duration:parseInt(ve),title:b.find(ct=>ct.id===parseInt(O))?.name||"Blocked",comments:me,room:"",apptstatus:h?h.apptstatus:"-",overrideAvailability:je};B&&(Ue.seriesUpdate={scope:re,recurrenceId:Ce}),K&&!h&&(Ue.recurrence={enabled:!0,days:Y,interval:parseInt(_),endType:q,endCount:q==="count"?parseInt(fe):null,endDate:q==="date"?M:null}),console.log(h?"Updating availability block:":"Creating availability block:",Ue);const qe=h?await df(h.id,Ue):await of(Ue);qe.success?(S(h?"Block updated successfully!":"Time blocked successfully!"),setTimeout(()=>{ie()},1e3)):f(qe.message||`Failed to ${h?"update":"create"} block`)}catch(we){console.error(`Failed to ${h?"update":"create"} block:`,we),we.conflicts?k({conflicts:we.conflicts,totalOccurrences:we.totalOccurrences,conflictCount:we.conflictCount}):f(we.message||`Failed to ${h?"update":"create"} block`)}finally{p(!1)}},de=()=>{k(null),ce({preventDefault:()=>{}},!0)},ge=async()=>{if(!h)return;let I="Are you sure you want to delete this availability block?";if(B&&(re==="all"?I="Are you sure you want to delete ALL occurrences in this recurring series?":re==="future"&&(I="Are you sure you want to delete this and all future occurrences?")),!!confirm(I)){p(!0),f(null),S(null);try{const je=B?{scope:re,recurrenceId:Ce}:null,we=await uf(h.id,je);if(we.success){const Ue=B&&re!=="single"?`${we.deletedCount||"Multiple"} block(s) deleted successfully!`:"Block deleted successfully!";S(Ue),setTimeout(()=>{ie()},1e3)}else f(we.message||"Failed to delete block")}catch(je){console.error("Failed to delete block:",je),f(je.message||"Failed to delete block")}finally{p(!1)}}},ie=()=>{E(""),ue(""),f(null),S(null),k(null),te(!1),A({mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1}),T("1"),ne("count"),C(10),W(""),Z(!1),pe("single"),G(null),c(),o&&o()};return i?Ja.createPortal(t.jsxs("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"fixed inset-0 bg-gray-900/60 backdrop-blur-md transition-opacity",onClick:ie,"aria-hidden":"true"}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-y-auto",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",maxWidth:"48rem",maxHeight:"90vh",zIndex:10},children:[t.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-200 px-8 pt-6 bg-gradient-to-r from-purple-50 to-pink-50",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:h?"Edit Availability Block":"Block Time"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:h?"Update or remove this availability block":"Mark yourself as unavailable during this time"})]}),t.jsx("button",{onClick:ie,className:"p-2 hover:bg-white/80 rounded-xl transition-all hover:scale-110",disabled:v,children:t.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"px-8 pb-8",children:[N&&t.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-red-700 font-bold mb-2",children:"Scheduling Conflicts Detected"}),t.jsxs("p",{className:"text-red-600 text-sm mb-3",children:[N.conflictCount," of ",N.totalOccurrences," recurring blocks have conflicts:"]}),t.jsx("div",{className:"max-h-48 overflow-y-auto mb-4 space-y-2",children:N.conflicts.map((I,je)=>t.jsxs("div",{className:"bg-white border border-red-200 rounded p-2 text-sm",children:[t.jsxs("div",{className:"font-medium text-red-700",children:[new Date(I.date).toLocaleDateString()," at ",I.time]}),t.jsx("div",{className:"text-red-600",children:I.reason})]},je))}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{type:"button",onClick:de,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors",children:"Create Anyway (Skip Conflicts)"}),t.jsx("button",{type:"button",onClick:()=>k(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-medium rounded-lg transition-colors",children:"Cancel"})]})]})]})}),j&&t.jsxs("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg text-red-700 flex items-start gap-3",children:[t.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),t.jsx("span",{children:j})]}),y&&t.jsxs("div",{className:"mb-6 p-4 bg-green-50 border-l-4 border-green-500 rounded-lg text-green-700 flex items-start gap-3",children:[t.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),t.jsx("span",{children:y})]}),B&&t.jsx("div",{className:"mb-6 p-4 bg-purple-50 border-l-4 border-purple-500 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-purple-700 font-medium mb-2",children:"Recurring Availability Block Series"}),t.jsx("p",{className:"text-purple-600 text-sm mb-3",children:"This block is part of a recurring series. Choose what to update:"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"radio",name:"seriesScope",value:"single",checked:re==="single",onChange:I=>pe(I.target.value),className:"text-purple-600 focus:ring-purple-500"}),t.jsxs("span",{className:"text-sm text-purple-700",children:["Just this occurrence (",new Date(H).toLocaleDateString(),")"]})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"radio",name:"seriesScope",value:"future",checked:re==="future",onChange:I=>pe(I.target.value),className:"text-purple-600 focus:ring-purple-500"}),t.jsx("span",{className:"text-sm text-purple-700",children:"This and all future occurrences"})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"radio",name:"seriesScope",value:"all",checked:re==="all",onChange:I=>pe(I.target.value),className:"text-purple-600 focus:ring-purple-500"}),t.jsx("span",{className:"text-sm text-purple-700",children:"All occurrences in the series"})]})]})]})]})}),t.jsxs("form",{onSubmit:ce,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Reason ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:O,onChange:I=>E(I.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",required:!0,children:[t.jsx("option",{value:"",children:"Select Reason"}),b.map(I=>t.jsx("option",{value:I.id,children:I.name},I.id))]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Date ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"date",value:H,onChange:I=>Q(I.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Start Time ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"time",value:le,onChange:I=>$(I.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time"}),t.jsx("input",{type:"time",value:U,onChange:I=>P(I.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Duration (minutes) ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 mb-3 items-center",children:[R.map(I=>t.jsx("button",{type:"button",onClick:()=>he(I),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${ve===I?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:I>=60?`${I/60}h`:`${I}m`},I)),t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(12-hours = 720 minutes)"})]}),t.jsx("input",{type:"number",value:ve,onChange:I=>he(I.target.value),min:"5",step:"5",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",required:!0})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[t.jsx("div",{className:"mb-4",children:t.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[t.jsx("input",{type:"checkbox",checked:K,onChange:I=>te(I.target.checked),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),"Make this recurring"]})}),K&&t.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-purple-200",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Repeat on ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"sun",label:"Sun"},{key:"mon",label:"Mon"},{key:"tue",label:"Tue"},{key:"wed",label:"Wed"},{key:"thu",label:"Thu"},{key:"fri",label:"Fri"},{key:"sat",label:"Sat"}].map(I=>t.jsx("button",{type:"button",onClick:()=>A(je=>({...je,[I.key]:!je[I.key]})),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${Y[I.key]?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:I.label},I.key))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Frequency ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:_,onChange:I=>T(I.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",children:[t.jsx("option",{value:"1",children:"Weekly"}),t.jsx("option",{value:"2",children:"Every 2 weeks"}),t.jsx("option",{value:"3",children:"Every 3 weeks"}),t.jsx("option",{value:"4",children:"Every 4 weeks"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ends ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"radio",checked:q==="count",onChange:()=>ne("count"),className:"text-purple-600 focus:ring-purple-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"After"}),t.jsx("input",{type:"number",value:fe,onChange:I=>C(parseInt(I.target.value)||1),disabled:q!=="count",min:"1",max:"52",className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm disabled:bg-gray-100 focus:ring-2 focus:ring-purple-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"occurrences"})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"radio",checked:q==="date",onChange:()=>ne("date"),className:"text-purple-600 focus:ring-purple-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"On"}),t.jsx("input",{type:"date",value:M,onChange:I=>W(I.target.value),disabled:q!=="date",className:"px-2 py-1 border border-gray-300 rounded text-sm disabled:bg-gray-100 focus:ring-2 focus:ring-purple-500"})]})]})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),t.jsx("textarea",{value:me,onChange:I=>ue(I.target.value),rows:3,placeholder:"Add any notes about this blocked time...",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white"})]}),t.jsxs("div",{className:"flex gap-4 pt-6 mt-6 border-t border-gray-200",children:[h&&t.jsx("button",{type:"button",onClick:ge,className:"px-6 py-3 bg-red-100 hover:bg-red-200 text-red-700 font-semibold rounded-xl transition-all hover:shadow-md",disabled:v,children:"Delete"}),t.jsx("button",{type:"button",onClick:ie,className:"flex-1 px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold rounded-xl transition-all hover:shadow-md",disabled:v,children:"Cancel"}),t.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold rounded-xl transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",disabled:v,children:v?h?"Updating...":"Blocking...":h?"Update Block":"Block Time"})]})]})]})]})]}),document.body):null}function hb(){const[i,c]=g.useState(new Date),[o,d]=g.useState("week"),[u,b]=g.useState([]),[h,x]=g.useState([]),[v,p]=g.useState(!0),[j,f]=g.useState(!1),[y,S]=g.useState(null),[N,k]=g.useState(null);g.useEffect(()=>{O()},[]),g.useEffect(()=>{E()},[i,o]);const O=async()=>{try{const Y=await cf(1);x(Y.categories||[])}catch(Y){console.error("Failed to load availability categories:",Y)}},E=async()=>{p(!0);try{const Y=ki();if(console.log("[CalendarAvailability] Current user:",Y),!Y||!Y.id){console.error("No current user found"),b([]),p(!1);return}const{startDate:A,endDate:_}=H();console.log("[CalendarAvailability] Date range:",{startDate:A,endDate:_}),console.log("[CalendarAvailability] Fetching for provider ID:",Y.id);const T=await po(A,_,"all");console.log("[CalendarAvailability] API response:",T),console.log("[CalendarAvailability] Total appointments:",T.appointments?.length);const q=T.appointments.filter(ne=>{const fe=ne.categoryType===1,C=ne.providerId==Y.id;return console.log("[CalendarAvailability] Checking appointment:",{id:ne.id,categoryType:ne.categoryType,providerId:ne.providerId,currentUserId:Y.id,isAvailabilityBlock:fe,isCurrentProvider:C}),fe&&C});console.log("[CalendarAvailability] Filtered blocks:",q),b(q)}catch(Y){console.error("Failed to load availability blocks:",Y)}finally{p(!1)}},H=()=>{const Y=new Date(i),A=new Date(i);if(o==="week"){const _=Y.getDay(),T=Y.getDate()-_;Y.setDate(T),Y.setHours(0,0,0,0),A.setDate(Y.getDate()+6),A.setHours(23,59,59,999)}else o==="day"&&(Y.setHours(0,0,0,0),A.setHours(23,59,59,999));return{startDate:Y.toISOString().split("T")[0],endDate:A.toISOString().split("T")[0]}},Q=()=>{const Y=new Date(i),A=Y.getDay(),_=Y.getDate()-A;return Y.setDate(_),Y.setHours(0,0,0,0),Array.from({length:7},(T,q)=>new Date(Y.getTime()+q*24*60*60*1e3))},le=(Y,A,_)=>{const T=Y.toISOString().split("T")[0],q=`${A.toString().padStart(2,"0")}:${_.toString().padStart(2,"0")}`;k(null),S({date:T,time:q}),f(!0)},$=(Y,A)=>{A.stopPropagation(),k(Y),S(null),f(!0)},U=()=>{f(!1),k(null),E()},P=()=>{const Y=new Date(i);o==="week"?Y.setDate(Y.getDate()-7):Y.setDate(Y.getDate()-1),c(Y)},ve=()=>{const Y=new Date(i);o==="week"?Y.setDate(Y.getDate()+7):Y.setDate(Y.getDate()+1),c(Y)},he=()=>{c(new Date)},me=()=>{if(o==="week"){const Y=Q(),A=Y[0],_=Y[6];return`${A.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${_.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}else return i.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})},ue=Array.from({length:40},(Y,A)=>{const _=Math.floor(A/4)+8,T=A%4*15;return{hour:_,minutes:T}}),K=Y=>{const[A,_]=Y.startTime.split(":").map(Number),fe=(A*60+_-480)/15,C=60,M=fe*C,Z=(Y.duration||0)/15*C;return{top:M,height:Z}},te=Y=>{const A=Y.toISOString().split("T")[0];return u.filter(_=>_.eventDate===A)};return t.jsxs("div",{className:"glass-card p-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Manage My Availability"}),t.jsx("p",{className:"text-gray-600",children:"Block time for vacation, meetings, lunch breaks, and other unavailable periods"})]}),t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:P,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsx("button",{onClick:ve,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),t.jsx("button",{onClick:he,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Today"}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:me()})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>d("day"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${o==="day"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Day"}),t.jsx("button",{onClick:()=>d("week"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${o==="week"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Week"})]})]}),v?t.jsx("div",{className:"text-center py-12 text-gray-600",children:"Loading..."}):t.jsx("div",{className:"bg-white rounded-lg overflow-hidden border border-gray-200",children:o==="week"&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex border-b border-gray-200",children:[t.jsx("div",{className:"w-20 p-4 bg-gray-50 border-r border-gray-200 font-semibold text-gray-700 flex-shrink-0",children:"Time"}),Q().map((Y,A)=>{const _=Y.toDateString()===new Date().toDateString();return t.jsxs("div",{className:`flex-1 p-4 border-r border-gray-200 text-center ${_?"bg-blue-50":"bg-gray-50"}`,children:[t.jsx("div",{className:"text-sm text-gray-600",children:Y.toLocaleDateString("en-US",{weekday:"short"})}),t.jsx("div",{className:`text-lg font-semibold ${_?"text-blue-600":"text-gray-900"}`,children:Y.getDate()})]},A)})]}),t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"w-20 flex-shrink-0 border-r border-gray-200 bg-gray-50",children:ue.map(Y=>t.jsxs("div",{className:"h-[60px] p-3 border-b border-gray-200 text-sm text-gray-700 font-medium",children:[Y.hour===0?"12":Y.hour<12?Y.hour:Y.hour===12?"12":Y.hour-12,":",Y.minutes.toString().padStart(2,"0")," ",Y.hour<12?"AM":"PM"]},`time-${Y.hour}-${Y.minutes}`))}),t.jsx("div",{className:"flex-1 flex",children:Q().map((Y,A)=>{const _=te(Y),T=ue.length*60;return t.jsxs("div",{className:"flex-1 border-r border-gray-200 relative",style:{height:`${T}px`},children:[ue.map(q=>t.jsx("div",{onClick:()=>le(Y,q.hour,q.minutes),className:"absolute w-full h-[60px] border-b border-gray-200 hover:bg-blue-50 cursor-pointer transition-colors",style:{top:`${ue.findIndex(ne=>ne.hour===q.hour&&ne.minutes===q.minutes)*60}px`}},`slot-${q.hour}-${q.minutes}`)),_.map(q=>{const{top:ne,height:fe}=K(q),C=q.categoryColor||"#E5E7EB",M=q.categoryColor?`${q.categoryColor}80`:"#9CA3AF80";return t.jsxs("div",{onClick:W=>$(q,W),className:"absolute left-1 right-1 px-2 py-1 rounded-lg text-xs border hover:opacity-80 hover:shadow-md transition-all cursor-pointer z-10 overflow-hidden",style:{top:`${ne}px`,height:`${fe}px`,backgroundColor:`${C}B3`,borderColor:M},children:[t.jsx("div",{className:"font-semibold text-gray-900",children:q.categoryName}),fe>30&&q.comments&&t.jsx("div",{className:"text-gray-700 text-[10px] truncate",children:q.comments})]},q.id)})]},A)})})]})]})}),t.jsx(mb,{isOpen:j,onClose:()=>f(!1),onSave:U,initialDate:y?.date,initialTime:y?.time,categories:h,block:N})]})}function fb(){const[i,c]=g.useState("availability"),o=[{id:"profile",label:"My Profile",available:!1},{id:"preferences",label:"Preferences",available:!1},{id:"calendar-settings",label:"Calendar Settings",available:!1},{id:"availability",label:"Calendar Availability",available:!0},{id:"notifications",label:"Notifications",available:!1}];return t.jsxs("div",{className:"w-full",children:[t.jsxs("div",{className:"glass-card p-6 mb-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Settings"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your personal preferences and availability"})]}),t.jsxs("div",{className:"flex gap-6",children:[t.jsx("div",{className:"w-64 flex-shrink-0",children:t.jsx("div",{className:"glass-card p-4",children:t.jsx("nav",{className:"space-y-1",children:o.map(d=>t.jsxs("button",{onClick:()=>d.available&&c(d.id),disabled:!d.available,className:`w-full text-left px-4 py-2 rounded-lg transition-colors ${i===d.id?"bg-blue-600 text-white font-medium":d.available?"hover:bg-gray-100 text-gray-700":"text-gray-400 cursor-not-allowed"}`,children:[d.label,!d.available&&t.jsx("span",{className:"text-xs ml-2",children:"(Coming Soon)"})]},d.id))})})}),t.jsxs("div",{className:"flex-1",children:[i==="availability"&&t.jsx(hb,{}),i!=="availability"&&t.jsxs("div",{className:"glass-card p-12 text-center",children:[t.jsx("div",{className:"text-gray-700 text-lg font-semibold",children:o.find(d=>d.id===i)?.label}),t.jsx("p",{className:"text-gray-600 mt-2",children:"This section is coming soon"})]})]})]})]})}function xb(){const i=Sa(),c=Ka(),[o,d]=g.useState("dashboard"),{user:u,appointments:b,loading:h}=bo(),[x,v]=g.useState({activeClients:0}),[p,j]=g.useState(!1),[f,y]=g.useState(!1),[S,N]=g.useState(null),[k,O]=g.useState([]);g.useEffect(()=>{i.state?.activeNav&&d(i.state.activeNav)},[i.state]),g.useEffect(()=>{const ue=async()=>{try{const te=await tf();v(te)}catch(te){console.error("Failed to fetch client stats:",te)}},K=async()=>{try{const te=await go();O(te.providers||[])}catch(te){console.error("Failed to fetch providers:",te)}};u&&(ue(),K())},[u]);const E={todayAppointments:{value:b.filter(ue=>ue.categoryType!==1).length||0,trend:{direction:"up",change:0,label:"from yesterday"}},unbilledAppointments:{value:0,trend:{direction:"up",change:0,label:"from last week"}},sessionsYTD:{value:0,trend:{direction:"up",change:0,label:"from last month"}},activeClients:{value:x.activeClients||0,trend:{direction:"down",change:0,label:"from last month"}}},H=b.filter(ue=>ue.categoryType!==1).map(ue=>({...ue,time:new Date(ue.eventDate+" "+ue.startTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),client:ue.patientName||"Unknown",type:ue.categoryName||"Appointment",duration:ue.duration?`${ue.duration} min`:"",room:ue.room||"",isNext:!1})),Q=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),le=async()=>{await mf()},$=()=>{j(!0)},U=ue=>{console.log("New client created with ID:",ue),j(!1),c(`/clients/${ue}`)},P=()=>{N(null),y(!0)},ve=ue=>{N(ue),y(!0)},he=()=>{console.log("Appointment saved"),N(null),y(!1),window.location.reload()},me=()=>{N(null),y(!1)};return h||!u?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-mental",children:t.jsxs("div",{className:"backdrop-blur-2xl bg-white/40 rounded-3xl shadow-2xl p-8 border border-white/50",children:[t.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto"}),t.jsx("p",{className:"text-gray-700 font-semibold mt-4 text-center",children:"Loading dashboard..."})]})}):t.jsxs(Ih,{user:u,activeNav:o,setActiveNav:d,today:Q,onLogout:le,wide:o==="calendar",children:[o==="dashboard"&&t.jsxs(t.Fragment,{children:[t.jsx(Dp,{}),t.jsx(kp,{stats:E}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsx(Ap,{onNewClient:$,onNewAppointment:P}),t.jsx(Tp,{todaysAppointments:H,onAppointmentClick:ve})]})]}),o==="clients"&&t.jsx(eb,{}),o==="calendar"&&t.jsx(lb,{}),o==="reports"&&t.jsx(tb,{}),o==="admin"&&t.jsx(ub,{}),o==="settings"&&t.jsx(fb,{}),o!=="dashboard"&&o!=="clients"&&o!=="calendar"&&o!=="reports"&&o!=="admin"&&o!=="settings"&&t.jsxs("div",{className:"backdrop-blur-2xl bg-white/40 rounded-3xl shadow-2xl border border-white/50 p-8 text-center",children:[t.jsxs("p",{className:"text-gray-700 text-lg font-semibold",children:[o.charAt(0).toUpperCase()+o.slice(1)," - Coming Soon"]}),t.jsx("p",{className:"text-gray-600 mt-2",children:"This feature is under development"})]}),p&&t.jsx(hf,{onClose:()=>j(!1),onClientCreated:U}),t.jsx(ff,{isOpen:f,onClose:me,onSave:he,appointment:S,providers:k})]})}function gb({client:i}){const c=Ka();if(!i)return null;const o=x=>{if(!x)return"bg-gray-500 text-white";const v=x.toLowerCase();return v==="active"?"bg-green-500 text-white":v==="inactive"?"bg-yellow-500 text-white":"bg-gray-500 text-white"},d=x=>x?x.charAt(0).toUpperCase()+x.slice(1).toLowerCase():"Unknown",u=x=>x?`${x} years old`:"",b=x=>x?new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",h=x=>x?new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"";return t.jsx("div",{className:"card-main mb-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("button",{onClick:()=>c("/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-white/60 hover:bg-white/80 text-gray-700 rounded-lg transition-colors font-medium border border-gray-200",title:"Back to Dashboard",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),t.jsx("span",{children:"Back"})]}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:[i.fname," ",i.mname&&i.mname+" ",i.lname]}),t.jsxs("div",{className:"flex items-center gap-4 mt-2 text-gray-600",children:[t.jsx("span",{children:u(i.age)}),t.jsx("span",{children:""}),t.jsxs("span",{children:["DOB: ",b(i.DOB)]}),t.jsx("span",{children:""}),t.jsxs("span",{children:["ID: ",i.pid]}),i.client_since&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""}),t.jsxs("span",{children:["Client Since: ",h(i.client_since)]})]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[i.protection_indicator_code==="YES"&&t.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-red-50 border border-red-200 rounded-lg",children:[t.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),t.jsx("span",{className:"text-sm font-semibold text-red-800",children:"Risk Factors Documented"})]}),t.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-medium ${o(i.care_team_status)}`,children:d(i.care_team_status)})]})]})})}function pb({activeTab:i,onTabChange:c}){const o=[{id:"summary",label:"Summary"},{id:"demographics",label:"Demographics"},{id:"insurance",label:"Insurance"},{id:"encounters",label:"Sessions"},{id:"clinical",label:"Clinical Notes"},{id:"documents",label:"Documents"},{id:"billing",label:"Billing"},{id:"admin",label:"Admin Notes"}];return t.jsx("div",{className:"tab-nav mb-6",children:t.jsx("div",{className:"flex gap-2",children:o.map(d=>t.jsx("button",{onClick:()=>c(d.id),className:i===d.id?"nav-tab-active":"nav-tab-inactive",children:d.label},d.id))})})}function bb({data:i}){if(!i)return t.jsx("div",{className:"text-gray-700 text-center py-8",children:"Loading client data..."});const{patient:c,upcomingAppointments:o,recentAppointments:d,problems:u,medications:b,encounters:h}=i,x=j=>j?new Date(j).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",v=j=>{if(!j)return"";const[f,y]=j.split(":"),S=parseInt(f),N=S>=12?"PM":"AM";return`${S%12||12}:${y} ${N}`},p=j=>{if(!j)return"";const f=j.split(/\s{3,}/);return f.length>1?f[1].trim():j.trim()};return t.jsxs("div",{className:"flex gap-6",children:[t.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"card-main",children:[t.jsx("h2",{className:"card-header",children:"Contact Information"}),t.jsx("div",{className:"bg-white/80 rounded-xl p-4 border border-gray-200",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"field-label",children:"Email:"}),t.jsx("div",{className:"field-value",children:c.email||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"field-label",children:"Cell Phone:"}),t.jsx("div",{className:"field-value",children:c.phone_cell||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"field-label",children:"Home Phone:"}),t.jsx("div",{className:"field-value",children:c.phone_home||"Not provided"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"field-label",children:"Address:"}),t.jsx("div",{className:"field-value",children:c.street&&c.city?t.jsxs(t.Fragment,{children:[c.street,t.jsx("br",{}),c.city,", ",c.state," ",c.postal_code]}):"Not provided"})]}),c.contact_relationship&&t.jsxs("div",{children:[t.jsx("span",{className:"field-label",children:"Emergency Contact:"}),t.jsx("div",{className:"field-value",children:c.contact_relationship})]})]})})]})}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"card-main",children:[t.jsx("h2",{className:"card-header",children:t.jsx("span",{className:"flex items-center gap-2",children:" Diagnosis"})}),u&&u.length>0?t.jsx("div",{className:"space-y-3",children:u.map(j=>t.jsx("div",{className:"card-inner border-l-4 border-blue-400",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"font-mono text-sm font-semibold text-blue-700 bg-blue-100 px-2 py-0.5 rounded",children:j.diagnosis}),j.enddate&&t.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:"Retired"})]}),t.jsx("div",{className:"item-title text-gray-800",children:p(j.title)}),t.jsxs("div",{className:"item-tertiary mt-1",children:["Started: ",x(j.begdate),j.enddate&&`  Ended: ${x(j.enddate)}`]})]})})},j.id))}):t.jsx("div",{className:"empty-state",children:"No active diagnoses recorded"})]}),t.jsxs("div",{className:"card-main",children:[t.jsx("h2",{className:"card-header",children:t.jsx("span",{className:"flex items-center gap-2",children:" Current Medications"})}),b&&b.length>0?t.jsx("div",{className:"space-y-3",children:b.map((j,f)=>t.jsxs("div",{className:"card-inner border-l-4 border-green-400",children:[t.jsx("div",{className:"item-title text-gray-900",children:j.name}),j.dosage&&t.jsxs("div",{className:"item-secondary text-green-700 font-semibold",children:[j.dosage,j.frequency&&` - ${j.frequency}`]}),j.purpose&&t.jsxs("div",{className:"item-tertiary",children:["For: ",j.purpose]}),j.prescriber&&t.jsxs("div",{className:"item-tertiary",children:["Prescribed by: ",j.prescriber]})]},f))}):t.jsx("div",{className:"empty-state",children:"No active medications"})]})]})]}),t.jsxs("div",{className:"w-80 flex-shrink-0 space-y-6",children:[t.jsxs("div",{className:"card-main",children:[t.jsx("h2",{className:"card-header",children:"Appointments"}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"section-header",children:"Upcoming"}),o&&o.length>0?t.jsx("div",{className:"space-y-3",children:o.map(j=>t.jsxs("div",{className:"card-inner",children:[t.jsx("div",{className:"appt-date",children:x(j.pc_eventDate)}),t.jsxs("div",{className:"appt-time",children:[v(j.pc_startTime)," - ",v(j.pc_endTime)]}),t.jsx("div",{className:"appt-type",children:j.pc_catname||"Appointment"})]},j.pc_eid))}):t.jsx("div",{className:"text-muted",children:"No upcoming appointments"})]}),t.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[t.jsx("h3",{className:"section-header",children:"Recurring"}),t.jsx("div",{className:"text-muted",children:"No recurring appointments"})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"section-header",children:"Recent Past"}),d&&d.length>0?t.jsx("div",{className:"space-y-3",children:d.slice(0,6).map(j=>t.jsxs("div",{className:"card-inner",children:[t.jsx("div",{className:"appt-date",children:x(j.pc_eventDate)}),t.jsxs("div",{className:"appt-time",children:[v(j.pc_startTime)," - ",v(j.pc_endTime)]}),t.jsx("div",{className:"appt-type",children:j.pc_catname||"Appointment"})]},j.pc_eid))}):t.jsx("div",{className:"text-muted",children:"No recent appointments"})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsx("h2",{className:"card-header",children:"Portal Access"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[t.jsx("p",{className:"alert-header text-gray-700",children:"Portal Status"}),t.jsx("p",{className:"text-caption text-gray-600",children:"Patient Portal Not Enabled. Admin Can Enable Patient Portal."})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsx("p",{className:"alert-header text-gray-700 mb-2",children:"Credentials"}),t.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"+ Create"})]})]})]})]})]})}function vb({data:i,onDataUpdate:c}){const[o,d]=g.useState(!1),[u,b]=g.useState({}),[h,x]=g.useState(!1),[v,p]=g.useState(null),[j,f]=g.useState({}),[y,S]=g.useState([]),[N,k]=g.useState(null),[O,E]=g.useState([]),[H,Q]=g.useState(!1),[le,$]=g.useState(null);if(g.useEffect(()=>{const _=async()=>{try{const[ne,fe,C,M,W,B,Z,re,pe]=await Promise.all([Rt("sex"),Rt("gender_identity"),Rt("sexual_orientation"),Rt("marital"),Rt("yesno"),Rt("state"),Rt("Patient_Groupings"),Rt("Care_Team_Status"),Rt("payment_type")]);f({sex:ne.options||[],gender_identity:fe.options||[],sexual_orientation:C.options||[],marital_status:M.options||[],protect_indicator:W.options||[],state:B.options||[],patient_categories:Z.options||[],care_team_status:re.options||[],payment_type:pe.options||[]})}catch(ne){console.error("Failed to load dropdown options:",ne)}},T=async()=>{try{const ne=ki();k(ne)}catch(ne){console.error("Failed to load current user:",ne)}},q=async()=>{try{const ne=await go();S(ne.providers||[])}catch(ne){console.error("Failed to load providers:",ne)}};_(),T(),q()},[]),g.useEffect(()=>{(async()=>{if(i&&i.patient&&i.patient.age<18)try{const T=await lo(i.patient.pid);E(T.related_persons||[])}catch(T){console.error("Failed to load guardians:",T)}})()},[i]),!i)return t.jsx("div",{className:"empty-state",children:"Loading demographic data..."});const{patient:U}=i,P=()=>{b({fname:U.fname||"",mname:U.mname||"",lname:U.lname||"",preferred_name:U.preferred_name||"",DOB:U.DOB||"",sex:U.sex||"",gender_identity:U.gender_identity||"",sexual_orientation:U.sexual_orientation||"",marital_status:U.marital_status||"",previous_names:U.previous_names||"",patient_categories:U.patient_categories||"",ss:U.ss||"",street:U.street||"",street_line_2:U.street_line_2||"",city:U.city||"",state:U.state||"",postal_code:U.postal_code||"",county:U.county||"",contact_relationship:U.contact_relationship||"",phone_contact:U.phone_contact||"",phone_home:U.phone_home||"",phone_cell:U.phone_cell||"",phone_biz:U.phone_biz||"",email:U.email||"",email_direct:U.email_direct||"",protect_indicator:U.protection_indicator_code||"",care_team_status:U.care_team_status||"",payment_type:U.payment_type||"",provider_id:U.provider_id||"",referring_provider_id:U.referring_provider_id||"",allow_patient_portal:U.allow_patient_portal||"",cmsportal_login:U.cmsportal_login||"",hipaa_notice:U.hipaa_notice||"NO",hipaa_allowsms:U.hipaa_allowsms||"NO",hipaa_voice:U.hipaa_voice||"NO",hipaa_mail:U.hipaa_mail||"NO",hipaa_email:U.hipaa_email||"NO"}),d(!0),p(null)},ve=()=>{d(!1),b({}),p(null)},he=(_,T)=>{b(q=>({...q,[_]:T}))},me=async()=>{x(!0),p(null);try{if(!u.fname||!u.lname)throw new Error("First name and last name are required");if(!u.sex)throw new Error("Sex is required");if(!u.gender_identity)throw new Error("Gender Identity is required");if(!u.sexual_orientation)throw new Error("Sexual Orientation is required");if(u.email&&!u.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/))throw new Error("Invalid email format");if(u.email_direct&&!u.email_direct.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/))throw new Error("Invalid contact email format");await Qp(U.pid,u),c&&await c(),d(!1),b({})}catch(_){p(_.message||"Failed to save changes")}finally{x(!1)}},ue=()=>{$(null),Q(!0)},K=_=>{$(_),Q(!0)},te=async _=>{if(window.confirm(`Are you sure you want to remove ${_.first_name} ${_.last_name} as a guardian?`))try{await $p(_.relation_id);const T=await lo(U.pid);E(T.related_persons||[])}catch(T){p(T.message||"Failed to delete guardian")}},Y=async _=>{try{await Zp({patient_id:U.pid,person_id:le?.id,..._});const T=await lo(U.pid);E(T.related_persons||[]),Q(!1),$(null)}catch(T){throw new Error(T.message||"Failed to save guardian")}},A=(_,T,q,ne="text",fe=null)=>{if(o&&q)return fe?t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:_}),t.jsx("select",{value:u[q]||"",onChange:C=>he(q,C.target.value),className:"input-md",children:fe.map(C=>t.jsx("option",{value:C.value,children:C.label},C.value))})]}):t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:_}),t.jsx("input",{type:ne,value:u[q]||"",onChange:C=>he(q,C.target.value),className:"input-md"})]});{let C=T||"";if(fe&&T){const M=fe.find(W=>W.value===T);M&&(C=M.label)}return t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:_}),t.jsx("div",{className:"form-field-value",children:C})]})}};return t.jsxs("div",{children:[t.jsx("div",{className:"flex justify-end mb-4 space-x-2",children:o?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:ve,disabled:h,className:"btn-solid btn-solid-gray disabled:opacity-50",children:"Cancel"}),t.jsx("button",{onClick:me,disabled:h,className:"btn-solid btn-solid-green disabled:opacity-50",children:h?"Saving...":"Save Changes"})]}):t.jsx("button",{onClick:P,className:"btn-solid btn-solid-blue",children:"Edit Demographics"})}),v&&t.jsx("div",{className:"error-message mb-4",children:v}),o&&t.jsx("div",{className:"mb-4 px-4 py-2 bg-purple-50 border-l-4 border-purple-700 rounded",children:t.jsxs("p",{className:"text-sm text-purple-900",children:[t.jsx("span",{className:"required-field-label",children:"*"})," Required fields are marked with an asterisk and displayed in ",t.jsx("span",{className:"required-field-label",children:"purple"})]})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"card-main",children:[t.jsx("h2",{className:"card-header",children:"Personal Information"}),t.jsx("div",{className:"card-inner",children:t.jsx("div",{className:"grid grid-cols-2 gap-3",children:o?t.jsxs(t.Fragment,{children:[A("First Name *",u.fname,"fname"),A("Middle Name",u.mname,"mname"),A("Last Name *",u.lname,"lname"),A("Preferred Name",u.preferred_name,"preferred_name"),A("DOB",u.DOB,"DOB","date"),A("Sex *",u.sex,"sex","text",j.sex&&j.sex.length>0?[{value:"",label:"Select..."},...j.sex]:[{value:"",label:"Select..."},{value:"Male",label:"Male"},{value:"Female",label:"Female"}]),A("Gender Identity *",u.gender_identity,"gender_identity","text",j.gender_identity&&j.gender_identity.length>0?[{value:"",label:"Select..."},...j.gender_identity]:null),A("Sexual Orientation *",u.sexual_orientation,"sexual_orientation","text",j.sexual_orientation&&j.sexual_orientation.length>0?[{value:"",label:"Select..."},...j.sexual_orientation]:null),A("Marital Status",u.marital_status,"marital_status","text",j.marital_status&&j.marital_status.length>0?[{value:"",label:"Select..."},...j.marital_status]:null),t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"S.S."}),t.jsx("input",{type:"text",value:u.ss||"",onChange:_=>he("ss",_.target.value),placeholder:"XXX-XX-XXXX",maxLength:"11",className:"input-md"})]}),A("Previous Names",u.previous_names,"previous_names"),t.jsx("div",{className:"col-span-2",children:A("Client Categories",u.patient_categories,"patient_categories","text",j.patient_categories&&j.patient_categories.length>0?[{value:"",label:"Select..."},...j.patient_categories]:null)})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Legal Name"}),t.jsxs("div",{className:"form-field-value",children:[U.fname," ",U.mname&&U.mname+" ",U.lname]})]}),A("Preferred Name",U.preferred_name),A("DOB",U.DOB),A("Birth Sex",U.birth_sex),A("Gender Identity",U.gender_identity),A("Sex",U.sex),A("Sexual Orientation",U.sexual_orientation),t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"S.S."}),t.jsx("div",{className:"form-field-value",children:U.ss?"***-**-"+U.ss.slice(-4):""})]}),A("Marital Status",U.marital_status),A("Previous Names",U.previous_names),t.jsx("div",{className:"col-span-2",children:A("Client Categories",U.patient_categories,null,"text",j.patient_categories&&j.patient_categories.length>0?[{value:"",label:"Select..."},...j.patient_categories]:null)})]})})})]}),U.age<18&&t.jsxs("div",{className:"card-main",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"card-header",children:"Guardian Information"}),t.jsx("button",{onClick:ue,className:"btn-solid btn-solid-green btn-sm",children:"+ Add Guardian"})]}),t.jsx("div",{className:"card-inner",children:O.length===0?t.jsx("div",{className:"empty-state",children:'No guardians added yet. Click "Add Guardian" to add one.'}):t.jsx("div",{className:"space-y-4",children:O.map((_,T)=>t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex justify-between items-start mb-2",children:[t.jsxs("div",{className:"item-title",children:[_.first_name," ",_.middle_name," ",_.last_name]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>K(_),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Edit"}),t.jsx("button",{onClick:()=>te(_),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Remove"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"field-label",children:"Relationship:"})," ",_.role]}),_.phone&&t.jsxs("div",{children:[t.jsx("span",{className:"field-label",children:"Phone:"})," ",_.phone]}),_.email&&t.jsxs("div",{className:"col-span-2",children:[t.jsx("span",{className:"field-label",children:"Email:"})," ",_.email]}),_.street&&t.jsxs("div",{className:"col-span-2",children:[t.jsx("span",{className:"field-label",children:"Address:"})," ",_.street,_.city&&`, ${_.city}`,_.state&&`, ${_.state}`,_.postal_code&&` ${_.postal_code}`]})]})]},_.id))})})]}),t.jsxs("div",{className:"card-main",children:[t.jsx("h2",{className:"card-header",children:"Contact Information"}),t.jsx("div",{className:"card-inner",children:t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx("div",{className:"col-span-2",children:A("Address",U.street,"street")}),A("Address Line 2",U.street_line_2,"street_line_2"),A("City",U.city,"city"),A("State",U.state,"state","text",j.state&&j.state.length>0?[{value:"",label:"Select..."},...j.state]:null),A("Postal Code",U.postal_code,"postal_code"),A("County",U.county,"county"),A("Emergency Contact",U.contact_relationship,"contact_relationship"),A("Emergency Phone",U.phone_contact,"phone_contact","tel"),A("Home Phone",U.phone_home,"phone_home","tel"),A("Mobile Phone",U.phone_cell,"phone_cell","tel"),A("Work Phone",U.phone_biz,"phone_biz","tel"),A("Trusted Email",U.email,"email","email"),A("Contact Email",U.email_direct,"email_direct","email"),!o&&U.additional_addresses&&t.jsxs("div",{className:"col-span-2 form-field",children:[t.jsx("div",{className:"form-field-label",children:"Additional Addresses"}),t.jsx("div",{className:"form-field-value",children:U.additional_addresses})]})]})})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"card-main",children:[t.jsx("h2",{className:"card-header",children:"Client Status"}),t.jsx("div",{className:"card-inner",children:o?t.jsxs("div",{className:"space-y-3",children:[A("Status",u.care_team_status,"care_team_status","text",j.care_team_status&&j.care_team_status.length>0?[{value:"",label:"Select..."},...j.care_team_status]:null),A("Payment Type",u.payment_type,"payment_type","text",j.payment_type&&j.payment_type.length>0?[{value:"",label:"Select..."},...j.payment_type]:null)]}):t.jsxs("div",{className:"space-y-3",children:[A("Status",U.care_team_status,null,"text",j.care_team_status&&j.care_team_status.length>0?j.care_team_status:null),A("Payment Type",U.payment_type,null,"text",j.payment_type&&j.payment_type.length>0?j.payment_type:null)]})})]}),t.jsxs("div",{className:"card-main",children:[t.jsx("h2",{className:"card-header",children:"Is the Client at Risk?"}),t.jsx("div",{className:"card-inner",children:o?t.jsx("div",{children:A("Risk Indicator",u.protect_indicator,"protect_indicator","text",j.protect_indicator&&j.protect_indicator.length>0?[{value:"",label:"Select..."},...j.protect_indicator]:null)}):t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Risk Indicator"}),t.jsx("div",{className:"form-field-value",children:U.protection_indicator})]}),U.protection_indicator_code==="YES"&&t.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 rounded-lg p-3",children:t.jsx("p",{className:"alert-text text-yellow-800",children:" Risk factors documented. See Clinical Notes for the Risk Assessment."})})]})})]}),t.jsxs("div",{className:"card-main",children:[t.jsx("h2",{className:"card-header",children:"Clinician Information"}),t.jsx("div",{className:"card-inner",children:t.jsx("div",{className:"grid grid-cols-2 gap-3",children:o?t.jsxs(t.Fragment,{children:[N&&N.admin?t.jsx("div",{className:"col-span-2",children:A("Assigned Clinician",u.provider_id,"provider_id","text",y&&y.length>0?[{value:"",label:"Select..."},...y]:null)}):t.jsxs("div",{className:"col-span-2 form-field",children:[t.jsx("div",{className:"form-field-label",children:"Assigned Clinician"}),t.jsx("div",{className:"form-field-value",children:U.provider})]}),t.jsx("div",{className:"col-span-2",children:A("Referring Provider",u.referring_provider_id,"referring_provider_id","text",y&&y.length>0?[{value:"",label:"Select..."},...y]:null)})]}):t.jsxs(t.Fragment,{children:[A("Assigned Clinician",U.provider),A("Referring Provider",U.referring_provider)]})})})]}),t.jsxs("div",{className:"card-main",children:[t.jsx("h2",{className:"card-header",children:"Reminder Preferences"}),t.jsx("div",{className:"card-inner",children:t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx("div",{className:"col-span-2",children:A("HIPAA Notice Received",U.hipaa_notice,"hipaa_notice","text",[{value:"NO",label:"NO"},{value:"YES",label:"YES"}])}),A("Allow SMS",U.hipaa_allowsms,"hipaa_allowsms","text",[{value:"NO",label:"NO"},{value:"YES",label:"YES"}]),A("Allow Voice Message",U.hipaa_voice,"hipaa_voice","text",[{value:"NO",label:"NO"},{value:"YES",label:"YES"}]),A("Allow Mail Message",U.hipaa_mail,"hipaa_mail","text",[{value:"NO",label:"NO"},{value:"YES",label:"YES"}]),A("Allow Email",U.hipaa_email,"hipaa_email","text",[{value:"NO",label:"NO"},{value:"YES",label:"YES"}])]})})]}),t.jsxs("div",{className:"card-main",children:[t.jsx("h2",{className:"card-header",children:"Portal Settings"}),t.jsx("div",{className:"card-inner",children:t.jsx("div",{className:"grid grid-cols-2 gap-3",children:o?t.jsxs(t.Fragment,{children:[A("Allow Client Portal",u.allow_patient_portal,"allow_patient_portal","text",[{value:"",label:"Select..."},{value:"NO",label:"NO"},{value:"YES",label:"YES"}]),A("CMS Portal Login",u.cmsportal_login,"cmsportal_login")]}):t.jsxs(t.Fragment,{children:[A("Allow Client Portal",U.allow_patient_portal),A("CMS Portal Login",U.cmsportal_login)]})})})]})]})]}),H&&t.jsx(yb,{guardian:le,stateOptions:j.state||[],onSave:Y,onCancel:()=>{Q(!1),$(null)}})]})}function yb({guardian:i,stateOptions:c,onSave:o,onCancel:d}){const[u,b]=g.useState({first_name:i?.first_name||"",middle_name:i?.middle_name||"",last_name:i?.last_name||"",role:i?.role||"",phone:i?.phone||"",email:i?.email||"",street:i?.street||"",city:i?.city||"",state:i?.state||"",postal_code:i?.postal_code||"",notes:i?.notes||""}),[h,x]=g.useState(null),[v,p]=g.useState(!1),j=(y,S)=>{b(N=>({...N,[y]:S}))},f=async y=>{y.preventDefault(),x(null),p(!0);try{if(!u.first_name||!u.last_name||!u.role)throw new Error("First name, last name, and relationship are required");if(u.email&&!u.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/))throw new Error("Invalid email format");await o(u)}catch(S){x(S.message)}finally{p(!1)}};return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto m-4",children:t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"card-header text-2xl",children:i?"Edit Guardian":"Add Guardian"}),h&&t.jsx("div",{className:"error-message mb-4",children:h}),t.jsxs("form",{onSubmit:f,children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"form-field",children:[t.jsx("label",{className:"form-field-label",children:"First Name *"}),t.jsx("input",{type:"text",value:u.first_name,onChange:y=>j("first_name",y.target.value),className:"input-md",required:!0})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("label",{className:"form-field-label",children:"Middle Name"}),t.jsx("input",{type:"text",value:u.middle_name,onChange:y=>j("middle_name",y.target.value),className:"input-md"})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("label",{className:"form-field-label",children:"Last Name *"}),t.jsx("input",{type:"text",value:u.last_name,onChange:y=>j("last_name",y.target.value),className:"input-md",required:!0})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("label",{className:"form-field-label",children:"Relationship *"}),t.jsxs("select",{value:u.role,onChange:y=>j("role",y.target.value),className:"input-md",required:!0,children:[t.jsx("option",{value:"",children:"Select..."}),t.jsx("option",{value:"Mother",children:"Mother"}),t.jsx("option",{value:"Father",children:"Father"}),t.jsx("option",{value:"Grandmother",children:"Grandmother"}),t.jsx("option",{value:"Grandfather",children:"Grandfather"}),t.jsx("option",{value:"Aunt",children:"Aunt"}),t.jsx("option",{value:"Uncle",children:"Uncle"}),t.jsx("option",{value:"Foster Parent",children:"Foster Parent"}),t.jsx("option",{value:"Legal Guardian",children:"Legal Guardian"}),t.jsx("option",{value:"Other",children:"Other"})]})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("label",{className:"form-field-label",children:"Phone"}),t.jsx("input",{type:"tel",value:u.phone,onChange:y=>j("phone",y.target.value),className:"input-md"})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("label",{className:"form-field-label",children:"Email"}),t.jsx("input",{type:"email",value:u.email,onChange:y=>j("email",y.target.value),className:"input-md"})]}),t.jsxs("div",{className:"col-span-2 form-field",children:[t.jsx("label",{className:"form-field-label",children:"Street Address"}),t.jsx("input",{type:"text",value:u.street,onChange:y=>j("street",y.target.value),className:"input-md"})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("label",{className:"form-field-label",children:"City"}),t.jsx("input",{type:"text",value:u.city,onChange:y=>j("city",y.target.value),className:"input-md"})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("label",{className:"form-field-label",children:"State"}),t.jsxs("select",{value:u.state,onChange:y=>j("state",y.target.value),className:"input-md",children:[t.jsx("option",{value:"",children:"Select..."}),c.map(y=>t.jsx("option",{value:y.value,children:y.label},y.value))]})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("label",{className:"form-field-label",children:"Postal Code"}),t.jsx("input",{type:"text",value:u.postal_code,onChange:y=>j("postal_code",y.target.value),className:"input-md"})]}),t.jsxs("div",{className:"col-span-2 form-field",children:[t.jsx("label",{className:"form-field-label",children:"Notes"}),t.jsx("textarea",{value:u.notes,onChange:y=>j("notes",y.target.value),className:"input-md",rows:"3"})]})]}),t.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[t.jsx("button",{type:"button",onClick:d,disabled:v,className:"btn-solid btn-solid-gray",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:v,className:"btn-solid btn-solid-green",children:v?"Saving...":"Save Guardian"})]})]})]})})})}function xf({selectedInterventions:i=[],onChange:c,riskPresent:o=!1,showFavorites:d=!0}){const[u,b]=g.useState(!0),[h,x]=g.useState(null),[v,p]=g.useState(null),[j,f]=g.useState({}),[y,S]=g.useState("");g.useEffect(()=>{N()},[]);const N=async()=>{try{b(!0);const $=await Hp();p($),x(null)}catch($){console.error("Error loading interventions:",$),x($.message)}finally{b(!1)}},k=$=>{const U=i.includes($);c(U?i.filter(P=>P!==$):[...i,$])},O=$=>{f(U=>({...U,[$]:!U[$]}))};if(u)return t.jsx("div",{className:"text-gray-600",children:"Loading interventions..."});if(h)return t.jsxs("div",{className:"text-red-600",children:["Error loading interventions: ",h]});if(!v)return t.jsx("div",{className:"text-gray-600",children:"No interventions available"});const{grouped:E,favorites:H}=v,Q=[...E.tier1||[],...E.tier3||[],...E.tier4||[],...Object.values(E.tier2||{}).flat()],le=y?Q.filter($=>$.intervention_name.toLowerCase().includes(y.toLowerCase())):null;return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{children:t.jsx("input",{type:"text",value:y,onChange:$=>S($.target.value),placeholder:"Search interventions...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm"})}),y&&le&&t.jsxs("div",{children:[t.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:["Search Results (",le.length,")"]}),le.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:le.map($=>t.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[t.jsx("input",{type:"checkbox",checked:i.includes($.intervention_name),onChange:()=>k($.intervention_name),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-800",children:$.intervention_name})]},$.id))}):t.jsxs("div",{className:"text-gray-500 text-sm",children:['No interventions found matching "',y,'"']})]}),!y&&t.jsxs(t.Fragment,{children:[d&&H&&H.length>0&&t.jsxs("div",{children:[t.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Your Favorites"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:H.map($=>t.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[t.jsx("input",{type:"checkbox",checked:i.includes($.intervention_name),onChange:()=>k($.intervention_name),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-800",children:$.intervention_name})]},$.id))})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Core Interventions"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:E.tier1.map($=>t.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[t.jsx("input",{type:"checkbox",checked:i.includes($.intervention_name),onChange:()=>k($.intervention_name),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-800",children:$.intervention_name})]},$.id))})]}),Object.keys(E.tier2).length>0&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Modality-Specific Interventions"}),t.jsx("div",{className:"space-y-2",children:Object.entries(E.tier2).map(([$,U])=>t.jsxs("div",{className:"card-inner",children:[t.jsxs("button",{onClick:()=>O($),className:"w-full flex items-center justify-between p-3 text-left hover:bg-gray-50 rounded-lg transition-colors",children:[t.jsx("span",{className:"font-semibold text-gray-800",children:$}),t.jsx("svg",{className:`w-5 h-5 text-gray-600 transition-transform ${j[$]?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),j[$]&&t.jsx("div",{className:"px-3 pb-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:U.map(P=>t.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[t.jsx("input",{type:"checkbox",checked:i.includes(P.intervention_name),onChange:()=>k(P.intervention_name),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-800",children:P.intervention_name})]},P.id))})]},$))})]}),o&&E.tier3.length>0&&t.jsxs("div",{className:"border-2 border-orange-200 rounded-lg p-4 bg-orange-50",children:[t.jsxs("h4",{className:"text-sm font-semibold text-orange-800 mb-3 flex items-center gap-2",children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Crisis/Risk Interventions"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:E.tier3.map($=>t.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-orange-100 cursor-pointer transition-colors",children:[t.jsx("input",{type:"checkbox",checked:i.includes($.intervention_name),onChange:()=>k($.intervention_name),className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500"}),t.jsx("span",{className:"text-sm text-gray-800",children:$.intervention_name})]},$.id))})]}),E.tier4.length>0&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Administrative/Clinical Process"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:E.tier4.map($=>t.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[t.jsx("input",{type:"checkbox",checked:i.includes($.intervention_name),onChange:()=>k($.intervention_name),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-800",children:$.intervention_name})]},$.id))})]})]}),i.length>0&&t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[t.jsxs("div",{className:"text-sm font-semibold text-blue-800 mb-2",children:["Selected (",i.length,")"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:i.map($=>t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:[$,t.jsx("button",{onClick:()=>k($),className:"hover:text-blue-600 focus:outline-none",title:"Remove",children:""})]},$))})]})]})}function gf({patientId:i,serviceDate:c,selectedDiagnoses:o=[],onChange:d}){const[u,b]=g.useState([]),[h,x]=g.useState(!0),[v,p]=g.useState(null);g.useEffect(()=>{i&&j()},[i,c]);const j=async()=>{try{x(!0),p(null);const H=await Yp(i,{activeAsOf:c,includeRetired:!1});b(H.diagnoses||[])}catch(H){console.error("Error loading diagnoses:",H),p(H.message)}finally{x(!1)}},f=H=>H?H.length>=4?H.slice(0,3)+"."+H.slice(3):H:"",y=H=>{if(!H)return"";const Q=H.split(/\s{3,}/);return Q.length>1?Q[1].trim():H.trim()},S=H=>o.some(Q=>Q.code===H||Q===H),N=()=>{if(!o||o.length===0)return null;const H=o[0];return typeof H=="string"?H:H.code},k=H=>{const Q=H.diagnosis;if(S(Q)){const $=o.filter(U=>(typeof U=="string"?U:U.code)!==Q);d($)}else{const $={code:Q,description:H.title,isPrimary:o.length===0,billable:!0};d([...o,$])}},O=H=>{const Q=o.map(le=>({...typeof le=="string"?{code:le}:le,isPrimary:(typeof le=="string"?le:le.code)===H}));d(Q)};if(h)return t.jsx("div",{className:"text-sm text-gray-600 italic",children:"Loading active diagnoses..."});if(v)return t.jsxs("div",{className:"text-sm text-red-600",children:["Error loading diagnoses: ",v]});if(!u||u.length===0)return t.jsx("div",{className:"text-sm text-gray-600 bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:" No active diagnoses found for this patient. Please create a Diagnosis Note first."});const E=N();return t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Select all diagnoses addressed in this session. The first selected diagnosis will be marked as primary for billing purposes."}),t.jsx("div",{className:"space-y-2",children:u.map(H=>{const Q=H.diagnosis,le=S(Q),$=Q===E;return t.jsx("div",{className:`p-3 rounded-lg border-2 transition-all cursor-pointer ${le?"border-blue-400 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>k(H),children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("input",{type:"checkbox",checked:le,onChange:()=>k(H),onClick:U=>U.stopPropagation(),className:"mt-1 w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"font-mono text-sm font-semibold text-blue-700 bg-blue-100 px-2 py-0.5 rounded",children:f(Q)}),le&&$&&t.jsx("span",{className:"text-xs font-semibold text-green-700 bg-green-100 px-2 py-0.5 rounded",children:"PRIMARY"}),le&&!$&&t.jsx("button",{onClick:U=>{U.stopPropagation(),O(Q)},className:"text-xs text-blue-600 hover:text-blue-800 underline",children:"Set as primary"})]}),t.jsx("div",{className:"text-sm text-gray-800",children:y(H.title)}),H.begdate&&t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Since: ",new Date(H.begdate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]})},H.id)})}),o.length>0&&t.jsxs("div",{className:"text-xs text-gray-600 bg-blue-50 border border-blue-200 rounded-lg p-2 mt-2",children:[" ",o.length," diagnosis code",o.length!==1?"s":""," selected for this session"]})]})}function jb({note:i,onChange:c,patientId:o,autoSave:d}){const[u,b]=g.useState([]),[h,x]=g.useState(!0),[v,p]=g.useState(i.riskPresent||!1);g.useEffect(()=>{j()},[o]);const j=async()=>{try{x(!0);const N=await nf(o,{status:"active"});b(N.goals||[])}catch(N){console.error("Error loading treatment goals:",N)}finally{x(!1)}},f=(N,k)=>{c(N,k),d&&setTimeout(()=>d(),500)},y=N=>{p(N),f("riskPresent",N)},S=N=>{const k=i.goalsAddressed||[];k.includes(N)?f("goalsAddressed",k.filter(E=>E!==N)):f("goalsAddressed",[...k,N])};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"card-main bg-blue-50 border-2 border-blue-300",children:[t.jsxs("div",{className:"mb-3",children:[t.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Diagnosis Codes for This Session"})]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select all diagnoses addressed in this session. Required for billing and clinical documentation."})]}),t.jsx(gf,{patientId:o,serviceDate:i.date_of_service||new Date().toISOString().split("T")[0],selectedDiagnoses:i.diagnosis_codes||[],onChange:N=>f("diagnosis_codes",N)})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("label",{className:"block",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("span",{className:"font-semibold text-gray-800",children:[t.jsx("span",{className:"text-blue-600 mr-2",children:"B"}),"Behavior / What You Observed"]}),t.jsx("span",{className:"text-xs text-gray-500",children:"Client presentation, affect, mood"})]}),t.jsx("textarea",{value:i.behaviorProblem||"",onChange:N=>f("behaviorProblem",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Client presented as anxious with tearful affect. Reported difficulty sleeping and increased worry about work performance..."})]}),t.jsxs("div",{className:"mt-3",children:[t.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Quick Tags (Optional)"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:["Engaged","Tearful","Anxious","Flat affect","Guarded","Motivated","Resistant","Calm"].map(N=>{const k=(i.clientPresentation||[]).includes(N);return t.jsx("button",{onClick:()=>{const O=i.clientPresentation||[];k?f("clientPresentation",O.filter(E=>E!==N)):f("clientPresentation",[...O,N])},className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${k?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:N},N)})})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("div",{className:"flex items-center justify-between mb-2",children:t.jsxs("span",{className:"font-semibold text-gray-800",children:[t.jsx("span",{className:"text-blue-600 mr-2",children:"I"}),"Intervention / What You Did"]})}),t.jsx("textarea",{value:i.intervention||"",onChange:N=>f("intervention",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Narrative description of interventions used... (or use checkboxes below for quick selection)"})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[t.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Select Interventions Used"}),t.jsx(xf,{selectedInterventions:i.interventionsSelected||[],onChange:N=>f("interventionsSelected",N),riskPresent:v})]})]}),t.jsx("div",{className:"card-main",children:t.jsxs("label",{className:"block",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("span",{className:"font-semibold text-gray-800",children:[t.jsx("span",{className:"text-blue-600 mr-2",children:"R"}),"Response / How Client Responded"]}),t.jsx("span",{className:"text-xs text-gray-500",children:"Client's reaction to interventions"})]}),t.jsx("textarea",{value:i.response||"",onChange:N=>f("response",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Client engaged well with cognitive restructuring. Reported feeling less overwhelmed after identifying automatic thoughts. Demonstrated understanding of homework assignment..."})]})}),t.jsxs("div",{className:"card-main",children:[t.jsxs("label",{className:"block mb-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("span",{className:"font-semibold text-gray-800",children:[t.jsx("span",{className:"text-blue-600 mr-2",children:"P"}),"Plan / What's Next"]}),t.jsx("span",{className:"text-xs text-gray-500",children:"Homework, next steps, follow-up"})]}),t.jsx("textarea",{value:i.plan||"",onChange:N=>f("plan",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Continue weekly sessions. Homework: Practice thought records daily. Will reassess anxiety levels next session. May refer to psychiatry if no improvement..."})]}),!h&&u.length>0&&t.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[t.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Treatment Goals Addressed This Session"}),t.jsx("div",{className:"space-y-2",children:u.map(N=>t.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[t.jsx("input",{type:"checkbox",checked:(i.goalsAddressed||[]).includes(N.id),onChange:()=>S(N.id),className:"mt-0.5 w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-sm text-gray-800",children:N.goal_text}),N.goal_category&&t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:N.goal_category})]})]},N.id))})]})]}),t.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[t.jsxs("label",{className:"flex items-center gap-3 mb-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:v,onChange:N=>y(N.target.checked),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500"}),t.jsx("span",{className:"font-semibold text-gray-800",children:" Risk Present (suicide, homicide, self-harm)"})]}),v&&t.jsx("div",{className:"border-t-2 border-orange-200 pt-3",children:t.jsxs("label",{className:"block",children:[t.jsx("div",{className:"text-sm font-semibold text-orange-800 mb-2",children:"Risk Assessment Details (Required when risk is flagged)"}),t.jsx("textarea",{value:i.riskAssessment||"",onChange:N=>f("riskAssessment",N.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Document risk factors, protective factors, safety plan, level of risk, interventions used, follow-up plan...",required:v})]})})]})]})}function Nb({note:i,onChange:c,patientId:o,autoSave:d}){const[u,b]=g.useState([]),[h,x]=g.useState(!0),[v,p]=g.useState(i.riskPresent||!1);g.useEffect(()=>{j()},[o]);const j=async()=>{try{x(!0);const N=await nf(o,{status:"active"});b(N.goals||[])}catch(N){console.error("Error loading treatment goals:",N)}finally{x(!1)}},f=(N,k)=>{c(N,k),d&&setTimeout(()=>d(),500)},y=N=>{p(N),f("riskPresent",N)},S=N=>{const k=i.goalsAddressed||[];k.includes(N)?f("goalsAddressed",k.filter(E=>E!==N)):f("goalsAddressed",[...k,N])};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"card-main bg-blue-50 border-2 border-blue-300",children:[t.jsxs("div",{className:"mb-3",children:[t.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Diagnosis Codes for This Session"})]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select all diagnoses addressed in this session. Required for billing and clinical documentation."})]}),t.jsx(gf,{patientId:o,serviceDate:i.date_of_service||new Date().toISOString().split("T")[0],selectedDiagnoses:i.diagnosis_codes||[],onChange:N=>f("diagnosis_codes",N)})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("label",{className:"block",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("span",{className:"font-semibold text-gray-800",children:[t.jsx("span",{className:"text-purple-600 mr-2",children:"P"}),"Problem / Presenting Issue"]}),t.jsx("span",{className:"text-xs text-gray-500",children:"Chief complaint, reason for session"})]}),t.jsx("textarea",{value:i.behaviorProblem||"",onChange:N=>f("behaviorProblem",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Client reports increased anxiety related to work stress. Difficulty concentrating, racing thoughts, sleep disruption. Concerned about upcoming performance review..."})]}),t.jsxs("div",{className:"mt-3",children:[t.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Quick Tags (Optional)"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:["Anxiety","Depression","Stress","Trauma","Grief","Relationship Issues","Work Stress","Sleep Issues","Anger","Self-Esteem"].map(N=>{const k=(i.clientPresentation||[]).includes(N);return t.jsx("button",{onClick:()=>{const O=i.clientPresentation||[];k?f("clientPresentation",O.filter(E=>E!==N)):f("clientPresentation",[...O,N])},className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${k?"bg-purple-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:N},N)})})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("div",{className:"flex items-center justify-between mb-2",children:t.jsxs("span",{className:"font-semibold text-gray-800",children:[t.jsx("span",{className:"text-purple-600 mr-2",children:"I"}),"Intervention / What You Did"]})}),t.jsx("textarea",{value:i.intervention||"",onChange:N=>f("intervention",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Narrative description of interventions used... (or use checkboxes below for quick selection)"})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[t.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Select Interventions Used"}),t.jsx(xf,{selectedInterventions:i.interventionsSelected||[],onChange:N=>f("interventionsSelected",N),riskPresent:v})]})]}),t.jsx("div",{className:"card-main",children:t.jsxs("label",{className:"block",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("span",{className:"font-semibold text-gray-800",children:[t.jsx("span",{className:"text-purple-600 mr-2",children:"R"}),"Response / How Client Responded"]}),t.jsx("span",{className:"text-xs text-gray-500",children:"Client's reaction to interventions"})]}),t.jsx("textarea",{value:i.response||"",onChange:N=>f("response",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Client reported feeling validated after reframing negative thoughts. Expressed willingness to practice relaxation techniques. Appeared more hopeful by end of session..."})]})}),t.jsxs("div",{className:"card-main",children:[t.jsxs("label",{className:"block mb-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("span",{className:"font-semibold text-gray-800",children:[t.jsx("span",{className:"text-purple-600 mr-2",children:"P"}),"Plan / What's Next"]}),t.jsx("span",{className:"text-xs text-gray-500",children:"Homework, next steps, follow-up"})]}),t.jsx("textarea",{value:i.plan||"",onChange:N=>f("plan",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Continue weekly sessions. Homework: Practice deep breathing 3x daily. Client will monitor anxiety levels in journal. Follow up on work situation next session..."})]}),!h&&u.length>0&&t.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[t.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Treatment Goals Addressed This Session"}),t.jsx("div",{className:"space-y-2",children:u.map(N=>t.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-purple-50 cursor-pointer transition-colors",children:[t.jsx("input",{type:"checkbox",checked:(i.goalsAddressed||[]).includes(N.id),onChange:()=>S(N.id),className:"mt-0.5 w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-sm text-gray-800",children:N.goal_text}),N.goal_category&&t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:N.goal_category})]})]},N.id))})]})]}),t.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[t.jsxs("label",{className:"flex items-center gap-3 mb-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:v,onChange:N=>y(N.target.checked),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500"}),t.jsx("span",{className:"font-semibold text-gray-800",children:" Risk Present (suicide, homicide, self-harm)"})]}),v&&t.jsx("div",{className:"border-t-2 border-orange-200 pt-3",children:t.jsxs("label",{className:"block",children:[t.jsx("div",{className:"text-sm font-semibold text-orange-800 mb-2",children:"Risk Assessment Details (Required when risk is flagged)"}),t.jsx("textarea",{value:i.riskAssessment||"",onChange:N=>f("riskAssessment",N.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Document risk factors, protective factors, safety plan, level of risk, interventions used, follow-up plan...",required:v})]})})]})]})}function wb({note:i,onChange:c,autoSave:o}){const[d,u]=g.useState(i.riskPresent||!1),b=(f,y)=>{c(f,y),o&&setTimeout(()=>o(),500)},h=f=>{u(f),b("riskPresent",f)},x=f=>(i.mentalStatusExam||{})[f]||"",v=(f,y)=>{const S=i.mentalStatusExam||{};b("mentalStatusExam",{...S,[f]:y})},p=({label:f,field:y,options:S})=>t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:f}),t.jsxs("select",{value:x(y),onChange:N=>v(y,N.target.value),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white shadow-sm",children:[t.jsx("option",{value:"",children:"Select..."}),S.map(N=>t.jsx("option",{value:N,children:N},N))]})]})}),j=({label:f,field:y,placeholder:S,rows:N=3})=>t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:f}),t.jsx("textarea",{value:x(y),onChange:k=>v(y,k.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 resize-none bg-white shadow-sm",rows:N,placeholder:S})]})});return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-teal-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Appearance & Grooming"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(p,{label:"General Appearance",field:"appearance",options:["Well-groomed","Disheveled","Unkempt","Bizarre","Appropriate","Casual"]}),t.jsx(p,{label:"Hygiene",field:"hygiene",options:["Good","Fair","Poor","Malodorous"]})]}),t.jsx("div",{className:"mt-4",children:t.jsx(j,{label:"Additional Notes",field:"appearanceNotes",placeholder:"Additional observations about appearance...",rows:2})})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-teal-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Behavior & Motor Activity"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(p,{label:"Psychomotor Activity",field:"psychomotorActivity",options:["Normal","Agitated","Retarded","Restless","Hyperactive","Lethargic"]}),t.jsx(p,{label:"Eye Contact",field:"eyeContact",options:["Good","Fair","Poor","Avoidant","Intense/Staring"]})]}),t.jsx("div",{className:"mt-4",children:t.jsx(j,{label:"Additional Behavioral Observations",field:"behaviorNotes",placeholder:"Tics, tremors, mannerisms, gait, posture...",rows:2})})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-teal-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Speech"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx(p,{label:"Rate",field:"speechRate",options:["Normal","Slow","Rapid","Pressured"]}),t.jsx(p,{label:"Volume",field:"speechVolume",options:["Normal","Loud","Soft","Whispered"]}),t.jsx(p,{label:"Tone",field:"speechTone",options:["Normal","Monotone","Varied","Flat"]})]}),t.jsx("div",{className:"mt-4",children:t.jsx(j,{label:"Speech Characteristics",field:"speechNotes",placeholder:"Slurred, stuttering, articulation issues...",rows:2})})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-teal-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Mood & Affect"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Mood (subjective)"}),t.jsx("input",{type:"text",value:x("mood"),onChange:f=>v("mood",f.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white shadow-sm",placeholder:"Client's own words (e.g., 'sad', 'anxious')"})]})}),t.jsx(p,{label:"Affect (objective)",field:"affect",options:["Appropriate","Flat","Blunted","Labile","Restricted","Congruent","Incongruent"]})]}),t.jsx("div",{className:"mt-4",children:t.jsx(j,{label:"Mood & Affect Details",field:"moodNotes",placeholder:"Congruence, range, reactivity...",rows:2})})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-teal-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Thought Process"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(p,{label:"Organization",field:"thoughtProcess",options:["Logical","Goal-directed","Tangential","Circumstantial","Loose associations","Flight of ideas","Thought blocking"]}),t.jsx(p,{label:"Flow",field:"thoughtFlow",options:["Normal","Rapid","Slow","Interrupted"]})]}),t.jsx("div",{className:"mt-4",children:t.jsx(j,{label:"Additional Observations",field:"thoughtProcessNotes",placeholder:"Racing thoughts, ruminations, perseverations...",rows:2})})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-teal-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Thought Content"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"flex flex-wrap gap-3",children:["Suicidal ideation","Homicidal ideation","Delusions","Obsessions","Phobias","Paranoia"].map(f=>t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:(x("thoughtContent")||[]).includes(f),onChange:y=>{const S=x("thoughtContent")||[],N=y.target.checked?[...S,f]:S.filter(k=>k!==f);v("thoughtContent",N)},className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:f})]},f))}),t.jsx(j,{label:"Thought Content Details",field:"thoughtContentNotes",placeholder:"Describe any concerning thought content, including intent, plan, means...",rows:3})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-teal-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Perception"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"flex flex-wrap gap-3",children:["No perceptual disturbances","Auditory hallucinations","Visual hallucinations","Tactile hallucinations","Illusions","Depersonalization","Derealization"].map(f=>t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:(x("perception")||[]).includes(f),onChange:y=>{const S=x("perception")||[],N=y.target.checked?[...S,f]:S.filter(k=>k!==f);v("perception",N)},className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:f})]},f))}),t.jsx(j,{label:"Perception Details",field:"perceptionNotes",placeholder:"Describe any perceptual disturbances...",rows:2})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-teal-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Cognition"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx(p,{label:"Orientation",field:"orientation",options:["Oriented x4","Oriented x3","Oriented x2","Oriented x1","Disoriented"]}),t.jsx(p,{label:"Memory",field:"memory",options:["Intact","Impaired recent","Impaired remote","Impaired both"]}),t.jsx(p,{label:"Concentration",field:"concentration",options:["Good","Fair","Poor","Distractible"]})]}),t.jsx("div",{className:"mt-4",children:t.jsx(j,{label:"Cognitive Details",field:"cognitionNotes",placeholder:"Attention, abstract thinking, calculations...",rows:2})})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-teal-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Insight & Judgment"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(p,{label:"Insight",field:"insight",options:["Good","Fair","Poor","Absent"]}),t.jsx(p,{label:"Judgment",field:"judgment",options:["Good","Fair","Poor","Impaired"]})]}),t.jsx("div",{className:"mt-4",children:t.jsx(j,{label:"Insight & Judgment Details",field:"insightJudgmentNotes",placeholder:"Awareness of illness, decision-making capacity...",rows:2})})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-teal-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Clinical Summary & Impressions"]}),t.jsx(j,{label:"Summary",field:"summary",placeholder:"Overall clinical impression, diagnostic considerations, recommendations...",rows:5})]}),t.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[t.jsxs("label",{className:"flex items-center gap-3 mb-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:d,onChange:f=>h(f.target.checked),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500"}),t.jsx("span",{className:"font-semibold text-gray-800",children:" Risk Present (suicide, homicide, self-harm)"})]}),d&&t.jsx("div",{className:"border-t-2 border-orange-200 pt-3",children:t.jsxs("label",{className:"block",children:[t.jsx("div",{className:"text-sm font-semibold text-orange-800 mb-2",children:"Risk Assessment Details (Required when risk is flagged)"}),t.jsx("textarea",{value:i.riskAssessment||"",onChange:f=>b("riskAssessment",f.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Document risk factors, protective factors, safety plan, level of risk, interventions used, follow-up plan...",required:d})]})})]})]})}function Sb({medications:i=[],onChange:c}){const[o,d]=g.useState(!1),[u,b]=g.useState(null),[h,x]=g.useState({name:"",dosage:"",frequency:"",prescriber:"",purpose:""}),v=()=>{x({name:"",dosage:"",frequency:"",prescriber:"",purpose:""}),d(!1),b(null)},p=()=>{if(!h.name.trim())return;const S={...h},N=[...i,S];c(N),v()},j=S=>{x(i[S]),b(S),d(!0)},f=()=>{if(!h.name.trim())return;const S=[...i];S[u]={...h},c(S),v()},y=S=>{const N=i.filter((k,O)=>O!==S);c(N)};return t.jsxs("div",{className:"space-y-4",children:[i.length>0&&t.jsx("div",{className:"space-y-2",children:i.map((S,N)=>t.jsx("div",{className:"p-3 bg-white border-2 border-gray-300 rounded-lg hover:border-indigo-400 transition-colors",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"font-semibold text-gray-900",children:[S.name,S.dosage&&t.jsx("span",{className:"ml-2 text-indigo-600",children:S.dosage})]}),S.frequency&&t.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Frequency: ",S.frequency]}),S.prescriber&&t.jsxs("div",{className:"text-sm text-gray-600",children:["Prescribed by: ",S.prescriber]}),S.purpose&&t.jsxs("div",{className:"text-sm text-gray-600",children:["For: ",S.purpose]})]}),t.jsxs("div",{className:"flex gap-2 ml-4",children:[t.jsx("button",{onClick:()=>j(N),className:"text-sm text-indigo-600 hover:text-indigo-800 underline",children:"Edit"}),t.jsx("button",{onClick:()=>y(N),className:"text-sm text-red-600 hover:text-red-800 underline",children:"Remove"})]})]})},N))}),o?t.jsxs("div",{className:"p-4 bg-indigo-50 border-2 border-indigo-300 rounded-lg space-y-3",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsxs("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:["Medication Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:h.name,onChange:S=>x({...h,name:S.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Sertraline, Adderall XR",autoFocus:!0})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Dosage"}),t.jsx("input",{type:"text",value:h.dosage,onChange:S=>x({...h,dosage:S.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., 50mg, 20mg XR"})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Frequency"}),t.jsx("input",{type:"text",value:h.frequency,onChange:S=>x({...h,frequency:S.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Once daily, Twice daily"})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Prescriber"}),t.jsx("input",{type:"text",value:h.prescriber,onChange:S=>x({...h,prescriber:S.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Dr. Smith, Psychiatrist"})]})}),t.jsx("div",{className:"md:col-span-2",children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"What it's for"}),t.jsx("input",{type:"text",value:h.purpose,onChange:S=>x({...h,purpose:S.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Depression, ADHD, Anxiety"})]})})]}),t.jsxs("div",{className:"flex gap-2 pt-2",children:[t.jsx("button",{onClick:u!==null?f:p,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:u!==null?"Update Medication":"Add Medication"}),t.jsx("button",{onClick:v,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 font-medium",children:"Cancel"})]})]}):t.jsx("button",{onClick:()=>d(!0),className:"w-full px-4 py-3 border-2 border-dashed border-indigo-400 rounded-lg text-indigo-700 font-medium hover:bg-indigo-50 transition-colors",children:"+ Add Medication"}),i.length===0&&!o&&t.jsx("div",{className:"text-sm text-gray-500 italic text-center py-2",children:"No medications documented yet"})]})}function _b({note:i,onChange:c,autoSave:o}){const[d,u]=g.useState(i.riskPresent||!1),b=(p,j)=>{c(p,j),o&&setTimeout(()=>o(),500)},h=p=>{u(p),b("riskPresent",p)},x=p=>(i.presentingConcerns||{})[p]||"",v=(p,j)=>{const f=i.presentingConcerns||{};b("presentingConcerns",{...f,[p]:j})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Presenting Problem / Chief Complaint"]}),t.jsx("textarea",{value:i.behaviorProblem||"",onChange:p=>b("behaviorProblem",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"In client's own words: What brings you in today? What are you hoping to work on?"})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"History of Present Illness"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Duration & Onset"}),t.jsx("textarea",{value:x("duration"),onChange:p=>v("duration",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"When did symptoms begin? What was happening at that time?"})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Frequency & Severity"}),t.jsx("textarea",{value:x("frequency"),onChange:p=>v("frequency",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"How often? How severe? What makes it better/worse?"})]})})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Previous Mental Health Treatment"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Prior Therapy/Counseling"}),t.jsx("textarea",{value:x("priorTherapy"),onChange:p=>v("priorTherapy",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"When? With whom? What was helpful/not helpful?"})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Psychiatric Hospitalizations"}),t.jsx("textarea",{value:x("hospitalizations"),onChange:p=>v("hospitalizations",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Dates, reasons, outcomes..."})]})})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Family History"]}),t.jsx("textarea",{value:x("familyHistory"),onChange:p=>v("familyHistory",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Mental health diagnoses, substance use, suicide attempts in family members..."})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Substance Use"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Alcohol Use"}),t.jsx("textarea",{value:x("alcoholUse"),onChange:p=>v("alcoholUse",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Frequency, amount, history of abuse..."})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Drug Use (Recreational/Prescription)"}),t.jsx("textarea",{value:x("drugUse"),onChange:p=>v("drugUse",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Substances, frequency, history..."})]})})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Medical History"]}),t.jsx("textarea",{value:x("medicalHistory"),onChange:p=>v("medicalHistory",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Chronic conditions, surgeries, head injuries, neurological issues..."})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Current Medications"]}),t.jsx("div",{className:"text-sm text-gray-600 mb-4",children:"Document all medications the client is currently taking (psychiatric, medical, OTC, supplements). This includes medications prescribed by psychiatrists, PCPs, and other providers."}),t.jsx(Sb,{medications:i.currentMedications||[],onChange:p=>b("currentMedications",p)})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Social & Developmental History"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Childhood/Development"}),t.jsx("textarea",{value:x("childhood"),onChange:p=>v("childhood",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Developmental milestones, childhood experiences, trauma..."})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Education & Employment"}),t.jsx("textarea",{value:x("education"),onChange:p=>v("education",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Highest education, current employment, work history..."})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Relationships & Support System"}),t.jsx("textarea",{value:x("relationships"),onChange:p=>v("relationships",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Marital status, children, family support, friends..."})]})})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Current Functioning"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Sleep"}),t.jsx("input",{type:"text",value:x("sleep"),onChange:p=>v("sleep",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white shadow-sm",placeholder:"Hours per night, quality, difficulties..."})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Appetite/Eating"}),t.jsx("input",{type:"text",value:x("appetite"),onChange:p=>v("appetite",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white shadow-sm",placeholder:"Changes, patterns, concerns..."})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Energy Level"}),t.jsx("input",{type:"text",value:x("energy"),onChange:p=>v("energy",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white shadow-sm",placeholder:"Fatigue, motivation, activity level..."})]})})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Treatment Goals"]}),t.jsx("textarea",{value:i.plan||"",onChange:p=>b("plan",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"What does the client hope to achieve? What are the initial treatment goals? Recommended frequency of sessions?"})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Clinical Impressions & Diagnostic Considerations"]}),t.jsx("textarea",{value:x("impressions"),onChange:p=>v("impressions",p.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Initial clinical formulation, provisional diagnoses, treatment recommendations..."})]}),t.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[t.jsxs("label",{className:"flex items-center gap-3 mb-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:d,onChange:p=>h(p.target.checked),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500"}),t.jsx("span",{className:"font-semibold text-gray-800",children:" Risk Present (suicide, homicide, self-harm)"})]}),d&&t.jsx("div",{className:"border-t-2 border-orange-200 pt-3",children:t.jsxs("label",{className:"block",children:[t.jsx("div",{className:"text-sm font-semibold text-orange-800 mb-2",children:"Risk Assessment Details (Required when risk is flagged)"}),t.jsx("textarea",{value:i.riskAssessment||"",onChange:p=>b("riskAssessment",p.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Document risk factors, protective factors, safety plan, level of risk, interventions used, follow-up plan...",required:d})]})})]})]})}function Cb({note:i,onChange:c,autoSave:o}){const d=(h,x)=>{c(h,x),o&&setTimeout(()=>o(),500)},u=h=>(i.clinicalObservations||{})[h]||"",b=(h,x)=>{const v=i.clinicalObservations||{};d("clinicalObservations",{...v,[h]:x})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-emerald-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Reason for Discharge"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"flex flex-wrap gap-3",children:["Treatment goals achieved","Client request","Mutual agreement","Client no-show","Administrative discharge","Transfer to another provider","Other"].map(h=>t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"radio",name:"dischargeReason",value:h,checked:u("dischargeReason")===h,onChange:x=>b("dischargeReason",x.target.value),className:"w-4 h-4 text-emerald-600"}),t.jsx("span",{className:"text-sm text-gray-700",children:h})]},h))}),t.jsx("textarea",{value:u("dischargeReasonDetails"),onChange:h=>b("dischargeReasonDetails",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Additional details..."})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-emerald-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Treatment Summary"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Dates of Treatment"}),t.jsx("input",{type:"text",value:u("treatmentDates"),onChange:h=>b("treatmentDates",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white shadow-sm",placeholder:"From [date] to [date] - Total of X sessions"})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Presenting Problem (at intake)"}),t.jsx("textarea",{value:i.behaviorProblem||"",onChange:h=>d("behaviorProblem",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"What brought client to treatment..."})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Diagnosis/Diagnoses"}),t.jsx("textarea",{value:u("diagnoses"),onChange:h=>b("diagnoses",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Primary and secondary diagnoses..."})]})})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-emerald-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Interventions & Treatment Modalities"]}),t.jsx("textarea",{value:i.intervention||"",onChange:h=>d("intervention",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"CBT, DBT, EMDR, supportive counseling, psychoeducation, medication management..."})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-emerald-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Progress & Treatment Outcomes"]}),t.jsx("textarea",{value:i.response||"",onChange:h=>d("response",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Describe client progress toward treatment goals, symptom reduction, skill development, behavioral changes..."})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-emerald-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Current Status at Discharge"]}),t.jsx("textarea",{value:u("currentStatus"),onChange:h=>b("currentStatus",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Current symptoms, functioning level, remaining challenges, strengths..."})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-emerald-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Recommendations & Follow-Up Plan"]}),t.jsx("textarea",{value:i.plan||"",onChange:h=>d("plan",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Future treatment recommendations, referrals, follow-up care, relapse prevention strategies, resources provided..."})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-emerald-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Prognosis"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"flex gap-4",children:["Excellent","Good","Fair","Guarded","Poor"].map(h=>t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"radio",name:"prognosis",value:h,checked:u("prognosis")===h,onChange:x=>b("prognosis",x.target.value),className:"w-4 h-4 text-emerald-600"}),t.jsx("span",{className:"text-sm text-gray-700",children:h})]},h))}),t.jsx("textarea",{value:u("prognosisDetails"),onChange:h=>b("prognosisDetails",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Additional prognosis details..."})]})]})]})}function Eb({note:i,onChange:c,autoSave:o}){const d=(u,b)=>{c(u,b),o&&setTimeout(()=>o(),500)};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"card-main bg-red-50 border-2 border-red-400",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:""}),t.jsx("h3",{className:"text-xl font-bold text-red-800",children:"Crisis/Emergency Documentation"})]}),t.jsx("p",{className:"text-sm text-red-700",children:"Document all crisis assessments, interventions, and safety planning thoroughly."})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-red-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Crisis Presentation"]}),t.jsx("textarea",{value:i.behaviorProblem||"",onChange:u=>d("behaviorProblem",u.target.value),className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Describe the crisis situation: What happened? When? Who was involved? Client's presentation and immediate concerns...",required:!0})]}),t.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-400",children:[t.jsxs("h3",{className:"text-lg font-semibold text-orange-800 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Risk Assessment (REQUIRED)"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-orange-800 mb-2 block",children:"Risk Level"}),t.jsx("div",{className:"flex gap-4",children:["Low","Moderate","High","Imminent"].map(u=>t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"radio",name:"riskLevel",value:u,className:"w-4 h-4 text-orange-600"}),t.jsx("span",{className:`text-sm font-medium ${u==="Imminent"||u==="High"?"text-red-700":"text-gray-700"}`,children:u})]},u))})]})}),t.jsx("textarea",{value:i.riskAssessment||"",onChange:u=>d("riskAssessment",u.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"6",placeholder:`DETAILED RISK ASSESSMENT REQUIRED:
- Suicidal ideation (intent, plan, means, timeline)?
- Homicidal ideation (intent, plan, means, target)?
- Self-harm behaviors?
- Substance use/intoxication?
- Risk factors vs. protective factors
- Access to lethal means
- Support system availability
- History of attempts`,required:!0})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-red-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Crisis Interventions Provided"]}),t.jsx("textarea",{value:i.intervention||"",onChange:u=>d("intervention",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"What interventions were used? (e.g., crisis counseling, de-escalation, safety planning, referrals, emergency contacts, medication evaluation, hospitalization consideration...)",required:!0})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-red-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Client Response to Intervention"]}),t.jsx("textarea",{value:i.response||"",onChange:u=>d("response",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"How did client respond to interventions? Mood/affect changes? Willingness to engage in safety planning?",required:!0})]}),t.jsxs("div",{className:"card-main bg-green-50 border-2 border-green-400",children:[t.jsxs("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Safety Plan (REQUIRED)"]}),t.jsx("textarea",{value:i.plan||"",onChange:u=>d("plan",u.target.value),className:"w-full px-4 py-3 border-2 border-green-400 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none bg-white shadow-sm",rows:"6",placeholder:`DETAILED SAFETY PLAN REQUIRED:
- Warning signs/triggers identified
- Internal coping strategies
- People/places for distraction
- Support contacts (names & numbers)
- Professional resources (crisis line, emergency services)
- Means restriction (removing lethal means)
- Follow-up plan
- Emergency numbers provided (988, local crisis line, etc.)`,required:!0})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-red-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Disposition & Follow-Up Plan"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Disposition"}),t.jsx("div",{className:"flex flex-wrap gap-3",children:["Returned home with safety plan","Emergency contact notified","Referred to higher level of care","Voluntary hospitalization","Involuntary commitment initiated","Police/EMS contacted","Other"].map(u=>t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",className:"w-4 h-4 text-red-600 rounded"}),t.jsx("span",{className:"text-sm text-gray-700",children:u})]},u))})]})}),t.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Follow-up plan: Next appointment scheduled? Emergency contacts? Referrals made?"})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-red-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Collateral Contacts (if any)"]}),t.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Document any contact with family, emergency services, other providers, etc."})]})]})}function Db({note:i,onChange:c,autoSave:o}){const d=(u,b)=>{c(u,b),o&&setTimeout(()=>o(),500)};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-400",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-3xl",children:""}),t.jsx("h3",{className:"text-xl font-bold text-orange-800",children:"Comprehensive Risk Assessment"})]}),t.jsx("p",{className:"text-sm text-orange-700",children:"Thorough evaluation of suicide, homicide, and self-harm risk with safety planning."})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-orange-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Reason for Assessment"]}),t.jsx("textarea",{value:i.behaviorProblem||"",onChange:u=>d("behaviorProblem",u.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"What prompted this risk assessment?"})]}),t.jsxs("div",{className:"card-main bg-red-50 border-2 border-red-300",children:[t.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Suicidal Ideation Assessment"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:t.jsxs("label",{className:"flex items-center gap-3 mb-2",children:[t.jsx("input",{type:"checkbox",className:"w-5 h-5 text-red-600 rounded"}),t.jsx("span",{className:"font-semibold text-red-800",children:"Current suicidal ideation present"})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Ideation Frequency"}),t.jsxs("select",{className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg bg-white shadow-sm",children:[t.jsx("option",{children:"None"}),t.jsx("option",{children:"Rare (few times/year)"}),t.jsx("option",{children:"Occasional (monthly)"}),t.jsx("option",{children:"Frequent (weekly)"}),t.jsx("option",{children:"Daily"}),t.jsx("option",{children:"Constant"})]})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Intent Level"}),t.jsxs("select",{className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg bg-white shadow-sm",children:[t.jsx("option",{children:"No intent"}),t.jsx("option",{children:"Low (passive wishes)"}),t.jsx("option",{children:"Moderate (some intent)"}),t.jsx("option",{children:"High (strong intent)"}),t.jsx("option",{children:"Imminent"})]})]})})]}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Plan Details"}),t.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Is there a plan? How specific? How lethal?"})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Access to Means"}),t.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Does client have access to lethal means (firearms, medications, etc.)?"})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Timeline"}),t.jsx("input",{type:"text",className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 bg-white shadow-sm",placeholder:"When? Immediate? Within days/weeks?"})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Previous Attempts"}),t.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-red-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"History of suicide attempts? When? Method? Outcome?"})]})})]})]}),t.jsxs("div",{className:"card-main bg-red-50 border-2 border-red-300",children:[t.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Homicidal/Violence Risk Assessment"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:t.jsxs("label",{className:"flex items-center gap-3 mb-2",children:[t.jsx("input",{type:"checkbox",className:"w-5 h-5 text-red-600 rounded"}),t.jsx("span",{className:"font-semibold text-red-800",children:"Homicidal ideation or violence risk present"})]})}),t.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Target identified? Plan? Access to weapons? History of violence? Duty to warn considerations?"})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-orange-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Self-Harm Assessment"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{children:t.jsxs("label",{className:"flex items-center gap-3 mb-2",children:[t.jsx("input",{type:"checkbox",className:"w-5 h-5 text-orange-600 rounded"}),t.jsx("span",{className:"font-semibold text-gray-700",children:"Non-suicidal self-injury present"})]})}),t.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-orange-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Methods? Frequency? Function (emotion regulation, punishment, etc.)?"})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-orange-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Risk & Protective Factors"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-red-700 mb-2 block",children:"Risk Factors"}),t.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 resize-none bg-white shadow-sm",rows:"5",placeholder:`- Recent losses
- Substance use
- Social isolation
- Hopelessness
- Impulsivity
- Access to means
- Mental health symptoms
- Financial/legal problems`})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-green-700 mb-2 block",children:"Protective Factors"}),t.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-green-400 rounded-lg focus:ring-2 focus:ring-green-500 resize-none bg-white shadow-sm",rows:"5",placeholder:`- Strong support system
- Reasons for living
- Engaged in treatment
- Coping skills
- Religious/spiritual beliefs
- Future goals
- Responsibility to others
- Problem-solving ability`})]})})]})]}),t.jsxs("div",{className:"card-main bg-orange-100 border-2 border-orange-400",children:[t.jsxs("h3",{className:"text-lg font-semibold text-orange-800 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Overall Risk Level"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"flex gap-4",children:["Low","Low-Moderate","Moderate","Moderate-High","High","Imminent"].map(u=>t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"radio",name:"overallRisk",value:u,className:"w-4 h-4 text-orange-600"}),t.jsx("span",{className:`text-sm font-medium ${u.includes("High")||u==="Imminent"?"text-red-700":"text-gray-700"}`,children:u})]},u))}),t.jsx("textarea",{value:i.riskAssessment||"",onChange:u=>d("riskAssessment",u.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Clinical rationale for risk level determination...",required:!0})]})]}),t.jsxs("div",{className:"card-main bg-green-50 border-2 border-green-400",children:[t.jsxs("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Interventions & Safety Plan"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Interventions Provided"}),t.jsx("textarea",{value:i.intervention||"",onChange:u=>d("intervention",u.target.value),className:"w-full px-4 py-3 border-2 border-green-400 rounded-lg focus:ring-2 focus:ring-green-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Crisis counseling, means restriction, emergency contacts, referrals..."})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Safety Plan"}),t.jsx("textarea",{value:i.plan||"",onChange:u=>d("plan",u.target.value),className:"w-full px-4 py-3 border-2 border-green-400 rounded-lg focus:ring-2 focus:ring-green-500 resize-none bg-white shadow-sm",rows:"6",placeholder:`Detailed safety plan:
- Warning signs
- Coping strategies
- Distraction activities
- Support contacts (names & numbers)
- Professional resources
- Crisis line numbers (988)
- Means restriction plan
- Follow-up schedule`,required:!0})]})})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-orange-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Follow-Up Plan"]}),t.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-orange-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Next appointment? Frequency of contact? Collateral involvement? Referrals?"})]})]})}function kb({note:i,onChange:c,autoSave:o}){const d=(u,b)=>{c(u,b),o&&setTimeout(()=>o(),500)};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Type of Administrative Note"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:["Care coordination","Consultation with colleague","Phone contact","Email correspondence","Collateral contact","Documentation review","Treatment planning","Case management","Supervision notes","Peer review","Quality assurance","Insurance coordination","Referral coordination","Records request","Other"].map(u=>t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",className:"w-4 h-4 text-gray-600 rounded"}),t.jsx("span",{className:"text-sm text-gray-700",children:u})]},u))})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Details"]}),t.jsx("textarea",{value:i.behaviorProblem||"",onChange:u=>d("behaviorProblem",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 resize-none bg-white shadow-sm",rows:"8",placeholder:`Document the administrative activity:

- Date and time
- Who was involved (names, roles)
- Purpose of contact/activity
- Information discussed or exchanged
- Decisions made
- Follow-up needed
- Documents generated or reviewed`})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Participants/Contacts"]}),t.jsx("textarea",{value:i.intervention||"",onChange:u=>d("intervention",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Who was involved? (Names, organizations, roles)"})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Outcome & Actions Taken"]}),t.jsx("textarea",{value:i.response||"",onChange:u=>d("response",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"What was accomplished? Any decisions or agreements?"})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Follow-Up Required"]}),t.jsx("textarea",{value:i.plan||"",onChange:u=>d("plan",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Next steps? Who is responsible? Timeline?"})]}),t.jsxs("div",{className:"card-main bg-gray-50",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Additional Notes"]}),t.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Any other relevant information..."})]}),t.jsxs("div",{className:"card-main bg-blue-50 border-2 border-blue-300",children:[t.jsxs("h3",{className:"text-lg font-semibold text-blue-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Time Documentation"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Duration (minutes)"}),t.jsx("input",{type:"number",className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white shadow-sm",placeholder:"0",min:"0"})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Billable?"}),t.jsxs("select",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white shadow-sm",children:[t.jsx("option",{children:"Yes"}),t.jsx("option",{children:"No"}),t.jsx("option",{children:"To be determined"})]})]})})]})]})]})}const Ab=["Mild","Moderate","Severe","In partial remission","In full remission","With psychotic features","Unspecified"],Mh=i=>!i||i.length<4?i:i.slice(0,3)+"."+i.slice(3);function Tb({selectedCodes:i=[],onChange:c,maxBillable:o=4,showBillableToggle:d=!0,showPrimarySelector:u=!0,showSeveritySelector:b=!0,disabled:h=!1}){const[x,v]=g.useState(""),[p,j]=g.useState([]),[f,y]=g.useState(!1),[S,N]=g.useState(!1),[k,O]=g.useState(null),[E,H]=g.useState({top:0,left:0,width:0}),Q=g.useRef(null),le=g.useRef(null),$=g.useRef(null);g.useEffect(()=>{if(Q.current&&clearTimeout(Q.current),x.length<2){j([]),N(!1);return}return Q.current=setTimeout(async()=>{y(!0),O(null);try{const te=await qp(x,"ICD10",50);j(te.codes||[]),N(!0)}catch(te){console.error("Error searching codes:",te),O("Failed to search codes. Please try again."),j([])}finally{y(!1)}},300),()=>{Q.current&&clearTimeout(Q.current)}},[x]),g.useEffect(()=>{if(S&&$.current){const te=$.current.getBoundingClientRect();H({top:te.bottom+window.scrollY,left:te.left+window.scrollX,width:te.width})}},[S]),g.useEffect(()=>{const te=Y=>{le.current&&!le.current.contains(Y.target)&&N(!1)};return document.addEventListener("mousedown",te),()=>document.removeEventListener("mousedown",te)},[]);const U=te=>{if(i.some(_=>_.code===te.code)){O(`${te.code} is already selected`);return}const Y=i.filter(_=>_.billable).length,A={code:te.code,description:te.description,billable:Y<o,primary:i.length===0,severity:null};c([...i,A]),v(""),N(!1),O(null)},P=te=>{const Y=i.filter(A=>A.code!==te);i.find(A=>A.code===te)?.primary&&Y.length>0&&(Y[0].primary=!0),c(Y)},ve=(te,Y,A)=>{const _=i.map(T=>{if(T.code===te){const q={...T,[Y]:A};return q}return Y==="primary"&&A===!0?{...T,primary:!1}:T});if(Y==="billable"&&A===!0&&_.filter(q=>q.billable).length>o){O(`Maximum ${o} billable diagnoses allowed`);return}c(_),O(null)},he=te=>{if(te===0)return;const Y=[...i];[Y[te-1],Y[te]]=[Y[te],Y[te-1]],c(Y)},me=te=>{if(te===i.length-1)return;const Y=[...i];[Y[te],Y[te+1]]=[Y[te+1],Y[te]],c(Y)},ue=i.filter(te=>te.billable).length,K=()=>{if(!S)return null;const te=t.jsx("div",{ref:le,style:{position:"absolute",top:`${E.top}px`,left:`${E.left}px`,width:`${E.width}px`,zIndex:9999},className:"mt-2 bg-white border-2 border-gray-200 rounded-lg shadow-xl max-h-96 overflow-y-auto",children:p.length>0?p.map((Y,A)=>t.jsxs("button",{onClick:()=>U(Y),className:"w-full px-4 py-3 text-left hover:bg-blue-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[t.jsx("div",{className:"font-semibold text-gray-900",children:Mh(Y.code)}),t.jsx("div",{className:"text-sm text-gray-600 mt-1",children:Y.description})]},A)):!f&&x.length>=2&&t.jsxs("div",{className:"p-4 text-center text-gray-500",children:['No codes found matching "',x,'"']})});return yp.createPortal(te,document.body)};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Search ICD-10 Codes",t.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",ue,"/",o," billable selected)"]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{ref:$,type:"text",value:x,onChange:te=>v(te.target.value),placeholder:"Search by code or description (e.g., F41.1 or anxiety)...",disabled:h,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm disabled:bg-gray-100 disabled:cursor-not-allowed"}),f&&t.jsx("div",{className:"absolute right-3 top-3",children:t.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-blue-500 border-t-transparent rounded-full"})})]})]}),K(),k&&t.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-3 text-red-800 text-sm",children:k}),i.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h3",{className:"text-sm font-semibold text-gray-700",children:["Selected Diagnoses (",i.length,")"]}),i.map((te,Y)=>t.jsx("div",{className:`bg-white border-2 rounded-lg p-4 ${te.primary?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"font-bold text-gray-900",children:Mh(te.code)}),te.primary&&t.jsx("span",{className:"px-2 py-0.5 bg-blue-500 text-white text-xs font-semibold rounded",children:"PRIMARY"}),te.billable&&t.jsx("span",{className:"px-2 py-0.5 bg-green-500 text-white text-xs font-semibold rounded",children:"BILLABLE"})]}),t.jsx("p",{className:"text-sm text-gray-700",children:te.description}),t.jsxs("div",{className:"mt-3 flex flex-wrap gap-3",children:[d&&t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:te.billable,onChange:A=>ve(te.code,"billable",A.target.checked),disabled:h||!te.billable&&ue>=o,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Billable"})]}),u&&t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"radio",name:"primary-diagnosis",checked:te.primary,onChange:()=>ve(te.code,"primary",!0),disabled:h,className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Primary"})]}),b&&t.jsxs("select",{value:te.severity||"",onChange:A=>ve(te.code,"severity",A.target.value||null),disabled:h,className:"text-sm border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"-- Severity --"}),Ab.map(A=>t.jsx("option",{value:A,children:A},A))]})]})]}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("button",{onClick:()=>he(Y),disabled:h||Y===0,className:"p-1 text-gray-500 hover:text-gray-700 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move up",children:""}),t.jsx("button",{onClick:()=>me(Y),disabled:h||Y===i.length-1,className:"p-1 text-gray-500 hover:text-gray-700 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move down",children:""}),t.jsx("button",{onClick:()=>P(te.code),disabled:h,className:"p-1 text-red-500 hover:text-red-700 disabled:opacity-30 disabled:cursor-not-allowed",title:"Remove",children:""})]})]})},te.code))]}),i.length===0&&t.jsx("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:"No diagnoses selected. Search and select ICD-10 codes above."})]})}function Mb({note:i,onChange:c,disabled:o=!1}){const d=(h,x)=>{c(h,x)},u=h=>{d("diagnosis_codes",JSON.stringify(h))};let b=[];try{if(i.diagnosis_codes)if(typeof i.diagnosis_codes=="string"){const h=i.diagnosis_codes.trim();h.length>0&&(b=JSON.parse(h))}else Array.isArray(i.diagnosis_codes)&&(b=i.diagnosis_codes)}catch(h){console.error("Failed to parse diagnosis_codes, using empty array:",h,i.diagnosis_codes),b=[]}return t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border-2 border-purple-200 rounded-xl p-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Diagnosis Assessment"}),t.jsx("p",{className:"text-sm text-gray-600",children:"This diagnosis note serves as the clinical source of truth and will automatically sync billable codes to the billing system when signed."})]}),t.jsxs("div",{className:"card-main",children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"ICD-10 Diagnosis Codes"}),t.jsx("div",{className:"card-inner",children:t.jsx(Tb,{selectedCodes:b,onChange:u,maxBillable:4,showBillableToggle:!0,showPrimarySelector:!0,showSeveritySelector:!0,disabled:o})})]}),t.jsxs("div",{className:"card-main",children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Clinical Assessment"}),t.jsxs("div",{className:"card-inner space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Symptoms Reported by Client",t.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(What the client describes)"})]}),t.jsx("textarea",{value:i.symptoms_reported||"",onChange:h=>d("symptoms_reported",h.target.value),disabled:o,rows:4,placeholder:"Document symptoms as reported by the client in their own words...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Symptoms Observed by Clinician",t.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(What you directly observe)"})]}),t.jsx("textarea",{value:i.symptoms_observed||"",onChange:h=>d("symptoms_observed",h.target.value),disabled:o,rows:4,placeholder:"Document observable symptoms, behavioral indicators, presentation...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Duration of Symptoms"}),t.jsx("textarea",{value:i.duration_of_symptoms||"",onChange:h=>d("duration_of_symptoms",h.target.value),disabled:o,rows:2,placeholder:"How long have symptoms been present? When did they begin?",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Diagnostic Reasoning"}),t.jsxs("div",{className:"card-inner space-y-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Clinical Justification",t.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(Why this diagnosis?)"})]}),t.jsx("textarea",{value:i.clinical_justification||"",onChange:h=>d("clinical_justification",h.target.value),disabled:o,rows:5,placeholder:"Explain the clinical reasoning for this diagnosis. Include DSM-5 criteria met, frequency/intensity of symptoms, impact on functioning...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Differential Diagnosis",t.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(What else was considered and ruled out?)"})]}),t.jsx("textarea",{value:i.differential_diagnosis||"",onChange:h=>d("differential_diagnosis",h.target.value),disabled:o,rows:4,placeholder:"Document other diagnoses considered and reasons they were ruled out...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Severity & Specifiers",t.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(Additional clinical details)"})]}),t.jsx("textarea",{value:i.severity_specifiers||"",onChange:h=>d("severity_specifiers",h.target.value),disabled:o,rows:3,placeholder:"Document severity level, course specifiers, additional features (e.g., 'with anxious distress', 'in partial remission')...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Functional Impact"}),t.jsxs("div",{className:"card-inner",children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Functional Impairment",t.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(How symptoms affect daily life and functioning)"})]}),t.jsx("textarea",{value:i.functional_impairment||"",onChange:h=>d("functional_impairment",h.target.value),disabled:o,rows:4,placeholder:"Document impact on work, relationships, self-care, social functioning, occupational performance...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Diagnosis History"}),t.jsxs("div",{className:"card-inner",children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Previous Diagnoses",t.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(Prior diagnostic history and changes)"})]}),t.jsx("textarea",{value:i.previous_diagnoses||"",onChange:h=>d("previous_diagnoses",h.target.value),disabled:o,rows:3,placeholder:"Document previous diagnoses, when they were assigned, by whom, and any changes or revisions...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),t.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-6",children:[t.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:" Billing Integration"}),t.jsx("p",{className:"text-sm text-blue-800",children:"When you sign this diagnosis note, the following will happen automatically:"}),t.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-800 mt-2 space-y-1",children:[t.jsxs("li",{children:["Billable diagnoses (",b.filter(h=>h.billable).length," selected) will be added to the billing system"]}),t.jsx("li",{children:"Previous diagnoses will be marked as inactive"}),t.jsx("li",{children:"This note becomes the source of truth for all clinical documentation"}),t.jsx("li",{children:"Other notes will reference these diagnoses automatically"})]})]})]})}function Rb({note:i,onChange:c,autoSave:o}){const d=(h,x)=>{c(h,x),o&&setTimeout(()=>o(),500)},u=h=>(i.treatmentPlan||{})[h]||"",b=(h,x)=>{const v=i.treatmentPlan||{};d("treatmentPlan",{...v,[h]:x})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-blue-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Treatment Goals"]}),t.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"What are the primary goals of treatment? What does the client hope to achieve?"}),t.jsx("textarea",{value:u("goals"),onChange:h=>b("goals",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"5",placeholder:`Example:
1. Reduce anxiety symptoms to manageable levels
2. Develop healthy coping strategies for stress
3. Improve relationships with family members
4. Return to work/school functioning`})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-blue-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Target Behaviors & Objectives"]}),t.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"Specific, measurable objectives. What behaviors or symptoms will change?"}),t.jsx("textarea",{value:u("objectives"),onChange:h=>b("objectives",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"5",placeholder:`Example:
- Client will identify and challenge 3 cognitive distortions per week
- Client will practice deep breathing exercises daily
- Client will attend all scheduled sessions
- Client will report anxiety level of 5 or below (0-10 scale) within 8 weeks`})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-blue-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Interventions & Treatment Modalities"]}),t.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"What therapeutic approaches, techniques, or interventions will be used?"}),t.jsx("textarea",{value:u("interventions"),onChange:h=>b("interventions",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"5",placeholder:`Example:
- Cognitive Behavioral Therapy (CBT)
- Dialectical Behavior Therapy (DBT) skills training
- Mindfulness and relaxation techniques
- EMDR for trauma processing
- Family therapy sessions (as needed)
- Psychoeducation about anxiety/depression`})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-blue-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Treatment Frequency & Expected Duration"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Session Frequency"}),t.jsx("textarea",{value:u("frequency"),onChange:h=>b("frequency",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Example: Weekly 50-minute sessions, with option to increase to twice weekly if needed"})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Expected Duration of Treatment"}),t.jsx("textarea",{value:u("duration"),onChange:h=>b("duration",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Example: 12-16 weeks of weekly therapy, with ongoing reassessment of progress"})]})})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-blue-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Potential Barriers & Mitigation Strategies"]}),t.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"What might interfere with treatment success? How will barriers be addressed?"}),t.jsx("textarea",{value:u("barriers"),onChange:h=>b("barriers",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:`Example:
- Transportation issues  Offer telehealth options
- Work schedule conflicts  Offer early morning or evening appointments
- Financial concerns  Sliding scale fee, connect with financial assistance resources
- Language barriers  Provide interpreter services`})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-blue-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Discharge Criteria & Success Indicators"]}),t.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"How will we know treatment has been successful? What indicates readiness for discharge?"}),t.jsx("textarea",{value:u("dischargeCriteria"),onChange:h=>b("dischargeCriteria",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:`Example:
- Client reports anxiety symptoms manageable without therapy support
- Client demonstrates consistent use of coping skills
- Client feels confident managing stressors independently
- Client has achieved treatment goals
- Client expresses readiness to discontinue therapy`})]}),t.jsxs("div",{className:"card-main bg-blue-50 border-2 border-blue-300",children:[t.jsxs("h3",{className:"text-lg font-semibold text-blue-700 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Client Agreement & Collaboration"]}),t.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"Document client's understanding, agreement, and input on the treatment plan"}),t.jsx("textarea",{value:u("clientAgreement"),onChange:h=>b("clientAgreement",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Example: Client reviewed treatment plan and expressed agreement with goals and proposed interventions. Client voiced concerns about time commitment, and we agreed to reassess frequency after 4 weeks."})]})]})}function zb({note:i,onChange:c,autoSave:o}){const d=(h,x)=>{c(h,x),o&&setTimeout(()=>o(),500)},u=[{value:"noshow",label:"No Show",description:"Client did not attend, no notice given"},{value:"late_cancel",label:"Late Cancellation",description:"Canceled within 24 hours of appointment"},{value:"cancel",label:"Cancellation",description:"Canceled with adequate notice"},{value:"late_arrival",label:"Late Arrival",description:"Client arrived late to session"}],b=i.appointmentStatus||"noshow";return u.find(h=>h.value===b),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"card-main bg-gray-50",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Appointment Status"]}),t.jsx("div",{className:"space-y-3",children:u.map(h=>t.jsxs("label",{className:`flex items-start gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all ${b===h.value?"border-blue-500 bg-blue-50":"border-gray-300 bg-white hover:border-gray-400"}`,children:[t.jsx("input",{type:"radio",name:"appointmentStatus",value:h.value,checked:b===h.value,onChange:x=>d("appointmentStatus",x.target.value),className:"mt-1 w-4 h-4 text-blue-600 focus:ring-blue-500"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-semibold text-gray-900",children:h.label}),t.jsx("div",{className:"text-sm text-gray-600",children:h.description})]})]},h.value))})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Reason / Additional Details"]}),t.jsx("textarea",{value:i.statusReason||"",onChange:h=>d("statusReason",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Provide additional context: Why did the client cancel? When were you notified? Any relevant circumstances?"})]}),t.jsxs("div",{className:"card-main bg-yellow-50 border-2 border-yellow-300",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Billing Impact"]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"checkbox",checked:i.chargeApplied||!1,onChange:h=>d("chargeApplied",h.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Late cancellation/no-show charge applied"})]}),i.chargeApplied&&t.jsx("textarea",{value:i.chargeDetails||"",onChange:h=>d("chargeDetails",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Charge amount and details..."})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Follow-up Action"]}),t.jsx("textarea",{value:i.followUpAction||"",onChange:h=>d("followUpAction",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"What follow-up is needed? Call client to reschedule? Send reminder? Review cancellation policy?"})]})]})}function Ob({note:i,onChange:c,autoSave:o}){const d=(h,x)=>{c(h,x),o&&setTimeout(()=>o(),500)},u=[{value:"phone",label:" Phone Call",icon:""},{value:"email",label:" Email",icon:""},{value:"text",label:" Text Message",icon:""},{value:"portal",label:" Patient Portal",icon:""},{value:"voicemail",label:" Voicemail",icon:""}],b=i.contactMethod||"phone";return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"card-main bg-blue-50",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Contact Method"]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:u.map(h=>t.jsxs("label",{className:`flex flex-col items-center gap-2 p-4 rounded-lg border-2 cursor-pointer transition-all ${b===h.value?"border-blue-500 bg-blue-100":"border-gray-300 bg-white hover:border-gray-400"}`,children:[t.jsx("input",{type:"radio",name:"contactMethod",value:h.value,checked:b===h.value,onChange:x=>d("contactMethod",x.target.value),className:"sr-only"}),t.jsx("div",{className:"text-3xl",children:h.icon}),t.jsx("div",{className:"text-sm font-semibold text-gray-800 text-center",children:h.label.replace(/^.+ /,"")})]},h.value))})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Date & Time of Contact"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Date"}),t.jsx("input",{type:"date",value:i.contactDate||"",onChange:h=>d("contactDate",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm"})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Time"}),t.jsx("input",{type:"time",value:i.contactTime||"",onChange:h=>d("contactTime",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm"})]})})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Reason for Contact"]}),t.jsx("textarea",{value:i.contactReason||"",onChange:h=>d("contactReason",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Why did the client reach out? What did they need or want to discuss?"})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Summary of Communication"]}),t.jsx("textarea",{value:i.communicationSummary||"",onChange:h=>d("communicationSummary",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Summarize the content of the communication. What was discussed? What information was provided?"})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:[t.jsx("span",{className:"mr-2",children:""}),"Action Taken / Response Provided"]}),t.jsx("textarea",{value:i.actionTaken||"",onChange:h=>d("actionTaken",h.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"How did you respond? What actions were taken? Any referrals or resources provided? Follow-up needed?"})]}),t.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:i.urgentFlag||!1,onChange:h=>d("urgentFlag",h.target.checked),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"font-semibold text-gray-800",children:" Urgent or Crisis-Related Contact"}),t.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Check if this contact involved safety concerns, crisis, or urgent clinical needs"})]})]}),i.urgentFlag&&t.jsx("div",{className:"mt-4",children:t.jsx("textarea",{value:i.urgentDetails||"",onChange:h=>d("urgentDetails",h.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Describe the urgent nature of the contact and actions taken to address safety/crisis concerns..."})})]})]})}function Lb({noteType:i,patientId:c,appointmentId:o=null,serviceDate:d,onSave:u,onCancel:b}){const[h,x]=g.useState(""),[v,p]=g.useState(!1),[j,f]=g.useState(""),[y,S]=g.useState(""),[N,k]=g.useState(!1),[O,E]=g.useState(!0),[H,Q]=g.useState(!1),[le,$]=g.useState(null),U=i==="noshow",P=i==="cancel",ve=async he=>{he.preventDefault(),Q(!0),$(null);try{let me="";U?(me=`CLIENT DID NOT ATTEND SCHEDULED APPOINTMENT

`,h&&(me+=`Reason (if known): ${h}

`),v?(me+=`Contact Attempted: Yes
`,me+=`Method: ${j}
`,me+=`Result: ${y}

`):me+=`Contact Attempted: No

`,me+=`Plan: ${N?"Billable no-show fee applies.":"No-show fee waived."} Will follow up to reschedule.`):P&&(me=`APPOINTMENT CANCELLED

`,h&&(me+=`Reason: ${h}

`),me+="Plan: Will reschedule as needed.");const K=await io({patientId:c,appointmentId:o,noteType:i,serviceDate:d,templateType:"quick",plan:me,status:O?"signed":"draft"});O&&K.noteId&&await sf(K.noteId),u&&u(K)}catch(me){console.error("Error saving quick note:",me),$(me.message||"Failed to save note")}finally{Q(!1)}};return t.jsx("div",{className:"max-w-2xl mx-auto p-6",children:t.jsxs("div",{className:"card-main",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:U?" No-Show Note":" Cancellation Note"}),t.jsxs("p",{className:"text-gray-600",children:["Quick documentation for ",U?"missed appointment":"cancelled session"]})]}),le&&t.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800",children:le}),t.jsxs("form",{onSubmit:ve,className:"space-y-6",children:[t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:U?"Reason (if known)":"Reason for Cancellation"}),t.jsx("textarea",{value:h,onChange:he=>x(he.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:"3",placeholder:U?"e.g., Client called to report illness":"e.g., Family emergency"})]})}),U&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[t.jsxs("label",{className:"flex items-center gap-3 mb-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:v,onChange:he=>p(he.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),t.jsx("span",{className:"font-semibold text-gray-800",children:"Attempted to contact client"})]}),v&&t.jsxs("div",{className:"space-y-3 ml-8",children:[t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Contact Method"}),t.jsxs("select",{value:j,onChange:he=>f(he.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"Select method..."}),t.jsx("option",{value:"Phone",children:"Phone"}),t.jsx("option",{value:"Email",children:"Email"}),t.jsx("option",{value:"Text/SMS",children:"Text/SMS"}),t.jsx("option",{value:"Patient Portal",children:"Patient Portal"})]})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Result"}),t.jsxs("select",{value:y,onChange:he=>S(he.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"Select result..."}),t.jsx("option",{value:"Left voicemail",children:"Left voicemail"}),t.jsx("option",{value:"Spoke with client",children:"Spoke with client"}),t.jsx("option",{value:"No answer",children:"No answer"}),t.jsx("option",{value:"Message sent",children:"Message sent"}),t.jsx("option",{value:"Awaiting response",children:"Awaiting response"})]})]})})]})]}),t.jsx("div",{children:t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:N,onChange:he=>k(he.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),t.jsx("span",{className:"font-semibold text-gray-800",children:"Apply no-show fee (billable)"})]})})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:O,onChange:he=>E(he.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),t.jsx("span",{className:"font-semibold text-gray-800",children:"Sign and lock note immediately"})]}),t.jsx("p",{className:"text-xs text-gray-600 ml-8 mt-1",children:"Recommended for simple administrative notes"})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:b,disabled:H,className:"flex-1 px-6 py-3 bg-gray-500 text-white font-semibold rounded-xl hover:bg-gray-600 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:H,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:H?"Saving...":"Save Note"})]})]})]})})}function Ub({patient:i,provider:c,serviceInfo:o,diagnosis:d,serviceDate:u}){const b=v=>{if(!v)return"N/A";const[p,j,f]=v.split(/[-T]/);return new Date(p,j-1,f).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})},h=v=>{if(!v)return"Not set";const p=Math.floor(v/60),j=v%60;return p>0&&j>0?`${p}h ${j}m`:p>0?`${p}h`:`${j}m`},x=v=>{if(!v)return"";const p=v.split(/\s{3,}/);return p.length>1?p[1].trim():v.trim()};return t.jsxs("div",{className:"card-main mb-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Patient Information"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Name:"}),t.jsxs("span",{className:"text-base font-semibold text-gray-900",children:[i?.fname," ",i?.mname," ",i?.lname]})]}),t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"DOB:"}),t.jsxs("span",{className:"text-sm text-gray-800",children:[i?.DOB?b(i.DOB):"N/A",i?.DOB&&t.jsxs("span",{className:"ml-2 text-gray-500",children:["(Age ",new Date().getFullYear()-new Date(i.DOB).getFullYear(),")"]})]})]}),i?.pid&&t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Patient ID:"}),t.jsx("span",{className:"text-sm text-gray-800 font-mono",children:i.pid})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Service Information"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Provider:"}),t.jsxs("span",{className:"text-base font-semibold text-gray-900",children:[c?.fullName||c?.fname+" "+c?.lname,c?.credentials&&t.jsx("span",{className:"ml-2 text-sm font-normal text-gray-600",children:c.credentials})]})]}),t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Date:"}),t.jsx("span",{className:"text-sm text-gray-800 font-semibold",children:b(u)})]}),t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Type:"}),t.jsx("span",{className:"text-sm text-gray-800",children:o?.type||"Individual Therapy"})]}),t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Location:"}),t.jsx("span",{className:"text-sm text-gray-800",children:o?.location||"Office"})]}),o?.duration&&t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Duration:"}),t.jsx("span",{className:"text-sm text-gray-800",children:h(o.duration)})]})]})]})]}),d&&t.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Primary Diagnosis:"}),t.jsx("span",{className:"text-sm text-gray-900 font-medium",children:x(d)})]})})]})}const Bb=i=>({progress:"BIRP",intake:"Intake",diagnosis:"Diagnosis",treatment_plan:"TreatmentPlan",mse:"MSE",discharge:"Discharge",crisis:"Crisis",risk_assessment:"RiskAssessment",appointment_status:"AppointmentStatus",client_communication:"ClientCommunication",admin:"Administrative",noshow:"AppointmentStatus",cancel:"AppointmentStatus"})[i]||"BIRP";function Ci({noteId:i=null,patientId:c,appointmentId:o=null,noteType:d,onClose:u,onSave:b}){const h=Bb(d),[x,v]=g.useState({patientId:c,appointmentId:o,noteType:d,templateType:h,serviceDate:new Date().toISOString().split("T")[0],behaviorProblem:"",intervention:"",response:"",plan:"",riskPresent:!1,riskAssessment:"",interventionsSelected:[],clientPresentation:[],goalsAddressed:[],status:"draft"}),[p,j]=g.useState(!1),[f,y]=g.useState(!1),[S,N]=g.useState(!1),[k,O]=g.useState(null),[E,H]=g.useState(null),[Q,le]=g.useState(null),[$,U]=g.useState(null),[P,ve]=g.useState(null),[he,me]=g.useState(null),[ue,K]=g.useState(null),te=g.useRef(null),Y=g.useRef(i);g.useEffect(()=>{A(),_(),T()},[i,o,c]),g.useEffect(()=>(te.current&&clearTimeout(te.current),te.current=setTimeout(()=>{q()},3e3),()=>{te.current&&clearTimeout(te.current)}),[x]);const A=async()=>{j(!0),H(null);try{if(i){const B=await lf(i);v({...x,...B.note}),Y.current=i}else{const B={};o?B.appointment_id=o:c&&(B.patient_id=c);try{const re=await Gp(B);if(re.draft){const pe=re.draft.draft_content;pe.noteType===d?(v({...x,...pe}),console.log("Restored draft from server")):console.log("Server draft note type mismatch, skipping restore. Expected:",d,"Got:",pe.noteType)}}catch{console.log("No draft found, starting fresh")}const Z=localStorage.getItem(`note_draft_${c}_${o||"new"}_${d}`);if(Z)try{const re=JSON.parse(Z);re.noteType===d?(v({...x,...re}),console.log("Restored draft from localStorage")):(console.log("Draft note type mismatch, skipping restore"),localStorage.removeItem(`note_draft_${c}_${o||"new"}_${d}`))}catch{console.error("Failed to parse localStorage draft")}}}catch(B){console.error("Error loading note:",B),H(B.message)}finally{j(!1)}},_=async()=>{try{const B=await Fp();le(B.settings),!x.templateType&&B.settings.default_note_template&&v(Z=>({...Z,templateType:B.settings.default_note_template}))}catch(B){console.error("Error loading settings:",B)}},T=async()=>{try{if(c)try{const B=await af(c);if(console.log(" Patient data loaded:",B),U(B.patient),B.problems&&B.problems.length>0){const Z=B.problems[0],re=Z.title||Z.diagnosis||null;K(re),console.log(" Primary diagnosis loaded:",re)}}catch(B){console.error(" Error loading patient data:",B)}try{const B=await ki();console.log(" Provider data loaded:",B),ve(B)}catch(B){console.error(" Error loading provider data:",B)}me({type:"Individual Therapy",location:"Office",duration:null})}catch(B){console.error(" Error loading metadata:",B)}},q=g.useCallback(async()=>{if(!(x.status==="signed"||x.is_locked)){N(!0);try{localStorage.setItem(`note_draft_${c}_${o||"new"}_${x.noteType}`,JSON.stringify(x));const B={noteId:Y.current,patientId:x.patientId,appointmentId:x.appointmentId,noteType:x.noteType,serviceDate:x.serviceDate,draftContent:x};await Up(B),O(new Date)}catch(B){console.error("Auto-save failed:",B)}finally{N(!1)}}},[x,c,o]),ne=(B,Z)=>{v(re=>({...re,[B]:Z}))},fe=async()=>{y(!0),H(null);try{if(Y.current)await Th(Y.current,x);else{const B=await io(x);Y.current=B.noteId}O(new Date),b&&b({noteId:Y.current,status:"draft"})}catch(B){console.error("Error saving draft:",B),H(B.message)}finally{y(!1)}},C=async()=>{y(!0),H(null);try{if(Y.current)await Th(Y.current,x);else{const B=await io({...x,status:"draft"});Y.current=B.noteId}await sf(Y.current),localStorage.removeItem(`note_draft_${c}_${o||"new"}_${x.noteType}`),b&&b({noteId:Y.current,status:"signed"}),u&&u()}catch(B){console.error("Error signing note:",B),H(B.message)}finally{y(!1)}},M=()=>{u&&u()},W=async()=>{if(window.confirm("Are you sure you want to delete this draft? This cannot be undone.")){y(!0),H(null);try{await Bp(Y.current),localStorage.removeItem(`note_draft_${c}_${o||"new"}_${x.noteType}`),u&&u()}catch(B){console.error("Error deleting note:",B),H("Failed to delete note: "+B.message)}finally{y(!1)}}};return d==="noshow"||d==="cancel"?t.jsx(Lb,{noteType:d,patientId:c,appointmentId:o,serviceDate:x.serviceDate,onSave:b,onCancel:u}):p?t.jsx("div",{className:"flex items-center justify-center p-12",children:t.jsx("div",{className:"text-gray-600",children:"Loading note..."})}):t.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("h1",{className:"text-2xl font-semibold text-gray-800",children:[d==="progress"&&" Progress Note",d==="intake"&&" Intake Assessment",d==="crisis"&&" Crisis Note",d==="discharge"&&" Discharge Summary",d==="mse"&&" Mental Status Exam",d==="risk_assessment"&&" Risk Assessment",d==="diagnosis"&&" Diagnosis Note",d==="admin"&&" Administrative Note"]}),t.jsxs("div",{className:"flex items-center gap-3",children:[S&&t.jsx("span",{className:"text-sm text-blue-600",children:"Saving..."}),k&&!S&&t.jsxs("span",{className:"text-sm text-gray-600",children:["Saved ",k.toLocaleTimeString()]})]})]}),t.jsx("div",{className:"flex items-center gap-4",children:t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Service Date:"}),t.jsx("input",{type:"date",value:x.serviceDate,onChange:B=>ne("serviceDate",B.target.value),className:"px-3 py-1 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})})]}),E&&t.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800",children:E}),($||P)&&t.jsx(Ub,{patient:$,provider:P,serviceInfo:he,diagnosis:ue,serviceDate:x.serviceDate}),t.jsxs("div",{className:"mb-6",children:[x.templateType==="BIRP"&&t.jsx(jb,{note:x,onChange:ne,patientId:c,autoSave:q}),x.templateType==="PIRP"&&t.jsx(Nb,{note:x,onChange:ne,patientId:c,autoSave:q}),x.templateType==="MSE"&&t.jsx(wb,{note:x,onChange:ne,autoSave:q}),x.templateType==="Intake"&&t.jsx(_b,{note:x,onChange:ne,autoSave:q}),x.templateType==="Discharge"&&t.jsx(Cb,{note:x,onChange:ne,autoSave:q}),x.templateType==="Crisis"&&t.jsx(Eb,{note:x,onChange:ne,autoSave:q}),x.templateType==="RiskAssessment"&&t.jsx(Db,{note:x,onChange:ne,autoSave:q}),x.templateType==="Diagnosis"&&t.jsx(Mb,{note:x,onChange:ne,disabled:x.is_locked}),x.templateType==="TreatmentPlan"&&t.jsx(Rb,{note:x,onChange:ne,autoSave:q}),x.templateType==="AppointmentStatus"&&t.jsx(zb,{note:x,onChange:ne,autoSave:q}),x.templateType==="ClientCommunication"&&t.jsx(Ob,{note:x,onChange:ne,autoSave:q}),x.templateType==="Administrative"&&t.jsx(kb,{note:x,onChange:ne,autoSave:q})]}),t.jsx("div",{className:"sticky bottom-6 mt-8",children:t.jsx("div",{className:"card-main shadow-2xl",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{type:"button",onClick:M,disabled:f,className:"px-6 py-3 bg-gray-500 text-white font-semibold rounded-xl hover:bg-gray-600 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),Y.current&&!x.is_locked&&x.status!=="signed"&&t.jsx("button",{type:"button",onClick:W,disabled:f,className:"px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white font-semibold rounded-xl hover:from-red-600 hover:to-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:" Delete Draft"}),t.jsx("button",{type:"button",onClick:fe,disabled:f||S,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-semibold rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Saving...":"Save Draft"}),t.jsx("button",{type:"button",onClick:C,disabled:f||S,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white font-semibold rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Signing...":" Sign & Lock Note"})]})})})]})}function pf({noteId:i,onClose:c,onEdit:o,onAddendum:d}){const[u,b]=g.useState(null),[h,x]=g.useState(!0),[v,p]=g.useState(null);g.useEffect(()=>{j()},[i]);const j=async()=>{x(!0),p(null);try{const O=await lf(i);b(O.note)}catch(O){console.error("Error loading note:",O),p(O.message)}finally{x(!1)}},f=O=>{if(!O)return"N/A";const[E,H,Q]=O.split(/[-T]/);return new Date(E,H-1,Q).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})},y=O=>O?new Date(O).toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}):"N/A",S=O=>{if(!O)return"";const E=O.split(/\s{3,}/);return E.length>1?E[1].trim():O.trim()};if(h)return t.jsx("div",{className:"max-w-4xl mx-auto p-6",children:t.jsx("div",{className:"flex items-center justify-center p-12",children:t.jsx("div",{className:"text-gray-600",children:"Loading note..."})})});if(v)return t.jsx("div",{className:"max-w-4xl mx-auto p-6",children:t.jsxs("div",{className:"card-main text-center p-12",children:[t.jsxs("div",{className:"text-red-600 mb-4",children:["Error: ",v]}),t.jsx("button",{onClick:c,className:"btn-secondary",children:"Close"})]})});if(!u)return null;const N=u.is_locked||u.status==="signed",k=u.status==="draft";return t.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h1",{className:"text-2xl font-semibold text-gray-800",children:[u.note_type==="progress"&&" Progress Note",u.note_type==="intake"&&" Intake Assessment",u.note_type==="crisis"&&" Crisis Note",u.note_type==="discharge"&&" Discharge Summary",u.note_type==="mse"&&" Mental Status Exam",u.note_type==="diagnosis"&&" Diagnosis Note",u.note_type==="admin"&&" Administrative Note"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[N&&t.jsx("span",{className:"badge-sm badge-light-success",children:" Signed & Locked"}),k&&t.jsx("span",{className:"badge-sm badge-light-warning",children:"Draft"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600 font-semibold",children:"Service Date:"}),t.jsx("div",{className:"text-gray-800",children:f(u.service_date)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600 font-semibold",children:"Provider:"}),t.jsx("div",{className:"text-gray-800",children:u.provider_name||"Unknown"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600 font-semibold",children:"Created:"}),t.jsx("div",{className:"text-gray-800",children:y(u.created_at)})]}),u.signed_at&&t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600 font-semibold",children:"Signed:"}),t.jsx("div",{className:"text-gray-800",children:y(u.signed_at)})]})]})]}),t.jsxs("div",{className:"space-y-6",children:[u.template_type==="Diagnosis"&&t.jsxs(t.Fragment,{children:[u.diagnosis_codes&&u.diagnosis_codes.length>0&&t.jsxs("div",{className:"card-main",children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:" ICD-10 Diagnosis Codes"}),t.jsx("div",{className:"space-y-2",children:u.diagnosis_codes.map((O,E)=>{const H=O.code||O,Q=O.description||"",le=O.isPrimary||!1,$=O.billable||!1,U=O.severity||null,P=H.length>=4?H.slice(0,3)+"."+H.slice(3):H;return t.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border-l-4 border-blue-400",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"font-mono text-sm font-semibold text-blue-700 bg-blue-100 px-2 py-0.5 rounded",children:P}),t.jsxs("div",{className:"flex gap-2",children:[le&&t.jsx("span",{className:"badge-sm badge-light-primary",children:"Primary"}),$&&t.jsx("span",{className:"badge-sm badge-light-success",children:"Billable"}),U&&t.jsx("span",{className:"badge-sm badge-light-warning",children:U})]})]}),Q&&t.jsx("div",{className:"text-gray-800",children:S(Q)})]})},E)})})]}),(u.symptoms_reported||u.symptoms_observed||u.duration_of_symptoms)&&t.jsxs("div",{className:"card-main",children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Clinical Assessment"}),t.jsxs("div",{className:"space-y-4",children:[u.symptoms_reported&&t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Symptoms Reported by Client"}),t.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.symptoms_reported})]}),u.symptoms_observed&&t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Symptoms Observed by Clinician"}),t.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.symptoms_observed})]}),u.duration_of_symptoms&&t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Duration of Symptoms"}),t.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.duration_of_symptoms})]})]})]}),(u.clinical_justification||u.differential_diagnosis||u.severity_specifiers)&&t.jsxs("div",{className:"card-main",children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Diagnostic Reasoning"}),t.jsxs("div",{className:"space-y-4",children:[u.clinical_justification&&t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Clinical Justification"}),t.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.clinical_justification})]}),u.differential_diagnosis&&t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Differential Diagnosis"}),t.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.differential_diagnosis})]}),u.severity_specifiers&&t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Severity Specifiers"}),t.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.severity_specifiers})]})]})]}),u.functional_impairment&&t.jsxs("div",{className:"card-main",children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Functional Impairment"}),t.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.functional_impairment})]}),u.previous_diagnoses&&t.jsxs("div",{className:"card-main",children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Previous Diagnoses"}),t.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.previous_diagnoses})]})]}),u.template_type==="BIRP"&&t.jsxs(t.Fragment,{children:[u.behavior_problem&&t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"font-semibold text-gray-800 mb-3",children:[t.jsx("span",{className:"text-blue-600 mr-2",children:"B"}),"Behavior / Observations"]}),t.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.behavior_problem}),u.client_presentation&&u.client_presentation.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:u.client_presentation.map((O,E)=>t.jsx("span",{className:"badge-sm badge-light-info",children:O},E))})]}),(u.intervention||u.interventions_selected&&u.interventions_selected.length>0)&&t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"font-semibold text-gray-800 mb-3",children:[t.jsx("span",{className:"text-blue-600 mr-2",children:"I"}),"Interventions Used"]}),u.intervention&&t.jsx("div",{className:"text-gray-700 whitespace-pre-wrap mb-3",children:u.intervention}),u.interventions_selected&&u.interventions_selected.length>0&&t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Selected Interventions:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:u.interventions_selected.map((O,E)=>t.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:O},E))})]})]}),u.response&&t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"font-semibold text-gray-800 mb-3",children:[t.jsx("span",{className:"text-blue-600 mr-2",children:"R"}),"Client Response"]}),t.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.response})]}),u.plan&&t.jsxs("div",{className:"card-main",children:[t.jsxs("h3",{className:"font-semibold text-gray-800 mb-3",children:[t.jsx("span",{className:"text-blue-600 mr-2",children:"P"}),"Plan / Next Steps"]}),t.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.plan})]})]}),u.risk_present&&u.risk_assessment&&t.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[t.jsx("h3",{className:"font-semibold text-orange-800 mb-3",children:" Risk Assessment"}),t.jsx("div",{className:"text-gray-800 whitespace-pre-wrap",children:u.risk_assessment})]}),u.addenda&&u.addenda.length>0&&t.jsxs("div",{className:"card-main bg-blue-50 border-2 border-blue-300",children:[t.jsxs("h3",{className:"font-semibold text-blue-800 mb-3",children:[" Addenda (",u.addenda.length,")"]}),t.jsx("div",{className:"space-y-3",children:u.addenda.map((O,E)=>t.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-4 border border-blue-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("span",{className:"text-sm font-semibold text-gray-800",children:["Addendum ",E+1]}),t.jsxs("span",{className:"text-xs text-gray-600",children:[y(O.created_at),"  ",O.provider_name]})]}),t.jsxs("div",{className:"text-sm text-gray-700 mb-2",children:[t.jsx("span",{className:"font-semibold",children:"Reason:"})," ",O.addendum_reason]})]},O.id))})]}),N&&t.jsx("div",{className:"card-main bg-green-50 border-2 border-green-300",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-semibold text-green-800",children:"Digitally Signed"}),t.jsxs("div",{className:"text-sm text-gray-700",children:[u.signed_by_name,"  ",y(u.signed_at)]})]})]})})]}),t.jsxs("div",{className:"flex gap-3 mt-8 pt-6 border-t border-gray-200",children:[t.jsx("button",{onClick:c,className:"px-6 py-3 bg-gray-500 text-white font-semibold rounded-xl hover:bg-gray-600 transition-all shadow-lg",children:"Close"}),k&&o&&t.jsx("button",{onClick:()=>o(u.id),className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all shadow-lg",children:"Edit Draft"}),N&&d&&t.jsx("button",{onClick:()=>d(u.id),className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-semibold rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all shadow-lg",children:"Add Addendum"})]})]})}function Hb({data:i}){const[c,o]=g.useState(!1),[d,u]=g.useState(!1),[b,h]=g.useState({}),[x,v]=g.useState({}),[p,j]=g.useState("list"),[f,y]=g.useState(null);if(!i)return t.jsx("div",{className:"text-gray-700 text-center py-8",children:"Loading admin notes..."});const{patient:S}=i,N=()=>{h({language:S.language||"",ethnicity:S.ethnicity||"",race:S.race||"",nationality:S.nationality||"",religion:S.religion||"",referral_source:S.referral_source||"",tribal_affiliations:S.tribal_affiliations||""}),o(!0)},k=()=>{v({homeless_status:S.homeless_status||"",financial_review_date:S.financial_review_date||"",family_size:S.family_size||"",monthly_income:S.monthly_income||""}),u(!0)},O=async()=>{console.log("Saving demographics:",b),alert("Demographics save not yet implemented - needs API endpoint"),o(!1)},E=async()=>{console.log("Saving financial data:",x),alert("Financial data save not yet implemented - needs API endpoint"),u(!1)},H=()=>{o(!1),h({})},Q=()=>{u(!1),v({})},le=()=>{j("create")},$=()=>{j("list"),y(null)},U=()=>{j("list"),y(null)};return p==="create"?t.jsx(Ci,{patientId:S.pid,noteType:"admin",onSave:$,onClose:U}):p==="edit"?t.jsx(Ci,{noteId:f,patientId:S.pid,noteType:"admin",onSave:$,onClose:U}):p==="view"?t.jsx(pf,{noteId:f,onClose:U}):t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"card-main",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Demographics & Statistics"}),!c&&t.jsx("button",{onClick:N,className:"px-4 py-2 text-sm font-medium text-blue-700 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-colors",children:" Edit"})]}),t.jsxs("div",{className:"card-inner",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Language"}),c?t.jsx("input",{type:"text",value:b.language,onChange:P=>h({...b,language:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):t.jsx("div",{className:"form-field-value",children:S.language||""})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Ethnicity"}),c?t.jsx("input",{type:"text",value:b.ethnicity,onChange:P=>h({...b,ethnicity:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):t.jsx("div",{className:"form-field-value",children:S.ethnicity||""})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Race"}),c?t.jsx("input",{type:"text",value:b.race,onChange:P=>h({...b,race:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):t.jsx("div",{className:"form-field-value",children:S.race||""})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Nationality"}),c?t.jsx("input",{type:"text",value:b.nationality,onChange:P=>h({...b,nationality:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):t.jsx("div",{className:"form-field-value",children:S.nationality||""})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Religion"}),c?t.jsx("input",{type:"text",value:b.religion,onChange:P=>h({...b,religion:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):t.jsx("div",{className:"form-field-value",children:S.religion||""})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Referral Source"}),c?t.jsx("input",{type:"text",value:b.referral_source,onChange:P=>h({...b,referral_source:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):t.jsx("div",{className:"form-field-value",children:S.referral_source||""})]}),t.jsxs("div",{className:"col-span-2 form-field",children:[t.jsx("div",{className:"form-field-label",children:"Tribal Affiliations"}),c?t.jsx("input",{type:"text",value:b.tribal_affiliations,onChange:P=>h({...b,tribal_affiliations:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):t.jsx("div",{className:"form-field-value",children:S.tribal_affiliations||""})]})]}),c&&t.jsxs("div",{className:"flex gap-3 mt-4 pt-4 border-t border-gray-200",children:[t.jsx("button",{onClick:O,className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:" Save Changes"}),t.jsx("button",{onClick:H,className:"px-4 py-2 bg-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Financial & Housing Status"}),!d&&t.jsx("button",{onClick:k,className:"px-4 py-2 text-sm font-medium text-blue-700 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-colors",children:" Edit"})]}),t.jsxs("div",{className:"card-inner",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Homeless"}),d?t.jsxs("select",{value:x.homeless_status,onChange:P=>v({...x,homeless_status:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Select..."}),t.jsx("option",{value:"No",children:"No"}),t.jsx("option",{value:"Yes",children:"Yes"}),t.jsx("option",{value:"At Risk",children:"At Risk"})]}):t.jsx("div",{className:"form-field-value",children:S.homeless_status||""})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Financial Review"}),d?t.jsx("input",{type:"date",value:x.financial_review_date,onChange:P=>v({...x,financial_review_date:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):t.jsx("div",{className:"form-field-value",children:S.financial_review_date?new Date(S.financial_review_date).toLocaleDateString():""})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Family Size"}),d?t.jsx("input",{type:"number",value:x.family_size,onChange:P=>v({...x,family_size:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):t.jsx("div",{className:"form-field-value",children:S.family_size||""})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Monthly Income"}),d?t.jsx("input",{type:"number",value:x.monthly_income,onChange:P=>v({...x,monthly_income:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"}):t.jsx("div",{className:"form-field-value",children:S.monthly_income?`$${S.monthly_income}`:""})]})]}),d&&t.jsxs("div",{className:"flex gap-3 mt-4 pt-4 border-t border-gray-200",children:[t.jsx("button",{onClick:E,className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:" Save Changes"}),t.jsx("button",{onClick:Q,className:"px-4 py-2 bg-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]})]}),t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"card-main",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Administrative Notes"}),t.jsx("button",{onClick:le,className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"+ New Admin Note"})]}),t.jsx("div",{className:"text-gray-600 text-sm",children:"Create administrative notes for this client's record"})]})})]})}function qb({data:i,onDataUpdate:c}){const[o,d]=g.useState(!1),[u,b]=g.useState(!1),[h,x]=g.useState(!1),[v,p]=g.useState(!1),[j,f]=g.useState(!1),[y,S]=g.useState(!1),[N,k]=g.useState({}),[O,E]=g.useState({}),[H,Q]=g.useState({}),[le,$]=g.useState(!1),[U,P]=g.useState(null),[ve,he]=g.useState([]),[me,ue]=g.useState({});if(g.useEffect(()=>{(async()=>{try{const ce=(await Kp())?.companies||[];he(ce.map(je=>({value:je.id,label:je.name})));const[de,ge,ie,I]=await Promise.all([Rt("sub_relation"),Rt("sex"),Rt("state"),Rt("yesno")]);ue({relationship:de.options||[],sex:ge.options||[],state:ie.options||[],accept_assignment:I.options||[]})}catch(R){console.error("Failed to load dropdown options:",R)}})()},[]),!i)return t.jsx("div",{className:"text-gray-700 text-center py-8",children:"Loading insurance data..."});const{patient:K,insurances:te}=i,Y=K.payment_type==="client",{primaryInsurance:A,secondaryInsurance:_,tertiaryInsurance:T}=g.useMemo(()=>{const G=ge=>({id:null,type:ge,provider:"",plan_name:"",effective_date:"",effective_date_end:"",policy_number:"",group_number:"",subscriber_relationship:"",subscriber_fname:"",subscriber_mname:"",subscriber_lname:"",subscriber_DOB:"",subscriber_sex:"",subscriber_ss:"",subscriber_street:"",subscriber_street_line_2:"",subscriber_city:"",subscriber_state:"",subscriber_postal_code:"",subscriber_employer:"",subscriber_employer_street:"",subscriber_employer_street_line_2:"",subscriber_employer_city:"",subscriber_employer_state:"",subscriber_employer_postal_code:"",copay:"",accept_assignment:""});let R=te?.find(ge=>ge.type==="primary"),ce=te?.find(ge=>ge.type==="secondary"),de=te?.find(ge=>ge.type==="tertiary");return R||(R=G("primary")),Y||(ce||(ce=G("secondary")),de||(de=G("tertiary"))),{primaryInsurance:R,secondaryInsurance:ce,tertiaryInsurance:de}},[te,Y]),q=G=>G?{provider:G.provider||"",plan_name:G.plan_name||"",date:G.effective_date||"",date_end:G.effective_date_end||"",policy_number:G.policy_number||"",group_number:G.group_number||"",subscriber_relationship:G.subscriber_relationship||"",subscriber_fname:G.subscriber_fname||"",subscriber_mname:G.subscriber_mname||"",subscriber_lname:G.subscriber_lname||"",subscriber_DOB:G.subscriber_DOB||"",subscriber_sex:G.subscriber_sex||"",subscriber_ss:G.subscriber_ss||"",subscriber_street:G.subscriber_street||"",subscriber_street_line_2:G.subscriber_street_line_2||"",subscriber_city:G.subscriber_city||"",subscriber_state:G.subscriber_state||"",subscriber_postal_code:G.subscriber_postal_code||"",subscriber_employer:G.subscriber_employer||"",subscriber_employer_street:G.subscriber_employer_street||"",subscriber_employer_street_line_2:G.subscriber_employer_street_line_2||"",subscriber_employer_city:G.subscriber_employer_city||"",subscriber_employer_state:G.subscriber_employer_state||"",subscriber_employer_postal_code:G.subscriber_employer_postal_code||"",copay:G.copay||"",accept_assignment:G.accept_assignment||"",policy_type:G.policy_type||"",type:G.type}:{},ne=G=>{let R;G==="primary"?(R=A,k(q(R)),p(!0)):G==="secondary"?(R=_,E(q(R)),f(!0)):G==="tertiary"&&(R=T,Q(q(R)),S(!0)),P(null)},fe=G=>{G==="primary"?(p(!1),k({})):G==="secondary"?(f(!1),E({})):G==="tertiary"&&(S(!1),Q({})),P(null)},C=(G,R,ce)=>{if(R==="subscriber_relationship"&&ce.toLowerCase()==="self"){const de={[R]:ce,subscriber_fname:K.fname||"",subscriber_mname:K.mname||"",subscriber_lname:K.lname||"",subscriber_DOB:K.DOB||"",subscriber_sex:K.sex||"",subscriber_ss:K.ss||"",subscriber_street:K.street||"",subscriber_street_line_2:K.street_line_2||"",subscriber_city:K.city||"",subscriber_state:K.state||"",subscriber_postal_code:K.postal_code||""};G==="primary"?k(ge=>({...ge,...de})):G==="secondary"?E(ge=>({...ge,...de})):G==="tertiary"&&Q(ge=>({...ge,...de}))}else G==="primary"?k(de=>({...de,[R]:ce})):G==="secondary"?E(de=>({...de,[R]:ce})):G==="tertiary"&&Q(de=>({...de,[R]:ce}))},M=G=>{const ce=[{field:"provider",label:"Insurance Company"},{field:"date",label:"Effective Date"},{field:"policy_number",label:"Policy Number"},{field:"subscriber_relationship",label:"Relationship"},{field:"subscriber_fname",label:"Subscriber First Name"},{field:"subscriber_lname",label:"Subscriber Last Name"},{field:"subscriber_DOB",label:"D.O.B."},{field:"subscriber_sex",label:"Sex"},{field:"subscriber_ss",label:"S.S."},{field:"subscriber_street",label:"Subscriber Address"},{field:"subscriber_city",label:"City"},{field:"subscriber_state",label:"State"},{field:"subscriber_postal_code",label:"Zip Code"}].filter(({field:de})=>!G[de]||G[de].trim()==="");if(ce.length>0)throw new Error(`Required fields missing: ${ce.map(de=>de.label).join(", ")}`)},W=async G=>{$(!0),P(null);try{let R,ce;G==="primary"?(R=N,ce=A):G==="secondary"?(R=O,ce=_):G==="tertiary"&&(R=H,ce=T),M(R);const de={...R};ce.id||(de.patient_id=K.pid,de.type=G),await Jp(ce.id,de),c&&await c(),fe(G)}catch(R){P(R.message||"Failed to save insurance changes")}finally{$(!1)}},B=(G,R,ce,de,ge,ie,I=null,je="text",we=!1)=>{const Ue=we?"form-field-label required-field-label":"form-field-label";if(ge&&ce)return I?t.jsxs("div",{className:"form-field",children:[t.jsxs("div",{className:Ue,children:[G,we&&" *"]}),t.jsxs("select",{value:ie[ce]||"",onChange:qe=>C(de,ce,qe.target.value),className:"input-md",required:we,children:[t.jsx("option",{value:"",children:"Select..."}),I.map(qe=>t.jsx("option",{value:qe.value,children:qe.label},qe.value))]})]}):t.jsxs("div",{className:"form-field",children:[t.jsxs("div",{className:Ue,children:[G,we&&" *"]}),t.jsx("input",{type:je,value:ie[ce]||"",onChange:qe=>C(de,ce,qe.target.value),className:"input-md",required:we})]});{let qe=R||"";if(I&&R){const ct=I.find(Lt=>Lt.value===R);ct&&(qe=ct.label)}return t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:G}),t.jsx("div",{className:"form-field-value",children:qe})]})}},Z=(G,R,ce=!1,de=!0,ge=null)=>{if(!G)return null;const ie=R==="primary"&&v||R==="secondary"&&j||R==="tertiary"&&y,I=R==="primary"?N:R==="secondary"?O:H,je=we=>({primary:"Primary Insurance",secondary:"Secondary Insurance",tertiary:"Tertiary Insurance"})[we]||`Insurance ${we}`;return t.jsxs("div",{className:"card-main mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:`flex items-center gap-4 ${ce?"cursor-pointer":""}`,onClick:ce?ge:void 0,children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:je(G.type)}),ce&&t.jsx("button",{className:"text-gray-600 hover:text-gray-800 transition-colors",children:de?t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),t.jsx("div",{className:"flex space-x-2",children:ie?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>fe(R),disabled:le,className:"btn-solid btn-solid-gray disabled:opacity-50",children:"Cancel"}),t.jsx("button",{onClick:()=>W(R),disabled:le,className:"btn-solid btn-solid-green disabled:opacity-50",children:le?"Saving...":"Save Changes"})]}):t.jsx("button",{onClick:()=>ne(R),className:"btn-solid btn-solid-blue",children:"Edit Insurance"})})]}),de&&ie&&t.jsx("div",{className:"mb-4 px-4 py-2 bg-purple-50 border-l-4 border-purple-700 rounded",children:t.jsxs("p",{className:"text-sm text-purple-900",children:[t.jsx("span",{className:"required-field-label",children:"*"})," Required fields are marked with an asterisk and displayed in ",t.jsx("span",{className:"required-field-label",children:"purple"})]})}),de&&t.jsx("div",{className:"card-inner",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"Insurance Details"}),B("Insurance Company",G.insurance_company_name||G.provider,"provider",R,ie,I,ve,"text",!0),B("Plan Name",G.plan_name,"plan_name",R,ie,I),B("Effective Date",G.effective_date,"date",R,ie,I,null,"date",!0),B("Effective Date End",G.effective_date_end,"date_end",R,ie,I,null,"date"),B("Policy Number",G.policy_number,"policy_number",R,ie,I,null,"text",!0),B("Group Number",G.group_number,"group_number",R,ie,I),B("CoPay",G.copay,"copay",R,ie,I,null,"text"),B("Accept Assignment",G.accept_assignment,"accept_assignment",R,ie,I,me.accept_assignment||[]),G.type==="secondary"&&B("Secondary Medicare Type",G.policy_type,"policy_type",R,ie,I)]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"Subscriber Information"}),B("Relationship",G.subscriber_relationship,"subscriber_relationship",R,ie,I,me.relationship||[],"text",!0),B("Subscriber First Name",G.subscriber_fname,"subscriber_fname",R,ie,I,null,"text",!0),B("Subscriber Middle Name",G.subscriber_mname,"subscriber_mname",R,ie,I),B("Subscriber Last Name",G.subscriber_lname,"subscriber_lname",R,ie,I,null,"text",!0),B("D.O.B.",G.subscriber_DOB,"subscriber_DOB",R,ie,I,null,"date",!0),B("Sex",G.subscriber_sex,"subscriber_sex",R,ie,I,me.sex||[],"text",!0),ie?B("S.S.",I.subscriber_ss,"subscriber_ss",R,ie,I,null,"text",!0):t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"S.S."}),t.jsx("div",{className:"form-field-value",children:G.subscriber_ss?"***-**-"+G.subscriber_ss.slice(-4):""})]}),B("Subscriber Address",G.subscriber_street,"subscriber_street",R,ie,I,null,"text",!0),B("Address Line 2",G.subscriber_street_line_2,"subscriber_street_line_2",R,ie,I),B("City",G.subscriber_city,"subscriber_city",R,ie,I,null,"text",!0),B("State",G.subscriber_state,"subscriber_state",R,ie,I,me.state||[],"text",!0),B("Zip Code",G.subscriber_postal_code,"subscriber_postal_code",R,ie,I,null,"text",!0)]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"Subscriber Employer"}),B("Subscriber Employer (SE)",G.subscriber_employer,"subscriber_employer",R,ie,I),B("SE Address",G.subscriber_employer_street,"subscriber_employer_street",R,ie,I),B("SE Address Line 2",G.subscriber_employer_street_line_2,"subscriber_employer_street_line_2",R,ie,I),B("SE City",G.subscriber_employer_city,"subscriber_employer_city",R,ie,I),B("SE State",G.subscriber_employer_state,"subscriber_employer_state",R,ie,I,me.state||[]),B("SE Zip Code",G.subscriber_employer_postal_code,"subscriber_employer_postal_code",R,ie,I)]})]})})]},G.id||`placeholder-${R}`)},re=K.employer||K.employer_street||K.employer_city||K.employer_state||K.employer_postal_code||K.employer_occupation,pe=Y?"Self-Pay (Client)":"Insurance",Ce=!Y||h;return g.useEffect(()=>{_&&d(!0),T&&b(!0)},[_,T]),t.jsxs("div",{className:"space-y-6",children:[U&&t.jsx("div",{className:"error-message",children:U}),t.jsx("div",{className:"card-main",children:t.jsx("div",{className:"card-inner",children:t.jsxs("div",{className:"flex items-center justify-between py-3 px-2",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:"Payment Type:"}),t.jsx("div",{className:`text-lg font-bold ${Y?"text-orange-600":"text-blue-600"}`,children:pe})]}),Y&&te&&te.length>0&&t.jsx("button",{onClick:()=>x(!h),className:"px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:h?"Hide Insurance Records":"Show Insurance Records"})]})})}),Ce&&t.jsxs(t.Fragment,{children:[re&&t.jsxs("div",{className:"card-main",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Client Employer Information"}),t.jsx("div",{className:"card-inner",children:t.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[t.jsxs("div",{className:"col-span-2 form-field",children:[t.jsx("div",{className:"form-field-label",children:"Employer Name"}),t.jsx("div",{className:"form-field-value",children:K.employer||""})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Start Date"}),t.jsx("div",{className:"form-field-value",children:K.employer_start_date?new Date(K.employer_start_date).toLocaleDateString():""})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"End Date"}),t.jsx("div",{className:"form-field-value",children:K.employer_end_date?new Date(K.employer_end_date).toLocaleDateString():""})]}),t.jsxs("div",{className:"col-span-2 form-field",children:[t.jsx("div",{className:"form-field-label",children:"Address"}),t.jsxs("div",{className:"form-field-value",children:[K.employer_street||"",K.employer_street_line_2&&`, ${K.employer_street_line_2}`]})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"City"}),t.jsx("div",{className:"form-field-value",children:K.employer_city||""})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"State"}),t.jsx("div",{className:"form-field-value",children:K.employer_state||""})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Postal Code"}),t.jsx("div",{className:"form-field-value",children:K.employer_postal_code||""})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Country"}),t.jsx("div",{className:"form-field-value",children:K.employer_country||""})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Occupation"}),t.jsx("div",{className:"form-field-value",children:K.employer_occupation||""})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Industry"}),t.jsx("div",{className:"form-field-value",children:K.employer_industry||""})]})]})})]}),A&&Z(A,"primary",!1,!0,null),_&&Z(_,"secondary",!0,o,()=>d(!o)),T&&Z(T,"tertiary",!0,u,()=>b(!u))]})]})}function bf({encounterId:i,onClose:c}){const[o,d]=g.useState(!0),[u,b]=g.useState(null),[h,x]=g.useState(null),[v,p]=g.useState("notes");g.useEffect(()=>{i&&(async()=>{try{d(!0),x(null);const S=await Op(i);b(S)}catch(S){console.error("Error fetching encounter detail:",S),x(S.message||"Failed to load encounter details")}finally{d(!1)}})()},[i]);const j=y=>y?new Date(y).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A",f=y=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(y||0);return i?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Encounter Details"}),u&&t.jsxs("p",{className:"text-blue-100 text-sm mt-1",children:[j(u.encounter.date),"  ",u.encounter.patient_name]})]}),t.jsx("button",{onClick:c,className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)]",children:o?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),t.jsx("p",{className:"text-gray-700 mt-4",children:"Loading encounter details..."})]}):h?t.jsx("div",{className:"p-12 text-center",children:t.jsxs("div",{className:"text-red-600 font-semibold",children:["Error: ",h]})}):u?t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"card-main mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Session Information"}),t.jsx("div",{className:"card-inner",children:t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Date"}),t.jsx("div",{className:"form-field-value",children:j(u.encounter.date)})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Provider"}),t.jsx("div",{className:"form-field-value",children:u.encounter.provider_name||"N/A"})]}),t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Facility"}),t.jsx("div",{className:"form-field-value",children:u.encounter.facility_name||"N/A"})]}),t.jsxs("div",{className:"col-span-2 md:col-span-3 form-field",children:[t.jsx("div",{className:"form-field-label",children:"Reason for Visit"}),t.jsx("div",{className:"form-field-value",children:u.encounter.reason||"Not specified"})]}),u.encounter.encounter_type_description&&t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Encounter Type"}),t.jsx("div",{className:"form-field-value",children:u.encounter.encounter_type_description})]})]})})]}),t.jsxs("div",{className:"flex gap-2 mb-6 border-b border-gray-200",children:[t.jsxs("button",{onClick:()=>p("notes"),className:`px-4 py-2 font-medium transition-colors border-b-2 ${v==="notes"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800"}`,children:["Clinical Notes (",u.forms.length,")"]}),t.jsxs("button",{onClick:()=>p("billing"),className:`px-4 py-2 font-medium transition-colors border-b-2 ${v==="billing"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800"}`,children:["Billing (",u.billing.length,")"]}),t.jsxs("button",{onClick:()=>p("vitals"),className:`px-4 py-2 font-medium transition-colors border-b-2 ${v==="vitals"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800"}`,children:["Vitals (",u.vitals.length,")"]}),t.jsxs("button",{onClick:()=>p("diagnoses"),className:`px-4 py-2 font-medium transition-colors border-b-2 ${v==="diagnoses"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800"}`,children:["Diagnoses (",u.diagnoses.length,")"]})]}),v==="notes"&&t.jsx("div",{className:"space-y-3",children:u.forms.length===0?t.jsx("div",{className:"text-center py-8 text-gray-500",children:"No clinical notes recorded"}):u.forms.map(y=>t.jsx("div",{className:"card-inner",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-semibold text-gray-800",children:y.form_name||y.formdir}),t.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[j(y.date),"  ",y.user_name||"Unknown user"]})]}),y.authorized==="1"&&t.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded",children:"Authorized"})]})},y.id))}),v==="billing"&&t.jsx("div",{className:"space-y-4",children:u.billing.length===0?t.jsx("div",{className:"text-center py-8 text-gray-500",children:"No billing charges recorded"}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"Total Charges"}),t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:f(u.total_charges)})]}),t.jsx("div",{className:"space-y-2",children:u.billing.map(y=>t.jsx("div",{className:"card-inner",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"font-semibold text-gray-800",children:[y.code_type,": ",y.code]}),t.jsx("div",{className:"text-sm text-gray-600 mt-1",children:y.code_text}),y.modifier&&t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Modifier: ",y.modifier]})]}),t.jsxs("div",{className:"text-right ml-4",children:[t.jsx("div",{className:"font-bold text-gray-800",children:f(y.fee*y.units)}),t.jsxs("div",{className:"text-xs text-gray-500",children:[y.units," unit",y.units!=="1"?"s":"","  ",f(y.fee)]}),y.billed==="1"&&t.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-semibold rounded",children:"Billed"})]})]})},y.id))})]})}),v==="vitals"&&t.jsx("div",{className:"space-y-3",children:u.vitals.length===0?t.jsx("div",{className:"text-center py-8 text-gray-500",children:"No vitals recorded"}):u.vitals.map(y=>t.jsx("div",{className:"card-inner",children:t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[t.jsxs("div",{className:"col-span-2 md:col-span-4 form-field",children:[t.jsx("div",{className:"form-field-label",children:"Recorded"}),t.jsxs("div",{className:"form-field-value",children:[j(y.date),"  ",y.user_name||"Unknown user"]})]}),y.bps&&y.bpd&&t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Blood Pressure"}),t.jsxs("div",{className:"form-field-value",children:[y.bps,"/",y.bpd]})]}),y.pulse&&t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Pulse"}),t.jsxs("div",{className:"form-field-value",children:[y.pulse," bpm"]})]}),y.temperature&&t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Temperature"}),t.jsxs("div",{className:"form-field-value",children:[y.temperature,"F"]})]}),y.weight&&t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Weight"}),t.jsxs("div",{className:"form-field-value",children:[y.weight," lbs"]})]}),y.height&&t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Height"}),t.jsxs("div",{className:"form-field-value",children:[y.height," in"]})]}),y.BMI&&t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"BMI"}),t.jsx("div",{className:"form-field-value",children:y.BMI})]}),y.oxygen_saturation&&t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"O2 Saturation"}),t.jsxs("div",{className:"form-field-value",children:[y.oxygen_saturation,"%"]})]}),y.respiration&&t.jsxs("div",{className:"form-field",children:[t.jsx("div",{className:"form-field-label",children:"Respiration"}),t.jsxs("div",{className:"form-field-value",children:[y.respiration," /min"]})]})]})},y.id))}),v==="diagnoses"&&t.jsx("div",{className:"space-y-3",children:u.diagnoses.length===0?t.jsx("div",{className:"text-center py-8 text-gray-500",children:"No diagnoses recorded for this encounter"}):u.diagnoses.map(y=>t.jsxs("div",{className:"card-inner",children:[t.jsx("div",{className:"font-semibold text-gray-800",children:y.title}),y.diagnosis&&t.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Code: ",y.diagnosis]}),t.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Started: ",j(y.begdate),y.enddate&&`  Ended: ${j(y.enddate)}`]}),y.outcome&&t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Outcome: ",y.outcome]})]},y.id))})]}):null}),t.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50 flex justify-end gap-3",children:t.jsx("button",{onClick:c,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg transition-colors font-medium",children:"Close"})})]})}):null}function Yb({data:i}){const[c,o]=g.useState("all"),[d,u]=g.useState("date-desc"),[b,h]=g.useState(null);if(!i)return t.jsx("div",{className:"empty-state",children:"Loading encounter history..."});const{encounters:x,patient:v}=i,p=y=>y?new Date(y).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A",j=g.useMemo(()=>{if(!x||x.length===0)return[];let y=[...x];const S=new Date;if(c==="recent"){const N=new Date(S.getTime()-2592e6);y=y.filter(k=>new Date(k.date)>=N)}else if(c==="past-year"){const N=new Date(S.getTime()-31536e6);y=y.filter(k=>new Date(k.date)>=N)}return d==="date-desc"?y.sort((N,k)=>new Date(k.date)-new Date(N.date)):d==="date-asc"?y.sort((N,k)=>new Date(N.date)-new Date(k.date)):d==="provider"&&y.sort((N,k)=>{const O=N.provider_name||"",E=k.provider_name||"";return O.localeCompare(E)}),y},[x,c,d]),f=g.useMemo(()=>{if(!x||x.length===0)return{total:0,lastVisit:null,avgPerMonth:0,thisYear:0};const y=new Date,S=new Date(y.getTime()-365*24*60*60*1e3),N=new Date(y.getFullYear(),0,1),k=x.map(le=>new Date(le.date)),O=k.length>0?new Date(Math.max(...k.map(le=>le.getTime()))):null,H=x.filter(le=>new Date(le.date)>=S).length/12,Q=x.filter(le=>new Date(le.date)>=N);return{total:x.length,lastVisit:O?p(O):"N/A",avgPerMonth:H.toFixed(1),thisYear:Q.length}},[x]);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[t.jsxs("div",{className:"card-main",children:[t.jsx("h2",{className:"card-header",children:"Visit Statistics"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"stat-box",children:[t.jsx("div",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Total Visits"}),t.jsx("div",{className:"text-3xl font-bold text-blue-600",children:f.total})]}),t.jsxs("div",{className:"stat-box",children:[t.jsx("div",{className:"text-caption text-gray-600 font-semibold mb-1",children:"This Year"}),t.jsx("div",{className:"text-3xl font-bold text-green-600",children:f.thisYear})]}),t.jsxs("div",{className:"stat-box",children:[t.jsx("div",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Avg/Month (Past Year)"}),t.jsx("div",{className:"text-3xl font-bold text-purple-600",children:f.avgPerMonth})]}),t.jsxs("div",{className:"stat-box",children:[t.jsx("div",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Last Visit"}),t.jsx("div",{className:"text-lg font-bold text-gray-700",children:f.lastVisit})]})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsx("h3",{className:"section-header",children:"Filter By"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("button",{onClick:()=>o("all"),className:`w-full text-left filter-btn-enhanced ${c==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Encounters"}),t.jsx("button",{onClick:()=>o("recent"),className:`w-full text-left filter-btn-enhanced ${c==="recent"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Last 30 Days"}),t.jsx("button",{onClick:()=>o("past-year"),className:`w-full text-left filter-btn-enhanced ${c==="past-year"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Past Year"})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsx("h3",{className:"section-header",children:"Sort By"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("button",{onClick:()=>u("date-desc"),className:`w-full text-left filter-btn-enhanced ${d==="date-desc"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Newest First"}),t.jsx("button",{onClick:()=>u("date-asc"),className:`w-full text-left filter-btn-enhanced ${d==="date-asc"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Oldest First"}),t.jsx("button",{onClick:()=>u("provider"),className:`w-full text-left filter-btn-enhanced ${d==="provider"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"By Provider"})]})]})]}),t.jsx("div",{className:"lg:col-span-3",children:t.jsxs("div",{className:"card-main",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Encounter History",t.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",j.length," ",j.length===1?"visit":"visits",")"]})]})}),j.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),t.jsx("p",{className:"text-gray-600 text-lg",children:"No encounters found"}),t.jsx("p",{className:"text-gray-500 text-sm mt-2",children:c!=="all"?"Try adjusting your filters":"No visit history recorded"})]}):t.jsx("div",{className:"space-y-3",children:j.map(y=>t.jsx("div",{className:"card-inner hover:bg-white/90 transition-colors cursor-pointer",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"text-lg font-bold text-gray-800",children:p(y.date)}),t.jsxs("span",{className:"badge-sm badge-light-info",children:["ID: ",y.encounter]})]}),y.reason&&t.jsx("div",{className:"text-gray-900 font-medium mb-2",children:y.reason}),t.jsxs("div",{className:"flex gap-6 text-sm text-gray-600",children:[y.provider_name&&t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Provider:"})," ",y.provider_name]}),y.facility_name&&t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Facility:"})," ",y.facility_name]})]})]}),t.jsx("button",{onClick:S=>{S.stopPropagation(),h(y.encounter)},className:"ml-4 btn-mini",children:"View Details"})]})},y.encounter))})]})})]}),b&&t.jsx(bf,{encounterId:b,onClose:()=>h(null)})]})}function Gb({patientId:i,onNoteClick:c,onCreateNote:o}){const[d,u]=g.useState([]),[b,h]=g.useState(!0),[x,v]=g.useState(null),[p,j]=g.useState({note_type:null,status:null,start_date:null,end_date:null});g.useEffect(()=>{f()},[i,p]);const f=async()=>{h(!0),v(null);try{const E=await Lp(i,p);u(E.notes||[])}catch(E){console.error("Error loading notes:",E),v(E.message)}finally{h(!1)}},y=E=>{if(!E)return"N/A";const[H,Q,le]=E.split(/[-T]/);return new Date(H,Q-1,le).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},S=E=>E?new Date(E).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}):"N/A",N=E=>({progress:"",intake:"",crisis:"",discharge:"",mse:"",admin:"",noshow:"",cancel:""})[E]||"",k=E=>({progress:"Progress",intake:"Intake",crisis:"Crisis",discharge:"Discharge",mse:"Mental Status",admin:"Administrative",noshow:"No-Show",cancel:"Cancellation"})[E]||E,O=E=>E.is_locked||E.status==="signed"?t.jsx("span",{className:"badge-sm badge-light-success",children:"Signed"}):E.status==="draft"?t.jsx("span",{className:"badge-sm badge-light-warning",children:"Draft"}):E.supervisor_review_required&&E.supervisor_review_status==="pending"?t.jsx("span",{className:"badge-sm badge-light-info",children:"Pending Review"}):null;return b?t.jsx("div",{className:"flex items-center justify-center p-12",children:t.jsx("div",{className:"text-gray-600",children:"Loading notes..."})}):x?t.jsxs("div",{className:"p-6 text-center",children:[t.jsxs("div",{className:"text-red-600 mb-4",children:["Error loading notes: ",x]}),t.jsx("button",{onClick:f,className:"px-6 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-semibold rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all shadow-lg",children:"Retry"})]}):t.jsxs("div",{className:"flex gap-6",children:[t.jsx("div",{className:"w-64 flex-shrink-0",children:t.jsxs("div",{className:"card-main sticky top-6",children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Filter Notes"}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-xs font-semibold text-gray-600 mb-2 block",children:"Note Type"}),t.jsxs("select",{value:p.note_type||"",onChange:E=>j({...p,note_type:E.target.value||null}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white",children:[t.jsx("option",{value:"",children:"All Types"}),t.jsx("option",{value:"progress",children:"Progress"}),t.jsx("option",{value:"intake",children:"Intake"}),t.jsx("option",{value:"crisis",children:"Crisis"}),t.jsx("option",{value:"discharge",children:"Discharge"}),t.jsx("option",{value:"mse",children:"Mental Status"}),t.jsx("option",{value:"admin",children:"Administrative"})]})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-xs font-semibold text-gray-600 mb-2 block",children:"Status"}),t.jsxs("select",{value:p.status||"",onChange:E=>j({...p,status:E.target.value||null}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white",children:[t.jsx("option",{value:"",children:"All Statuses"}),t.jsx("option",{value:"draft",children:"Drafts"}),t.jsx("option",{value:"signed",children:"Signed"})]})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-xs font-semibold text-gray-600 mb-2 block",children:"From Date"}),t.jsx("input",{type:"date",value:p.start_date||"",onChange:E=>j({...p,start_date:E.target.value||null}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white"})]})}),t.jsx("div",{children:t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-xs font-semibold text-gray-600 mb-2 block",children:"To Date"}),t.jsx("input",{type:"date",value:p.end_date||"",onChange:E=>j({...p,end_date:E.target.value||null}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white"})]})})]})]})}),t.jsxs("div",{className:"flex-1 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Clinical Notes",t.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",d.length," ",d.length===1?"note":"notes",")"]})]}),o&&t.jsx("button",{onClick:o,className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all shadow-lg",children:"+ New Note"})]}),d.length===0?t.jsxs("div",{className:"card-main text-center py-12",children:[t.jsx("div",{className:"text-6xl mb-4",children:""}),t.jsx("p",{className:"text-lg text-gray-600 mb-2",children:"No clinical notes found"}),t.jsx("p",{className:"text-sm text-gray-500",children:p.note_type||p.status?"Try adjusting your filters":"Create your first note to get started"})]}):t.jsx("div",{className:"space-y-3",children:d.map(E=>{const H=E.status==="draft";return t.jsx("div",{onClick:()=>c&&c(E.id,H,E.note_type),className:"card-main hover:shadow-2xl hover:scale-[1.01] hover:border-blue-400 cursor-pointer transition-all duration-200",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-2xl",children:N(E.note_type)}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsxs("span",{className:"font-semibold text-gray-800",children:[k(E.note_type)," Note"]}),O(E),E.is_addendum&&t.jsx("span",{className:"badge-sm badge-light-info",children:"Addendum"})]}),t.jsxs("div",{className:"text-sm text-gray-600",children:["Service Date: ",y(E.service_date),"  ",E.provider_name||"Unknown provider"]})]})]}),E.behavior_problem&&t.jsxs("div",{className:"text-sm text-gray-700 line-clamp-2 mt-2",children:[E.behavior_problem.substring(0,150),"..."]}),t.jsxs("div",{className:"flex gap-4 text-xs text-gray-500 mt-2",children:[t.jsxs("span",{children:["Created: ",S(E.created_at)]}),E.signed_at&&t.jsxs("span",{children:["Signed: ",S(E.signed_at)]}),E.addenda&&E.addenda.length>0&&t.jsxs("span",{className:"text-blue-600 font-medium",children:[E.addenda.length," ",E.addenda.length===1?"addendum":"addenda"]})]})]}),t.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm font-semibold rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all shadow-md",children:H?"Edit":"View"})]})},E.id)})})]})]})}function Fb({onSelect:i,preselected:c=null,appointment:o=null}){const d=[{id:"intake",label:"Intake Assessment",description:"First session with client",icon:"",row:1,cols:3},{id:"diagnosis",label:"Diagnosis Note",description:"ICD-10 diagnosis assessment and documentation",icon:"",row:1,cols:3},{id:"treatment_plan",label:"Treatment Plan",description:"Goals, objectives, interventions",icon:"",row:1,cols:3},{id:"progress",label:"Progress Note",description:"Regular therapy session",icon:"",row:1,cols:3},{id:"mse",label:"Mental Status Exam",description:"Standalone MSE assessment",icon:"",row:2,cols:6},{id:"discharge",label:"Discharge Summary",description:"Final session, treatment conclusion",icon:"",row:2,cols:6},{id:"crisis",label:"Crisis Note",description:"Emergency or high-risk session",icon:"",row:3,cols:6},{id:"risk_assessment",label:"Risk Assessment",description:"SI/HI safety evaluation",icon:"",row:3,cols:6},{id:"appointment_status",label:"Appointment Status",description:"No show, late cancel, cancellation",icon:"",row:4,cols:6,quick:!0},{id:"client_communication",label:"Client Communication",description:"Phone calls, emails, client contact",icon:"",row:4,cols:6,quick:!0}],b=c||"progress",h=f=>{i(f)},x=d.filter(f=>f.row===1),v=d.filter(f=>f.row===2),p=d.filter(f=>f.row===3),j=d.filter(f=>f.row===4);return t.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"What kind of note are you writing?"}),t.jsx("p",{className:"text-gray-600",children:"Select the type of clinical documentation"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Clinical Notes"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:x.map(f=>t.jsx("button",{onClick:()=>h(f.id),className:`card-main text-left p-4 hover:bg-blue-50 hover:border-blue-300 transition-all ${b===f.id?"ring-2 ring-blue-500 bg-blue-50":""}`,children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"text-3xl",children:f.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"text-base font-semibold text-gray-800 mb-1",children:[f.label,f.suggested&&t.jsx("span",{className:"ml-2 badge-sm badge-light-success",children:"Suggested"})]}),t.jsx("div",{className:"text-xs text-gray-600",children:f.description})]})]})},f.id))}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:v.map(f=>t.jsx("button",{onClick:()=>h(f.id),className:"card-main text-left p-4 hover:bg-blue-50 hover:border-blue-300 transition-all",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"text-3xl",children:f.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-base font-semibold text-gray-800 mb-1",children:f.label}),t.jsx("div",{className:"text-xs text-gray-600",children:f.description})]})]})},f.id))}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:p.map(f=>t.jsx("button",{onClick:()=>h(f.id),className:"card-main text-left p-4 hover:bg-orange-50 hover:border-orange-300 transition-all",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"text-3xl",children:f.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-base font-semibold text-gray-800 mb-1",children:f.label}),t.jsx("div",{className:"text-xs text-gray-600",children:f.description})]})]})},f.id))}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:j.map(f=>t.jsx("button",{onClick:()=>h(f.id),className:"card-main text-left p-4 hover:bg-gray-50 hover:border-gray-400 transition-all",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"text-3xl",children:f.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-base font-semibold text-gray-800 mb-1",children:f.label}),t.jsx("div",{className:"text-xs text-gray-600",children:f.description}),f.quick&&t.jsx("div",{className:"mt-1 text-xs text-blue-600 font-medium",children:" Quick note"})]})]})},f.id))})]})]})}function Xb({data:i}){const[c,o]=g.useState("list"),[d,u]=g.useState(null),[b,h]=g.useState(null),x=()=>{o("selectType"),h(null)},v=S=>{h(S),o("create")},p=(S,N,k)=>{u(S),h(k),o(N?"edit":"view")},j=S=>{u(S),o("edit")},f=()=>{o("list"),u(null),h(null)},y=()=>{o("list"),u(null),h(null)};return c==="selectType"?t.jsx(Fb,{onSelect:v,patientId:i?.patient?.pid}):c==="create"?t.jsx(Ci,{patientId:i?.patient?.pid,noteType:b,onSave:f,onClose:y}):c==="edit"?t.jsx(Ci,{noteId:d,patientId:i?.patient?.pid,noteType:b,onSave:f,onClose:y}):c==="view"?t.jsx(pf,{noteId:d,onClose:y,onEdit:j}):t.jsx(Gb,{patientId:i?.patient?.pid,onNoteClick:p,onCreateNote:x})}function Qb({data:i}){const[c,o]=g.useState(null),[d,u]=g.useState(!0),[b,h]=g.useState(null),[x,v]=g.useState("all"),[p,j]=g.useState(null);g.useEffect(()=>{(async()=>{if(i?.patient?.pid)try{u(!0),h(null);const k=await Xp(i.patient.pid);o(k)}catch(k){console.error("Error fetching billing:",k),h(k.message||"Failed to load billing information")}finally{u(!1)}})()},[i]);const f=N=>N?new Date(N).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A",y=N=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(N||0),S=g.useMemo(()=>{if(!c?.charges)return[];let N=[...c.charges];return x==="billed"?N=N.filter(k=>k.billed==="1"):x==="unbilled"&&(N=N.filter(k=>k.billed!=="1")),N},[c,x]);return d?t.jsx("div",{className:"text-gray-700 text-center py-8",children:"Loading billing information..."}):b?t.jsxs("div",{className:"text-red-600 text-center py-8",children:["Error: ",b]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[t.jsxs("div",{className:"card-main",children:[t.jsx("h2",{className:"card-header",children:"Financial Summary"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"stat-box stat-box-blue",children:[t.jsx("div",{className:"text-gray-600 text-xs font-semibold mb-1",children:"Total Charges"}),t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:y(c?.summary?.total_charges||0)})]}),t.jsxs("div",{className:"stat-box stat-box-green",children:[t.jsx("div",{className:"text-gray-600 text-xs font-semibold mb-1",children:"Total Payments"}),t.jsx("div",{className:"text-2xl font-bold text-green-600",children:y(c?.summary?.total_payments||0)})]}),t.jsxs("div",{className:`stat-box ${(c?.summary?.balance||0)>0?"stat-box-red":"stat-box"}`,children:[t.jsx("div",{className:"text-gray-600 text-xs font-semibold mb-1",children:"Balance Due"}),t.jsx("div",{className:`text-2xl font-bold ${(c?.summary?.balance||0)>0?"text-red-600":"text-gray-600"}`,children:y(c?.summary?.balance||0)})]})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsx("h3",{className:"section-header",children:"Filter By"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("button",{onClick:()=>v("all"),className:`w-full text-left filter-btn-enhanced ${x==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Charges"}),t.jsx("button",{onClick:()=>v("unbilled"),className:`w-full text-left filter-btn-enhanced ${x==="unbilled"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Unbilled"}),t.jsx("button",{onClick:()=>v("billed"),className:`w-full text-left filter-btn-enhanced ${x==="billed"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Billed"})]})]}),t.jsxs("div",{className:"card-main",children:[t.jsx("h2",{className:"card-header",children:"Recent Payments"}),c?.payments&&c.payments.length>0?t.jsx("div",{className:"space-y-2",children:c.payments.slice(0,5).map(N=>t.jsxs("div",{className:"stat-box",children:[t.jsx("div",{className:"font-semibold text-gray-800",children:y(N.pay_amount)}),t.jsx("div",{className:"text-xs text-gray-600 mt-1",children:f(N.dtime)}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:N.method||"Payment"})]},N.session_id))}):t.jsx("div",{className:"text-sm text-gray-500",children:"No payments recorded"})]})]}),t.jsx("div",{className:"lg:col-span-3",children:t.jsxs("div",{className:"card-main",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Billing Charges",t.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",S.length," ",S.length===1?"charge":"charges",")"]})]})}),S.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 14l6-6m-5.5.5h.01m4.99 5h.01M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16l3.5-2 3.5 2 3.5-2 3.5 2zM10 8.5a.5.5 0 11-1 0 .5.5 0 011 0zm5 5a.5.5 0 11-1 0 .5.5 0 011 0z"})}),t.jsx("p",{className:"text-gray-600 text-lg",children:"No charges found"}),t.jsx("p",{className:"text-gray-500 text-sm mt-2",children:x!=="all"?"Try adjusting your filters":"No billing charges recorded"})]}):t.jsx("div",{className:"space-y-3",children:S.map(N=>t.jsx("div",{className:"card-inner hover:bg-white/90 transition-colors cursor-pointer",onClick:()=>j(N.encounter),children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsxs("div",{className:"font-bold text-gray-800",children:[N.code_type,": ",N.code]}),N.billed==="1"?t.jsx("span",{className:"badge-sm badge-light-success",children:"Billed"}):t.jsx("span",{className:"badge-sm badge-light-warning",children:"Unbilled"}),N.authorized==="1"&&t.jsx("span",{className:"badge-sm badge-light-info",children:"Authorized"})]}),t.jsx("div",{className:"text-sm text-gray-700 mb-2",children:N.code_text}),N.encounter_reason&&t.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[t.jsx("span",{className:"font-semibold",children:"Encounter:"})," ",N.encounter_reason]}),t.jsxs("div",{className:"flex gap-6 text-xs text-gray-500",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Date:"})," ",f(N.encounter_date)]}),N.provider_name&&t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Provider:"})," ",N.provider_name]}),N.facility_name&&t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Facility:"})," ",N.facility_name]}),N.modifier&&t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Modifier:"})," ",N.modifier]})]})]}),t.jsxs("div",{className:"ml-4 text-right",children:[t.jsx("div",{className:"font-bold text-gray-800 text-lg",children:y(parseFloat(N.fee)*parseFloat(N.units))}),t.jsxs("div",{className:"text-xs text-gray-500",children:[N.units," unit",N.units!=="1"?"s":"","  ",y(N.fee)]}),t.jsx("button",{className:"mt-2 btn-mini",children:"View Encounter"})]})]})},N.id))})]})})]}),p&&t.jsx(bf,{encounterId:p,onClose:()=>j(null)})]})}function Vb({data:i}){const[c,o]=g.useState([]),[d,u]=g.useState([]),[b,h]=g.useState([]),[x,v]=g.useState({}),[p,j]=g.useState(!0),[f,y]=g.useState(null),[S,N]=g.useState(!1),[k,O]=g.useState(!1),[E,H]=g.useState(null),[Q,le]=g.useState(null),[$,U]=g.useState({name:"",category_id:""}),P=i?.patient?.pid;g.useEffect(()=>{P&&(ve(),he())},[P]);const ve=async()=>{try{j(!0);const M=await fetch(`/custom/api/client_documents.php?id=${P}`,{credentials:"include"});if(!M.ok)throw new Error("Failed to fetch documents");const W=await M.json();o(W.documents||[]),u(W.categories||[]);const B={};W.categories?.forEach(Z=>{B[Z.id]=!0}),v(B)}catch(M){console.error("Error fetching documents:",M),y(M.message)}finally{j(!1)}},he=async()=>{try{const M=await fetch("/custom/api/client_documents.php?action=categories",{credentials:"include"});if(!M.ok)throw new Error("Failed to fetch categories");const W=await M.json();h(W.categories||[])}catch(M){console.error("Error fetching categories:",M)}},me=M=>{v(W=>({...W,[M]:!W[M]}))},ue=M=>{const W=M.target.files[0];W&&(le(W),$.name||U(B=>({...B,name:W.name})))},K=(M,W)=>{U(B=>({...B,[M]:W}))},te=()=>{N(!0),H(null),le(null),U({name:"",category_id:""})},Y=()=>{N(!1),H(null),le(null),U({name:"",category_id:""})},A=async()=>{if(!Q){H("Please select a file to upload");return}try{O(!0),H(null);const M=new FormData;M.append("file",Q),M.append("patient_id",P),M.append("name",$.name||Q.name),$.category_id&&M.append("category_id",$.category_id);const W=await fetch("/custom/api/client_documents.php",{method:"POST",credentials:"include",body:M}),B=await W.json();if(!W.ok)throw new Error(B.error||"Failed to upload document");await ve(),Y()}catch(M){console.error("Error uploading document:",M),H(M.message)}finally{O(!1)}},_=M=>M?M.includes("pdf")?"":M.includes("image")?"":M.includes("word")||M.includes("document")?"":M.includes("excel")||M.includes("spreadsheet")?"":"":"",T=M=>{if(!M)return"";const W=M/1024;return W<1024?`${W.toFixed(1)} KB`:`${(W/1024).toFixed(1)} MB`},q=M=>{if(M.name)return M.name;if(!M.url)return"Untitled Document";const B=M.url.replace(/^file:\/\//,"").split("/");return B[B.length-1]||"Untitled Document"},ne=M=>{const W=`/interface/patient_file/encounter/view_form.php?formname=../../Documents/${M.id}`;window.open(W,"_blank")},fe=M=>{const W=`/controller.php?document&retrieve&patient_id=${P}&document_id=${M.id}`;window.open(W,"_blank")},C={};return c.forEach(M=>{const W=M.category_id||"uncategorized";C[W]||(C[W]=[]),C[W].push(M)}),p?t.jsx("div",{className:"card-main",children:t.jsx("div",{className:"card-inner text-center py-8",children:t.jsx("div",{className:"text-gray-700",children:"Loading documents..."})})}):f?t.jsx("div",{className:"card-main",children:t.jsx("div",{className:"card-inner text-center py-8",children:t.jsxs("div",{className:"text-red-600",children:["Error loading documents: ",f]})})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{onClick:te,className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:" Upload Document"})}),c.length===0&&t.jsx("div",{className:"card-main",children:t.jsx("div",{className:"card-inner text-center py-8",children:t.jsx("div",{className:"text-gray-500",children:"No documents on file"})})}),d.map(M=>{const W=C[M.id]||[],B=x[M.id];return W.length===0?null:t.jsxs("div",{className:"card-main",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer",onClick:()=>me(M.id),children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:[M.name," (",W.length,")"]}),t.jsx("button",{className:"text-gray-600 hover:text-gray-800 transition-colors",children:B?t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),B&&t.jsx("div",{className:"card-inner",children:t.jsx("div",{className:"space-y-3",children:W.map(Z=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[t.jsx("span",{className:"text-2xl",children:_(Z.mimetype)}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-medium text-gray-900",children:q(Z)}),t.jsxs("div",{className:"text-sm text-gray-500",children:[Z.date&&new Date(Z.date).toLocaleDateString(),"  ",T(Z.size)]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>ne(Z),className:"px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"View"}),t.jsx("button",{onClick:()=>fe(Z),className:"px-3 py-1.5 text-sm font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:"Download"})]})]},Z.id))})})]},M.id)}),C.uncategorized&&C.uncategorized.length>0&&t.jsxs("div",{className:"card-main",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer",onClick:()=>me("uncategorized"),children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Uncategorized (",C.uncategorized.length,")"]}),t.jsx("button",{className:"text-gray-600 hover:text-gray-800 transition-colors",children:x.uncategorized?t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),x.uncategorized&&t.jsx("div",{className:"card-inner",children:t.jsx("div",{className:"space-y-3",children:C.uncategorized.map(M=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[t.jsx("span",{className:"text-2xl",children:_(M.mimetype)}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-medium text-gray-900",children:q(M)}),t.jsxs("div",{className:"text-sm text-gray-500",children:[M.date&&new Date(M.date).toLocaleDateString(),"  ",T(M.size)]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>ne(M),className:"px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"View"}),t.jsx("button",{onClick:()=>fe(M),className:"px-3 py-1.5 text-sm font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:"Download"})]})]},M.id))})})]}),S&&Ja.createPortal(t.jsx("div",{className:"modal-backdrop",children:t.jsxs("div",{className:"modal-container max-w-lg",children:[t.jsxs("div",{className:"modal-header",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Upload Document"}),t.jsx("button",{onClick:Y,disabled:k,className:"text-gray-500 hover:text-gray-700",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"modal-body",children:[E&&t.jsx("div",{className:"error-message mb-4",children:E}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-gray-700 font-semibold mb-2",children:["Select File ",t.jsx("span",{className:"text-red-600",children:"*"})]}),t.jsx("input",{type:"file",onChange:ue,className:"input-field"}),Q&&t.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",Q.name," (",(Q.size/1024).toFixed(1)," KB)"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"Document Name"}),t.jsx("input",{type:"text",value:$.name,onChange:M=>K("name",M.target.value),placeholder:"Enter document name",className:"input-field"}),t.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Leave blank to use filename"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"Category (Optional)"}),t.jsxs("select",{value:$.category_id,onChange:M=>K("category_id",M.target.value),className:"input-field",children:[t.jsx("option",{value:"",children:"Select a category..."}),b.map(M=>t.jsx("option",{value:M.id,children:M.name},M.id))]})]})]}),t.jsxs("p",{className:"text-sm text-gray-600 mt-4",children:[t.jsx("span",{className:"text-red-600",children:"*"})," Required"]})]}),t.jsxs("div",{className:"modal-footer",children:[t.jsx("button",{onClick:Y,disabled:k,className:"btn-action btn-cancel",children:"Cancel"}),t.jsx("button",{onClick:A,disabled:k||!Q,className:"btn-action btn-primary",children:k?"Uploading...":"Upload"})]})]})}),document.body)]})}function Zb({tabName:i}){return t.jsxs("div",{className:"card-main text-center",children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:[i," Coming Soon"]}),t.jsx("p",{className:"text-gray-600",children:"This feature is under development and will be available in a future update."})]})}function $b(){const{id:i}=Sg(),{user:c,loading:o}=bo(),[d,u]=g.useState(null),[b,h]=g.useState("summary"),[x,v]=g.useState("clients"),[p,j]=g.useState(!0),[f,y]=g.useState(null),S=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),N=async()=>{await mf()},k=async()=>{try{j(!0),y(null),console.log("Fetching client data for ID:",i);const E=await af(i);console.log("Client data received:",E),u(E)}catch(E){console.error("Error fetching client data:",E),y(E.message||"Failed to load client data")}finally{j(!1)}};g.useEffect(()=>{i&&k()},[i]);const O=()=>{if(p)return t.jsx("div",{className:"card-main p-12 text-center",children:t.jsx("div",{className:"text-gray-700",children:"Loading client data..."})});if(f)return t.jsx("div",{className:"card-main p-12 text-center",children:t.jsxs("div",{className:"text-red-600 font-semibold",children:["Error: ",f]})});switch(b){case"summary":return t.jsx(bb,{data:d});case"demographics":return t.jsx(vb,{data:d,onDataUpdate:k});case"insurance":return t.jsx(qb,{data:d});case"encounters":return t.jsx(Yb,{data:d});case"clinical":return t.jsx(Xb,{data:d});case"documents":return t.jsx(Vb,{data:d});case"billing":return t.jsx(Qb,{data:d});case"admin":return t.jsx(Hb,{data:d});default:return t.jsx(Zb,{tabName:"This Tab"})}};return o||!c?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-mental",children:t.jsxs("div",{className:"backdrop-blur-2xl bg-white/90 rounded-3xl shadow-2xl p-8 border border-white/50",children:[t.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto"}),t.jsx("p",{className:"text-gray-700 font-semibold mt-4 text-center",children:"Loading..."})]})}):t.jsxs(Ih,{user:c,activeNav:x,setActiveNav:v,today:S,onLogout:N,children:[t.jsx(gb,{client:d?.patient}),t.jsx(pb,{activeTab:b,onTabChange:h}),O()]})}function Jb(){const[i,c]=g.useState(null),[o,d]=g.useState("replace_all"),[u,b]=g.useState(!1),[h,x]=g.useState(null),[v,p]=g.useState(null),[j,f]=g.useState(null),y=N=>{const k=N.target.files[0];k&&(c(k),p(null),f(null))},S=async()=>{if(!i){p("Please select a file first");return}b(!0),p(null),x("Uploading file...");try{const N=new FormData;N.append("icd10_file",i),N.append("action",o);const k=await fetch("/custom/api/import_icd10_codes.php",{method:"POST",body:N,credentials:"include"}),O=await k.json();if(!k.ok)throw new Error(O.message||O.error||"Import failed");x(null),f(O),c(null),document.getElementById("file-input").value=""}catch(N){console.error("Import error:",N),p(N.message||"Import failed. Please try again."),x(null)}finally{b(!1)}};return t.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:" ICD-10 Code Import"}),t.jsx("p",{className:"text-gray-600",children:"Import ICD-10-CM diagnosis codes from CMS (Centers for Medicare & Medicaid Services)"})]}),t.jsxs("div",{className:"card-main mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:" Instructions"}),t.jsxs("div",{className:"card-inner space-y-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"1. Download ICD-10-CM File"}),t.jsxs("p",{className:"text-gray-600 mb-2",children:["Visit: ",t.jsx("a",{href:"https://www.cms.gov/medicare/coding-billing/icd-10-codes",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"https://www.cms.gov/medicare/coding-billing/icd-10-codes"})]}),t.jsx("p",{className:"text-gray-600",children:"Download the current year's ICD-10-CM Code Descriptions (tab-delimited text file)"})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"2. Select Import Action"}),t.jsxs("p",{className:"text-gray-600",children:[t.jsx("strong",{children:"Replace All:"})," Deletes existing codes and imports fresh (recommended for annual updates)",t.jsx("br",{}),t.jsx("strong",{children:"Update Only:"})," Updates existing codes and adds new ones (preserves custom codes)"]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"3. Upload File"}),t.jsx("p",{className:"text-gray-600",children:'Select the downloaded file and click "Import Codes". This may take 1-2 minutes to process ~72,000 codes.'})]})]})]}),t.jsxs("div",{className:"card-main mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Import Settings"}),t.jsxs("div",{className:"card-inner space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Import Action"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-3 p-3 border-2 border-gray-300 rounded-lg cursor-pointer hover:bg-blue-50 hover:border-blue-300 transition-colors",children:[t.jsx("input",{type:"radio",name:"action",value:"replace_all",checked:o==="replace_all",onChange:N=>d(N.target.value),disabled:u,className:"w-4 h-4 text-blue-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-gray-900",children:"Replace All Codes"}),t.jsx("div",{className:"text-sm text-gray-600",children:"Deletes all existing ICD-10 codes and imports fresh (recommended)"})]})]}),t.jsxs("label",{className:"flex items-center gap-3 p-3 border-2 border-gray-300 rounded-lg cursor-pointer hover:bg-blue-50 hover:border-blue-300 transition-colors",children:[t.jsx("input",{type:"radio",name:"action",value:"update_only",checked:o==="update_only",onChange:N=>d(N.target.value),disabled:u,className:"w-4 h-4 text-blue-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-gray-900",children:"Update Only"}),t.jsx("div",{className:"text-sm text-gray-600",children:"Updates existing codes and adds new ones (preserves custom codes)"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select ICD-10-CM File"}),t.jsx("input",{id:"file-input",type:"file",accept:".txt,.csv,.tsv",onChange:y,disabled:u,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm disabled:bg-gray-100 disabled:cursor-not-allowed"}),i&&t.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",t.jsx("span",{className:"font-semibold",children:i.name})," (",(i.size/1024/1024).toFixed(2)," MB)"]})]}),t.jsx("button",{onClick:S,disabled:!i||u,className:"w-full px-6 py-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-blue-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all shadow-lg text-lg",children:u?t.jsxs("span",{className:"flex items-center justify-center gap-3",children:[t.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"}),"Importing Codes..."]}):" Import ICD-10 Codes"})]})]}),h&&t.jsx("div",{className:"card-main mb-6 bg-blue-50 border-blue-300",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-blue-600 border-t-transparent rounded-full"}),t.jsx("span",{className:"text-blue-900 font-semibold",children:h})]})}),v&&t.jsx("div",{className:"card-main mb-6 bg-red-50 border-red-300",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-red-900 mb-1",children:"Import Failed"}),t.jsx("p",{className:"text-red-800",children:v})]})]})}),j&&t.jsxs("div",{className:"card-main bg-green-50 border-green-300",children:[t.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[t.jsx("span",{className:"text-3xl",children:""}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-semibold text-green-900 mb-1",children:"Import Successful!"}),t.jsx("p",{className:"text-green-800",children:j.message})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[t.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[t.jsx("div",{className:"text-2xl font-bold text-green-700",children:j.imported.toLocaleString()}),t.jsx("div",{className:"text-sm text-gray-600",children:"Imported"})]}),t.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-700",children:j.total_active.toLocaleString()}),t.jsx("div",{className:"text-sm text-gray-600",children:"Total Active"})]}),t.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[t.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:j.skipped.toLocaleString()}),t.jsx("div",{className:"text-sm text-gray-600",children:"Skipped"})]}),t.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[t.jsx("div",{className:"text-2xl font-bold text-red-700",children:j.errors.toLocaleString()}),t.jsx("div",{className:"text-sm text-gray-600",children:"Errors"})]})]}),t.jsxs("div",{className:"mt-6 p-4 bg-white rounded-lg border border-green-200",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:" Next Steps:"}),t.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-700 space-y-1",children:[t.jsx("li",{children:"ICD-10 codes are now available for diagnosis notes"}),t.jsx("li",{children:"Test by creating a diagnosis note and searching for codes"}),t.jsx("li",{children:"Codes update annually on October 1st - re-import then"})]})]})]}),t.jsx("div",{className:"card-main bg-yellow-50 border-yellow-300 mt-6",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:"Important Notes"}),t.jsxs("ul",{className:"list-disc list-inside text-sm text-yellow-800 space-y-1",children:[t.jsxs("li",{children:[t.jsx("strong",{children:"File Size:"})," ICD-10 files are typically 10-15 MB with ~72,000 codes"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Import Time:"})," Expect 1-2 minutes to process all codes"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Backup:"}),' If using "Replace All", existing custom codes will be deleted']}),t.jsxs("li",{children:[t.jsx("strong",{children:"Annual Updates:"})," ICD-10 codes are updated every October 1st"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Admin Only:"})," This function requires admin privileges"]})]})]})]})})]})}function Kb(){return t.jsx(dp,{children:t.jsxs(qg,{children:[t.jsx(is,{path:"/",element:t.jsx(jp,{})}),t.jsx(is,{path:"/dashboard",element:t.jsx(xb,{})}),t.jsx(is,{path:"/clients/:id",element:t.jsx($b,{})}),t.jsx(is,{path:"/admin/icd10-import",element:t.jsx(Jb,{})}),t.jsx(is,{path:"*",element:t.jsx(Bg,{to:"/",replace:!0})})]})})}Y0.createRoot(document.getElementById("root")).render(t.jsx(Kb,{}));
