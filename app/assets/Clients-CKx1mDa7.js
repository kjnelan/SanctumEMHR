import{c as o,j as e,u as E,r as t,U as B,N as I,t as U,v as O,w as R}from"./index-M_KA-mT_.js";const T=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Q=o("chevron-right",T);const q=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],z=o("loader-circle",q);const G=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"8",x2:"16",y1:"15",y2:"15",key:"1xb1d9"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],H=o("meh",G);const K=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Y=o("plus",K);function J(){const c=[{age:"3 days ago",color:"border-red-400"},{age:"2 days ago",color:"border-amber-400"},{age:"Yesterday",color:"border-yellow-400"}];return e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Pending Documentation"}),e.jsx("div",{className:"space-y-3",children:c.map((n,x)=>e.jsxs("div",{className:`backdrop-blur-xl bg-white/60 ${n.color} border-l-4 rounded-2xl p-4 cursor-pointer hover:shadow-lg transition-all hover:bg-white/70`,children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:n.age}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Complete session note"})]},x))})]})}function X(){const c=E(),[n,x]=t.useState(""),[i,j]=t.useState([]),[m,b]=t.useState(!1),[u,h]=t.useState(""),[w,S]=t.useState(!1),[g,k]=t.useState({activeClients:0,inactiveClients:0,dischargedClients:0,todayClients:0}),[N,_]=t.useState(!0),[r,y]=t.useState([]),[D,v]=t.useState(!0),[l,d]=t.useState("active"),[L,f]=t.useState(!1);t.useEffect(()=>{(async()=>{try{const a=await U();k(a)}catch(a){console.error("Failed to fetch data:",a)}finally{_(!1)}})()},[]),t.useEffect(()=>{(async()=>{try{v(!0);const a=await O(l);y(a||[])}catch(a){console.error("Failed to fetch clients:",a),y([])}finally{v(!1)}})()},[l]);const $=async s=>{if(s.preventDefault(),!n.trim()){h("Please enter a search term");return}b(!0),h(""),S(!0);try{const a=await R(n);j(a||[])}catch(a){console.error("Search error:",a),h("Failed to search patients. Please try again."),j([])}finally{b(!1)}},p=s=>{console.log("=== CLICKING CLIENT ==="),console.log("Patient ID:",s),console.log("About to navigate to:",`/clients/${s}`),c(`/clients/${s}`),console.log("Navigate called")},F=s=>{console.log("New client created with ID:",s),c(`/clients/${s}`)},C=s=>{if(!s)return"N/A";try{const[a,M,A]=s.split(/[-T]/);return new Date(a,M-1,A).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},P=s=>{const a=(s||"").toLowerCase();return a==="active"?"badge-solid-success":a==="inactive"?"badge-solid-warning":"badge-solid-neutral"};return e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"w-80 flex-shrink-0 space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:"Clients"}),e.jsx("p",{className:"text-gray-600 text-xs",children:"Manage client records"})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-4",children:"Caseload Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"stat-box",children:N?e.jsxs("div",{className:"skeleton-pulse",children:[e.jsx("div",{className:"h-3 bg-gray-300 rounded w-16 mb-2"}),e.jsx("div",{className:"h-6 bg-gray-300 rounded w-8"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:g.activeClients})]})}),e.jsx("div",{className:"stat-box",children:N?e.jsxs("div",{className:"skeleton-pulse",children:[e.jsx("div",{className:"h-3 bg-gray-300 rounded w-16 mb-2"}),e.jsx("div",{className:"h-6 bg-gray-300 rounded w-8"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Inactive"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:g.inactiveClients})]})}),e.jsx("div",{className:"stat-box",children:N?e.jsxs("div",{className:"skeleton-pulse",children:[e.jsx("div",{className:"h-3 bg-gray-300 rounded w-16 mb-2"}),e.jsx("div",{className:"h-6 bg-gray-300 rounded w-8"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Discharged"}),e.jsx("p",{className:"text-2xl font-bold text-gray-500",children:g.dischargedClients})]})})]})]}),e.jsx(J,{})]}),e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsx("div",{className:"card-main",children:e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-gray-800 text-sm font-semibold mb-2",children:"Search by Name"}),e.jsx("input",{type:"text",value:n,onChange:s=>x(s.target.value),className:"input-lg",placeholder:"Enter client name..."})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"submit",disabled:m,className:"btn-search disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5 animate-spin"}),"Searching..."]}):"Search"})})]}),u&&e.jsx("div",{className:"error-message",children:u})]})}),w&&e.jsx("div",{className:"card-main",children:m?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"spinner spinner-md mx-auto"}),e.jsx("p",{className:"text-label mt-3",children:"Searching..."})]}):i.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(H,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),e.jsxs("p",{className:"text-gray-600",children:['No clients found matching "',n,'"']}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Try a different search term"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-label",children:["Found ",i.length," client",i.length!==1?"s":""]})}),i.map(s=>e.jsx("div",{onClick:()=>p(s.id||s.pid),className:"card-item",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:[s.fname," ",s.lname]}),e.jsxs("div",{className:"flex gap-6 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"DOB:"})," ",C(s.DOB)]}),s.phone_cell&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",s.phone_cell]})]})]}),e.jsx("div",{className:"ml-4",children:e.jsx(Q,{className:"w-6 h-6 text-gray-400"})})]})},s.id||s.pid))]})}),e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Client List"}),e.jsxs("button",{onClick:()=>f(!0),className:"btn-solid btn-solid-green btn-icon",children:[e.jsx(Y,{className:"w-4 h-4"}),"New Client"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>d("active"),className:`filter-btn-enhanced ${l==="active"?"filter-btn-active-base bg-green-500":"filter-btn-inactive"}`,children:"Active"}),e.jsx("button",{onClick:()=>d("inactive"),className:`filter-btn-enhanced ${l==="inactive"?"filter-btn-active-base bg-yellow-500":"filter-btn-inactive"}`,children:"Inactive"}),e.jsx("button",{onClick:()=>d("discharged"),className:`filter-btn-enhanced ${l==="discharged"?"filter-btn-active-base bg-gray-500":"filter-btn-inactive"}`,children:"Discharged"}),e.jsx("button",{onClick:()=>d("all"),className:`filter-btn-enhanced ${l==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Clients"})]})]}),D?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"spinner spinner-lg mx-auto"}),e.jsx("p",{className:"text-label mt-4",children:"Loading clients..."})]}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(B,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsxs("p",{className:"text-gray-600 text-lg",children:["No ",l!=="all"?l:""," clients found"]})]}):e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-label",children:[r.length," ",l!=="all"?l:""," client",r.length!==1?"s":""]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(s=>e.jsxs("div",{onClick:()=>p(s.pid),className:"card-item",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-800",children:[s.fname," ",s.lname]}),e.jsx("span",{className:P(s.care_team_status),children:(s.care_team_status||"Unknown").toUpperCase()})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Age:"})," ",s.age]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"DOB:"})," ",C(s.DOB)]}),(s.phone_cell||s.phone_home)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",s.phone_cell||s.phone_home]})]})]},s.pid))})]})]})]}),L&&e.jsx(I,{onClose:()=>f(!1),onClientCreated:F})]})}export{X as default};
