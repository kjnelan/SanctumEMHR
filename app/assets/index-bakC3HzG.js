(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const p of u)if(p.type==="childList")for(const m of p.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function d(u){const p={};return u.integrity&&(p.integrity=u.integrity),u.referrerPolicy&&(p.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?p.credentials="include":u.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function o(u){if(u.ep)return;u.ep=!0;const p=d(u);fetch(u.href,p)}})();function Lg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var lo={exports:{}},hn={};var jh;function Ug(){if(jh)return hn;jh=1;var n=Symbol.for("react.transitional.element"),c=Symbol.for("react.fragment");function d(o,u,p){var m=null;if(p!==void 0&&(m=""+p),u.key!==void 0&&(m=""+u.key),"key"in u){p={};for(var f in u)f!=="key"&&(p[f]=u[f])}else p=u;return u=p.ref,{$$typeof:n,type:o,key:m,ref:u!==void 0?u:null,props:p}}return hn.Fragment=c,hn.jsx=d,hn.jsxs=d,hn}var Nh;function Bg(){return Nh||(Nh=1,lo.exports=Ug()),lo.exports}var e=Bg(),no={exports:{}},Se={};var wh;function Hg(){if(wh)return Se;wh=1;var n=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),p=Symbol.for("react.consumer"),m=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),y=Symbol.iterator;function C(T){return T===null||typeof T!="object"?null:(T=y&&T[y]||T["@@iterator"],typeof T=="function"?T:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,A={};function k(T,L,W){this.props=T,this.context=L,this.refs=A,this.updater=W||N}k.prototype.isReactComponent={},k.prototype.setState=function(T,L){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,L,"setState")},k.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function O(){}O.prototype=k.prototype;function Y(T,L,W){this.props=T,this.context=L,this.refs=A,this.updater=W||N}var I=Y.prototype=new O;I.constructor=Y,_(I,k.prototype),I.isPureReactComponent=!0;var $=Array.isArray;function se(){}var V={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function xe(T,L,W){var F=W.ref;return{$$typeof:n,type:T,key:L,ref:F!==void 0?F:null,props:W}}function me(T,L){return xe(T.type,L,T.props)}function fe(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}function q(T){var L={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(W){return L[W]})}var z=/\/+/g;function H(T,L){return typeof T=="object"&&T!==null&&T.key!=null?q(""+T.key):L.toString(36)}function D(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(se,se):(T.status="pending",T.then(function(L){T.status==="pending"&&(T.status="fulfilled",T.value=L)},function(L){T.status==="pending"&&(T.status="rejected",T.reason=L)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function S(T,L,W,F,he){var P=typeof T;(P==="undefined"||P==="boolean")&&(T=null);var de=!1;if(T===null)de=!0;else switch(P){case"bigint":case"string":case"number":de=!0;break;case"object":switch(T.$$typeof){case n:case c:de=!0;break;case j:return de=T._init,S(de(T._payload),L,W,F,he)}}if(de)return he=he(T),de=F===""?"."+H(T,0):F,$(he)?(W="",de!=null&&(W=de.replace(z,"$&/")+"/"),S(he,L,W,"",function(M){return M})):he!=null&&(fe(he)&&(he=me(he,W+(he.key==null||T&&T.key===he.key?"":(""+he.key).replace(z,"$&/")+"/")+de)),L.push(he)),1;de=0;var _e=F===""?".":F+":";if($(T))for(var ee=0;ee<T.length;ee++)F=T[ee],P=_e+H(F,ee),de+=S(F,L,W,P,he);else if(ee=C(T),typeof ee=="function")for(T=ee.call(T),ee=0;!(F=T.next()).done;)F=F.value,P=_e+H(F,ee++),de+=S(F,L,W,P,he);else if(P==="object"){if(typeof T.then=="function")return S(D(T),L,W,F,he);throw L=String(T),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return de}function E(T,L,W){if(T==null)return T;var F=[],he=0;return S(T,F,"","",function(P){return L.call(W,P,he++)}),F}function U(T){if(T._status===-1){var L=T._result;L=L(),L.then(function(W){(T._status===0||T._status===-1)&&(T._status=1,T._result=W)},function(W){(T._status===0||T._status===-1)&&(T._status=2,T._result=W)}),T._status===-1&&(T._status=0,T._result=L)}if(T._status===1)return T._result.default;throw T._result}var ne=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},pe={map:E,forEach:function(T,L,W){E(T,function(){L.apply(this,arguments)},W)},count:function(T){var L=0;return E(T,function(){L++}),L},toArray:function(T){return E(T,function(L){return L})||[]},only:function(T){if(!fe(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return Se.Activity=g,Se.Children=pe,Se.Component=k,Se.Fragment=d,Se.Profiler=u,Se.PureComponent=Y,Se.StrictMode=o,Se.Suspense=b,Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,Se.__COMPILER_RUNTIME={__proto__:null,c:function(T){return V.H.useMemoCache(T)}},Se.cache=function(T){return function(){return T.apply(null,arguments)}},Se.cacheSignal=function(){return null},Se.cloneElement=function(T,L,W){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var F=_({},T.props),he=T.key;if(L!=null)for(P in L.key!==void 0&&(he=""+L.key),L)!X.call(L,P)||P==="key"||P==="__self"||P==="__source"||P==="ref"&&L.ref===void 0||(F[P]=L[P]);var P=arguments.length-2;if(P===1)F.children=W;else if(1<P){for(var de=Array(P),_e=0;_e<P;_e++)de[_e]=arguments[_e+2];F.children=de}return xe(T.type,he,F)},Se.createContext=function(T){return T={$$typeof:m,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:p,_context:T},T},Se.createElement=function(T,L,W){var F,he={},P=null;if(L!=null)for(F in L.key!==void 0&&(P=""+L.key),L)X.call(L,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(he[F]=L[F]);var de=arguments.length-2;if(de===1)he.children=W;else if(1<de){for(var _e=Array(de),ee=0;ee<de;ee++)_e[ee]=arguments[ee+2];he.children=_e}if(T&&T.defaultProps)for(F in de=T.defaultProps,de)he[F]===void 0&&(he[F]=de[F]);return xe(T,P,he)},Se.createRef=function(){return{current:null}},Se.forwardRef=function(T){return{$$typeof:f,render:T}},Se.isValidElement=fe,Se.lazy=function(T){return{$$typeof:j,_payload:{_status:-1,_result:T},_init:U}},Se.memo=function(T,L){return{$$typeof:v,type:T,compare:L===void 0?null:L}},Se.startTransition=function(T){var L=V.T,W={};V.T=W;try{var F=T(),he=V.S;he!==null&&he(W,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then(se,ne)}catch(P){ne(P)}finally{L!==null&&W.types!==null&&(L.types=W.types),V.T=L}},Se.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},Se.use=function(T){return V.H.use(T)},Se.useActionState=function(T,L,W){return V.H.useActionState(T,L,W)},Se.useCallback=function(T,L){return V.H.useCallback(T,L)},Se.useContext=function(T){return V.H.useContext(T)},Se.useDebugValue=function(){},Se.useDeferredValue=function(T,L){return V.H.useDeferredValue(T,L)},Se.useEffect=function(T,L){return V.H.useEffect(T,L)},Se.useEffectEvent=function(T){return V.H.useEffectEvent(T)},Se.useId=function(){return V.H.useId()},Se.useImperativeHandle=function(T,L,W){return V.H.useImperativeHandle(T,L,W)},Se.useInsertionEffect=function(T,L){return V.H.useInsertionEffect(T,L)},Se.useLayoutEffect=function(T,L){return V.H.useLayoutEffect(T,L)},Se.useMemo=function(T,L){return V.H.useMemo(T,L)},Se.useOptimistic=function(T,L){return V.H.useOptimistic(T,L)},Se.useReducer=function(T,L,W){return V.H.useReducer(T,L,W)},Se.useRef=function(T){return V.H.useRef(T)},Se.useState=function(T){return V.H.useState(T)},Se.useSyncExternalStore=function(T,L,W){return V.H.useSyncExternalStore(T,L,W)},Se.useTransition=function(){return V.H.useTransition()},Se.version="19.2.3",Se}var Sh;function vo(){return Sh||(Sh=1,no.exports=Hg()),no.exports}var x=vo(),io={exports:{}},fn={},ro={exports:{}},co={};var _h;function qg(){return _h||(_h=1,(function(n){function c(S,E){var U=S.length;S.push(E);e:for(;0<U;){var ne=U-1>>>1,pe=S[ne];if(0<u(pe,E))S[ne]=E,S[U]=pe,U=ne;else break e}}function d(S){return S.length===0?null:S[0]}function o(S){if(S.length===0)return null;var E=S[0],U=S.pop();if(U!==E){S[0]=U;e:for(var ne=0,pe=S.length,T=pe>>>1;ne<T;){var L=2*(ne+1)-1,W=S[L],F=L+1,he=S[F];if(0>u(W,U))F<pe&&0>u(he,W)?(S[ne]=he,S[F]=U,ne=F):(S[ne]=W,S[L]=U,ne=L);else if(F<pe&&0>u(he,U))S[ne]=he,S[F]=U,ne=F;else break e}}return E}function u(S,E){var U=S.sortIndex-E.sortIndex;return U!==0?U:S.id-E.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var p=performance;n.unstable_now=function(){return p.now()}}else{var m=Date,f=m.now();n.unstable_now=function(){return m.now()-f}}var b=[],v=[],j=1,g=null,y=3,C=!1,N=!1,_=!1,A=!1,k=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function I(S){for(var E=d(v);E!==null;){if(E.callback===null)o(v);else if(E.startTime<=S)o(v),E.sortIndex=E.expirationTime,c(b,E);else break;E=d(v)}}function $(S){if(_=!1,I(S),!N)if(d(b)!==null)N=!0,se||(se=!0,q());else{var E=d(v);E!==null&&D($,E.startTime-S)}}var se=!1,V=-1,X=5,xe=-1;function me(){return A?!0:!(n.unstable_now()-xe<X)}function fe(){if(A=!1,se){var S=n.unstable_now();xe=S;var E=!0;try{e:{N=!1,_&&(_=!1,O(V),V=-1),C=!0;var U=y;try{t:{for(I(S),g=d(b);g!==null&&!(g.expirationTime>S&&me());){var ne=g.callback;if(typeof ne=="function"){g.callback=null,y=g.priorityLevel;var pe=ne(g.expirationTime<=S);if(S=n.unstable_now(),typeof pe=="function"){g.callback=pe,I(S),E=!0;break t}g===d(b)&&o(b),I(S)}else o(b);g=d(b)}if(g!==null)E=!0;else{var T=d(v);T!==null&&D($,T.startTime-S),E=!1}}break e}finally{g=null,y=U,C=!1}E=void 0}}finally{E?q():se=!1}}}var q;if(typeof Y=="function")q=function(){Y(fe)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,H=z.port2;z.port1.onmessage=fe,q=function(){H.postMessage(null)}}else q=function(){k(fe,0)};function D(S,E){V=k(function(){S(n.unstable_now())},E)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(S){S.callback=null},n.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<S?Math.floor(1e3/S):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(S){switch(y){case 1:case 2:case 3:var E=3;break;default:E=y}var U=y;y=E;try{return S()}finally{y=U}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(S,E){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var U=y;y=S;try{return E()}finally{y=U}},n.unstable_scheduleCallback=function(S,E,U){var ne=n.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?ne+U:ne):U=ne,S){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=U+pe,S={id:j++,callback:E,priorityLevel:S,startTime:U,expirationTime:pe,sortIndex:-1},U>ne?(S.sortIndex=U,c(v,S),d(b)===null&&S===d(v)&&(_?(O(V),V=-1):_=!0,D($,U-ne))):(S.sortIndex=pe,c(b,S),N||C||(N=!0,se||(se=!0,q()))),S},n.unstable_shouldYield=me,n.unstable_wrapCallback=function(S){var E=y;return function(){var U=y;y=E;try{return S.apply(this,arguments)}finally{y=U}}}})(co)),co}var Ch;function Yg(){return Ch||(Ch=1,ro.exports=qg()),ro.exports}var oo={exports:{}},bt={};var kh;function Fg(){if(kh)return bt;kh=1;var n=vo();function c(b){var v="https://react.dev/errors/"+b;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)v+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+b+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(){}var o={d:{f:d,r:function(){throw Error(c(522))},D:d,C:d,L:d,m:d,X:d,S:d,M:d},p:0,findDOMNode:null},u=Symbol.for("react.portal");function p(b,v,j){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:g==null?null:""+g,children:b,containerInfo:v,implementation:j}}var m=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(b,v){if(b==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return bt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,bt.createPortal=function(b,v){var j=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(c(299));return p(b,v,null,j)},bt.flushSync=function(b){var v=m.T,j=o.p;try{if(m.T=null,o.p=2,b)return b()}finally{m.T=v,o.p=j,o.d.f()}},bt.preconnect=function(b,v){typeof b=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,o.d.C(b,v))},bt.prefetchDNS=function(b){typeof b=="string"&&o.d.D(b)},bt.preinit=function(b,v){if(typeof b=="string"&&v&&typeof v.as=="string"){var j=v.as,g=f(j,v.crossOrigin),y=typeof v.integrity=="string"?v.integrity:void 0,C=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;j==="style"?o.d.S(b,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:C}):j==="script"&&o.d.X(b,{crossOrigin:g,integrity:y,fetchPriority:C,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},bt.preinitModule=function(b,v){if(typeof b=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var j=f(v.as,v.crossOrigin);o.d.M(b,{crossOrigin:j,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&o.d.M(b)},bt.preload=function(b,v){if(typeof b=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var j=v.as,g=f(j,v.crossOrigin);o.d.L(b,j,{crossOrigin:g,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},bt.preloadModule=function(b,v){if(typeof b=="string")if(v){var j=f(v.as,v.crossOrigin);o.d.m(b,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:j,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else o.d.m(b)},bt.requestFormReset=function(b){o.d.r(b)},bt.unstable_batchedUpdates=function(b,v){return b(v)},bt.useFormState=function(b,v,j){return m.H.useFormState(b,v,j)},bt.useFormStatus=function(){return m.H.useHostTransitionStatus()},bt.version="19.2.3",bt}var Eh;function Hh(){if(Eh)return oo.exports;Eh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(c){console.error(c)}}return n(),oo.exports=Fg(),oo.exports}var Dh;function Gg(){if(Dh)return fn;Dh=1;var n=Yg(),c=vo(),d=Hh();function o(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function p(t){var a=t,s=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(s=a.return),t=a.return;while(t)}return a.tag===3?s:null}function m(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function f(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function b(t){if(p(t)!==t)throw Error(o(188))}function v(t){var a=t.alternate;if(!a){if(a=p(t),a===null)throw Error(o(188));return a!==t?null:t}for(var s=t,l=a;;){var i=s.return;if(i===null)break;var r=i.alternate;if(r===null){if(l=i.return,l!==null){s=l;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===s)return b(i),t;if(r===l)return b(i),a;r=r.sibling}throw Error(o(188))}if(s.return!==l.return)s=i,l=r;else{for(var h=!1,w=i.child;w;){if(w===s){h=!0,s=i,l=r;break}if(w===l){h=!0,l=i,s=r;break}w=w.sibling}if(!h){for(w=r.child;w;){if(w===s){h=!0,s=r,l=i;break}if(w===l){h=!0,l=r,s=i;break}w=w.sibling}if(!h)throw Error(o(189))}}if(s.alternate!==l)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?t:a}function j(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=j(t),a!==null)return a;t=t.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),xe=Symbol.for("react.activity"),me=Symbol.for("react.memo_cache_sentinel"),fe=Symbol.iterator;function q(t){return t===null||typeof t!="object"?null:(t=fe&&t[fe]||t["@@iterator"],typeof t=="function"?t:null)}var z=Symbol.for("react.client.reference");function H(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===z?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _:return"Fragment";case k:return"Profiler";case A:return"StrictMode";case $:return"Suspense";case se:return"SuspenseList";case xe:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case N:return"Portal";case Y:return t.displayName||"Context";case O:return(t._context.displayName||"Context")+".Consumer";case I:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V:return a=t.displayName||null,a!==null?a:H(t.type)||"Memo";case X:a=t._payload,t=t._init;try{return H(t(a))}catch{}}return null}var D=Array.isArray,S=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,E=d.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},ne=[],pe=-1;function T(t){return{current:t}}function L(t){0>pe||(t.current=ne[pe],ne[pe]=null,pe--)}function W(t,a){pe++,ne[pe]=t.current,t.current=a}var F=T(null),he=T(null),P=T(null),de=T(null);function _e(t,a){switch(W(P,a),W(he,t),W(F,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Xm(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Xm(a),t=$m(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}L(F),W(F,t)}function ee(){L(F),L(he),L(P)}function M(t){t.memoizedState!==null&&W(de,t);var a=F.current,s=$m(a,t.type);a!==s&&(W(he,t),W(F,s))}function oe(t){he.current===t&&(L(F),L(he)),de.current===t&&(L(de),on._currentValue=U)}var ue,be;function ce(t){if(ue===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);ue=a&&a[1]||"",be=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ue+t+be}var te=!1;function we(t,a){if(!t||te)return"";te=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(K){var J=K}Reflect.construct(t,[],re)}else{try{re.call()}catch(K){J=K}t.call(re.prototype)}}else{try{throw Error()}catch(K){J=K}(re=t())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(K){if(K&&J&&typeof K.stack=="string")return[K.stack,J.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=l.DetermineComponentFrameRoot(),h=r[0],w=r[1];if(h&&w){var R=h.split(`
`),Z=w.split(`
`);for(i=l=0;l<R.length&&!R[l].includes("DetermineComponentFrameRoot");)l++;for(;i<Z.length&&!Z[i].includes("DetermineComponentFrameRoot");)i++;if(l===R.length||i===Z.length)for(l=R.length-1,i=Z.length-1;1<=l&&0<=i&&R[l]!==Z[i];)i--;for(;1<=l&&0<=i;l--,i--)if(R[l]!==Z[i]){if(l!==1||i!==1)do if(l--,i--,0>i||R[l]!==Z[i]){var ae=`
`+R[l].replace(" at new "," at ");return t.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",t.displayName)),ae}while(1<=l&&0<=i);break}}}finally{te=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?ce(s):""}function Ce(t,a){switch(t.tag){case 26:case 27:case 5:return ce(t.type);case 16:return ce("Lazy");case 13:return t.child!==a&&a!==null?ce("Suspense Fallback"):ce("Suspense");case 19:return ce("SuspenseList");case 0:case 15:return we(t.type,!1);case 11:return we(t.type.render,!1);case 1:return we(t.type,!0);case 31:return ce("Activity");default:return""}}function qe(t){try{var a="",s=null;do a+=Ce(t,s),s=t,t=t.return;while(t);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ve=Object.prototype.hasOwnProperty,lt=n.unstable_scheduleCallback,jt=n.unstable_cancelCallback,aa=n.unstable_shouldYield,is=n.unstable_requestPaint,gt=n.unstable_now,vl=n.unstable_getCurrentPriorityLevel,Yt=n.unstable_ImmediatePriority,yn=n.unstable_UserBlockingPriority,Ra=n.unstable_NormalPriority,$i=n.unstable_LowPriority,yl=n.unstable_IdlePriority,ks=n.log,Qi=n.unstable_setDisableYieldValue,sa=null,vt=null;function Nt(t){if(typeof ks=="function"&&Qi(t),vt&&typeof vt.setStrictMode=="function")try{vt.setStrictMode(sa,t)}catch{}}var pt=Math.clz32?Math.clz32:Nl,jl=Math.log,za=Math.LN2;function Nl(t){return t>>>=0,t===0?32:31-(jl(t)/za|0)|0}var Es=256,Ds=262144,As=4194304;function da(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ts(t,a,s){var l=t.pendingLanes;if(l===0)return 0;var i=0,r=t.suspendedLanes,h=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~r,l!==0?i=da(l):(h&=w,h!==0?i=da(h):s||(s=w&~t,s!==0&&(i=da(s))))):(w=l&~r,w!==0?i=da(w):h!==0?i=da(h):s||(s=l&~t,s!==0&&(i=da(s)))),i===0?0:a!==0&&a!==i&&(a&r)===0&&(r=i&-i,s=a&-a,r>=s||r===32&&(s&4194048)!==0)?a:i}function ua(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Vi(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jn(){var t=As;return As<<=1,(As&62914560)===0&&(As=4194304),t}function rs(t){for(var a=[],s=0;31>s;s++)a.push(t);return a}function cs(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Zi(t,a,s,l,i,r){var h=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var w=t.entanglements,R=t.expirationTimes,Z=t.hiddenUpdates;for(s=h&~s;0<s;){var ae=31-pt(s),re=1<<ae;w[ae]=0,R[ae]=-1;var J=Z[ae];if(J!==null)for(Z[ae]=null,ae=0;ae<J.length;ae++){var K=J[ae];K!==null&&(K.lane&=-536870913)}s&=~re}l!==0&&Nn(t,l,0),r!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=r&~(h&~a))}function Nn(t,a,s){t.pendingLanes|=a,t.suspendedLanes&=~a;var l=31-pt(a);t.entangledLanes|=a,t.entanglements[l]=t.entanglements[l]|1073741824|s&261930}function Oa(t,a){var s=t.entangledLanes|=a;for(t=t.entanglements;s;){var l=31-pt(s),i=1<<l;i&a|t[l]&a&&(t[l]|=a),s&=~i}}function wn(t,a){var s=a&-a;return s=(s&42)!==0?1:le(s),(s&(t.suspendedLanes|a))!==0?0:s}function le(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ge(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function De(){var t=E.p;return t!==0?t:(t=window.event,t===void 0?32:fh(t.type))}function Le(t,a){var s=E.p;try{return E.p=t,a()}finally{E.p=s}}var wt=Math.random().toString(36).slice(2),tt="__reactFiber$"+wt,St="__reactProps$"+wt,Ms="__reactContainer$"+wt,Ji="__reactEvents$"+wt,_f="__reactListeners$"+wt,Cf="__reactHandles$"+wt,To="__reactResources$"+wt,wl="__reactMarker$"+wt;function Pi(t){delete t[tt],delete t[St],delete t[Ji],delete t[_f],delete t[Cf]}function Rs(t){var a=t[tt];if(a)return a;for(var s=t.parentNode;s;){if(a=s[Ms]||s[tt]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(t=Wm(t);t!==null;){if(s=t[tt])return s;t=Wm(t)}return a}t=s,s=t.parentNode}return null}function zs(t){if(t=t[tt]||t[Ms]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function Sl(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(o(33))}function Os(t){var a=t[To];return a||(a=t[To]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function dt(t){t[wl]=!0}var Mo=new Set,Ro={};function os(t,a){Ls(t,a),Ls(t+"Capture",a)}function Ls(t,a){for(Ro[t]=a,t=0;t<a.length;t++)Mo.add(a[t])}var kf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zo={},Oo={};function Ef(t){return Ve.call(Oo,t)?!0:Ve.call(zo,t)?!1:kf.test(t)?Oo[t]=!0:(zo[t]=!0,!1)}function Sn(t,a,s){if(Ef(a))if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+s)}}function _n(t,a,s){if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+s)}}function ma(t,a,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(a,s,""+l)}}function Ft(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Lo(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Df(t,a,s){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var i=l.get,r=l.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return i.call(this)},set:function(h){s=""+h,r.call(this,h)}}),Object.defineProperty(t,a,{enumerable:l.enumerable}),{getValue:function(){return s},setValue:function(h){s=""+h},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function Ki(t){if(!t._valueTracker){var a=Lo(t)?"checked":"value";t._valueTracker=Df(t,a,""+t[a])}}function Uo(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var s=a.getValue(),l="";return t&&(l=Lo(t)?t.checked?"true":"false":t.value),t=l,t!==s?(a.setValue(t),!0):!1}function Cn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Af=/[\n"\\]/g;function Gt(t){return t.replace(Af,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Wi(t,a,s,l,i,r,h,w){t.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?t.type=h:t.removeAttribute("type"),a!=null?h==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+Ft(a)):t.value!==""+Ft(a)&&(t.value=""+Ft(a)):h!=="submit"&&h!=="reset"||t.removeAttribute("value"),a!=null?Ii(t,h,Ft(a)):s!=null?Ii(t,h,Ft(s)):l!=null&&t.removeAttribute("value"),i==null&&r!=null&&(t.defaultChecked=!!r),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+Ft(w):t.removeAttribute("name")}function Bo(t,a,s,l,i,r,h,w){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),a!=null||s!=null){if(!(r!=="submit"&&r!=="reset"||a!=null)){Ki(t);return}s=s!=null?""+Ft(s):"",a=a!=null?""+Ft(a):s,w||a===t.value||(t.value=a),t.defaultValue=a}l=l??i,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.name=h),Ki(t)}function Ii(t,a,s){a==="number"&&Cn(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function Us(t,a,s,l){if(t=t.options,a){a={};for(var i=0;i<s.length;i++)a["$"+s[i]]=!0;for(s=0;s<t.length;s++)i=a.hasOwnProperty("$"+t[s].value),t[s].selected!==i&&(t[s].selected=i),i&&l&&(t[s].defaultSelected=!0)}else{for(s=""+Ft(s),a=null,i=0;i<t.length;i++){if(t[i].value===s){t[i].selected=!0,l&&(t[i].defaultSelected=!0);return}a!==null||t[i].disabled||(a=t[i])}a!==null&&(a.selected=!0)}}function Ho(t,a,s){if(a!=null&&(a=""+Ft(a),a!==t.value&&(t.value=a),s==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=s!=null?""+Ft(s):""}function qo(t,a,s,l){if(a==null){if(l!=null){if(s!=null)throw Error(o(92));if(D(l)){if(1<l.length)throw Error(o(93));l=l[0]}s=l}s==null&&(s=""),a=s}s=Ft(a),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l),Ki(t)}function Bs(t,a){if(a){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=a;return}}t.textContent=a}var Tf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yo(t,a,s){var l=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":l?t.setProperty(a,s):typeof s!="number"||s===0||Tf.has(a)?a==="float"?t.cssFloat=s:t[a]=(""+s).trim():t[a]=s+"px"}function Fo(t,a,s){if(a!=null&&typeof a!="object")throw Error(o(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var i in a)l=a[i],a.hasOwnProperty(i)&&s[i]!==l&&Yo(t,i,l)}else for(var r in a)a.hasOwnProperty(r)&&Yo(t,r,a[r])}function er(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kn(t){return Rf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ha(){}var tr=null;function ar(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hs=null,qs=null;function Go(t){var a=zs(t);if(a&&(t=a.stateNode)){var s=t[St]||null;e:switch(t=a.stateNode,a.type){case"input":if(Wi(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Gt(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var l=s[a];if(l!==t&&l.form===t.form){var i=l[St]||null;if(!i)throw Error(o(90));Wi(l,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(a=0;a<s.length;a++)l=s[a],l.form===t.form&&Uo(l)}break e;case"textarea":Ho(t,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&Us(t,!!s.multiple,a,!1)}}}var sr=!1;function Xo(t,a,s){if(sr)return t(a,s);sr=!0;try{var l=t(a);return l}finally{if(sr=!1,(Hs!==null||qs!==null)&&(fi(),Hs&&(a=Hs,t=qs,qs=Hs=null,Go(a),t)))for(a=0;a<t.length;a++)Go(t[a])}}function _l(t,a){var s=t.stateNode;if(s===null)return null;var l=s[St]||null;if(l===null)return null;s=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(o(231,a,typeof s));return s}var fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lr=!1;if(fa)try{var Cl={};Object.defineProperty(Cl,"passive",{get:function(){lr=!0}}),window.addEventListener("test",Cl,Cl),window.removeEventListener("test",Cl,Cl)}catch{lr=!1}var La=null,nr=null,En=null;function $o(){if(En)return En;var t,a=nr,s=a.length,l,i="value"in La?La.value:La.textContent,r=i.length;for(t=0;t<s&&a[t]===i[t];t++);var h=s-t;for(l=1;l<=h&&a[s-l]===i[r-l];l++);return En=i.slice(t,1<l?1-l:void 0)}function Dn(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function An(){return!0}function Qo(){return!1}function _t(t){function a(s,l,i,r,h){this._reactName=s,this._targetInst=i,this.type=l,this.nativeEvent=r,this.target=h,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(s=t[w],this[w]=s?s(r):r[w]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?An:Qo,this.isPropagationStopped=Qo,this}return g(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=An)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=An)},persist:function(){},isPersistent:An}),a}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tn=_t(ds),kl=g({},ds,{view:0,detail:0}),zf=_t(kl),ir,rr,El,Mn=g({},kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:or,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==El&&(El&&t.type==="mousemove"?(ir=t.screenX-El.screenX,rr=t.screenY-El.screenY):rr=ir=0,El=t),ir)},movementY:function(t){return"movementY"in t?t.movementY:rr}}),Vo=_t(Mn),Of=g({},Mn,{dataTransfer:0}),Lf=_t(Of),Uf=g({},kl,{relatedTarget:0}),cr=_t(Uf),Bf=g({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),Hf=_t(Bf),qf=g({},ds,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yf=_t(qf),Ff=g({},ds,{data:0}),Zo=_t(Ff),Gf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$f={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qf(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=$f[t])?!!a[t]:!1}function or(){return Qf}var Vf=g({},kl,{key:function(t){if(t.key){var a=Gf[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=Dn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xf[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:or,charCode:function(t){return t.type==="keypress"?Dn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Zf=_t(Vf),Jf=g({},Mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jo=_t(Jf),Pf=g({},kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:or}),Kf=_t(Pf),Wf=g({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),If=_t(Wf),ex=g({},Mn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tx=_t(ex),ax=g({},ds,{newState:0,oldState:0}),sx=_t(ax),lx=[9,13,27,32],dr=fa&&"CompositionEvent"in window,Dl=null;fa&&"documentMode"in document&&(Dl=document.documentMode);var nx=fa&&"TextEvent"in window&&!Dl,Po=fa&&(!dr||Dl&&8<Dl&&11>=Dl),Ko=" ",Wo=!1;function Io(t,a){switch(t){case"keyup":return lx.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ed(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ys=!1;function ix(t,a){switch(t){case"compositionend":return ed(a);case"keypress":return a.which!==32?null:(Wo=!0,Ko);case"textInput":return t=a.data,t===Ko&&Wo?null:t;default:return null}}function rx(t,a){if(Ys)return t==="compositionend"||!dr&&Io(t,a)?(t=$o(),En=nr=La=null,Ys=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Po&&a.locale!=="ko"?null:a.data;default:return null}}var cx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function td(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!cx[t.type]:a==="textarea"}function ad(t,a,s,l){Hs?qs?qs.push(l):qs=[l]:Hs=l,a=ji(a,"onChange"),0<a.length&&(s=new Tn("onChange","change",null,s,l),t.push({event:s,listeners:a}))}var Al=null,Tl=null;function ox(t){Bm(t,0)}function Rn(t){var a=Sl(t);if(Uo(a))return t}function sd(t,a){if(t==="change")return a}var ld=!1;if(fa){var ur;if(fa){var mr="oninput"in document;if(!mr){var nd=document.createElement("div");nd.setAttribute("oninput","return;"),mr=typeof nd.oninput=="function"}ur=mr}else ur=!1;ld=ur&&(!document.documentMode||9<document.documentMode)}function id(){Al&&(Al.detachEvent("onpropertychange",rd),Tl=Al=null)}function rd(t){if(t.propertyName==="value"&&Rn(Tl)){var a=[];ad(a,Tl,t,ar(t)),Xo(ox,a)}}function dx(t,a,s){t==="focusin"?(id(),Al=a,Tl=s,Al.attachEvent("onpropertychange",rd)):t==="focusout"&&id()}function ux(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Rn(Tl)}function mx(t,a){if(t==="click")return Rn(a)}function hx(t,a){if(t==="input"||t==="change")return Rn(a)}function fx(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var Mt=typeof Object.is=="function"?Object.is:fx;function Ml(t,a){if(Mt(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var s=Object.keys(t),l=Object.keys(a);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var i=s[l];if(!Ve.call(a,i)||!Mt(t[i],a[i]))return!1}return!0}function cd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function od(t,a){var s=cd(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=a&&l>=a)return{node:s,offset:a-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=cd(s)}}function dd(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?dd(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function ud(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=Cn(t.document);a instanceof t.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)t=a.contentWindow;else break;a=Cn(t.document)}return a}function hr(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var xx=fa&&"documentMode"in document&&11>=document.documentMode,Fs=null,fr=null,Rl=null,xr=!1;function md(t,a,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;xr||Fs==null||Fs!==Cn(l)||(l=Fs,"selectionStart"in l&&hr(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Rl&&Ml(Rl,l)||(Rl=l,l=ji(fr,"onSelect"),0<l.length&&(a=new Tn("onSelect","select",null,a,s),t.push({event:a,listeners:l}),a.target=Fs)))}function us(t,a){var s={};return s[t.toLowerCase()]=a.toLowerCase(),s["Webkit"+t]="webkit"+a,s["Moz"+t]="moz"+a,s}var Gs={animationend:us("Animation","AnimationEnd"),animationiteration:us("Animation","AnimationIteration"),animationstart:us("Animation","AnimationStart"),transitionrun:us("Transition","TransitionRun"),transitionstart:us("Transition","TransitionStart"),transitioncancel:us("Transition","TransitionCancel"),transitionend:us("Transition","TransitionEnd")},gr={},hd={};fa&&(hd=document.createElement("div").style,"AnimationEvent"in window||(delete Gs.animationend.animation,delete Gs.animationiteration.animation,delete Gs.animationstart.animation),"TransitionEvent"in window||delete Gs.transitionend.transition);function ms(t){if(gr[t])return gr[t];if(!Gs[t])return t;var a=Gs[t],s;for(s in a)if(a.hasOwnProperty(s)&&s in hd)return gr[t]=a[s];return t}var fd=ms("animationend"),xd=ms("animationiteration"),gd=ms("animationstart"),gx=ms("transitionrun"),px=ms("transitionstart"),bx=ms("transitioncancel"),pd=ms("transitionend"),bd=new Map,pr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pr.push("scrollEnd");function Wt(t,a){bd.set(t,a),os(a,[t])}var zn=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Xt=[],Xs=0,br=0;function On(){for(var t=Xs,a=br=Xs=0;a<t;){var s=Xt[a];Xt[a++]=null;var l=Xt[a];Xt[a++]=null;var i=Xt[a];Xt[a++]=null;var r=Xt[a];if(Xt[a++]=null,l!==null&&i!==null){var h=l.pending;h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i}r!==0&&vd(s,i,r)}}function Ln(t,a,s,l){Xt[Xs++]=t,Xt[Xs++]=a,Xt[Xs++]=s,Xt[Xs++]=l,br|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function vr(t,a,s,l){return Ln(t,a,s,l),Un(t)}function hs(t,a){return Ln(t,null,null,a),Un(t)}function vd(t,a,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var i=!1,r=t.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(i=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,i&&a!==null&&(i=31-pt(s),t=r.hiddenUpdates,l=t[i],l===null?t[i]=[a]:l.push(a),a.lane=s|536870912),r):null}function Un(t){if(50<tn)throw tn=0,Ec=null,Error(o(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var $s={};function vx(t,a,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(t,a,s,l){return new vx(t,a,s,l)}function yr(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xa(t,a){var s=t.alternate;return s===null?(s=Rt(t.tag,a,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=a,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,a=t.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function yd(t,a){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,a=s.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Bn(t,a,s,l,i,r){var h=0;if(l=t,typeof t=="function")yr(t)&&(h=1);else if(typeof t=="string")h=Sg(t,s,F.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case xe:return t=Rt(31,s,a,i),t.elementType=xe,t.lanes=r,t;case _:return fs(s.children,i,r,a);case A:h=8,i|=24;break;case k:return t=Rt(12,s,a,i|2),t.elementType=k,t.lanes=r,t;case $:return t=Rt(13,s,a,i),t.elementType=$,t.lanes=r,t;case se:return t=Rt(19,s,a,i),t.elementType=se,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y:h=10;break e;case O:h=9;break e;case I:h=11;break e;case V:h=14;break e;case X:h=16,l=null;break e}h=29,s=Error(o(130,t===null?"null":typeof t,"")),l=null}return a=Rt(h,s,a,i),a.elementType=t,a.type=l,a.lanes=r,a}function fs(t,a,s,l){return t=Rt(7,t,l,a),t.lanes=s,t}function jr(t,a,s){return t=Rt(6,t,null,a),t.lanes=s,t}function jd(t){var a=Rt(18,null,null,0);return a.stateNode=t,a}function Nr(t,a,s){return a=Rt(4,t.children!==null?t.children:[],t.key,a),a.lanes=s,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Nd=new WeakMap;function $t(t,a){if(typeof t=="object"&&t!==null){var s=Nd.get(t);return s!==void 0?s:(a={value:t,source:a,stack:qe(a)},Nd.set(t,a),a)}return{value:t,source:a,stack:qe(a)}}var Qs=[],Vs=0,Hn=null,zl=0,Qt=[],Vt=0,Ua=null,la=1,na="";function ga(t,a){Qs[Vs++]=zl,Qs[Vs++]=Hn,Hn=t,zl=a}function wd(t,a,s){Qt[Vt++]=la,Qt[Vt++]=na,Qt[Vt++]=Ua,Ua=t;var l=la;t=na;var i=32-pt(l)-1;l&=~(1<<i),s+=1;var r=32-pt(a)+i;if(30<r){var h=i-i%5;r=(l&(1<<h)-1).toString(32),l>>=h,i-=h,la=1<<32-pt(a)+i|s<<i|l,na=r+t}else la=1<<r|s<<i|l,na=t}function wr(t){t.return!==null&&(ga(t,1),wd(t,1,0))}function Sr(t){for(;t===Hn;)Hn=Qs[--Vs],Qs[Vs]=null,zl=Qs[--Vs],Qs[Vs]=null;for(;t===Ua;)Ua=Qt[--Vt],Qt[Vt]=null,na=Qt[--Vt],Qt[Vt]=null,la=Qt[--Vt],Qt[Vt]=null}function Sd(t,a){Qt[Vt++]=la,Qt[Vt++]=na,Qt[Vt++]=Ua,la=a.id,na=a.overflow,Ua=t}var mt=null,Je=null,Oe=!1,Ba=null,Zt=!1,_r=Error(o(519));function Ha(t){var a=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ol($t(a,t)),_r}function _d(t){var a=t.stateNode,s=t.type,l=t.memoizedProps;switch(a[tt]=t,a[St]=l,s){case"dialog":Me("cancel",a),Me("close",a);break;case"iframe":case"object":case"embed":Me("load",a);break;case"video":case"audio":for(s=0;s<sn.length;s++)Me(sn[s],a);break;case"source":Me("error",a);break;case"img":case"image":case"link":Me("error",a),Me("load",a);break;case"details":Me("toggle",a);break;case"input":Me("invalid",a),Bo(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Me("invalid",a);break;case"textarea":Me("invalid",a),qo(a,l.value,l.defaultValue,l.children)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||l.suppressHydrationWarning===!0||Fm(a.textContent,s)?(l.popover!=null&&(Me("beforetoggle",a),Me("toggle",a)),l.onScroll!=null&&Me("scroll",a),l.onScrollEnd!=null&&Me("scrollend",a),l.onClick!=null&&(a.onclick=ha),a=!0):a=!1,a||Ha(t,!0)}function Cd(t){for(mt=t.return;mt;)switch(mt.tag){case 5:case 31:case 13:Zt=!1;return;case 27:case 3:Zt=!0;return;default:mt=mt.return}}function Zs(t){if(t!==mt)return!1;if(!Oe)return Cd(t),Oe=!0,!1;var a=t.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||Gc(t.type,t.memoizedProps)),s=!s),s&&Je&&Ha(t),Cd(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Je=Km(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Je=Km(t)}else a===27?(a=Je,Ia(t.type)?(t=Zc,Zc=null,Je=t):Je=a):Je=mt?Pt(t.stateNode.nextSibling):null;return!0}function xs(){Je=mt=null,Oe=!1}function Cr(){var t=Ba;return t!==null&&(Dt===null?Dt=t:Dt.push.apply(Dt,t),Ba=null),t}function Ol(t){Ba===null?Ba=[t]:Ba.push(t)}var kr=T(null),gs=null,pa=null;function qa(t,a,s){W(kr,a._currentValue),a._currentValue=s}function ba(t){t._currentValue=kr.current,L(kr)}function Er(t,a,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),t===s)break;t=t.return}}function Dr(t,a,s,l){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var r=i.dependencies;if(r!==null){var h=i.child;r=r.firstContext;e:for(;r!==null;){var w=r;r=i;for(var R=0;R<a.length;R++)if(w.context===a[R]){r.lanes|=s,w=r.alternate,w!==null&&(w.lanes|=s),Er(r.return,s,t),l||(h=null);break e}r=w.next}}else if(i.tag===18){if(h=i.return,h===null)throw Error(o(341));h.lanes|=s,r=h.alternate,r!==null&&(r.lanes|=s),Er(h,s,t),h=null}else h=i.child;if(h!==null)h.return=i;else for(h=i;h!==null;){if(h===t){h=null;break}if(i=h.sibling,i!==null){i.return=h.return,h=i;break}h=h.return}i=h}}function Js(t,a,s,l){t=null;for(var i=a,r=!1;i!==null;){if(!r){if((i.flags&524288)!==0)r=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var h=i.alternate;if(h===null)throw Error(o(387));if(h=h.memoizedProps,h!==null){var w=i.type;Mt(i.pendingProps.value,h.value)||(t!==null?t.push(w):t=[w])}}else if(i===de.current){if(h=i.alternate,h===null)throw Error(o(387));h.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(on):t=[on])}i=i.return}t!==null&&Dr(a,t,s,l),a.flags|=262144}function qn(t){for(t=t.firstContext;t!==null;){if(!Mt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ps(t){gs=t,pa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ht(t){return kd(gs,t)}function Yn(t,a){return gs===null&&ps(t),kd(t,a)}function kd(t,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},pa===null){if(t===null)throw Error(o(308));pa=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else pa=pa.next=a;return s}var yx=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){a.aborted=!0,t.forEach(function(s){return s()})}},jx=n.unstable_scheduleCallback,Nx=n.unstable_NormalPriority,nt={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ar(){return{controller:new yx,data:new Map,refCount:0}}function Ll(t){t.refCount--,t.refCount===0&&jx(Nx,function(){t.controller.abort()})}var Ul=null,Tr=0,Ps=0,Ks=null;function wx(t,a){if(Ul===null){var s=Ul=[];Tr=0,Ps=zc(),Ks={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Tr++,a.then(Ed,Ed),a}function Ed(){if(--Tr===0&&Ul!==null){Ks!==null&&(Ks.status="fulfilled");var t=Ul;Ul=null,Ps=0,Ks=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function Sx(t,a){var s=[],l={status:"pending",value:null,reason:null,then:function(i){s.push(i)}};return t.then(function(){l.status="fulfilled",l.value=a;for(var i=0;i<s.length;i++)(0,s[i])(a)},function(i){for(l.status="rejected",l.reason=i,i=0;i<s.length;i++)(0,s[i])(void 0)}),l}var Dd=S.S;S.S=function(t,a){mm=gt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&wx(t,a),Dd!==null&&Dd(t,a)};var bs=T(null);function Mr(){var t=bs.current;return t!==null?t:Ze.pooledCache}function Fn(t,a){a===null?W(bs,bs.current):W(bs,a.pool)}function Ad(){var t=Mr();return t===null?null:{parent:nt._currentValue,pool:t}}var Ws=Error(o(460)),Rr=Error(o(474)),Gn=Error(o(542)),Xn={then:function(){}};function Td(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Md(t,a,s){switch(s=t[s],s===void 0?t.push(a):s!==a&&(a.then(ha,ha),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,zd(t),t;default:if(typeof a.status=="string")a.then(ha,ha);else{if(t=Ze,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=a,t.status="pending",t.then(function(l){if(a.status==="pending"){var i=a;i.status="fulfilled",i.value=l}},function(l){if(a.status==="pending"){var i=a;i.status="rejected",i.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,zd(t),t}throw ys=a,Ws}}function vs(t){try{var a=t._init;return a(t._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(ys=s,Ws):s}}var ys=null;function Rd(){if(ys===null)throw Error(o(459));var t=ys;return ys=null,t}function zd(t){if(t===Ws||t===Gn)throw Error(o(483))}var Is=null,Bl=0;function $n(t){var a=Bl;return Bl+=1,Is===null&&(Is=[]),Md(Is,t,a)}function Hl(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Qn(t,a){throw a.$$typeof===y?Error(o(525)):(t=Object.prototype.toString.call(a),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function Od(t){function a(G,B){if(t){var Q=G.deletions;Q===null?(G.deletions=[B],G.flags|=16):Q.push(B)}}function s(G,B){if(!t)return null;for(;B!==null;)a(G,B),B=B.sibling;return null}function l(G){for(var B=new Map;G!==null;)G.key!==null?B.set(G.key,G):B.set(G.index,G),G=G.sibling;return B}function i(G,B){return G=xa(G,B),G.index=0,G.sibling=null,G}function r(G,B,Q){return G.index=Q,t?(Q=G.alternate,Q!==null?(Q=Q.index,Q<B?(G.flags|=67108866,B):Q):(G.flags|=67108866,B)):(G.flags|=1048576,B)}function h(G){return t&&G.alternate===null&&(G.flags|=67108866),G}function w(G,B,Q,ie){return B===null||B.tag!==6?(B=jr(Q,G.mode,ie),B.return=G,B):(B=i(B,Q),B.return=G,B)}function R(G,B,Q,ie){var je=Q.type;return je===_?ae(G,B,Q.props.children,ie,Q.key):B!==null&&(B.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===X&&vs(je)===B.type)?(B=i(B,Q.props),Hl(B,Q),B.return=G,B):(B=Bn(Q.type,Q.key,Q.props,null,G.mode,ie),Hl(B,Q),B.return=G,B)}function Z(G,B,Q,ie){return B===null||B.tag!==4||B.stateNode.containerInfo!==Q.containerInfo||B.stateNode.implementation!==Q.implementation?(B=Nr(Q,G.mode,ie),B.return=G,B):(B=i(B,Q.children||[]),B.return=G,B)}function ae(G,B,Q,ie,je){return B===null||B.tag!==7?(B=fs(Q,G.mode,ie,je),B.return=G,B):(B=i(B,Q),B.return=G,B)}function re(G,B,Q){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=jr(""+B,G.mode,Q),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case C:return Q=Bn(B.type,B.key,B.props,null,G.mode,Q),Hl(Q,B),Q.return=G,Q;case N:return B=Nr(B,G.mode,Q),B.return=G,B;case X:return B=vs(B),re(G,B,Q)}if(D(B)||q(B))return B=fs(B,G.mode,Q,null),B.return=G,B;if(typeof B.then=="function")return re(G,$n(B),Q);if(B.$$typeof===Y)return re(G,Yn(G,B),Q);Qn(G,B)}return null}function J(G,B,Q,ie){var je=B!==null?B.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return je!==null?null:w(G,B,""+Q,ie);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case C:return Q.key===je?R(G,B,Q,ie):null;case N:return Q.key===je?Z(G,B,Q,ie):null;case X:return Q=vs(Q),J(G,B,Q,ie)}if(D(Q)||q(Q))return je!==null?null:ae(G,B,Q,ie,null);if(typeof Q.then=="function")return J(G,B,$n(Q),ie);if(Q.$$typeof===Y)return J(G,B,Yn(G,Q),ie);Qn(G,Q)}return null}function K(G,B,Q,ie,je){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return G=G.get(Q)||null,w(B,G,""+ie,je);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case C:return G=G.get(ie.key===null?Q:ie.key)||null,R(B,G,ie,je);case N:return G=G.get(ie.key===null?Q:ie.key)||null,Z(B,G,ie,je);case X:return ie=vs(ie),K(G,B,Q,ie,je)}if(D(ie)||q(ie))return G=G.get(Q)||null,ae(B,G,ie,je,null);if(typeof ie.then=="function")return K(G,B,Q,$n(ie),je);if(ie.$$typeof===Y)return K(G,B,Q,Yn(B,ie),je);Qn(B,ie)}return null}function ve(G,B,Q,ie){for(var je=null,Ue=null,ye=B,Ee=B=0,ze=null;ye!==null&&Ee<Q.length;Ee++){ye.index>Ee?(ze=ye,ye=null):ze=ye.sibling;var Be=J(G,ye,Q[Ee],ie);if(Be===null){ye===null&&(ye=ze);break}t&&ye&&Be.alternate===null&&a(G,ye),B=r(Be,B,Ee),Ue===null?je=Be:Ue.sibling=Be,Ue=Be,ye=ze}if(Ee===Q.length)return s(G,ye),Oe&&ga(G,Ee),je;if(ye===null){for(;Ee<Q.length;Ee++)ye=re(G,Q[Ee],ie),ye!==null&&(B=r(ye,B,Ee),Ue===null?je=ye:Ue.sibling=ye,Ue=ye);return Oe&&ga(G,Ee),je}for(ye=l(ye);Ee<Q.length;Ee++)ze=K(ye,G,Ee,Q[Ee],ie),ze!==null&&(t&&ze.alternate!==null&&ye.delete(ze.key===null?Ee:ze.key),B=r(ze,B,Ee),Ue===null?je=ze:Ue.sibling=ze,Ue=ze);return t&&ye.forEach(function(ls){return a(G,ls)}),Oe&&ga(G,Ee),je}function Ne(G,B,Q,ie){if(Q==null)throw Error(o(151));for(var je=null,Ue=null,ye=B,Ee=B=0,ze=null,Be=Q.next();ye!==null&&!Be.done;Ee++,Be=Q.next()){ye.index>Ee?(ze=ye,ye=null):ze=ye.sibling;var ls=J(G,ye,Be.value,ie);if(ls===null){ye===null&&(ye=ze);break}t&&ye&&ls.alternate===null&&a(G,ye),B=r(ls,B,Ee),Ue===null?je=ls:Ue.sibling=ls,Ue=ls,ye=ze}if(Be.done)return s(G,ye),Oe&&ga(G,Ee),je;if(ye===null){for(;!Be.done;Ee++,Be=Q.next())Be=re(G,Be.value,ie),Be!==null&&(B=r(Be,B,Ee),Ue===null?je=Be:Ue.sibling=Be,Ue=Be);return Oe&&ga(G,Ee),je}for(ye=l(ye);!Be.done;Ee++,Be=Q.next())Be=K(ye,G,Ee,Be.value,ie),Be!==null&&(t&&Be.alternate!==null&&ye.delete(Be.key===null?Ee:Be.key),B=r(Be,B,Ee),Ue===null?je=Be:Ue.sibling=Be,Ue=Be);return t&&ye.forEach(function(Og){return a(G,Og)}),Oe&&ga(G,Ee),je}function Qe(G,B,Q,ie){if(typeof Q=="object"&&Q!==null&&Q.type===_&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case C:e:{for(var je=Q.key;B!==null;){if(B.key===je){if(je=Q.type,je===_){if(B.tag===7){s(G,B.sibling),ie=i(B,Q.props.children),ie.return=G,G=ie;break e}}else if(B.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===X&&vs(je)===B.type){s(G,B.sibling),ie=i(B,Q.props),Hl(ie,Q),ie.return=G,G=ie;break e}s(G,B);break}else a(G,B);B=B.sibling}Q.type===_?(ie=fs(Q.props.children,G.mode,ie,Q.key),ie.return=G,G=ie):(ie=Bn(Q.type,Q.key,Q.props,null,G.mode,ie),Hl(ie,Q),ie.return=G,G=ie)}return h(G);case N:e:{for(je=Q.key;B!==null;){if(B.key===je)if(B.tag===4&&B.stateNode.containerInfo===Q.containerInfo&&B.stateNode.implementation===Q.implementation){s(G,B.sibling),ie=i(B,Q.children||[]),ie.return=G,G=ie;break e}else{s(G,B);break}else a(G,B);B=B.sibling}ie=Nr(Q,G.mode,ie),ie.return=G,G=ie}return h(G);case X:return Q=vs(Q),Qe(G,B,Q,ie)}if(D(Q))return ve(G,B,Q,ie);if(q(Q)){if(je=q(Q),typeof je!="function")throw Error(o(150));return Q=je.call(Q),Ne(G,B,Q,ie)}if(typeof Q.then=="function")return Qe(G,B,$n(Q),ie);if(Q.$$typeof===Y)return Qe(G,B,Yn(G,Q),ie);Qn(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,B!==null&&B.tag===6?(s(G,B.sibling),ie=i(B,Q),ie.return=G,G=ie):(s(G,B),ie=jr(Q,G.mode,ie),ie.return=G,G=ie),h(G)):s(G,B)}return function(G,B,Q,ie){try{Bl=0;var je=Qe(G,B,Q,ie);return Is=null,je}catch(ye){if(ye===Ws||ye===Gn)throw ye;var Ue=Rt(29,ye,null,G.mode);return Ue.lanes=ie,Ue.return=G,Ue}}}var js=Od(!0),Ld=Od(!1),Ya=!1;function zr(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Or(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Fa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ga(t,a,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(He&2)!==0){var i=l.pending;return i===null?a.next=a:(a.next=i.next,i.next=a),l.pending=a,a=Un(t),vd(t,null,s),a}return Ln(t,l,a,s),Un(t)}function ql(t,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,Oa(t,s)}}function Lr(t,a){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var i=null,r=null;if(s=s.firstBaseUpdate,s!==null){do{var h={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};r===null?i=r=h:r=r.next=h,s=s.next}while(s!==null);r===null?i=r=a:r=r.next=a}else i=r=a;s={baseState:l.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=a:t.next=a,s.lastBaseUpdate=a}var Ur=!1;function Yl(){if(Ur){var t=Ks;if(t!==null)throw t}}function Fl(t,a,s,l){Ur=!1;var i=t.updateQueue;Ya=!1;var r=i.firstBaseUpdate,h=i.lastBaseUpdate,w=i.shared.pending;if(w!==null){i.shared.pending=null;var R=w,Z=R.next;R.next=null,h===null?r=Z:h.next=Z,h=R;var ae=t.alternate;ae!==null&&(ae=ae.updateQueue,w=ae.lastBaseUpdate,w!==h&&(w===null?ae.firstBaseUpdate=Z:w.next=Z,ae.lastBaseUpdate=R))}if(r!==null){var re=i.baseState;h=0,ae=Z=R=null,w=r;do{var J=w.lane&-536870913,K=J!==w.lane;if(K?(Re&J)===J:(l&J)===J){J!==0&&J===Ps&&(Ur=!0),ae!==null&&(ae=ae.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ve=t,Ne=w;J=a;var Qe=s;switch(Ne.tag){case 1:if(ve=Ne.payload,typeof ve=="function"){re=ve.call(Qe,re,J);break e}re=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ne.payload,J=typeof ve=="function"?ve.call(Qe,re,J):ve,J==null)break e;re=g({},re,J);break e;case 2:Ya=!0}}J=w.callback,J!==null&&(t.flags|=64,K&&(t.flags|=8192),K=i.callbacks,K===null?i.callbacks=[J]:K.push(J))}else K={lane:J,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ae===null?(Z=ae=K,R=re):ae=ae.next=K,h|=J;if(w=w.next,w===null){if(w=i.shared.pending,w===null)break;K=w,w=K.next,K.next=null,i.lastBaseUpdate=K,i.shared.pending=null}}while(!0);ae===null&&(R=re),i.baseState=R,i.firstBaseUpdate=Z,i.lastBaseUpdate=ae,r===null&&(i.shared.lanes=0),Za|=h,t.lanes=h,t.memoizedState=re}}function Ud(t,a){if(typeof t!="function")throw Error(o(191,t));t.call(a)}function Bd(t,a){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Ud(s[t],a)}var el=T(null),Vn=T(0);function Hd(t,a){t=ka,W(Vn,t),W(el,a),ka=t|a.baseLanes}function Br(){W(Vn,ka),W(el,el.current)}function Hr(){ka=Vn.current,L(el),L(Vn)}var zt=T(null),Jt=null;function Xa(t){var a=t.alternate;W(at,at.current&1),W(zt,t),Jt===null&&(a===null||el.current!==null||a.memoizedState!==null)&&(Jt=t)}function qr(t){W(at,at.current),W(zt,t),Jt===null&&(Jt=t)}function qd(t){t.tag===22?(W(at,at.current),W(zt,t),Jt===null&&(Jt=t)):$a()}function $a(){W(at,at.current),W(zt,zt.current)}function Ot(t){L(zt),Jt===t&&(Jt=null),L(at)}var at=T(0);function Zn(t){for(var a=t;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Qc(s)||Vc(s)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var va=0,ke=null,Xe=null,it=null,Jn=!1,tl=!1,Ns=!1,Pn=0,Gl=0,al=null,_x=0;function Ie(){throw Error(o(321))}function Yr(t,a){if(a===null)return!1;for(var s=0;s<a.length&&s<t.length;s++)if(!Mt(t[s],a[s]))return!1;return!0}function Fr(t,a,s,l,i,r){return va=r,ke=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,S.H=t===null||t.memoizedState===null?wu:sc,Ns=!1,r=s(l,i),Ns=!1,tl&&(r=Fd(a,s,l,i)),Yd(t),r}function Yd(t){S.H=Ql;var a=Xe!==null&&Xe.next!==null;if(va=0,it=Xe=ke=null,Jn=!1,Gl=0,al=null,a)throw Error(o(300));t===null||rt||(t=t.dependencies,t!==null&&qn(t)&&(rt=!0))}function Fd(t,a,s,l){ke=t;var i=0;do{if(tl&&(al=null),Gl=0,tl=!1,25<=i)throw Error(o(301));if(i+=1,it=Xe=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}S.H=Su,r=a(s,l)}while(tl);return r}function Cx(){var t=S.H,a=t.useState()[0];return a=typeof a.then=="function"?Xl(a):a,t=t.useState()[0],(Xe!==null?Xe.memoizedState:null)!==t&&(ke.flags|=1024),a}function Gr(){var t=Pn!==0;return Pn=0,t}function Xr(t,a,s){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~s}function $r(t){if(Jn){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Jn=!1}va=0,it=Xe=ke=null,tl=!1,Gl=Pn=0,al=null}function yt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?ke.memoizedState=it=t:it=it.next=t,it}function st(){if(Xe===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var a=it===null?ke.memoizedState:it.next;if(a!==null)it=a,Xe=t;else{if(t===null)throw ke.alternate===null?Error(o(467)):Error(o(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},it===null?ke.memoizedState=it=t:it=it.next=t}return it}function Kn(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xl(t){var a=Gl;return Gl+=1,al===null&&(al=[]),t=Md(al,t,a),a=ke,(it===null?a.memoizedState:it.next)===null&&(a=a.alternate,S.H=a===null||a.memoizedState===null?wu:sc),t}function Wn(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Xl(t);if(t.$$typeof===Y)return ht(t)}throw Error(o(438,String(t)))}function Qr(t){var a=null,s=ke.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var l=ke.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(i){return i.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=Kn(),ke.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(t),l=0;l<t;l++)s[l]=me;return a.index++,s}function ya(t,a){return typeof a=="function"?a(t):a}function In(t){var a=st();return Vr(a,Xe,t)}function Vr(t,a,s){var l=t.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=s;var i=t.baseQueue,r=l.pending;if(r!==null){if(i!==null){var h=i.next;i.next=r.next,r.next=h}a.baseQueue=i=r,l.pending=null}if(r=t.baseState,i===null)t.memoizedState=r;else{a=i.next;var w=h=null,R=null,Z=a,ae=!1;do{var re=Z.lane&-536870913;if(re!==Z.lane?(Re&re)===re:(va&re)===re){var J=Z.revertLane;if(J===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),re===Ps&&(ae=!0);else if((va&J)===J){Z=Z.next,J===Ps&&(ae=!0);continue}else re={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},R===null?(w=R=re,h=r):R=R.next=re,ke.lanes|=J,Za|=J;re=Z.action,Ns&&s(r,re),r=Z.hasEagerState?Z.eagerState:s(r,re)}else J={lane:re,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},R===null?(w=R=J,h=r):R=R.next=J,ke.lanes|=re,Za|=re;Z=Z.next}while(Z!==null&&Z!==a);if(R===null?h=r:R.next=w,!Mt(r,t.memoizedState)&&(rt=!0,ae&&(s=Ks,s!==null)))throw s;t.memoizedState=r,t.baseState=h,t.baseQueue=R,l.lastRenderedState=r}return i===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Zr(t){var a=st(),s=a.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=t;var l=s.dispatch,i=s.pending,r=a.memoizedState;if(i!==null){s.pending=null;var h=i=i.next;do r=t(r,h.action),h=h.next;while(h!==i);Mt(r,a.memoizedState)||(rt=!0),a.memoizedState=r,a.baseQueue===null&&(a.baseState=r),s.lastRenderedState=r}return[r,l]}function Gd(t,a,s){var l=ke,i=st(),r=Oe;if(r){if(s===void 0)throw Error(o(407));s=s()}else s=a();var h=!Mt((Xe||i).memoizedState,s);if(h&&(i.memoizedState=s,rt=!0),i=i.queue,Kr(Qd.bind(null,l,i,t),[t]),i.getSnapshot!==a||h||it!==null&&it.memoizedState.tag&1){if(l.flags|=2048,sl(9,{destroy:void 0},$d.bind(null,l,i,s,a),null),Ze===null)throw Error(o(349));r||(va&127)!==0||Xd(l,a,s)}return s}function Xd(t,a,s){t.flags|=16384,t={getSnapshot:a,value:s},a=ke.updateQueue,a===null?(a=Kn(),ke.updateQueue=a,a.stores=[t]):(s=a.stores,s===null?a.stores=[t]:s.push(t))}function $d(t,a,s,l){a.value=s,a.getSnapshot=l,Vd(a)&&Zd(t)}function Qd(t,a,s){return s(function(){Vd(a)&&Zd(t)})}function Vd(t){var a=t.getSnapshot;t=t.value;try{var s=a();return!Mt(t,s)}catch{return!0}}function Zd(t){var a=hs(t,2);a!==null&&At(a,t,2)}function Jr(t){var a=yt();if(typeof t=="function"){var s=t;if(t=s(),Ns){Nt(!0);try{s()}finally{Nt(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:t},a}function Jd(t,a,s,l){return t.baseState=s,Vr(t,Xe,typeof l=="function"?l:ya)}function kx(t,a,s,l,i){if(ai(t))throw Error(o(485));if(t=a.action,t!==null){var r={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){r.listeners.push(h)}};S.T!==null?s(!0):r.isTransition=!1,l(r),s=a.pending,s===null?(r.next=a.pending=r,Pd(a,r)):(r.next=s.next,a.pending=s.next=r)}}function Pd(t,a){var s=a.action,l=a.payload,i=t.state;if(a.isTransition){var r=S.T,h={};S.T=h;try{var w=s(i,l),R=S.S;R!==null&&R(h,w),Kd(t,a,w)}catch(Z){Pr(t,a,Z)}finally{r!==null&&h.types!==null&&(r.types=h.types),S.T=r}}else try{r=s(i,l),Kd(t,a,r)}catch(Z){Pr(t,a,Z)}}function Kd(t,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Wd(t,a,l)},function(l){return Pr(t,a,l)}):Wd(t,a,s)}function Wd(t,a,s){a.status="fulfilled",a.value=s,Id(a),t.state=s,a=t.pending,a!==null&&(s=a.next,s===a?t.pending=null:(s=s.next,a.next=s,Pd(t,s)))}function Pr(t,a,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=s,Id(a),a=a.next;while(a!==l)}t.action=null}function Id(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function eu(t,a){return a}function tu(t,a){if(Oe){var s=Ze.formState;if(s!==null){e:{var l=ke;if(Oe){if(Je){t:{for(var i=Je,r=Zt;i.nodeType!==8;){if(!r){i=null;break t}if(i=Pt(i.nextSibling),i===null){i=null;break t}}r=i.data,i=r==="F!"||r==="F"?i:null}if(i){Je=Pt(i.nextSibling),l=i.data==="F!";break e}}Ha(l)}l=!1}l&&(a=s[0])}}return s=yt(),s.memoizedState=s.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eu,lastRenderedState:a},s.queue=l,s=yu.bind(null,ke,l),l.dispatch=s,l=Jr(!1),r=ac.bind(null,ke,!1,l.queue),l=yt(),i={state:a,dispatch:null,action:t,pending:null},l.queue=i,s=kx.bind(null,ke,i,r,s),i.dispatch=s,l.memoizedState=t,[a,s,!1]}function au(t){var a=st();return su(a,Xe,t)}function su(t,a,s){if(a=Vr(t,a,eu)[0],t=In(ya)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=Xl(a)}catch(h){throw h===Ws?Gn:h}else l=a;a=st();var i=a.queue,r=i.dispatch;return s!==a.memoizedState&&(ke.flags|=2048,sl(9,{destroy:void 0},Ex.bind(null,i,s),null)),[l,r,t]}function Ex(t,a){t.action=a}function lu(t){var a=st(),s=Xe;if(s!==null)return su(a,s,t);st(),a=a.memoizedState,s=st();var l=s.queue.dispatch;return s.memoizedState=t,[a,l,!1]}function sl(t,a,s,l){return t={tag:t,create:s,deps:l,inst:a,next:null},a=ke.updateQueue,a===null&&(a=Kn(),ke.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,a.lastEffect=t),t}function nu(){return st().memoizedState}function ei(t,a,s,l){var i=yt();ke.flags|=t,i.memoizedState=sl(1|a,{destroy:void 0},s,l===void 0?null:l)}function ti(t,a,s,l){var i=st();l=l===void 0?null:l;var r=i.memoizedState.inst;Xe!==null&&l!==null&&Yr(l,Xe.memoizedState.deps)?i.memoizedState=sl(a,r,s,l):(ke.flags|=t,i.memoizedState=sl(1|a,r,s,l))}function iu(t,a){ei(8390656,8,t,a)}function Kr(t,a){ti(2048,8,t,a)}function Dx(t){ke.flags|=4;var a=ke.updateQueue;if(a===null)a=Kn(),ke.updateQueue=a,a.events=[t];else{var s=a.events;s===null?a.events=[t]:s.push(t)}}function ru(t){var a=st().memoizedState;return Dx({ref:a,nextImpl:t}),function(){if((He&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}function cu(t,a){return ti(4,2,t,a)}function ou(t,a){return ti(4,4,t,a)}function du(t,a){if(typeof a=="function"){t=t();var s=a(t);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function uu(t,a,s){s=s!=null?s.concat([t]):null,ti(4,4,du.bind(null,a,t),s)}function Wr(){}function mu(t,a){var s=st();a=a===void 0?null:a;var l=s.memoizedState;return a!==null&&Yr(a,l[1])?l[0]:(s.memoizedState=[t,a],t)}function hu(t,a){var s=st();a=a===void 0?null:a;var l=s.memoizedState;if(a!==null&&Yr(a,l[1]))return l[0];if(l=t(),Ns){Nt(!0);try{t()}finally{Nt(!1)}}return s.memoizedState=[l,a],l}function Ir(t,a,s){return s===void 0||(va&1073741824)!==0&&(Re&261930)===0?t.memoizedState=a:(t.memoizedState=s,t=fm(),ke.lanes|=t,Za|=t,s)}function fu(t,a,s,l){return Mt(s,a)?s:el.current!==null?(t=Ir(t,s,l),Mt(t,a)||(rt=!0),t):(va&42)===0||(va&1073741824)!==0&&(Re&261930)===0?(rt=!0,t.memoizedState=s):(t=fm(),ke.lanes|=t,Za|=t,a)}function xu(t,a,s,l,i){var r=E.p;E.p=r!==0&&8>r?r:8;var h=S.T,w={};S.T=w,ac(t,!1,a,s);try{var R=i(),Z=S.S;if(Z!==null&&Z(w,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var ae=Sx(R,l);$l(t,a,ae,Bt(t))}else $l(t,a,l,Bt(t))}catch(re){$l(t,a,{then:function(){},status:"rejected",reason:re},Bt())}finally{E.p=r,h!==null&&w.types!==null&&(h.types=w.types),S.T=h}}function Ax(){}function ec(t,a,s,l){if(t.tag!==5)throw Error(o(476));var i=gu(t).queue;xu(t,i,a,U,s===null?Ax:function(){return pu(t),s(l)})}function gu(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:U},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:s},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function pu(t){var a=gu(t);a.next===null&&(a=t.alternate.memoizedState),$l(t,a.next.queue,{},Bt())}function tc(){return ht(on)}function bu(){return st().memoizedState}function vu(){return st().memoizedState}function Tx(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var s=Bt();t=Fa(s);var l=Ga(a,t,s);l!==null&&(At(l,a,s),ql(l,a,s)),a={cache:Ar()},t.payload=a;return}a=a.return}}function Mx(t,a,s){var l=Bt();s={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},ai(t)?ju(a,s):(s=vr(t,a,s,l),s!==null&&(At(s,t,l),Nu(s,a,l)))}function yu(t,a,s){var l=Bt();$l(t,a,s,l)}function $l(t,a,s,l){var i={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(ai(t))ju(a,i);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=a.lastRenderedReducer,r!==null))try{var h=a.lastRenderedState,w=r(h,s);if(i.hasEagerState=!0,i.eagerState=w,Mt(w,h))return Ln(t,a,i,0),Ze===null&&On(),!1}catch{}if(s=vr(t,a,i,l),s!==null)return At(s,t,l),Nu(s,a,l),!0}return!1}function ac(t,a,s,l){if(l={lane:2,revertLane:zc(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ai(t)){if(a)throw Error(o(479))}else a=vr(t,s,l,2),a!==null&&At(a,t,2)}function ai(t){var a=t.alternate;return t===ke||a!==null&&a===ke}function ju(t,a){tl=Jn=!0;var s=t.pending;s===null?a.next=a:(a.next=s.next,s.next=a),t.pending=a}function Nu(t,a,s){if((s&4194048)!==0){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,Oa(t,s)}}var Ql={readContext:ht,use:Wn,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useLayoutEffect:Ie,useInsertionEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useSyncExternalStore:Ie,useId:Ie,useHostTransitionStatus:Ie,useFormState:Ie,useActionState:Ie,useOptimistic:Ie,useMemoCache:Ie,useCacheRefresh:Ie};Ql.useEffectEvent=Ie;var wu={readContext:ht,use:Wn,useCallback:function(t,a){return yt().memoizedState=[t,a===void 0?null:a],t},useContext:ht,useEffect:iu,useImperativeHandle:function(t,a,s){s=s!=null?s.concat([t]):null,ei(4194308,4,du.bind(null,a,t),s)},useLayoutEffect:function(t,a){return ei(4194308,4,t,a)},useInsertionEffect:function(t,a){ei(4,2,t,a)},useMemo:function(t,a){var s=yt();a=a===void 0?null:a;var l=t();if(Ns){Nt(!0);try{t()}finally{Nt(!1)}}return s.memoizedState=[l,a],l},useReducer:function(t,a,s){var l=yt();if(s!==void 0){var i=s(a);if(Ns){Nt(!0);try{s(a)}finally{Nt(!1)}}}else i=a;return l.memoizedState=l.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},l.queue=t,t=t.dispatch=Mx.bind(null,ke,t),[l.memoizedState,t]},useRef:function(t){var a=yt();return t={current:t},a.memoizedState=t},useState:function(t){t=Jr(t);var a=t.queue,s=yu.bind(null,ke,a);return a.dispatch=s,[t.memoizedState,s]},useDebugValue:Wr,useDeferredValue:function(t,a){var s=yt();return Ir(s,t,a)},useTransition:function(){var t=Jr(!1);return t=xu.bind(null,ke,t.queue,!0,!1),yt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,s){var l=ke,i=yt();if(Oe){if(s===void 0)throw Error(o(407));s=s()}else{if(s=a(),Ze===null)throw Error(o(349));(Re&127)!==0||Xd(l,a,s)}i.memoizedState=s;var r={value:s,getSnapshot:a};return i.queue=r,iu(Qd.bind(null,l,r,t),[t]),l.flags|=2048,sl(9,{destroy:void 0},$d.bind(null,l,r,s,a),null),s},useId:function(){var t=yt(),a=Ze.identifierPrefix;if(Oe){var s=na,l=la;s=(l&~(1<<32-pt(l)-1)).toString(32)+s,a="_"+a+"R_"+s,s=Pn++,0<s&&(a+="H"+s.toString(32)),a+="_"}else s=_x++,a="_"+a+"r_"+s.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:tc,useFormState:tu,useActionState:tu,useOptimistic:function(t){var a=yt();a.memoizedState=a.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=ac.bind(null,ke,!0,s),s.dispatch=a,[t,a]},useMemoCache:Qr,useCacheRefresh:function(){return yt().memoizedState=Tx.bind(null,ke)},useEffectEvent:function(t){var a=yt(),s={impl:t};return a.memoizedState=s,function(){if((He&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}},sc={readContext:ht,use:Wn,useCallback:mu,useContext:ht,useEffect:Kr,useImperativeHandle:uu,useInsertionEffect:cu,useLayoutEffect:ou,useMemo:hu,useReducer:In,useRef:nu,useState:function(){return In(ya)},useDebugValue:Wr,useDeferredValue:function(t,a){var s=st();return fu(s,Xe.memoizedState,t,a)},useTransition:function(){var t=In(ya)[0],a=st().memoizedState;return[typeof t=="boolean"?t:Xl(t),a]},useSyncExternalStore:Gd,useId:bu,useHostTransitionStatus:tc,useFormState:au,useActionState:au,useOptimistic:function(t,a){var s=st();return Jd(s,Xe,t,a)},useMemoCache:Qr,useCacheRefresh:vu};sc.useEffectEvent=ru;var Su={readContext:ht,use:Wn,useCallback:mu,useContext:ht,useEffect:Kr,useImperativeHandle:uu,useInsertionEffect:cu,useLayoutEffect:ou,useMemo:hu,useReducer:Zr,useRef:nu,useState:function(){return Zr(ya)},useDebugValue:Wr,useDeferredValue:function(t,a){var s=st();return Xe===null?Ir(s,t,a):fu(s,Xe.memoizedState,t,a)},useTransition:function(){var t=Zr(ya)[0],a=st().memoizedState;return[typeof t=="boolean"?t:Xl(t),a]},useSyncExternalStore:Gd,useId:bu,useHostTransitionStatus:tc,useFormState:lu,useActionState:lu,useOptimistic:function(t,a){var s=st();return Xe!==null?Jd(s,Xe,t,a):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Qr,useCacheRefresh:vu};Su.useEffectEvent=ru;function lc(t,a,s,l){a=t.memoizedState,s=s(l,a),s=s==null?a:g({},a,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var nc={enqueueSetState:function(t,a,s){t=t._reactInternals;var l=Bt(),i=Fa(l);i.payload=a,s!=null&&(i.callback=s),a=Ga(t,i,l),a!==null&&(At(a,t,l),ql(a,t,l))},enqueueReplaceState:function(t,a,s){t=t._reactInternals;var l=Bt(),i=Fa(l);i.tag=1,i.payload=a,s!=null&&(i.callback=s),a=Ga(t,i,l),a!==null&&(At(a,t,l),ql(a,t,l))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var s=Bt(),l=Fa(s);l.tag=2,a!=null&&(l.callback=a),a=Ga(t,l,s),a!==null&&(At(a,t,s),ql(a,t,s))}};function _u(t,a,s,l,i,r,h){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,r,h):a.prototype&&a.prototype.isPureReactComponent?!Ml(s,l)||!Ml(i,r):!0}function Cu(t,a,s,l){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,l),a.state!==t&&nc.enqueueReplaceState(a,a.state,null)}function ws(t,a){var s=a;if("ref"in a){s={};for(var l in a)l!=="ref"&&(s[l]=a[l])}if(t=t.defaultProps){s===a&&(s=g({},s));for(var i in t)s[i]===void 0&&(s[i]=t[i])}return s}function ku(t){zn(t)}function Eu(t){console.error(t)}function Du(t){zn(t)}function si(t,a){try{var s=t.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function Au(t,a,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function ic(t,a,s){return s=Fa(s),s.tag=3,s.payload={element:null},s.callback=function(){si(t,a)},s}function Tu(t){return t=Fa(t),t.tag=3,t}function Mu(t,a,s,l){var i=s.type.getDerivedStateFromError;if(typeof i=="function"){var r=l.value;t.payload=function(){return i(r)},t.callback=function(){Au(a,s,l)}}var h=s.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(t.callback=function(){Au(a,s,l),typeof i!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function Rx(t,a,s,l,i){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=s.alternate,a!==null&&Js(a,s,i,!0),s=zt.current,s!==null){switch(s.tag){case 31:case 13:return Jt===null?xi():s.alternate===null&&et===0&&(et=3),s.flags&=-257,s.flags|=65536,s.lanes=i,l===Xn?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([l]):a.add(l),Tc(t,l,i)),!1;case 22:return s.flags|=65536,l===Xn?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([l]):s.add(l)),Tc(t,l,i)),!1}throw Error(o(435,s.tag))}return Tc(t,l,i),xi(),!1}if(Oe)return a=zt.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=i,l!==_r&&(t=Error(o(422),{cause:l}),Ol($t(t,s)))):(l!==_r&&(a=Error(o(423),{cause:l}),Ol($t(a,s))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,l=$t(l,s),i=ic(t.stateNode,l,i),Lr(t,i),et!==4&&(et=2)),!1;var r=Error(o(520),{cause:l});if(r=$t(r,s),en===null?en=[r]:en.push(r),et!==4&&(et=2),a===null)return!0;l=$t(l,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,t=i&-i,s.lanes|=t,t=ic(s.stateNode,l,t),Lr(s,t),!1;case 1:if(a=s.type,r=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Ja===null||!Ja.has(r))))return s.flags|=65536,i&=-i,s.lanes|=i,i=Tu(i),Mu(i,t,s,l),Lr(s,i),!1}s=s.return}while(s!==null);return!1}var rc=Error(o(461)),rt=!1;function ft(t,a,s,l){a.child=t===null?Ld(a,null,s,l):js(a,t.child,s,l)}function Ru(t,a,s,l,i){s=s.render;var r=a.ref;if("ref"in l){var h={};for(var w in l)w!=="ref"&&(h[w]=l[w])}else h=l;return ps(a),l=Fr(t,a,s,h,r,i),w=Gr(),t!==null&&!rt?(Xr(t,a,i),ja(t,a,i)):(Oe&&w&&wr(a),a.flags|=1,ft(t,a,l,i),a.child)}function zu(t,a,s,l,i){if(t===null){var r=s.type;return typeof r=="function"&&!yr(r)&&r.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=r,Ou(t,a,r,l,i)):(t=Bn(s.type,null,l,a,a.mode,i),t.ref=a.ref,t.return=a,a.child=t)}if(r=t.child,!xc(t,i)){var h=r.memoizedProps;if(s=s.compare,s=s!==null?s:Ml,s(h,l)&&t.ref===a.ref)return ja(t,a,i)}return a.flags|=1,t=xa(r,l),t.ref=a.ref,t.return=a,a.child=t}function Ou(t,a,s,l,i){if(t!==null){var r=t.memoizedProps;if(Ml(r,l)&&t.ref===a.ref)if(rt=!1,a.pendingProps=l=r,xc(t,i))(t.flags&131072)!==0&&(rt=!0);else return a.lanes=t.lanes,ja(t,a,i)}return cc(t,a,s,l,i)}function Lu(t,a,s,l){var i=l.children,r=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((a.flags&128)!==0){if(r=r!==null?r.baseLanes|s:s,t!==null){for(l=a.child=t.child,i=0;l!==null;)i=i|l.lanes|l.childLanes,l=l.sibling;l=i&~r}else l=0,a.child=null;return Uu(t,a,r,s,l)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&Fn(a,r!==null?r.cachePool:null),r!==null?Hd(a,r):Br(),qd(a);else return l=a.lanes=536870912,Uu(t,a,r!==null?r.baseLanes|s:s,s,l)}else r!==null?(Fn(a,r.cachePool),Hd(a,r),$a(),a.memoizedState=null):(t!==null&&Fn(a,null),Br(),$a());return ft(t,a,i,s),a.child}function Vl(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Uu(t,a,s,l,i){var r=Mr();return r=r===null?null:{parent:nt._currentValue,pool:r},a.memoizedState={baseLanes:s,cachePool:r},t!==null&&Fn(a,null),Br(),qd(a),t!==null&&Js(t,a,l,!0),a.childLanes=i,null}function li(t,a){return a=ii({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function Bu(t,a,s){return js(a,t.child,null,s),t=li(a,a.pendingProps),t.flags|=2,Ot(a),a.memoizedState=null,t}function zx(t,a,s){var l=a.pendingProps,i=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(Oe){if(l.mode==="hidden")return t=li(a,l),a.lanes=536870912,Vl(null,t);if(qr(a),(t=Je)?(t=Pm(t,Zt),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Ua!==null?{id:la,overflow:na}:null,retryLane:536870912,hydrationErrors:null},s=jd(t),s.return=a,a.child=s,mt=a,Je=null)):t=null,t===null)throw Ha(a);return a.lanes=536870912,null}return li(a,l)}var r=t.memoizedState;if(r!==null){var h=r.dehydrated;if(qr(a),i)if(a.flags&256)a.flags&=-257,a=Bu(t,a,s);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(o(558));else if(rt||Js(t,a,s,!1),i=(s&t.childLanes)!==0,rt||i){if(l=Ze,l!==null&&(h=wn(l,s),h!==0&&h!==r.retryLane))throw r.retryLane=h,hs(t,h),At(l,t,h),rc;xi(),a=Bu(t,a,s)}else t=r.treeContext,Je=Pt(h.nextSibling),mt=a,Oe=!0,Ba=null,Zt=!1,t!==null&&Sd(a,t),a=li(a,l),a.flags|=4096;return a}return t=xa(t.child,{mode:l.mode,children:l.children}),t.ref=a.ref,a.child=t,t.return=a,t}function ni(t,a){var s=a.ref;if(s===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(o(284));(t===null||t.ref!==s)&&(a.flags|=4194816)}}function cc(t,a,s,l,i){return ps(a),s=Fr(t,a,s,l,void 0,i),l=Gr(),t!==null&&!rt?(Xr(t,a,i),ja(t,a,i)):(Oe&&l&&wr(a),a.flags|=1,ft(t,a,s,i),a.child)}function Hu(t,a,s,l,i,r){return ps(a),a.updateQueue=null,s=Fd(a,l,s,i),Yd(t),l=Gr(),t!==null&&!rt?(Xr(t,a,r),ja(t,a,r)):(Oe&&l&&wr(a),a.flags|=1,ft(t,a,s,r),a.child)}function qu(t,a,s,l,i){if(ps(a),a.stateNode===null){var r=$s,h=s.contextType;typeof h=="object"&&h!==null&&(r=ht(h)),r=new s(l,r),a.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=nc,a.stateNode=r,r._reactInternals=a,r=a.stateNode,r.props=l,r.state=a.memoizedState,r.refs={},zr(a),h=s.contextType,r.context=typeof h=="object"&&h!==null?ht(h):$s,r.state=a.memoizedState,h=s.getDerivedStateFromProps,typeof h=="function"&&(lc(a,s,h,l),r.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(h=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),h!==r.state&&nc.enqueueReplaceState(r,r.state,null),Fl(a,l,r,i),Yl(),r.state=a.memoizedState),typeof r.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(t===null){r=a.stateNode;var w=a.memoizedProps,R=ws(s,w);r.props=R;var Z=r.context,ae=s.contextType;h=$s,typeof ae=="object"&&ae!==null&&(h=ht(ae));var re=s.getDerivedStateFromProps;ae=typeof re=="function"||typeof r.getSnapshotBeforeUpdate=="function",w=a.pendingProps!==w,ae||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(w||Z!==h)&&Cu(a,r,l,h),Ya=!1;var J=a.memoizedState;r.state=J,Fl(a,l,r,i),Yl(),Z=a.memoizedState,w||J!==Z||Ya?(typeof re=="function"&&(lc(a,s,re,l),Z=a.memoizedState),(R=Ya||_u(a,s,R,l,J,Z,h))?(ae||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(a.flags|=4194308)):(typeof r.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=Z),r.props=l,r.state=Z,r.context=h,l=R):(typeof r.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{r=a.stateNode,Or(t,a),h=a.memoizedProps,ae=ws(s,h),r.props=ae,re=a.pendingProps,J=r.context,Z=s.contextType,R=$s,typeof Z=="object"&&Z!==null&&(R=ht(Z)),w=s.getDerivedStateFromProps,(Z=typeof w=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(h!==re||J!==R)&&Cu(a,r,l,R),Ya=!1,J=a.memoizedState,r.state=J,Fl(a,l,r,i),Yl();var K=a.memoizedState;h!==re||J!==K||Ya||t!==null&&t.dependencies!==null&&qn(t.dependencies)?(typeof w=="function"&&(lc(a,s,w,l),K=a.memoizedState),(ae=Ya||_u(a,s,ae,l,J,K,R)||t!==null&&t.dependencies!==null&&qn(t.dependencies))?(Z||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(l,K,R),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(l,K,R)),typeof r.componentDidUpdate=="function"&&(a.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof r.componentDidUpdate!="function"||h===t.memoizedProps&&J===t.memoizedState||(a.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&J===t.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=K),r.props=l,r.state=K,r.context=R,l=ae):(typeof r.componentDidUpdate!="function"||h===t.memoizedProps&&J===t.memoizedState||(a.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&J===t.memoizedState||(a.flags|=1024),l=!1)}return r=l,ni(t,a),l=(a.flags&128)!==0,r||l?(r=a.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:r.render(),a.flags|=1,t!==null&&l?(a.child=js(a,t.child,null,i),a.child=js(a,null,s,i)):ft(t,a,s,i),a.memoizedState=r.state,t=a.child):t=ja(t,a,i),t}function Yu(t,a,s,l){return xs(),a.flags|=256,ft(t,a,s,l),a.child}var oc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dc(t){return{baseLanes:t,cachePool:Ad()}}function uc(t,a,s){return t=t!==null?t.childLanes&~s:0,a&&(t|=Ut),t}function Fu(t,a,s){var l=a.pendingProps,i=!1,r=(a.flags&128)!==0,h;if((h=r)||(h=t!==null&&t.memoizedState===null?!1:(at.current&2)!==0),h&&(i=!0,a.flags&=-129),h=(a.flags&32)!==0,a.flags&=-33,t===null){if(Oe){if(i?Xa(a):$a(),(t=Je)?(t=Pm(t,Zt),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Ua!==null?{id:la,overflow:na}:null,retryLane:536870912,hydrationErrors:null},s=jd(t),s.return=a,a.child=s,mt=a,Je=null)):t=null,t===null)throw Ha(a);return Vc(t)?a.lanes=32:a.lanes=536870912,null}var w=l.children;return l=l.fallback,i?($a(),i=a.mode,w=ii({mode:"hidden",children:w},i),l=fs(l,i,s,null),w.return=a,l.return=a,w.sibling=l,a.child=w,l=a.child,l.memoizedState=dc(s),l.childLanes=uc(t,h,s),a.memoizedState=oc,Vl(null,l)):(Xa(a),mc(a,w))}var R=t.memoizedState;if(R!==null&&(w=R.dehydrated,w!==null)){if(r)a.flags&256?(Xa(a),a.flags&=-257,a=hc(t,a,s)):a.memoizedState!==null?($a(),a.child=t.child,a.flags|=128,a=null):($a(),w=l.fallback,i=a.mode,l=ii({mode:"visible",children:l.children},i),w=fs(w,i,s,null),w.flags|=2,l.return=a,w.return=a,l.sibling=w,a.child=l,js(a,t.child,null,s),l=a.child,l.memoizedState=dc(s),l.childLanes=uc(t,h,s),a.memoizedState=oc,a=Vl(null,l));else if(Xa(a),Vc(w)){if(h=w.nextSibling&&w.nextSibling.dataset,h)var Z=h.dgst;h=Z,l=Error(o(419)),l.stack="",l.digest=h,Ol({value:l,source:null,stack:null}),a=hc(t,a,s)}else if(rt||Js(t,a,s,!1),h=(s&t.childLanes)!==0,rt||h){if(h=Ze,h!==null&&(l=wn(h,s),l!==0&&l!==R.retryLane))throw R.retryLane=l,hs(t,l),At(h,t,l),rc;Qc(w)||xi(),a=hc(t,a,s)}else Qc(w)?(a.flags|=192,a.child=t.child,a=null):(t=R.treeContext,Je=Pt(w.nextSibling),mt=a,Oe=!0,Ba=null,Zt=!1,t!==null&&Sd(a,t),a=mc(a,l.children),a.flags|=4096);return a}return i?($a(),w=l.fallback,i=a.mode,R=t.child,Z=R.sibling,l=xa(R,{mode:"hidden",children:l.children}),l.subtreeFlags=R.subtreeFlags&65011712,Z!==null?w=xa(Z,w):(w=fs(w,i,s,null),w.flags|=2),w.return=a,l.return=a,l.sibling=w,a.child=l,Vl(null,l),l=a.child,w=t.child.memoizedState,w===null?w=dc(s):(i=w.cachePool,i!==null?(R=nt._currentValue,i=i.parent!==R?{parent:R,pool:R}:i):i=Ad(),w={baseLanes:w.baseLanes|s,cachePool:i}),l.memoizedState=w,l.childLanes=uc(t,h,s),a.memoizedState=oc,Vl(t.child,l)):(Xa(a),s=t.child,t=s.sibling,s=xa(s,{mode:"visible",children:l.children}),s.return=a,s.sibling=null,t!==null&&(h=a.deletions,h===null?(a.deletions=[t],a.flags|=16):h.push(t)),a.child=s,a.memoizedState=null,s)}function mc(t,a){return a=ii({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function ii(t,a){return t=Rt(22,t,null,a),t.lanes=0,t}function hc(t,a,s){return js(a,t.child,null,s),t=mc(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Gu(t,a,s){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a),Er(t.return,a,s)}function fc(t,a,s,l,i,r){var h=t.memoizedState;h===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:i,treeForkCount:r}:(h.isBackwards=a,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=s,h.tailMode=i,h.treeForkCount=r)}function Xu(t,a,s){var l=a.pendingProps,i=l.revealOrder,r=l.tail;l=l.children;var h=at.current,w=(h&2)!==0;if(w?(h=h&1|2,a.flags|=128):h&=1,W(at,h),ft(t,a,l,s),l=Oe?zl:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gu(t,s,a);else if(t.tag===19)Gu(t,s,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(i){case"forwards":for(s=a.child,i=null;s!==null;)t=s.alternate,t!==null&&Zn(t)===null&&(i=s),s=s.sibling;s=i,s===null?(i=a.child,a.child=null):(i=s.sibling,s.sibling=null),fc(a,!1,i,s,r,l);break;case"backwards":case"unstable_legacy-backwards":for(s=null,i=a.child,a.child=null;i!==null;){if(t=i.alternate,t!==null&&Zn(t)===null){a.child=i;break}t=i.sibling,i.sibling=s,s=i,i=t}fc(a,!0,s,null,r,l);break;case"together":fc(a,!1,null,null,void 0,l);break;default:a.memoizedState=null}return a.child}function ja(t,a,s){if(t!==null&&(a.dependencies=t.dependencies),Za|=a.lanes,(s&a.childLanes)===0)if(t!==null){if(Js(t,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(o(153));if(a.child!==null){for(t=a.child,s=xa(t,t.pendingProps),a.child=s,s.return=a;t.sibling!==null;)t=t.sibling,s=s.sibling=xa(t,t.pendingProps),s.return=a;s.sibling=null}return a.child}function xc(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&qn(t)))}function Ox(t,a,s){switch(a.tag){case 3:_e(a,a.stateNode.containerInfo),qa(a,nt,t.memoizedState.cache),xs();break;case 27:case 5:M(a);break;case 4:_e(a,a.stateNode.containerInfo);break;case 10:qa(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,qr(a),null;break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(Xa(a),a.flags|=128,null):(s&a.child.childLanes)!==0?Fu(t,a,s):(Xa(a),t=ja(t,a,s),t!==null?t.sibling:null);Xa(a);break;case 19:var i=(t.flags&128)!==0;if(l=(s&a.childLanes)!==0,l||(Js(t,a,s,!1),l=(s&a.childLanes)!==0),i){if(l)return Xu(t,a,s);a.flags|=128}if(i=a.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),W(at,at.current),l)break;return null;case 22:return a.lanes=0,Lu(t,a,s,a.pendingProps);case 24:qa(a,nt,t.memoizedState.cache)}return ja(t,a,s)}function $u(t,a,s){if(t!==null)if(t.memoizedProps!==a.pendingProps)rt=!0;else{if(!xc(t,s)&&(a.flags&128)===0)return rt=!1,Ox(t,a,s);rt=(t.flags&131072)!==0}else rt=!1,Oe&&(a.flags&1048576)!==0&&wd(a,zl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var l=a.pendingProps;if(t=vs(a.elementType),a.type=t,typeof t=="function")yr(t)?(l=ws(t,l),a.tag=1,a=qu(null,a,t,l,s)):(a.tag=0,a=cc(null,a,t,l,s));else{if(t!=null){var i=t.$$typeof;if(i===I){a.tag=11,a=Ru(null,a,t,l,s);break e}else if(i===V){a.tag=14,a=zu(null,a,t,l,s);break e}}throw a=H(t)||t,Error(o(306,a,""))}}return a;case 0:return cc(t,a,a.type,a.pendingProps,s);case 1:return l=a.type,i=ws(l,a.pendingProps),qu(t,a,l,i,s);case 3:e:{if(_e(a,a.stateNode.containerInfo),t===null)throw Error(o(387));l=a.pendingProps;var r=a.memoizedState;i=r.element,Or(t,a),Fl(a,l,null,s);var h=a.memoizedState;if(l=h.cache,qa(a,nt,l),l!==r.cache&&Dr(a,[nt],s,!0),Yl(),l=h.element,r.isDehydrated)if(r={element:l,isDehydrated:!1,cache:h.cache},a.updateQueue.baseState=r,a.memoizedState=r,a.flags&256){a=Yu(t,a,l,s);break e}else if(l!==i){i=$t(Error(o(424)),a),Ol(i),a=Yu(t,a,l,s);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Je=Pt(t.firstChild),mt=a,Oe=!0,Ba=null,Zt=!0,s=Ld(a,null,l,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(xs(),l===i){a=ja(t,a,s);break e}ft(t,a,l,s)}a=a.child}return a;case 26:return ni(t,a),t===null?(s=ah(a.type,null,a.pendingProps,null))?a.memoizedState=s:Oe||(s=a.type,t=a.pendingProps,l=Ni(P.current).createElement(s),l[tt]=a,l[St]=t,xt(l,s,t),dt(l),a.stateNode=l):a.memoizedState=ah(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return M(a),t===null&&Oe&&(l=a.stateNode=Im(a.type,a.pendingProps,P.current),mt=a,Zt=!0,i=Je,Ia(a.type)?(Zc=i,Je=Pt(l.firstChild)):Je=i),ft(t,a,a.pendingProps.children,s),ni(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&Oe&&((i=l=Je)&&(l=ug(l,a.type,a.pendingProps,Zt),l!==null?(a.stateNode=l,mt=a,Je=Pt(l.firstChild),Zt=!1,i=!0):i=!1),i||Ha(a)),M(a),i=a.type,r=a.pendingProps,h=t!==null?t.memoizedProps:null,l=r.children,Gc(i,r)?l=null:h!==null&&Gc(i,h)&&(a.flags|=32),a.memoizedState!==null&&(i=Fr(t,a,Cx,null,null,s),on._currentValue=i),ni(t,a),ft(t,a,l,s),a.child;case 6:return t===null&&Oe&&((t=s=Je)&&(s=mg(s,a.pendingProps,Zt),s!==null?(a.stateNode=s,mt=a,Je=null,t=!0):t=!1),t||Ha(a)),null;case 13:return Fu(t,a,s);case 4:return _e(a,a.stateNode.containerInfo),l=a.pendingProps,t===null?a.child=js(a,null,l,s):ft(t,a,l,s),a.child;case 11:return Ru(t,a,a.type,a.pendingProps,s);case 7:return ft(t,a,a.pendingProps,s),a.child;case 8:return ft(t,a,a.pendingProps.children,s),a.child;case 12:return ft(t,a,a.pendingProps.children,s),a.child;case 10:return l=a.pendingProps,qa(a,a.type,l.value),ft(t,a,l.children,s),a.child;case 9:return i=a.type._context,l=a.pendingProps.children,ps(a),i=ht(i),l=l(i),a.flags|=1,ft(t,a,l,s),a.child;case 14:return zu(t,a,a.type,a.pendingProps,s);case 15:return Ou(t,a,a.type,a.pendingProps,s);case 19:return Xu(t,a,s);case 31:return zx(t,a,s);case 22:return Lu(t,a,s,a.pendingProps);case 24:return ps(a),l=ht(nt),t===null?(i=Mr(),i===null&&(i=Ze,r=Ar(),i.pooledCache=r,r.refCount++,r!==null&&(i.pooledCacheLanes|=s),i=r),a.memoizedState={parent:l,cache:i},zr(a),qa(a,nt,i)):((t.lanes&s)!==0&&(Or(t,a),Fl(a,null,null,s),Yl()),i=t.memoizedState,r=a.memoizedState,i.parent!==l?(i={parent:l,cache:l},a.memoizedState=i,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=i),qa(a,nt,l)):(l=r.cache,qa(a,nt,l),l!==i.cache&&Dr(a,[nt],s,!0))),ft(t,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(o(156,a.tag))}function Na(t){t.flags|=4}function gc(t,a,s,l,i){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(i&335544128)===i)if(t.stateNode.complete)t.flags|=8192;else if(bm())t.flags|=8192;else throw ys=Xn,Rr}else t.flags&=-16777217}function Qu(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!rh(a))if(bm())t.flags|=8192;else throw ys=Xn,Rr}function ri(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?jn():536870912,t.lanes|=a,rl|=a)}function Zl(t,a){if(!Oe)switch(t.tailMode){case"hidden":a=t.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Pe(t){var a=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(a)for(var i=t.child;i!==null;)s|=i.lanes|i.childLanes,l|=i.subtreeFlags&65011712,l|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)s|=i.lanes|i.childLanes,l|=i.subtreeFlags,l|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=l,t.childLanes=s,a}function Lx(t,a,s){var l=a.pendingProps;switch(Sr(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(a),null;case 1:return Pe(a),null;case 3:return s=a.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),ba(nt),ee(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Zs(a)?Na(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Cr())),Pe(a),null;case 26:var i=a.type,r=a.memoizedState;return t===null?(Na(a),r!==null?(Pe(a),Qu(a,r)):(Pe(a),gc(a,i,null,l,s))):r?r!==t.memoizedState?(Na(a),Pe(a),Qu(a,r)):(Pe(a),a.flags&=-16777217):(t=t.memoizedProps,t!==l&&Na(a),Pe(a),gc(a,i,t,l,s)),null;case 27:if(oe(a),s=P.current,i=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&Na(a);else{if(!l){if(a.stateNode===null)throw Error(o(166));return Pe(a),null}t=F.current,Zs(a)?_d(a):(t=Im(i,l,s),a.stateNode=t,Na(a))}return Pe(a),null;case 5:if(oe(a),i=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&Na(a);else{if(!l){if(a.stateNode===null)throw Error(o(166));return Pe(a),null}if(r=F.current,Zs(a))_d(a);else{var h=Ni(P.current);switch(r){case 1:r=h.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:r=h.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":r=h.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":r=h.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":r=h.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?r.multiple=!0:l.size&&(r.size=l.size);break;default:r=typeof l.is=="string"?h.createElement(i,{is:l.is}):h.createElement(i)}}r[tt]=a,r[St]=l;e:for(h=a.child;h!==null;){if(h.tag===5||h.tag===6)r.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===a)break e;for(;h.sibling===null;){if(h.return===null||h.return===a)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}a.stateNode=r;e:switch(xt(r,i,l),i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Na(a)}}return Pe(a),gc(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,s),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==l&&Na(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(o(166));if(t=P.current,Zs(a)){if(t=a.stateNode,s=a.memoizedProps,l=null,i=mt,i!==null)switch(i.tag){case 27:case 5:l=i.memoizedProps}t[tt]=a,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Fm(t.nodeValue,s)),t||Ha(a,!0)}else t=Ni(t).createTextNode(l),t[tt]=a,a.stateNode=t}return Pe(a),null;case 31:if(s=a.memoizedState,t===null||t.memoizedState!==null){if(l=Zs(a),s!==null){if(t===null){if(!l)throw Error(o(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[tt]=a}else xs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Pe(a),t=!1}else s=Cr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),t=!0;if(!t)return a.flags&256?(Ot(a),a):(Ot(a),null);if((a.flags&128)!==0)throw Error(o(558))}return Pe(a),null;case 13:if(l=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=Zs(a),l!==null&&l.dehydrated!==null){if(t===null){if(!i)throw Error(o(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));i[tt]=a}else xs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Pe(a),i=!1}else i=Cr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return a.flags&256?(Ot(a),a):(Ot(a),null)}return Ot(a),(a.flags&128)!==0?(a.lanes=s,a):(s=l!==null,t=t!==null&&t.memoizedState!==null,s&&(l=a.child,i=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(i=l.alternate.memoizedState.cachePool.pool),r=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==i&&(l.flags|=2048)),s!==t&&s&&(a.child.flags|=8192),ri(a,a.updateQueue),Pe(a),null);case 4:return ee(),t===null&&Bc(a.stateNode.containerInfo),Pe(a),null;case 10:return ba(a.type),Pe(a),null;case 19:if(L(at),l=a.memoizedState,l===null)return Pe(a),null;if(i=(a.flags&128)!==0,r=l.rendering,r===null)if(i)Zl(l,!1);else{if(et!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(r=Zn(t),r!==null){for(a.flags|=128,Zl(l,!1),t=r.updateQueue,a.updateQueue=t,ri(a,t),a.subtreeFlags=0,t=s,s=a.child;s!==null;)yd(s,t),s=s.sibling;return W(at,at.current&1|2),Oe&&ga(a,l.treeForkCount),a.child}t=t.sibling}l.tail!==null&&gt()>mi&&(a.flags|=128,i=!0,Zl(l,!1),a.lanes=4194304)}else{if(!i)if(t=Zn(r),t!==null){if(a.flags|=128,i=!0,t=t.updateQueue,a.updateQueue=t,ri(a,t),Zl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!r.alternate&&!Oe)return Pe(a),null}else 2*gt()-l.renderingStartTime>mi&&s!==536870912&&(a.flags|=128,i=!0,Zl(l,!1),a.lanes=4194304);l.isBackwards?(r.sibling=a.child,a.child=r):(t=l.last,t!==null?t.sibling=r:a.child=r,l.last=r)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=gt(),t.sibling=null,s=at.current,W(at,i?s&1|2:s&1),Oe&&ga(a,l.treeForkCount),t):(Pe(a),null);case 22:case 23:return Ot(a),Hr(),l=a.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(s&536870912)!==0&&(a.flags&128)===0&&(Pe(a),a.subtreeFlags&6&&(a.flags|=8192)):Pe(a),s=a.updateQueue,s!==null&&ri(a,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==s&&(a.flags|=2048),t!==null&&L(bs),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),ba(nt),Pe(a),null;case 25:return null;case 30:return null}throw Error(o(156,a.tag))}function Ux(t,a){switch(Sr(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return ba(nt),ee(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return oe(a),null;case 31:if(a.memoizedState!==null){if(Ot(a),a.alternate===null)throw Error(o(340));xs()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(Ot(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(o(340));xs()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return L(at),null;case 4:return ee(),null;case 10:return ba(a.type),null;case 22:case 23:return Ot(a),Hr(),t!==null&&L(bs),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return ba(nt),null;case 25:return null;default:return null}}function Vu(t,a){switch(Sr(a),a.tag){case 3:ba(nt),ee();break;case 26:case 27:case 5:oe(a);break;case 4:ee();break;case 31:a.memoizedState!==null&&Ot(a);break;case 13:Ot(a);break;case 19:L(at);break;case 10:ba(a.type);break;case 22:case 23:Ot(a),Hr(),t!==null&&L(bs);break;case 24:ba(nt)}}function Jl(t,a){try{var s=a.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var i=l.next;s=i;do{if((s.tag&t)===t){l=void 0;var r=s.create,h=s.inst;l=r(),h.destroy=l}s=s.next}while(s!==i)}}catch(w){Ge(a,a.return,w)}}function Qa(t,a,s){try{var l=a.updateQueue,i=l!==null?l.lastEffect:null;if(i!==null){var r=i.next;l=r;do{if((l.tag&t)===t){var h=l.inst,w=h.destroy;if(w!==void 0){h.destroy=void 0,i=a;var R=s,Z=w;try{Z()}catch(ae){Ge(i,R,ae)}}}l=l.next}while(l!==r)}}catch(ae){Ge(a,a.return,ae)}}function Zu(t){var a=t.updateQueue;if(a!==null){var s=t.stateNode;try{Bd(a,s)}catch(l){Ge(t,t.return,l)}}}function Ju(t,a,s){s.props=ws(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){Ge(t,a,l)}}function Pl(t,a){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(i){Ge(t,a,i)}}function ia(t,a){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(i){Ge(t,a,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(i){Ge(t,a,i)}else s.current=null}function Pu(t){var a=t.type,s=t.memoizedProps,l=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(i){Ge(t,t.return,i)}}function pc(t,a,s){try{var l=t.stateNode;ng(l,t.type,s,a),l[St]=a}catch(i){Ge(t,t.return,i)}}function Ku(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ia(t.type)||t.tag===4}function bc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ku(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ia(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vc(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(t),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=ha));else if(l!==4&&(l===27&&Ia(t.type)&&(s=t.stateNode,a=null),t=t.child,t!==null))for(vc(t,a,s),t=t.sibling;t!==null;)vc(t,a,s),t=t.sibling}function ci(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?s.insertBefore(t,a):s.appendChild(t);else if(l!==4&&(l===27&&Ia(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(ci(t,a,s),t=t.sibling;t!==null;)ci(t,a,s),t=t.sibling}function Wu(t){var a=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,i=a.attributes;i.length;)a.removeAttributeNode(i[0]);xt(a,l,s),a[tt]=t,a[St]=s}catch(r){Ge(t,t.return,r)}}var wa=!1,ct=!1,yc=!1,Iu=typeof WeakSet=="function"?WeakSet:Set,ut=null;function Bx(t,a){if(t=t.containerInfo,Yc=Di,t=ud(t),hr(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var i=l.anchorOffset,r=l.focusNode;l=l.focusOffset;try{s.nodeType,r.nodeType}catch{s=null;break e}var h=0,w=-1,R=-1,Z=0,ae=0,re=t,J=null;t:for(;;){for(var K;re!==s||i!==0&&re.nodeType!==3||(w=h+i),re!==r||l!==0&&re.nodeType!==3||(R=h+l),re.nodeType===3&&(h+=re.nodeValue.length),(K=re.firstChild)!==null;)J=re,re=K;for(;;){if(re===t)break t;if(J===s&&++Z===i&&(w=h),J===r&&++ae===l&&(R=h),(K=re.nextSibling)!==null)break;re=J,J=re.parentNode}re=K}s=w===-1||R===-1?null:{start:w,end:R}}else s=null}s=s||{start:0,end:0}}else s=null;for(Fc={focusedElem:t,selectionRange:s},Di=!1,ut=a;ut!==null;)if(a=ut,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,ut=t;else for(;ut!==null;){switch(a=ut,r=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(s=0;s<t.length;s++)i=t[s],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&r!==null){t=void 0,s=a,i=r.memoizedProps,r=r.memoizedState,l=s.stateNode;try{var ve=ws(s.type,i);t=l.getSnapshotBeforeUpdate(ve,r),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ne){Ge(s,s.return,Ne)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,s=t.nodeType,s===9)$c(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":$c(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=a.sibling,t!==null){t.return=a.return,ut=t;break}ut=a.return}}function em(t,a,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:_a(t,s),l&4&&Jl(5,s);break;case 1:if(_a(t,s),l&4)if(t=s.stateNode,a===null)try{t.componentDidMount()}catch(h){Ge(s,s.return,h)}else{var i=ws(s.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(i,a,t.__reactInternalSnapshotBeforeUpdate)}catch(h){Ge(s,s.return,h)}}l&64&&Zu(s),l&512&&Pl(s,s.return);break;case 3:if(_a(t,s),l&64&&(t=s.updateQueue,t!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{Bd(t,a)}catch(h){Ge(s,s.return,h)}}break;case 27:a===null&&l&4&&Wu(s);case 26:case 5:_a(t,s),a===null&&l&4&&Pu(s),l&512&&Pl(s,s.return);break;case 12:_a(t,s);break;case 31:_a(t,s),l&4&&sm(t,s);break;case 13:_a(t,s),l&4&&lm(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=Vx.bind(null,s),hg(t,s))));break;case 22:if(l=s.memoizedState!==null||wa,!l){a=a!==null&&a.memoizedState!==null||ct,i=wa;var r=ct;wa=l,(ct=a)&&!r?Ca(t,s,(s.subtreeFlags&8772)!==0):_a(t,s),wa=i,ct=r}break;case 30:break;default:_a(t,s)}}function tm(t){var a=t.alternate;a!==null&&(t.alternate=null,tm(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Pi(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ke=null,Ct=!1;function Sa(t,a,s){for(s=s.child;s!==null;)am(t,a,s),s=s.sibling}function am(t,a,s){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(sa,s)}catch{}switch(s.tag){case 26:ct||ia(s,a),Sa(t,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:ct||ia(s,a);var l=Ke,i=Ct;Ia(s.type)&&(Ke=s.stateNode,Ct=!1),Sa(t,a,s),nn(s.stateNode),Ke=l,Ct=i;break;case 5:ct||ia(s,a);case 6:if(l=Ke,i=Ct,Ke=null,Sa(t,a,s),Ke=l,Ct=i,Ke!==null)if(Ct)try{(Ke.nodeType===9?Ke.body:Ke.nodeName==="HTML"?Ke.ownerDocument.body:Ke).removeChild(s.stateNode)}catch(r){Ge(s,a,r)}else try{Ke.removeChild(s.stateNode)}catch(r){Ge(s,a,r)}break;case 18:Ke!==null&&(Ct?(t=Ke,Zm(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),xl(t)):Zm(Ke,s.stateNode));break;case 4:l=Ke,i=Ct,Ke=s.stateNode.containerInfo,Ct=!0,Sa(t,a,s),Ke=l,Ct=i;break;case 0:case 11:case 14:case 15:Qa(2,s,a),ct||Qa(4,s,a),Sa(t,a,s);break;case 1:ct||(ia(s,a),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Ju(s,a,l)),Sa(t,a,s);break;case 21:Sa(t,a,s);break;case 22:ct=(l=ct)||s.memoizedState!==null,Sa(t,a,s),ct=l;break;default:Sa(t,a,s)}}function sm(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{xl(t)}catch(s){Ge(a,a.return,s)}}}function lm(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{xl(t)}catch(s){Ge(a,a.return,s)}}function Hx(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new Iu),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new Iu),a;default:throw Error(o(435,t.tag))}}function oi(t,a){var s=Hx(t);a.forEach(function(l){if(!s.has(l)){s.add(l);var i=Zx.bind(null,t,l);l.then(i,i)}})}function kt(t,a){var s=a.deletions;if(s!==null)for(var l=0;l<s.length;l++){var i=s[l],r=t,h=a,w=h;e:for(;w!==null;){switch(w.tag){case 27:if(Ia(w.type)){Ke=w.stateNode,Ct=!1;break e}break;case 5:Ke=w.stateNode,Ct=!1;break e;case 3:case 4:Ke=w.stateNode.containerInfo,Ct=!0;break e}w=w.return}if(Ke===null)throw Error(o(160));am(r,h,i),Ke=null,Ct=!1,r=i.alternate,r!==null&&(r.return=null),i.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)nm(a,t),a=a.sibling}var It=null;function nm(t,a){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:kt(a,t),Et(t),l&4&&(Qa(3,t,t.return),Jl(3,t),Qa(5,t,t.return));break;case 1:kt(a,t),Et(t),l&512&&(ct||s===null||ia(s,s.return)),l&64&&wa&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var i=It;if(kt(a,t),Et(t),l&512&&(ct||s===null||ia(s,s.return)),l&4){var r=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){e:{l=t.type,s=t.memoizedProps,i=i.ownerDocument||i;t:switch(l){case"title":r=i.getElementsByTagName("title")[0],(!r||r[wl]||r[tt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=i.createElement(l),i.head.insertBefore(r,i.querySelector("head > title"))),xt(r,l,s),r[tt]=t,dt(r),l=r;break e;case"link":var h=nh("link","href",i).get(l+(s.href||""));if(h){for(var w=0;w<h.length;w++)if(r=h[w],r.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&r.getAttribute("rel")===(s.rel==null?null:s.rel)&&r.getAttribute("title")===(s.title==null?null:s.title)&&r.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){h.splice(w,1);break t}}r=i.createElement(l),xt(r,l,s),i.head.appendChild(r);break;case"meta":if(h=nh("meta","content",i).get(l+(s.content||""))){for(w=0;w<h.length;w++)if(r=h[w],r.getAttribute("content")===(s.content==null?null:""+s.content)&&r.getAttribute("name")===(s.name==null?null:s.name)&&r.getAttribute("property")===(s.property==null?null:s.property)&&r.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&r.getAttribute("charset")===(s.charSet==null?null:s.charSet)){h.splice(w,1);break t}}r=i.createElement(l),xt(r,l,s),i.head.appendChild(r);break;default:throw Error(o(468,l))}r[tt]=t,dt(r),l=r}t.stateNode=l}else ih(i,t.type,t.stateNode);else t.stateNode=lh(i,l,t.memoizedProps);else r!==l?(r===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):r.count--,l===null?ih(i,t.type,t.stateNode):lh(i,l,t.memoizedProps)):l===null&&t.stateNode!==null&&pc(t,t.memoizedProps,s.memoizedProps)}break;case 27:kt(a,t),Et(t),l&512&&(ct||s===null||ia(s,s.return)),s!==null&&l&4&&pc(t,t.memoizedProps,s.memoizedProps);break;case 5:if(kt(a,t),Et(t),l&512&&(ct||s===null||ia(s,s.return)),t.flags&32){i=t.stateNode;try{Bs(i,"")}catch(ve){Ge(t,t.return,ve)}}l&4&&t.stateNode!=null&&(i=t.memoizedProps,pc(t,i,s!==null?s.memoizedProps:i)),l&1024&&(yc=!0);break;case 6:if(kt(a,t),Et(t),l&4){if(t.stateNode===null)throw Error(o(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(ve){Ge(t,t.return,ve)}}break;case 3:if(_i=null,i=It,It=wi(a.containerInfo),kt(a,t),It=i,Et(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{xl(a.containerInfo)}catch(ve){Ge(t,t.return,ve)}yc&&(yc=!1,im(t));break;case 4:l=It,It=wi(t.stateNode.containerInfo),kt(a,t),Et(t),It=l;break;case 12:kt(a,t),Et(t);break;case 31:kt(a,t),Et(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,oi(t,l)));break;case 13:kt(a,t),Et(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(ui=gt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,oi(t,l)));break;case 22:i=t.memoizedState!==null;var R=s!==null&&s.memoizedState!==null,Z=wa,ae=ct;if(wa=Z||i,ct=ae||R,kt(a,t),ct=ae,wa=Z,Et(t),l&8192)e:for(a=t.stateNode,a._visibility=i?a._visibility&-2:a._visibility|1,i&&(s===null||R||wa||ct||Ss(t)),s=null,a=t;;){if(a.tag===5||a.tag===26){if(s===null){R=s=a;try{if(r=R.stateNode,i)h=r.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{w=R.stateNode;var re=R.memoizedProps.style,J=re!=null&&re.hasOwnProperty("display")?re.display:null;w.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ve){Ge(R,R.return,ve)}}}else if(a.tag===6){if(s===null){R=a;try{R.stateNode.nodeValue=i?"":R.memoizedProps}catch(ve){Ge(R,R.return,ve)}}}else if(a.tag===18){if(s===null){R=a;try{var K=R.stateNode;i?Jm(K,!0):Jm(R.stateNode,!1)}catch(ve){Ge(R,R.return,ve)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,oi(t,s))));break;case 19:kt(a,t),Et(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,oi(t,l)));break;case 30:break;case 21:break;default:kt(a,t),Et(t)}}function Et(t){var a=t.flags;if(a&2){try{for(var s,l=t.return;l!==null;){if(Ku(l)){s=l;break}l=l.return}if(s==null)throw Error(o(160));switch(s.tag){case 27:var i=s.stateNode,r=bc(t);ci(t,r,i);break;case 5:var h=s.stateNode;s.flags&32&&(Bs(h,""),s.flags&=-33);var w=bc(t);ci(t,w,h);break;case 3:case 4:var R=s.stateNode.containerInfo,Z=bc(t);vc(t,Z,R);break;default:throw Error(o(161))}}catch(ae){Ge(t,t.return,ae)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function im(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;im(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function _a(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)em(t,a.alternate,a),a=a.sibling}function Ss(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:Qa(4,a,a.return),Ss(a);break;case 1:ia(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&Ju(a,a.return,s),Ss(a);break;case 27:nn(a.stateNode);case 26:case 5:ia(a,a.return),Ss(a);break;case 22:a.memoizedState===null&&Ss(a);break;case 30:Ss(a);break;default:Ss(a)}t=t.sibling}}function Ca(t,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,i=t,r=a,h=r.flags;switch(r.tag){case 0:case 11:case 15:Ca(i,r,s),Jl(4,r);break;case 1:if(Ca(i,r,s),l=r,i=l.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(Z){Ge(l,l.return,Z)}if(l=r,i=l.updateQueue,i!==null){var w=l.stateNode;try{var R=i.shared.hiddenCallbacks;if(R!==null)for(i.shared.hiddenCallbacks=null,i=0;i<R.length;i++)Ud(R[i],w)}catch(Z){Ge(l,l.return,Z)}}s&&h&64&&Zu(r),Pl(r,r.return);break;case 27:Wu(r);case 26:case 5:Ca(i,r,s),s&&l===null&&h&4&&Pu(r),Pl(r,r.return);break;case 12:Ca(i,r,s);break;case 31:Ca(i,r,s),s&&h&4&&sm(i,r);break;case 13:Ca(i,r,s),s&&h&4&&lm(i,r);break;case 22:r.memoizedState===null&&Ca(i,r,s),Pl(r,r.return);break;case 30:break;default:Ca(i,r,s)}a=a.sibling}}function jc(t,a){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&Ll(s))}function Nc(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Ll(t))}function ea(t,a,s,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)rm(t,a,s,l),a=a.sibling}function rm(t,a,s,l){var i=a.flags;switch(a.tag){case 0:case 11:case 15:ea(t,a,s,l),i&2048&&Jl(9,a);break;case 1:ea(t,a,s,l);break;case 3:ea(t,a,s,l),i&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Ll(t)));break;case 12:if(i&2048){ea(t,a,s,l),t=a.stateNode;try{var r=a.memoizedProps,h=r.id,w=r.onPostCommit;typeof w=="function"&&w(h,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(R){Ge(a,a.return,R)}}else ea(t,a,s,l);break;case 31:ea(t,a,s,l);break;case 13:ea(t,a,s,l);break;case 23:break;case 22:r=a.stateNode,h=a.alternate,a.memoizedState!==null?r._visibility&2?ea(t,a,s,l):Kl(t,a):r._visibility&2?ea(t,a,s,l):(r._visibility|=2,ll(t,a,s,l,(a.subtreeFlags&10256)!==0||!1)),i&2048&&jc(h,a);break;case 24:ea(t,a,s,l),i&2048&&Nc(a.alternate,a);break;default:ea(t,a,s,l)}}function ll(t,a,s,l,i){for(i=i&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var r=t,h=a,w=s,R=l,Z=h.flags;switch(h.tag){case 0:case 11:case 15:ll(r,h,w,R,i),Jl(8,h);break;case 23:break;case 22:var ae=h.stateNode;h.memoizedState!==null?ae._visibility&2?ll(r,h,w,R,i):Kl(r,h):(ae._visibility|=2,ll(r,h,w,R,i)),i&&Z&2048&&jc(h.alternate,h);break;case 24:ll(r,h,w,R,i),i&&Z&2048&&Nc(h.alternate,h);break;default:ll(r,h,w,R,i)}a=a.sibling}}function Kl(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=t,l=a,i=l.flags;switch(l.tag){case 22:Kl(s,l),i&2048&&jc(l.alternate,l);break;case 24:Kl(s,l),i&2048&&Nc(l.alternate,l);break;default:Kl(s,l)}a=a.sibling}}var Wl=8192;function nl(t,a,s){if(t.subtreeFlags&Wl)for(t=t.child;t!==null;)cm(t,a,s),t=t.sibling}function cm(t,a,s){switch(t.tag){case 26:nl(t,a,s),t.flags&Wl&&t.memoizedState!==null&&_g(s,It,t.memoizedState,t.memoizedProps);break;case 5:nl(t,a,s);break;case 3:case 4:var l=It;It=wi(t.stateNode.containerInfo),nl(t,a,s),It=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Wl,Wl=16777216,nl(t,a,s),Wl=l):nl(t,a,s));break;default:nl(t,a,s)}}function om(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Il(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];ut=l,um(l,t)}om(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)dm(t),t=t.sibling}function dm(t){switch(t.tag){case 0:case 11:case 15:Il(t),t.flags&2048&&Qa(9,t,t.return);break;case 3:Il(t);break;case 12:Il(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,di(t)):Il(t);break;default:Il(t)}}function di(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];ut=l,um(l,t)}om(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:Qa(8,a,a.return),di(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,di(a));break;default:di(a)}t=t.sibling}}function um(t,a){for(;ut!==null;){var s=ut;switch(s.tag){case 0:case 11:case 15:Qa(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ll(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,ut=l;else e:for(s=t;ut!==null;){l=ut;var i=l.sibling,r=l.return;if(tm(l),l===s){ut=null;break e}if(i!==null){i.return=r,ut=i;break e}ut=r}}}var qx={getCacheForType:function(t){var a=ht(nt),s=a.data.get(t);return s===void 0&&(s=t(),a.data.set(t,s)),s},cacheSignal:function(){return ht(nt).controller.signal}},Yx=typeof WeakMap=="function"?WeakMap:Map,He=0,Ze=null,Te=null,Re=0,Fe=0,Lt=null,Va=!1,il=!1,wc=!1,ka=0,et=0,Za=0,_s=0,Sc=0,Ut=0,rl=0,en=null,Dt=null,_c=!1,ui=0,mm=0,mi=1/0,hi=null,Ja=null,ot=0,Pa=null,cl=null,Ea=0,Cc=0,kc=null,hm=null,tn=0,Ec=null;function Bt(){return(He&2)!==0&&Re!==0?Re&-Re:S.T!==null?zc():De()}function fm(){if(Ut===0)if((Re&536870912)===0||Oe){var t=Ds;Ds<<=1,(Ds&3932160)===0&&(Ds=262144),Ut=t}else Ut=536870912;return t=zt.current,t!==null&&(t.flags|=32),Ut}function At(t,a,s){(t===Ze&&(Fe===2||Fe===9)||t.cancelPendingCommit!==null)&&(ol(t,0),Ka(t,Re,Ut,!1)),cs(t,s),((He&2)===0||t!==Ze)&&(t===Ze&&((He&2)===0&&(_s|=s),et===4&&Ka(t,Re,Ut,!1)),ra(t))}function xm(t,a,s){if((He&6)!==0)throw Error(o(327));var l=!s&&(a&127)===0&&(a&t.expiredLanes)===0||ua(t,a),i=l?Xx(t,a):Ac(t,a,!0),r=l;do{if(i===0){il&&!l&&Ka(t,a,0,!1);break}else{if(s=t.current.alternate,r&&!Fx(s)){i=Ac(t,a,!1),r=!1;continue}if(i===2){if(r=a,t.errorRecoveryDisabledLanes&r)var h=0;else h=t.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){a=h;e:{var w=t;i=en;var R=w.current.memoizedState.isDehydrated;if(R&&(ol(w,h).flags|=256),h=Ac(w,h,!1),h!==2){if(wc&&!R){w.errorRecoveryDisabledLanes|=r,_s|=r,i=4;break e}r=Dt,Dt=i,r!==null&&(Dt===null?Dt=r:Dt.push.apply(Dt,r))}i=h}if(r=!1,i!==2)continue}}if(i===1){ol(t,0),Ka(t,a,0,!0);break}e:{switch(l=t,r=i,r){case 0:case 1:throw Error(o(345));case 4:if((a&4194048)!==a)break;case 6:Ka(l,a,Ut,!Va);break e;case 2:Dt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((a&62914560)===a&&(i=ui+300-gt(),10<i)){if(Ka(l,a,Ut,!Va),Ts(l,0,!0)!==0)break e;Ea=a,l.timeoutHandle=Qm(gm.bind(null,l,s,Dt,hi,_c,a,Ut,_s,rl,Va,r,"Throttled",-0,0),i);break e}gm(l,s,Dt,hi,_c,a,Ut,_s,rl,Va,r,null,-0,0)}}break}while(!0);ra(t)}function gm(t,a,s,l,i,r,h,w,R,Z,ae,re,J,K){if(t.timeoutHandle=-1,re=a.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ha},cm(a,r,re);var ve=(r&62914560)===r?ui-gt():(r&4194048)===r?mm-gt():0;if(ve=Cg(re,ve),ve!==null){Ea=r,t.cancelPendingCommit=ve(Sm.bind(null,t,a,r,s,l,i,h,w,R,ae,re,null,J,K)),Ka(t,r,h,!Z);return}}Sm(t,a,r,s,l,i,h,w,R)}function Fx(t){for(var a=t;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var i=s[l],r=i.getSnapshot;i=i.value;try{if(!Mt(r(),i))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ka(t,a,s,l){a&=~Sc,a&=~_s,t.suspendedLanes|=a,t.pingedLanes&=~a,l&&(t.warmLanes|=a),l=t.expirationTimes;for(var i=a;0<i;){var r=31-pt(i),h=1<<r;l[r]=-1,i&=~h}s!==0&&Nn(t,s,a)}function fi(){return(He&6)===0?(an(0),!1):!0}function Dc(){if(Te!==null){if(Fe===0)var t=Te.return;else t=Te,pa=gs=null,$r(t),Is=null,Bl=0,t=Te;for(;t!==null;)Vu(t.alternate,t),t=t.return;Te=null}}function ol(t,a){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,cg(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Ea=0,Dc(),Ze=t,Te=s=xa(t.current,null),Re=a,Fe=0,Lt=null,Va=!1,il=ua(t,a),wc=!1,rl=Ut=Sc=_s=Za=et=0,Dt=en=null,_c=!1,(a&8)!==0&&(a|=a&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=a;0<l;){var i=31-pt(l),r=1<<i;a|=t[i],l&=~r}return ka=a,On(),s}function pm(t,a){ke=null,S.H=Ql,a===Ws||a===Gn?(a=Rd(),Fe=3):a===Rr?(a=Rd(),Fe=4):Fe=a===rc?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Lt=a,Te===null&&(et=1,si(t,$t(a,t.current)))}function bm(){var t=zt.current;return t===null?!0:(Re&4194048)===Re?Jt===null:(Re&62914560)===Re||(Re&536870912)!==0?t===Jt:!1}function vm(){var t=S.H;return S.H=Ql,t===null?Ql:t}function ym(){var t=S.A;return S.A=qx,t}function xi(){et=4,Va||(Re&4194048)!==Re&&zt.current!==null||(il=!0),(Za&134217727)===0&&(_s&134217727)===0||Ze===null||Ka(Ze,Re,Ut,!1)}function Ac(t,a,s){var l=He;He|=2;var i=vm(),r=ym();(Ze!==t||Re!==a)&&(hi=null,ol(t,a)),a=!1;var h=et;e:do try{if(Fe!==0&&Te!==null){var w=Te,R=Lt;switch(Fe){case 8:Dc(),h=6;break e;case 3:case 2:case 9:case 6:zt.current===null&&(a=!0);var Z=Fe;if(Fe=0,Lt=null,dl(t,w,R,Z),s&&il){h=0;break e}break;default:Z=Fe,Fe=0,Lt=null,dl(t,w,R,Z)}}Gx(),h=et;break}catch(ae){pm(t,ae)}while(!0);return a&&t.shellSuspendCounter++,pa=gs=null,He=l,S.H=i,S.A=r,Te===null&&(Ze=null,Re=0,On()),h}function Gx(){for(;Te!==null;)jm(Te)}function Xx(t,a){var s=He;He|=2;var l=vm(),i=ym();Ze!==t||Re!==a?(hi=null,mi=gt()+500,ol(t,a)):il=ua(t,a);e:do try{if(Fe!==0&&Te!==null){a=Te;var r=Lt;t:switch(Fe){case 1:Fe=0,Lt=null,dl(t,a,r,1);break;case 2:case 9:if(Td(r)){Fe=0,Lt=null,Nm(a);break}a=function(){Fe!==2&&Fe!==9||Ze!==t||(Fe=7),ra(t)},r.then(a,a);break e;case 3:Fe=7;break e;case 4:Fe=5;break e;case 7:Td(r)?(Fe=0,Lt=null,Nm(a)):(Fe=0,Lt=null,dl(t,a,r,7));break;case 5:var h=null;switch(Te.tag){case 26:h=Te.memoizedState;case 5:case 27:var w=Te;if(h?rh(h):w.stateNode.complete){Fe=0,Lt=null;var R=w.sibling;if(R!==null)Te=R;else{var Z=w.return;Z!==null?(Te=Z,gi(Z)):Te=null}break t}}Fe=0,Lt=null,dl(t,a,r,5);break;case 6:Fe=0,Lt=null,dl(t,a,r,6);break;case 8:Dc(),et=6;break e;default:throw Error(o(462))}}$x();break}catch(ae){pm(t,ae)}while(!0);return pa=gs=null,S.H=l,S.A=i,He=s,Te!==null?0:(Ze=null,Re=0,On(),et)}function $x(){for(;Te!==null&&!aa();)jm(Te)}function jm(t){var a=$u(t.alternate,t,ka);t.memoizedProps=t.pendingProps,a===null?gi(t):Te=a}function Nm(t){var a=t,s=a.alternate;switch(a.tag){case 15:case 0:a=Hu(s,a,a.pendingProps,a.type,void 0,Re);break;case 11:a=Hu(s,a,a.pendingProps,a.type.render,a.ref,Re);break;case 5:$r(a);default:Vu(s,a),a=Te=yd(a,ka),a=$u(s,a,ka)}t.memoizedProps=t.pendingProps,a===null?gi(t):Te=a}function dl(t,a,s,l){pa=gs=null,$r(a),Is=null,Bl=0;var i=a.return;try{if(Rx(t,i,a,s,Re)){et=1,si(t,$t(s,t.current)),Te=null;return}}catch(r){if(i!==null)throw Te=i,r;et=1,si(t,$t(s,t.current)),Te=null;return}a.flags&32768?(Oe||l===1?t=!0:il||(Re&536870912)!==0?t=!1:(Va=t=!0,(l===2||l===9||l===3||l===6)&&(l=zt.current,l!==null&&l.tag===13&&(l.flags|=16384))),wm(a,t)):gi(a)}function gi(t){var a=t;do{if((a.flags&32768)!==0){wm(a,Va);return}t=a.return;var s=Lx(a.alternate,a,ka);if(s!==null){Te=s;return}if(a=a.sibling,a!==null){Te=a;return}Te=a=t}while(a!==null);et===0&&(et=5)}function wm(t,a){do{var s=Ux(t.alternate,t);if(s!==null){s.flags&=32767,Te=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(t=t.sibling,t!==null)){Te=t;return}Te=t=s}while(t!==null);et=6,Te=null}function Sm(t,a,s,l,i,r,h,w,R){t.cancelPendingCommit=null;do pi();while(ot!==0);if((He&6)!==0)throw Error(o(327));if(a!==null){if(a===t.current)throw Error(o(177));if(r=a.lanes|a.childLanes,r|=br,Zi(t,s,r,h,w,R),t===Ze&&(Te=Ze=null,Re=0),cl=a,Pa=t,Ea=s,Cc=r,kc=i,hm=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Jx(Ra,function(){return Dm(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=S.T,S.T=null,i=E.p,E.p=2,h=He,He|=4;try{Bx(t,a,s)}finally{He=h,E.p=i,S.T=l}}ot=1,_m(),Cm(),km()}}function _m(){if(ot===1){ot=0;var t=Pa,a=cl,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=S.T,S.T=null;var l=E.p;E.p=2;var i=He;He|=4;try{nm(a,t);var r=Fc,h=ud(t.containerInfo),w=r.focusedElem,R=r.selectionRange;if(h!==w&&w&&w.ownerDocument&&dd(w.ownerDocument.documentElement,w)){if(R!==null&&hr(w)){var Z=R.start,ae=R.end;if(ae===void 0&&(ae=Z),"selectionStart"in w)w.selectionStart=Z,w.selectionEnd=Math.min(ae,w.value.length);else{var re=w.ownerDocument||document,J=re&&re.defaultView||window;if(J.getSelection){var K=J.getSelection(),ve=w.textContent.length,Ne=Math.min(R.start,ve),Qe=R.end===void 0?Ne:Math.min(R.end,ve);!K.extend&&Ne>Qe&&(h=Qe,Qe=Ne,Ne=h);var G=od(w,Ne),B=od(w,Qe);if(G&&B&&(K.rangeCount!==1||K.anchorNode!==G.node||K.anchorOffset!==G.offset||K.focusNode!==B.node||K.focusOffset!==B.offset)){var Q=re.createRange();Q.setStart(G.node,G.offset),K.removeAllRanges(),Ne>Qe?(K.addRange(Q),K.extend(B.node,B.offset)):(Q.setEnd(B.node,B.offset),K.addRange(Q))}}}}for(re=[],K=w;K=K.parentNode;)K.nodeType===1&&re.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<re.length;w++){var ie=re[w];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Di=!!Yc,Fc=Yc=null}finally{He=i,E.p=l,S.T=s}}t.current=a,ot=2}}function Cm(){if(ot===2){ot=0;var t=Pa,a=cl,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=S.T,S.T=null;var l=E.p;E.p=2;var i=He;He|=4;try{em(t,a.alternate,a)}finally{He=i,E.p=l,S.T=s}}ot=3}}function km(){if(ot===4||ot===3){ot=0,is();var t=Pa,a=cl,s=Ea,l=hm;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?ot=5:(ot=0,cl=Pa=null,Em(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(Ja=null),ge(s),a=a.stateNode,vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(sa,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=S.T,i=E.p,E.p=2,S.T=null;try{for(var r=t.onRecoverableError,h=0;h<l.length;h++){var w=l[h];r(w.value,{componentStack:w.stack})}}finally{S.T=a,E.p=i}}(Ea&3)!==0&&pi(),ra(t),i=t.pendingLanes,(s&261930)!==0&&(i&42)!==0?t===Ec?tn++:(tn=0,Ec=t):tn=0,an(0)}}function Em(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,Ll(a)))}function pi(){return _m(),Cm(),km(),Dm()}function Dm(){if(ot!==5)return!1;var t=Pa,a=Cc;Cc=0;var s=ge(Ea),l=S.T,i=E.p;try{E.p=32>s?32:s,S.T=null,s=kc,kc=null;var r=Pa,h=Ea;if(ot=0,cl=Pa=null,Ea=0,(He&6)!==0)throw Error(o(331));var w=He;if(He|=4,dm(r.current),rm(r,r.current,h,s),He=w,an(0,!1),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(sa,r)}catch{}return!0}finally{E.p=i,S.T=l,Em(t,a)}}function Am(t,a,s){a=$t(s,a),a=ic(t.stateNode,a,2),t=Ga(t,a,2),t!==null&&(cs(t,2),ra(t))}function Ge(t,a,s){if(t.tag===3)Am(t,t,s);else for(;a!==null;){if(a.tag===3){Am(a,t,s);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ja===null||!Ja.has(l))){t=$t(s,t),s=Tu(2),l=Ga(a,s,2),l!==null&&(Mu(s,l,a,t),cs(l,2),ra(l));break}}a=a.return}}function Tc(t,a,s){var l=t.pingCache;if(l===null){l=t.pingCache=new Yx;var i=new Set;l.set(a,i)}else i=l.get(a),i===void 0&&(i=new Set,l.set(a,i));i.has(s)||(wc=!0,i.add(s),t=Qx.bind(null,t,a,s),a.then(t,t))}function Qx(t,a,s){var l=t.pingCache;l!==null&&l.delete(a),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,Ze===t&&(Re&s)===s&&(et===4||et===3&&(Re&62914560)===Re&&300>gt()-ui?(He&2)===0&&ol(t,0):Sc|=s,rl===Re&&(rl=0)),ra(t)}function Tm(t,a){a===0&&(a=jn()),t=hs(t,a),t!==null&&(cs(t,a),ra(t))}function Vx(t){var a=t.memoizedState,s=0;a!==null&&(s=a.retryLane),Tm(t,s)}function Zx(t,a){var s=0;switch(t.tag){case 31:case 13:var l=t.stateNode,i=t.memoizedState;i!==null&&(s=i.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(a),Tm(t,s)}function Jx(t,a){return lt(t,a)}var bi=null,ul=null,Mc=!1,vi=!1,Rc=!1,Wa=0;function ra(t){t!==ul&&t.next===null&&(ul===null?bi=ul=t:ul=ul.next=t),vi=!0,Mc||(Mc=!0,Kx())}function an(t,a){if(!Rc&&vi){Rc=!0;do for(var s=!1,l=bi;l!==null;){if(t!==0){var i=l.pendingLanes;if(i===0)var r=0;else{var h=l.suspendedLanes,w=l.pingedLanes;r=(1<<31-pt(42|t)+1)-1,r&=i&~(h&~w),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(s=!0,Om(l,r))}else r=Re,r=Ts(l,l===Ze?r:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(r&3)===0||ua(l,r)||(s=!0,Om(l,r));l=l.next}while(s);Rc=!1}}function Px(){Mm()}function Mm(){vi=Mc=!1;var t=0;Wa!==0&&rg()&&(t=Wa);for(var a=gt(),s=null,l=bi;l!==null;){var i=l.next,r=Rm(l,a);r===0?(l.next=null,s===null?bi=i:s.next=i,i===null&&(ul=s)):(s=l,(t!==0||(r&3)!==0)&&(vi=!0)),l=i}ot!==0&&ot!==5||an(t),Wa!==0&&(Wa=0)}function Rm(t,a){for(var s=t.suspendedLanes,l=t.pingedLanes,i=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var h=31-pt(r),w=1<<h,R=i[h];R===-1?((w&s)===0||(w&l)!==0)&&(i[h]=Vi(w,a)):R<=a&&(t.expiredLanes|=w),r&=~w}if(a=Ze,s=Re,s=Ts(t,t===a?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===a&&(Fe===2||Fe===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&jt(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||ua(t,s)){if(a=s&-s,a===t.callbackPriority)return a;switch(l!==null&&jt(l),ge(s)){case 2:case 8:s=yn;break;case 32:s=Ra;break;case 268435456:s=yl;break;default:s=Ra}return l=zm.bind(null,t),s=lt(s,l),t.callbackPriority=a,t.callbackNode=s,a}return l!==null&&l!==null&&jt(l),t.callbackPriority=2,t.callbackNode=null,2}function zm(t,a){if(ot!==0&&ot!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(pi()&&t.callbackNode!==s)return null;var l=Re;return l=Ts(t,t===Ze?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(xm(t,l,a),Rm(t,gt()),t.callbackNode!=null&&t.callbackNode===s?zm.bind(null,t):null)}function Om(t,a){if(pi())return null;xm(t,a,!0)}function Kx(){og(function(){(He&6)!==0?lt(Yt,Px):Mm()})}function zc(){if(Wa===0){var t=Ps;t===0&&(t=Es,Es<<=1,(Es&261888)===0&&(Es=256)),Wa=t}return Wa}function Lm(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:kn(""+t)}function Um(t,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,t.id&&s.setAttribute("form",t.id),a.parentNode.insertBefore(s,a),t=new FormData(t),s.parentNode.removeChild(s),t}function Wx(t,a,s,l,i){if(a==="submit"&&s&&s.stateNode===i){var r=Lm((i[St]||null).action),h=l.submitter;h&&(a=(a=h[St]||null)?Lm(a.formAction):h.getAttribute("formAction"),a!==null&&(r=a,h=null));var w=new Tn("action","action",null,l,i);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Wa!==0){var R=h?Um(i,h):new FormData(i);ec(s,{pending:!0,data:R,method:i.method,action:r},null,R)}}else typeof r=="function"&&(w.preventDefault(),R=h?Um(i,h):new FormData(i),ec(s,{pending:!0,data:R,method:i.method,action:r},r,R))},currentTarget:i}]})}}for(var Oc=0;Oc<pr.length;Oc++){var Lc=pr[Oc],Ix=Lc.toLowerCase(),eg=Lc[0].toUpperCase()+Lc.slice(1);Wt(Ix,"on"+eg)}Wt(fd,"onAnimationEnd"),Wt(xd,"onAnimationIteration"),Wt(gd,"onAnimationStart"),Wt("dblclick","onDoubleClick"),Wt("focusin","onFocus"),Wt("focusout","onBlur"),Wt(gx,"onTransitionRun"),Wt(px,"onTransitionStart"),Wt(bx,"onTransitionCancel"),Wt(pd,"onTransitionEnd"),Ls("onMouseEnter",["mouseout","mouseover"]),Ls("onMouseLeave",["mouseout","mouseover"]),Ls("onPointerEnter",["pointerout","pointerover"]),Ls("onPointerLeave",["pointerout","pointerover"]),os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),os("onBeforeInput",["compositionend","keypress","textInput","paste"]),os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sn));function Bm(t,a){a=(a&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],i=l.event;l=l.listeners;e:{var r=void 0;if(a)for(var h=l.length-1;0<=h;h--){var w=l[h],R=w.instance,Z=w.currentTarget;if(w=w.listener,R!==r&&i.isPropagationStopped())break e;r=w,i.currentTarget=Z;try{r(i)}catch(ae){zn(ae)}i.currentTarget=null,r=R}else for(h=0;h<l.length;h++){if(w=l[h],R=w.instance,Z=w.currentTarget,w=w.listener,R!==r&&i.isPropagationStopped())break e;r=w,i.currentTarget=Z;try{r(i)}catch(ae){zn(ae)}i.currentTarget=null,r=R}}}}function Me(t,a){var s=a[Ji];s===void 0&&(s=a[Ji]=new Set);var l=t+"__bubble";s.has(l)||(Hm(a,t,2,!1),s.add(l))}function Uc(t,a,s){var l=0;a&&(l|=4),Hm(s,t,l,a)}var yi="_reactListening"+Math.random().toString(36).slice(2);function Bc(t){if(!t[yi]){t[yi]=!0,Mo.forEach(function(s){s!=="selectionchange"&&(tg.has(s)||Uc(s,!1,t),Uc(s,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[yi]||(a[yi]=!0,Uc("selectionchange",!1,a))}}function Hm(t,a,s,l){switch(fh(a)){case 2:var i=Dg;break;case 8:i=Ag;break;default:i=Ic}s=i.bind(null,a,s,t),i=void 0,!lr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(i=!0),l?i!==void 0?t.addEventListener(a,s,{capture:!0,passive:i}):t.addEventListener(a,s,!0):i!==void 0?t.addEventListener(a,s,{passive:i}):t.addEventListener(a,s,!1)}function Hc(t,a,s,l,i){var r=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var h=l.tag;if(h===3||h===4){var w=l.stateNode.containerInfo;if(w===i)break;if(h===4)for(h=l.return;h!==null;){var R=h.tag;if((R===3||R===4)&&h.stateNode.containerInfo===i)return;h=h.return}for(;w!==null;){if(h=Rs(w),h===null)return;if(R=h.tag,R===5||R===6||R===26||R===27){l=r=h;continue e}w=w.parentNode}}l=l.return}Xo(function(){var Z=r,ae=ar(s),re=[];e:{var J=bd.get(t);if(J!==void 0){var K=Tn,ve=t;switch(t){case"keypress":if(Dn(s)===0)break e;case"keydown":case"keyup":K=Zf;break;case"focusin":ve="focus",K=cr;break;case"focusout":ve="blur",K=cr;break;case"beforeblur":case"afterblur":K=cr;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Vo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Lf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Kf;break;case fd:case xd:case gd:K=Hf;break;case pd:K=If;break;case"scroll":case"scrollend":K=zf;break;case"wheel":K=tx;break;case"copy":case"cut":case"paste":K=Yf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Jo;break;case"toggle":case"beforetoggle":K=sx}var Ne=(a&4)!==0,Qe=!Ne&&(t==="scroll"||t==="scrollend"),G=Ne?J!==null?J+"Capture":null:J;Ne=[];for(var B=Z,Q;B!==null;){var ie=B;if(Q=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||Q===null||G===null||(ie=_l(B,G),ie!=null&&Ne.push(ln(B,ie,Q))),Qe)break;B=B.return}0<Ne.length&&(J=new K(J,ve,null,s,ae),re.push({event:J,listeners:Ne}))}}if((a&7)===0){e:{if(J=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",J&&s!==tr&&(ve=s.relatedTarget||s.fromElement)&&(Rs(ve)||ve[Ms]))break e;if((K||J)&&(J=ae.window===ae?ae:(J=ae.ownerDocument)?J.defaultView||J.parentWindow:window,K?(ve=s.relatedTarget||s.toElement,K=Z,ve=ve?Rs(ve):null,ve!==null&&(Qe=p(ve),Ne=ve.tag,ve!==Qe||Ne!==5&&Ne!==27&&Ne!==6)&&(ve=null)):(K=null,ve=Z),K!==ve)){if(Ne=Vo,ie="onMouseLeave",G="onMouseEnter",B="mouse",(t==="pointerout"||t==="pointerover")&&(Ne=Jo,ie="onPointerLeave",G="onPointerEnter",B="pointer"),Qe=K==null?J:Sl(K),Q=ve==null?J:Sl(ve),J=new Ne(ie,B+"leave",K,s,ae),J.target=Qe,J.relatedTarget=Q,ie=null,Rs(ae)===Z&&(Ne=new Ne(G,B+"enter",ve,s,ae),Ne.target=Q,Ne.relatedTarget=Qe,ie=Ne),Qe=ie,K&&ve)t:{for(Ne=ag,G=K,B=ve,Q=0,ie=G;ie;ie=Ne(ie))Q++;ie=0;for(var je=B;je;je=Ne(je))ie++;for(;0<Q-ie;)G=Ne(G),Q--;for(;0<ie-Q;)B=Ne(B),ie--;for(;Q--;){if(G===B||B!==null&&G===B.alternate){Ne=G;break t}G=Ne(G),B=Ne(B)}Ne=null}else Ne=null;K!==null&&qm(re,J,K,Ne,!1),ve!==null&&Qe!==null&&qm(re,Qe,ve,Ne,!0)}}e:{if(J=Z?Sl(Z):window,K=J.nodeName&&J.nodeName.toLowerCase(),K==="select"||K==="input"&&J.type==="file")var Ue=sd;else if(td(J))if(ld)Ue=hx;else{Ue=ux;var ye=dx}else K=J.nodeName,!K||K.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Z&&er(Z.elementType)&&(Ue=sd):Ue=mx;if(Ue&&(Ue=Ue(t,Z))){ad(re,Ue,s,ae);break e}ye&&ye(t,J,Z),t==="focusout"&&Z&&J.type==="number"&&Z.memoizedProps.value!=null&&Ii(J,"number",J.value)}switch(ye=Z?Sl(Z):window,t){case"focusin":(td(ye)||ye.contentEditable==="true")&&(Fs=ye,fr=Z,Rl=null);break;case"focusout":Rl=fr=Fs=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,md(re,s,ae);break;case"selectionchange":if(xx)break;case"keydown":case"keyup":md(re,s,ae)}var Ee;if(dr)e:{switch(t){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Ys?Io(t,s)&&(ze="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(ze="onCompositionStart");ze&&(Po&&s.locale!=="ko"&&(Ys||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Ys&&(Ee=$o()):(La=ae,nr="value"in La?La.value:La.textContent,Ys=!0)),ye=ji(Z,ze),0<ye.length&&(ze=new Zo(ze,t,null,s,ae),re.push({event:ze,listeners:ye}),Ee?ze.data=Ee:(Ee=ed(s),Ee!==null&&(ze.data=Ee)))),(Ee=nx?ix(t,s):rx(t,s))&&(ze=ji(Z,"onBeforeInput"),0<ze.length&&(ye=new Zo("onBeforeInput","beforeinput",null,s,ae),re.push({event:ye,listeners:ze}),ye.data=Ee)),Wx(re,t,Z,s,ae)}Bm(re,a)})}function ln(t,a,s){return{instance:t,listener:a,currentTarget:s}}function ji(t,a){for(var s=a+"Capture",l=[];t!==null;){var i=t,r=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||r===null||(i=_l(t,s),i!=null&&l.unshift(ln(t,i,r)),i=_l(t,a),i!=null&&l.push(ln(t,i,r))),t.tag===3)return l;t=t.return}return[]}function ag(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function qm(t,a,s,l,i){for(var r=a._reactName,h=[];s!==null&&s!==l;){var w=s,R=w.alternate,Z=w.stateNode;if(w=w.tag,R!==null&&R===l)break;w!==5&&w!==26&&w!==27||Z===null||(R=Z,i?(Z=_l(s,r),Z!=null&&h.unshift(ln(s,Z,R))):i||(Z=_l(s,r),Z!=null&&h.push(ln(s,Z,R)))),s=s.return}h.length!==0&&t.push({event:a,listeners:h})}var sg=/\r\n?/g,lg=/\u0000|\uFFFD/g;function Ym(t){return(typeof t=="string"?t:""+t).replace(sg,`
`).replace(lg,"")}function Fm(t,a){return a=Ym(a),Ym(t)===a}function $e(t,a,s,l,i,r){switch(s){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||Bs(t,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&Bs(t,""+l);break;case"className":_n(t,"class",l);break;case"tabIndex":_n(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":_n(t,s,l);break;case"style":Fo(t,l,r);break;case"data":if(a!=="object"){_n(t,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=kn(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(s==="formAction"?(a!=="input"&&$e(t,a,"name",i.name,i,null),$e(t,a,"formEncType",i.formEncType,i,null),$e(t,a,"formMethod",i.formMethod,i,null),$e(t,a,"formTarget",i.formTarget,i,null)):($e(t,a,"encType",i.encType,i,null),$e(t,a,"method",i.method,i,null),$e(t,a,"target",i.target,i,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=kn(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=ha);break;case"onScroll":l!=null&&Me("scroll",t);break;case"onScrollEnd":l!=null&&Me("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(s=l.__html,s!=null){if(i.children!=null)throw Error(o(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=kn(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":Me("beforetoggle",t),Me("toggle",t),Sn(t,"popover",l);break;case"xlinkActuate":ma(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ma(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ma(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ma(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ma(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ma(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ma(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ma(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ma(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Sn(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Mf.get(s)||s,Sn(t,s,l))}}function qc(t,a,s,l,i,r){switch(s){case"style":Fo(t,l,r);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(s=l.__html,s!=null){if(i.children!=null)throw Error(o(60));t.innerHTML=s}}break;case"children":typeof l=="string"?Bs(t,l):(typeof l=="number"||typeof l=="bigint")&&Bs(t,""+l);break;case"onScroll":l!=null&&Me("scroll",t);break;case"onScrollEnd":l!=null&&Me("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ha);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ro.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(i=s.endsWith("Capture"),a=s.slice(2,i?s.length-7:void 0),r=t[St]||null,r=r!=null?r[s]:null,typeof r=="function"&&t.removeEventListener(a,r,i),typeof l=="function")){typeof r!="function"&&r!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(a,l,i);break e}s in t?t[s]=l:l===!0?t.setAttribute(s,""):Sn(t,s,l)}}}function xt(t,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",t),Me("load",t);var l=!1,i=!1,r;for(r in s)if(s.hasOwnProperty(r)){var h=s[r];if(h!=null)switch(r){case"src":l=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:$e(t,a,r,h,s,null)}}i&&$e(t,a,"srcSet",s.srcSet,s,null),l&&$e(t,a,"src",s.src,s,null);return;case"input":Me("invalid",t);var w=r=h=i=null,R=null,Z=null;for(l in s)if(s.hasOwnProperty(l)){var ae=s[l];if(ae!=null)switch(l){case"name":i=ae;break;case"type":h=ae;break;case"checked":R=ae;break;case"defaultChecked":Z=ae;break;case"value":r=ae;break;case"defaultValue":w=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(o(137,a));break;default:$e(t,a,l,ae,s,null)}}Bo(t,r,w,R,Z,h,i,!1);return;case"select":Me("invalid",t),l=h=r=null;for(i in s)if(s.hasOwnProperty(i)&&(w=s[i],w!=null))switch(i){case"value":r=w;break;case"defaultValue":h=w;break;case"multiple":l=w;default:$e(t,a,i,w,s,null)}a=r,s=h,t.multiple=!!l,a!=null?Us(t,!!l,a,!1):s!=null&&Us(t,!!l,s,!0);return;case"textarea":Me("invalid",t),r=i=l=null;for(h in s)if(s.hasOwnProperty(h)&&(w=s[h],w!=null))switch(h){case"value":l=w;break;case"defaultValue":i=w;break;case"children":r=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(o(91));break;default:$e(t,a,h,w,s,null)}qo(t,l,i,r);return;case"option":for(R in s)s.hasOwnProperty(R)&&(l=s[R],l!=null)&&(R==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":$e(t,a,R,l,s,null));return;case"dialog":Me("beforetoggle",t),Me("toggle",t),Me("cancel",t),Me("close",t);break;case"iframe":case"object":Me("load",t);break;case"video":case"audio":for(l=0;l<sn.length;l++)Me(sn[l],t);break;case"image":Me("error",t),Me("load",t);break;case"details":Me("toggle",t);break;case"embed":case"source":case"link":Me("error",t),Me("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in s)if(s.hasOwnProperty(Z)&&(l=s[Z],l!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:$e(t,a,Z,l,s,null)}return;default:if(er(a)){for(ae in s)s.hasOwnProperty(ae)&&(l=s[ae],l!==void 0&&qc(t,a,ae,l,s,void 0));return}}for(w in s)s.hasOwnProperty(w)&&(l=s[w],l!=null&&$e(t,a,w,l,s,null))}function ng(t,a,s,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,r=null,h=null,w=null,R=null,Z=null,ae=null;for(K in s){var re=s[K];if(s.hasOwnProperty(K)&&re!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":R=re;default:l.hasOwnProperty(K)||$e(t,a,K,null,l,re)}}for(var J in l){var K=l[J];if(re=s[J],l.hasOwnProperty(J)&&(K!=null||re!=null))switch(J){case"type":r=K;break;case"name":i=K;break;case"checked":Z=K;break;case"defaultChecked":ae=K;break;case"value":h=K;break;case"defaultValue":w=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(o(137,a));break;default:K!==re&&$e(t,a,J,K,l,re)}}Wi(t,h,w,R,Z,ae,r,i);return;case"select":K=h=w=J=null;for(r in s)if(R=s[r],s.hasOwnProperty(r)&&R!=null)switch(r){case"value":break;case"multiple":K=R;default:l.hasOwnProperty(r)||$e(t,a,r,null,l,R)}for(i in l)if(r=l[i],R=s[i],l.hasOwnProperty(i)&&(r!=null||R!=null))switch(i){case"value":J=r;break;case"defaultValue":w=r;break;case"multiple":h=r;default:r!==R&&$e(t,a,i,r,l,R)}a=w,s=h,l=K,J!=null?Us(t,!!s,J,!1):!!l!=!!s&&(a!=null?Us(t,!!s,a,!0):Us(t,!!s,s?[]:"",!1));return;case"textarea":K=J=null;for(w in s)if(i=s[w],s.hasOwnProperty(w)&&i!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:$e(t,a,w,null,l,i)}for(h in l)if(i=l[h],r=s[h],l.hasOwnProperty(h)&&(i!=null||r!=null))switch(h){case"value":J=i;break;case"defaultValue":K=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(o(91));break;default:i!==r&&$e(t,a,h,i,l,r)}Ho(t,J,K);return;case"option":for(var ve in s)J=s[ve],s.hasOwnProperty(ve)&&J!=null&&!l.hasOwnProperty(ve)&&(ve==="selected"?t.selected=!1:$e(t,a,ve,null,l,J));for(R in l)J=l[R],K=s[R],l.hasOwnProperty(R)&&J!==K&&(J!=null||K!=null)&&(R==="selected"?t.selected=J&&typeof J!="function"&&typeof J!="symbol":$e(t,a,R,J,l,K));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in s)J=s[Ne],s.hasOwnProperty(Ne)&&J!=null&&!l.hasOwnProperty(Ne)&&$e(t,a,Ne,null,l,J);for(Z in l)if(J=l[Z],K=s[Z],l.hasOwnProperty(Z)&&J!==K&&(J!=null||K!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(o(137,a));break;default:$e(t,a,Z,J,l,K)}return;default:if(er(a)){for(var Qe in s)J=s[Qe],s.hasOwnProperty(Qe)&&J!==void 0&&!l.hasOwnProperty(Qe)&&qc(t,a,Qe,void 0,l,J);for(ae in l)J=l[ae],K=s[ae],!l.hasOwnProperty(ae)||J===K||J===void 0&&K===void 0||qc(t,a,ae,J,l,K);return}}for(var G in s)J=s[G],s.hasOwnProperty(G)&&J!=null&&!l.hasOwnProperty(G)&&$e(t,a,G,null,l,J);for(re in l)J=l[re],K=s[re],!l.hasOwnProperty(re)||J===K||J==null&&K==null||$e(t,a,re,J,l,K)}function Gm(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ig(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,s=performance.getEntriesByType("resource"),l=0;l<s.length;l++){var i=s[l],r=i.transferSize,h=i.initiatorType,w=i.duration;if(r&&w&&Gm(h)){for(h=0,w=i.responseEnd,l+=1;l<s.length;l++){var R=s[l],Z=R.startTime;if(Z>w)break;var ae=R.transferSize,re=R.initiatorType;ae&&Gm(re)&&(R=R.responseEnd,h+=ae*(R<w?1:(w-Z)/(R-Z)))}if(--l,a+=8*(r+h)/(i.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Yc=null,Fc=null;function Ni(t){return t.nodeType===9?t:t.ownerDocument}function Xm(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $m(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function Gc(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Xc=null;function rg(){var t=window.event;return t&&t.type==="popstate"?t===Xc?!1:(Xc=t,!0):(Xc=null,!1)}var Qm=typeof setTimeout=="function"?setTimeout:void 0,cg=typeof clearTimeout=="function"?clearTimeout:void 0,Vm=typeof Promise=="function"?Promise:void 0,og=typeof queueMicrotask=="function"?queueMicrotask:typeof Vm<"u"?function(t){return Vm.resolve(null).then(t).catch(dg)}:Qm;function dg(t){setTimeout(function(){throw t})}function Ia(t){return t==="head"}function Zm(t,a){var s=a,l=0;do{var i=s.nextSibling;if(t.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"||s==="/&"){if(l===0){t.removeChild(i),xl(a);return}l--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")l++;else if(s==="html")nn(t.ownerDocument.documentElement);else if(s==="head"){s=t.ownerDocument.head,nn(s);for(var r=s.firstChild;r;){var h=r.nextSibling,w=r.nodeName;r[wl]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&r.rel.toLowerCase()==="stylesheet"||s.removeChild(r),r=h}}else s==="body"&&nn(t.ownerDocument.body);s=i}while(s);xl(a)}function Jm(t,a){var s=t;t=0;do{var l=s.nextSibling;if(s.nodeType===1?a?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(a?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(t===0)break;t--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||t++;s=l}while(s)}function $c(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":$c(s),Pi(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function ug(t,a,s,l){for(;t.nodeType===1;){var i=s;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[wl])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var r=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=Pt(t.nextSibling),t===null)break}return null}function mg(t,a,s){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Pt(t.nextSibling),t===null))return null;return t}function Pm(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Pt(t.nextSibling),t===null))return null;return t}function Qc(t){return t.data==="$?"||t.data==="$~"}function Vc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function hg(t,a){var s=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||s.readyState!=="loading")a();else{var l=function(){a(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Pt(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var Zc=null;function Km(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"||s==="/&"){if(a===0)return Pt(t.nextSibling);a--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||a++}t=t.nextSibling}return null}function Wm(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(a===0)return t;a--}else s!=="/$"&&s!=="/&"||a++}t=t.previousSibling}return null}function Im(t,a,s){switch(a=Ni(s),t){case"html":if(t=a.documentElement,!t)throw Error(o(452));return t;case"head":if(t=a.head,!t)throw Error(o(453));return t;case"body":if(t=a.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function nn(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Pi(t)}var Kt=new Map,eh=new Set;function wi(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Da=E.d;E.d={f:fg,r:xg,D:gg,C:pg,L:bg,m:vg,X:jg,S:yg,M:Ng};function fg(){var t=Da.f(),a=fi();return t||a}function xg(t){var a=zs(t);a!==null&&a.tag===5&&a.type==="form"?pu(a):Da.r(t)}var ml=typeof document>"u"?null:document;function th(t,a,s){var l=ml;if(l&&typeof a=="string"&&a){var i=Gt(a);i='link[rel="'+t+'"][href="'+i+'"]',typeof s=="string"&&(i+='[crossorigin="'+s+'"]'),eh.has(i)||(eh.add(i),t={rel:t,crossOrigin:s,href:a},l.querySelector(i)===null&&(a=l.createElement("link"),xt(a,"link",t),dt(a),l.head.appendChild(a)))}}function gg(t){Da.D(t),th("dns-prefetch",t,null)}function pg(t,a){Da.C(t,a),th("preconnect",t,a)}function bg(t,a,s){Da.L(t,a,s);var l=ml;if(l&&t&&a){var i='link[rel="preload"][as="'+Gt(a)+'"]';a==="image"&&s&&s.imageSrcSet?(i+='[imagesrcset="'+Gt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(i+='[imagesizes="'+Gt(s.imageSizes)+'"]')):i+='[href="'+Gt(t)+'"]';var r=i;switch(a){case"style":r=hl(t);break;case"script":r=fl(t)}Kt.has(r)||(t=g({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:t,as:a},s),Kt.set(r,t),l.querySelector(i)!==null||a==="style"&&l.querySelector(rn(r))||a==="script"&&l.querySelector(cn(r))||(a=l.createElement("link"),xt(a,"link",t),dt(a),l.head.appendChild(a)))}}function vg(t,a){Da.m(t,a);var s=ml;if(s&&t){var l=a&&typeof a.as=="string"?a.as:"script",i='link[rel="modulepreload"][as="'+Gt(l)+'"][href="'+Gt(t)+'"]',r=i;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=fl(t)}if(!Kt.has(r)&&(t=g({rel:"modulepreload",href:t},a),Kt.set(r,t),s.querySelector(i)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(cn(r)))return}l=s.createElement("link"),xt(l,"link",t),dt(l),s.head.appendChild(l)}}}function yg(t,a,s){Da.S(t,a,s);var l=ml;if(l&&t){var i=Os(l).hoistableStyles,r=hl(t);a=a||"default";var h=i.get(r);if(!h){var w={loading:0,preload:null};if(h=l.querySelector(rn(r)))w.loading=5;else{t=g({rel:"stylesheet",href:t,"data-precedence":a},s),(s=Kt.get(r))&&Jc(t,s);var R=h=l.createElement("link");dt(R),xt(R,"link",t),R._p=new Promise(function(Z,ae){R.onload=Z,R.onerror=ae}),R.addEventListener("load",function(){w.loading|=1}),R.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Si(h,a,l)}h={type:"stylesheet",instance:h,count:1,state:w},i.set(r,h)}}}function jg(t,a){Da.X(t,a);var s=ml;if(s&&t){var l=Os(s).hoistableScripts,i=fl(t),r=l.get(i);r||(r=s.querySelector(cn(i)),r||(t=g({src:t,async:!0},a),(a=Kt.get(i))&&Pc(t,a),r=s.createElement("script"),dt(r),xt(r,"link",t),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(i,r))}}function Ng(t,a){Da.M(t,a);var s=ml;if(s&&t){var l=Os(s).hoistableScripts,i=fl(t),r=l.get(i);r||(r=s.querySelector(cn(i)),r||(t=g({src:t,async:!0,type:"module"},a),(a=Kt.get(i))&&Pc(t,a),r=s.createElement("script"),dt(r),xt(r,"link",t),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(i,r))}}function ah(t,a,s,l){var i=(i=P.current)?wi(i):null;if(!i)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=hl(s.href),s=Os(i).hoistableStyles,l=s.get(a),l||(l={type:"style",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=hl(s.href);var r=Os(i).hoistableStyles,h=r.get(t);if(h||(i=i.ownerDocument||i,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,h),(r=i.querySelector(rn(t)))&&!r._p&&(h.instance=r,h.state.loading=5),Kt.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Kt.set(t,s),r||wg(i,t,s,h.state))),a&&l===null)throw Error(o(528,""));return h}if(a&&l!==null)throw Error(o(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=fl(s),s=Os(i).hoistableScripts,l=s.get(a),l||(l={type:"script",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function hl(t){return'href="'+Gt(t)+'"'}function rn(t){return'link[rel="stylesheet"]['+t+"]"}function sh(t){return g({},t,{"data-precedence":t.precedence,precedence:null})}function wg(t,a,s,l){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=t.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),xt(a,"link",s),dt(a),t.head.appendChild(a))}function fl(t){return'[src="'+Gt(t)+'"]'}function cn(t){return"script[async]"+t}function lh(t,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var l=t.querySelector('style[data-href~="'+Gt(s.href)+'"]');if(l)return a.instance=l,dt(l),l;var i=g({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),dt(l),xt(l,"style",i),Si(l,s.precedence,t),a.instance=l;case"stylesheet":i=hl(s.href);var r=t.querySelector(rn(i));if(r)return a.state.loading|=4,a.instance=r,dt(r),r;l=sh(s),(i=Kt.get(i))&&Jc(l,i),r=(t.ownerDocument||t).createElement("link"),dt(r);var h=r;return h._p=new Promise(function(w,R){h.onload=w,h.onerror=R}),xt(r,"link",l),a.state.loading|=4,Si(r,s.precedence,t),a.instance=r;case"script":return r=fl(s.src),(i=t.querySelector(cn(r)))?(a.instance=i,dt(i),i):(l=s,(i=Kt.get(r))&&(l=g({},s),Pc(l,i)),t=t.ownerDocument||t,i=t.createElement("script"),dt(i),xt(i,"link",l),t.head.appendChild(i),a.instance=i);case"void":return null;default:throw Error(o(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,Si(l,s.precedence,t));return a.instance}function Si(t,a,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=l.length?l[l.length-1]:null,r=i,h=0;h<l.length;h++){var w=l[h];if(w.dataset.precedence===a)r=w;else if(r!==i)break}r?r.parentNode.insertBefore(t,r.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(t,a.firstChild))}function Jc(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Pc(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var _i=null;function nh(t,a,s){if(_i===null){var l=new Map,i=_i=new Map;i.set(s,l)}else i=_i,l=i.get(s),l||(l=new Map,i.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),i=0;i<s.length;i++){var r=s[i];if(!(r[wl]||r[tt]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var h=r.getAttribute(a)||"";h=t+h;var w=l.get(h);w?w.push(r):l.set(h,[r])}}return l}function ih(t,a,s){t=t.ownerDocument||t,t.head.insertBefore(s,a==="title"?t.querySelector("head > title"):null)}function Sg(t,a,s){if(s===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function rh(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function _g(t,a,s,l){if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var i=hl(l.href),r=a.querySelector(rn(i));if(r){a=r._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=Ci.bind(t),a.then(t,t)),s.state.loading|=4,s.instance=r,dt(r);return}r=a.ownerDocument||a,l=sh(l),(i=Kt.get(i))&&Jc(l,i),r=r.createElement("link"),dt(r);var h=r;h._p=new Promise(function(w,R){h.onload=w,h.onerror=R}),xt(r,"link",l),s.instance=r}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(t.count++,s=Ci.bind(t),a.addEventListener("load",s),a.addEventListener("error",s))}}var Kc=0;function Cg(t,a){return t.stylesheets&&t.count===0&&Ei(t,t.stylesheets),0<t.count||0<t.imgCount?function(s){var l=setTimeout(function(){if(t.stylesheets&&Ei(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4+a);0<t.imgBytes&&Kc===0&&(Kc=62500*ig());var i=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ei(t,t.stylesheets),t.unsuspend)){var r=t.unsuspend;t.unsuspend=null,r()}},(t.imgBytes>Kc?50:800)+a);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(i)}}:null}function Ci(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ei(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ki=null;function Ei(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ki=new Map,a.forEach(kg,t),ki=null,Ci.call(t))}function kg(t,a){if(!(a.state.loading&4)){var s=ki.get(t);if(s)var l=s.get(null);else{s=new Map,ki.set(t,s);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<i.length;r++){var h=i[r];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(s.set(h.dataset.precedence,h),l=h)}l&&s.set(null,l)}i=a.instance,h=i.getAttribute("data-precedence"),r=s.get(h)||l,r===l&&s.set(null,i),s.set(h,i),this.count++,l=Ci.bind(this),i.addEventListener("load",l),i.addEventListener("error",l),r?r.parentNode.insertBefore(i,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),a.state.loading|=4}}var on={$$typeof:Y,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function Eg(t,a,s,l,i,r,h,w,R){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rs(0),this.hiddenUpdates=rs(null),this.identifierPrefix=l,this.onUncaughtError=i,this.onCaughtError=r,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function ch(t,a,s,l,i,r,h,w,R,Z,ae,re){return t=new Eg(t,a,s,h,R,Z,ae,re,w),a=1,r===!0&&(a|=24),r=Rt(3,null,null,a),t.current=r,r.stateNode=t,a=Ar(),a.refCount++,t.pooledCache=a,a.refCount++,r.memoizedState={element:l,isDehydrated:s,cache:a},zr(r),t}function oh(t){return t?(t=$s,t):$s}function dh(t,a,s,l,i,r){i=oh(i),l.context===null?l.context=i:l.pendingContext=i,l=Fa(a),l.payload={element:s},r=r===void 0?null:r,r!==null&&(l.callback=r),s=Ga(t,l,a),s!==null&&(At(s,t,a),ql(s,t,a))}function uh(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<a?s:a}}function Wc(t,a){uh(t,a),(t=t.alternate)&&uh(t,a)}function mh(t){if(t.tag===13||t.tag===31){var a=hs(t,67108864);a!==null&&At(a,t,67108864),Wc(t,67108864)}}function hh(t){if(t.tag===13||t.tag===31){var a=Bt();a=le(a);var s=hs(t,a);s!==null&&At(s,t,a),Wc(t,a)}}var Di=!0;function Dg(t,a,s,l){var i=S.T;S.T=null;var r=E.p;try{E.p=2,Ic(t,a,s,l)}finally{E.p=r,S.T=i}}function Ag(t,a,s,l){var i=S.T;S.T=null;var r=E.p;try{E.p=8,Ic(t,a,s,l)}finally{E.p=r,S.T=i}}function Ic(t,a,s,l){if(Di){var i=eo(l);if(i===null)Hc(t,a,l,Ai,s),xh(t,l);else if(Mg(i,t,a,s,l))l.stopPropagation();else if(xh(t,l),a&4&&-1<Tg.indexOf(t)){for(;i!==null;){var r=zs(i);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var h=da(r.pendingLanes);if(h!==0){var w=r;for(w.pendingLanes|=2,w.entangledLanes|=2;h;){var R=1<<31-pt(h);w.entanglements[1]|=R,h&=~R}ra(r),(He&6)===0&&(mi=gt()+500,an(0))}}break;case 31:case 13:w=hs(r,2),w!==null&&At(w,r,2),fi(),Wc(r,2)}if(r=eo(l),r===null&&Hc(t,a,l,Ai,s),r===i)break;i=r}i!==null&&l.stopPropagation()}else Hc(t,a,l,null,s)}}function eo(t){return t=ar(t),to(t)}var Ai=null;function to(t){if(Ai=null,t=Rs(t),t!==null){var a=p(t);if(a===null)t=null;else{var s=a.tag;if(s===13){if(t=m(a),t!==null)return t;t=null}else if(s===31){if(t=f(a),t!==null)return t;t=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Ai=t,null}function fh(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vl()){case Yt:return 2;case yn:return 8;case Ra:case $i:return 32;case yl:return 268435456;default:return 32}default:return 32}}var ao=!1,es=null,ts=null,as=null,dn=new Map,un=new Map,ss=[],Tg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xh(t,a){switch(t){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":dn.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":un.delete(a.pointerId)}}function mn(t,a,s,l,i,r){return t===null||t.nativeEvent!==r?(t={blockedOn:a,domEventName:s,eventSystemFlags:l,nativeEvent:r,targetContainers:[i]},a!==null&&(a=zs(a),a!==null&&mh(a)),t):(t.eventSystemFlags|=l,a=t.targetContainers,i!==null&&a.indexOf(i)===-1&&a.push(i),t)}function Mg(t,a,s,l,i){switch(a){case"focusin":return es=mn(es,t,a,s,l,i),!0;case"dragenter":return ts=mn(ts,t,a,s,l,i),!0;case"mouseover":return as=mn(as,t,a,s,l,i),!0;case"pointerover":var r=i.pointerId;return dn.set(r,mn(dn.get(r)||null,t,a,s,l,i)),!0;case"gotpointercapture":return r=i.pointerId,un.set(r,mn(un.get(r)||null,t,a,s,l,i)),!0}return!1}function gh(t){var a=Rs(t.target);if(a!==null){var s=p(a);if(s!==null){if(a=s.tag,a===13){if(a=m(s),a!==null){t.blockedOn=a,Le(t.priority,function(){hh(s)});return}}else if(a===31){if(a=f(s),a!==null){t.blockedOn=a,Le(t.priority,function(){hh(s)});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ti(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var s=eo(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);tr=l,s.target.dispatchEvent(l),tr=null}else return a=zs(s),a!==null&&mh(a),t.blockedOn=s,!1;a.shift()}return!0}function ph(t,a,s){Ti(t)&&s.delete(a)}function Rg(){ao=!1,es!==null&&Ti(es)&&(es=null),ts!==null&&Ti(ts)&&(ts=null),as!==null&&Ti(as)&&(as=null),dn.forEach(ph),un.forEach(ph)}function Mi(t,a){t.blockedOn===a&&(t.blockedOn=null,ao||(ao=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Rg)))}var Ri=null;function bh(t){Ri!==t&&(Ri=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ri===t&&(Ri=null);for(var a=0;a<t.length;a+=3){var s=t[a],l=t[a+1],i=t[a+2];if(typeof l!="function"){if(to(l||s)===null)continue;break}var r=zs(s);r!==null&&(t.splice(a,3),a-=3,ec(r,{pending:!0,data:i,method:s.method,action:l},l,i))}}))}function xl(t){function a(R){return Mi(R,t)}es!==null&&Mi(es,t),ts!==null&&Mi(ts,t),as!==null&&Mi(as,t),dn.forEach(a),un.forEach(a);for(var s=0;s<ss.length;s++){var l=ss[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ss.length&&(s=ss[0],s.blockedOn===null);)gh(s),s.blockedOn===null&&ss.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var i=s[l],r=s[l+1],h=i[St]||null;if(typeof r=="function")h||bh(s);else if(h){var w=null;if(r&&r.hasAttribute("formAction")){if(i=r,h=r[St]||null)w=h.formAction;else if(to(i)!==null)continue}else w=h.action;typeof w=="function"?s[l+1]=w:(s.splice(l,3),l-=3),bh(s)}}}function vh(){function t(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(h){return i=h})},focusReset:"manual",scroll:"manual"})}function a(){i!==null&&(i(),i=null),l||setTimeout(s,20)}function s(){if(!l&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,i=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(s,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),i!==null&&(i(),i=null)}}}function so(t){this._internalRoot=t}zi.prototype.render=so.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(o(409));var s=a.current,l=Bt();dh(s,l,t,a,null,null)},zi.prototype.unmount=so.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;dh(t.current,2,null,t,null,null),fi(),a[Ms]=null}};function zi(t){this._internalRoot=t}zi.prototype.unstable_scheduleHydration=function(t){if(t){var a=De();t={blockedOn:null,target:t,priority:a};for(var s=0;s<ss.length&&a!==0&&a<ss[s].priority;s++);ss.splice(s,0,t),s===0&&gh(t)}};var yh=c.version;if(yh!=="19.2.3")throw Error(o(527,yh,"19.2.3"));E.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=v(a),t=t!==null?j(t):null,t=t===null?null:t.stateNode,t};var zg={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:S,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oi.isDisabled&&Oi.supportsFiber)try{sa=Oi.inject(zg),vt=Oi}catch{}}return fn.createRoot=function(t,a){if(!u(t))throw Error(o(299));var s=!1,l="",i=ku,r=Eu,h=Du;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(i=a.onUncaughtError),a.onCaughtError!==void 0&&(r=a.onCaughtError),a.onRecoverableError!==void 0&&(h=a.onRecoverableError)),a=ch(t,1,!1,null,null,s,l,null,i,r,h,vh),t[Ms]=a.current,Bc(t),new so(a)},fn.hydrateRoot=function(t,a,s){if(!u(t))throw Error(o(299));var l=!1,i="",r=ku,h=Eu,w=Du,R=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onUncaughtError!==void 0&&(r=s.onUncaughtError),s.onCaughtError!==void 0&&(h=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.formState!==void 0&&(R=s.formState)),a=ch(t,1,!0,a,s??null,l,i,R,r,h,w,vh),a.context=oh(null),s=a.current,l=Bt(),l=le(l),i=Fa(l),i.callback=null,Ga(s,i,l),s=l,a.current.lanes=s,cs(a,s),ra(a),t[Ms]=a.current,Bc(t),new zi(a)},fn.version="19.2.3",fn}var Ah;function Xg(){if(Ah)return io.exports;Ah=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(c){console.error(c)}}return n(),io.exports=Gg(),io.exports}var $g=Xg();var Th="popstate";function Qg(n={}){function c(u,p){let{pathname:m="/",search:f="",hash:b=""}=Cs(u.location.hash.substring(1));return!m.startsWith("/")&&!m.startsWith(".")&&(m="/"+m),go("",{pathname:m,search:f,hash:b},p.state&&p.state.usr||null,p.state&&p.state.key||"default")}function d(u,p){let m=u.document.querySelector("base"),f="";if(m&&m.getAttribute("href")){let b=u.location.href,v=b.indexOf("#");f=v===-1?b:b.slice(0,v)}return f+"#"+(typeof p=="string"?p:pn(p))}function o(u,p){Ht(u.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(p)})`)}return Zg(c,d,o,n)}function We(n,c){if(n===!1||n===null||typeof n>"u")throw new Error(c)}function Ht(n,c){if(!n){typeof console<"u"&&console.warn(c);try{throw new Error(c)}catch{}}}function Vg(){return Math.random().toString(36).substring(2,10)}function Mh(n,c){return{usr:n.state,key:n.key,idx:c}}function go(n,c,d=null,o){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof c=="string"?Cs(c):c,state:d,key:c&&c.key||o||Vg()}}function pn({pathname:n="/",search:c="",hash:d=""}){return c&&c!=="?"&&(n+=c.charAt(0)==="?"?c:"?"+c),d&&d!=="#"&&(n+=d.charAt(0)==="#"?d:"#"+d),n}function Cs(n){let c={};if(n){let d=n.indexOf("#");d>=0&&(c.hash=n.substring(d),n=n.substring(0,d));let o=n.indexOf("?");o>=0&&(c.search=n.substring(o),n=n.substring(0,o)),n&&(c.pathname=n)}return c}function Zg(n,c,d,o={}){let{window:u=document.defaultView,v5Compat:p=!1}=o,m=u.history,f="POP",b=null,v=j();v==null&&(v=0,m.replaceState({...m.state,idx:v},""));function j(){return(m.state||{idx:null}).idx}function g(){f="POP";let A=j(),k=A==null?null:A-v;v=A,b&&b({action:f,location:_.location,delta:k})}function y(A,k){f="PUSH";let O=go(_.location,A,k);d&&d(O,A),v=j()+1;let Y=Mh(O,v),I=_.createHref(O);try{m.pushState(Y,"",I)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;u.location.assign(I)}p&&b&&b({action:f,location:_.location,delta:1})}function C(A,k){f="REPLACE";let O=go(_.location,A,k);d&&d(O,A),v=j();let Y=Mh(O,v),I=_.createHref(O);m.replaceState(Y,"",I),p&&b&&b({action:f,location:_.location,delta:0})}function N(A){return Jg(A)}let _={get action(){return f},get location(){return n(u,m)},listen(A){if(b)throw new Error("A history only accepts one active listener");return u.addEventListener(Th,g),b=A,()=>{u.removeEventListener(Th,g),b=null}},createHref(A){return c(u,A)},createURL:N,encodeLocation(A){let k=N(A);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:y,replace:C,go(A){return m.go(A)}};return _}function Jg(n,c=!1){let d="http://localhost";typeof window<"u"&&(d=window.location.origin!=="null"?window.location.origin:window.location.href),We(d,"No window.location.(origin|href) available to create URL");let o=typeof n=="string"?n:pn(n);return o=o.replace(/ $/,"%20"),!c&&o.startsWith("//")&&(o=d+o),new URL(o,d)}function qh(n,c,d="/"){return Pg(n,c,d,!1)}function Pg(n,c,d,o){let u=typeof c=="string"?Cs(c):c,p=Ta(u.pathname||"/",d);if(p==null)return null;let m=Yh(n);Kg(m);let f=null;for(let b=0;f==null&&b<m.length;++b){let v=c0(p);f=i0(m[b],v,o)}return f}function Yh(n,c=[],d=[],o="",u=!1){let p=(m,f,b=u,v)=>{let j={relativePath:v===void 0?m.path||"":v,caseSensitive:m.caseSensitive===!0,childrenIndex:f,route:m};if(j.relativePath.startsWith("/")){if(!j.relativePath.startsWith(o)&&b)return;We(j.relativePath.startsWith(o),`Absolute route path "${j.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),j.relativePath=j.relativePath.slice(o.length)}let g=Aa([o,j.relativePath]),y=d.concat(j);m.children&&m.children.length>0&&(We(m.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),Yh(m.children,c,y,g,b)),!(m.path==null&&!m.index)&&c.push({path:g,score:l0(g,m.index),routesMeta:y})};return n.forEach((m,f)=>{if(m.path===""||!m.path?.includes("?"))p(m,f);else for(let b of Fh(m.path))p(m,f,!0,b)}),c}function Fh(n){let c=n.split("/");if(c.length===0)return[];let[d,...o]=c,u=d.endsWith("?"),p=d.replace(/\?$/,"");if(o.length===0)return u?[p,""]:[p];let m=Fh(o.join("/")),f=[];return f.push(...m.map(b=>b===""?p:[p,b].join("/"))),u&&f.push(...m),f.map(b=>n.startsWith("/")&&b===""?"/":b)}function Kg(n){n.sort((c,d)=>c.score!==d.score?d.score-c.score:n0(c.routesMeta.map(o=>o.childrenIndex),d.routesMeta.map(o=>o.childrenIndex)))}var Wg=/^:[\w-]+$/,Ig=3,e0=2,t0=1,a0=10,s0=-2,Rh=n=>n==="*";function l0(n,c){let d=n.split("/"),o=d.length;return d.some(Rh)&&(o+=s0),c&&(o+=e0),d.filter(u=>!Rh(u)).reduce((u,p)=>u+(Wg.test(p)?Ig:p===""?t0:a0),o)}function n0(n,c){return n.length===c.length&&n.slice(0,-1).every((o,u)=>o===c[u])?n[n.length-1]-c[c.length-1]:0}function i0(n,c,d=!1){let{routesMeta:o}=n,u={},p="/",m=[];for(let f=0;f<o.length;++f){let b=o[f],v=f===o.length-1,j=p==="/"?c:c.slice(p.length)||"/",g=qi({path:b.relativePath,caseSensitive:b.caseSensitive,end:v},j),y=b.route;if(!g&&v&&d&&!o[o.length-1].route.index&&(g=qi({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},j)),!g)return null;Object.assign(u,g.params),m.push({params:u,pathname:Aa([p,g.pathname]),pathnameBase:m0(Aa([p,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(p=Aa([p,g.pathnameBase]))}return m}function qi(n,c){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[d,o]=r0(n.path,n.caseSensitive,n.end),u=c.match(d);if(!u)return null;let p=u[0],m=p.replace(/(.)\/+$/,"$1"),f=u.slice(1);return{params:o.reduce((v,{paramName:j,isOptional:g},y)=>{if(j==="*"){let N=f[y]||"";m=p.slice(0,p.length-N.length).replace(/(.)\/+$/,"$1")}const C=f[y];return g&&!C?v[j]=void 0:v[j]=(C||"").replace(/%2F/g,"/"),v},{}),pathname:p,pathnameBase:m,pattern:n}}function r0(n,c=!1,d=!0){Ht(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let o=[],u="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,f,b)=>(o.push({paramName:f,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(o.push({paramName:"*"}),u+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):d?u+="\\/*$":n!==""&&n!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,c?void 0:"i"),o]}function c0(n){try{return n.split("/").map(c=>decodeURIComponent(c).replace(/\//g,"%2F")).join("/")}catch(c){return Ht(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${c}).`),n}}function Ta(n,c){if(c==="/")return n;if(!n.toLowerCase().startsWith(c.toLowerCase()))return null;let d=c.endsWith("/")?c.length-1:c.length,o=n.charAt(d);return o&&o!=="/"?null:n.slice(d)||"/"}var Gh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,o0=n=>Gh.test(n);function d0(n,c="/"){let{pathname:d,search:o="",hash:u=""}=typeof n=="string"?Cs(n):n,p;if(d)if(o0(d))p=d;else{if(d.includes("//")){let m=d;d=d.replace(/\/\/+/g,"/"),Ht(!1,`Pathnames cannot have embedded double slashes - normalizing ${m} -> ${d}`)}d.startsWith("/")?p=zh(d.substring(1),"/"):p=zh(d,c)}else p=c;return{pathname:p,search:h0(o),hash:f0(u)}}function zh(n,c){let d=c.replace(/\/+$/,"").split("/");return n.split("/").forEach(u=>{u===".."?d.length>1&&d.pop():u!=="."&&d.push(u)}),d.length>1?d.join("/"):"/"}function uo(n,c,d,o){return`Cannot include a '${n}' character in a manually specified \`to.${c}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${d}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function u0(n){return n.filter((c,d)=>d===0||c.route.path&&c.route.path.length>0)}function yo(n){let c=u0(n);return c.map((d,o)=>o===c.length-1?d.pathname:d.pathnameBase)}function jo(n,c,d,o=!1){let u;typeof n=="string"?u=Cs(n):(u={...n},We(!u.pathname||!u.pathname.includes("?"),uo("?","pathname","search",u)),We(!u.pathname||!u.pathname.includes("#"),uo("#","pathname","hash",u)),We(!u.search||!u.search.includes("#"),uo("#","search","hash",u)));let p=n===""||u.pathname==="",m=p?"/":u.pathname,f;if(m==null)f=d;else{let g=c.length-1;if(!o&&m.startsWith("..")){let y=m.split("/");for(;y[0]==="..";)y.shift(),g-=1;u.pathname=y.join("/")}f=g>=0?c[g]:"/"}let b=d0(u,f),v=m&&m!=="/"&&m.endsWith("/"),j=(p||m===".")&&d.endsWith("/");return!b.pathname.endsWith("/")&&(v||j)&&(b.pathname+="/"),b}var Aa=n=>n.join("/").replace(/\/\/+/g,"/"),m0=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),h0=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,f0=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,x0=class{constructor(n,c,d,o=!1){this.status=n,this.statusText=c||"",this.internal=o,d instanceof Error?(this.data=d.toString(),this.error=d):this.data=d}};function g0(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function p0(n){return n.map(c=>c.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Xh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function $h(n,c){let d=n;if(typeof d!="string"||!Gh.test(d))return{absoluteURL:void 0,isExternal:!1,to:d};let o=d,u=!1;if(Xh)try{let p=new URL(window.location.href),m=d.startsWith("//")?new URL(p.protocol+d):new URL(d),f=Ta(m.pathname,c);m.origin===p.origin&&f!=null?d=f+m.search+m.hash:u=!0}catch{Ht(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:u,to:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Qh=["POST","PUT","PATCH","DELETE"];new Set(Qh);var b0=["GET",...Qh];new Set(b0);var pl=x.createContext(null);pl.displayName="DataRouter";var Fi=x.createContext(null);Fi.displayName="DataRouterState";var v0=x.createContext(!1),Vh=x.createContext({isTransitioning:!1});Vh.displayName="ViewTransition";var y0=x.createContext(new Map);y0.displayName="Fetchers";var j0=x.createContext(null);j0.displayName="Await";var qt=x.createContext(null);qt.displayName="Navigation";var bn=x.createContext(null);bn.displayName="Location";var ta=x.createContext({outlet:null,matches:[],isDataRoute:!1});ta.displayName="Route";var No=x.createContext(null);No.displayName="RouteError";var Zh="REACT_ROUTER_ERROR",N0="REDIRECT",w0="ROUTE_ERROR_RESPONSE";function S0(n){if(n.startsWith(`${Zh}:${N0}:{`))try{let c=JSON.parse(n.slice(28));if(typeof c=="object"&&c&&typeof c.status=="number"&&typeof c.statusText=="string"&&typeof c.location=="string"&&typeof c.reloadDocument=="boolean"&&typeof c.replace=="boolean")return c}catch{}}function _0(n){if(n.startsWith(`${Zh}:${w0}:{`))try{let c=JSON.parse(n.slice(40));if(typeof c=="object"&&c&&typeof c.status=="number"&&typeof c.statusText=="string")return new x0(c.status,c.statusText,c.data)}catch{}}function C0(n,{relative:c}={}){We(bl(),"useHref() may be used only in the context of a <Router> component.");let{basename:d,navigator:o}=x.useContext(qt),{hash:u,pathname:p,search:m}=vn(n,{relative:c}),f=p;return d!=="/"&&(f=p==="/"?d:Aa([d,p])),o.createHref({pathname:f,search:m,hash:u})}function bl(){return x.useContext(bn)!=null}function Ma(){return We(bl(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(bn).location}var Jh="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ph(n){x.useContext(qt).static||x.useLayoutEffect(n)}function ns(){let{isDataRoute:n}=x.useContext(ta);return n?q0():k0()}function k0(){We(bl(),"useNavigate() may be used only in the context of a <Router> component.");let n=x.useContext(pl),{basename:c,navigator:d}=x.useContext(qt),{matches:o}=x.useContext(ta),{pathname:u}=Ma(),p=JSON.stringify(yo(o)),m=x.useRef(!1);return Ph(()=>{m.current=!0}),x.useCallback((b,v={})=>{if(Ht(m.current,Jh),!m.current)return;if(typeof b=="number"){d.go(b);return}let j=jo(b,JSON.parse(p),u,v.relative==="path");n==null&&c!=="/"&&(j.pathname=j.pathname==="/"?c:Aa([c,j.pathname])),(v.replace?d.replace:d.push)(j,v.state,v)},[c,d,p,u,n])}x.createContext(null);function E0(){let{matches:n}=x.useContext(ta),c=n[n.length-1];return c?c.params:{}}function vn(n,{relative:c}={}){let{matches:d}=x.useContext(ta),{pathname:o}=Ma(),u=JSON.stringify(yo(d));return x.useMemo(()=>jo(n,JSON.parse(u),o,c==="path"),[n,u,o,c])}function D0(n,c){return Kh(n,c)}function Kh(n,c,d,o,u){We(bl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:p}=x.useContext(qt),{matches:m}=x.useContext(ta),f=m[m.length-1],b=f?f.params:{},v=f?f.pathname:"/",j=f?f.pathnameBase:"/",g=f&&f.route;{let O=g&&g.path||"";Ih(v,!g||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let y=Ma(),C;if(c){let O=typeof c=="string"?Cs(c):c;We(j==="/"||O.pathname?.startsWith(j),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${j}" but pathname "${O.pathname}" was given in the \`location\` prop.`),C=O}else C=y;let N=C.pathname||"/",_=N;if(j!=="/"){let O=j.replace(/^\//,"").split("/");_="/"+N.replace(/^\//,"").split("/").slice(O.length).join("/")}let A=qh(n,{pathname:_});Ht(g||A!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Ht(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=z0(A&&A.map(O=>Object.assign({},O,{params:Object.assign({},b,O.params),pathname:Aa([j,p.encodeLocation?p.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?j:Aa([j,p.encodeLocation?p.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),m,d,o,u);return c&&k?x.createElement(bn.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},k):k}function A0(){let n=H0(),c=g0(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),d=n instanceof Error?n.stack:null,o="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:o},p={padding:"2px 4px",backgroundColor:o},m=null;return console.error("Error handled by React Router default ErrorBoundary:",n),m=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:p},"ErrorBoundary")," or"," ",x.createElement("code",{style:p},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},c),d?x.createElement("pre",{style:u},d):null,m)}var T0=x.createElement(A0,null),Wh=class extends x.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,c){return c.location!==n.location||c.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:c.error,location:c.location,revalidation:n.revalidation||c.revalidation}}componentDidCatch(n,c){this.props.onError?this.props.onError(n,c):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const d=_0(n.digest);d&&(n=d)}let c=n!==void 0?x.createElement(ta.Provider,{value:this.props.routeContext},x.createElement(No.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?x.createElement(M0,{error:n},c):c}};Wh.contextType=v0;var mo=new WeakMap;function M0({children:n,error:c}){let{basename:d}=x.useContext(qt);if(typeof c=="object"&&c&&"digest"in c&&typeof c.digest=="string"){let o=S0(c.digest);if(o){let u=mo.get(c);if(u)throw u;let p=$h(o.location,d);if(Xh&&!mo.get(c))if(p.isExternal||o.reloadDocument)window.location.href=p.absoluteURL||p.to;else{const m=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(p.to,{replace:o.replace}));throw mo.set(c,m),m}return x.createElement("meta",{httpEquiv:"refresh",content:`0;url=${p.absoluteURL||p.to}`})}}return n}function R0({routeContext:n,match:c,children:d}){let o=x.useContext(pl);return o&&o.static&&o.staticContext&&(c.route.errorElement||c.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=c.route.id),x.createElement(ta.Provider,{value:n},d)}function z0(n,c=[],d=null,o=null,u=null){if(n==null){if(!d)return null;if(d.errors)n=d.matches;else if(c.length===0&&!d.initialized&&d.matches.length>0)n=d.matches;else return null}let p=n,m=d?.errors;if(m!=null){let j=p.findIndex(g=>g.route.id&&m?.[g.route.id]!==void 0);We(j>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(m).join(",")}`),p=p.slice(0,Math.min(p.length,j+1))}let f=!1,b=-1;if(d)for(let j=0;j<p.length;j++){let g=p[j];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(b=j),g.route.id){let{loaderData:y,errors:C}=d,N=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!C||C[g.route.id]===void 0);if(g.route.lazy||N){f=!0,b>=0?p=p.slice(0,b+1):p=[p[0]];break}}}let v=d&&o?(j,g)=>{o(j,{location:d.location,params:d.matches?.[0]?.params??{},unstable_pattern:p0(d.matches),errorInfo:g})}:void 0;return p.reduceRight((j,g,y)=>{let C,N=!1,_=null,A=null;d&&(C=m&&g.route.id?m[g.route.id]:void 0,_=g.route.errorElement||T0,f&&(b<0&&y===0?(Ih("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,A=null):b===y&&(N=!0,A=g.route.hydrateFallbackElement||null)));let k=c.concat(p.slice(0,y+1)),O=()=>{let Y;return C?Y=_:N?Y=A:g.route.Component?Y=x.createElement(g.route.Component,null):g.route.element?Y=g.route.element:Y=j,x.createElement(R0,{match:g,routeContext:{outlet:j,matches:k,isDataRoute:d!=null},children:Y})};return d&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?x.createElement(Wh,{location:d.location,revalidation:d.revalidation,component:_,error:C,children:O(),routeContext:{outlet:null,matches:k,isDataRoute:!0},onError:v}):O()},null)}function wo(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function O0(n){let c=x.useContext(pl);return We(c,wo(n)),c}function L0(n){let c=x.useContext(Fi);return We(c,wo(n)),c}function U0(n){let c=x.useContext(ta);return We(c,wo(n)),c}function So(n){let c=U0(n),d=c.matches[c.matches.length-1];return We(d.route.id,`${n} can only be used on routes that contain a unique "id"`),d.route.id}function B0(){return So("useRouteId")}function H0(){let n=x.useContext(No),c=L0("useRouteError"),d=So("useRouteError");return n!==void 0?n:c.errors?.[d]}function q0(){let{router:n}=O0("useNavigate"),c=So("useNavigate"),d=x.useRef(!1);return Ph(()=>{d.current=!0}),x.useCallback(async(u,p={})=>{Ht(d.current,Jh),d.current&&(typeof u=="number"?await n.navigate(u):await n.navigate(u,{fromRouteId:c,...p}))},[n,c])}var Oh={};function Ih(n,c,d){!c&&!Oh[n]&&(Oh[n]=!0,Ht(!1,d))}x.memo(Y0);function Y0({routes:n,future:c,state:d,onError:o}){return Kh(n,void 0,d,o,c)}function F0({to:n,replace:c,state:d,relative:o}){We(bl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=x.useContext(qt);Ht(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:p}=x.useContext(ta),{pathname:m}=Ma(),f=ns(),b=jo(n,yo(p),m,o==="path"),v=JSON.stringify(b);return x.useEffect(()=>{f(JSON.parse(v),{replace:c,state:d,relative:o})},[f,v,o,c,d]),null}function gl(n){We(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function G0({basename:n="/",children:c=null,location:d,navigationType:o="POP",navigator:u,static:p=!1,unstable_useTransitions:m}){We(!bl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),b=x.useMemo(()=>({basename:f,navigator:u,static:p,unstable_useTransitions:m,future:{}}),[f,u,p,m]);typeof d=="string"&&(d=Cs(d));let{pathname:v="/",search:j="",hash:g="",state:y=null,key:C="default"}=d,N=x.useMemo(()=>{let _=Ta(v,f);return _==null?null:{location:{pathname:_,search:j,hash:g,state:y,key:C},navigationType:o}},[f,v,j,g,y,C,o]);return Ht(N!=null,`<Router basename="${f}"> is not able to match the URL "${v}${j}${g}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:x.createElement(qt.Provider,{value:b},x.createElement(bn.Provider,{children:c,value:N}))}function X0({children:n,location:c}){return D0(po(n),c)}function po(n,c=[]){let d=[];return x.Children.forEach(n,(o,u)=>{if(!x.isValidElement(o))return;let p=[...c,u];if(o.type===x.Fragment){d.push.apply(d,po(o.props.children,p));return}We(o.type===gl,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),We(!o.props.index||!o.props.children,"An index route cannot have child routes.");let m={id:o.props.id||p.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(m.children=po(o.props.children,p)),d.push(m)}),d}var Bi="get",Hi="application/x-www-form-urlencoded";function Gi(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function $0(n){return Gi(n)&&n.tagName.toLowerCase()==="button"}function Q0(n){return Gi(n)&&n.tagName.toLowerCase()==="form"}function V0(n){return Gi(n)&&n.tagName.toLowerCase()==="input"}function Z0(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function J0(n,c){return n.button===0&&(!c||c==="_self")&&!Z0(n)}var Li=null;function P0(){if(Li===null)try{new FormData(document.createElement("form"),0),Li=!1}catch{Li=!0}return Li}var K0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ho(n){return n!=null&&!K0.has(n)?(Ht(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hi}"`),null):n}function W0(n,c){let d,o,u,p,m;if(Q0(n)){let f=n.getAttribute("action");o=f?Ta(f,c):null,d=n.getAttribute("method")||Bi,u=ho(n.getAttribute("enctype"))||Hi,p=new FormData(n)}else if($0(n)||V0(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=n.getAttribute("formaction")||f.getAttribute("action");if(o=b?Ta(b,c):null,d=n.getAttribute("formmethod")||f.getAttribute("method")||Bi,u=ho(n.getAttribute("formenctype"))||ho(f.getAttribute("enctype"))||Hi,p=new FormData(f,n),!P0()){let{name:v,type:j,value:g}=n;if(j==="image"){let y=v?`${v}.`:"";p.append(`${y}x`,"0"),p.append(`${y}y`,"0")}else v&&p.append(v,g)}}else{if(Gi(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');d=Bi,o=null,u=Hi,m=n}return p&&u==="text/plain"&&(m=p,p=void 0),{action:o,method:d.toLowerCase(),encType:u,formData:p,body:m}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function _o(n,c){if(n===!1||n===null||typeof n>"u")throw new Error(c)}function I0(n,c,d){let o=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return o.pathname==="/"?o.pathname=`_root.${d}`:c&&Ta(o.pathname,c)==="/"?o.pathname=`${c.replace(/\/$/,"")}/_root.${d}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${d}`,o}async function ep(n,c){if(n.id in c)return c[n.id];try{let d=await import(n.module);return c[n.id]=d,d}catch(d){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(d),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function tp(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function ap(n,c,d){let o=await Promise.all(n.map(async u=>{let p=c.routes[u.route.id];if(p){let m=await ep(p,d);return m.links?m.links():[]}return[]}));return ip(o.flat(1).filter(tp).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function Lh(n,c,d,o,u,p){let m=(b,v)=>d[v]?b.route.id!==d[v].route.id:!0,f=(b,v)=>d[v].pathname!==b.pathname||d[v].route.path?.endsWith("*")&&d[v].params["*"]!==b.params["*"];return p==="assets"?c.filter((b,v)=>m(b,v)||f(b,v)):p==="data"?c.filter((b,v)=>{let j=o.routes[b.route.id];if(!j||!j.hasLoader)return!1;if(m(b,v)||f(b,v))return!0;if(b.route.shouldRevalidate){let g=b.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:d[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function sp(n,c,{includeHydrateFallback:d}={}){return lp(n.map(o=>{let u=c.routes[o.route.id];if(!u)return[];let p=[u.module];return u.clientActionModule&&(p=p.concat(u.clientActionModule)),u.clientLoaderModule&&(p=p.concat(u.clientLoaderModule)),d&&u.hydrateFallbackModule&&(p=p.concat(u.hydrateFallbackModule)),u.imports&&(p=p.concat(u.imports)),p}).flat(1))}function lp(n){return[...new Set(n)]}function np(n){let c={},d=Object.keys(n).sort();for(let o of d)c[o]=n[o];return c}function ip(n,c){let d=new Set;return new Set(c),n.reduce((o,u)=>{let p=JSON.stringify(np(u));return d.has(p)||(d.add(p),o.push({key:p,link:u})),o},[])}function ef(){let n=x.useContext(pl);return _o(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function rp(){let n=x.useContext(Fi);return _o(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Co=x.createContext(void 0);Co.displayName="FrameworkContext";function tf(){let n=x.useContext(Co);return _o(n,"You must render this element inside a <HydratedRouter> element"),n}function cp(n,c){let d=x.useContext(Co),[o,u]=x.useState(!1),[p,m]=x.useState(!1),{onFocus:f,onBlur:b,onMouseEnter:v,onMouseLeave:j,onTouchStart:g}=c,y=x.useRef(null);x.useEffect(()=>{if(n==="render"&&m(!0),n==="viewport"){let _=k=>{k.forEach(O=>{m(O.isIntersecting)})},A=new IntersectionObserver(_,{threshold:.5});return y.current&&A.observe(y.current),()=>{A.disconnect()}}},[n]),x.useEffect(()=>{if(o){let _=setTimeout(()=>{m(!0)},100);return()=>{clearTimeout(_)}}},[o]);let C=()=>{u(!0)},N=()=>{u(!1),m(!1)};return d?n!=="intent"?[p,y,{}]:[p,y,{onFocus:xn(f,C),onBlur:xn(b,N),onMouseEnter:xn(v,C),onMouseLeave:xn(j,N),onTouchStart:xn(g,C)}]:[!1,y,{}]}function xn(n,c){return d=>{n&&n(d),d.defaultPrevented||c(d)}}function op({page:n,...c}){let{router:d}=ef(),o=x.useMemo(()=>qh(d.routes,n,d.basename),[d.routes,n,d.basename]);return o?x.createElement(up,{page:n,matches:o,...c}):null}function dp(n){let{manifest:c,routeModules:d}=tf(),[o,u]=x.useState([]);return x.useEffect(()=>{let p=!1;return ap(n,c,d).then(m=>{p||u(m)}),()=>{p=!0}},[n,c,d]),o}function up({page:n,matches:c,...d}){let o=Ma(),{manifest:u,routeModules:p}=tf(),{basename:m}=ef(),{loaderData:f,matches:b}=rp(),v=x.useMemo(()=>Lh(n,c,b,u,o,"data"),[n,c,b,u,o]),j=x.useMemo(()=>Lh(n,c,b,u,o,"assets"),[n,c,b,u,o]),g=x.useMemo(()=>{if(n===o.pathname+o.search+o.hash)return[];let N=new Set,_=!1;if(c.forEach(k=>{let O=u.routes[k.route.id];!O||!O.hasLoader||(!v.some(Y=>Y.route.id===k.route.id)&&k.route.id in f&&p[k.route.id]?.shouldRevalidate||O.hasClientLoader?_=!0:N.add(k.route.id))}),N.size===0)return[];let A=I0(n,m,"data");return _&&N.size>0&&A.searchParams.set("_routes",c.filter(k=>N.has(k.route.id)).map(k=>k.route.id).join(",")),[A.pathname+A.search]},[m,f,o,u,v,c,n,p]),y=x.useMemo(()=>sp(j,u),[j,u]),C=dp(j);return x.createElement(x.Fragment,null,g.map(N=>x.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...d})),y.map(N=>x.createElement("link",{key:N,rel:"modulepreload",href:N,...d})),C.map(({key:N,link:_})=>x.createElement("link",{key:N,nonce:d.nonce,..._})))}function mp(...n){return c=>{n.forEach(d=>{typeof d=="function"?d(c):d!=null&&(d.current=c)})}}var hp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hp&&(window.__reactRouterVersion="7.11.0")}catch{}function fp({basename:n,children:c,unstable_useTransitions:d,window:o}){let u=x.useRef();u.current==null&&(u.current=Qg({window:o,v5Compat:!0}));let p=u.current,[m,f]=x.useState({action:p.action,location:p.location}),b=x.useCallback(v=>{d===!1?f(v):x.startTransition(()=>f(v))},[d]);return x.useLayoutEffect(()=>p.listen(b),[p,b]),x.createElement(G0,{basename:n,children:c,location:m.location,navigationType:m.action,navigator:p,unstable_useTransitions:d})}var af=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sf=x.forwardRef(function({onClick:c,discover:d="render",prefetch:o="none",relative:u,reloadDocument:p,replace:m,state:f,target:b,to:v,preventScrollReset:j,viewTransition:g,unstable_defaultShouldRevalidate:y,...C},N){let{basename:_,unstable_useTransitions:A}=x.useContext(qt),k=typeof v=="string"&&af.test(v),O=$h(v,_);v=O.to;let Y=C0(v,{relative:u}),[I,$,se]=cp(o,C),V=bp(v,{replace:m,state:f,target:b,preventScrollReset:j,relative:u,viewTransition:g,unstable_defaultShouldRevalidate:y,unstable_useTransitions:A});function X(me){c&&c(me),me.defaultPrevented||V(me)}let xe=x.createElement("a",{...C,...se,href:O.absoluteURL||Y,onClick:O.isExternal||p?c:X,ref:mp(N,$),target:b,"data-discover":!k&&d==="render"?"true":void 0});return I&&!k?x.createElement(x.Fragment,null,xe,x.createElement(op,{page:Y})):xe});sf.displayName="Link";var xp=x.forwardRef(function({"aria-current":c="page",caseSensitive:d=!1,className:o="",end:u=!1,style:p,to:m,viewTransition:f,children:b,...v},j){let g=vn(m,{relative:v.relative}),y=Ma(),C=x.useContext(Fi),{navigator:N,basename:_}=x.useContext(qt),A=C!=null&&wp(g)&&f===!0,k=N.encodeLocation?N.encodeLocation(g).pathname:g.pathname,O=y.pathname,Y=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;d||(O=O.toLowerCase(),Y=Y?Y.toLowerCase():null,k=k.toLowerCase()),Y&&_&&(Y=Ta(Y,_)||Y);const I=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let $=O===k||!u&&O.startsWith(k)&&O.charAt(I)==="/",se=Y!=null&&(Y===k||!u&&Y.startsWith(k)&&Y.charAt(k.length)==="/"),V={isActive:$,isPending:se,isTransitioning:A},X=$?c:void 0,xe;typeof o=="function"?xe=o(V):xe=[o,$?"active":null,se?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let me=typeof p=="function"?p(V):p;return x.createElement(sf,{...v,"aria-current":X,className:xe,ref:j,style:me,to:m,viewTransition:f},typeof b=="function"?b(V):b)});xp.displayName="NavLink";var gp=x.forwardRef(({discover:n="render",fetcherKey:c,navigate:d,reloadDocument:o,replace:u,state:p,method:m=Bi,action:f,onSubmit:b,relative:v,preventScrollReset:j,viewTransition:g,unstable_defaultShouldRevalidate:y,...C},N)=>{let{unstable_useTransitions:_}=x.useContext(qt),A=jp(),k=Np(f,{relative:v}),O=m.toLowerCase()==="get"?"get":"post",Y=typeof f=="string"&&af.test(f),I=$=>{if(b&&b($),$.defaultPrevented)return;$.preventDefault();let se=$.nativeEvent.submitter,V=se?.getAttribute("formmethod")||m,X=()=>A(se||$.currentTarget,{fetcherKey:c,method:V,navigate:d,replace:u,state:p,relative:v,preventScrollReset:j,viewTransition:g,unstable_defaultShouldRevalidate:y});_&&d!==!1?x.startTransition(()=>X()):X()};return x.createElement("form",{ref:N,method:O,action:k,onSubmit:o?b:I,...C,"data-discover":!Y&&n==="render"?"true":void 0})});gp.displayName="Form";function pp(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lf(n){let c=x.useContext(pl);return We(c,pp(n)),c}function bp(n,{target:c,replace:d,state:o,preventScrollReset:u,relative:p,viewTransition:m,unstable_defaultShouldRevalidate:f,unstable_useTransitions:b}={}){let v=ns(),j=Ma(),g=vn(n,{relative:p});return x.useCallback(y=>{if(J0(y,c)){y.preventDefault();let C=d!==void 0?d:pn(j)===pn(g),N=()=>v(n,{replace:C,state:o,preventScrollReset:u,relative:p,viewTransition:m,unstable_defaultShouldRevalidate:f});b?x.startTransition(()=>N()):N()}},[j,v,g,d,o,c,n,u,p,m,f,b])}var vp=0,yp=()=>`__${String(++vp)}__`;function jp(){let{router:n}=lf("useSubmit"),{basename:c}=x.useContext(qt),d=B0(),o=n.fetch,u=n.navigate;return x.useCallback(async(p,m={})=>{let{action:f,method:b,encType:v,formData:j,body:g}=W0(p,c);if(m.navigate===!1){let y=m.fetcherKey||yp();await o(y,d,m.action||f,{unstable_defaultShouldRevalidate:m.unstable_defaultShouldRevalidate,preventScrollReset:m.preventScrollReset,formData:j,body:g,formMethod:m.method||b,formEncType:m.encType||v,flushSync:m.flushSync})}else await u(m.action||f,{unstable_defaultShouldRevalidate:m.unstable_defaultShouldRevalidate,preventScrollReset:m.preventScrollReset,formData:j,body:g,formMethod:m.method||b,formEncType:m.encType||v,replace:m.replace,state:m.state,fromRouteId:d,flushSync:m.flushSync,viewTransition:m.viewTransition})},[o,u,c,d])}function Np(n,{relative:c}={}){let{basename:d}=x.useContext(qt),o=x.useContext(ta);We(o,"useFormAction must be used inside a RouteContext");let[u]=o.matches.slice(-1),p={...vn(n||".",{relative:c})},m=Ma();if(n==null){p.search=m.search;let f=new URLSearchParams(p.search),b=f.getAll("index");if(b.some(j=>j==="")){f.delete("index"),b.filter(g=>g).forEach(g=>f.append("index",g));let j=f.toString();p.search=j?`?${j}`:""}}return(!n||n===".")&&u.route.index&&(p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index"),d!=="/"&&(p.pathname=p.pathname==="/"?d:Aa([d,p.pathname])),pn(p)}function wp(n,{relative:c}={}){let d=x.useContext(Vh);We(d!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=lf("useViewTransitionState"),u=vn(n,{relative:c});if(!d.isTransitioning)return!1;let p=Ta(d.currentLocation.pathname,o)||d.currentLocation.pathname,m=Ta(d.nextLocation.pathname,o)||d.nextLocation.pathname;return qi(u.pathname,m)!=null||qi(u.pathname,p)!=null}var Tt=Hh();const Sp=Lg(Tt),gn={companyName:"SanctumEMHR",systemName:"Electronic Mental Health Record",tagline:"Where modern design meets clinical insight.",logoText:"S",logoUrl:"/app/SanctumLogo.png",colors:{primary:"#6B9AC4",secondary:"#A8C5A5",accent:"#E8DCC4"}};function _p(){const n=ns(),[c,d]=x.useState(""),[o,u]=x.useState(""),[p,m]=x.useState(!1),[f,b]=x.useState(""),v=async j=>{j.preventDefault(),m(!0),b("");try{const g=await fetch("/custom/api/login.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:c,password:o})}),y=await g.json();if(!g.ok){y.error==="Account locked"?b(y.message||"This account has been locked due to multiple failed login attempts. Please contact an administrator."):y.error==="Account inactive"?b(y.message||"This account has been deactivated. Please contact an administrator."):b(y.error||"Invalid username or password");return}y.success?(y.user&&localStorage.setItem("user",JSON.stringify(y.user)),n("/dashboard")):b(y.error||"Login failed")}catch(g){console.error("Login error:",g),b("An error occurred during login. Please try again.")}finally{m(!1)}};return e.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-mental"}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"particle particle-1"}),e.jsx("div",{className:"particle particle-2"}),e.jsx("div",{className:"particle particle-3"}),e.jsx("div",{className:"particle particle-4"}),e.jsx("div",{className:"particle particle-5"})]}),e.jsx("div",{className:"relative z-10 w-full max-w-6xl mx-4",children:e.jsx("div",{className:"rounded-3xl overflow-hidden",style:{backdropFilter:"blur(60px) saturate(180%)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0.4) 100%)",boxShadow:"0 8px 32px rgba(107, 154, 196, 0.12), 0 2px 8px rgba(0, 0, 0, 0.06), inset 0 1px 0 rgba(255, 255, 255, 0.8)",border:"1px solid rgba(255, 255, 255, 0.6)"},children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[e.jsx("div",{className:"p-8 flex flex-col items-center justify-center",children:e.jsx("div",{className:"w-full max-w-lg rounded-2xl p-6",style:{backdropFilter:"blur(40px)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.1) 100%)",boxShadow:"0 4px 16px rgba(107, 154, 196, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.3)",border:"1px solid rgba(255, 255, 255, 0.3)"},children:gn.logoUrl?e.jsx("img",{src:gn.logoUrl,alt:`${gn.companyName} logo`,className:"w-full h-auto object-contain"}):e.jsx("div",{className:"text-9xl text-gray-700 font-bold text-center",children:gn.logoText})})}),e.jsxs("div",{className:"p-8",children:[e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-800 text-sm font-semibold mb-2",children:"Username"}),e.jsx("input",{type:"text",value:c,onChange:j=>d(j.target.value),className:"input-lg",placeholder:"Enter your username",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-800 text-sm font-semibold mb-2",children:"Password"}),e.jsx("input",{type:"password",value:o,onChange:j=>u(j.target.value),className:"input-lg",placeholder:"Enter your password",required:!0})]}),f&&e.jsx("div",{className:"error-message",children:f}),e.jsx("button",{type:"submit",disabled:p,className:"btn-search w-full disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Signing in...":"Sign In"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full border",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.7) 0%, rgba(255, 255, 255, 0.6) 100%)",backdropFilter:"blur(40px)",borderColor:"rgba(255, 255, 255, 0.7)",boxShadow:"0 2px 8px rgba(107, 154, 196, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.9)"},children:[e.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700 text-xs font-semibold",children:"HIPAA Compliant & Secure"})]})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-gray-600 text-xs",children:"Version 0.3.0-alpha"})}),e.jsxs("div",{className:"mt-6 text-center border-t border-white/30 pt-4",children:[e.jsx("p",{className:"text-gray-600 text-xs",children:"SanctumEMHR is Copyright  2026 Sacred Wandering"}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Proprietary and Confidential"})]})]})]})})})]})}function Cp({user:n,onLogout:c,setActiveNav:d}){return e.jsxs("div",{className:"flex items-center gap-3 bg-white/40 backdrop-blur-sm rounded-2xl px-4 py-2 border border-white/50",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white font-bold text-sm",children:n.initials})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:n.name}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("button",{onClick:()=>d("settings"),className:"text-xs text-gray-600 hover:text-gray-900 transition-all",children:"Settings"}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("button",{onClick:c,className:"text-xs text-gray-600 hover:text-gray-900 transition-all",children:"Sign Out"})]})]})]})}function kp({branding:n,today:c,user:d,onLogout:o,setActiveNav:u}){return e.jsx("header",{className:"relative z-10 backdrop-blur-3xl bg-white/45 shadow-lg border-b border-white/60 sticky top-0",style:{boxShadow:"0 4px 16px rgba(107, 154, 196, 0.1), inset 0 -1px 0 rgba(255, 255, 255, 0.8)"},children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center border overflow-hidden",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.7) 0%, rgba(255, 255, 255, 0.6) 100%)",backdropFilter:"blur(40px)",borderColor:"rgba(255, 255, 255, 0.7)",boxShadow:"0 4px 12px rgba(107, 154, 196, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.9)"},children:[n.logoUrl?e.jsx("img",{src:n.logoUrl,alt:n.companyName,className:"w-full h-full object-contain p-1",onError:p=>{p.target.style.display="none",p.target.nextSibling.style.display="block"}}):null,e.jsx("span",{className:"text-xl font-bold text-gray-700",style:{display:n.logoUrl?"none":"block"},children:n.logoText})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:n.companyName}),e.jsx("p",{className:"text-xs text-gray-600",children:c})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{className:"relative p-2 rounded-xl transition-all border border-transparent",style:{transition:"all 300ms"},onMouseEnter:p=>{p.target.style.background="rgba(255, 255, 255, 0.4)",p.target.style.backdropFilter="blur(20px)",p.target.style.borderColor="rgba(255, 255, 255, 0.5)"},onMouseLeave:p=>{p.target.style.background="transparent",p.target.style.backdropFilter="none",p.target.style.borderColor="transparent"},children:[e.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),d?.unreadMessages>0&&e.jsx("span",{className:"absolute top-1 right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center border-2 border-white",children:d.unreadMessages})]}),e.jsx(Cp,{user:d,onLogout:o,setActiveNav:u})]})]})})})}function Ep(){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-mental"}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"particle particle-1"}),e.jsx("div",{className:"particle particle-2"}),e.jsx("div",{className:"particle particle-3"}),e.jsx("div",{className:"particle particle-4"}),e.jsx("div",{className:"particle particle-5"})]})]})}function Dp({item:n,isActive:c,onClick:d}){const o=ns(),u=()=>{d(),o("/dashboard",{state:{activeNav:n.id}})};return e.jsx("button",{onClick:u,className:c?"nav-main-active":"nav-main-inactive",children:n.label})}function Ap({activeNav:n,setActiveNav:c,user:d}){const o=d?.permissions?.includes("admin")||d?.permissions?.includes("emergency_login"),u=[{id:"dashboard",label:"Dashboard"},{id:"calendar",label:"Calendar"},{id:"clients",label:"Clients"},{id:"messages",label:"Messages"},{id:"billing",label:"Billing"},{id:"reports",label:"Reports"},...o?[{id:"admin",label:"Admin Settings"}]:[]];return e.jsx("nav",{className:"rounded-3xl p-2",style:{backdropFilter:"blur(60px) saturate(180%)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0.4) 100%)",boxShadow:"0 8px 32px rgba(107, 154, 196, 0.12), 0 2px 8px rgba(0, 0, 0, 0.06), inset 0 1px 0 rgba(255, 255, 255, 0.8)",border:"1px solid rgba(255, 255, 255, 0.6)"},children:e.jsx("div",{className:"flex gap-2",children:u.map(p=>e.jsx(Dp,{item:p,isActive:n===p.id,onClick:()=>c(p.id)},p.id))})})}function nf({user:n,activeNav:c,setActiveNav:d,today:o,children:u,onLogout:p,wide:m=!1}){const f=m?"max-w-[1600px]":"max-w-7xl";return e.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[e.jsx(Ep,{}),e.jsx(kp,{branding:gn,today:o,user:n,onLogout:p,setActiveNav:d}),e.jsx("div",{className:`relative z-10 ${f} mx-auto px-6 pt-6`,children:e.jsx(Ap,{activeNav:c,setActiveNav:d,user:n})}),e.jsx("main",{className:`relative z-10 ${f} mx-auto px-6 py-8`,children:u})]})}function Tp(){const n=new Date().getHours();return n>=5&&n<12?"Good morning":n>=12&&n<17?"Good afternoon":"Good evening"}function Mp(){return e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:[Tp(),"!"]}),e.jsx("p",{className:"text-gray-600",children:"Here's what's happening today."})]})}function Ui({value:n,label:c,trend:d,gradientFrom:o,gradientTo:u,icon:p}){const m=d.direction==="up"?c==="Unbilled Appointments"?"text-red-600":"text-green-600":c==="Unbilled Appointments"?"text-green-600":"text-red-600",f=c==="Active Clients"?"-":"+";return e.jsxs("div",{className:"card-main transform hover:scale-105 transition-all hover:shadow-3xl",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${o} ${u} rounded-2xl flex items-center justify-center shadow-lg`,children:p})}),e.jsx("div",{className:"text-4xl font-bold text-gray-800 mb-1",children:n}),e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-2",children:c}),e.jsxs("div",{className:`text-xs font-semibold flex items-center gap-1 ${m}`,children:[d.direction==="up"?"":""," ",f,d.change," ",d.label]})]})}function Rp({stats:n}){return e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(Ui,{value:n.todayAppointments.value,label:"Today's Appointments",trend:n.todayAppointments.trend,gradientFrom:"from-blue-400",gradientTo:"to-blue-600",icon:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx(Ui,{value:n.unbilledAppointments.value,label:"Unbilled Appointments",trend:n.unbilledAppointments.trend,gradientFrom:"from-amber-400",gradientTo:"to-orange-600",icon:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx(Ui,{value:n.sessionsYTD.value,label:"Sessions This Year",trend:n.sessionsYTD.trend,gradientFrom:"from-green-400",gradientTo:"to-emerald-600",icon:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx(Ui,{value:n.activeClients.value,label:"Active Clients",trend:n.activeClients.trend,gradientFrom:"from-purple-400",gradientTo:"to-purple-600",icon:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})]})}function zp({onNewClient:n,onNewAppointment:c}){return e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:c,className:"btn-action btn-primary",children:"+ New Appointment"}),e.jsx("button",{onClick:n,className:"btn-action btn-success",children:"+ Add New Client"})]})]})}function Op({todaysAppointments:n,onAppointmentClick:c}){return e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"card-main",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h3",{className:"text-lg font-bold text-gray-800",children:["Today's Appointments (",n.length,")"]})}),e.jsx("div",{className:"space-y-3",children:n.map((d,o)=>e.jsx("div",{onClick:()=>c&&c(d),className:`${d.isNext?"backdrop-blur-2xl bg-gradient-to-r from-blue-500/40 to-purple-500/40 border-white/60":"backdrop-blur-xl bg-white/60"} rounded-2xl p-5 border-2 ${d.isNext?"border-blue-400":"border-transparent"} cursor-pointer hover:shadow-xl transition-all hover:scale-[1.02]`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[d.isNext&&e.jsx("div",{className:"w-12 h-12 bg-white/90 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[d.isNext&&e.jsxs("p",{className:"text-xs font-bold text-white/90 mb-1",children:["NEXT UP  ",d.minutesUntil," minutes"]}),e.jsxs("p",{className:`text-lg font-bold ${d.isNext?"text-white":"text-gray-800"}`,children:[d.time,"  ",d.client]}),e.jsxs("p",{className:`text-sm mt-1 ${d.isNext?"text-white/80":"text-gray-600"}`,children:[d.type,"  ",d.duration,d.room&&`  ${d.room}`,d.participants&&`  ${d.participants}`]})]})]}),d.isNext&&e.jsx("button",{className:"px-4 py-2 bg-white/90 hover:bg-white text-blue-600 font-semibold rounded-xl transition-all shadow-md hover:shadow-lg text-sm",children:"View Details"})]})},o))})]})})}async function Ae(n,c={}){const d=await fetch(n,{...c,credentials:"include",headers:{"Content-Type":"application/json",...c.headers}}),o=await d.json();if(!d.ok)throw d.status===401?(c.noRedirect||(localStorage.removeItem("user"),window.location.href="/app/"),new Error("Authentication required")):new Error(o.message||o.error||`API request failed: ${d.statusText}`);return o}function Xi(){const n=localStorage.getItem("user");if(!n)return null;try{return JSON.parse(n)}catch(c){return console.error("Error parsing user data:",c),null}}async function Lp(){try{const n=await Ae("/custom/api/session_user.php",{noRedirect:!0});if(console.log("Session user response:",n),n&&n.username)return localStorage.setItem("user",JSON.stringify(n)),{id:n.id||null,fname:n.firstName||n.fname||"",lname:n.lastName||n.lname||"",fullName:n.fullName||n.fullName||"",displayName:n.displayName||n.fullName||"",admin:n.isAdmin||n.admin||!1,username:n.username||null}}catch(n){console.log("Session user fetch failed:",n.message)}return null}async function rf(n){if(!n||n.trim()==="")return[];const c=n.trim().split(/\s+/),d=new URLSearchParams;return c.length===1?d.append("fname",c[0]):c.length>=2&&(d.append("fname",c[0]),d.append("lname",c[c.length-1])),Ae(`/custom/api/patient_search.php?${d.toString()}`)}async function cf(){return Ae("/custom/api/client_stats.php")}async function Up(){return Ae("/custom/api/client_demographics.php")}async function Bp(n="all"){const c=n!=="all"?`?status=${n}`:"";return Ae(`/custom/api/client_list.php${c}`)}async function of(n){return console.log("Fetching client detail for ID:",n),Ae(`/custom/api/client_detail.php?id=${n}`)}async function Hp(n){return console.log("Fetching encounter detail for ID:",n),Ae(`/custom/api/encounter_detail.php?encounter_id=${n}`)}async function bo(n){return console.log("Creating clinical note:",n),Ae("/custom/api/notes/create_note.php",{method:"POST",body:JSON.stringify(n)})}async function qp(n,c={}){console.log("Fetching patient notes for ID:",n);const d=new URLSearchParams({patient_id:n});return c.note_type&&d.append("note_type",c.note_type),c.status&&d.append("status",c.status),c.start_date&&d.append("start_date",c.start_date),c.end_date&&d.append("end_date",c.end_date),Ae(`/custom/api/notes/get_patient_notes.php?${d.toString()}`)}async function df(n,c=!1){console.log("Fetching note:",n);const d=c?`note_uuid=${n}`:`note_id=${n}`;return Ae(`/custom/api/notes/get_note.php?${d}`)}async function Uh(n,c){return console.log("Updating note:",n),Ae("/custom/api/notes/update_note.php",{method:"POST",body:JSON.stringify({noteId:n,...c})})}async function Yp(n){return Ae("/custom/api/notes/autosave_note.php",{method:"POST",body:JSON.stringify(n)})}async function uf(n,c=null){return console.log("Signing note:",n),Ae("/custom/api/notes/sign_note.php",{method:"POST",body:JSON.stringify({noteId:n,signatureData:c})})}async function Fp(n){return console.log("Deleting note:",n),Ae("/custom/api/notes/delete_note.php",{method:"DELETE",body:JSON.stringify({note_id:n})})}async function Gp(n={}){console.log("Fetching interventions");const c=new URLSearchParams;n.tier&&c.append("tier",n.tier),n.modality&&c.append("modality",n.modality),n.include_inactive&&c.append("include_inactive",n.include_inactive);const d=c.toString();return Ae(`/custom/api/notes/get_interventions.php${d?"?"+d:""}`)}async function mf(n,c={}){console.log("Fetching treatment goals for patient:",n);const d=new URLSearchParams({patient_id:n});return c.status&&d.append("status",c.status),c.include_all&&d.append("include_all",c.include_all),Ae(`/custom/api/notes/get_treatment_goals.php?${d.toString()}`)}async function Xp(n,c="ICD10",d=50){console.log("Searching codes:",{searchTerm:n,codeType:c,limit:d});const o=new URLSearchParams({search:n,code_type:c,limit:d.toString()});return Ae(`/custom/api/search_codes.php?${o.toString()}`)}async function $p(n,c={}){console.log("Fetching patient diagnoses:",{patientId:n,options:c});const d=new URLSearchParams({patient_id:n.toString()});return c.activeAsOf&&d.append("active_as_of",c.activeAsOf),c.includeRetired!==void 0&&d.append("include_retired",c.includeRetired?"1":"0"),Ae(`/custom/api/get_patient_diagnoses.php?${d.toString()}`)}async function Qp(n){console.log("Fetching draft:",n);const c=new URLSearchParams;return n.note_id&&c.append("note_id",n.note_id),n.appointment_id&&c.append("appointment_id",n.appointment_id),n.patient_id&&c.append("patient_id",n.patient_id),Ae(`/custom/api/notes/get_draft.php?${c.toString()}`)}async function Vp(){return console.log("Fetching clinical settings"),Ae("/custom/api/notes/get_clinical_settings.php")}async function Zp(n){return console.log("Fetching billing for patient ID:",n),Ae(`/custom/api/billing.php?patient_id=${n}`)}async function Jp(n,c){return console.log("Updating demographics for patient ID:",n),Ae("/custom/api/update_demographics.php",{method:"POST",body:JSON.stringify({patient_id:n,...c})})}async function Pp(n){return console.log("Creating new client:",n.fname,n.lname),Ae("/custom/api/create_client.php",{method:"POST",body:JSON.stringify(n)})}async function ca(n){return console.log("Fetching list options for:",n),Ae(`/custom/api/get_list_options.php?list_id=${n}`)}async function ko(){return console.log("Fetching providers list"),Ae("/custom/api/get_providers.php")}async function fo(n){return console.log("Fetching related persons for patient:",n),Ae(`/custom/api/get_related_persons.php?patient_id=${n}`)}async function Kp(n){return console.log("Saving related person:",n),Ae("/custom/api/save_related_person.php",{method:"POST",body:JSON.stringify(n)})}async function Wp(n){return console.log("Deleting related person relation:",n),Ae("/custom/api/delete_related_person.php",{method:"POST",body:JSON.stringify({relation_id:n})})}async function Ip(n,c){return console.log("Updating insurance ID:",n),Ae("/custom/api/update_insurance.php",{method:"POST",body:JSON.stringify({insurance_id:n,...c})})}async function eb(){return console.log("Fetching insurance companies list"),Ae("/custom/api/get_insurance_companies.php")}async function hf(){return console.log("Fetching calendar settings"),Ae("/custom/api/get_calendar_settings.php")}async function tb(n){return console.log("Updating calendar settings:",n),Ae("/custom/api/update_calendar_settings.php",{method:"POST",body:JSON.stringify(n)})}async function Eo(n,c,d=null){console.log("Fetching appointments from",n,"to",c);const o=new URLSearchParams({start_date:n,end_date:c});return d&&d!=="all"&&o.append("provider_id",d),Ae(`/custom/api/get_appointments.php?${o.toString()}`)}async function ff(n=0){console.log("Fetching appointment categories (type:",n,")");const c=n!==null?`?type=${n}`:"";return Ae(`/custom/api/get_appointment_categories.php${c}`)}async function ab(){return console.log("Fetching rooms list"),Ae("/custom/api/get_rooms.php")}async function sb(n){return console.log("Fetching supervisees for supervisor:",n),Ae(`/custom/api/get_supervisees.php?supervisor_id=${n}`)}async function xf(n){return console.log("Creating appointment:",n),Ae("/custom/api/create_appointment.php",{method:"POST",body:JSON.stringify(n)})}async function gf(n,c){return console.log("Updating appointment:",n,c),Ae("/custom/api/update_appointment.php",{method:"POST",body:JSON.stringify({appointmentId:n,...c})})}async function pf(n,c=null){return console.log("Deleting appointment:",n,c),Ae("/custom/api/delete_appointment.php",{method:"POST",body:JSON.stringify({appointmentId:n,seriesData:c})})}async function bf(){try{await fetch("/custom/api/session_logout.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})}catch(n){console.error("Logout error:",n)}finally{localStorage.removeItem("user"),window.location.href="/app/"}}function lb(){const n=[{age:"3 days ago",color:"border-red-400"},{age:"2 days ago",color:"border-amber-400"},{age:"Yesterday",color:"border-yellow-400"}];return e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Pending Documentation"}),e.jsx("div",{className:"space-y-3",children:n.map((c,d)=>e.jsxs("div",{className:`backdrop-blur-xl bg-white/60 ${c.color} border-l-4 rounded-2xl p-4 cursor-pointer hover:shadow-lg transition-all hover:bg-white/70`,children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:c.age}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Complete session note"})]},d))})]})}function vf({onClose:n,onClientCreated:c}){const[d,o]=x.useState({fname:"",mname:"",lname:"",DOB:"",sex:"",ss:"",street:"",city:"",state:"",postal_code:"",phone_cell:"",phone_home:"",email:"",care_team_status:"active"}),[u,p]=x.useState(!1),[m,f]=x.useState(null),b=(j,g)=>{o(y=>({...y,[j]:g}))},v=async j=>{j.preventDefault(),p(!0),f(null);try{if(!d.fname||!d.lname)throw new Error("First name and last name are required");if(!d.DOB)throw new Error("Date of birth is required");if(d.email&&!d.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/))throw new Error("Invalid email format");const g=await Pp(d);c&&g.patient_id&&c(g.patient_id),n()}catch(g){f(g.message||"Failed to create client")}finally{p(!1)}};return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container modal-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"New Client"}),e.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:v,className:"modal-body",children:[m&&e.jsx("div",{className:"error-message",children:m}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:d.fname,onChange:j=>b("fname",j.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Middle Name"}),e.jsx("input",{type:"text",value:d.mname,onChange:j=>b("mname",j.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Last Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:d.lname,onChange:j=>b("lname",j.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Date of Birth ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",required:!0,value:d.DOB,onChange:j=>b("DOB",j.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Sex"}),e.jsxs("select",{value:d.sex,onChange:j=>b("sex",j.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Social Security Number"}),e.jsx("input",{type:"text",value:d.ss,onChange:j=>b("ss",j.target.value),placeholder:"XXX-XX-XXXX",maxLength:"11",className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:d.care_team_status,onChange:j=>b("care_team_status",j.target.value),className:"input-field",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"discharged",children:"Discharged"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Street Address"}),e.jsx("input",{type:"text",value:d.street,onChange:j=>b("street",j.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"City"}),e.jsx("input",{type:"text",value:d.city,onChange:j=>b("city",j.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"State"}),e.jsx("input",{type:"text",value:d.state,onChange:j=>b("state",j.target.value),maxLength:"2",placeholder:"CA",className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Postal Code"}),e.jsx("input",{type:"text",value:d.postal_code,onChange:j=>b("postal_code",j.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mobile Phone"}),e.jsx("input",{type:"tel",value:d.phone_cell,onChange:j=>b("phone_cell",j.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Home Phone"}),e.jsx("input",{type:"tel",value:d.phone_home,onChange:j=>b("phone_home",j.target.value),className:"input-field"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:d.email,onChange:j=>b("email",j.target.value),className:"input-field"})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:n,disabled:u,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u,className:"btn-action btn-primary btn-compact disabled:opacity-50",children:u?"Creating Client...":"Create Client"})]})]})]})})}function nb(){const n=ns(),[c,d]=x.useState(""),[o,u]=x.useState([]),[p,m]=x.useState(!1),[f,b]=x.useState(""),[v,j]=x.useState(!1),[g,y]=x.useState({activeClients:0,inactiveClients:0,dischargedClients:0,todayClients:0}),[C,N]=x.useState(!0),[_,A]=x.useState([]),[k,O]=x.useState(!0),[Y,I]=x.useState("active"),[$,se]=x.useState(!1);x.useEffect(()=>{(async()=>{try{const z=await cf();y(z)}catch(z){console.error("Failed to fetch data:",z)}finally{N(!1)}})()},[]),x.useEffect(()=>{(async()=>{try{O(!0);const z=await Bp(Y);A(z||[])}catch(z){console.error("Failed to fetch clients:",z),A([])}finally{O(!1)}})()},[Y]);const V=async q=>{if(q.preventDefault(),!c.trim()){b("Please enter a search term");return}m(!0),b(""),j(!0);try{const z=await rf(c);u(z||[])}catch(z){console.error("Search error:",z),b("Failed to search patients. Please try again."),u([])}finally{m(!1)}},X=q=>{console.log("=== CLICKING CLIENT ==="),console.log("Patient ID:",q),console.log("About to navigate to:",`/clients/${q}`),n(`/clients/${q}`),console.log("Navigate called")},xe=q=>{console.log("New client created with ID:",q),n(`/clients/${q}`)},me=q=>{if(!q)return"N/A";try{return new Date(q).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},fe=q=>{const z=(q||"").toLowerCase();return z==="active"?"badge-solid-success":z==="inactive"?"badge-solid-warning":"badge-solid-neutral"};return e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"w-80 flex-shrink-0 space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:"Clients"}),e.jsx("p",{className:"text-gray-600 text-xs",children:"Manage client records"})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-4",children:"Caseload Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"stat-box",children:C?e.jsxs("div",{className:"skeleton-pulse",children:[e.jsx("div",{className:"h-3 bg-gray-300 rounded w-16 mb-2"}),e.jsx("div",{className:"h-6 bg-gray-300 rounded w-8"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:g.activeClients})]})}),e.jsx("div",{className:"stat-box",children:C?e.jsxs("div",{className:"skeleton-pulse",children:[e.jsx("div",{className:"h-3 bg-gray-300 rounded w-16 mb-2"}),e.jsx("div",{className:"h-6 bg-gray-300 rounded w-8"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Inactive"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:g.inactiveClients})]})}),e.jsx("div",{className:"stat-box",children:C?e.jsxs("div",{className:"skeleton-pulse",children:[e.jsx("div",{className:"h-3 bg-gray-300 rounded w-16 mb-2"}),e.jsx("div",{className:"h-6 bg-gray-300 rounded w-8"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Discharged"}),e.jsx("p",{className:"text-2xl font-bold text-gray-500",children:g.dischargedClients})]})})]})]}),e.jsx(lb,{})]}),e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsx("div",{className:"card-main",children:e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-gray-800 text-sm font-semibold mb-2",children:"Search by Name"}),e.jsx("input",{type:"text",value:c,onChange:q=>d(q.target.value),className:"input-lg",placeholder:"Enter client name..."})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"submit",disabled:p,className:"btn-search disabled:opacity-50 disabled:cursor-not-allowed",children:p?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Searching..."]}):"Search"})})]}),f&&e.jsx("div",{className:"error-message",children:f})]})}),v&&e.jsx("div",{className:"card-main",children:p?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"spinner spinner-md mx-auto"}),e.jsx("p",{className:"text-label mt-3",children:"Searching..."})]}):o.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("p",{className:"text-gray-600",children:['No clients found matching "',c,'"']}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Try a different search term"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-label",children:["Found ",o.length," client",o.length!==1?"s":""]})}),o.map(q=>e.jsx("div",{onClick:()=>X(q.id||q.pid),className:"card-item",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:[q.fname," ",q.lname]}),e.jsxs("div",{className:"flex gap-6 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"DOB:"})," ",me(q.DOB)]}),q.phone_cell&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",q.phone_cell]})]})]}),e.jsx("div",{className:"ml-4",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},q.id||q.pid))]})}),e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Client List"}),e.jsxs("button",{onClick:()=>se(!0),className:"btn-solid btn-solid-green btn-icon",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Client"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>I("active"),className:`filter-btn-enhanced ${Y==="active"?"filter-btn-active-base bg-green-500":"filter-btn-inactive"}`,children:"Active"}),e.jsx("button",{onClick:()=>I("inactive"),className:`filter-btn-enhanced ${Y==="inactive"?"filter-btn-active-base bg-yellow-500":"filter-btn-inactive"}`,children:"Inactive"}),e.jsx("button",{onClick:()=>I("discharged"),className:`filter-btn-enhanced ${Y==="discharged"?"filter-btn-active-base bg-gray-500":"filter-btn-inactive"}`,children:"Discharged"}),e.jsx("button",{onClick:()=>I("all"),className:`filter-btn-enhanced ${Y==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Clients"})]})]}),k?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"spinner spinner-lg mx-auto"}),e.jsx("p",{className:"text-label mt-4",children:"Loading clients..."})]}):_.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("p",{className:"text-gray-600 text-lg",children:["No ",Y!=="all"?Y:""," clients found"]})]}):e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-label",children:[_.length," ",Y!=="all"?Y:""," client",_.length!==1?"s":""]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(q=>e.jsxs("div",{onClick:()=>X(q.pid),className:"card-item",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-800",children:[q.fname," ",q.lname]}),e.jsx("span",{className:fe(q.care_team_status),children:(q.care_team_status||"Unknown").toUpperCase()})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Age:"})," ",q.age]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"DOB:"})," ",me(q.DOB)]}),(q.phone_cell||q.phone_home)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",q.phone_cell||q.phone_home]})]})]},q.pid))})]})]})]}),$&&e.jsx(vf,{onClose:()=>se(!1),onClientCreated:xe})]})}function ib(){const[n,c]=x.useState({age:[],gender:[],race:[],ethnicity:[]}),[d,o]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const m=await Up();c(m)}catch(m){console.error("Failed to fetch demographics:",m)}finally{o(!1)}})()},[]);const u=(p,m)=>{if(!p||p.length===0)return e.jsx("div",{className:"text-gray-500 text-sm text-center py-4",children:"No data available"});const f=p.reduce((b,v)=>b+v.count,0);return e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:m}),e.jsx("div",{className:"space-y-2",children:p.map((b,v)=>{const j=f>0?b.count/f*100:0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-gray-600",children:b.category}),e.jsx("span",{className:"text-gray-500 font-semibold",children:b.count})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${j}%`}})})]},v)})})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:"Reports"}),e.jsx("p",{className:"text-gray-600 text-xs",children:"Analytics and demographic insights"})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-4",children:"Active Demographics"}),d?e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(p=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-3 bg-gray-300 rounded w-20 mb-2"}),e.jsx("div",{className:"h-2 bg-gray-300 rounded"})]},p))}):e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{children:u(n.age,"Age Range")}),e.jsx("div",{children:u(n.gender,"Gender")}),e.jsx("div",{children:u(n.race,"Race")}),e.jsx("div",{children:u(n.ethnicity,"Ethnicity")})]})]})]})}function rb({currentDate:n,onDateClick:c}){const[d,o]=x.useState(new Date(n)),u=N=>{const _=N.getFullYear(),A=N.getMonth();return new Date(_,A+1,0).getDate()},p=N=>{const _=N.getFullYear(),A=N.getMonth();return new Date(_,A,1).getDay()},m=()=>{const N=u(d),_=p(d),A=[];for(let k=0;k<_;k++)A.push(null);for(let k=1;k<=N;k++)A.push(k);return A},f=()=>{const N=new Date(d);N.setMonth(N.getMonth()-1),o(N)},b=()=>{const N=new Date(d);N.setMonth(N.getMonth()+1),o(N)},v=N=>{if(!N)return;const _=new Date(d.getFullYear(),d.getMonth(),N);c(_)},j=N=>{if(!N)return!1;const _=new Date;return N===_.getDate()&&d.getMonth()===_.getMonth()&&d.getFullYear()===_.getFullYear()},g=N=>{if(!N)return!1;const _=new Date(d.getFullYear(),d.getMonth(),N),A=Y=>{const I=new Date(Y),$=I.getDay(),se=I.getDate()-$;return new Date(I.setDate(se))},k=A(_),O=A(n);return k.toDateString()===O.toDateString()},y=m(),C=["S","M","T","W","T","F","S"];return e.jsxs("div",{className:"select-none",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("button",{onClick:f,className:"p-1 hover:bg-gray-100 rounded transition-colors","aria-label":"Previous month",children:e.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:d.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:b,className:"p-1 hover:bg-gray-100 rounded transition-colors","aria-label":"Next month",children:e.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[C.map((N,_)=>e.jsx("div",{className:"text-center text-xs font-medium text-gray-500 py-1",children:N},_)),y.map((N,_)=>{const A=j(N),k=g(N);return e.jsx("button",{onClick:()=>v(N),disabled:!N,className:`
                aspect-square flex items-center justify-center text-sm rounded-lg
                transition-colors
                ${N?"":"invisible"}
                ${A?"bg-blue-600 text-white font-bold hover:bg-blue-700":""}
                ${!A&&k?"bg-blue-100 text-blue-900 font-semibold":""}
                ${!A&&!k?"hover:bg-gray-100 text-gray-700":""}
              `,children:N},_)})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 text-xs text-gray-600 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded"}),e.jsx("span",{children:"Today"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-100 border border-blue-300 rounded"}),e.jsx("span",{children:"Selected week"})]})]})]})}function yf({isOpen:n,onClose:c,onSave:d,initialDate:o,initialTime:u,providerId:p,providers:m,appointment:f}){const[b,v]=x.useState(!1),[j,g]=x.useState(null),[y,C]=x.useState(null),[N,_]=x.useState(null),[A,k]=x.useState(null),[O,Y]=x.useState(""),[I,$]=x.useState(""),[se,V]=x.useState(p||""),[X,xe]=x.useState(""),[me,fe]=x.useState(o||new Date().toISOString().split("T")[0]),[q,z]=x.useState(u||"09:00"),[H,D]=x.useState(50),[S,E]=x.useState(""),[U,ne]=x.useState(""),[pe,T]=x.useState(""),[L,W]=x.useState(""),[F,he]=x.useState(null),[P,de]=x.useState(null),[_e,ee]=x.useState(!1),[M,oe]=x.useState({mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1}),[ue,be]=x.useState("1"),[ce,te]=x.useState("count"),[we,Ce]=x.useState(10),[qe,Ve]=x.useState(""),[lt,jt]=x.useState(!1),[aa,is]=x.useState("single"),[gt,vl]=x.useState(null),[Yt,yn]=x.useState([]),[Ra,$i]=x.useState([]),[yl,ks]=x.useState([]),[Qi,sa]=x.useState(!1),[vt,Nt]=x.useState(""),[pt,jl]=x.useState([]),[za,Nl]=x.useState([]);x.useEffect(()=>{n&&(Es(),Ds())},[n]),x.useEffect(()=>{console.log("Categories state updated:",Yt)},[Yt]),x.useEffect(()=>{console.log("Rooms state updated:",Ra)},[Ra]),x.useEffect(()=>{p&&V(p)},[p]),x.useEffect(()=>{o&&fe(o),u&&z(u)},[o,u]),x.useEffect(()=>{f&&n&&(Y(f.patientId||""),$(f.patientName||""),Nt(f.patientName||""),V(f.providerId||""),xe(f.categoryId||""),fe(f.eventDate||""),z(f.startTime?f.startTime.substring(0,5):""),D(f.duration||50),E(f.title||""),ne(f.comments||""),T(f.roomId||f.room||""),W(f.cptCodeId||""),f.patientId&&fetch(`/custom/api/get_client.php?pid=${f.patientId}`).then(le=>le.json()).then(le=>{le.success&&le.client&&de(le.client.payment_type||"insurance")}).catch(le=>{console.error("Failed to fetch patient payment type:",le),de("insurance")}),f.isRecurring&&f.recurrenceId?(jt(!0),vl(f.recurrenceId),is("single")):(jt(!1),vl(null)))},[f,n]);const Es=async()=>{try{const le=await ff();console.log("getAppointmentCategories response:",le),console.log("Categories array:",le.categories),yn(le.categories||[]),le.categories&&le.categories.length>0&&!f?(console.log("Auto-selecting first category:",le.categories[0]),xe(le.categories[0].id),le.categories[0].defaultDuration>0&&D(le.categories[0].defaultDuration)):console.log("No categories to auto-select or editing existing appointment")}catch(le){console.error("Failed to load appointment categories:",le),g("Failed to load appointment types")}},Ds=async()=>{try{const le=await ab();console.log("getRooms response:",le),console.log("Rooms array:",le.rooms),$i(le.rooms||[])}catch(le){console.error("Failed to load rooms:",le)}},As=async le=>{if(Nt(le),le.length<2){ks([]),sa(!1);return}try{const ge=await rf(le);ks(ge||[]),sa(!0)}catch(ge){console.error("Patient search failed:",ge),ks([])}},da=async le=>{Y(le.pid),$(`${le.fname} ${le.lname}`),Nt(`${le.fname} ${le.lname}`),sa(!1);try{const De=await(await fetch(`/custom/api/get_client.php?pid=${le.pid}`)).json();De.success&&De.client&&de(De.client.payment_type||"insurance")}catch(ge){console.error("Failed to fetch patient payment type:",ge),de("insurance")}},Ts=le=>{xe(le);const ge=Yt.find(De=>De.id===parseInt(le));W(""),he(null),Y(""),$(""),Nt(""),Nl([]),ge&&ge.defaultDuration>0&&D(ge.defaultDuration)},ua=async le=>{V(le);const ge=Yt.find(De=>De.id===parseInt(X));if(ge&&ge.name==="Supervision"&&le)try{const De=await sb(le);jl(De.supervisees||[])}catch(De){console.error("Failed to load supervisees:",De),jl([])}else jl([]),Nl([])},Vi=le=>{Nl(ge=>ge.includes(le)?ge.filter(De=>De!==le):[...ge,le])},jn=le=>{W(le);const ge=Yt.find(De=>De.id===parseInt(X));if(ge&&ge.linkedCptCodes){const De=ge.linkedCptCodes.find(Le=>Le.id===parseInt(le));he(De),De&&De.standardDuration>0&&D(De.standardDuration)}},rs=async(le,ge=!1)=>{if(le?.preventDefault(),v(!0),g(null),C(null),_(null),!X){g("Please select an appointment type"),v(!1);return}const De=Yt.find(Le=>Le.id===parseInt(X));if(!De){g("Invalid appointment type"),v(!1);return}if(De.categoryType==="client"){if(!O){g("Please select a client"),v(!1);return}if(!se){g("Please select a provider"),v(!1);return}}else if(De.name==="Supervision"){if(!se){g("Please select a supervisor"),v(!1);return}if(za.length===0){g("Please select at least one supervisee"),v(!1);return}}else if(De.name!=="Staff Meeting"&&!se){g("Please select a provider"),v(!1);return}if(De&&De.requiresCptSelection&&P==="insurance"&&!L){g("CPT code is required for insurance patients with this appointment type"),v(!1);return}if(_e){if(Object.values(M).filter(Boolean).length===0){g("Please select at least one day for recurrence"),v(!1);return}if(ce==="date"&&!qe){g("Please select an end date for recurrence"),v(!1);return}if(ce==="count"&&(!we||we<1)){g("Please enter a valid number of occurrences"),v(!1);return}}try{const Le=q.includes(":")?`${q}:00`:`${q}:00:00`,wt={categoryId:parseInt(X),eventDate:me,startTime:Le,duration:parseInt(H),title:S||I||De.name,comments:U,room:pe,apptstatus:f?f.apptstatus:"-",overrideAvailability:ge,...O&&{patientId:parseInt(O)},...se&&{providerId:parseInt(se)},...za.length>0&&{superviseeIds:za},...L&&{cptCodeId:parseInt(L)},...F?.standardFee&&{billingFee:F.standardFee},...P&&{patientPaymentType:P}};lt&&(wt.seriesUpdate={scope:aa,recurrenceId:gt}),_e&&!f&&(wt.recurrence={enabled:!0,days:M,interval:parseInt(ue),endType:ce,endCount:ce==="count"?parseInt(we):null,endDate:ce==="date"?qe:null}),console.log(f?"Updating appointment:":"Creating appointment:",wt);const tt=f?await gf(f.id,wt):await xf(wt);tt.success?(C(f?"Appointment updated successfully!":"Appointment created successfully!"),d&&d(tt.appointment),setTimeout(()=>{Oa()},1500)):g(tt.message||`Failed to ${f?"update":"create"} appointment`)}catch(Le){console.error(`Failed to ${f?"update":"create"} appointment:`,Le),Le.conflicts?k({conflicts:Le.conflicts,totalOccurrences:Le.totalOccurrences,conflictCount:Le.conflictCount}):Le.message&&Le.message.includes("Provider is unavailable")?_(Le.message):g(Le.message||`Failed to ${f?"update":"create"} appointment`)}finally{v(!1)}},cs=()=>{_(null),rs(null,!0)},Zi=()=>{k(null),rs(null,!0)},Nn=async()=>{if(!f)return;let le=`Are you sure you want to delete this appointment for ${I}?`;if(lt&&(aa==="all"?le=`Are you sure you want to delete ALL occurrences in this recurring series for ${I}?`:aa==="future"&&(le=`Are you sure you want to delete this and all future occurrences for ${I}?`)),!!confirm(le)){v(!0),g(null),C(null);try{const ge=lt?{scope:aa,recurrenceId:gt}:null,De=await pf(f.id,ge);if(De.success){const Le=lt&&aa!=="single"?`${De.deletedCount||"Multiple"} appointment(s) deleted successfully!`:"Appointment deleted successfully!";C(Le),setTimeout(()=>{Oa(),d&&d()},1e3)}else g(De.message||"Failed to delete appointment")}catch(ge){console.error("Failed to delete appointment:",ge),g(ge.message||"Failed to delete appointment")}finally{v(!1)}}},Oa=()=>{Y(""),$(""),Nt(""),xe(""),E(""),ne(""),T(""),g(null),C(null),_(null),k(null),ks([]),sa(!1),ee(!1),oe({mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1}),be("1"),te("count"),Ce(10),Ve(""),jt(!1),is("single"),vl(null),c()};if(!n)return null;const wn=[15,30,50,90];return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",style:{position:"fixed",top:0,left:0,right:0,bottom:0},children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/60 backdrop-blur-md transition-opacity",onClick:Oa,"aria-hidden":"true"}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-2xl w-full my-8 border border-gray-200 z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-200 px-8 pt-6 bg-gradient-to-r from-blue-50 to-purple-50",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:f?"Edit Appointment":"New Appointment"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:f?"Update appointment details":"Schedule a new appointment"})]}),e.jsx("button",{onClick:Oa,className:"p-2 hover:bg-white/80 rounded-xl transition-all hover:scale-110",disabled:b,children:e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"px-8 pb-8",children:[N&&e.jsx("div",{className:"mb-6 p-4 bg-amber-50 border-l-4 border-amber-500 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-amber-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-amber-700 font-medium mb-2",children:N}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:cs,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white text-sm font-medium rounded-lg transition-colors",children:"Override and Book Anyway"}),e.jsx("button",{type:"button",onClick:()=>_(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-medium rounded-lg transition-colors",children:"Cancel"})]})]})]})}),A&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-700 font-bold mb-2",children:"Scheduling Conflicts Detected"}),e.jsxs("p",{className:"text-red-600 text-sm mb-3",children:[A.conflictCount," of ",A.totalOccurrences," recurring appointments have conflicts:"]}),e.jsx("div",{className:"max-h-48 overflow-y-auto mb-4 space-y-2",children:A.conflicts.map((le,ge)=>e.jsxs("div",{className:"bg-white border border-red-200 rounded p-2 text-sm",children:[e.jsxs("div",{className:"font-medium text-red-700",children:[new Date(le.date).toLocaleDateString()," at ",le.time]}),e.jsx("div",{className:"text-red-600",children:le.reason})]},ge))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:Zi,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors",children:"Create Anyway (Skip Conflicts)"}),e.jsx("button",{type:"button",onClick:()=>k(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-medium rounded-lg transition-colors",children:"Cancel"})]})]})]})}),j&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg text-red-700 flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("span",{children:j})]}),y&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 border-l-4 border-green-500 rounded-lg text-green-700 flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{children:y})]}),lt&&e.jsx("div",{className:"mb-6 p-4 bg-blue-50 border-l-4 border-blue-500 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-blue-700 font-medium mb-2",children:"Recurring Appointment Series"}),e.jsx("p",{className:"text-blue-600 text-sm mb-3",children:"This appointment is part of a recurring series. Choose what to update:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"seriesScope",value:"single",checked:aa==="single",onChange:le=>is(le.target.value),className:"text-blue-600 focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm text-blue-700",children:["Just this occurrence (",new Date(me).toLocaleDateString(),")"]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"seriesScope",value:"future",checked:aa==="future",onChange:le=>is(le.target.value),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-blue-700",children:"This and all future occurrences"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"seriesScope",value:"all",checked:aa==="all",onChange:le=>is(le.target.value),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-blue-700",children:"All occurrences in the series"})]})]})]})]})}),e.jsxs("form",{onSubmit:rs,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Appointment Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:X,onChange:le=>Ts(le.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),Yt.map(le=>e.jsx("option",{value:le.id,children:le.name},le.id))]})]}),X&&(()=>{const le=Yt.find(ge=>ge.id===parseInt(X));return le?le.categoryType==="client"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Client ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:vt,onChange:ge=>As(ge.target.value),placeholder:"Search by name...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),Qi&&yl.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:yl.map(ge=>e.jsxs("button",{type:"button",onClick:()=>da(ge),className:"w-full text-left px-4 py-3 hover:bg-blue-50 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[ge.fname," ",ge.lname]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["DOB: ",ge.DOB,"  PID: ",ge.pid]})]},ge.pid))}),I&&e.jsxs("div",{className:"mt-2 text-sm text-green-600",children:["Selected: ",I]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Provider ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:se,onChange:ge=>ua(ge.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Provider"}),m.map(ge=>e.jsx("option",{value:ge.value,children:ge.label},ge.value))]})]})]}):le.name==="Supervision"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Supervisor ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:se,onChange:ge=>ua(ge.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Supervisor"}),m.map(ge=>e.jsx("option",{value:ge.value,children:ge.label},ge.value))]})]}),se&&pt.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Supervisees ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto space-y-2",children:pt.map(ge=>e.jsxs("label",{className:"flex items-center gap-2 hover:bg-gray-50 p-2 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:za.includes(ge.id),onChange:()=>Vi(ge.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-900",children:ge.label}),ge.title&&e.jsxs("span",{className:"text-xs text-gray-500",children:["(",ge.title,")"]})]},ge.id))}),za.length>0&&e.jsxs("div",{className:"mt-2 text-sm text-green-600",children:[za.length," supervisee(s) selected"]})]})]}):le.name==="Staff Meeting"?e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"All-Staff Meeting:"})," This appointment will be visible to all providers."]})}):le.categoryType==="clinic"?e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Provider ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:se,onChange:ge=>ua(ge.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Provider"}),m.map(ge=>e.jsx("option",{value:ge.value,children:ge.label},ge.value))]})]}):null:null})(),X&&(()=>{const le=Yt.find(Le=>Le.id===parseInt(X)),ge=le&&le.requiresCptSelection&&le.linkedCptCodes&&le.linkedCptCodes.length>0,De=P==="insurance";return ge?e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["CPT Code ",De&&e.jsx("span",{className:"text-red-500",children:"*"}),!De&&e.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["(Optional for ",P,")"]})]}),e.jsxs("select",{value:L,onChange:Le=>jn(Le.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:De,children:[e.jsx("option",{value:"",children:"Select CPT Code"}),le.linkedCptCodes.map(Le=>e.jsxs("option",{value:Le.id,children:[Le.code," - ",Le.description," (",Le.standardDuration,"min",Le.standardFee?`, $${Le.standardFee}`:"",")"]},Le.id))]}),F&&e.jsxs("div",{className:"mt-2 text-sm text-blue-600",children:["Standard fee: $",F.standardFee||"Not set","  Duration: ",F.standardDuration," minutes"]})]}):null})(),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:me,onChange:le=>fe(le.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"time",value:q,onChange:le=>z(le.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Duration (minutes) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:wn.map(le=>e.jsxs("button",{type:"button",onClick:()=>D(le),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${H===le?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[le,"m"]},le))}),e.jsx("input",{type:"number",value:H,onChange:le=>D(le.target.value),min:"5",step:"5",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),e.jsxs("select",{value:pe,onChange:le=>T(le.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[e.jsx("option",{value:"",children:"Select Location (Optional)"}),Ra.map(le=>e.jsx("option",{value:le.value,children:le.label},le.id))]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx("input",{type:"checkbox",checked:_e,onChange:le=>ee(le.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),"Make this recurring"]})}),_e&&e.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-blue-200",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Repeat on ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"sun",label:"Sun"},{key:"mon",label:"Mon"},{key:"tue",label:"Tue"},{key:"wed",label:"Wed"},{key:"thu",label:"Thu"},{key:"fri",label:"Fri"},{key:"sat",label:"Sat"}].map(le=>e.jsx("button",{type:"button",onClick:()=>oe(ge=>({...ge,[le.key]:!ge[le.key]})),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${M[le.key]?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:le.label},le.key))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Frequency ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:ue,onChange:le=>be(le.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[e.jsx("option",{value:"1",children:"Weekly"}),e.jsx("option",{value:"2",children:"Every 2 weeks"}),e.jsx("option",{value:"3",children:"Every 3 weeks"}),e.jsx("option",{value:"4",children:"Every 4 weeks"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ends ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:ce==="count",onChange:()=>te("count"),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"After"}),e.jsx("input",{type:"number",value:we,onChange:le=>Ce(parseInt(le.target.value)||1),disabled:ce!=="count",min:"1",max:"52",className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm disabled:bg-gray-100 focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"occurrences"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:ce==="date",onChange:()=>te("date"),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"On"}),e.jsx("input",{type:"date",value:qe,onChange:le=>Ve(le.target.value),disabled:ce!=="date",className:"px-2 py-1 border border-gray-300 rounded text-sm disabled:bg-gray-100 focus:ring-2 focus:ring-blue-500"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title (Optional)"}),e.jsx("input",{type:"text",value:S,onChange:le=>E(le.target.value),placeholder:"Defaults to client name if left blank",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comments"}),e.jsx("textarea",{value:U,onChange:le=>ne(le.target.value),rows:3,placeholder:"Optional notes about this appointment",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex gap-4 pt-6 mt-6 border-t border-gray-200",children:[f&&e.jsx("button",{type:"button",onClick:Nn,className:"px-6 py-3 bg-red-100 hover:bg-red-200 text-red-700 font-semibold rounded-xl transition-all hover:shadow-md",disabled:b,children:"Delete"}),e.jsx("button",{type:"button",onClick:Oa,className:"flex-1 px-6 py-3 bg-gray-100 hover:bg-gray-200 text-label rounded-xl transition-all hover:shadow-md",disabled:b,children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold rounded-xl transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",disabled:b,children:b?f?"Updating...":"Creating...":f?"Update Appointment":"Create Appointment"})]})]})]})]})]})})}function cb(){const[n,c]=x.useState("week"),[d,o]=x.useState(new Date),[u,p]=x.useState([]),[m,f]=x.useState([]),[b,v]=x.useState("all"),[j,g]=x.useState(!0),[y,C]=x.useState(null),[N,_]=x.useState({startHour:8,endHour:18,interval:15,viewType:"week"}),[A,k]=x.useState(!1),[O,Y]=x.useState(null),[I,$]=x.useState(null),[se,V]=x.useState(null),[X,xe]=x.useState(null),fe=(()=>{const M=[],oe=N.interval,ue=60/oe;for(let be=N.startHour;be<N.endHour;be++)for(let ce=0;ce<ue;ce++){const te=ce*oe;M.push({hour:be,minutes:te})}return M})();x.useEffect(()=>{(async()=>{try{const oe=await hf();console.log("Calendar settings response:",oe),oe.settings?(console.log("Setting calendar hours to:",oe.settings),_(oe.settings),oe.settings.viewType&&c(oe.settings.viewType)):console.log("No settings in response, using defaults")}catch(oe){console.error("Failed to load calendar settings:",oe)}})()},[]),x.useEffect(()=>{(async()=>{try{const oe=await ko();f(oe.providers||[])}catch(oe){console.error("Failed to load providers:",oe)}})()},[]),x.useEffect(()=>{q()},[d,b,n]);const q=async()=>{g(!0),C(null);try{const{startDate:M,endDate:oe}=z();console.log("Loading appointments:",{startDate:M,endDate:oe,currentDate:d,view:n});const ue=await Eo(M,oe,b);console.log("Appointments loaded:",ue.appointments),p(ue.appointments||[])}catch(M){console.error("Failed to load appointments:",M),C("Failed to load appointments")}finally{g(!1)}},z=()=>{const M=new Date(d),oe=new Date(d);if(n==="week"){const ue=M.getDay(),be=M.getDate()-ue;M.setDate(be),M.setHours(0,0,0,0),oe.setDate(M.getDate()+6),oe.setHours(23,59,59,999)}else n==="day"?(M.setHours(0,0,0,0),oe.setHours(23,59,59,999)):n==="month"&&(M.setDate(1),M.setHours(0,0,0,0),oe.setMonth(oe.getMonth()+1),oe.setDate(0),oe.setHours(23,59,59,999));return{startDate:M.toISOString().split("T")[0],endDate:oe.toISOString().split("T")[0]}},H=()=>{const M=new Date(d),oe=M.getDay(),ue=M.getDate()-oe;M.setDate(ue),M.setHours(0,0,0,0);const be=Array.from({length:7},(ce,te)=>new Date(M.getTime()+te*24*60*60*1e3));return console.log("Week days:",be.map(ce=>ce.toISOString().split("T")[0])),be},D=()=>{const M=new Date(d);n==="week"?M.setDate(M.getDate()-7):n==="day"?M.setDate(M.getDate()-1):n==="month"&&M.setMonth(M.getMonth()-1),o(M)},S=()=>{const M=new Date(d);n==="week"?M.setDate(M.getDate()+7):n==="day"?M.setDate(M.getDate()+1):n==="month"&&M.setMonth(M.getMonth()+1),o(M)},E=()=>{o(new Date)},U=M=>{if(!M)return"";const[oe,ue]=M.split(":"),be=parseInt(oe),ce=be>=12?"PM":"AM";return`${be===0?12:be>12?be-12:be}:${ue} ${ce}`},ne=(M,oe,ue)=>{const be=M.toISOString().split("T")[0];return u.filter(ce=>{if(ce.eventDate!==be)return!1;const[te,we]=ce.startTime.split(":"),Ce=parseInt(te),qe=parseInt(we);return Ce===oe&&qe===ue})},pe=M=>M.duration?Math.ceil(M.duration/N.interval):1,T=M=>{const[oe,ue]=M.startTime.split(":").map(Number),be=oe*60+ue,ce=N.startHour*60,we=(be-ce)/N.interval,Ce=60,qe=we*Ce,jt=(M.duration||0)/N.interval*Ce;return{top:qe,height:jt}},L=M=>{const oe=M.toISOString().split("T")[0];return u.filter(ue=>ue.eventDate===oe)},W=M=>{const oe=M.toISOString().split("T")[0];return u.filter(ue=>ue.eventDate===oe)},F=()=>{const M=d.getFullYear(),oe=d.getMonth(),ue=new Date(M,oe,1),be=ue.getDay(),ce=new Date(ue);return ce.setDate(ce.getDate()-be),ce.setHours(0,0,0,0),Array.from({length:42},(we,Ce)=>new Date(ce.getTime()+Ce*24*60*60*1e3))},he=()=>{if(n==="week"){const M=H(),oe=M[0],ue=M[6];return`${oe.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${ue.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}else return n==="day"?d.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):d.toLocaleDateString("en-US",{month:"long",year:"numeric"})},P=(M=null,oe=null,ue=null)=>{xe(null),Y(M||d.toISOString().split("T")[0]),$(oe),V(ue||(b!=="all"?b:null)),k(!0)},de=(M,oe)=>{oe.stopPropagation(),xe(M),Y(null),$(null),V(null),k(!0)},_e=(M,oe,ue)=>{const be=M.toISOString().split("T")[0],ce=`${oe.toString().padStart(2,"0")}:${ue.toString().padStart(2,"0")}`;P(be,ce,b!=="all"?b:null)},ee=M=>{console.log("New appointment created:",M),q()};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"glass-card p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Calendar"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>P(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Appointment"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>c("day"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="day"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Day"}),e.jsx("button",{onClick:()=>c("week"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="week"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Week"}),e.jsx("button",{onClick:()=>c("month"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="month"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Month"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:D,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:S,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsx("button",{onClick:E,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Today"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:he()})]})]}),y&&e.jsx("div",{className:"glass-card-sm bg-red-100/60 border-red-300/50 text-red-700 px-4 py-3 mb-6",children:y}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"w-80 flex-shrink-0 space-y-6",children:[e.jsx("div",{className:"glass-card p-4",children:e.jsx(rb,{currentDate:d,onDateClick:o})}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Providers"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>v("all"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors ${b==="all"?"bg-blue-100 text-blue-900 font-medium":"hover:bg-gray-100 text-gray-700"}`,children:"All Providers"}),m.map(M=>e.jsx("button",{onClick:()=>v(M.value),className:`w-full text-left px-3 py-2 rounded-lg transition-colors ${b===M.value?"bg-blue-100 text-blue-900 font-medium":"hover:bg-gray-100 text-gray-700"}`,children:M.label},M.value))]})]})]}),e.jsxs("div",{className:"flex-1",children:[j?e.jsx("div",{className:"glass-card p-12 text-center",children:e.jsx("div",{className:"text-gray-700",children:"Loading appointments..."})}):n==="week"&&e.jsxs("div",{className:"glass-card overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-white/30",children:[e.jsx("div",{className:"w-20 flex-shrink-0 p-4 bg-white/20 border-r border-white/30 font-semibold text-gray-700",children:"Time"}),e.jsx("div",{className:"flex-1 flex",children:H().map((M,oe)=>{const ue=M.toDateString()===new Date().toDateString();return e.jsxs("div",{className:`flex-1 p-4 border-r border-white/30 text-center ${ue?"bg-blue-100/40":"bg-white/20"}`,children:[e.jsx("div",{className:"text-sm text-gray-600",children:M.toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("div",{className:`text-lg font-semibold ${ue?"text-blue-600":"text-gray-900"}`,children:M.getDate()})]},oe)})})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-20 flex-shrink-0 border-r border-white/30 bg-white/20",children:fe.map(M=>e.jsxs("div",{className:"h-[60px] p-2 border-b border-white/30 text-xs text-gray-700 font-medium",children:[M.hour===0?"12":M.hour<12?M.hour:M.hour===12?"12":M.hour-12,":",M.minutes.toString().padStart(2,"0")," ",M.hour<12?"AM":"PM"]},`time-${M.hour}-${M.minutes}`))}),e.jsx("div",{className:"flex-1 flex",children:H().map((M,oe)=>{const ue=L(M),be=fe.length*60;return e.jsxs("div",{className:"flex-1 border-r border-white/30 relative",style:{height:`${be}px`},children:[fe.map(ce=>e.jsx("div",{onClick:()=>_e(M,ce.hour,ce.minutes),className:"absolute w-full h-[60px] border-b border-white/30 hover:bg-white/10 cursor-pointer transition-colors",style:{top:`${fe.findIndex(te=>te.hour===ce.hour&&te.minutes===ce.minutes)*60}px`}},`slot-${ce.hour}-${ce.minutes}`)),ue.map(ce=>{const{top:te,height:we}=T(ce);if(ce.categoryType===1){const lt=ce.categoryColor||"#F3F4F6";return e.jsx("div",{className:"absolute left-0 right-0 pointer-events-none z-0",style:{top:`${te}px`,height:`${we}px`,backgroundColor:`${lt}40`,backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(0,0,0,.02) 10px, rgba(0,0,0,.02) 20px)"},title:`${ce.categoryName}${ce.comments?": "+ce.comments:""}`},ce.id)}const qe=ce.categoryColor||"#DBEAFE",Ve=ce.categoryColor?`${ce.categoryColor}80`:"#93C5FD80";return e.jsxs("div",{onClick:lt=>de(ce,lt),className:"absolute left-1 right-1 px-2 py-1 rounded-lg text-xs border hover:opacity-80 hover:shadow-md transition-all cursor-pointer z-10 overflow-hidden",style:{top:`${te}px`,height:`${we}px`,backgroundColor:`${qe}B3`,borderColor:Ve},children:[e.jsx("div",{className:"font-semibold text-gray-900",children:U(ce.startTime)}),we>30&&e.jsx("div",{className:"text-gray-800 truncate",children:ce.patientName}),we>50&&e.jsx("div",{className:"text-gray-700 truncate text-[10px]",children:ce.categoryName}),we>70&&ce.room&&e.jsx("div",{className:"text-gray-600 truncate text-[10px]",children:ce.room})]},ce.id)})]},oe)})})]})]}),!j&&n==="day"&&e.jsxs("div",{className:"glass-card overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-[150px_1fr] border-b border-white/30",children:[e.jsx("div",{className:"p-4 bg-white/20 border-r border-white/30 font-semibold text-gray-700",children:"Time"}),(()=>{const M=d.toDateString()===new Date().toDateString();return e.jsxs("div",{className:`p-4 border-r border-white/30 text-center ${M?"bg-blue-100/40":"bg-white/20"}`,children:[e.jsx("div",{className:"text-sm text-gray-600",children:d.toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("div",{className:`text-lg font-semibold ${M?"text-blue-600":"text-gray-900"}`,children:d.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})})()]}),fe.map(M=>e.jsxs("div",{className:"grid grid-cols-[150px_1fr] border-b border-white/30",children:[e.jsxs("div",{className:"p-3 border-r border-white/30 bg-white/20 text-sm text-gray-700 font-medium",children:[M.hour===0?"12":M.hour<12?M.hour:M.hour===12?"12":M.hour-12,":",M.minutes.toString().padStart(2,"0")," ",M.hour<12?"AM":"PM"]}),(()=>{const oe=ne(d,M.hour,M.minutes);return e.jsx("div",{onClick:()=>_e(d,M.hour,M.minutes),className:"p-2 border-r border-white/30 hover:bg-white/10 cursor-pointer transition-colors min-h-[60px]",children:oe.map(ue=>{const be=ue.categoryType===1,te=pe(ue)*60-8,we=ue.categoryColor||(be?"#E5E7EB":"#DBEAFE"),Ce=ue.categoryColor?`${ue.categoryColor}80`:be?"#9CA3AF80":"#93C5FD80";return e.jsx("div",{onClick:qe=>de(ue,qe),className:`mb-1 px-2 py-1 rounded-lg text-xs border hover:opacity-80 hover:shadow-md transition-all cursor-pointer ${be?"border-dashed":""}`,style:{height:`${te}px`,backgroundColor:be?`${we}99`:`${we}B3`,borderColor:Ce,backgroundImage:be?"repeating-linear-gradient(45deg, transparent, transparent 4px, rgba(255,255,255,.3) 4px, rgba(255,255,255,.3) 8px)":"none"},children:be?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold text-gray-900 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),ue.categoryName]}),ue.comments&&e.jsx("div",{className:"text-gray-700 truncate text-[10px] italic",children:ue.comments})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:U(ue.startTime)}),e.jsx("div",{className:"text-gray-800 truncate",children:ue.patientName}),e.jsx("div",{className:"text-gray-700 truncate text-[10px]",children:ue.categoryName}),ue.room&&e.jsx("div",{className:"text-gray-600 truncate text-[10px]",children:ue.room})]})},ue.id)})})})()]},`${M.hour}-${M.minutes}`))]}),!j&&n==="month"&&e.jsxs("div",{className:"glass-card overflow-hidden",children:[e.jsx("div",{className:"grid grid-cols-7 border-b border-white/30",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(M=>e.jsx("div",{className:"p-4 bg-white/20 border-r border-white/30 text-center font-semibold text-gray-700",children:M},M))}),e.jsx("div",{className:"grid grid-cols-7",children:F().map((M,oe)=>{const ue=M.toDateString()===new Date().toDateString(),be=M.getMonth()===d.getMonth(),ce=W(M);return e.jsxs("div",{className:`min-h-[120px] border-r border-b border-white/30 p-2 hover:bg-white/10 cursor-pointer transition-colors ${be?"":"bg-white/5"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full text-sm font-semibold ${ue?"bg-blue-600 text-white":be?"text-gray-900":"text-gray-400"}`,children:M.getDate()}),ce.length>0&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-900 px-2 py-0.5 rounded-full font-medium",children:ce.length})]}),e.jsxs("div",{className:"space-y-1",children:[ce.slice(0,3).map(te=>{const we=te.categoryType===1,Ce=te.categoryColor||(we?"#E5E7EB":"#DBEAFE"),qe=te.categoryColor?`${te.categoryColor}80`:we?"#9CA3AF80":"#93C5FD80";return e.jsx("div",{onClick:Ve=>de(te,Ve),className:`px-2 py-1 rounded text-xs border truncate hover:opacity-80 hover:shadow-md transition-all cursor-pointer ${we?"border-dashed":""}`,style:{backgroundColor:we?`${Ce}99`:`${Ce}B3`,borderColor:qe,backgroundImage:we?"repeating-linear-gradient(45deg, transparent, transparent 4px, rgba(255,255,255,.3) 4px, rgba(255,255,255,.3) 8px)":"none"},children:we?e.jsxs("div",{className:"font-semibold text-gray-900 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 715.636 5.636m12.728 12.728L5.636 5.636"})}),e.jsx("span",{className:"truncate",children:te.categoryName})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:U(te.startTime)}),e.jsx("div",{className:"text-gray-800 truncate",children:te.patientName}),te.room&&e.jsx("div",{className:"text-gray-600 truncate text-[10px]",children:te.room})]})},te.id)}),ce.length>3&&e.jsxs("div",{className:"text-xs text-gray-600 pl-2",children:["+",ce.length-3," more"]})]})]},oe)})})]})]})]}),e.jsx(yf,{isOpen:A,onClose:()=>k(!1),onSave:ee,initialDate:O,initialTime:I,providerId:se,providers:m,appointment:X})]})}function ob(){const[n,c]=x.useState({startHour:8,endHour:17,interval:15,viewType:"week",eventColor:"1",providersSeeAll:!0}),[d,o]=x.useState(!0),[u,p]=x.useState(!1),[m,f]=x.useState(null);x.useEffect(()=>{b()},[]);const b=async()=>{o(!0);try{const g=await hf();g.settings&&c({startHour:g.settings.startHour||8,endHour:g.settings.endHour||17,interval:g.settings.interval||15,viewType:g.settings.viewType||"week",eventColor:g.settings.eventColor||"1",providersSeeAll:g.settings.providersSeeAll!==void 0?g.settings.providersSeeAll:!0})}catch(g){console.error("Failed to load calendar settings:",g),f({type:"error",text:"Failed to load settings"})}finally{o(!1)}},v=async()=>{p(!0),f(null);try{await tb(n),f({type:"success",text:"Settings saved successfully!"})}catch(g){console.error("Failed to save calendar settings:",g),f({type:"error",text:"Failed to save settings"})}finally{p(!1)}},j=(g,y)=>{c(C=>({...C,[g]:y}))};return d?e.jsx("div",{className:"glass-card p-12 text-center",children:e.jsx("div",{className:"text-gray-700",children:"Loading calendar settings..."})}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Calendar Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure calendar display and behavior"})]}),m&&e.jsx("div",{className:`mb-6 px-4 py-3 rounded-lg ${m.type==="success"?"bg-green-100/60 border-green-300/50 text-green-700":"bg-red-100/60 border-red-300/50 text-red-700"} border`,children:m.text}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Calendar Starting Hour"}),e.jsx("select",{value:n.startHour,onChange:g=>j("startHour",parseInt(g.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:Array.from({length:24},(g,y)=>e.jsx("option",{value:y,children:y===0?"12 AM":y<12?`${y} AM`:y===12?"12 PM":`${y-12} PM`},y))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Calendar Ending Hour"}),e.jsx("select",{value:n.endHour,onChange:g=>j("endHour",parseInt(g.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:Array.from({length:24},(g,y)=>e.jsx("option",{value:y,children:y===0?"12 AM":y<12?`${y} AM`:y===12?"12 PM":`${y-12} PM`},y))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Calendar Interval (minutes)"}),e.jsxs("select",{value:n.interval,onChange:g=>j("interval",parseInt(g.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:[e.jsx("option",{value:15,children:"15 minutes"}),e.jsx("option",{value:30,children:"30 minutes"}),e.jsx("option",{value:60,children:"60 minutes"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Calendar View"}),e.jsxs("select",{value:n.viewType,onChange:g=>j("viewType",g.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:[e.jsx("option",{value:"day",children:"Day"}),e.jsx("option",{value:"week",children:"Week"}),e.jsx("option",{value:"month",children:"Month"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appointment/Event Color"}),e.jsxs("select",{value:n.eventColor,onChange:g=>j("eventColor",g.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:[e.jsx("option",{value:"1",children:"Category Color Schema"}),e.jsx("option",{value:"2",children:"Facility Color Schema"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:n.providersSeeAll,onChange:g=>j("providersSeeAll",g.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Providers See Entire Calendar"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-8",children:"Allow providers to see all appointments, not just their own"})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsx("button",{onClick:v,disabled:u,className:`px-6 py-3 rounded-lg font-medium transition-colors ${u?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:u?"Saving...":"Save Settings"})})]})}function oa({children:n,className:c="",...d}){return e.jsx("button",{className:`px-4 py-2 bg-blue-600 text-white rounded-lg 
         hover:bg-blue-700 transition-colors ${c}`,...d,children:n})}function Do({children:n,className:c="",...d}){return e.jsx("button",{className:`px-4 py-2 border border-gray-300 rounded-lg 
         hover:bg-gray-50 transition-colors ${c}`,...d,children:n})}function db(){const[n,c]=x.useState([]),[d,o]=x.useState([]),[u,p]=x.useState(!0),[m,f]=x.useState(""),[b,v]=x.useState(""),[j,g]=x.useState("all"),[y,C]=x.useState(!1),[N,_]=x.useState(!1),[A,k]=x.useState({id:null,name:"",description:"",color:"#3b82f6",default_duration:50,is_billable:1,is_active:1,category_type:"client",requires_cpt_selection:0,blocks_availability:0,linked_cpt_codes:[],sort_order:0}),[O,Y]=x.useState(""),[I,$]=x.useState(!1);x.useEffect(()=>{se(),V()},[]);const se=async()=>{try{p(!0);const D=await fetch("/custom/api/calendar_categories.php",{credentials:"include"});if(!D.ok)throw new Error("Failed to fetch calendar categories");const S=await D.json();c(S.categories||[])}catch(D){f(D.message)}finally{p(!1)}},V=async()=>{try{const D=await fetch("/custom/api/cpt_codes.php",{credentials:"include"});if(!D.ok)throw new Error("Failed to fetch CPT codes");const S=await D.json();o(S.cpt_codes?.filter(E=>E.is_active)||[])}catch(D){console.error("Failed to load CPT codes:",D)}},X=()=>{k({id:null,name:"",description:"",color:"#3b82f6",default_duration:50,is_billable:1,is_active:1,category_type:"client",requires_cpt_selection:0,blocks_availability:0,linked_cpt_codes:[],sort_order:0}),Y(""),C(!0)},xe=async D=>{try{const S=await fetch(`/custom/api/calendar_categories.php?action=get&id=${D.id}`,{credentials:"include"});if(!S.ok)throw new Error("Failed to fetch category details");const U=(await S.json()).category;k({id:U.id,name:U.name,description:U.description||"",color:U.color||"#3b82f6",default_duration:U.default_duration||50,is_billable:U.is_billable,is_active:U.is_active,category_type:U.category_type||"client",requires_cpt_selection:U.requires_cpt_selection||0,blocks_availability:U.blocks_availability||0,linked_cpt_codes:U.linked_cpt_codes||[],sort_order:U.sort_order||0}),Y(""),_(!0)}catch(S){f(S.message)}},me=async()=>{if(Y(""),!A.name.trim()){Y("Category name is required");return}try{$(!0);const D=A.id?"update":"create",S=await fetch("/custom/api/calendar_categories.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:D,...A})}),E=await S.json();if(!S.ok||!E.success)throw new Error(E.error||"Failed to save category");await se(),C(!1),_(!1)}catch(D){Y(D.message)}finally{$(!1)}},fe=async D=>{if(confirm("Are you sure you want to delete this category? This cannot be undone."))try{const S=await fetch("/custom/api/calendar_categories.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete",id:D})}),E=await S.json();if(!S.ok||!E.success)throw new Error(E.error||"Failed to delete category");await se()}catch(S){f(S.message)}},q=async D=>{try{const S=await fetch("/custom/api/calendar_categories.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",id:D.id,is_active:D.is_active?0:1})}),E=await S.json();if(!S.ok||!E.success)throw new Error(E.error||"Failed to update status");await se()}catch(S){f(S.message)}},z=D=>{k(S=>({...S,linked_cpt_codes:S.linked_cpt_codes.includes(D)?S.linked_cpt_codes.filter(E=>E!==D):[...S.linked_cpt_codes,D]}))},H=n.filter(D=>{const S=D.name.toLowerCase().includes(b.toLowerCase())||(D.description||"").toLowerCase().includes(b.toLowerCase()),E=j==="all"||D.category_type===j;return S&&E});return u?e.jsx("div",{className:"glass-card p-8",children:e.jsx("div",{className:"text-center text-gray-600",children:"Loading calendar categories..."})}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Calendar Categories"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage appointment types and link them to billing codes"})]}),e.jsx(oa,{onClick:X,children:"+ Add Category"})]}),m&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:m}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search categories...",value:b,onChange:D=>v(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsxs("select",{value:j,onChange:D=>g(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"client",children:"Client Appointments"}),e.jsx("option",{value:"clinic",children:"Clinic/Internal"}),e.jsx("option",{value:"holiday",children:"Holidays/Closures"})]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Duration"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Billable"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"CPT Required"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:H.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:"No categories found"})}):H.map(D=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:D.color}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:D.name}),D.description&&e.jsx("div",{className:"text-xs text-gray-500",children:D.description})]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${D.category_type==="client"?"bg-blue-100 text-blue-700":D.category_type==="clinic"?"bg-purple-100 text-purple-700":"bg-orange-100 text-orange-700"}`,children:D.category_type==="client"?"Client":D.category_type==="clinic"?"Clinic":"Holiday"})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700 text-center",children:[D.default_duration," min"]}),e.jsx("td",{className:"px-4 py-3 text-center",children:D.is_billable?e.jsx("span",{className:"text-green-600",children:""}):e.jsx("span",{className:"text-gray-400",children:""})}),e.jsx("td",{className:"px-4 py-3 text-center",children:D.requires_cpt_selection?e.jsx("span",{className:"text-green-600",children:""}):e.jsx("span",{className:"text-gray-400",children:""})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>q(D),className:`px-3 py-1 text-xs rounded-full ${D.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:D.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-4 py-3 text-center",children:[e.jsx("button",{onClick:()=>xe(D),className:"text-blue-600 hover:text-blue-800 mr-3",children:"Edit"}),e.jsx("button",{onClick:()=>fe(D.id),className:"text-red-600 hover:text-red-800",children:"Delete"})]})]},D.id))})]})}),(y||N)&&Tt.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:A.id?"Edit Category":"Add Category"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[O&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:O}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:A.name,onChange:D=>k({...A,name:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Office Visit"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Type"}),e.jsxs("select",{value:A.category_type,onChange:D=>k({...A,category_type:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"client",children:"Client Appointment"}),e.jsx("option",{value:"clinic",children:"Clinic/Internal"}),e.jsx("option",{value:"holiday",children:"Holiday/Closure"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:A.description,onChange:D=>k({...A,description:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"2",placeholder:"Brief description of this category"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),e.jsx("input",{type:"color",value:A.color,onChange:D=>k({...A,color:D.target.value}),className:"w-full h-10 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Duration (min)"}),e.jsx("input",{type:"number",value:A.default_duration,onChange:D=>k({...A,default_duration:parseInt(D.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Order"}),e.jsx("input",{type:"number",value:A.sort_order,onChange:D=>k({...A,sort_order:parseInt(D.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Settings"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:A.is_billable===1,onChange:D=>k({...A,is_billable:D.target.checked?1:0}),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Billable"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:A.requires_cpt_selection===1,onChange:D=>k({...A,requires_cpt_selection:D.target.checked?1:0}),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Requires CPT Code Selection"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:A.blocks_availability===1,onChange:D=>k({...A,blocks_availability:D.target.checked?1:0}),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Blocks Provider Availability"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:A.is_active===1,onChange:D=>k({...A,is_active:D.target.checked?1:0}),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]})]})]}),A.requires_cpt_selection===1&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Linked CPT Codes"}),e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 max-h-64 overflow-y-auto",children:d.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No active CPT codes available"}):e.jsx("div",{className:"space-y-2",children:d.map(D=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:A.linked_cpt_codes.includes(D.id),onChange:()=>z(D.id),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("span",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-mono font-semibold",children:D.code})," - ",D.description]})]},D.id))})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Selected CPT codes will be available when scheduling appointments with this category"})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx(Do,{onClick:()=>{C(!1),_(!1)},disabled:I,children:"Cancel"}),e.jsx(oa,{onClick:me,disabled:I,children:I?"Saving...":"Save Category"})]})]})}),document.body)]})}function ub(){const[n,c]=x.useState([]),[d,o]=x.useState(!0),[u,p]=x.useState(null),[m,f]=x.useState(!1),[b,v]=x.useState(!1),[j,g]=x.useState(!1),[y,C]=x.useState(null),[N,_]=x.useState({name:"",parent_id:null}),[A,k]=x.useState(!1),[O,Y]=x.useState(null);x.useEffect(()=>{I()},[]);const I=async()=>{try{o(!0);const D=await fetch("/custom/api/document_categories.php",{credentials:"include"});if(!D.ok)throw new Error("Failed to fetch categories");const S=await D.json();c(S.categories||[]),p(null)}catch(D){console.error("Error fetching categories:",D),p(D.message)}finally{o(!1)}},$=D=>{const S=[],E={};return D.forEach(U=>{E[U.id]={...U,children:[]}}),D.forEach(U=>{U.parent&&E[U.parent]?E[U.parent].children.push(E[U.id]):S.push(E[U.id])}),S},se=(D,S=0)=>{let E=[];return D.forEach(U=>{E.push({...U,level:S}),U.children&&U.children.length>0&&(E=E.concat(se(U.children,S+1)))}),E},V=()=>{if(!y)return n;const D=new Set([y.id]),S=$(n),E=ne=>{ne.children&&ne.children.forEach(pe=>{D.add(pe.id),E(pe)})},U=ne=>{ne.forEach(pe=>{pe.id===y.id&&E(pe),pe.children&&U(pe.children)})};return U(S),n.filter(ne=>!D.has(ne.id))},X=()=>{_({name:"",parent_id:null}),Y(null),f(!0)},xe=D=>{C(D),_({name:D.name,parent_id:D.parent?parseInt(D.parent):null}),Y(null),v(!0)},me=D=>{C(D),Y(null),g(!0)},fe=async()=>{if(!N.name||N.name.trim()===""){Y("Category name is required");return}try{k(!0),Y(null);const D=await fetch("/custom/api/document_categories.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:N.name.trim(),parent_id:N.parent_id||null})}),S=await D.json();if(!D.ok)throw new Error(S.error||"Failed to create category");await I(),f(!1)}catch(D){console.error("Error creating category:",D),Y(D.message)}finally{k(!1)}},q=async()=>{if(!N.name||N.name.trim()===""){Y("Category name is required");return}try{k(!0),Y(null);const D=await fetch("/custom/api/document_categories.php",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:y.id,name:N.name.trim(),parent_id:N.parent_id||null})}),S=await D.json();if(!D.ok)throw new Error(S.error||"Failed to update category");await I(),v(!1)}catch(D){console.error("Error updating category:",D),Y(D.message)}finally{k(!1)}},z=async()=>{try{k(!0),Y(null);const D=await fetch(`/custom/api/document_categories.php?id=${y.id}`,{method:"DELETE",credentials:"include"}),S=await D.json();if(!D.ok)throw new Error(S.error||"Failed to delete category");await I(),g(!1)}catch(D){console.error("Error deleting category:",D),Y(D.message)}finally{k(!1)}},H=()=>{f(!1),v(!1),g(!1),C(null),_({name:"",parent_id:null}),Y(null)};return d?e.jsx("div",{className:"glass-card p-8",children:e.jsx("div",{className:"text-center text-gray-700",children:"Loading categories..."})}):u?e.jsxs("div",{className:"glass-card p-8",children:[e.jsxs("div",{className:"text-center text-red-600",children:["Error: ",u]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(oa,{onClick:I,children:"Retry"})})]}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Document Categories"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage categories for organizing client documents"})]}),e.jsx("button",{onClick:X,className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"+ Add Category"})]}),n.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:'No categories defined. Click "Add Category" to create one.'}):e.jsx("div",{className:"space-y-2",children:se($(n)).map(D=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",style:{marginLeft:`${D.level*2}rem`},children:[e.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[D.level>0&&e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("div",{className:"font-medium text-gray-900",children:D.name}),D.children&&D.children.length>0&&e.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:[D.children.length," ",D.children.length===1?"subcategory":"subcategories"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>xe(D),className:"px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>me(D),className:"px-3 py-1.5 text-sm font-medium text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",children:"Delete"})]})]},D.id))}),m&&Tt.createPortal(e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container max-w-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Add Category"}),e.jsx("button",{onClick:H,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:D=>{D.preventDefault(),fe()},className:"modal-body",children:[O&&e.jsx("div",{className:"error-message",children:O}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Category Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:N.name,onChange:D=>_({...N,name:D.target.value}),placeholder:"e.g., Consent Forms, Insurance Documents",className:"input-field",autoFocus:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Parent Category (Optional)"}),e.jsxs("select",{value:N.parent_id||"",onChange:D=>{const S=D.target.value;_({...N,parent_id:S?parseInt(S,10):null})},className:"input-field",children:[e.jsx("option",{value:"",children:"None (Top Level)"}),n.map(D=>e.jsx("option",{value:D.id,children:D.name},D.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a parent to create a subcategory"})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:H,disabled:A,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:A,className:"btn-action btn-primary btn-compact disabled:opacity-50",children:A?"Creating...":"Create Category"})]})]})]})}),document.body),b&&Tt.createPortal(e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container max-w-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Category"}),e.jsx("button",{onClick:H,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:D=>{D.preventDefault(),q()},className:"modal-body",children:[O&&e.jsx("div",{className:"error-message",children:O}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Category Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:N.name,onChange:D=>_({...N,name:D.target.value}),className:"input-field",autoFocus:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Parent Category (Optional)"}),e.jsxs("select",{value:N.parent_id||"",onChange:D=>{const S=D.target.value;_({...N,parent_id:S?parseInt(S,10):null})},className:"input-field",children:[e.jsx("option",{value:"",children:"None (Top Level)"}),V().map(D=>e.jsx("option",{value:D.id,children:D.name},D.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a parent to make this a subcategory"})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:H,disabled:A,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:A,className:"btn-action btn-primary btn-compact disabled:opacity-50",children:A?"Saving...":"Save Changes"})]})]})]})}),document.body),j&&Tt.createPortal(e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container max-w-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Delete Category"}),e.jsx("button",{onClick:H,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:D=>{D.preventDefault(),z()},className:"modal-body",children:[O&&e.jsx("div",{className:"error-message",children:O}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to delete the category ",e.jsxs("strong",{children:['"',y?.name,'"']}),"?"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Note: You cannot delete a category that has documents or subcategories."})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:H,disabled:A,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:A,className:"btn-action btn-danger btn-compact disabled:opacity-50",children:A?"Deleting...":"Delete Category"})]})]})]})}),document.body)]})}function mb({listType:n,title:c,description:d,apiEndpoint:o}){const[u,p]=x.useState([]),[m,f]=x.useState(!0),[b,v]=x.useState(null),[j,g]=x.useState(!1),[y,C]=x.useState(!1),[N,_]=x.useState(!1),[A,k]=x.useState(null),[O,Y]=x.useState({name:"",description:"",active:!0}),[I,$]=x.useState(!1),[se,V]=x.useState(null);x.useEffect(()=>{X()},[n]);const X=async()=>{try{f(!0);const S=await fetch(`${o}?type=${n}`,{credentials:"include"});if(!S.ok)throw new Error(`Failed to fetch ${c.toLowerCase()}`);const E=await S.json();p(E.items||[]),v(null)}catch(S){console.error(`Error fetching ${c}:`,S),v(S.message)}finally{f(!1)}},xe=()=>{Y({name:"",description:"",active:!0}),V(null),g(!0)},me=S=>{k(S),Y({name:S.name||"",description:S.description||"",active:S.active!==void 0?S.active:!0}),V(null),C(!0)},fe=S=>{k(S),V(null),_(!0)},q=async()=>{if(!O.name||O.name.trim()===""){V("Name is required");return}try{$(!0),V(null);const S=await fetch(o,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:n,name:O.name.trim(),description:O.description?.trim()||"",active:O.active})}),E=await S.json();if(!S.ok)throw new Error(E.error||`Failed to create ${c.toLowerCase()}`);await X(),g(!1)}catch(S){console.error(`Error creating ${c}:`,S),V(S.message)}finally{$(!1)}},z=async()=>{if(!O.name||O.name.trim()===""){V("Name is required");return}try{$(!0),V(null);const S=await fetch(o,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:n,id:A.id,name:O.name.trim(),description:O.description?.trim()||"",active:O.active})}),E=await S.json();if(!S.ok)throw new Error(E.error||`Failed to update ${c.toLowerCase()}`);await X(),C(!1)}catch(S){console.error(`Error updating ${c}:`,S),V(S.message)}finally{$(!1)}},H=async()=>{try{$(!0),V(null);const S=await fetch(`${o}?type=${n}&id=${A.id}`,{method:"DELETE",credentials:"include"}),E=await S.json();if(!S.ok)throw new Error(E.error||`Failed to delete ${c.toLowerCase()}`);await X(),_(!1)}catch(S){console.error(`Error deleting ${c}:`,S),V(S.message)}finally{$(!1)}},D=()=>{g(!1),C(!1),_(!1),k(null),Y({name:"",description:"",active:!0}),V(null)};return m?e.jsx("div",{className:"glass-card p-8",children:e.jsxs("div",{className:"text-center text-gray-700",children:["Loading ",c.toLowerCase(),"..."]})}):b?e.jsxs("div",{className:"glass-card p-8",children:[e.jsxs("div",{className:"text-center text-red-600",children:["Error: ",b]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(oa,{onClick:X,children:"Retry"})})]}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:c}),e.jsx("p",{className:"text-gray-600 mt-1",children:d})]}),e.jsxs("button",{onClick:xe,className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:["+ Add ",c.replace(/s$/,"")]})]}),u.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:['No items defined. Click "Add ',c.replace(/s$/,""),'" to create one.']}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4",children:u.map(S=>e.jsxs("div",{className:"glass-card-sm p-4 hover:shadow-lg transition-all duration-200 group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900 text-lg mb-1",children:S.name}),S.description&&e.jsx("div",{className:"text-sm text-gray-600 leading-relaxed",children:S.description})]}),e.jsx("div",{className:"flex items-center gap-1 ml-3",children:S.active?e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full",children:"Active"}):e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium text-gray-600 bg-gray-200 rounded-full",children:"Inactive"})})]}),e.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-gray-200/50",children:[e.jsxs("button",{onClick:()=>me(S),className:"flex-1 px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-white hover:bg-blue-600 rounded-lg transition-all duration-200",title:"Edit item",children:[e.jsx("svg",{className:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),e.jsxs("button",{onClick:()=>fe(S),className:"flex-1 px-3 py-1.5 text-sm font-medium text-red-600 hover:text-white hover:bg-red-600 rounded-lg transition-all duration-200",title:"Delete item",children:[e.jsx("svg",{className:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]},S.id))}),j&&Tt.createPortal(e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container max-w-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:["Add ",c.replace(/s$/,"")]}),e.jsx("button",{onClick:D,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:S=>{S.preventDefault(),q()},className:"modal-body",children:[se&&e.jsx("div",{className:"error-message",children:se}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:O.name,onChange:S=>Y({...O,name:S.target.value}),placeholder:"e.g., Heterosexual, Male, Single",className:"input-field",autoFocus:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description (Optional)"}),e.jsx("input",{type:"text",value:O.description,onChange:S=>Y({...O,description:S.target.value}),placeholder:"Additional details or clarification",className:"input-field"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:O.active,onChange:S=>Y({...O,active:S.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Active"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"Inactive items won't appear in selection lists"})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:D,disabled:I,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:I,className:"btn-action btn-primary btn-compact disabled:opacity-50",children:I?"Creating...":`Create ${c.replace(/s$/,"")}`})]})]})]})}),document.body),y&&Tt.createPortal(e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container max-w-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:["Edit ",c.replace(/s$/,"")]}),e.jsx("button",{onClick:D,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:S=>{S.preventDefault(),z()},className:"modal-body",children:[se&&e.jsx("div",{className:"error-message",children:se}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:O.name,onChange:S=>Y({...O,name:S.target.value}),className:"input-field",autoFocus:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description (Optional)"}),e.jsx("input",{type:"text",value:O.description,onChange:S=>Y({...O,description:S.target.value}),placeholder:"Additional details or clarification",className:"input-field"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:O.active,onChange:S=>Y({...O,active:S.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Active"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"Inactive items won't appear in selection lists"})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:D,disabled:I,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:I,className:"btn-action btn-primary btn-compact disabled:opacity-50",children:I?"Saving...":"Save Changes"})]})]})]})}),document.body),N&&Tt.createPortal(e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container max-w-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:["Delete ",c.replace(/s$/,"")]}),e.jsx("button",{onClick:D,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:S=>{S.preventDefault(),H()},className:"modal-body",children:[se&&e.jsx("div",{className:"error-message",children:se}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to delete ",e.jsxs("strong",{children:['"',A?.name,'"']}),"?"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Note: You cannot delete items that are currently in use by client records."})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:D,disabled:I,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:I,className:"btn-action btn-danger btn-compact disabled:opacity-50",children:I?"Deleting...":`Delete ${c.replace(/s$/,"")}`})]})]})]})}),document.body)]})}function hb(){const[n,c]=x.useState("sexual-orientation"),d=[{id:"sexual-orientation",label:"Sexual Orientation",title:"Sexual Orientations",description:"Manage sexual orientation options for client demographics"},{id:"gender-identity",label:"Gender Identity",title:"Gender Identities",description:"Manage gender identity options for client demographics"},{id:"pronouns",label:"Pronouns",title:"Pronouns",description:"Manage pronoun options for client demographics"},{id:"marital-status",label:"Marital Status",title:"Marital Statuses",description:"Manage marital status options for client demographics"},{id:"client-status",label:"Client Status",title:"Client Statuses",description:"Manage client status options (Active, Discharged, etc.)"},{id:"ethnicity",label:"Ethnicity/Race",title:"Ethnicity/Race Options",description:"Manage ethnicity and race options for client demographics"},{id:"insurance-type",label:"Insurance Types",title:"Insurance Types",description:"Manage insurance type categories"},{id:"referral-source",label:"Referral Sources",title:"Referral Sources",description:"Manage referral source options for client intake"},{id:"treatment-modality",label:"Treatment Modalities",title:"Treatment Modalities",description:"Manage treatment modality options (CBT, DBT, etc.)"},{id:"discharge-reason",label:"Discharge Reasons",title:"Discharge Reasons",description:"Manage discharge reason options for client records"}],o=d.find(u=>u.id===n);return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"glass-card p-6 mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reference Lists"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage clinical and demographic lookup lists"})]}),e.jsx("div",{className:"glass-card p-2 mb-6",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(u=>e.jsx("button",{onClick:()=>c(u.id),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n===u.id?"bg-blue-600 text-white":"hover:bg-gray-100 text-gray-700"}`,children:u.label},u.id))})}),o&&e.jsx(mb,{listType:n,title:o.title,description:o.description,apiEndpoint:"/custom/api/reference_lists.php"},n)]})}function fb(){const[n,c]=x.useState([]),[d,o]=x.useState([]),[u,p]=x.useState([]),[m,f]=x.useState(!0),[b,v]=x.useState(null),[j,g]=x.useState(""),[y,C]=x.useState("active"),[N,_]=x.useState(!1),[A,k]=x.useState(!1),[O,Y]=x.useState(null),[I,$]=x.useState(!1),[se,V]=x.useState(null),[X,xe]=x.useState(!1),[me,fe]=x.useState({username:"",password:"",fname:"",mname:"",lname:"",title:"",suffix:"",email:"",phone:"",phonecell:"",npi:"",federaltaxid:"",taxonomy:"",state_license_number:"",supervisor_id:"",supervisor_ids:[],facility_id:"",authorized:!1,is_supervisor:!1,active:!0,calendar:!1,portal_user:!1,notes:""});x.useEffect(()=>{q(),z(),H()},[y]);const q=async()=>{try{f(!0);const P=await fetch(`/custom/api/users.php?action=list&status=${y}`,{credentials:"include"});if(!P.ok)throw new Error("Failed to fetch users");const de=await P.json();c(de.users||[]),v(null)}catch(P){console.error("Error fetching users:",P),v(P.message)}finally{f(!1)}},z=async()=>{try{const P=await fetch("/custom/api/users.php?action=supervisors",{credentials:"include"});if(!P.ok)return;const de=await P.json();o(de.supervisors||[])}catch(P){console.error("Error fetching supervisors:",P)}},H=async()=>{try{const P=await fetch("/custom/api/users.php?action=facilities",{credentials:"include"});if(!P.ok)return;const de=await P.json();p(de.facilities||[])}catch(P){console.error("Error fetching facilities:",P)}},D=()=>{fe({username:"",password:"",fname:"",mname:"",lname:"",title:"",suffix:"",email:"",phone:"",phonecell:"",npi:"",federaltaxid:"",taxonomy:"",state_license_number:"",supervisor_id:"",supervisor_ids:[],facility_id:"",authorized:!1,is_supervisor:!1,active:!0,calendar:!1,portal_user:!1,notes:""}),xe(!1),V(null)},S=()=>{D(),_(!0)},E=async P=>{console.log("handleEdit called for user:",P),Y(P),V(null);try{console.log("Fetching user details for ID:",P.id);const de=await fetch(`/custom/api/users.php?action=get&id=${P.id}`,{credentials:"include"});console.log("Response status:",de.status),console.log("Response headers:",de.headers.get("content-type"));const _e=await de.text();if(console.log("Response text:",_e),!_e)throw new Error("Empty response from server. Check server logs.");let ee;try{ee=JSON.parse(_e)}catch(be){throw console.error("JSON parse error:",be),new Error(`Invalid JSON response: ${_e.substring(0,100)}`)}if(!de.ok)throw new Error(ee.error||"Failed to fetch user details");const M=ee.user;if(!M)throw new Error("No user data in response");const oe=await fetch(`/custom/api/users.php?action=user_supervisors&id=${P.id}`,{credentials:"include"});let ue=[];oe.ok&&(ue=((await oe.json()).supervisor_ids||[]).map(ce=>String(ce))),fe({id:M.id,username:M.username||"",password:"",fname:M.fname||"",mname:M.mname||"",lname:M.lname||"",title:M.title||"",suffix:M.suffix||"",email:M.email||"",phone:M.phone||"",phonecell:M.phonecell||"",npi:M.npi||"",federaltaxid:M.federaltaxid||"",taxonomy:M.taxonomy||"",state_license_number:M.state_license_number||"",supervisor_id:M.supervisor_id||"",supervisor_ids:ue,facility_id:M.facility_id||"",authorized:M.authorized==="1"||M.authorized===1,is_supervisor:M.is_supervisor==="1"||M.is_supervisor===1,active:M.active==="1"||M.active===1,calendar:M.calendar==="1"||M.calendar===1,portal_user:M.portal_user==="1"||M.portal_user===1,notes:M.notes||""}),k(!0)}catch(de){console.error("Error fetching user details:",de),alert("Failed to load user details: "+de.message+`

Check the browser console and server logs for more details.`),V(de.message)}},U=async()=>{if(!me.username||!me.password||!me.fname||!me.lname||!me.email){V("Username, password, email, first name, and last name are required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(me.email)){V("Please enter a valid email address");return}if(me.password.length<8){V("Password must be at least 8 characters long");return}if(!/[a-z]/.test(me.password)){V("Password must contain at least one lowercase letter");return}if(!/[A-Z]/.test(me.password)){V("Password must contain at least one uppercase letter");return}if(!/[0-9]/.test(me.password)){V("Password must contain at least one number");return}if(!/[^a-zA-Z0-9]/.test(me.password)){V("Password must contain at least one special character");return}try{$(!0),V(null);const de=await fetch("/custom/api/users.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(me)}),_e=await de.json();if(!de.ok)throw new Error(_e.error||"Failed to create user");await q(),await z(),_(!1),D()}catch(de){console.error("Error creating user:",de),V(de.message)}finally{$(!1)}},ne=async()=>{if(!me.fname||!me.lname){V("First name and last name are required");return}if(me.password&&me.password.trim()!==""){if(me.password.length<8){V("Password must be at least 8 characters long");return}if(!/[a-z]/.test(me.password)){V("Password must contain at least one lowercase letter");return}if(!/[A-Z]/.test(me.password)){V("Password must contain at least one uppercase letter");return}if(!/[0-9]/.test(me.password)){V("Password must contain at least one number");return}if(!/[^a-zA-Z0-9]/.test(me.password)){V("Password must contain at least one special character");return}}try{$(!0),V(null);const P=await fetch("/custom/api/users.php",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(me)}),de=await P.json();if(!P.ok)throw new Error(de.error||"Failed to update user");await q(),await z(),k(!1),D()}catch(P){console.error("Error updating user:",P),V(P.message)}finally{$(!1)}},pe=async P=>{if(confirm("Are you sure you want to deactivate this user?"))try{if(!(await fetch(`/custom/api/users.php?id=${P}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to deactivate user");await q()}catch(de){console.error("Error deactivating user:",de),alert("Failed to deactivate user: "+de.message)}},T=async P=>{if(confirm("Unlock this user account? This will reset failed login attempts and allow them to log in again."))try{const de=await fetch(`/custom/api/users.php?action=unlock&id=${P}`,{method:"GET",credentials:"include"});if(!de.ok){const _e=await de.json();throw new Error(_e.error||"Failed to unlock account")}await q(),alert("Account unlocked successfully")}catch(de){console.error("Error unlocking account:",de),alert("Failed to unlock account: "+de.message)}},L=()=>{_(!1),k(!1),Y(null),D()},W=(P,de)=>{fe(_e=>({..._e,[P]:de}))},F=P=>{const de=String(P);fe(_e=>{const ee=_e.supervisor_ids||[],M=ee.includes(de);return{..._e,supervisor_ids:M?ee.filter(oe=>oe!==de):[...ee,de]}})},he=n.filter(P=>{const de=j.toLowerCase();return P.fname?.toLowerCase().includes(de)||P.lname?.toLowerCase().includes(de)||P.username?.toLowerCase().includes(de)||P.email?.toLowerCase().includes(de)});return m?e.jsx("div",{className:"glass-card p-8",children:e.jsx("div",{className:"text-center text-gray-700",children:"Loading users..."})}):b?e.jsxs("div",{className:"glass-card p-8",children:[e.jsxs("div",{className:"text-center text-red-600",children:["Error: ",b]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(oa,{onClick:q,children:"Retry"})})]}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"User Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage system users and providers"})]}),e.jsxs("button",{onClick:S,className:"btn-solid btn-solid-green btn-icon",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add User"]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",placeholder:"Search by name, username, or email...",value:j,onChange:P=>g(P.target.value),className:"input-lg"})}),e.jsxs("div",{className:"flex gap-3 mb-6",children:[e.jsx("button",{onClick:()=>C("active"),className:`filter-btn-enhanced ${y==="active"?"filter-btn-active-base bg-green-500":"filter-btn-inactive"}`,children:"Active"}),e.jsx("button",{onClick:()=>C("inactive"),className:`filter-btn-enhanced ${y==="inactive"?"filter-btn-active-base bg-red-500":"filter-btn-inactive"}`,children:"Inactive"}),e.jsx("button",{onClick:()=>C("all"),className:`filter-btn-enhanced ${y==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Users"})]}),he.length>0&&e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-label",children:[he.length," user",he.length!==1?"s":""]})}),he.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),e.jsxs("p",{className:"text-gray-600 text-lg",children:["No ",y!=="all"?y:""," users found"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:he.map(P=>e.jsxs("div",{className:"card-item",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-base font-bold text-gray-800 leading-tight",children:[P.fname," ",P.lname]}),P.title&&e.jsx("p",{className:"text-xs text-gray-600",children:P.title})]}),e.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[e.jsx("span",{className:P.active==="1"?"badge-solid-success":"badge-solid-danger",children:P.active==="1"?"ACTIVE":"INACTIVE"}),P.is_locked==="1"&&e.jsx("span",{className:"badge-solid-danger text-xs",children:"LOCKED"})]})]}),e.jsxs("div",{className:"space-y-0.5 text-sm text-gray-600 mb-2",children:[(P.phonecell||P.phone)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",P.phonecell||P.phone]}),P.email&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",P.email]}),(P.is_supervisor==="1"||P.authorized==="1"||P.calendar==="1")&&e.jsxs("div",{className:"flex gap-2 mt-1.5",children:[P.is_supervisor==="1"&&e.jsx("span",{className:"badge-outline-warning text-xs",children:"Supervisor"}),P.authorized==="1"&&e.jsx("span",{className:"badge-outline-success text-xs",children:"Provider"}),P.calendar==="1"&&e.jsx("span",{className:"badge-outline-info text-xs",children:"Admin"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>E(P),className:"flex-1 px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"Edit"}),P.is_locked==="1"&&e.jsx("button",{onClick:()=>T(P.id),className:"flex-1 px-3 py-1.5 text-sm font-medium text-orange-600 hover:text-orange-800 hover:bg-orange-50 rounded-lg transition-colors",children:"Unlock"}),P.active==="1"&&e.jsx("button",{onClick:()=>pe(P.id),className:"flex-1 px-3 py-1.5 text-sm font-medium text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",children:"Deactivate"})]})]},P.id))}),(N||A)&&Tt.createPortal(e.jsx(xb,{isEdit:A,formData:me,formError:se,saving:I,showPassword:X,setShowPassword:xe,supervisors:d,facilities:u,onFormChange:W,onToggleSupervisor:F,onSave:A?ne:U,onClose:L}),document.body)]})}function xb({isEdit:n,formData:c,formError:d,saving:o,showPassword:u,setShowPassword:p,supervisors:m,facilities:f,onFormChange:b,onToggleSupervisor:v,onSave:j,onClose:g}){return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container modal-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:n?"Edit User":"Add New User"}),e.jsx("button",{onClick:g,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:y=>{y.preventDefault(),j()},className:"modal-body",children:[d&&e.jsx("div",{className:"error-message",children:d}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Login Credentials"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Username ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:c.username,onChange:y=>b("username",y.target.value),disabled:n,className:"input-field disabled:bg-gray-100"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[n?"New Password (leave blank to keep current)":"Password"," ",!n&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:u?"text":"password",value:c.password,onChange:y=>b("password",y.target.value),className:"input-field"}),e.jsx("button",{type:"button",onClick:()=>p(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-sm text-gray-600 hover:text-gray-800",children:u?"Hide":"Show"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Legal First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:c.fname,onChange:y=>b("fname",y.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Middle Name"}),e.jsx("input",{type:"text",value:c.mname,onChange:y=>b("mname",y.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Legal Last Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:c.lname,onChange:y=>b("lname",y.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Professional Credentials"}),e.jsx("input",{type:"text",value:c.title,onChange:y=>b("title",y.target.value),placeholder:"MD, LCSW, PhD, etc.",className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Suffix"}),e.jsx("input",{type:"text",value:c.suffix,onChange:y=>b("suffix",y.target.value),placeholder:"Jr., Sr., III, etc.",className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"State License Number"}),e.jsx("input",{type:"text",value:c.state_license_number,onChange:y=>b("state_license_number",y.target.value),className:"input-field"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:c.email,onChange:y=>b("email",y.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Office Phone"}),e.jsx("input",{type:"tel",value:c.phone,onChange:y=>b("phone",y.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Cell Phone"}),e.jsx("input",{type:"tel",value:c.phonecell,onChange:y=>b("phonecell",y.target.value),className:"input-field"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Professional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"NPI"}),e.jsx("input",{type:"text",value:c.npi,onChange:y=>b("npi",y.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Federal Tax ID"}),e.jsx("input",{type:"text",value:c.federaltaxid,onChange:y=>b("federaltaxid",y.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Taxonomy Code"}),e.jsx("input",{type:"text",value:c.taxonomy,onChange:y=>b("taxonomy",y.target.value),placeholder:"207Q00000X",className:"input-field"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Access Control"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.authorized,onChange:y=>b("authorized",y.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Provider (Can create clinical notes)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.is_supervisor,onChange:y=>b("is_supervisor",y.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Supervisor (Can supervise other providers)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.calendar,onChange:y=>b("calendar",y.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Administrator (Access to Settings)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.portal_user,onChange:y=>b("portal_user",y.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Portal Access"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.active,onChange:y=>b("active",y.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Organization"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Supervisors (select one or more)"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto bg-white",children:m.length===0?e.jsx("div",{className:"text-sm text-gray-500 italic",children:"No supervisors available. Mark users as supervisors in Access Control."}):e.jsx("div",{className:"space-y-2",children:m.map(y=>e.jsxs("label",{className:"flex items-center gap-2 hover:bg-gray-50 p-1 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.supervisor_ids.includes(String(y.id)),onChange:()=>v(y.id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm text-gray-700",children:[y.fname," ",y.lname," ",y.title&&`(${y.title})`]})]},y.id))})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Default Facility"}),e.jsxs("select",{value:c.facility_id,onChange:y=>b("facility_id",y.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"None"}),f.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{value:c.notes,onChange:y=>b("notes",y.target.value),rows:3,className:"input-field",placeholder:"Additional information about this user..."})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:g,disabled:o,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:o,className:"btn-action btn-primary btn-compact disabled:opacity-50",children:o?"Saving...":n?"Save Changes":"Create User"})]})]})]})})}function Ye({children:n,htmlFor:c,className:d="",...o}){return e.jsx("label",{htmlFor:c,className:`block text-label mb-2 ${d}`,...o,children:n})}function xo({active:n,onClick:c,children:d}){return e.jsx("button",{onClick:c,className:"px-4 py-2 font-semibold transition-colors "+(n?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-800"),children:d})}function gb(){const[n,c]=x.useState([]),[d,o]=x.useState(!0),[u,p]=x.useState(""),[m,f]=x.useState(""),[b,v]=x.useState("active"),[j,g]=x.useState(!1),[y,C]=x.useState(!1),[N,_]=x.useState({id:null,name:"",phone:"",fax:"",website:"",email:"",street:"",city:"",state:"",postal_code:"",country_code:"United States",mail_street:"",mail_city:"",mail_state:"",mail_zip:"",color:"#99FFFF",pos_code:"11",facility_npi:"",federal_ein:"",tax_id_type:"EIN",facility_taxonomy:"",attn:"",info:"",billing_location:0,accepts_assignment:0,service_location:1,primary_business_entity:0,inactive:0}),[A,k]=x.useState(""),[O,Y]=x.useState(!1),[I,$]=x.useState("physical"),se=[{value:"11",label:"11: Office"},{value:"02",label:"02: Telehealth"},{value:"10",label:"10: Telehealth (Patient Home)"},{value:"12",label:"12: Home"},{value:"21",label:"21: Inpatient Hospital"},{value:"22",label:"22: Outpatient Hospital"},{value:"23",label:"23: Emergency Room"},{value:"31",label:"31: Skilled Nursing Facility"},{value:"32",label:"32: Nursing Facility"},{value:"49",label:"49: Independent Clinic"},{value:"50",label:"50: Federally Qualified Health Center"},{value:"71",label:"71: State/Local Public Health Clinic"},{value:"81",label:"81: Independent Laboratory"}];x.useEffect(()=>{V()},[]);const V=async()=>{try{o(!0);const E=await fetch("/custom/api/facilities.php",{credentials:"include"});if(!E.ok)throw new Error("Failed to fetch facilities");const U=await E.json();c(U.facilities||[])}catch(E){p(E.message)}finally{o(!1)}},X=()=>{_({id:null,name:"",phone:"",fax:"",website:"",email:"",street:"",address_line2:"",city:"",state:"",postal_code:"",country_code:"United States",mail_street:"",mailing_address_line2:"",mail_city:"",mail_state:"",mail_zip:"",mailing_same_as_physical:"1",billing_street:"",billing_address_line2:"",billing_city:"",billing_state:"",billing_zip:"",billing_same_as_physical:"1",color:"#99FFFF",pos_code:"11",facility_npi:"",federal_ein:"",tax_id_type:"EIN",facility_taxonomy:"",attn:"",info:"",billing_location:0,accepts_assignment:0,service_location:1,primary_business_entity:0,inactive:0}),k(""),$("physical"),g(!0)},xe=async E=>{try{const U=await fetch(`/custom/api/facilities.php?action=get&id=${E.id}`,{credentials:"include"});if(!U.ok)throw new Error("Failed to load facility details");const ne=await U.json();_({...ne,billing_location:ne.billing_location==="1"||ne.billing_location===1?1:0,accepts_assignment:ne.accepts_assignment==="1"||ne.accepts_assignment===1?1:0,service_location:ne.service_location==="1"||ne.service_location===1?1:0,primary_business_entity:ne.primary_business_entity==="1"||ne.primary_business_entity===1?1:0,inactive:ne.inactive==="1"||ne.inactive===1?1:0,mailing_same_as_physical:ne.mailing_same_as_physical==="1"||ne.mailing_same_as_physical===1?"1":"0",billing_same_as_physical:ne.billing_same_as_physical==="1"||ne.billing_same_as_physical===1?"1":"0"}),k(""),$("physical"),C(!0)}catch(U){alert("Failed to load facility details: "+U.message)}},me=async()=>{if(!N.name?.trim()){k("Facility name is required");return}try{Y(!0),k("");const E=await fetch("/custom/api/facilities.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(N)});if(!E.ok){const U=await E.json();throw new Error(U.error||"Failed to create facility")}await V(),g(!1)}catch(E){k(E.message)}finally{Y(!1)}},fe=async()=>{if(!N.name?.trim()){k("Facility name is required");return}try{Y(!0),k("");const E=await fetch("/custom/api/facilities.php",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(N)});if(!E.ok){const U=await E.json();throw new Error(U.error||"Failed to update facility")}await V(),C(!1)}catch(E){k(E.message)}finally{Y(!1)}},q=async E=>{if(confirm("Are you sure you want to deactivate this facility?"))try{if(!(await fetch(`/custom/api/facilities.php?id=${E}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to deactivate facility");await V()}catch(U){alert("Error: "+U.message)}},z=()=>{g(!1),C(!1),k("")},H=(E,U)=>{_(ne=>({...ne,[E]:U}))},D=E=>{_(U=>({...U,[E]:U[E]?0:1}))},S=n.filter(E=>{const U=E.inactive==="0"||E.inactive===0;if(b==="active"&&!U||b==="inactive"&&U)return!1;if(m){const ne=m.toLowerCase();return E.name?.toLowerCase().includes(ne)||E.city?.toLowerCase().includes(ne)||E.state?.toLowerCase().includes(ne)}return!0});return d?e.jsx("div",{className:"glass-card p-8",children:e.jsx("div",{className:"text-center text-gray-700",children:"Loading facilities..."})}):u?e.jsxs("div",{className:"glass-card p-8",children:[e.jsxs("div",{className:"text-center text-red-600",children:["Error: ",u]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(oa,{onClick:V,children:"Retry"})})]}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Facilities"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage practice locations and facilities"})]}),e.jsxs("button",{onClick:X,className:"btn-solid btn-solid-green btn-icon",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Facility"]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",placeholder:"Search by name, city, or state...",value:m,onChange:E=>f(E.target.value),className:"input-lg"})}),e.jsxs("div",{className:"flex gap-3 mb-6",children:[e.jsx("button",{onClick:()=>v("active"),className:`filter-btn-enhanced ${b==="active"?"filter-btn-active-base bg-green-500":"filter-btn-inactive"}`,children:"Active"}),e.jsx("button",{onClick:()=>v("inactive"),className:`filter-btn-enhanced ${b==="inactive"?"filter-btn-active-base bg-red-500":"filter-btn-inactive"}`,children:"Inactive"}),e.jsx("button",{onClick:()=>v("all"),className:`filter-btn-enhanced ${b==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Facilities"})]}),S.length>0&&e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-label",children:[S.length," ",b!=="all"?b:""," facilit",S.length!==1?"ies":"y"]})}),S.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsxs("p",{className:"text-gray-600 text-lg",children:["No ",b!=="all"?b:""," facilities found"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.map(E=>e.jsxs("div",{className:"card-item",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("div",{children:e.jsx("h4",{className:"text-base font-bold text-gray-800 leading-tight",children:E.name})}),e.jsx("span",{className:E.inactive==="0"||E.inactive===0?"badge-solid-success":"badge-solid-danger",children:E.inactive==="0"||E.inactive===0?"ACTIVE":"INACTIVE"})]}),e.jsxs("div",{className:"space-y-0.5 text-sm text-gray-600 mb-2",children:[E.street&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Address:"})," ",E.street,", ",E.city,", ",E.state," ",E.postal_code]}),E.phone&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",E.phone]}),E.fax&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Fax:"})," ",E.fax]}),e.jsxs("div",{className:"flex gap-2 mt-1.5 flex-wrap",children:[(E.billing_location==="1"||E.billing_location===1)&&e.jsx("span",{className:"badge-outline-info text-xs",children:"Billing"}),(E.service_location==="1"||E.service_location===1)&&e.jsx("span",{className:"badge-outline-success text-xs",children:"Service"}),(E.primary_business_entity==="1"||E.primary_business_entity===1)&&e.jsx("span",{className:"badge-outline-warning text-xs",children:"Primary"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>xe(E),className:"flex-1 px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"Edit"}),(E.inactive==="0"||E.inactive===0)&&e.jsx("button",{onClick:()=>q(E.id),className:"flex-1 px-3 py-1.5 text-sm font-medium text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",children:"Deactivate"})]})]},E.id))}),(j||y)&&Tt.createPortal(e.jsx(pb,{isEdit:y,formData:N,formError:A,saving:O,addressTab:I,setAddressTab:$,posCodeOptions:se,onFormChange:H,onToggle:D,onSave:y?fe:me,onClose:z}),document.body)]})}function pb({isEdit:n,formData:c,formError:d,saving:o,addressTab:u,setAddressTab:p,posCodeOptions:m,onFormChange:f,onToggle:b,onSave:v,onClose:j}){return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container max-w-4xl",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:n?"Edit Facility":"Add New Facility"}),e.jsx("button",{onClick:j,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"modal-body",children:[d&&e.jsx("div",{className:"error-message mb-4",children:d}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(Ye,{children:["Facility Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",value:c.name||"",onChange:g=>f("name",g.target.value),className:"input-field",placeholder:"Enter facility name"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex border-b border-gray-300 mb-4",children:[e.jsx(xo,{active:u==="physical",onClick:()=>p("physical"),children:"Physical Address"}),e.jsx(xo,{active:u==="mailing",onClick:()=>p("mailing"),children:"Mailing Address"}),e.jsx(xo,{active:u==="billing",onClick:()=>p("billing"),children:"Billing Address"})]}),u==="physical"?e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ye,{children:"Street Address Line 1"}),e.jsx("input",{type:"text",value:c.street||"",onChange:g=>f("street",g.target.value),className:"input-field",placeholder:"123 Main Street"})]}),e.jsxs("div",{children:[e.jsx(Ye,{children:"Street Address Line 2"}),e.jsx("input",{type:"text",value:c.address_line2||"",onChange:g=>f("address_line2",g.target.value),className:"input-field",placeholder:"Suite 100"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ye,{children:"City"}),e.jsx("input",{type:"text",value:c.city||"",onChange:g=>f("city",g.target.value),className:"input-field",placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx(Ye,{children:"State"}),e.jsx("input",{type:"text",value:c.state||"",onChange:g=>f("state",g.target.value),className:"input-field",placeholder:"WI",maxLength:2})]}),e.jsxs("div",{children:[e.jsx(Ye,{children:"Zip Code"}),e.jsx("input",{type:"text",value:c.postal_code||"",onChange:g=>f("postal_code",g.target.value),className:"input-field",placeholder:"53092"})]})]})]}):u==="mailing"?e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer mb-2",children:[e.jsx("input",{type:"checkbox",checked:c.mailing_same_as_physical==="1",onChange:g=>{g.target.checked?(f("mailing_same_as_physical","1"),f("mail_street",c.street||""),f("mailing_address_line2",c.address_line2||""),f("mail_city",c.city||""),f("mail_state",c.state||""),f("mail_zip",c.postal_code||"")):f("mailing_same_as_physical","0")},className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Same as Physical Address"})]}),e.jsxs("div",{children:[e.jsx(Ye,{children:"Mailing Address Line 1"}),e.jsx("input",{type:"text",value:c.mail_street||"",onChange:g=>f("mail_street",g.target.value),className:"input-field",placeholder:"Enter mailing street address",disabled:c.mailing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(Ye,{children:"Mailing Address Line 2"}),e.jsx("input",{type:"text",value:c.mailing_address_line2||"",onChange:g=>f("mailing_address_line2",g.target.value),className:"input-field",placeholder:"Suite, Apt, etc.",disabled:c.mailing_same_as_physical==="1"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ye,{children:"City"}),e.jsx("input",{type:"text",value:c.mail_city||"",onChange:g=>f("mail_city",g.target.value),className:"input-field",placeholder:"City",disabled:c.mailing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(Ye,{children:"State"}),e.jsx("input",{type:"text",value:c.mail_state||"",onChange:g=>f("mail_state",g.target.value),className:"input-field",placeholder:"WI",maxLength:2,disabled:c.mailing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(Ye,{children:"Zip Code"}),e.jsx("input",{type:"text",value:c.mail_zip||"",onChange:g=>f("mail_zip",g.target.value),className:"input-field",placeholder:"53092",disabled:c.mailing_same_as_physical==="1"})]})]})]}):e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer mb-2",children:[e.jsx("input",{type:"checkbox",checked:c.billing_same_as_physical==="1",onChange:g=>{g.target.checked?(f("billing_same_as_physical","1"),f("billing_street",c.street||""),f("billing_address_line2",c.address_line2||""),f("billing_city",c.city||""),f("billing_state",c.state||""),f("billing_zip",c.postal_code||"")):f("billing_same_as_physical","0")},className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Same as Physical Address"})]}),e.jsxs("div",{children:[e.jsx(Ye,{children:"Billing Address Line 1"}),e.jsx("input",{type:"text",value:c.billing_street||"",onChange:g=>f("billing_street",g.target.value),className:"input-field",placeholder:"Enter billing street address",disabled:c.billing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(Ye,{children:"Billing Address Line 2"}),e.jsx("input",{type:"text",value:c.billing_address_line2||"",onChange:g=>f("billing_address_line2",g.target.value),className:"input-field",placeholder:"Suite, Apt, etc.",disabled:c.billing_same_as_physical==="1"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Ye,{children:"City"}),e.jsx("input",{type:"text",value:c.billing_city||"",onChange:g=>f("billing_city",g.target.value),className:"input-field",placeholder:"City",disabled:c.billing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(Ye,{children:"State"}),e.jsx("input",{type:"text",value:c.billing_state||"",onChange:g=>f("billing_state",g.target.value),className:"input-field",placeholder:"WI",maxLength:2,disabled:c.billing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(Ye,{children:"Zip Code"}),e.jsx("input",{type:"text",value:c.billing_zip||"",onChange:g=>f("billing_zip",g.target.value),className:"input-field",placeholder:"53092",disabled:c.billing_same_as_physical==="1"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(Ye,{children:"Phone"}),e.jsx("input",{type:"tel",value:c.phone||"",onChange:g=>f("phone",g.target.value),className:"input-field",placeholder:"262-345-7229"})]}),e.jsxs("div",{children:[e.jsx(Ye,{children:"Fax"}),e.jsx("input",{type:"tel",value:c.fax||"",onChange:g=>f("fax",g.target.value),className:"input-field",placeholder:"262-345-7229"})]}),e.jsxs("div",{children:[e.jsx(Ye,{children:"Website"}),e.jsx("input",{type:"url",value:c.website||"",onChange:g=>f("website",g.target.value),className:"input-field",placeholder:"https://example.com"})]}),e.jsxs("div",{children:[e.jsx(Ye,{children:"Email"}),e.jsx("input",{type:"email",value:c.email||"",onChange:g=>f("email",g.target.value),className:"input-field",placeholder:"contact@example.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(Ye,{children:"Color"}),e.jsx("input",{type:"color",value:c.color||"#99FFFF",onChange:g=>f("color",g.target.value),className:"input-field h-10"})]}),e.jsxs("div",{children:[e.jsx(Ye,{children:"POS Code"}),e.jsx("select",{value:c.pos_code||"11",onChange:g=>f("pos_code",g.target.value),className:"input-field",children:m.map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))})]}),e.jsxs("div",{children:[e.jsx(Ye,{children:"Facility NPI"}),e.jsx("input",{type:"text",value:c.facility_npi||"",onChange:g=>f("facility_npi",g.target.value),className:"input-field",placeholder:"1811342058"})]}),e.jsxs("div",{children:[e.jsx(Ye,{children:"Tax ID"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("select",{value:c.tax_id_type||"EIN",onChange:g=>f("tax_id_type",g.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",style:{width:"90px"},children:[e.jsx("option",{value:"EIN",children:"EIN"}),e.jsx("option",{value:"SSN",children:"SSN"})]}),e.jsx("input",{type:"text",value:c.federal_ein||"",onChange:g=>f("federal_ein",g.target.value),className:"input-field flex-1",placeholder:"566611885"})]})]}),e.jsxs("div",{children:[e.jsx(Ye,{children:"Facility Taxonomy"}),e.jsx("input",{type:"text",value:c.facility_taxonomy||"",onChange:g=>f("facility_taxonomy",g.target.value),className:"input-field",placeholder:"101YP2500X"})]}),e.jsxs("div",{children:[e.jsx(Ye,{children:"Attn"}),e.jsx("input",{type:"text",value:c.attn||"",onChange:g=>f("attn",g.target.value),className:"input-field",placeholder:"Kenneth J Nelan"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.billing_location===1,onChange:()=>b("billing_location"),className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Billing Location"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.accepts_assignment===1,onChange:()=>b("accepts_assignment"),className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Accepts Assignment"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.service_location===1,onChange:()=>b("service_location"),className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Service Location"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.primary_business_entity===1,onChange:()=>b("primary_business_entity"),className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Primary Business Entity"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.inactive===1,onChange:()=>b("inactive"),className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Facility Inactive"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(Ye,{children:"Info"}),e.jsx("textarea",{value:c.info||"",onChange:g=>f("info",g.target.value),className:"input-field",rows:4,placeholder:"Additional information about this facility..."})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"text-red-600",children:"*"})," Required"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{onClick:j,disabled:o,className:"btn-action btn-cancel",children:"Cancel"}),e.jsx("button",{onClick:v,disabled:o,className:"btn-action btn-primary",children:o?"Saving...":n?"Save Changes":"Add Facility"})]})]})})}function bb(){const[n,c]=x.useState([]),[d,o]=x.useState(!0),[u,p]=x.useState(!1),[m,f]=x.useState(null),[b,v]=x.useState({});x.useEffect(()=>{j()},[]);const j=async()=>{try{o(!0);const _=await fetch("/custom/api/settings.php?category=security",{credentials:"include"});if(!_.ok)throw new Error("Failed to fetch settings");const A=await _.json();c(A.settings||[]);const k={};A.settings.forEach(O=>{k[O.setting_key]=O.setting_value}),v(k)}catch(_){console.error("Error fetching settings:",_),f({type:"error",text:"Failed to load security settings"})}finally{o(!1)}},g=(_,A)=>{v(k=>({...k,[_]:A}))},y=async()=>{try{p(!0),f(null);const _=await fetch("/custom/api/settings.php",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({settings:b})}),A=await _.json();if(!_.ok)throw new Error(A.message||"Failed to save settings");f({type:"success",text:"Settings saved successfully!"}),setTimeout(()=>f(null),3e3)}catch(_){console.error("Error saving settings:",_),f({type:"error",text:_.message||"Failed to save settings"})}finally{p(!1)}},C=_=>{const A=_.setting_key,k=b[A]||_.setting_value;return _.setting_type==="boolean"?e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:k==="1"||k===!0,onChange:O=>g(A,O.target.checked?"1":"0"),disabled:!_.is_editable,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}):_.setting_type==="integer"?e.jsx("input",{type:"number",value:k,onChange:O=>g(A,O.target.value),disabled:!_.is_editable,className:"w-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50 text-gray-900",min:"0"}):e.jsx("input",{type:"text",value:k,onChange:O=>g(A,O.target.value),disabled:!_.is_editable,className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50 text-gray-900"})},N=_=>_.split(".").pop().split("_").map(A=>A.charAt(0).toUpperCase()+A.slice(1)).join(" ");return d?e.jsx("div",{className:"glass-card p-12 text-center",children:e.jsx("div",{className:"text-gray-700",children:"Loading security settings..."})}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Security Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure security and authentication parameters"})]}),m&&e.jsx("div",{className:`mb-6 px-4 py-3 rounded-lg border ${m.type==="success"?"bg-green-100/60 border-green-300/50 text-green-700":"bg-red-100/60 border-red-300/50 text-red-700"}`,children:m.text}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/30 backdrop-blur-sm rounded-xl p-6 border border-white/40",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Account Lockout"}),e.jsx("div",{className:"space-y-5",children:n.filter(_=>_.setting_key.includes("login_attempts")||_.setting_key.includes("lockout")).map(_=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("label",{className:"block font-medium text-gray-900 text-sm",children:N(_.setting_key)}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:_.description})]}),e.jsx("div",{className:"flex-shrink-0",children:C(_)})]},_.setting_key))})]}),e.jsxs("div",{className:"bg-white/30 backdrop-blur-sm rounded-xl p-6 border border-white/40",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Password Requirements"}),e.jsx("div",{className:"space-y-5",children:n.filter(_=>_.setting_key.includes("password")).map(_=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("label",{className:"block font-medium text-gray-900 text-sm",children:N(_.setting_key)}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:_.description})]}),e.jsx("div",{className:"flex-shrink-0",children:C(_)})]},_.setting_key))})]}),e.jsxs("div",{className:"bg-white/30 backdrop-blur-sm rounded-xl p-6 border border-white/40",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Session Management"}),e.jsx("div",{className:"space-y-5",children:n.filter(_=>_.setting_key.includes("session")).map(_=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("label",{className:"block font-medium text-gray-900 text-sm",children:N(_.setting_key)}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:_.description})]}),e.jsx("div",{className:"flex-shrink-0",children:C(_)})]},_.setting_key))})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:y,disabled:u,className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-blue-500 text-white font-medium rounded-lg hover:from-blue-700 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:u?"Saving Changes...":"Save Changes"})})]})]})}function vb(){const[n,c]=x.useState([]),[d,o]=x.useState(!0),[u,p]=x.useState(""),[m,f]=x.useState(""),[b,v]=x.useState("all"),[j,g]=x.useState(!1),[y,C]=x.useState(!1),[N,_]=x.useState({id:null,code:"",category:"Individual Therapy",type:"CPT4",description:"",standard_duration_minutes:50,standard_fee:"",is_active:1,is_addon:0,requires_primary_code:"",sort_order:0}),[A,k]=x.useState(""),[O,Y]=x.useState(!1),I=["Individual Therapy","Family Therapy","Group Therapy","Intake","Crisis","Assessment","Case Management","Non-Billable","Other"];x.useEffect(()=>{$()},[]);const $=async()=>{try{o(!0);const z=await fetch("/custom/api/cpt_codes.php",{credentials:"include"});if(!z.ok)throw new Error("Failed to fetch CPT codes");const H=await z.json();c(H.cpt_codes||[])}catch(z){p(z.message)}finally{o(!1)}},se=()=>{_({id:null,code:"",category:"Individual Therapy",type:"CPT4",description:"",standard_duration_minutes:50,standard_fee:"",is_active:1,is_addon:0,requires_primary_code:"",sort_order:0}),k(""),g(!0)},V=z=>{_({id:z.id,code:z.code,category:z.category,type:z.type,description:z.description,standard_duration_minutes:z.standard_duration_minutes,standard_fee:z.standard_fee||"",is_active:z.is_active,is_addon:z.is_addon,requires_primary_code:z.requires_primary_code||"",sort_order:z.sort_order}),k(""),C(!0)},X=async()=>{if(k(""),!N.code.trim()){k("CPT code is required");return}if(!N.description.trim()){k("Description is required");return}try{Y(!0);const z=N.id?"update":"create",H=await fetch("/custom/api/cpt_codes.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:z,...N})}),D=await H.json();if(!H.ok||!D.success)throw new Error(D.error||"Failed to save CPT code");await $(),g(!1),C(!1)}catch(z){k(z.message)}finally{Y(!1)}},xe=async z=>{if(confirm("Are you sure you want to delete this CPT code? This cannot be undone."))try{const H=await fetch("/custom/api/cpt_codes.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete",id:z})}),D=await H.json();if(!H.ok||!D.success)throw new Error(D.error||"Failed to delete CPT code");await $()}catch(H){p(H.message)}},me=async z=>{try{const H=await fetch("/custom/api/cpt_codes.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",id:z.id,is_active:z.is_active?0:1})}),D=await H.json();if(!H.ok||!D.success)throw new Error(D.error||"Failed to update status");await $()}catch(H){p(H.message)}},fe=n.filter(z=>{const H=z.code.toLowerCase().includes(m.toLowerCase())||z.description.toLowerCase().includes(m.toLowerCase()),D=b==="all"||z.category===b;return H&&D}).sort((z,H)=>{const D=z.code.toString(),S=H.code.toString();return D.localeCompare(S,void 0,{numeric:!0})}),q=[...new Set(n.map(z=>z.category))];return d?e.jsx("div",{className:"glass-card p-8",children:e.jsx("div",{className:"text-center text-gray-600",children:"Loading CPT codes..."})}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"CPT Codes"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage billing codes for clinical services"})]}),e.jsx(oa,{onClick:se,children:"+ Add CPT Code"})]}),u&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:u}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search codes or descriptions...",value:m,onChange:z=>f(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsxs("select",{value:b,onChange:z=>v(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Categories"}),q.map(z=>e.jsx("option",{value:z,children:z},z))]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Code"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Duration"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Fee"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:fe.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:"No CPT codes found"})}):fe.map(z=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-4 py-3 text-sm font-mono font-semibold text-gray-900",children:[z.code,z.is_addon===1&&e.jsx("span",{className:"ml-2 text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded",children:"Add-on"})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:z.category}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:z.description}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700 text-center",children:[z.standard_duration_minutes," min"]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right font-medium",children:z.standard_fee?`$${parseFloat(z.standard_fee).toFixed(2)}`:""}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>me(z),className:`px-3 py-1 text-xs rounded-full ${z.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:z.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-4 py-3 text-center",children:[e.jsx("button",{onClick:()=>V(z),className:"text-blue-600 hover:text-blue-800 mr-3",children:"Edit"}),e.jsx("button",{onClick:()=>xe(z.id),className:"text-red-600 hover:text-red-800",children:"Delete"})]})]},z.id))})]})}),(j||y)&&Tt.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:N.id?"Edit CPT Code":"Add CPT Code"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[A&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:A}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["CPT Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:N.code,onChange:z=>_({...N,code:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"90834"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsx("select",{value:N.category,onChange:z=>_({...N,category:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:I.map(z=>e.jsx("option",{value:z,children:z},z))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:N.description,onChange:z=>_({...N,description:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Psychotherapy 45-50 minutes"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Standard Duration (minutes)"}),e.jsx("input",{type:"number",value:N.standard_duration_minutes,onChange:z=>_({...N,standard_duration_minutes:parseInt(z.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Standard Fee ($)"}),e.jsx("input",{type:"number",step:"0.01",value:N.standard_fee,onChange:z=>_({...N,standard_fee:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"150.00"})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:N.is_addon===1,onChange:z=>_({...N,is_addon:z.target.checked?1:0}),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Add-on Code"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:N.is_active===1,onChange:z=>_({...N,is_active:z.target.checked?1:0}),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]})]}),N.is_addon===1&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Requires Primary Code"}),e.jsx("input",{type:"text",value:N.requires_primary_code,onChange:z=>_({...N,requires_primary_code:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"90834"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Which primary CPT code is required for this add-on?"})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx(Do,{onClick:()=>{g(!1),C(!1)},disabled:O,children:"Cancel"}),e.jsx(oa,{onClick:X,children:O?"Saving...":"Save CPT Code"})]})]})}),document.body)]})}function yb(){const[n,c]=x.useState([]),[d,o]=x.useState(!0),[u,p]=x.useState(""),[m,f]=x.useState(""),[b,v]=x.useState("all"),[j,g]=x.useState(!1),[y,C]=x.useState(!1),[N,_]=x.useState({id:null,code:"",description:"",modifier_type:"clinician",is_active:1,sort_order:0}),[A,k]=x.useState(""),[O,Y]=x.useState(!1),I=[{value:"telehealth",label:"Telehealth"},{value:"clinician",label:"Clinician Type"},{value:"administrative",label:"Administrative"},{value:"mh-specific",label:"MH-Specific"}];x.useEffect(()=>{$()},[]);const $=async()=>{try{o(!0);const q=await fetch("/custom/api/billing_modifiers.php",{credentials:"include"});if(!q.ok)throw new Error("Failed to fetch billing modifiers");const z=await q.json();c(z.modifiers||[])}catch(q){p(q.message)}finally{o(!1)}},se=()=>{_({id:null,code:"",description:"",modifier_type:"clinician",is_active:1,sort_order:0}),k(""),g(!0)},V=q=>{_({id:q.id,code:q.code,description:q.description,modifier_type:q.modifier_type,is_active:q.is_active,sort_order:q.sort_order}),k(""),C(!0)},X=async()=>{if(k(""),!N.code.trim()){k("Modifier code is required");return}if(!N.description.trim()){k("Description is required");return}try{Y(!0);const q=N.id?"update":"create",z=await fetch("/custom/api/billing_modifiers.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:q,...N})}),H=await z.json();if(!z.ok||!H.success)throw new Error(H.error||"Failed to save modifier");await $(),g(!1),C(!1)}catch(q){k(q.message)}finally{Y(!1)}},xe=async q=>{if(confirm("Are you sure you want to delete this modifier? This cannot be undone."))try{const z=await fetch("/custom/api/billing_modifiers.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete",id:q})}),H=await z.json();if(!z.ok||!H.success)throw new Error(H.error||"Failed to delete modifier");await $()}catch(z){p(z.message)}},me=async q=>{try{const z=await fetch("/custom/api/billing_modifiers.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",id:q.id,is_active:q.is_active?0:1})}),H=await z.json();if(!z.ok||!H.success)throw new Error(H.error||"Failed to update status");await $()}catch(z){p(z.message)}},fe=n.filter(q=>{const z=q.code.toLowerCase().includes(m.toLowerCase())||q.description.toLowerCase().includes(m.toLowerCase()),H=b==="all"||q.modifier_type===b;return z&&H});return d?e.jsx("div",{className:"glass-card p-8",children:e.jsx("div",{className:"text-center text-gray-600",children:"Loading billing modifiers..."})}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Billing Modifiers"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage CPT code modifiers for billing"})]}),e.jsx(oa,{onClick:se,children:"+ Add Modifier"})]}),u&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:u}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search modifiers...",value:m,onChange:q=>f(q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsxs("select",{value:b,onChange:q=>v(q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Types"}),I.map(q=>e.jsx("option",{value:q.value,children:q.label},q.value))]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Code"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:fe.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-4 py-8 text-center text-gray-500",children:"No modifiers found"})}):fe.map(q=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-mono font-semibold text-gray-900",children:q.code}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${q.modifier_type==="telehealth"?"bg-blue-100 text-blue-700":q.modifier_type==="clinician"?"bg-green-100 text-green-700":q.modifier_type==="administrative"?"bg-purple-100 text-purple-700":"bg-orange-100 text-orange-700"}`,children:I.find(z=>z.value===q.modifier_type)?.label})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:q.description}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>me(q),className:`px-3 py-1 text-xs rounded-full ${q.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:q.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-4 py-3 text-center",children:[e.jsx("button",{onClick:()=>V(q),className:"text-blue-600 hover:text-blue-800 mr-3",children:"Edit"}),e.jsx("button",{onClick:()=>xe(q.id),className:"text-red-600 hover:text-red-800",children:"Delete"})]})]},q.id))})]})}),(j||y)&&Tt.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:N.id?"Edit Modifier":"Add Modifier"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[A&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:A}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Modifier Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:N.code,onChange:q=>_({...N,code:q.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"HO",maxLength:"10"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsx("select",{value:N.modifier_type,onChange:q=>_({...N,modifier_type:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:I.map(q=>e.jsx("option",{value:q.value,children:q.label},q.value))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:N.description,onChange:q=>_({...N,description:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Master's Level Therapist"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:N.is_active===1,onChange:q=>_({...N,is_active:q.target.checked?1:0}),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active"})]})})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx(Do,{onClick:()=>{g(!1),C(!1)},disabled:O,children:"Cancel"}),e.jsx(oa,{onClick:X,disabled:O,children:O?"Saving...":"Save Modifier"})]})]})}),document.body)]})}function jb(){return e.jsxs("div",{className:"glass-card p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"About SanctumEMHR EMHR"}),e.jsxs("div",{className:"flex items-center justify-between mb-8 pb-6 border-b border-white/30",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-48 h-48 backdrop-blur-xl bg-white/40 rounded-2xl flex items-center justify-center p-3 shadow-lg",children:e.jsx("img",{src:"/app/SanctumLogo.png",alt:"SanctumEMHR Logo",className:"w-full h-full object-contain"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:"SanctumEMHR"}),e.jsx("p",{className:"text-lg text-gray-700 mt-1",children:"Electronic Mental Health Records"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2 italic",children:"Where modern design meets clinical insight"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-900 font-semibold",children:"Kenneth J. Nelan"}),e.jsx("p",{className:"text-gray-700 mt-1",children:"Sacred Wandering"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Version Information"}),e.jsxs("div",{className:"bg-white/40 backdrop-blur-sm rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Version:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:"0.3.0-alpha"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Release Stage:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:"Alpha Testing"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Build Date:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]})]}),e.jsxs("div",{className:"bg-blue-50/60 backdrop-blur-sm rounded-lg p-6 border border-blue-200/50",children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-3",children:"What is EMHR?"}),e.jsx("div",{className:"mb-4 pb-4 border-b border-blue-200/30",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"SanctumEMHR is a purpose-built Electronic Mental Health Records (EMHR) system designed specifically for outpatient mental health practices. Combining modern design principles with specialized clinical functionality, SanctumEMHR streamlines client management, appointment scheduling, clinical documentation, and billing workflowsall within a beautiful, intuitive interface."})}),e.jsxs("p",{className:"text-gray-700 leading-relaxed mb-4",children:[e.jsx("strong",{className:"text-blue-900",children:"EMHR (Electronic Mental Health Records)"})," is a term we've introduced to distinguish mental health-specific documentation systems from general medical EMRs. While EMRs focus on physical health, EMHRs are purpose-built for the unique workflows, documentation requirements, and clinical needs of mental health and behavioral health practices."]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"SanctumEMHR represents a new generation of EMHR systems designed from the ground up for outpatient mental health providers, combining modern UX with specialized clinical functionality."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Current Features"}),e.jsx("div",{className:"bg-white/40 backdrop-blur-sm rounded-lg p-4",children:e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Client management with comprehensive demographics"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Calendar with day/week/month views"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Appointment creation and scheduling"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Insurance and billing information tracking"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Guardian/related persons management"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Modern glassmorphism UI design"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"HIPAA-compliant security and encryption"})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"System Information"}),e.jsxs("div",{className:"bg-white/40 backdrop-blur-sm rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Frontend Framework:"}),e.jsx("span",{className:"text-gray-900",children:"React 18 + Vite"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Styling:"}),e.jsx("span",{className:"text-gray-900",children:"Tailwind CSS v4"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Authentication:"}),e.jsx("span",{className:"text-gray-900",children:"Session-based (PHP)"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Database:"}),e.jsx("span",{className:"text-gray-900",children:"MySQL/MariaDB"})]})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50/80 to-purple-50/80 backdrop-blur-sm rounded-lg p-6 border border-white/50",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 font-semibold text-lg",children:"SanctumEMHR is Copyright  2026 Sacred Wandering"}),e.jsx("p",{className:"text-gray-700 font-medium mt-1",children:"Proprietary and Confidential"})]}),e.jsxs("div",{className:"pt-3 border-t border-white/50",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"This software is licensed for authorized use only."}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Unauthorized copying, modification, distribution, or use is strictly prohibited."})]})]})})]})]})}function Nb(){const[n,c]=x.useState("calendar-settings"),[d,o]=x.useState({system:!0,clinical:!0,scheduling:!0,billing:!0,communications:!0,organization:!0}),u=[{id:"system",label:"System",icon:"",sections:[{id:"security",label:"Security",available:!0},{id:"appearance",label:"Appearance",available:!1},{id:"features",label:"Features",available:!1}]},{id:"clinical",label:"Documentation",icon:"",sections:[{id:"reference-lists",label:"Reference Lists",available:!0},{id:"document-categories",label:"Document Categories",available:!0}]},{id:"scheduling",label:"Calendar",icon:"",sections:[{id:"calendar-settings",label:"Calendar Settings",available:!0},{id:"calendar-categories",label:"Calendar Categories",available:!0}]},{id:"billing",label:"Billing",icon:"",sections:[{id:"cpt-codes",label:"CPT Codes",available:!0},{id:"billing-modifiers",label:"Billing Modifiers",available:!0},{id:"billing-settings",label:"Billing Settings",available:!1},{id:"payment-methods",label:"Payment Methods",available:!1}]},{id:"communications",label:"Communications",icon:"",sections:[{id:"sms-settings",label:"SMS Settings",available:!1},{id:"email-settings",label:"Email Settings",available:!1}]},{id:"organization",label:"Organization",icon:"",sections:[{id:"facilities",label:"Facilities",available:!0},{id:"users",label:"Users",available:!0}]}],p=m=>{o(f=>({...f,[m]:!f[m]}))};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"glass-card p-6 mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Settings"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage system configuration and preferences"})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-72 flex-shrink-0",children:e.jsx("div",{className:"glass-card p-4",children:e.jsxs("nav",{className:"space-y-1",children:[u.map(m=>e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>p(m.id),className:"w-full flex items-center justify-between px-3 py-2 text-label text-sm hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:m.icon}),e.jsx("span",{children:m.label})]}),e.jsx("svg",{className:`w-4 h-4 transition-transform ${d[m.id]?"":"rotate-90"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),!d[m.id]&&e.jsx("div",{className:"ml-4 mt-1 space-y-1",children:m.sections.map(f=>e.jsxs("button",{onClick:()=>f.available&&c(f.id),disabled:!f.available,className:`w-full text-left px-4 py-2 rounded-lg transition-colors text-sm ${n===f.id?"bg-blue-600 text-white font-medium":f.available?"hover:bg-gray-100 text-gray-700":"text-gray-400 cursor-not-allowed"}`,children:[f.label,!f.available&&e.jsx("span",{className:"text-xs ml-2",children:"(Soon)"})]},f.id))})]},m.id)),e.jsx("div",{className:"border-t border-gray-200 my-2"}),e.jsxs("button",{onClick:()=>c("about"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors text-sm flex items-center gap-2 ${n==="about"?"bg-blue-600 text-white font-medium":"hover:bg-gray-100 text-gray-700"}`,children:[e.jsx("span",{children:""}),e.jsx("span",{children:"About"})]})]})})}),e.jsxs("div",{className:"flex-1",children:[n==="security"&&e.jsx(bb,{}),n==="calendar-settings"&&e.jsx(ob,{}),n==="calendar-categories"&&e.jsx(db,{}),n==="reference-lists"&&e.jsx(hb,{}),n==="document-categories"&&e.jsx(ub,{}),n==="cpt-codes"&&e.jsx(vb,{}),n==="billing-modifiers"&&e.jsx(yb,{}),n==="facilities"&&e.jsx(gb,{}),n==="users"&&e.jsx(fb,{}),n==="about"&&e.jsx(jb,{}),!["security","calendar-settings","calendar-categories","reference-lists","document-categories","cpt-codes","billing-modifiers","facilities","users","about"].includes(n)&&e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx("div",{className:"text-gray-700 text-lg font-semibold",children:u.flatMap(m=>m.sections).find(m=>m.id===n)?.label}),e.jsx("p",{className:"text-gray-600 mt-2",children:"This section is coming soon"})]})]})]})]})}function Ao(){const n=ns(),[c,d]=x.useState(null),[o,u]=x.useState([]),[p,m]=x.useState(!0);return x.useEffect(()=>{async function f(){try{const b=Xi();if(!b){n("/");return}let v=b.fullName||b.username||"User",j=v.substring(0,2).toUpperCase(),g=b.admin||!1,y=b.id;try{const C=await Lp();if(C){C.fullName&&(v=C.fullName),C.admin!==void 0&&(g=C.admin),C.id&&(y=C.id);const N=v.trim().split(/\s+/);N.length>1?j=(N[0][0]+N[N.length-1][0]).toUpperCase():j=v.substring(0,2).toUpperCase()}}catch(C){console.log("Could not verify session, using cached data:",C),n("/");return}d({id:y,name:v,initials:j,role:g?"admin":"user",permissions:g?["admin"]:[],unreadMessages:0});try{const C=new Date,N=C.getFullYear(),_=String(C.getMonth()+1).padStart(2,"0"),A=String(C.getDate()).padStart(2,"0"),k=`${N}-${_}-${A}`,O=await Eo(k,k);u(O.appointments||[])}catch(C){console.error("Failed to load today's appointments:",C),u([])}m(!1)}catch(b){console.error("Error loading dashboard data:",b),n("/")}}f()},[n]),{user:c,appointments:o,loading:p}}function wb({isOpen:n,onClose:c,onSave:d,initialDate:o,initialTime:u,categories:p,block:m}){const{user:f}=Ao(),[b,v]=x.useState(!1),[j,g]=x.useState(null),[y,C]=x.useState(null),[N,_]=x.useState(null),[A,k]=x.useState(""),[O,Y]=x.useState(o||new Date().toISOString().split("T")[0]),[I,$]=x.useState(u||"09:00"),[se,V]=x.useState(""),[X,xe]=x.useState(50),[me,fe]=x.useState(""),[q,z]=x.useState(!1),[H,D]=x.useState({mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1}),[S,E]=x.useState("1"),[U,ne]=x.useState("count"),[pe,T]=x.useState(10),[L,W]=x.useState(""),[F,he]=x.useState(!1),[P,de]=x.useState("single"),[_e,ee]=x.useState(null),M=[30,50,90,240,480];x.useEffect(()=>{o&&Y(o),u&&$(u)},[o,u]),x.useEffect(()=>{m&&n&&(k(m.categoryId||""),Y(m.eventDate||""),$(m.startTime?m.startTime.substring(0,5):""),xe(m.duration||50),fe(m.comments||""),m.isRecurring&&m.recurrenceId?(he(!0),ee(m.recurrenceId),de("single")):(he(!1),ee(null)))},[m,n]),x.useEffect(()=>{p&&p.length>0&&!A&&(k(p[0].id),p[0].defaultDuration>0&&xe(p[0].defaultDuration/60))},[p]),x.useEffect(()=>{if(I&&se){const[te,we]=I.split(":").map(Number),[Ce,qe]=se.split(":").map(Number),Ve=te*60+we,jt=Ce*60+qe-Ve;jt>0&&xe(jt)}},[I,se]);const oe=async(te,we=!1)=>{if(te.preventDefault(),v(!0),g(null),C(null),_(null),!A){g("Please select a block type"),v(!1);return}if(q){if(Object.values(H).filter(Boolean).length===0){g("Please select at least one day for recurrence"),v(!1);return}if(U==="date"&&!L){g("Please select an end date for recurrence"),v(!1);return}if(U==="count"&&(!pe||pe<1)){g("Please enter a valid number of occurrences"),v(!1);return}}try{const Ce=I.includes(":")?`${I}:00`:`${I}:00:00`,qe={patientId:0,providerId:f.id,categoryId:parseInt(A),eventDate:O,startTime:Ce,duration:parseInt(X),title:p.find(lt=>lt.id===parseInt(A))?.name||"Blocked",comments:me,room:"",apptstatus:m?m.apptstatus:"-",overrideAvailability:we};F&&(qe.seriesUpdate={scope:P,recurrenceId:_e}),q&&!m&&(qe.recurrence={enabled:!0,days:H,interval:parseInt(S),endType:U,endCount:U==="count"?parseInt(pe):null,endDate:U==="date"?L:null}),console.log(m?"Updating availability block:":"Creating availability block:",qe);const Ve=m?await gf(m.id,qe):await xf(qe);Ve.success?(C(m?"Block updated successfully!":"Time blocked successfully!"),setTimeout(()=>{ce()},1e3)):g(Ve.message||`Failed to ${m?"update":"create"} block`)}catch(Ce){console.error(`Failed to ${m?"update":"create"} block:`,Ce),Ce.conflicts?_({conflicts:Ce.conflicts,totalOccurrences:Ce.totalOccurrences,conflictCount:Ce.conflictCount}):g(Ce.message||`Failed to ${m?"update":"create"} block`)}finally{v(!1)}},ue=()=>{_(null),oe({preventDefault:()=>{}},!0)},be=async()=>{if(!m)return;let te="Are you sure you want to delete this availability block?";if(F&&(P==="all"?te="Are you sure you want to delete ALL occurrences in this recurring series?":P==="future"&&(te="Are you sure you want to delete this and all future occurrences?")),!!confirm(te)){v(!0),g(null),C(null);try{const we=F?{scope:P,recurrenceId:_e}:null,Ce=await pf(m.id,we);if(Ce.success){const qe=F&&P!=="single"?`${Ce.deletedCount||"Multiple"} block(s) deleted successfully!`:"Block deleted successfully!";C(qe),setTimeout(()=>{ce()},1e3)}else g(Ce.message||"Failed to delete block")}catch(we){console.error("Failed to delete block:",we),g(we.message||"Failed to delete block")}finally{v(!1)}}},ce=()=>{k(""),fe(""),g(null),C(null),_(null),z(!1),D({mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1}),E("1"),ne("count"),T(10),W(""),he(!1),de("single"),ee(null),c(),d&&d()};return n?Tt.createPortal(e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/60 backdrop-blur-md transition-opacity",onClick:ce,"aria-hidden":"true"}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-y-auto",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",maxWidth:"48rem",maxHeight:"90vh",zIndex:10},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-200 px-8 pt-6 bg-gradient-to-r from-purple-50 to-pink-50",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:m?"Edit Availability Block":"Block Time"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m?"Update or remove this availability block":"Mark yourself as unavailable during this time"})]}),e.jsx("button",{onClick:ce,className:"p-2 hover:bg-white/80 rounded-xl transition-all hover:scale-110",disabled:b,children:e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"px-8 pb-8",children:[N&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-700 font-bold mb-2",children:"Scheduling Conflicts Detected"}),e.jsxs("p",{className:"text-red-600 text-sm mb-3",children:[N.conflictCount," of ",N.totalOccurrences," recurring blocks have conflicts:"]}),e.jsx("div",{className:"max-h-48 overflow-y-auto mb-4 space-y-2",children:N.conflicts.map((te,we)=>e.jsxs("div",{className:"bg-white border border-red-200 rounded p-2 text-sm",children:[e.jsxs("div",{className:"font-medium text-red-700",children:[new Date(te.date).toLocaleDateString()," at ",te.time]}),e.jsx("div",{className:"text-red-600",children:te.reason})]},we))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:ue,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors",children:"Create Anyway (Skip Conflicts)"}),e.jsx("button",{type:"button",onClick:()=>_(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-medium rounded-lg transition-colors",children:"Cancel"})]})]})]})}),j&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg text-red-700 flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("span",{children:j})]}),y&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 border-l-4 border-green-500 rounded-lg text-green-700 flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{children:y})]}),F&&e.jsx("div",{className:"mb-6 p-4 bg-purple-50 border-l-4 border-purple-500 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-purple-700 font-medium mb-2",children:"Recurring Availability Block Series"}),e.jsx("p",{className:"text-purple-600 text-sm mb-3",children:"This block is part of a recurring series. Choose what to update:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"seriesScope",value:"single",checked:P==="single",onChange:te=>de(te.target.value),className:"text-purple-600 focus:ring-purple-500"}),e.jsxs("span",{className:"text-sm text-purple-700",children:["Just this occurrence (",new Date(O).toLocaleDateString(),")"]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"seriesScope",value:"future",checked:P==="future",onChange:te=>de(te.target.value),className:"text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-purple-700",children:"This and all future occurrences"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"seriesScope",value:"all",checked:P==="all",onChange:te=>de(te.target.value),className:"text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-purple-700",children:"All occurrences in the series"})]})]})]})]})}),e.jsxs("form",{onSubmit:oe,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Reason ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:A,onChange:te=>k(te.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Reason"}),p.map(te=>e.jsx("option",{value:te.id,children:te.name},te.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:O,onChange:te=>Y(te.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Start Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"time",value:I,onChange:te=>$(te.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time"}),e.jsx("input",{type:"time",value:se,onChange:te=>V(te.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Duration (minutes) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3 items-center",children:[M.map(te=>e.jsx("button",{type:"button",onClick:()=>xe(te),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${X===te?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:te>=60?`${te/60}h`:`${te}m`},te)),e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(12-hours = 720 minutes)"})]}),e.jsx("input",{type:"number",value:X,onChange:te=>xe(te.target.value),min:"5",step:"5",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",required:!0})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx("input",{type:"checkbox",checked:q,onChange:te=>z(te.target.checked),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),"Make this recurring"]})}),q&&e.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-purple-200",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Repeat on ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"sun",label:"Sun"},{key:"mon",label:"Mon"},{key:"tue",label:"Tue"},{key:"wed",label:"Wed"},{key:"thu",label:"Thu"},{key:"fri",label:"Fri"},{key:"sat",label:"Sat"}].map(te=>e.jsx("button",{type:"button",onClick:()=>D(we=>({...we,[te.key]:!we[te.key]})),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${H[te.key]?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:te.label},te.key))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Frequency ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:S,onChange:te=>E(te.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",children:[e.jsx("option",{value:"1",children:"Weekly"}),e.jsx("option",{value:"2",children:"Every 2 weeks"}),e.jsx("option",{value:"3",children:"Every 3 weeks"}),e.jsx("option",{value:"4",children:"Every 4 weeks"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Ends ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:U==="count",onChange:()=>ne("count"),className:"text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"After"}),e.jsx("input",{type:"number",value:pe,onChange:te=>T(parseInt(te.target.value)||1),disabled:U!=="count",min:"1",max:"52",className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm disabled:bg-gray-100 focus:ring-2 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"occurrences"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:U==="date",onChange:()=>ne("date"),className:"text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"On"}),e.jsx("input",{type:"date",value:L,onChange:te=>W(te.target.value),disabled:U!=="date",className:"px-2 py-1 border border-gray-300 rounded text-sm disabled:bg-gray-100 focus:ring-2 focus:ring-purple-500"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:me,onChange:te=>fe(te.target.value),rows:3,placeholder:"Add any notes about this blocked time...",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white"})]}),e.jsxs("div",{className:"flex gap-4 pt-6 mt-6 border-t border-gray-200",children:[m&&e.jsx("button",{type:"button",onClick:be,className:"px-6 py-3 bg-red-100 hover:bg-red-200 text-red-700 font-semibold rounded-xl transition-all hover:shadow-md",disabled:b,children:"Delete"}),e.jsx("button",{type:"button",onClick:ce,className:"flex-1 px-6 py-3 bg-gray-100 hover:bg-gray-200 text-label rounded-xl transition-all hover:shadow-md",disabled:b,children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold rounded-xl transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",disabled:b,children:b?m?"Updating...":"Blocking...":m?"Update Block":"Block Time"})]})]})]})]})]}),document.body):null}function Sb(){const[n,c]=x.useState(new Date),[d,o]=x.useState("week"),[u,p]=x.useState([]),[m,f]=x.useState([]),[b,v]=x.useState(!0),[j,g]=x.useState(!1),[y,C]=x.useState(null),[N,_]=x.useState(null);x.useEffect(()=>{A()},[]),x.useEffect(()=>{k()},[n,d]);const A=async()=>{try{const H=await ff(1);f(H.categories||[])}catch(H){console.error("Failed to load availability categories:",H)}},k=async()=>{v(!0);try{const H=Xi();if(console.log("[CalendarAvailability] Current user:",H),!H||!H.id){console.error("No current user found"),p([]),v(!1);return}const{startDate:D,endDate:S}=O();console.log("[CalendarAvailability] Date range:",{startDate:D,endDate:S}),console.log("[CalendarAvailability] Fetching for provider ID:",H.id);const E=await Eo(D,S,"all");console.log("[CalendarAvailability] API response:",E),console.log("[CalendarAvailability] Total appointments:",E.appointments?.length);const U=E.appointments.filter(ne=>{const pe=ne.categoryType===1,T=ne.providerId==H.id;return console.log("[CalendarAvailability] Checking appointment:",{id:ne.id,categoryType:ne.categoryType,providerId:ne.providerId,currentUserId:H.id,isAvailabilityBlock:pe,isCurrentProvider:T}),pe&&T});console.log("[CalendarAvailability] Filtered blocks:",U),p(U)}catch(H){console.error("Failed to load availability blocks:",H)}finally{v(!1)}},O=()=>{const H=new Date(n),D=new Date(n);if(d==="week"){const S=H.getDay(),E=H.getDate()-S;H.setDate(E),H.setHours(0,0,0,0),D.setDate(H.getDate()+6),D.setHours(23,59,59,999)}else d==="day"&&(H.setHours(0,0,0,0),D.setHours(23,59,59,999));return{startDate:H.toISOString().split("T")[0],endDate:D.toISOString().split("T")[0]}},Y=()=>{const H=new Date(n),D=H.getDay(),S=H.getDate()-D;return H.setDate(S),H.setHours(0,0,0,0),Array.from({length:7},(E,U)=>new Date(H.getTime()+U*24*60*60*1e3))},I=(H,D,S)=>{const E=H.toISOString().split("T")[0],U=`${D.toString().padStart(2,"0")}:${S.toString().padStart(2,"0")}`;_(null),C({date:E,time:U}),g(!0)},$=(H,D)=>{D.stopPropagation(),_(H),C(null),g(!0)},se=()=>{g(!1),_(null),k()},V=()=>{const H=new Date(n);d==="week"?H.setDate(H.getDate()-7):H.setDate(H.getDate()-1),c(H)},X=()=>{const H=new Date(n);d==="week"?H.setDate(H.getDate()+7):H.setDate(H.getDate()+1),c(H)},xe=()=>{c(new Date)},me=()=>{if(d==="week"){const H=Y(),D=H[0],S=H[6];return`${D.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${S.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}else return n.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})},fe=Array.from({length:40},(H,D)=>{const S=Math.floor(D/4)+8,E=D%4*15;return{hour:S,minutes:E}}),q=H=>{const[D,S]=H.startTime.split(":").map(Number),pe=(D*60+S-480)/15,T=60,L=pe*T,he=(H.duration||0)/15*T;return{top:L,height:he}},z=H=>{const D=H.toISOString().split("T")[0];return u.filter(S=>S.eventDate===D)};return e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Manage My Availability"}),e.jsx("p",{className:"text-gray-600",children:"Block time for vacation, meetings, lunch breaks, and other unavailable periods"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:V,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:X,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsx("button",{onClick:xe,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Today"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:me()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>o("day"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${d==="day"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Day"}),e.jsx("button",{onClick:()=>o("week"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${d==="week"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Week"})]})]}),b?e.jsx("div",{className:"text-center py-12 text-gray-600",children:"Loading..."}):e.jsx("div",{className:"bg-white rounded-lg overflow-hidden border border-gray-200",children:d==="week"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsx("div",{className:"w-20 p-4 bg-gray-50 border-r border-gray-200 font-semibold text-gray-700 flex-shrink-0",children:"Time"}),Y().map((H,D)=>{const S=H.toDateString()===new Date().toDateString();return e.jsxs("div",{className:`flex-1 p-4 border-r border-gray-200 text-center ${S?"bg-blue-50":"bg-gray-50"}`,children:[e.jsx("div",{className:"text-sm text-gray-600",children:H.toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("div",{className:`text-lg font-semibold ${S?"text-blue-600":"text-gray-900"}`,children:H.getDate()})]},D)})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-20 flex-shrink-0 border-r border-gray-200 bg-gray-50",children:fe.map(H=>e.jsxs("div",{className:"h-[60px] p-3 border-b border-gray-200 text-sm text-gray-700 font-medium",children:[H.hour===0?"12":H.hour<12?H.hour:H.hour===12?"12":H.hour-12,":",H.minutes.toString().padStart(2,"0")," ",H.hour<12?"AM":"PM"]},`time-${H.hour}-${H.minutes}`))}),e.jsx("div",{className:"flex-1 flex",children:Y().map((H,D)=>{const S=z(H),E=fe.length*60;return e.jsxs("div",{className:"flex-1 border-r border-gray-200 relative",style:{height:`${E}px`},children:[fe.map(U=>e.jsx("div",{onClick:()=>I(H,U.hour,U.minutes),className:"absolute w-full h-[60px] border-b border-gray-200 hover:bg-blue-50 cursor-pointer transition-colors",style:{top:`${fe.findIndex(ne=>ne.hour===U.hour&&ne.minutes===U.minutes)*60}px`}},`slot-${U.hour}-${U.minutes}`)),S.map(U=>{const{top:ne,height:pe}=q(U),T=U.categoryColor||"#E5E7EB",L=U.categoryColor?`${U.categoryColor}80`:"#9CA3AF80";return e.jsxs("div",{onClick:W=>$(U,W),className:"absolute left-1 right-1 px-2 py-1 rounded-lg text-xs border hover:opacity-80 hover:shadow-md transition-all cursor-pointer z-10 overflow-hidden",style:{top:`${ne}px`,height:`${pe}px`,backgroundColor:`${T}B3`,borderColor:L},children:[e.jsx("div",{className:"font-semibold text-gray-900",children:U.categoryName}),pe>30&&U.comments&&e.jsx("div",{className:"text-gray-700 text-[10px] truncate",children:U.comments})]},U.id)})]},D)})})]})]})}),e.jsx(wb,{isOpen:j,onClose:()=>g(!1),onSave:se,initialDate:y?.date,initialTime:y?.time,categories:m,block:N})]})}function _b(){const[n,c]=x.useState("availability"),d=[{id:"profile",label:"My Profile",available:!1},{id:"preferences",label:"Preferences",available:!1},{id:"calendar-settings",label:"Calendar Settings",available:!1},{id:"availability",label:"Calendar Availability",available:!0},{id:"notifications",label:"Notifications",available:!1}];return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"glass-card p-6 mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Settings"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your personal preferences and availability"})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-64 flex-shrink-0",children:e.jsx("div",{className:"glass-card p-4",children:e.jsx("nav",{className:"space-y-1",children:d.map(o=>e.jsxs("button",{onClick:()=>o.available&&c(o.id),disabled:!o.available,className:`w-full text-left px-4 py-2 rounded-lg transition-colors ${n===o.id?"bg-blue-600 text-white font-medium":o.available?"hover:bg-gray-100 text-gray-700":"text-gray-400 cursor-not-allowed"}`,children:[o.label,!o.available&&e.jsx("span",{className:"text-xs ml-2",children:"(Coming Soon)"})]},o.id))})})}),e.jsxs("div",{className:"flex-1",children:[n==="availability"&&e.jsx(Sb,{}),n!=="availability"&&e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx("div",{className:"text-gray-700 text-lg font-semibold",children:d.find(o=>o.id===n)?.label}),e.jsx("p",{className:"text-gray-600 mt-2",children:"This section is coming soon"})]})]})]})]})}function Cb(){const n=Ma(),c=ns(),[d,o]=x.useState("dashboard"),{user:u,appointments:p,loading:m}=Ao(),[f,b]=x.useState({activeClients:0}),[v,j]=x.useState(!1),[g,y]=x.useState(!1),[C,N]=x.useState(null),[_,A]=x.useState([]);x.useEffect(()=>{n.state?.activeNav&&o(n.state.activeNav)},[n.state]),x.useEffect(()=>{const fe=async()=>{try{const z=await cf();b(z)}catch(z){console.error("Failed to fetch client stats:",z)}},q=async()=>{try{const z=await ko();A(z.providers||[])}catch(z){console.error("Failed to fetch providers:",z)}};u&&(fe(),q())},[u]);const k={todayAppointments:{value:p.filter(fe=>fe.categoryType!==1).length||0,trend:{direction:"up",change:0,label:"from yesterday"}},unbilledAppointments:{value:0,trend:{direction:"up",change:0,label:"from last week"}},sessionsYTD:{value:0,trend:{direction:"up",change:0,label:"from last month"}},activeClients:{value:f.activeClients||0,trend:{direction:"down",change:0,label:"from last month"}}},O=p.filter(fe=>fe.categoryType!==1).map(fe=>({...fe,time:new Date(fe.eventDate+" "+fe.startTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),client:fe.patientName||"Unknown",type:fe.categoryName||"Appointment",duration:fe.duration?`${fe.duration} min`:"",room:fe.room||"",isNext:!1})),Y=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),I=async()=>{await bf()},$=()=>{j(!0)},se=fe=>{console.log("New client created with ID:",fe),j(!1),c(`/clients/${fe}`)},V=()=>{N(null),y(!0)},X=fe=>{N(fe),y(!0)},xe=()=>{console.log("Appointment saved"),N(null),y(!1),window.location.reload()},me=()=>{N(null),y(!1)};return m||!u?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-mental",children:e.jsxs("div",{className:"rounded-3xl p-8",style:{backdropFilter:"blur(60px) saturate(180%)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0.4) 100%)",boxShadow:"0 8px 32px rgba(107, 154, 196, 0.12), 0 2px 8px rgba(0, 0, 0, 0.06), inset 0 1px 0 rgba(255, 255, 255, 0.8)",border:"1px solid rgba(255, 255, 255, 0.6)"},children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 mx-auto",style:{border:"3px solid rgba(107, 154, 196, 0.3)",borderTopColor:"rgba(107, 154, 196, 0.9)"}}),e.jsx("p",{className:"text-label mt-4 text-center",children:"Loading dashboard..."})]})}):e.jsxs(nf,{user:u,activeNav:d,setActiveNav:o,today:Y,onLogout:I,wide:d==="calendar",children:[d==="dashboard"&&e.jsxs(e.Fragment,{children:[e.jsx(Mp,{}),e.jsx(Rp,{stats:k}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(zp,{onNewClient:$,onNewAppointment:V}),e.jsx(Op,{todaysAppointments:O,onAppointmentClick:X})]})]}),d==="clients"&&e.jsx(nb,{}),d==="calendar"&&e.jsx(cb,{}),d==="reports"&&e.jsx(ib,{}),d==="admin"&&e.jsx(Nb,{}),d==="settings"&&e.jsx(_b,{}),d!=="dashboard"&&d!=="clients"&&d!=="calendar"&&d!=="reports"&&d!=="admin"&&d!=="settings"&&e.jsxs("div",{className:"backdrop-blur-2xl bg-white/40 rounded-3xl shadow-2xl border border-white/50 p-8 text-center",children:[e.jsxs("p",{className:"text-gray-700 text-lg font-semibold",children:[d.charAt(0).toUpperCase()+d.slice(1)," - Coming Soon"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"This feature is under development"})]}),v&&e.jsx(vf,{onClose:()=>j(!1),onClientCreated:se}),e.jsx(yf,{isOpen:g,onClose:me,onSave:xe,appointment:C,providers:_})]})}function kb({client:n}){const c=ns();if(!n)return null;const d=f=>{if(!f)return"bg-gray-500 text-white";const b=f.toLowerCase();return b==="active"?"bg-green-500 text-white":b==="inactive"?"bg-yellow-500 text-white":"bg-gray-500 text-white"},o=f=>f?f.charAt(0).toUpperCase()+f.slice(1).toLowerCase():"Unknown",u=f=>f?`${f} years old`:"",p=f=>f?new Date(f).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",m=f=>f?new Date(f).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"";return e.jsx("div",{className:"card-main mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>c("/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-white/60 hover:bg-white/80 text-gray-700 rounded-lg transition-colors font-medium border border-gray-200",title:"Back to Dashboard",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),e.jsx("span",{children:"Back"})]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:[n.fname," ",n.mname&&n.mname+" ",n.lname]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-gray-600",children:[e.jsx("span",{children:u(n.age)}),e.jsx("span",{children:""}),e.jsxs("span",{children:["DOB: ",p(n.DOB)]}),e.jsx("span",{children:""}),e.jsxs("span",{children:["ID: ",n.pid]}),n.client_since&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["Client Since: ",m(n.client_since)]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[n.protection_indicator_code==="YES"&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("span",{className:"text-sm font-semibold text-red-800",children:"Risk Factors Documented"})]}),e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-medium ${d(n.care_team_status)}`,children:o(n.care_team_status)})]})]})})}function Eb({activeTab:n,onTabChange:c}){const d=[{id:"summary",label:"Summary"},{id:"demographics",label:"Demographics"},{id:"insurance",label:"Insurance"},{id:"encounters",label:"Sessions"},{id:"clinical",label:"Clinical Notes"},{id:"documents",label:"Documents"},{id:"billing",label:"Billing"},{id:"admin",label:"Admin Notes"}];return e.jsx("div",{className:"tab-nav mb-6",children:e.jsx("div",{className:"flex gap-2",children:d.map(o=>e.jsx("button",{onClick:()=>c(o.id),className:n===o.id?"nav-tab-active":"nav-tab-inactive",children:o.label},o.id))})})}function Db({data:n}){if(!n)return e.jsx("div",{className:"text-gray-700 text-center py-8",children:"Loading client data..."});const{patient:c,upcomingAppointments:d,recentAppointments:o,problems:u,medications:p,encounters:m}=n,f=j=>j?new Date(j).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",b=j=>{if(!j)return"";const[g,y]=j.split(":"),C=parseInt(g),N=C>=12?"PM":"AM";return`${C%12||12}:${y} ${N}`},v=j=>{if(!j)return"";const g=j.split(/\s{3,}/);return g.length>1?g[1].trim():j.trim()};return e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Contact Information"}),e.jsx("div",{className:"bg-white/80 rounded-xl p-4 border border-gray-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"field-label",children:"Email:"}),e.jsx("div",{className:"field-value",children:c.email||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"field-label",children:"Cell Phone:"}),e.jsx("div",{className:"field-value",children:c.phone_cell||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"field-label",children:"Home Phone:"}),e.jsx("div",{className:"field-value",children:c.phone_home||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"field-label",children:"Address:"}),e.jsx("div",{className:"field-value",children:c.street&&c.city?e.jsxs(e.Fragment,{children:[c.street,e.jsx("br",{}),c.city,", ",c.state," ",c.postal_code]}):"Not provided"})]}),c.contact_relationship&&e.jsxs("div",{children:[e.jsx("span",{className:"field-label",children:"Emergency Contact:"}),e.jsx("div",{className:"field-value",children:c.contact_relationship})]})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:e.jsx("span",{className:"flex items-center gap-2",children:" Diagnosis"})}),u&&u.length>0?e.jsx("div",{className:"space-y-3",children:u.map(j=>e.jsx("div",{className:"card-inner border-l-4 border-blue-400",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-mono text-sm font-semibold text-blue-700 bg-blue-100 px-2 py-0.5 rounded",children:j.diagnosis}),j.enddate&&e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:"Retired"})]}),e.jsx("div",{className:"item-title text-gray-800",children:v(j.title)}),e.jsxs("div",{className:"item-tertiary mt-1",children:["Started: ",f(j.begdate),j.enddate&&`  Ended: ${f(j.enddate)}`]})]})})},j.id))}):e.jsx("div",{className:"empty-state",children:"No active diagnoses recorded"})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:e.jsx("span",{className:"flex items-center gap-2",children:" Current Medications"})}),p&&p.length>0?e.jsx("div",{className:"space-y-3",children:p.map((j,g)=>e.jsxs("div",{className:"card-inner border-l-4 border-green-400",children:[e.jsx("div",{className:"item-title text-gray-900",children:j.name}),j.dosage&&e.jsxs("div",{className:"item-secondary text-green-700 font-semibold",children:[j.dosage,j.frequency&&` - ${j.frequency}`]}),j.purpose&&e.jsxs("div",{className:"item-tertiary",children:["For: ",j.purpose]}),j.prescriber&&e.jsxs("div",{className:"item-tertiary",children:["Prescribed by: ",j.prescriber]})]},g))}):e.jsx("div",{className:"empty-state",children:"No active medications"})]})]})]}),e.jsxs("div",{className:"w-80 flex-shrink-0 space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Appointments"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header",children:"Upcoming"}),d&&d.length>0?e.jsx("div",{className:"space-y-3",children:d.map(j=>e.jsxs("div",{className:"card-inner",children:[e.jsx("div",{className:"appt-date",children:f(j.pc_eventDate)}),e.jsxs("div",{className:"appt-time",children:[b(j.pc_startTime)," - ",b(j.pc_endTime)]}),e.jsx("div",{className:"appt-type",children:j.pc_catname||"Appointment"})]},j.pc_eid))}):e.jsx("div",{className:"text-muted",children:"No upcoming appointments"})]}),e.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[e.jsx("h3",{className:"section-header",children:"Recurring"}),e.jsx("div",{className:"text-muted",children:"No recurring appointments"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"section-header",children:"Recent Past"}),o&&o.length>0?e.jsx("div",{className:"space-y-3",children:o.slice(0,6).map(j=>e.jsxs("div",{className:"card-inner",children:[e.jsx("div",{className:"appt-date",children:f(j.pc_eventDate)}),e.jsxs("div",{className:"appt-time",children:[b(j.pc_startTime)," - ",b(j.pc_endTime)]}),e.jsx("div",{className:"appt-type",children:j.pc_catname||"Appointment"})]},j.pc_eid))}):e.jsx("div",{className:"text-muted",children:"No recent appointments"})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Portal Access"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("p",{className:"alert-header text-gray-700",children:"Portal Status"}),e.jsx("p",{className:"text-caption text-gray-600",children:"Patient Portal Not Enabled. Admin Can Enable Patient Portal."})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("p",{className:"alert-header text-gray-700 mb-2",children:"Credentials"}),e.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"+ Create"})]})]})]})]})]})}function Ab(n=[]){const[c,d]=x.useState({}),[o,u]=x.useState(!0),[p,m]=x.useState(null);return x.useEffect(()=>{(async()=>{if(n.length===0){u(!1);return}try{u(!0),m(null);const b=n.map(async g=>{const y=await fetch(`/custom/api/reference_lists.php?type=${g}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!y.ok)throw new Error(`Failed to fetch ${g}`);const C=await y.json();return{type:g,items:C.items||[]}}),v=await Promise.all(b),j={};v.forEach(({type:g,items:y})=>{j[g]=y.filter(C=>C.active!==!1).map(C=>({value:C.id,label:C.name,description:C.description}))}),d(j)}catch(b){console.error("Error fetching reference lists:",b),m(b.message)}finally{u(!1)}})()},[JSON.stringify(n)]),{data:c,loading:o,error:p}}function Tb({data:n,onDataUpdate:c}){const[d,o]=x.useState(!1),[u,p]=x.useState({}),[m,f]=x.useState(!1),[b,v]=x.useState(null),[j,g]=x.useState({}),[y,C]=x.useState([]),[N,_]=x.useState(null),[A,k]=x.useState([]),[O,Y]=x.useState(!1),[I,$]=x.useState(null),{data:se,loading:V}=Ab(["sexual-orientation","gender-identity","marital-status","client-status","pronouns","ethnicity","insurance-type","referral-source"]);if(x.useEffect(()=>{!V&&se&&g({...j,sexual_orientation:se["sexual-orientation"]||[],gender_identity:se["gender-identity"]||[],marital_status:se["marital-status"]||[],status:se["client-status"]||[],pronouns:se.pronouns||[],ethnicity:se.ethnicity||[],insurance_type:se["insurance-type"]||[],referral_source:se["referral-source"]||[]})},[se,V]),x.useEffect(()=>{const U=async()=>{try{const[T,L,W,F,he,P]=await Promise.all([ca("sex"),ca("yesno"),ca("state"),ca("Patient_Groupings"),ca("Care_Team_Status"),ca("payment_type")]);g(de=>({...de,sex:T.options||[],protect_indicator:L.options||[],state:W.options||[],patient_categories:F.options||[],care_team_status:he.options||[],payment_type:P.options||[]}))}catch(T){console.error("Failed to load dropdown options:",T)}},ne=async()=>{try{const T=Xi();_(T)}catch(T){console.error("Failed to load current user:",T)}},pe=async()=>{try{const T=await ko();C(T.providers||[])}catch(T){console.error("Failed to load providers:",T)}};U(),ne(),pe()},[]),x.useEffect(()=>{(async()=>{if(n&&n.patient&&n.patient.age<18)try{const ne=await fo(n.patient.pid);k(ne.related_persons||[])}catch(ne){console.error("Failed to load guardians:",ne)}})()},[n]),!n)return e.jsx("div",{className:"empty-state",children:"Loading demographic data..."});const{patient:X}=n,xe=()=>{p({fname:X.fname||"",mname:X.mname||"",lname:X.lname||"",preferred_name:X.preferred_name||"",pronouns:X.pronouns||"",DOB:X.DOB||"",sex:X.sex||"",gender_identity:X.gender_identity||"",sexual_orientation:X.sexual_orientation||"",marital_status:X.marital_status||"",ethnicity:X.ethnicity||"",previous_names:X.previous_names||"",patient_categories:X.patient_categories||"",ss:X.ss||"",street:X.street||"",street_line_2:X.street_line_2||"",city:X.city||"",state:X.state||"",postal_code:X.postal_code||"",county:X.county||"",contact_relationship:X.contact_relationship||"",phone_contact:X.phone_contact||"",phone_home:X.phone_home||"",phone_cell:X.phone_cell||"",phone_biz:X.phone_biz||"",email:X.email||"",email_direct:X.email_direct||"",protect_indicator:X.protection_indicator_code||"",status:X.status||"active",payment_type:X.payment_type||"insurance",custom_session_fee:X.custom_session_fee||"",provider_id:X.provider_id||"",referring_provider_id:X.referring_provider_id||"",allow_patient_portal:X.allow_patient_portal||"",cmsportal_login:X.cmsportal_login||"",hipaa_notice:X.hipaa_notice||"NO",hipaa_allowsms:X.hipaa_allowsms||"NO",hipaa_voice:X.hipaa_voice||"NO",hipaa_mail:X.hipaa_mail||"NO",hipaa_email:X.hipaa_email||"NO"}),o(!0),v(null)},me=()=>{o(!1),p({}),v(null)},fe=(U,ne)=>{p(pe=>({...pe,[U]:ne}))},q=async()=>{f(!0),v(null);try{if(!u.fname||!u.lname)throw new Error("First name and last name are required");if(!u.sex)throw new Error("Sex is required");if(!u.gender_identity)throw new Error("Gender Identity is required");if(!u.sexual_orientation)throw new Error("Sexual Orientation is required");if(u.email&&!u.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/))throw new Error("Invalid email format");if(u.email_direct&&!u.email_direct.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/))throw new Error("Invalid contact email format");await Jp(X.pid,u),c&&await c(),o(!1),p({})}catch(U){v(U.message||"Failed to save changes")}finally{f(!1)}},z=()=>{$(null),Y(!0)},H=U=>{$(U),Y(!0)},D=async U=>{if(window.confirm(`Are you sure you want to remove ${U.first_name} ${U.last_name} as a guardian?`))try{await Wp(U.relation_id);const ne=await fo(X.pid);k(ne.related_persons||[])}catch(ne){v(ne.message||"Failed to delete guardian")}},S=async U=>{try{await Kp({patient_id:X.pid,person_id:I?.id,...U});const ne=await fo(X.pid);k(ne.related_persons||[]),Y(!1),$(null)}catch(ne){throw new Error(ne.message||"Failed to save guardian")}},E=(U,ne,pe,T="text",L=null)=>{if(d&&pe)return L?e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:U}),e.jsx("select",{value:u[pe]||"",onChange:W=>fe(pe,W.target.value),className:"input-md",children:L.map(W=>e.jsx("option",{value:W.value,children:W.label},W.value))})]}):e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:U}),e.jsx("input",{type:T,value:u[pe]||"",onChange:W=>fe(pe,W.target.value),className:"input-md"})]});{let W=ne||"";if(L&&ne){const F=L.find(he=>he.value===ne);F&&(W=F.label)}return e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:U}),e.jsx("div",{className:"form-field-value",children:W})]})}};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end mb-4 space-x-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:me,disabled:m,className:"btn-solid btn-solid-gray disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:q,disabled:m,className:"btn-solid btn-solid-green disabled:opacity-50",children:m?"Saving...":"Save Changes"})]}):e.jsx("button",{onClick:xe,className:"btn-solid btn-solid-blue",children:"Edit Demographics"})}),b&&e.jsx("div",{className:"error-message mb-4",children:b}),d&&e.jsx("div",{className:"mb-4 px-4 py-2 bg-purple-50 border-l-4 border-purple-700 rounded",children:e.jsxs("p",{className:"text-sm text-purple-900",children:[e.jsx("span",{className:"required-field-label",children:"*"})," Required fields are marked with an asterisk and displayed in ",e.jsx("span",{className:"required-field-label",children:"purple"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Personal Information"}),e.jsx("div",{className:"card-inner",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:d?e.jsxs(e.Fragment,{children:[E("First Name *",u.fname,"fname"),E("Middle Name",u.mname,"mname"),E("Last Name *",u.lname,"lname"),E("Preferred Name",u.preferred_name,"preferred_name"),E("Pronouns",u.pronouns,"pronouns","text",j.pronouns&&j.pronouns.length>0?[{value:"",label:"Select..."},...j.pronouns]:null),E("DOB",u.DOB,"DOB","date"),E("Sex *",u.sex,"sex","text",j.sex&&j.sex.length>0?[{value:"",label:"Select..."},...j.sex]:[{value:"",label:"Select..."},{value:"Male",label:"Male"},{value:"Female",label:"Female"}]),E("Gender Identity",u.gender_identity,"gender_identity","text",j.gender_identity&&j.gender_identity.length>0?[{value:"",label:"Select..."},...j.gender_identity]:null),E("Sexual Orientation",u.sexual_orientation,"sexual_orientation","text",j.sexual_orientation&&j.sexual_orientation.length>0?[{value:"",label:"Select..."},...j.sexual_orientation]:null),E("Marital Status",u.marital_status,"marital_status","text",j.marital_status&&j.marital_status.length>0?[{value:"",label:"Select..."},...j.marital_status]:null),E("Ethnicity",u.ethnicity,"ethnicity","text",j.ethnicity&&j.ethnicity.length>0?[{value:"",label:"Select..."},...j.ethnicity]:null),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"S.S."}),e.jsx("input",{type:"text",value:u.ss||"",onChange:U=>fe("ss",U.target.value),placeholder:"XXX-XX-XXXX",maxLength:"11",className:"input-md"})]}),e.jsx("div",{className:"col-span-2",children:E("Client Categories",u.patient_categories,"patient_categories","text",j.patient_categories&&j.patient_categories.length>0?[{value:"",label:"Select..."},...j.patient_categories]:null)})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Legal Name"}),e.jsxs("div",{className:"form-field-value",children:[X.fname," ",X.mname&&X.mname+" ",X.lname]})]}),E("Preferred Name",X.preferred_name),E("Pronouns",X.pronouns,null,"text",j.pronouns&&j.pronouns.length>0?[{value:"",label:"Select..."},...j.pronouns]:null),E("DOB",X.DOB),E("Birth Sex",X.birth_sex),E("Gender Identity",X.gender_identity,null,"text",j.gender_identity&&j.gender_identity.length>0?[{value:"",label:"Select..."},...j.gender_identity]:null),E("Sex",X.sex),E("Sexual Orientation",X.sexual_orientation,null,"text",j.sexual_orientation&&j.sexual_orientation.length>0?[{value:"",label:"Select..."},...j.sexual_orientation]:null),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"S.S."}),e.jsx("div",{className:"form-field-value",children:X.ss?"***-**-"+X.ss.slice(-4):""})]}),E("Marital Status",X.marital_status,null,"text",j.marital_status&&j.marital_status.length>0?[{value:"",label:"Select..."},...j.marital_status]:null),E("Ethnicity",X.ethnicity,null,"text",j.ethnicity&&j.ethnicity.length>0?[{value:"",label:"Select..."},...j.ethnicity]:null),e.jsx("div",{className:"col-span-2",children:E("Client Categories",X.patient_categories,null,"text",j.patient_categories&&j.patient_categories.length>0?[{value:"",label:"Select..."},...j.patient_categories]:null)})]})})})]}),X.age<18&&e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"card-header",children:"Guardian Information"}),e.jsx("button",{onClick:z,className:"btn-solid btn-solid-green btn-sm",children:"+ Add Guardian"})]}),e.jsx("div",{className:"card-inner",children:A.length===0?e.jsx("div",{className:"empty-state",children:'No guardians added yet. Click "Add Guardian" to add one.'}):e.jsx("div",{className:"space-y-4",children:A.map((U,ne)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"item-title",children:[U.first_name," ",U.middle_name," ",U.last_name]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>H(U),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Edit"}),e.jsx("button",{onClick:()=>D(U),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Remove"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"field-label",children:"Relationship:"})," ",U.role]}),U.phone&&e.jsxs("div",{children:[e.jsx("span",{className:"field-label",children:"Phone:"})," ",U.phone]}),U.email&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"field-label",children:"Email:"})," ",U.email]}),U.street&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"field-label",children:"Address:"})," ",U.street,U.city&&`, ${U.city}`,U.state&&`, ${U.state}`,U.postal_code&&` ${U.postal_code}`]})]})]},U.id))})})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Contact Information"}),e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{className:"col-span-2",children:E("Address",X.street,"street")}),E("Address Line 2",X.street_line_2,"street_line_2"),E("City",X.city,"city"),E("State",X.state,"state","text",j.state&&j.state.length>0?[{value:"",label:"Select..."},...j.state]:null),E("Postal Code",X.postal_code,"postal_code"),E("County",X.county,"county"),E("Emergency Contact",X.contact_relationship,"contact_relationship"),E("Emergency Phone",X.phone_contact,"phone_contact","tel"),E("Home Phone",X.phone_home,"phone_home","tel"),E("Mobile Phone",X.phone_cell,"phone_cell","tel"),E("Work Phone",X.phone_biz,"phone_biz","tel"),E("Trusted Email",X.email,"email","email"),E("Contact Email",X.email_direct,"email_direct","email"),!d&&X.additional_addresses&&e.jsxs("div",{className:"col-span-2 form-field",children:[e.jsx("div",{className:"form-field-label",children:"Additional Addresses"}),e.jsx("div",{className:"form-field-value",children:X.additional_addresses})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Client Status"}),e.jsx("div",{className:"card-inner",children:d?e.jsxs("div",{className:"space-y-3",children:[E("Client Status",u.status,"status","text",j.status&&j.status.length>0?[{value:"",label:"Select..."},...j.status]:null),E("Payment Type",u.payment_type,"payment_type","text",[{value:"insurance",label:"Insurance"},{value:"self-pay",label:"Self-Pay"},{value:"pro-bono",label:"Pro Bono"}]),(u.payment_type==="self-pay"||u.payment_type==="pro-bono")&&E("Custom Session Fee ($)",u.custom_session_fee,"custom_session_fee","number",null)]}):e.jsxs("div",{className:"space-y-3",children:[E("Client Status",X.status,null,"text",j.status&&j.status.length>0?j.status:null),E("Payment Type",X.payment_type,null,"text",[{value:"insurance",label:"Insurance"},{value:"self-pay",label:"Self-Pay"},{value:"pro-bono",label:"Pro Bono"}]),(X.payment_type==="self-pay"||X.payment_type==="pro-bono")&&X.custom_session_fee&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Custom Session Fee"}),e.jsxs("div",{className:"form-field-value",children:["$",parseFloat(X.custom_session_fee).toFixed(2)]})]})]})})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Is the Client at Risk?"}),e.jsx("div",{className:"card-inner",children:d?e.jsx("div",{children:E("Risk Indicator",u.protect_indicator,"protect_indicator","text",j.protect_indicator&&j.protect_indicator.length>0?[{value:"",label:"Select..."},...j.protect_indicator]:null)}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Risk Indicator"}),e.jsx("div",{className:"form-field-value",children:X.protection_indicator})]}),X.protection_indicator_code==="YES"&&e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 rounded-lg p-3",children:e.jsx("p",{className:"alert-text text-yellow-800",children:" Risk factors documented. See Clinical Notes for the Risk Assessment."})})]})})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Clinician Information"}),e.jsx("div",{className:"card-inner",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:d?e.jsxs(e.Fragment,{children:[N&&N.admin?e.jsx("div",{className:"col-span-2",children:E("Assigned Clinician",u.provider_id,"provider_id","text",y&&y.length>0?[{value:"",label:"Select..."},...y]:null)}):e.jsxs("div",{className:"col-span-2 form-field",children:[e.jsx("div",{className:"form-field-label",children:"Assigned Clinician"}),e.jsx("div",{className:"form-field-value",children:X.provider})]}),e.jsx("div",{className:"col-span-2",children:E("Referring Provider",u.referring_provider_id,"referring_provider_id","text",y&&y.length>0?[{value:"",label:"Select..."},...y]:null)})]}):e.jsxs(e.Fragment,{children:[E("Assigned Clinician",X.provider),E("Referring Provider",X.referring_provider)]})})})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Reminder Preferences"}),e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{className:"col-span-2",children:E("HIPAA Notice Received",X.hipaa_notice,"hipaa_notice","text",[{value:"NO",label:"NO"},{value:"YES",label:"YES"}])}),E("Allow SMS",X.hipaa_allowsms,"hipaa_allowsms","text",[{value:"NO",label:"NO"},{value:"YES",label:"YES"}]),E("Allow Voice Message",X.hipaa_voice,"hipaa_voice","text",[{value:"NO",label:"NO"},{value:"YES",label:"YES"}]),E("Allow Mail Message",X.hipaa_mail,"hipaa_mail","text",[{value:"NO",label:"NO"},{value:"YES",label:"YES"}]),E("Allow Email",X.hipaa_email,"hipaa_email","text",[{value:"NO",label:"NO"},{value:"YES",label:"YES"}])]})})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Portal Settings"}),e.jsx("div",{className:"card-inner",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:d?e.jsxs(e.Fragment,{children:[E("Allow Client Portal",u.allow_patient_portal,"allow_patient_portal","text",[{value:"",label:"Select..."},{value:"NO",label:"NO"},{value:"YES",label:"YES"}]),E("CMS Portal Login",u.cmsportal_login,"cmsportal_login")]}):e.jsxs(e.Fragment,{children:[E("Allow Client Portal",X.allow_patient_portal),E("CMS Portal Login",X.cmsportal_login)]})})})]})]})]}),O&&e.jsx(Mb,{guardian:I,stateOptions:j.state||[],onSave:S,onCancel:()=>{Y(!1),$(null)}})]})}function Mb({guardian:n,stateOptions:c,onSave:d,onCancel:o}){const[u,p]=x.useState({first_name:n?.first_name||"",middle_name:n?.middle_name||"",last_name:n?.last_name||"",role:n?.role||"",phone:n?.phone||"",email:n?.email||"",street:n?.street||"",city:n?.city||"",state:n?.state||"",postal_code:n?.postal_code||"",notes:n?.notes||""}),[m,f]=x.useState(null),[b,v]=x.useState(!1),j=(y,C)=>{p(N=>({...N,[y]:C}))},g=async y=>{y.preventDefault(),f(null),v(!0);try{if(!u.first_name||!u.last_name||!u.role)throw new Error("First name, last name, and relationship are required");if(u.email&&!u.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/))throw new Error("Invalid email format");await d(u)}catch(C){f(C.message)}finally{v(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto m-4",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"card-header text-2xl",children:n?"Edit Guardian":"Add Guardian"}),m&&e.jsx("div",{className:"error-message mb-4",children:m}),e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"First Name *"}),e.jsx("input",{type:"text",value:u.first_name,onChange:y=>j("first_name",y.target.value),className:"input-md",required:!0})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"Middle Name"}),e.jsx("input",{type:"text",value:u.middle_name,onChange:y=>j("middle_name",y.target.value),className:"input-md"})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"Last Name *"}),e.jsx("input",{type:"text",value:u.last_name,onChange:y=>j("last_name",y.target.value),className:"input-md",required:!0})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"Relationship *"}),e.jsxs("select",{value:u.role,onChange:y=>j("role",y.target.value),className:"input-md",required:!0,children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"Mother",children:"Mother"}),e.jsx("option",{value:"Father",children:"Father"}),e.jsx("option",{value:"Grandmother",children:"Grandmother"}),e.jsx("option",{value:"Grandfather",children:"Grandfather"}),e.jsx("option",{value:"Aunt",children:"Aunt"}),e.jsx("option",{value:"Uncle",children:"Uncle"}),e.jsx("option",{value:"Foster Parent",children:"Foster Parent"}),e.jsx("option",{value:"Legal Guardian",children:"Legal Guardian"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"Phone"}),e.jsx("input",{type:"tel",value:u.phone,onChange:y=>j("phone",y.target.value),className:"input-md"})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"Email"}),e.jsx("input",{type:"email",value:u.email,onChange:y=>j("email",y.target.value),className:"input-md"})]}),e.jsxs("div",{className:"col-span-2 form-field",children:[e.jsx("label",{className:"form-field-label",children:"Street Address"}),e.jsx("input",{type:"text",value:u.street,onChange:y=>j("street",y.target.value),className:"input-md"})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"City"}),e.jsx("input",{type:"text",value:u.city,onChange:y=>j("city",y.target.value),className:"input-md"})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"State"}),e.jsxs("select",{value:u.state,onChange:y=>j("state",y.target.value),className:"input-md",children:[e.jsx("option",{value:"",children:"Select..."}),c.map(y=>e.jsx("option",{value:y.value,children:y.label},y.value))]})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"Postal Code"}),e.jsx("input",{type:"text",value:u.postal_code,onChange:y=>j("postal_code",y.target.value),className:"input-md"})]}),e.jsxs("div",{className:"col-span-2 form-field",children:[e.jsx("label",{className:"form-field-label",children:"Notes"}),e.jsx("textarea",{value:u.notes,onChange:y=>j("notes",y.target.value),className:"input-md",rows:"3"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{type:"button",onClick:o,disabled:b,className:"btn-solid btn-solid-gray",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:b,className:"btn-solid btn-solid-green",children:b?"Saving...":"Save Guardian"})]})]})]})})})}function jf({selectedInterventions:n=[],onChange:c,riskPresent:d=!1,showFavorites:o=!0}){const[u,p]=x.useState(!0),[m,f]=x.useState(null),[b,v]=x.useState(null),[j,g]=x.useState({}),[y,C]=x.useState("");x.useEffect(()=>{N()},[]);const N=async()=>{try{p(!0);const $=await Gp();v($),f(null)}catch($){console.error("Error loading interventions:",$),f($.message)}finally{p(!1)}},_=$=>{const se=n.includes($);c(se?n.filter(V=>V!==$):[...n,$])},A=$=>{g(se=>({...se,[$]:!se[$]}))};if(u)return e.jsx("div",{className:"text-gray-600",children:"Loading interventions..."});if(m)return e.jsxs("div",{className:"text-red-600",children:["Error loading interventions: ",m]});if(!b)return e.jsx("div",{className:"text-gray-600",children:"No interventions available"});const{grouped:k,favorites:O}=b,Y=[...k.tier1||[],...k.tier3||[],...k.tier4||[],...Object.values(k.tier2||{}).flat()],I=y?Y.filter($=>$.intervention_name.toLowerCase().includes(y.toLowerCase())):null;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",value:y,onChange:$=>C($.target.value),placeholder:"Search interventions...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm"})}),y&&I&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:["Search Results (",I.length,")"]}),I.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:I.map($=>e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:n.includes($.intervention_name),onChange:()=>_($.intervention_name),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-800",children:$.intervention_name})]},$.id))}):e.jsxs("div",{className:"text-gray-500 text-sm",children:['No interventions found matching "',y,'"']})]}),!y&&e.jsxs(e.Fragment,{children:[o&&O&&O.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Your Favorites"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:O.map($=>e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:n.includes($.intervention_name),onChange:()=>_($.intervention_name),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-800",children:$.intervention_name})]},$.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Core Interventions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:k.tier1.map($=>e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:n.includes($.intervention_name),onChange:()=>_($.intervention_name),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-800",children:$.intervention_name})]},$.id))})]}),Object.keys(k.tier2).length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Modality-Specific Interventions"}),e.jsx("div",{className:"space-y-2",children:Object.entries(k.tier2).map(([$,se])=>e.jsxs("div",{className:"card-inner",children:[e.jsxs("button",{onClick:()=>A($),className:"w-full flex items-center justify-between p-3 text-left hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx("span",{className:"font-semibold text-gray-800",children:$}),e.jsx("svg",{className:`w-5 h-5 text-gray-600 transition-transform ${j[$]?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),j[$]&&e.jsx("div",{className:"px-3 pb-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:se.map(V=>e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:n.includes(V.intervention_name),onChange:()=>_(V.intervention_name),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-800",children:V.intervention_name})]},V.id))})]},$))})]}),d&&k.tier3.length>0&&e.jsxs("div",{className:"border-2 border-orange-200 rounded-lg p-4 bg-orange-50",children:[e.jsxs("h4",{className:"text-sm font-semibold text-orange-800 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Crisis/Risk Interventions"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:k.tier3.map($=>e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-orange-100 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:n.includes($.intervention_name),onChange:()=>_($.intervention_name),className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500"}),e.jsx("span",{className:"text-sm text-gray-800",children:$.intervention_name})]},$.id))})]}),k.tier4.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Administrative/Clinical Process"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:k.tier4.map($=>e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:n.includes($.intervention_name),onChange:()=>_($.intervention_name),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-800",children:$.intervention_name})]},$.id))})]})]}),n.length>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsxs("div",{className:"text-sm font-semibold text-blue-800 mb-2",children:["Selected (",n.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.map($=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:[$,e.jsx("button",{onClick:()=>_($),className:"hover:text-blue-600 focus:outline-none",title:"Remove",children:""})]},$))})]})]})}function Nf({patientId:n,serviceDate:c,selectedDiagnoses:d=[],onChange:o}){const[u,p]=x.useState([]),[m,f]=x.useState(!0),[b,v]=x.useState(null);x.useEffect(()=>{n&&j()},[n,c]);const j=async()=>{try{f(!0),v(null);const O=await $p(n,{activeAsOf:c,includeRetired:!1});p(O.diagnoses||[])}catch(O){console.error("Error loading diagnoses:",O),v(O.message)}finally{f(!1)}},g=O=>O?O.length>=4?O.slice(0,3)+"."+O.slice(3):O:"",y=O=>{if(!O)return"";const Y=O.split(/\s{3,}/);return Y.length>1?Y[1].trim():O.trim()},C=O=>d.some(Y=>Y.code===O||Y===O),N=()=>{if(!d||d.length===0)return null;const O=d[0];return typeof O=="string"?O:O.code},_=O=>{const Y=O.diagnosis;if(C(Y)){const $=d.filter(se=>(typeof se=="string"?se:se.code)!==Y);o($)}else{const $={code:Y,description:O.title,isPrimary:d.length===0,billable:!0};o([...d,$])}},A=O=>{const Y=d.map(I=>({...typeof I=="string"?{code:I}:I,isPrimary:(typeof I=="string"?I:I.code)===O}));o(Y)};if(m)return e.jsx("div",{className:"text-sm text-gray-600 italic",children:"Loading active diagnoses..."});if(b)return e.jsxs("div",{className:"text-sm text-red-600",children:["Error loading diagnoses: ",b]});if(!u||u.length===0)return e.jsx("div",{className:"text-sm text-gray-600 bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:" No active diagnoses found for this patient. Please create a Diagnosis Note first."});const k=N();return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Select all diagnoses addressed in this session. The first selected diagnosis will be marked as primary for billing purposes."}),e.jsx("div",{className:"space-y-2",children:u.map(O=>{const Y=O.diagnosis,I=C(Y),$=Y===k;return e.jsx("div",{className:`p-3 rounded-lg border-2 transition-all cursor-pointer ${I?"border-blue-400 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>_(O),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:I,onChange:()=>_(O),onClick:se=>se.stopPropagation(),className:"mt-1 w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-mono text-sm font-semibold text-blue-700 bg-blue-100 px-2 py-0.5 rounded",children:g(Y)}),I&&$&&e.jsx("span",{className:"text-xs font-semibold text-green-700 bg-green-100 px-2 py-0.5 rounded",children:"PRIMARY"}),I&&!$&&e.jsx("button",{onClick:se=>{se.stopPropagation(),A(Y)},className:"text-xs text-blue-600 hover:text-blue-800 underline",children:"Set as primary"})]}),e.jsx("div",{className:"text-sm text-gray-800",children:y(O.title)}),O.begdate&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Since: ",new Date(O.begdate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]})},O.id)})}),d.length>0&&e.jsxs("div",{className:"text-xs text-gray-600 bg-blue-50 border border-blue-200 rounded-lg p-2 mt-2",children:[" ",d.length," diagnosis code",d.length!==1?"s":""," selected for this session"]})]})}function Rb({note:n,onChange:c,patientId:d,autoSave:o}){const[u,p]=x.useState([]),[m,f]=x.useState(!0),[b,v]=x.useState(n.riskPresent||!1);x.useEffect(()=>{j()},[d]);const j=async()=>{try{f(!0);const N=await mf(d,{status:"active"});p(N.goals||[])}catch(N){console.error("Error loading treatment goals:",N)}finally{f(!1)}},g=(N,_)=>{c(N,_),o&&setTimeout(()=>o(),500)},y=N=>{v(N),g("riskPresent",N)},C=N=>{const _=n.goalsAddressed||[];_.includes(N)?g("goalsAddressed",_.filter(k=>k!==N)):g("goalsAddressed",[..._,N])};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main bg-blue-50 border-2 border-blue-300",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Diagnosis Codes for This Session"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select all diagnoses addressed in this session. Required for billing and clinical documentation."})]}),e.jsx(Nf,{patientId:d,serviceDate:n.date_of_service||new Date().toISOString().split("T")[0],selectedDiagnoses:n.diagnosis_codes||[],onChange:N=>g("diagnosis_codes",N)})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"B"}),"Behavior / What You Observed"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Client presentation, affect, mood"})]}),e.jsx("textarea",{value:n.behaviorProblem||"",onChange:N=>g("behaviorProblem",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Client presented as anxious with tearful affect. Reported difficulty sleeping and increased worry about work performance..."})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Quick Tags (Optional)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Engaged","Tearful","Anxious","Flat affect","Guarded","Motivated","Resistant","Calm"].map(N=>{const _=(n.clientPresentation||[]).includes(N);return e.jsx("button",{onClick:()=>{const A=n.clientPresentation||[];_?g("clientPresentation",A.filter(k=>k!==N)):g("clientPresentation",[...A,N])},className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${_?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:N},N)})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"I"}),"Intervention / What You Did"]})}),e.jsx("textarea",{value:n.intervention||"",onChange:N=>g("intervention",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Narrative description of interventions used... (or use checkboxes below for quick selection)"})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Select Interventions Used"}),e.jsx(jf,{selectedInterventions:n.interventionsSelected||[],onChange:N=>g("interventionsSelected",N),riskPresent:b})]})]}),e.jsx("div",{className:"card-main",children:e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"R"}),"Response / How Client Responded"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Client's reaction to interventions"})]}),e.jsx("textarea",{value:n.response||"",onChange:N=>g("response",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Client engaged well with cognitive restructuring. Reported feeling less overwhelmed after identifying automatic thoughts. Demonstrated understanding of homework assignment..."})]})}),e.jsxs("div",{className:"card-main",children:[e.jsxs("label",{className:"block mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"P"}),"Plan / What's Next"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Homework, next steps, follow-up"})]}),e.jsx("textarea",{value:n.plan||"",onChange:N=>g("plan",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Continue weekly sessions. Homework: Practice thought records daily. Will reassess anxiety levels next session. May refer to psychiatry if no improvement..."})]}),!m&&u.length>0&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Treatment Goals Addressed This Session"}),e.jsx("div",{className:"space-y-2",children:u.map(N=>e.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:(n.goalsAddressed||[]).includes(N.id),onChange:()=>C(N.id),className:"mt-0.5 w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-gray-800",children:N.goal_text}),N.goal_category&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:N.goal_category})]})]},N.id))})]})]}),e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[e.jsxs("label",{className:"flex items-center gap-3 mb-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:N=>y(N.target.checked),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500"}),e.jsx("span",{className:"font-semibold text-gray-800",children:" Risk Present (suicide, homicide, self-harm)"})]}),b&&e.jsx("div",{className:"border-t-2 border-orange-200 pt-3",children:e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm font-semibold text-orange-800 mb-2",children:"Risk Assessment Details (Required when risk is flagged)"}),e.jsx("textarea",{value:n.riskAssessment||"",onChange:N=>g("riskAssessment",N.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Document risk factors, protective factors, safety plan, level of risk, interventions used, follow-up plan...",required:b})]})})]})]})}function zb({note:n,onChange:c,patientId:d,autoSave:o}){const[u,p]=x.useState([]),[m,f]=x.useState(!0),[b,v]=x.useState(n.riskPresent||!1);x.useEffect(()=>{j()},[d]);const j=async()=>{try{f(!0);const N=await mf(d,{status:"active"});p(N.goals||[])}catch(N){console.error("Error loading treatment goals:",N)}finally{f(!1)}},g=(N,_)=>{c(N,_),o&&setTimeout(()=>o(),500)},y=N=>{v(N),g("riskPresent",N)},C=N=>{const _=n.goalsAddressed||[];_.includes(N)?g("goalsAddressed",_.filter(k=>k!==N)):g("goalsAddressed",[..._,N])};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main bg-blue-50 border-2 border-blue-300",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Diagnosis Codes for This Session"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select all diagnoses addressed in this session. Required for billing and clinical documentation."})]}),e.jsx(Nf,{patientId:d,serviceDate:n.date_of_service||new Date().toISOString().split("T")[0],selectedDiagnoses:n.diagnosis_codes||[],onChange:N=>g("diagnosis_codes",N)})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-purple-600 mr-2",children:"P"}),"Problem / Presenting Issue"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Chief complaint, reason for session"})]}),e.jsx("textarea",{value:n.behaviorProblem||"",onChange:N=>g("behaviorProblem",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Client reports increased anxiety related to work stress. Difficulty concentrating, racing thoughts, sleep disruption. Concerned about upcoming performance review..."})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Quick Tags (Optional)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Anxiety","Depression","Stress","Trauma","Grief","Relationship Issues","Work Stress","Sleep Issues","Anger","Self-Esteem"].map(N=>{const _=(n.clientPresentation||[]).includes(N);return e.jsx("button",{onClick:()=>{const A=n.clientPresentation||[];_?g("clientPresentation",A.filter(k=>k!==N)):g("clientPresentation",[...A,N])},className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${_?"bg-purple-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:N},N)})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-purple-600 mr-2",children:"I"}),"Intervention / What You Did"]})}),e.jsx("textarea",{value:n.intervention||"",onChange:N=>g("intervention",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Narrative description of interventions used... (or use checkboxes below for quick selection)"})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Select Interventions Used"}),e.jsx(jf,{selectedInterventions:n.interventionsSelected||[],onChange:N=>g("interventionsSelected",N),riskPresent:b})]})]}),e.jsx("div",{className:"card-main",children:e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-purple-600 mr-2",children:"R"}),"Response / How Client Responded"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Client's reaction to interventions"})]}),e.jsx("textarea",{value:n.response||"",onChange:N=>g("response",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Client reported feeling validated after reframing negative thoughts. Expressed willingness to practice relaxation techniques. Appeared more hopeful by end of session..."})]})}),e.jsxs("div",{className:"card-main",children:[e.jsxs("label",{className:"block mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-purple-600 mr-2",children:"P"}),"Plan / What's Next"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Homework, next steps, follow-up"})]}),e.jsx("textarea",{value:n.plan||"",onChange:N=>g("plan",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Continue weekly sessions. Homework: Practice deep breathing 3x daily. Client will monitor anxiety levels in journal. Follow up on work situation next session..."})]}),!m&&u.length>0&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Treatment Goals Addressed This Session"}),e.jsx("div",{className:"space-y-2",children:u.map(N=>e.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-purple-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:(n.goalsAddressed||[]).includes(N.id),onChange:()=>C(N.id),className:"mt-0.5 w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-gray-800",children:N.goal_text}),N.goal_category&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:N.goal_category})]})]},N.id))})]})]}),e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[e.jsxs("label",{className:"flex items-center gap-3 mb-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:N=>y(N.target.checked),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500"}),e.jsx("span",{className:"font-semibold text-gray-800",children:" Risk Present (suicide, homicide, self-harm)"})]}),b&&e.jsx("div",{className:"border-t-2 border-orange-200 pt-3",children:e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm font-semibold text-orange-800 mb-2",children:"Risk Assessment Details (Required when risk is flagged)"}),e.jsx("textarea",{value:n.riskAssessment||"",onChange:N=>g("riskAssessment",N.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Document risk factors, protective factors, safety plan, level of risk, interventions used, follow-up plan...",required:b})]})})]})]})}function Ob({note:n,onChange:c,autoSave:d}){const[o,u]=x.useState(n.riskPresent||!1),p=(g,y)=>{c(g,y),d&&setTimeout(()=>d(),500)},m=g=>{u(g),p("riskPresent",g)},f=g=>(n.mentalStatusExam||{})[g]||"",b=(g,y)=>{const C=n.mentalStatusExam||{};p("mentalStatusExam",{...C,[g]:y})},v=({label:g,field:y,options:C})=>e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:g}),e.jsxs("select",{value:f(y),onChange:N=>b(y,N.target.value),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white shadow-sm",children:[e.jsx("option",{value:"",children:"Select..."}),C.map(N=>e.jsx("option",{value:N,children:N},N))]})]})}),j=({label:g,field:y,placeholder:C,rows:N=3})=>e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:g}),e.jsx("textarea",{value:f(y),onChange:_=>b(y,_.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 resize-none bg-white shadow-sm",rows:N,placeholder:C})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-teal-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Appearance & Grooming"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(v,{label:"General Appearance",field:"appearance",options:["Well-groomed","Disheveled","Unkempt","Bizarre","Appropriate","Casual"]}),e.jsx(v,{label:"Hygiene",field:"hygiene",options:["Good","Fair","Poor","Malodorous"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(j,{label:"Additional Notes",field:"appearanceNotes",placeholder:"Additional observations about appearance...",rows:2})})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-teal-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Behavior & Motor Activity"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(v,{label:"Psychomotor Activity",field:"psychomotorActivity",options:["Normal","Agitated","Retarded","Restless","Hyperactive","Lethargic"]}),e.jsx(v,{label:"Eye Contact",field:"eyeContact",options:["Good","Fair","Poor","Avoidant","Intense/Staring"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(j,{label:"Additional Behavioral Observations",field:"behaviorNotes",placeholder:"Tics, tremors, mannerisms, gait, posture...",rows:2})})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-teal-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Speech"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(v,{label:"Rate",field:"speechRate",options:["Normal","Slow","Rapid","Pressured"]}),e.jsx(v,{label:"Volume",field:"speechVolume",options:["Normal","Loud","Soft","Whispered"]}),e.jsx(v,{label:"Tone",field:"speechTone",options:["Normal","Monotone","Varied","Flat"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(j,{label:"Speech Characteristics",field:"speechNotes",placeholder:"Slurred, stuttering, articulation issues...",rows:2})})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-teal-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Mood & Affect"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Mood (subjective)"}),e.jsx("input",{type:"text",value:f("mood"),onChange:g=>b("mood",g.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white shadow-sm",placeholder:"Client's own words (e.g., 'sad', 'anxious')"})]})}),e.jsx(v,{label:"Affect (objective)",field:"affect",options:["Appropriate","Flat","Blunted","Labile","Restricted","Congruent","Incongruent"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(j,{label:"Mood & Affect Details",field:"moodNotes",placeholder:"Congruence, range, reactivity...",rows:2})})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-teal-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Thought Process"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(v,{label:"Organization",field:"thoughtProcess",options:["Logical","Goal-directed","Tangential","Circumstantial","Loose associations","Flight of ideas","Thought blocking"]}),e.jsx(v,{label:"Flow",field:"thoughtFlow",options:["Normal","Rapid","Slow","Interrupted"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(j,{label:"Additional Observations",field:"thoughtProcessNotes",placeholder:"Racing thoughts, ruminations, perseverations...",rows:2})})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-teal-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Thought Content"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-wrap gap-3",children:["Suicidal ideation","Homicidal ideation","Delusions","Obsessions","Phobias","Paranoia"].map(g=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:(f("thoughtContent")||[]).includes(g),onChange:y=>{const C=f("thoughtContent")||[],N=y.target.checked?[...C,g]:C.filter(_=>_!==g);b("thoughtContent",N)},className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:g})]},g))}),e.jsx(j,{label:"Thought Content Details",field:"thoughtContentNotes",placeholder:"Describe any concerning thought content, including intent, plan, means...",rows:3})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-teal-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Perception"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-wrap gap-3",children:["No perceptual disturbances","Auditory hallucinations","Visual hallucinations","Tactile hallucinations","Illusions","Depersonalization","Derealization"].map(g=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:(f("perception")||[]).includes(g),onChange:y=>{const C=f("perception")||[],N=y.target.checked?[...C,g]:C.filter(_=>_!==g);b("perception",N)},className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:g})]},g))}),e.jsx(j,{label:"Perception Details",field:"perceptionNotes",placeholder:"Describe any perceptual disturbances...",rows:2})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-teal-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Cognition"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(v,{label:"Orientation",field:"orientation",options:["Oriented x4","Oriented x3","Oriented x2","Oriented x1","Disoriented"]}),e.jsx(v,{label:"Memory",field:"memory",options:["Intact","Impaired recent","Impaired remote","Impaired both"]}),e.jsx(v,{label:"Concentration",field:"concentration",options:["Good","Fair","Poor","Distractible"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(j,{label:"Cognitive Details",field:"cognitionNotes",placeholder:"Attention, abstract thinking, calculations...",rows:2})})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-teal-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Insight & Judgment"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(v,{label:"Insight",field:"insight",options:["Good","Fair","Poor","Absent"]}),e.jsx(v,{label:"Judgment",field:"judgment",options:["Good","Fair","Poor","Impaired"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(j,{label:"Insight & Judgment Details",field:"insightJudgmentNotes",placeholder:"Awareness of illness, decision-making capacity...",rows:2})})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-teal-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Clinical Summary & Impressions"]}),e.jsx(j,{label:"Summary",field:"summary",placeholder:"Overall clinical impression, diagnostic considerations, recommendations...",rows:5})]}),e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[e.jsxs("label",{className:"flex items-center gap-3 mb-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:g=>m(g.target.checked),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500"}),e.jsx("span",{className:"font-semibold text-gray-800",children:" Risk Present (suicide, homicide, self-harm)"})]}),o&&e.jsx("div",{className:"border-t-2 border-orange-200 pt-3",children:e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm font-semibold text-orange-800 mb-2",children:"Risk Assessment Details (Required when risk is flagged)"}),e.jsx("textarea",{value:n.riskAssessment||"",onChange:g=>p("riskAssessment",g.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Document risk factors, protective factors, safety plan, level of risk, interventions used, follow-up plan...",required:o})]})})]})]})}function Lb({medications:n=[],onChange:c}){const[d,o]=x.useState(!1),[u,p]=x.useState(null),[m,f]=x.useState({name:"",dosage:"",frequency:"",prescriber:"",purpose:""}),b=()=>{f({name:"",dosage:"",frequency:"",prescriber:"",purpose:""}),o(!1),p(null)},v=()=>{if(!m.name.trim())return;const C={...m},N=[...n,C];c(N),b()},j=C=>{f(n[C]),p(C),o(!0)},g=()=>{if(!m.name.trim())return;const C=[...n];C[u]={...m},c(C),b()},y=C=>{const N=n.filter((_,A)=>A!==C);c(N)};return e.jsxs("div",{className:"space-y-4",children:[n.length>0&&e.jsx("div",{className:"space-y-2",children:n.map((C,N)=>e.jsx("div",{className:"p-3 bg-white border-2 border-gray-300 rounded-lg hover:border-indigo-400 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[C.name,C.dosage&&e.jsx("span",{className:"ml-2 text-indigo-600",children:C.dosage})]}),C.frequency&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Frequency: ",C.frequency]}),C.prescriber&&e.jsxs("div",{className:"text-sm text-gray-600",children:["Prescribed by: ",C.prescriber]}),C.purpose&&e.jsxs("div",{className:"text-sm text-gray-600",children:["For: ",C.purpose]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>j(N),className:"text-sm text-indigo-600 hover:text-indigo-800 underline",children:"Edit"}),e.jsx("button",{onClick:()=>y(N),className:"text-sm text-red-600 hover:text-red-800 underline",children:"Remove"})]})]})},N))}),d?e.jsxs("div",{className:"p-4 bg-indigo-50 border-2 border-indigo-300 rounded-lg space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:["Medication Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:m.name,onChange:C=>f({...m,name:C.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Sertraline, Adderall XR",autoFocus:!0})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Dosage"}),e.jsx("input",{type:"text",value:m.dosage,onChange:C=>f({...m,dosage:C.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., 50mg, 20mg XR"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Frequency"}),e.jsx("input",{type:"text",value:m.frequency,onChange:C=>f({...m,frequency:C.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Once daily, Twice daily"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Prescriber"}),e.jsx("input",{type:"text",value:m.prescriber,onChange:C=>f({...m,prescriber:C.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Dr. Smith, Psychiatrist"})]})}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"What it's for"}),e.jsx("input",{type:"text",value:m.purpose,onChange:C=>f({...m,purpose:C.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Depression, ADHD, Anxiety"})]})})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:u!==null?g:v,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:u!==null?"Update Medication":"Add Medication"}),e.jsx("button",{onClick:b,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 font-medium",children:"Cancel"})]})]}):e.jsx("button",{onClick:()=>o(!0),className:"w-full px-4 py-3 border-2 border-dashed border-indigo-400 rounded-lg text-indigo-700 font-medium hover:bg-indigo-50 transition-colors",children:"+ Add Medication"}),n.length===0&&!d&&e.jsx("div",{className:"text-sm text-gray-500 italic text-center py-2",children:"No medications documented yet"})]})}function Ub({note:n,onChange:c,autoSave:d}){const[o,u]=x.useState(n.riskPresent||!1),p=(v,j)=>{c(v,j),d&&setTimeout(()=>d(),500)},m=v=>{u(v),p("riskPresent",v)},f=v=>(n.presentingConcerns||{})[v]||"",b=(v,j)=>{const g=n.presentingConcerns||{};p("presentingConcerns",{...g,[v]:j})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Presenting Problem / Chief Complaint"]}),e.jsx("textarea",{value:n.behaviorProblem||"",onChange:v=>p("behaviorProblem",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"In client's own words: What brings you in today? What are you hoping to work on?"})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"History of Present Illness"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Duration & Onset"}),e.jsx("textarea",{value:f("duration"),onChange:v=>b("duration",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"When did symptoms begin? What was happening at that time?"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Frequency & Severity"}),e.jsx("textarea",{value:f("frequency"),onChange:v=>b("frequency",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"How often? How severe? What makes it better/worse?"})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Previous Mental Health Treatment"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Prior Therapy/Counseling"}),e.jsx("textarea",{value:f("priorTherapy"),onChange:v=>b("priorTherapy",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"When? With whom? What was helpful/not helpful?"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Psychiatric Hospitalizations"}),e.jsx("textarea",{value:f("hospitalizations"),onChange:v=>b("hospitalizations",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Dates, reasons, outcomes..."})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Family History"]}),e.jsx("textarea",{value:f("familyHistory"),onChange:v=>b("familyHistory",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Mental health diagnoses, substance use, suicide attempts in family members..."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Substance Use"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Alcohol Use"}),e.jsx("textarea",{value:f("alcoholUse"),onChange:v=>b("alcoholUse",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Frequency, amount, history of abuse..."})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Drug Use (Recreational/Prescription)"}),e.jsx("textarea",{value:f("drugUse"),onChange:v=>b("drugUse",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Substances, frequency, history..."})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Medical History"]}),e.jsx("textarea",{value:f("medicalHistory"),onChange:v=>b("medicalHistory",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Chronic conditions, surgeries, head injuries, neurological issues..."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Current Medications"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-4",children:"Document all medications the client is currently taking (psychiatric, medical, OTC, supplements). This includes medications prescribed by psychiatrists, PCPs, and other providers."}),e.jsx(Lb,{medications:n.currentMedications||[],onChange:v=>p("currentMedications",v)})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Social & Developmental History"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Childhood/Development"}),e.jsx("textarea",{value:f("childhood"),onChange:v=>b("childhood",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Developmental milestones, childhood experiences, trauma..."})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Education & Employment"}),e.jsx("textarea",{value:f("education"),onChange:v=>b("education",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Highest education, current employment, work history..."})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Relationships & Support System"}),e.jsx("textarea",{value:f("relationships"),onChange:v=>b("relationships",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Marital status, children, family support, friends..."})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Current Functioning"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Sleep"}),e.jsx("input",{type:"text",value:f("sleep"),onChange:v=>b("sleep",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white shadow-sm",placeholder:"Hours per night, quality, difficulties..."})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Appetite/Eating"}),e.jsx("input",{type:"text",value:f("appetite"),onChange:v=>b("appetite",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white shadow-sm",placeholder:"Changes, patterns, concerns..."})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Energy Level"}),e.jsx("input",{type:"text",value:f("energy"),onChange:v=>b("energy",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white shadow-sm",placeholder:"Fatigue, motivation, activity level..."})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Treatment Goals"]}),e.jsx("textarea",{value:n.plan||"",onChange:v=>p("plan",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"What does the client hope to achieve? What are the initial treatment goals? Recommended frequency of sessions?"})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-indigo-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Clinical Impressions & Diagnostic Considerations"]}),e.jsx("textarea",{value:f("impressions"),onChange:v=>b("impressions",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Initial clinical formulation, provisional diagnoses, treatment recommendations..."})]}),e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[e.jsxs("label",{className:"flex items-center gap-3 mb-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:v=>m(v.target.checked),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500"}),e.jsx("span",{className:"font-semibold text-gray-800",children:" Risk Present (suicide, homicide, self-harm)"})]}),o&&e.jsx("div",{className:"border-t-2 border-orange-200 pt-3",children:e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm font-semibold text-orange-800 mb-2",children:"Risk Assessment Details (Required when risk is flagged)"}),e.jsx("textarea",{value:n.riskAssessment||"",onChange:v=>p("riskAssessment",v.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Document risk factors, protective factors, safety plan, level of risk, interventions used, follow-up plan...",required:o})]})})]})]})}function Bb({note:n,onChange:c,autoSave:d}){const o=(m,f)=>{c(m,f),d&&setTimeout(()=>d(),500)},u=m=>(n.clinicalObservations||{})[m]||"",p=(m,f)=>{const b=n.clinicalObservations||{};o("clinicalObservations",{...b,[m]:f})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-emerald-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Reason for Discharge"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-wrap gap-3",children:["Treatment goals achieved","Client request","Mutual agreement","Client no-show","Administrative discharge","Transfer to another provider","Other"].map(m=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"dischargeReason",value:m,checked:u("dischargeReason")===m,onChange:f=>p("dischargeReason",f.target.value),className:"w-4 h-4 text-emerald-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:m})]},m))}),e.jsx("textarea",{value:u("dischargeReasonDetails"),onChange:m=>p("dischargeReasonDetails",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Additional details..."})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-emerald-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Treatment Summary"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Dates of Treatment"}),e.jsx("input",{type:"text",value:u("treatmentDates"),onChange:m=>p("treatmentDates",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white shadow-sm",placeholder:"From [date] to [date] - Total of X sessions"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Presenting Problem (at intake)"}),e.jsx("textarea",{value:n.behaviorProblem||"",onChange:m=>o("behaviorProblem",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"What brought client to treatment..."})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Diagnosis/Diagnoses"}),e.jsx("textarea",{value:u("diagnoses"),onChange:m=>p("diagnoses",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Primary and secondary diagnoses..."})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-emerald-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Interventions & Treatment Modalities"]}),e.jsx("textarea",{value:n.intervention||"",onChange:m=>o("intervention",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"CBT, DBT, EMDR, supportive counseling, psychoeducation, medication management..."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-emerald-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Progress & Treatment Outcomes"]}),e.jsx("textarea",{value:n.response||"",onChange:m=>o("response",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Describe client progress toward treatment goals, symptom reduction, skill development, behavioral changes..."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-emerald-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Current Status at Discharge"]}),e.jsx("textarea",{value:u("currentStatus"),onChange:m=>p("currentStatus",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Current symptoms, functioning level, remaining challenges, strengths..."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-emerald-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Recommendations & Follow-Up Plan"]}),e.jsx("textarea",{value:n.plan||"",onChange:m=>o("plan",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Future treatment recommendations, referrals, follow-up care, relapse prevention strategies, resources provided..."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-emerald-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Prognosis"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex gap-4",children:["Excellent","Good","Fair","Guarded","Poor"].map(m=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"prognosis",value:m,checked:u("prognosis")===m,onChange:f=>p("prognosis",f.target.value),className:"w-4 h-4 text-emerald-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:m})]},m))}),e.jsx("textarea",{value:u("prognosisDetails"),onChange:m=>p("prognosisDetails",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Additional prognosis details..."})]})]})]})}function Hb({note:n,onChange:c,autoSave:d}){const o=(u,p)=>{c(u,p),d&&setTimeout(()=>d(),500)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main bg-red-50 border-2 border-red-400",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-3xl",children:""}),e.jsx("h3",{className:"text-xl font-bold text-red-800",children:"Crisis/Emergency Documentation"})]}),e.jsx("p",{className:"text-sm text-red-700",children:"Document all crisis assessments, interventions, and safety planning thoroughly."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Crisis Presentation"]}),e.jsx("textarea",{value:n.behaviorProblem||"",onChange:u=>o("behaviorProblem",u.target.value),className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Describe the crisis situation: What happened? When? Who was involved? Client's presentation and immediate concerns...",required:!0})]}),e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-400",children:[e.jsxs("h3",{className:"text-lg font-semibold text-orange-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Risk Assessment (REQUIRED)"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-orange-800 mb-2 block",children:"Risk Level"}),e.jsx("div",{className:"flex gap-4",children:["Low","Moderate","High","Imminent"].map(u=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"riskLevel",value:u,className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:`text-sm font-medium ${u==="Imminent"||u==="High"?"text-red-700":"text-gray-700"}`,children:u})]},u))})]})}),e.jsx("textarea",{value:n.riskAssessment||"",onChange:u=>o("riskAssessment",u.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"6",placeholder:`DETAILED RISK ASSESSMENT REQUIRED:
- Suicidal ideation (intent, plan, means, timeline)?
- Homicidal ideation (intent, plan, means, target)?
- Self-harm behaviors?
- Substance use/intoxication?
- Risk factors vs. protective factors
- Access to lethal means
- Support system availability
- History of attempts`,required:!0})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Crisis Interventions Provided"]}),e.jsx("textarea",{value:n.intervention||"",onChange:u=>o("intervention",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"What interventions were used? (e.g., crisis counseling, de-escalation, safety planning, referrals, emergency contacts, medication evaluation, hospitalization consideration...)",required:!0})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Client Response to Intervention"]}),e.jsx("textarea",{value:n.response||"",onChange:u=>o("response",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"How did client respond to interventions? Mood/affect changes? Willingness to engage in safety planning?",required:!0})]}),e.jsxs("div",{className:"card-main bg-green-50 border-2 border-green-400",children:[e.jsxs("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Safety Plan (REQUIRED)"]}),e.jsx("textarea",{value:n.plan||"",onChange:u=>o("plan",u.target.value),className:"w-full px-4 py-3 border-2 border-green-400 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none bg-white shadow-sm",rows:"6",placeholder:`DETAILED SAFETY PLAN REQUIRED:
- Warning signs/triggers identified
- Internal coping strategies
- People/places for distraction
- Support contacts (names & numbers)
- Professional resources (crisis line, emergency services)
- Means restriction (removing lethal means)
- Follow-up plan
- Emergency numbers provided (988, local crisis line, etc.)`,required:!0})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Disposition & Follow-Up Plan"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Disposition"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:["Returned home with safety plan","Emergency contact notified","Referred to higher level of care","Voluntary hospitalization","Involuntary commitment initiated","Police/EMS contacted","Other"].map(u=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-red-600 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:u})]},u))})]})}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Follow-up plan: Next appointment scheduled? Emergency contacts? Referrals made?"})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Collateral Contacts (if any)"]}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Document any contact with family, emergency services, other providers, etc."})]})]})}function qb({note:n,onChange:c,autoSave:d}){const o=n.riskAssessment||{suicidalIdeation:{present:!1,frequency:"None",intentLevel:"No intent",planDetails:"",accessToMeans:"",timeline:"",previousAttempts:""},homicidalIdeation:{present:!1,details:""},selfHarm:{present:!1,details:""},riskFactors:"",protectiveFactors:"",overallRiskLevel:"Low",safetyPlan:"",dispositionRecommendations:""},u=(m,f)=>{c(m,f),d&&setTimeout(()=>d(),500)},p=(m,f)=>{const b={...o},v=m.split(".");let j=b;for(let g=0;g<v.length-1;g++)j=j[v[g]];j[v[v.length-1]]=f,u("riskAssessment",b)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-400",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-3xl",children:""}),e.jsx("h3",{className:"text-xl font-bold text-orange-800",children:"Comprehensive Risk Assessment"})]}),e.jsx("p",{className:"text-sm text-orange-700",children:"Thorough evaluation of suicide, homicide, and self-harm risk with safety planning."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-orange-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Reason for Assessment"]}),e.jsx("textarea",{value:n.behaviorProblem||"",onChange:m=>u("behaviorProblem",m.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"What prompted this risk assessment?"})]}),e.jsxs("div",{className:"card-main bg-red-50 border-2 border-red-300",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Suicidal Ideation Assessment"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3 mb-2",children:[e.jsx("input",{type:"checkbox",className:"w-5 h-5 text-red-600 rounded",checked:o.suicidalIdeation.present,onChange:m=>p("suicidalIdeation.present",m.target.checked)}),e.jsx("span",{className:"font-semibold text-red-800",children:"Current suicidal ideation present"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Ideation Frequency"}),e.jsxs("select",{className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg bg-white shadow-sm",value:o.suicidalIdeation.frequency,onChange:m=>p("suicidalIdeation.frequency",m.target.value),children:[e.jsx("option",{children:"None"}),e.jsx("option",{children:"Rare (few times/year)"}),e.jsx("option",{children:"Occasional (monthly)"}),e.jsx("option",{children:"Frequent (weekly)"}),e.jsx("option",{children:"Daily"}),e.jsx("option",{children:"Constant"})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Intent Level"}),e.jsxs("select",{className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg bg-white shadow-sm",value:o.suicidalIdeation.intentLevel,onChange:m=>p("suicidalIdeation.intentLevel",m.target.value),children:[e.jsx("option",{children:"No intent"}),e.jsx("option",{children:"Low (passive wishes)"}),e.jsx("option",{children:"Moderate (some intent)"}),e.jsx("option",{children:"High (strong intent)"}),e.jsx("option",{children:"Imminent"})]})]})})]}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Plan Details"}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Is there a plan? How specific? How lethal?",value:o.suicidalIdeation.planDetails,onChange:m=>p("suicidalIdeation.planDetails",m.target.value)})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Access to Means"}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Does client have access to lethal means (firearms, medications, etc.)?",value:o.suicidalIdeation.accessToMeans,onChange:m=>p("suicidalIdeation.accessToMeans",m.target.value)})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Timeline"}),e.jsx("input",{type:"text",className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 bg-white shadow-sm",placeholder:"When? Immediate? Within days/weeks?",value:o.suicidalIdeation.timeline,onChange:m=>p("suicidalIdeation.timeline",m.target.value)})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Previous Attempts"}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-red-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"History of suicide attempts? When? Method? Outcome?",value:o.suicidalIdeation.previousAttempts,onChange:m=>p("suicidalIdeation.previousAttempts",m.target.value)})]})})]})]}),e.jsxs("div",{className:"card-main bg-red-50 border-2 border-red-300",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Homicidal/Violence Risk Assessment"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3 mb-2",children:[e.jsx("input",{type:"checkbox",className:"w-5 h-5 text-red-600 rounded",checked:o.homicidalIdeation.present,onChange:m=>p("homicidalIdeation.present",m.target.checked)}),e.jsx("span",{className:"font-semibold text-red-800",children:"Homicidal ideation or violence risk present"})]})}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Target identified? Plan? Access to weapons? History of violence? Duty to warn considerations?",value:o.homicidalIdeation.details,onChange:m=>p("homicidalIdeation.details",m.target.value)})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-orange-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Self-Harm Assessment"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3 mb-2",children:[e.jsx("input",{type:"checkbox",className:"w-5 h-5 text-orange-600 rounded",checked:o.selfHarm.present,onChange:m=>p("selfHarm.present",m.target.checked)}),e.jsx("span",{className:"font-semibold text-gray-700",children:"Non-suicidal self-injury present"})]})}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-orange-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Methods? Frequency? Function (emotion regulation, punishment, etc.)?",value:o.selfHarm.details,onChange:m=>p("selfHarm.details",m.target.value)})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-orange-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Risk & Protective Factors"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-red-700 mb-2 block",children:"Risk Factors"}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 resize-none bg-white shadow-sm",rows:"5",placeholder:`- Recent losses
- Substance use
- Social isolation
- Hopelessness
- Impulsivity
- Access to means
- Mental health symptoms
- Financial/legal problems`,value:o.riskFactors,onChange:m=>p("riskFactors",m.target.value)})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-green-700 mb-2 block",children:"Protective Factors"}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-green-400 rounded-lg focus:ring-2 focus:ring-green-500 resize-none bg-white shadow-sm",rows:"5",placeholder:`- Strong support system
- Reasons for living
- Engaged in treatment
- Coping skills
- Religious/spiritual beliefs
- Future goals
- Responsibility to others
- Problem-solving ability`,value:o.protectiveFactors,onChange:m=>p("protectiveFactors",m.target.value)})]})})]})]}),e.jsxs("div",{className:"card-main bg-orange-100 border-2 border-orange-400",children:[e.jsxs("h3",{className:"text-lg font-semibold text-orange-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Overall Risk Level"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-wrap gap-4",children:["Low","Low-Moderate","Moderate","Moderate-High","High","Imminent"].map(m=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"overallRisk",value:m,className:"w-4 h-4 text-orange-600",checked:o.overallRiskLevel===m,onChange:f=>p("overallRiskLevel",f.target.value)}),e.jsx("span",{className:`text-sm font-medium ${m.includes("High")||m==="Imminent"?"text-red-700":"text-gray-700"}`,children:m})]},m))}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Clinical Rationale"}),e.jsx("textarea",{value:o.dispositionRecommendations,onChange:m=>p("dispositionRecommendations",m.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Clinical rationale for risk level determination...",required:!0})]})})]})]}),e.jsxs("div",{className:"card-main bg-green-50 border-2 border-green-400",children:[e.jsxs("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Interventions & Safety Plan"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Interventions Provided"}),e.jsx("textarea",{value:n.intervention||"",onChange:m=>u("intervention",m.target.value),className:"w-full px-4 py-3 border-2 border-green-400 rounded-lg focus:ring-2 focus:ring-green-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Crisis counseling, means restriction, emergency contacts, referrals..."})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Safety Plan"}),e.jsx("textarea",{value:n.plan||"",onChange:m=>u("plan",m.target.value),className:"w-full px-4 py-3 border-2 border-green-400 rounded-lg focus:ring-2 focus:ring-green-500 resize-none bg-white shadow-sm",rows:"6",placeholder:`Detailed safety plan:
- Warning signs
- Coping strategies
- Distraction activities
- Support contacts (names & numbers)
- Professional resources
- Crisis line numbers (988)
- Means restriction plan
- Follow-up schedule`,required:!0})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-orange-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Follow-Up Plan & Recommendations"]}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-orange-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Next appointment? Frequency of contact? Collateral involvement? Referrals? Hospitalization? Level of care recommendations?",value:o.safetyPlan,onChange:m=>p("safetyPlan",m.target.value)})]})]})}function Yb({note:n,onChange:c,autoSave:d}){const o=(u,p)=>{c(u,p),d&&setTimeout(()=>d(),500)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Type of Administrative Note"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:["Care coordination","Consultation with colleague","Phone contact","Email correspondence","Collateral contact","Documentation review","Treatment planning","Case management","Supervision notes","Peer review","Quality assurance","Insurance coordination","Referral coordination","Records request","Other"].map(u=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-gray-600 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:u})]},u))})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Details"]}),e.jsx("textarea",{value:n.behaviorProblem||"",onChange:u=>o("behaviorProblem",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 resize-none bg-white shadow-sm",rows:"8",placeholder:`Document the administrative activity:

- Date and time
- Who was involved (names, roles)
- Purpose of contact/activity
- Information discussed or exchanged
- Decisions made
- Follow-up needed
- Documents generated or reviewed`})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Participants/Contacts"]}),e.jsx("textarea",{value:n.intervention||"",onChange:u=>o("intervention",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Who was involved? (Names, organizations, roles)"})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Outcome & Actions Taken"]}),e.jsx("textarea",{value:n.response||"",onChange:u=>o("response",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"What was accomplished? Any decisions or agreements?"})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Follow-Up Required"]}),e.jsx("textarea",{value:n.plan||"",onChange:u=>o("plan",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Next steps? Who is responsible? Timeline?"})]}),e.jsxs("div",{className:"card-main bg-gray-50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Additional Notes"]}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Any other relevant information..."})]}),e.jsxs("div",{className:"card-main bg-blue-50 border-2 border-blue-300",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Time Documentation"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Duration (minutes)"}),e.jsx("input",{type:"number",className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white shadow-sm",placeholder:"0",min:"0"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Billable?"}),e.jsxs("select",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white shadow-sm",children:[e.jsx("option",{children:"Yes"}),e.jsx("option",{children:"No"}),e.jsx("option",{children:"To be determined"})]})]})})]})]})]})}const Fb=["Mild","Moderate","Severe","In partial remission","In full remission","With psychotic features","Unspecified"],Bh=n=>!n||n.length<4?n:n.slice(0,3)+"."+n.slice(3);function Gb({selectedCodes:n=[],onChange:c,maxBillable:d=4,showBillableToggle:o=!0,showPrimarySelector:u=!0,showSeveritySelector:p=!0,disabled:m=!1}){const[f,b]=x.useState(""),[v,j]=x.useState([]),[g,y]=x.useState(!1),[C,N]=x.useState(!1),[_,A]=x.useState(null),[k,O]=x.useState({top:0,left:0,width:0}),Y=x.useRef(null),I=x.useRef(null),$=x.useRef(null);x.useEffect(()=>{if(Y.current&&clearTimeout(Y.current),f.length<2){j([]),N(!1);return}return Y.current=setTimeout(async()=>{y(!0),A(null);try{const z=await Xp(f,"ICD10",50);j(z.codes||[]),N(!0)}catch(z){console.error("Error searching codes:",z),A("Failed to search codes. Please try again."),j([])}finally{y(!1)}},300),()=>{Y.current&&clearTimeout(Y.current)}},[f]),x.useEffect(()=>{if(C&&$.current){const z=$.current.getBoundingClientRect();O({top:z.bottom+window.scrollY,left:z.left+window.scrollX,width:z.width})}},[C]),x.useEffect(()=>{const z=H=>{I.current&&!I.current.contains(H.target)&&N(!1)};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]);const se=z=>{if(n.some(S=>S.code===z.code)){A(`${z.code} is already selected`);return}const H=n.filter(S=>S.billable).length,D={code:z.code,description:z.description,billable:H<d,primary:n.length===0,severity:null};c([...n,D]),b(""),N(!1),A(null)},V=z=>{const H=n.filter(D=>D.code!==z);n.find(D=>D.code===z)?.primary&&H.length>0&&(H[0].primary=!0),c(H)},X=(z,H,D)=>{const S=n.map(E=>{if(E.code===z){const U={...E,[H]:D};return U}return H==="primary"&&D===!0?{...E,primary:!1}:E});if(H==="billable"&&D===!0&&S.filter(U=>U.billable).length>d){A(`Maximum ${d} billable diagnoses allowed`);return}c(S),A(null)},xe=z=>{if(z===0)return;const H=[...n];[H[z-1],H[z]]=[H[z],H[z-1]],c(H)},me=z=>{if(z===n.length-1)return;const H=[...n];[H[z],H[z+1]]=[H[z+1],H[z]],c(H)},fe=n.filter(z=>z.billable).length,q=()=>{if(!C)return null;const z=e.jsx("div",{ref:I,style:{position:"absolute",top:`${k.top}px`,left:`${k.left}px`,width:`${k.width}px`,zIndex:9999},className:"mt-2 bg-white border-2 border-gray-200 rounded-lg shadow-xl max-h-96 overflow-y-auto",children:v.length>0?v.map((H,D)=>e.jsxs("button",{onClick:()=>se(H),className:"w-full px-4 py-3 text-left hover:bg-blue-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:Bh(H.code)}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:H.description})]},D)):!g&&f.length>=2&&e.jsxs("div",{className:"p-4 text-center text-gray-500",children:['No codes found matching "',f,'"']})});return Sp.createPortal(z,document.body)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Search ICD-10 Codes",e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",fe,"/",d," billable selected)"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:$,type:"text",value:f,onChange:z=>b(z.target.value),placeholder:"Search by code or description (e.g., F41.1 or anxiety)...",disabled:m,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm disabled:bg-gray-100 disabled:cursor-not-allowed"}),g&&e.jsx("div",{className:"absolute right-3 top-3",children:e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-blue-500 border-t-transparent rounded-full"})})]})]}),q(),_&&e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-3 text-red-800 text-sm",children:_}),n.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700",children:["Selected Diagnoses (",n.length,")"]}),n.map((z,H)=>e.jsx("div",{className:`bg-white border-2 rounded-lg p-4 ${z.primary?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-bold text-gray-900",children:Bh(z.code)}),z.primary&&e.jsx("span",{className:"px-2 py-0.5 bg-blue-500 text-white text-xs font-semibold rounded",children:"PRIMARY"}),z.billable&&e.jsx("span",{className:"px-2 py-0.5 bg-green-500 text-white text-xs font-semibold rounded",children:"BILLABLE"})]}),e.jsx("p",{className:"text-sm text-gray-700",children:z.description}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-3",children:[o&&e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:z.billable,onChange:D=>X(z.code,"billable",D.target.checked),disabled:m||!z.billable&&fe>=d,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Billable"})]}),u&&e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"primary-diagnosis",checked:z.primary,onChange:()=>X(z.code,"primary",!0),disabled:m,className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Primary"})]}),p&&e.jsxs("select",{value:z.severity||"",onChange:D=>X(z.code,"severity",D.target.value||null),disabled:m,className:"text-sm border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"-- Severity --"}),Fb.map(D=>e.jsx("option",{value:D,children:D},D))]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{onClick:()=>xe(H),disabled:m||H===0,className:"p-1 text-gray-500 hover:text-gray-700 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move up",children:""}),e.jsx("button",{onClick:()=>me(H),disabled:m||H===n.length-1,className:"p-1 text-gray-500 hover:text-gray-700 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move down",children:""}),e.jsx("button",{onClick:()=>V(z.code),disabled:m,className:"p-1 text-red-500 hover:text-red-700 disabled:opacity-30 disabled:cursor-not-allowed",title:"Remove",children:""})]})]})},z.code))]}),n.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:"No diagnoses selected. Search and select ICD-10 codes above."})]})}function Xb({note:n,onChange:c,disabled:d=!1}){const o=(m,f)=>{c(m,f)},u=m=>{o("diagnosis_codes",JSON.stringify(m))};let p=[];try{if(n.diagnosis_codes)if(typeof n.diagnosis_codes=="string"){const m=n.diagnosis_codes.trim();m.length>0&&(p=JSON.parse(m))}else Array.isArray(n.diagnosis_codes)&&(p=n.diagnosis_codes)}catch(m){console.error("Failed to parse diagnosis_codes, using empty array:",m,n.diagnosis_codes),p=[]}return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border-2 border-purple-200 rounded-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Diagnosis Assessment"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This diagnosis note serves as the clinical source of truth and will automatically sync billable codes to the billing system when signed."})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"ICD-10 Diagnosis Codes"}),e.jsx("div",{className:"card-inner",children:e.jsx(Gb,{selectedCodes:p,onChange:u,maxBillable:4,showBillableToggle:!0,showPrimarySelector:!0,showSeveritySelector:!0,disabled:d})})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Clinical Assessment"}),e.jsxs("div",{className:"card-inner space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Symptoms Reported by Client",e.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(What the client describes)"})]}),e.jsx("textarea",{value:n.symptoms_reported||"",onChange:m=>o("symptoms_reported",m.target.value),disabled:d,rows:4,placeholder:"Document symptoms as reported by the client in their own words...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Symptoms Observed by Clinician",e.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(What you directly observe)"})]}),e.jsx("textarea",{value:n.symptoms_observed||"",onChange:m=>o("symptoms_observed",m.target.value),disabled:d,rows:4,placeholder:"Document observable symptoms, behavioral indicators, presentation...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Duration of Symptoms"}),e.jsx("textarea",{value:n.duration_of_symptoms||"",onChange:m=>o("duration_of_symptoms",m.target.value),disabled:d,rows:2,placeholder:"How long have symptoms been present? When did they begin?",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Diagnostic Reasoning"}),e.jsxs("div",{className:"card-inner space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Clinical Justification",e.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(Why this diagnosis?)"})]}),e.jsx("textarea",{value:n.clinical_justification||"",onChange:m=>o("clinical_justification",m.target.value),disabled:d,rows:5,placeholder:"Explain the clinical reasoning for this diagnosis. Include DSM-5 criteria met, frequency/intensity of symptoms, impact on functioning...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Differential Diagnosis",e.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(What else was considered and ruled out?)"})]}),e.jsx("textarea",{value:n.differential_diagnosis||"",onChange:m=>o("differential_diagnosis",m.target.value),disabled:d,rows:4,placeholder:"Document other diagnoses considered and reasons they were ruled out...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Severity & Specifiers",e.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(Additional clinical details)"})]}),e.jsx("textarea",{value:n.severity_specifiers||"",onChange:m=>o("severity_specifiers",m.target.value),disabled:d,rows:3,placeholder:"Document severity level, course specifiers, additional features (e.g., 'with anxious distress', 'in partial remission')...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Functional Impact"}),e.jsxs("div",{className:"card-inner",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Functional Impairment",e.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(How symptoms affect daily life and functioning)"})]}),e.jsx("textarea",{value:n.functional_impairment||"",onChange:m=>o("functional_impairment",m.target.value),disabled:d,rows:4,placeholder:"Document impact on work, relationships, self-care, social functioning, occupational performance...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Diagnosis History"}),e.jsxs("div",{className:"card-inner",children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Previous Diagnoses",e.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(Prior diagnostic history and changes)"})]}),e.jsx("textarea",{value:n.previous_diagnoses||"",onChange:m=>o("previous_diagnoses",m.target.value),disabled:d,rows:3,placeholder:"Document previous diagnoses, when they were assigned, by whom, and any changes or revisions...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-6",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:" Billing Integration"}),e.jsx("p",{className:"text-sm text-blue-800",children:"When you sign this diagnosis note, the following will happen automatically:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-800 mt-2 space-y-1",children:[e.jsxs("li",{children:["Billable diagnoses (",p.filter(m=>m.billable).length," selected) will be added to the billing system"]}),e.jsx("li",{children:"Previous diagnoses will be marked as inactive"}),e.jsx("li",{children:"This note becomes the source of truth for all clinical documentation"}),e.jsx("li",{children:"Other notes will reference these diagnoses automatically"})]})]})]})}function $b({note:n,onChange:c,autoSave:d}){const o=(m,f)=>{c(m,f),d&&setTimeout(()=>d(),500)},u=m=>(n.treatmentPlan||{})[m]||"",p=(m,f)=>{const b=n.treatmentPlan||{};o("treatmentPlan",{...b,[m]:f})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Treatment Goals"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"What are the primary goals of treatment? What does the client hope to achieve?"}),e.jsx("textarea",{value:u("goals"),onChange:m=>p("goals",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"5",placeholder:`Example:
1. Reduce anxiety symptoms to manageable levels
2. Develop healthy coping strategies for stress
3. Improve relationships with family members
4. Return to work/school functioning`})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Target Behaviors & Objectives"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"Specific, measurable objectives. What behaviors or symptoms will change?"}),e.jsx("textarea",{value:u("objectives"),onChange:m=>p("objectives",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"5",placeholder:`Example:
- Client will identify and challenge 3 cognitive distortions per week
- Client will practice deep breathing exercises daily
- Client will attend all scheduled sessions
- Client will report anxiety level of 5 or below (0-10 scale) within 8 weeks`})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Interventions & Treatment Modalities"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"What therapeutic approaches, techniques, or interventions will be used?"}),e.jsx("textarea",{value:u("interventions"),onChange:m=>p("interventions",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"5",placeholder:`Example:
- Cognitive Behavioral Therapy (CBT)
- Dialectical Behavior Therapy (DBT) skills training
- Mindfulness and relaxation techniques
- EMDR for trauma processing
- Family therapy sessions (as needed)
- Psychoeducation about anxiety/depression`})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Treatment Frequency & Expected Duration"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Session Frequency"}),e.jsx("textarea",{value:u("frequency"),onChange:m=>p("frequency",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Example: Weekly 50-minute sessions, with option to increase to twice weekly if needed"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Expected Duration of Treatment"}),e.jsx("textarea",{value:u("duration"),onChange:m=>p("duration",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Example: 12-16 weeks of weekly therapy, with ongoing reassessment of progress"})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Potential Barriers & Mitigation Strategies"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"What might interfere with treatment success? How will barriers be addressed?"}),e.jsx("textarea",{value:u("barriers"),onChange:m=>p("barriers",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:`Example:
- Transportation issues  Offer telehealth options
- Work schedule conflicts  Offer early morning or evening appointments
- Financial concerns  Sliding scale fee, connect with financial assistance resources
- Language barriers  Provide interpreter services`})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Discharge Criteria & Success Indicators"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"How will we know treatment has been successful? What indicates readiness for discharge?"}),e.jsx("textarea",{value:u("dischargeCriteria"),onChange:m=>p("dischargeCriteria",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:`Example:
- Client reports anxiety symptoms manageable without therapy support
- Client demonstrates consistent use of coping skills
- Client feels confident managing stressors independently
- Client has achieved treatment goals
- Client expresses readiness to discontinue therapy`})]}),e.jsxs("div",{className:"card-main bg-blue-50 border-2 border-blue-300",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Client Agreement & Collaboration"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"Document client's understanding, agreement, and input on the treatment plan"}),e.jsx("textarea",{value:u("clientAgreement"),onChange:m=>p("clientAgreement",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Example: Client reviewed treatment plan and expressed agreement with goals and proposed interventions. Client voiced concerns about time commitment, and we agreed to reassess frequency after 4 weeks."})]})]})}function Qb({note:n,onChange:c,autoSave:d}){const o=(m,f)=>{c(m,f),d&&setTimeout(()=>d(),500)},u=[{value:"noshow",label:"No Show",description:"Client did not attend, no notice given"},{value:"late_cancel",label:"Late Cancellation",description:"Canceled within 24 hours of appointment"},{value:"cancel",label:"Cancellation",description:"Canceled with adequate notice"},{value:"late_arrival",label:"Late Arrival",description:"Client arrived late to session"}],p=n.appointmentStatus||"noshow";return u.find(m=>m.value===p),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main bg-gray-50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Appointment Status"]}),e.jsx("div",{className:"space-y-3",children:u.map(m=>e.jsxs("label",{className:`flex items-start gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all ${p===m.value?"border-blue-500 bg-blue-50":"border-gray-300 bg-white hover:border-gray-400"}`,children:[e.jsx("input",{type:"radio",name:"appointmentStatus",value:m.value,checked:p===m.value,onChange:f=>o("appointmentStatus",f.target.value),className:"mt-1 w-4 h-4 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:m.label}),e.jsx("div",{className:"text-sm text-gray-600",children:m.description})]})]},m.value))})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Reason / Additional Details"]}),e.jsx("textarea",{value:n.statusReason||"",onChange:m=>o("statusReason",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Provide additional context: Why did the client cancel? When were you notified? Any relevant circumstances?"})]}),e.jsxs("div",{className:"card-main bg-yellow-50 border-2 border-yellow-300",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Billing Impact"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:n.chargeApplied||!1,onChange:m=>o("chargeApplied",m.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Late cancellation/no-show charge applied"})]}),n.chargeApplied&&e.jsx("textarea",{value:n.chargeDetails||"",onChange:m=>o("chargeDetails",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Charge amount and details..."})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Follow-up Action"]}),e.jsx("textarea",{value:n.followUpAction||"",onChange:m=>o("followUpAction",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"What follow-up is needed? Call client to reschedule? Send reminder? Review cancellation policy?"})]})]})}function Vb({note:n,onChange:c,autoSave:d}){const o=(m,f)=>{c(m,f),d&&setTimeout(()=>d(),500)},u=[{value:"phone",label:" Phone Call",icon:""},{value:"email",label:" Email",icon:""},{value:"text",label:" Text Message",icon:""},{value:"portal",label:" Patient Portal",icon:""},{value:"voicemail",label:" Voicemail",icon:""}],p=n.contactMethod||"phone";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main bg-blue-50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Contact Method"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:u.map(m=>e.jsxs("label",{className:`flex flex-col items-center gap-2 p-4 rounded-lg border-2 cursor-pointer transition-all ${p===m.value?"border-blue-500 bg-blue-100":"border-gray-300 bg-white hover:border-gray-400"}`,children:[e.jsx("input",{type:"radio",name:"contactMethod",value:m.value,checked:p===m.value,onChange:f=>o("contactMethod",f.target.value),className:"sr-only"}),e.jsx("div",{className:"text-3xl",children:m.icon}),e.jsx("div",{className:"text-sm font-semibold text-gray-800 text-center",children:m.label.replace(/^.+ /,"")})]},m.value))})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Date & Time of Contact"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Date"}),e.jsx("input",{type:"date",value:n.contactDate||"",onChange:m=>o("contactDate",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:"Time"}),e.jsx("input",{type:"time",value:n.contactTime||"",onChange:m=>o("contactTime",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm"})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Reason for Contact"]}),e.jsx("textarea",{value:n.contactReason||"",onChange:m=>o("contactReason",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Why did the client reach out? What did they need or want to discuss?"})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Summary of Communication"]}),e.jsx("textarea",{value:n.communicationSummary||"",onChange:m=>o("communicationSummary",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Summarize the content of the communication. What was discussed? What information was provided?"})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Action Taken / Response Provided"]}),e.jsx("textarea",{value:n.actionTaken||"",onChange:m=>o("actionTaken",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"How did you respond? What actions were taken? Any referrals or resources provided? Follow-up needed?"})]}),e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.urgentFlag||!1,onChange:m=>o("urgentFlag",m.target.checked),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-semibold text-gray-800",children:" Urgent or Crisis-Related Contact"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Check if this contact involved safety concerns, crisis, or urgent clinical needs"})]})]}),n.urgentFlag&&e.jsx("div",{className:"mt-4",children:e.jsx("textarea",{value:n.urgentDetails||"",onChange:m=>o("urgentDetails",m.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Describe the urgent nature of the contact and actions taken to address safety/crisis concerns..."})})]})]})}function Zb({noteType:n,patientId:c,appointmentId:d=null,serviceDate:o,onSave:u,onCancel:p}){const[m,f]=x.useState(""),[b,v]=x.useState(!1),[j,g]=x.useState(""),[y,C]=x.useState(""),[N,_]=x.useState(!1),[A,k]=x.useState(!0),[O,Y]=x.useState(!1),[I,$]=x.useState(null),se=n==="noshow",V=n==="cancel",X=async xe=>{xe.preventDefault(),Y(!0),$(null);try{let me="";se?(me=`CLIENT DID NOT ATTEND SCHEDULED APPOINTMENT

`,m&&(me+=`Reason (if known): ${m}

`),b?(me+=`Contact Attempted: Yes
`,me+=`Method: ${j}
`,me+=`Result: ${y}

`):me+=`Contact Attempted: No

`,me+=`Plan: ${N?"Billable no-show fee applies.":"No-show fee waived."} Will follow up to reschedule.`):V&&(me=`APPOINTMENT CANCELLED

`,m&&(me+=`Reason: ${m}

`),me+="Plan: Will reschedule as needed.");const q=await bo({patientId:c,appointmentId:d,noteType:n,serviceDate:o,templateType:"quick",plan:me,status:A?"signed":"draft"});A&&q.noteId&&await uf(q.noteId),u&&u(q)}catch(me){console.error("Error saving quick note:",me),$(me.message||"Failed to save note")}finally{Y(!1)}};return e.jsx("div",{className:"max-w-2xl mx-auto p-6",children:e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:se?" No-Show Note":" Cancellation Note"}),e.jsxs("p",{className:"text-gray-600",children:["Quick documentation for ",se?"missed appointment":"cancelled session"]})]}),I&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800",children:I}),e.jsxs("form",{onSubmit:X,className:"space-y-6",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-2 block",children:se?"Reason (if known)":"Reason for Cancellation"}),e.jsx("textarea",{value:m,onChange:xe=>f(xe.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:"3",placeholder:se?"e.g., Client called to report illness":"e.g., Family emergency"})]})}),se&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[e.jsxs("label",{className:"flex items-center gap-3 mb-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:xe=>v(xe.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Attempted to contact client"})]}),b&&e.jsxs("div",{className:"space-y-3 ml-8",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Contact Method"}),e.jsxs("select",{value:j,onChange:xe=>g(xe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select method..."}),e.jsx("option",{value:"Phone",children:"Phone"}),e.jsx("option",{value:"Email",children:"Email"}),e.jsx("option",{value:"Text/SMS",children:"Text/SMS"}),e.jsx("option",{value:"Patient Portal",children:"Patient Portal"})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Result"}),e.jsxs("select",{value:y,onChange:xe=>C(xe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select result..."}),e.jsx("option",{value:"Left voicemail",children:"Left voicemail"}),e.jsx("option",{value:"Spoke with client",children:"Spoke with client"}),e.jsx("option",{value:"No answer",children:"No answer"}),e.jsx("option",{value:"Message sent",children:"Message sent"}),e.jsx("option",{value:"Awaiting response",children:"Awaiting response"})]})]})})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:N,onChange:xe=>_(xe.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Apply no-show fee (billable)"})]})})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:A,onChange:xe=>k(xe.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Sign and lock note immediately"})]}),e.jsx("p",{className:"text-xs text-gray-600 ml-8 mt-1",children:"Recommended for simple administrative notes"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:p,disabled:O,className:"flex-1 px-6 py-3 bg-gray-500 text-white font-semibold rounded-xl hover:bg-gray-600 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:O,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:O?"Saving...":"Save Note"})]})]})]})})}function Jb({patient:n,provider:c,serviceInfo:d,diagnosis:o,serviceDate:u}){const p=b=>{if(!b)return"N/A";const[v,j,g]=b.split(/[-T]/);return new Date(v,j-1,g).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})},m=b=>{if(!b)return"Not set";const v=Math.floor(b/60),j=b%60;return v>0&&j>0?`${v}h ${j}m`:v>0?`${v}h`:`${j}m`},f=b=>{if(!b)return"";const v=b.split(/\s{3,}/);return v.length>1?v[1].trim():b.trim()};return e.jsxs("div",{className:"card-main mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Patient Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Name:"}),e.jsxs("span",{className:"text-base font-semibold text-gray-900",children:[n?.fname," ",n?.mname," ",n?.lname]})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"DOB:"}),e.jsxs("span",{className:"text-sm text-gray-800",children:[n?.DOB?p(n.DOB):"N/A",n?.DOB&&e.jsxs("span",{className:"ml-2 text-gray-500",children:["(Age ",new Date().getFullYear()-new Date(n.DOB).getFullYear(),")"]})]})]}),n?.pid&&e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Patient ID:"}),e.jsx("span",{className:"text-sm text-gray-800 font-mono",children:n.pid})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Service Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Provider:"}),e.jsxs("span",{className:"text-base font-semibold text-gray-900",children:[c?.fullName||c?.fname+" "+c?.lname,c?.credentials&&e.jsx("span",{className:"ml-2 text-sm font-normal text-gray-600",children:c.credentials})]})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Date:"}),e.jsx("span",{className:"text-sm text-gray-800 font-semibold",children:p(u)})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Type:"}),e.jsx("span",{className:"text-sm text-gray-800",children:d?.type||"Individual Therapy"})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Location:"}),e.jsx("span",{className:"text-sm text-gray-800",children:d?.location||"Office"})]}),d?.duration&&e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Duration:"}),e.jsx("span",{className:"text-sm text-gray-800",children:m(d.duration)})]})]})]})]}),o&&e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Primary Diagnosis:"}),e.jsx("span",{className:"text-sm text-gray-900 font-medium",children:f(o)})]})})]})}const Pb=n=>({progress:"BIRP",intake:"Intake",diagnosis:"Diagnosis",treatment_plan:"TreatmentPlan",mse:"MSE",discharge:"Discharge",crisis:"Crisis",risk_assessment:"RiskAssessment",appointment_status:"AppointmentStatus",client_communication:"ClientCommunication",admin:"Administrative",noshow:"AppointmentStatus",cancel:"AppointmentStatus"})[n]||"BIRP";function Yi({noteId:n=null,patientId:c,appointmentId:d=null,noteType:o,onClose:u,onSave:p}){const m=Pb(o),[f,b]=x.useState({patientId:c,appointmentId:d,noteType:o,templateType:m,serviceDate:new Date().toISOString().split("T")[0],behaviorProblem:"",intervention:"",response:"",plan:"",riskPresent:!1,riskAssessment:"",interventionsSelected:[],clientPresentation:[],goalsAddressed:[],status:"draft"}),[v,j]=x.useState(!1),[g,y]=x.useState(!1),[C,N]=x.useState(!1),[_,A]=x.useState(null),[k,O]=x.useState(null),[Y,I]=x.useState(null),[$,se]=x.useState(null),[V,X]=x.useState(null),[xe,me]=x.useState(null),[fe,q]=x.useState(null),z=x.useRef(null),H=x.useRef(n);x.useEffect(()=>{D(),S(),E()},[n,d,c]),x.useEffect(()=>(z.current&&clearTimeout(z.current),z.current=setTimeout(()=>{U()},3e3),()=>{z.current&&clearTimeout(z.current)}),[f]);const D=async()=>{j(!0),O(null);try{if(n){const F=await df(n);b({...f,...F.note}),H.current=n}else{const F={};d?F.appointment_id=d:c&&(F.patient_id=c);try{const P=await Qp(F);if(P.draft){const de=P.draft.draft_content;de.noteType===o?(b({...f,...de}),console.log("Restored draft from server")):console.log("Server draft note type mismatch, skipping restore. Expected:",o,"Got:",de.noteType)}}catch{console.log("No draft found, starting fresh")}const he=localStorage.getItem(`note_draft_${c}_${d||"new"}_${o}`);if(he)try{const P=JSON.parse(he);P.noteType===o?(b({...f,...P}),console.log("Restored draft from localStorage")):(console.log("Draft note type mismatch, skipping restore"),localStorage.removeItem(`note_draft_${c}_${d||"new"}_${o}`))}catch{console.error("Failed to parse localStorage draft")}}}catch(F){console.error("Error loading note:",F),O(F.message)}finally{j(!1)}},S=async()=>{try{const F=await Vp();I(F.settings),!f.templateType&&F.settings.default_note_template&&b(he=>({...he,templateType:F.settings.default_note_template}))}catch(F){console.error("Error loading settings:",F)}},E=async()=>{try{if(c)try{const F=await of(c);if(console.log(" Patient data loaded:",F),se(F.patient),F.problems&&F.problems.length>0){const he=F.problems[0],P=he.title||he.diagnosis||null;q(P),console.log(" Primary diagnosis loaded:",P)}}catch(F){console.error(" Error loading patient data:",F)}try{const F=await Xi();console.log(" Provider data loaded:",F),X(F)}catch(F){console.error(" Error loading provider data:",F)}me({type:"Individual Therapy",location:"Office",duration:null})}catch(F){console.error(" Error loading metadata:",F)}},U=x.useCallback(async()=>{if(!(f.status==="signed"||f.is_locked)){N(!0);try{localStorage.setItem(`note_draft_${c}_${d||"new"}_${f.noteType}`,JSON.stringify(f));const F={noteId:H.current,patientId:f.patientId,appointmentId:f.appointmentId,noteType:f.noteType,serviceDate:f.serviceDate,draftContent:f};await Yp(F),A(new Date)}catch(F){console.error("Auto-save failed:",F)}finally{N(!1)}}},[f,c,d]),ne=(F,he)=>{b(P=>({...P,[F]:he}))},pe=async()=>{y(!0),O(null);try{if(H.current)await Uh(H.current,f);else{const F=await bo(f);H.current=F.noteId}A(new Date),p&&p({noteId:H.current,status:"draft"})}catch(F){console.error("Error saving draft:",F),O(F.message)}finally{y(!1)}},T=async()=>{y(!0),O(null);try{if(H.current)await Uh(H.current,f);else{const F=await bo({...f,status:"draft"});H.current=F.noteId}await uf(H.current),localStorage.removeItem(`note_draft_${c}_${d||"new"}_${f.noteType}`),p&&p({noteId:H.current,status:"signed"}),u&&u()}catch(F){console.error("Error signing note:",F),O(F.message)}finally{y(!1)}},L=()=>{u&&u()},W=async()=>{if(window.confirm("Are you sure you want to delete this draft? This cannot be undone.")){y(!0),O(null);try{await Fp(H.current),localStorage.removeItem(`note_draft_${c}_${d||"new"}_${f.noteType}`),u&&u()}catch(F){console.error("Error deleting note:",F),O("Failed to delete note: "+F.message)}finally{y(!1)}}};return o==="noshow"||o==="cancel"?e.jsx(Zb,{noteType:o,patientId:c,appointmentId:d,serviceDate:f.serviceDate,onSave:p,onCancel:u}):v?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"text-gray-600",children:"Loading note..."})}):e.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h1",{className:"text-2xl font-semibold text-gray-800",children:[o==="progress"&&" Progress Note",o==="intake"&&" Intake Assessment",o==="crisis"&&" Crisis Note",o==="discharge"&&" Discharge Summary",o==="mse"&&" Mental Status Exam",o==="risk_assessment"&&" Risk Assessment",o==="diagnosis"&&" Diagnosis Note",o==="admin"&&" Administrative Note"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[C&&e.jsx("span",{className:"text-sm text-blue-600",children:"Saving..."}),_&&!C&&e.jsxs("span",{className:"text-sm text-gray-600",children:["Saved ",_.toLocaleTimeString()]})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Service Date:"}),e.jsx("input",{type:"date",value:f.serviceDate,onChange:F=>ne("serviceDate",F.target.value),className:"px-3 py-1 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})})]}),k&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800",children:k}),($||V)&&e.jsx(Jb,{patient:$,provider:V,serviceInfo:xe,diagnosis:fe,serviceDate:f.serviceDate}),e.jsxs("div",{className:"mb-6",children:[f.templateType==="BIRP"&&e.jsx(Rb,{note:f,onChange:ne,patientId:c,autoSave:U}),f.templateType==="PIRP"&&e.jsx(zb,{note:f,onChange:ne,patientId:c,autoSave:U}),f.templateType==="MSE"&&e.jsx(Ob,{note:f,onChange:ne,autoSave:U}),f.templateType==="Intake"&&e.jsx(Ub,{note:f,onChange:ne,autoSave:U}),f.templateType==="Discharge"&&e.jsx(Bb,{note:f,onChange:ne,autoSave:U}),f.templateType==="Crisis"&&e.jsx(Hb,{note:f,onChange:ne,autoSave:U}),f.templateType==="RiskAssessment"&&e.jsx(qb,{note:f,onChange:ne,autoSave:U}),f.templateType==="Diagnosis"&&e.jsx(Xb,{note:f,onChange:ne,disabled:f.is_locked}),f.templateType==="TreatmentPlan"&&e.jsx($b,{note:f,onChange:ne,autoSave:U}),f.templateType==="AppointmentStatus"&&e.jsx(Qb,{note:f,onChange:ne,autoSave:U}),f.templateType==="ClientCommunication"&&e.jsx(Vb,{note:f,onChange:ne,autoSave:U}),f.templateType==="Administrative"&&e.jsx(Yb,{note:f,onChange:ne,autoSave:U})]}),e.jsx("div",{className:"sticky bottom-6 mt-8",children:e.jsx("div",{className:"card-main shadow-2xl",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:L,disabled:g,className:"px-6 py-3 bg-gray-500 text-white font-semibold rounded-xl hover:bg-gray-600 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),H.current&&!f.is_locked&&f.status!=="signed"&&e.jsx("button",{type:"button",onClick:W,disabled:g,className:"px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white font-semibold rounded-xl hover:from-red-600 hover:to-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:" Delete Draft"}),e.jsx("button",{type:"button",onClick:pe,disabled:g||C,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-semibold rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Saving...":"Save Draft"}),e.jsx("button",{type:"button",onClick:T,disabled:g||C,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white font-semibold rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Signing...":" Sign & Lock Note"})]})})})]})}function wf({noteId:n,onClose:c,onEdit:d,onAddendum:o}){const[u,p]=x.useState(null),[m,f]=x.useState(!0),[b,v]=x.useState(null);x.useEffect(()=>{j()},[n]);const j=async()=>{f(!0),v(null);try{const A=await df(n);p(A.note)}catch(A){console.error("Error loading note:",A),v(A.message)}finally{f(!1)}},g=A=>{if(!A)return"N/A";const[k,O,Y]=A.split(/[-T]/);return new Date(k,O-1,Y).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})},y=A=>A?new Date(A).toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}):"N/A",C=A=>{if(!A)return"";const k=A.split(/\s{3,}/);return k.length>1?k[1].trim():A.trim()};if(m)return e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"text-gray-600",children:"Loading note..."})})});if(b)return e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsxs("div",{className:"card-main text-center p-12",children:[e.jsxs("div",{className:"text-red-600 mb-4",children:["Error: ",b]}),e.jsx("button",{onClick:c,className:"btn-secondary",children:"Close"})]})});if(!u)return null;const N=u.is_locked||u.status==="signed",_=u.status==="draft";return e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h1",{className:"text-2xl font-semibold text-gray-800",children:[u.note_type==="progress"&&" Progress Note",u.note_type==="intake"&&" Intake Assessment",u.note_type==="crisis"&&" Crisis Note",u.note_type==="discharge"&&" Discharge Summary",u.note_type==="mse"&&" Mental Status Exam",u.note_type==="diagnosis"&&" Diagnosis Note",u.note_type==="admin"&&" Administrative Note"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[N&&e.jsx("span",{className:"badge-sm badge-light-success",children:" Signed & Locked"}),_&&e.jsx("span",{className:"badge-sm badge-light-warning",children:"Draft"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Service Date:"}),e.jsx("div",{className:"text-gray-800",children:g(u.service_date)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Provider:"}),e.jsx("div",{className:"text-gray-800",children:u.provider_name||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Created:"}),e.jsx("div",{className:"text-gray-800",children:y(u.created_at)})]}),u.signed_at&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Signed:"}),e.jsx("div",{className:"text-gray-800",children:y(u.signed_at)})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[u.template_type==="Diagnosis"&&e.jsxs(e.Fragment,{children:[u.diagnosis_codes&&u.diagnosis_codes.length>0&&e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:" ICD-10 Diagnosis Codes"}),e.jsx("div",{className:"space-y-2",children:u.diagnosis_codes.map((A,k)=>{const O=A.code||A,Y=A.description||"",I=A.isPrimary||!1,$=A.billable||!1,se=A.severity||null,V=O.length>=4?O.slice(0,3)+"."+O.slice(3):O;return e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border-l-4 border-blue-400",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-mono text-sm font-semibold text-blue-700 bg-blue-100 px-2 py-0.5 rounded",children:V}),e.jsxs("div",{className:"flex gap-2",children:[I&&e.jsx("span",{className:"badge-sm badge-light-primary",children:"Primary"}),$&&e.jsx("span",{className:"badge-sm badge-light-success",children:"Billable"}),se&&e.jsx("span",{className:"badge-sm badge-light-warning",children:se})]})]}),Y&&e.jsx("div",{className:"text-gray-800",children:C(Y)})]})},k)})})]}),(u.symptoms_reported||u.symptoms_observed||u.duration_of_symptoms)&&e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Clinical Assessment"}),e.jsxs("div",{className:"space-y-4",children:[u.symptoms_reported&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Symptoms Reported by Client"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.symptoms_reported})]}),u.symptoms_observed&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Symptoms Observed by Clinician"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.symptoms_observed})]}),u.duration_of_symptoms&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Duration of Symptoms"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.duration_of_symptoms})]})]})]}),(u.clinical_justification||u.differential_diagnosis||u.severity_specifiers)&&e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Diagnostic Reasoning"}),e.jsxs("div",{className:"space-y-4",children:[u.clinical_justification&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Clinical Justification"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.clinical_justification})]}),u.differential_diagnosis&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Differential Diagnosis"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.differential_diagnosis})]}),u.severity_specifiers&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Severity Specifiers"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.severity_specifiers})]})]})]}),u.functional_impairment&&e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Functional Impairment"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.functional_impairment})]}),u.previous_diagnoses&&e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Previous Diagnoses"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.previous_diagnoses})]})]}),u.template_type==="BIRP"&&e.jsxs(e.Fragment,{children:[u.behavior_problem&&e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"B"}),"Behavior / Observations"]}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.behavior_problem}),u.client_presentation&&u.client_presentation.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:u.client_presentation.map((A,k)=>e.jsx("span",{className:"badge-sm badge-light-info",children:A},k))})]}),(u.intervention||u.interventions_selected&&u.interventions_selected.length>0)&&e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"I"}),"Interventions Used"]}),u.intervention&&e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap mb-3",children:u.intervention}),u.interventions_selected&&u.interventions_selected.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Selected Interventions:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:u.interventions_selected.map((A,k)=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:A},k))})]})]}),u.response&&e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"R"}),"Client Response"]}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.response})]}),u.plan&&e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"P"}),"Plan / Next Steps"]}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.plan})]})]}),u.risk_present&&u.risk_assessment&&e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[e.jsx("h3",{className:"font-semibold text-orange-800 mb-3",children:" Risk Assessment"}),e.jsx("div",{className:"text-gray-800 whitespace-pre-wrap",children:u.risk_assessment})]}),u.addenda&&u.addenda.length>0&&e.jsxs("div",{className:"card-main bg-blue-50 border-2 border-blue-300",children:[e.jsxs("h3",{className:"font-semibold text-blue-800 mb-3",children:[" Addenda (",u.addenda.length,")"]}),e.jsx("div",{className:"space-y-3",children:u.addenda.map((A,k)=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-800",children:["Addendum ",k+1]}),e.jsxs("span",{className:"text-xs text-gray-600",children:[y(A.created_at),"  ",A.provider_name]})]}),e.jsxs("div",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"font-semibold",children:"Reason:"})," ",A.addendum_reason]})]},A.id))})]}),N&&e.jsx("div",{className:"card-main bg-green-50 border-2 border-green-300",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-green-800",children:"Digitally Signed"}),e.jsxs("div",{className:"text-sm text-gray-700",children:[u.signed_by_name,"  ",y(u.signed_at)]})]})]})})]}),e.jsxs("div",{className:"flex gap-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:c,className:"px-6 py-3 bg-gray-500 text-white font-semibold rounded-xl hover:bg-gray-600 transition-all shadow-lg",children:"Close"}),_&&d&&e.jsx("button",{onClick:()=>d(u.id),className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all shadow-lg",children:"Edit Draft"}),N&&o&&e.jsx("button",{onClick:()=>o(u.id),className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-semibold rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all shadow-lg",children:"Add Addendum"})]})]})}function Kb({data:n}){const[c,d]=x.useState(!1),[o,u]=x.useState(!1),[p,m]=x.useState({}),[f,b]=x.useState({}),[v,j]=x.useState("list"),[g,y]=x.useState(null);if(!n)return e.jsx("div",{className:"text-gray-700 text-center py-8",children:"Loading admin notes..."});const{patient:C}=n,N=()=>{m({language:C.language||"",ethnicity:C.ethnicity||"",race:C.race||"",nationality:C.nationality||"",religion:C.religion||"",referral_source:C.referral_source||"",tribal_affiliations:C.tribal_affiliations||""}),d(!0)},_=()=>{b({homeless_status:C.homeless_status||"",financial_review_date:C.financial_review_date||"",family_size:C.family_size||"",monthly_income:C.monthly_income||""}),u(!0)},A=async()=>{console.log("Saving demographics:",p),alert("Demographics save not yet implemented - needs API endpoint"),d(!1)},k=async()=>{console.log("Saving financial data:",f),alert("Financial data save not yet implemented - needs API endpoint"),u(!1)},O=()=>{d(!1),m({})},Y=()=>{u(!1),b({})},I=()=>{j("create")},$=()=>{j("list"),y(null)},se=()=>{j("list"),y(null)};return v==="create"?e.jsx(Yi,{patientId:C.pid,noteType:"admin",onSave:$,onClose:se}):v==="edit"?e.jsx(Yi,{noteId:g,patientId:C.pid,noteType:"admin",onSave:$,onClose:se}):v==="view"?e.jsx(wf,{noteId:g,onClose:se}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Demographics & Statistics"}),!c&&e.jsx("button",{onClick:N,className:"px-4 py-2 text-sm font-medium text-blue-700 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-colors",children:" Edit"})]}),e.jsxs("div",{className:"card-inner",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Language"}),c?e.jsx("input",{type:"text",value:p.language,onChange:V=>m({...p,language:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:C.language||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Ethnicity"}),c?e.jsx("input",{type:"text",value:p.ethnicity,onChange:V=>m({...p,ethnicity:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:C.ethnicity||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Race"}),c?e.jsx("input",{type:"text",value:p.race,onChange:V=>m({...p,race:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:C.race||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Nationality"}),c?e.jsx("input",{type:"text",value:p.nationality,onChange:V=>m({...p,nationality:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:C.nationality||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Religion"}),c?e.jsx("input",{type:"text",value:p.religion,onChange:V=>m({...p,religion:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:C.religion||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Referral Source"}),c?e.jsx("input",{type:"text",value:p.referral_source,onChange:V=>m({...p,referral_source:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:C.referral_source||""})]}),e.jsxs("div",{className:"col-span-2 form-field",children:[e.jsx("div",{className:"form-field-label",children:"Tribal Affiliations"}),c?e.jsx("input",{type:"text",value:p.tribal_affiliations,onChange:V=>m({...p,tribal_affiliations:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:C.tribal_affiliations||""})]})]}),c&&e.jsxs("div",{className:"flex gap-3 mt-4 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:A,className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:" Save Changes"}),e.jsx("button",{onClick:O,className:"px-4 py-2 bg-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Financial & Housing Status"}),!o&&e.jsx("button",{onClick:_,className:"px-4 py-2 text-sm font-medium text-blue-700 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-colors",children:" Edit"})]}),e.jsxs("div",{className:"card-inner",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Homeless"}),o?e.jsxs("select",{value:f.homeless_status,onChange:V=>b({...f,homeless_status:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"No",children:"No"}),e.jsx("option",{value:"Yes",children:"Yes"}),e.jsx("option",{value:"At Risk",children:"At Risk"})]}):e.jsx("div",{className:"form-field-value",children:C.homeless_status||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Financial Review"}),o?e.jsx("input",{type:"date",value:f.financial_review_date,onChange:V=>b({...f,financial_review_date:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:C.financial_review_date?new Date(C.financial_review_date).toLocaleDateString():""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Family Size"}),o?e.jsx("input",{type:"number",value:f.family_size,onChange:V=>b({...f,family_size:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:C.family_size||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Monthly Income"}),o?e.jsx("input",{type:"number",value:f.monthly_income,onChange:V=>b({...f,monthly_income:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"}):e.jsx("div",{className:"form-field-value",children:C.monthly_income?`$${C.monthly_income}`:""})]})]}),o&&e.jsxs("div",{className:"flex gap-3 mt-4 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:k,className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:" Save Changes"}),e.jsx("button",{onClick:Y,className:"px-4 py-2 bg-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Administrative Notes"}),e.jsx("button",{onClick:I,className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"+ New Admin Note"})]}),e.jsx("div",{className:"text-gray-600 text-sm",children:"Create administrative notes for this client's record"})]})})]})}function Wb({data:n,onDataUpdate:c}){const[d,o]=x.useState(!1),[u,p]=x.useState(!1),[m,f]=x.useState(!1),[b,v]=x.useState(!1),[j,g]=x.useState(!1),[y,C]=x.useState(!1),[N,_]=x.useState({}),[A,k]=x.useState({}),[O,Y]=x.useState({}),[I,$]=x.useState(!1),[se,V]=x.useState(null),[X,xe]=x.useState([]),[me,fe]=x.useState({});if(x.useEffect(()=>{(async()=>{try{const oe=(await eb())?.companies||[];xe(oe.map(we=>({value:we.id,label:we.name})));const[ue,be,ce,te]=await Promise.all([ca("sub_relation"),ca("sex"),ca("state"),ca("yesno")]);fe({relationship:ue.options||[],sex:be.options||[],state:ce.options||[],accept_assignment:te.options||[]})}catch(M){console.error("Failed to load dropdown options:",M)}})()},[]),!n)return e.jsx("div",{className:"text-gray-700 text-center py-8",children:"Loading insurance data..."});const{patient:q,insurances:z}=n,H=q.payment_type==="client",{primaryInsurance:D,secondaryInsurance:S,tertiaryInsurance:E}=x.useMemo(()=>{const ee=be=>({id:null,type:be,provider:"",plan_name:"",effective_date:"",effective_date_end:"",policy_number:"",group_number:"",subscriber_relationship:"",subscriber_fname:"",subscriber_mname:"",subscriber_lname:"",subscriber_DOB:"",subscriber_sex:"",subscriber_ss:"",subscriber_street:"",subscriber_street_line_2:"",subscriber_city:"",subscriber_state:"",subscriber_postal_code:"",subscriber_employer:"",subscriber_employer_street:"",subscriber_employer_street_line_2:"",subscriber_employer_city:"",subscriber_employer_state:"",subscriber_employer_postal_code:"",copay:"",accept_assignment:""});let M=z?.find(be=>be.type==="primary"),oe=z?.find(be=>be.type==="secondary"),ue=z?.find(be=>be.type==="tertiary");return M||(M=ee("primary")),H||(oe||(oe=ee("secondary")),ue||(ue=ee("tertiary"))),{primaryInsurance:M,secondaryInsurance:oe,tertiaryInsurance:ue}},[z,H]),U=ee=>ee?{provider:ee.provider||"",plan_name:ee.plan_name||"",date:ee.effective_date||"",date_end:ee.effective_date_end||"",policy_number:ee.policy_number||"",group_number:ee.group_number||"",subscriber_relationship:ee.subscriber_relationship||"",subscriber_fname:ee.subscriber_fname||"",subscriber_mname:ee.subscriber_mname||"",subscriber_lname:ee.subscriber_lname||"",subscriber_DOB:ee.subscriber_DOB||"",subscriber_sex:ee.subscriber_sex||"",subscriber_ss:ee.subscriber_ss||"",subscriber_street:ee.subscriber_street||"",subscriber_street_line_2:ee.subscriber_street_line_2||"",subscriber_city:ee.subscriber_city||"",subscriber_state:ee.subscriber_state||"",subscriber_postal_code:ee.subscriber_postal_code||"",subscriber_employer:ee.subscriber_employer||"",subscriber_employer_street:ee.subscriber_employer_street||"",subscriber_employer_street_line_2:ee.subscriber_employer_street_line_2||"",subscriber_employer_city:ee.subscriber_employer_city||"",subscriber_employer_state:ee.subscriber_employer_state||"",subscriber_employer_postal_code:ee.subscriber_employer_postal_code||"",copay:ee.copay||"",accept_assignment:ee.accept_assignment||"",policy_type:ee.policy_type||"",type:ee.type}:{},ne=ee=>{let M;ee==="primary"?(M=D,_(U(M)),v(!0)):ee==="secondary"?(M=S,k(U(M)),g(!0)):ee==="tertiary"&&(M=E,Y(U(M)),C(!0)),V(null)},pe=ee=>{ee==="primary"?(v(!1),_({})):ee==="secondary"?(g(!1),k({})):ee==="tertiary"&&(C(!1),Y({})),V(null)},T=(ee,M,oe)=>{if(M==="subscriber_relationship"&&oe.toLowerCase()==="self"){const ue={[M]:oe,subscriber_fname:q.fname||"",subscriber_mname:q.mname||"",subscriber_lname:q.lname||"",subscriber_DOB:q.DOB||"",subscriber_sex:q.sex||"",subscriber_ss:q.ss||"",subscriber_street:q.street||"",subscriber_street_line_2:q.street_line_2||"",subscriber_city:q.city||"",subscriber_state:q.state||"",subscriber_postal_code:q.postal_code||""};ee==="primary"?_(be=>({...be,...ue})):ee==="secondary"?k(be=>({...be,...ue})):ee==="tertiary"&&Y(be=>({...be,...ue}))}else ee==="primary"?_(ue=>({...ue,[M]:oe})):ee==="secondary"?k(ue=>({...ue,[M]:oe})):ee==="tertiary"&&Y(ue=>({...ue,[M]:oe}))},L=ee=>{const oe=[{field:"provider",label:"Insurance Company"},{field:"date",label:"Effective Date"},{field:"policy_number",label:"Policy Number"},{field:"subscriber_relationship",label:"Relationship"},{field:"subscriber_fname",label:"Subscriber First Name"},{field:"subscriber_lname",label:"Subscriber Last Name"},{field:"subscriber_DOB",label:"D.O.B."},{field:"subscriber_sex",label:"Sex"},{field:"subscriber_ss",label:"S.S."},{field:"subscriber_street",label:"Subscriber Address"},{field:"subscriber_city",label:"City"},{field:"subscriber_state",label:"State"},{field:"subscriber_postal_code",label:"Zip Code"}].filter(({field:ue})=>!ee[ue]||ee[ue].trim()==="");if(oe.length>0)throw new Error(`Required fields missing: ${oe.map(ue=>ue.label).join(", ")}`)},W=async ee=>{$(!0),V(null);try{let M,oe;ee==="primary"?(M=N,oe=D):ee==="secondary"?(M=A,oe=S):ee==="tertiary"&&(M=O,oe=E),L(M);const ue={...M};oe.id||(ue.patient_id=q.pid,ue.type=ee),await Ip(oe.id,ue),c&&await c(),pe(ee)}catch(M){V(M.message||"Failed to save insurance changes")}finally{$(!1)}},F=(ee,M,oe,ue,be,ce,te=null,we="text",Ce=!1)=>{const qe=Ce?"form-field-label required-field-label":"form-field-label";if(be&&oe)return te?e.jsxs("div",{className:"form-field",children:[e.jsxs("div",{className:qe,children:[ee,Ce&&" *"]}),e.jsxs("select",{value:ce[oe]||"",onChange:Ve=>T(ue,oe,Ve.target.value),className:"input-md",required:Ce,children:[e.jsx("option",{value:"",children:"Select..."}),te.map(Ve=>e.jsx("option",{value:Ve.value,children:Ve.label},Ve.value))]})]}):e.jsxs("div",{className:"form-field",children:[e.jsxs("div",{className:qe,children:[ee,Ce&&" *"]}),e.jsx("input",{type:we,value:ce[oe]||"",onChange:Ve=>T(ue,oe,Ve.target.value),className:"input-md",required:Ce})]});{let Ve=M||"";if(te&&M){const lt=te.find(jt=>jt.value===M);lt&&(Ve=lt.label)}return e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:ee}),e.jsx("div",{className:"form-field-value",children:Ve})]})}},he=(ee,M,oe=!1,ue=!0,be=null)=>{if(!ee)return null;const ce=M==="primary"&&b||M==="secondary"&&j||M==="tertiary"&&y,te=M==="primary"?N:M==="secondary"?A:O,we=Ce=>({primary:"Primary Insurance",secondary:"Secondary Insurance",tertiary:"Tertiary Insurance"})[Ce]||`Insurance ${Ce}`;return e.jsxs("div",{className:"card-main mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:`flex items-center gap-4 ${oe?"cursor-pointer":""}`,onClick:oe?be:void 0,children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:we(ee.type)}),oe&&e.jsx("button",{className:"text-gray-600 hover:text-gray-800 transition-colors",children:ue?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsx("div",{className:"flex space-x-2",children:ce?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>pe(M),disabled:I,className:"btn-solid btn-solid-gray disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:()=>W(M),disabled:I,className:"btn-solid btn-solid-green disabled:opacity-50",children:I?"Saving...":"Save Changes"})]}):e.jsx("button",{onClick:()=>ne(M),className:"btn-solid btn-solid-blue",children:"Edit Insurance"})})]}),ue&&ce&&e.jsx("div",{className:"mb-4 px-4 py-2 bg-purple-50 border-l-4 border-purple-700 rounded",children:e.jsxs("p",{className:"text-sm text-purple-900",children:[e.jsx("span",{className:"required-field-label",children:"*"})," Required fields are marked with an asterisk and displayed in ",e.jsx("span",{className:"required-field-label",children:"purple"})]})}),ue&&e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"Insurance Details"}),F("Insurance Company",ee.insurance_company_name||ee.provider,"provider",M,ce,te,X,"text",!0),F("Plan Name",ee.plan_name,"plan_name",M,ce,te),F("Effective Date",ee.effective_date,"date",M,ce,te,null,"date",!0),F("Effective Date End",ee.effective_date_end,"date_end",M,ce,te,null,"date"),F("Policy Number",ee.policy_number,"policy_number",M,ce,te,null,"text",!0),F("Group Number",ee.group_number,"group_number",M,ce,te),F("CoPay",ee.copay,"copay",M,ce,te,null,"text"),F("Accept Assignment",ee.accept_assignment,"accept_assignment",M,ce,te,me.accept_assignment||[]),ee.type==="secondary"&&F("Secondary Medicare Type",ee.policy_type,"policy_type",M,ce,te)]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"Subscriber Information"}),F("Relationship",ee.subscriber_relationship,"subscriber_relationship",M,ce,te,me.relationship||[],"text",!0),F("Subscriber First Name",ee.subscriber_fname,"subscriber_fname",M,ce,te,null,"text",!0),F("Subscriber Middle Name",ee.subscriber_mname,"subscriber_mname",M,ce,te),F("Subscriber Last Name",ee.subscriber_lname,"subscriber_lname",M,ce,te,null,"text",!0),F("D.O.B.",ee.subscriber_DOB,"subscriber_DOB",M,ce,te,null,"date",!0),F("Sex",ee.subscriber_sex,"subscriber_sex",M,ce,te,me.sex||[],"text",!0),ce?F("S.S.",te.subscriber_ss,"subscriber_ss",M,ce,te,null,"text",!0):e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"S.S."}),e.jsx("div",{className:"form-field-value",children:ee.subscriber_ss?"***-**-"+ee.subscriber_ss.slice(-4):""})]}),F("Subscriber Address",ee.subscriber_street,"subscriber_street",M,ce,te,null,"text",!0),F("Address Line 2",ee.subscriber_street_line_2,"subscriber_street_line_2",M,ce,te),F("City",ee.subscriber_city,"subscriber_city",M,ce,te,null,"text",!0),F("State",ee.subscriber_state,"subscriber_state",M,ce,te,me.state||[],"text",!0),F("Zip Code",ee.subscriber_postal_code,"subscriber_postal_code",M,ce,te,null,"text",!0)]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"Subscriber Employer"}),F("Subscriber Employer (SE)",ee.subscriber_employer,"subscriber_employer",M,ce,te),F("SE Address",ee.subscriber_employer_street,"subscriber_employer_street",M,ce,te),F("SE Address Line 2",ee.subscriber_employer_street_line_2,"subscriber_employer_street_line_2",M,ce,te),F("SE City",ee.subscriber_employer_city,"subscriber_employer_city",M,ce,te),F("SE State",ee.subscriber_employer_state,"subscriber_employer_state",M,ce,te,me.state||[]),F("SE Zip Code",ee.subscriber_employer_postal_code,"subscriber_employer_postal_code",M,ce,te)]})]})})]},ee.id||`placeholder-${M}`)},P=q.employer||q.employer_street||q.employer_city||q.employer_state||q.employer_postal_code||q.employer_occupation,de=H?"Self-Pay (Client)":"Insurance",_e=!H||m;return x.useEffect(()=>{S&&o(!0),E&&p(!0)},[S,E]),e.jsxs("div",{className:"space-y-6",children:[se&&e.jsx("div",{className:"error-message",children:se}),e.jsx("div",{className:"card-main",children:e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"flex items-center justify-between py-3 px-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:"Payment Type:"}),e.jsx("div",{className:`text-lg font-bold ${H?"text-orange-600":"text-blue-600"}`,children:de})]}),H&&z&&z.length>0&&e.jsx("button",{onClick:()=>f(!m),className:"px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:m?"Hide Insurance Records":"Show Insurance Records"})]})})}),_e&&e.jsxs(e.Fragment,{children:[P&&e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Client Employer Information"}),e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"col-span-2 form-field",children:[e.jsx("div",{className:"form-field-label",children:"Employer Name"}),e.jsx("div",{className:"form-field-value",children:q.employer||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Start Date"}),e.jsx("div",{className:"form-field-value",children:q.employer_start_date?new Date(q.employer_start_date).toLocaleDateString():""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"End Date"}),e.jsx("div",{className:"form-field-value",children:q.employer_end_date?new Date(q.employer_end_date).toLocaleDateString():""})]}),e.jsxs("div",{className:"col-span-2 form-field",children:[e.jsx("div",{className:"form-field-label",children:"Address"}),e.jsxs("div",{className:"form-field-value",children:[q.employer_street||"",q.employer_street_line_2&&`, ${q.employer_street_line_2}`]})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"City"}),e.jsx("div",{className:"form-field-value",children:q.employer_city||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"State"}),e.jsx("div",{className:"form-field-value",children:q.employer_state||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Postal Code"}),e.jsx("div",{className:"form-field-value",children:q.employer_postal_code||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Country"}),e.jsx("div",{className:"form-field-value",children:q.employer_country||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Occupation"}),e.jsx("div",{className:"form-field-value",children:q.employer_occupation||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Industry"}),e.jsx("div",{className:"form-field-value",children:q.employer_industry||""})]})]})})]}),D&&he(D,"primary",!1,!0,null),S&&he(S,"secondary",!0,d,()=>o(!d)),E&&he(E,"tertiary",!0,u,()=>p(!u))]})]})}function Sf({encounterId:n,onClose:c}){const[d,o]=x.useState(!0),[u,p]=x.useState(null),[m,f]=x.useState(null),[b,v]=x.useState("notes");x.useEffect(()=>{n&&(async()=>{try{o(!0),f(null);const C=await Hp(n);p(C)}catch(C){console.error("Error fetching encounter detail:",C),f(C.message||"Failed to load encounter details")}finally{o(!1)}})()},[n]);const j=y=>y?new Date(y).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A",g=y=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(y||0);return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Encounter Details"}),u&&e.jsxs("p",{className:"text-blue-100 text-sm mt-1",children:[j(u.encounter.date),"  ",u.encounter.patient_name]})]}),e.jsx("button",{onClick:c,className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)]",children:d?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),e.jsx("p",{className:"text-gray-700 mt-4",children:"Loading encounter details..."})]}):m?e.jsx("div",{className:"p-12 text-center",children:e.jsxs("div",{className:"text-red-600 font-semibold",children:["Error: ",m]})}):u?e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"card-main mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Session Information"}),e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Date"}),e.jsx("div",{className:"form-field-value",children:j(u.encounter.date)})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Provider"}),e.jsx("div",{className:"form-field-value",children:u.encounter.provider_name||"N/A"})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Facility"}),e.jsx("div",{className:"form-field-value",children:u.encounter.facility_name||"N/A"})]}),e.jsxs("div",{className:"col-span-2 md:col-span-3 form-field",children:[e.jsx("div",{className:"form-field-label",children:"Reason for Visit"}),e.jsx("div",{className:"form-field-value",children:u.encounter.reason||"Not specified"})]}),u.encounter.encounter_type_description&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Encounter Type"}),e.jsx("div",{className:"form-field-value",children:u.encounter.encounter_type_description})]})]})})]}),e.jsxs("div",{className:"flex gap-2 mb-6 border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>v("notes"),className:`px-4 py-2 font-medium transition-colors border-b-2 ${b==="notes"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800"}`,children:["Clinical Notes (",u.forms.length,")"]}),e.jsxs("button",{onClick:()=>v("billing"),className:`px-4 py-2 font-medium transition-colors border-b-2 ${b==="billing"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800"}`,children:["Billing (",u.billing.length,")"]}),e.jsxs("button",{onClick:()=>v("vitals"),className:`px-4 py-2 font-medium transition-colors border-b-2 ${b==="vitals"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800"}`,children:["Vitals (",u.vitals.length,")"]}),e.jsxs("button",{onClick:()=>v("diagnoses"),className:`px-4 py-2 font-medium transition-colors border-b-2 ${b==="diagnoses"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800"}`,children:["Diagnoses (",u.diagnoses.length,")"]})]}),b==="notes"&&e.jsx("div",{className:"space-y-3",children:u.forms.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No clinical notes recorded"}):u.forms.map(y=>e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:y.form_name||y.formdir}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[j(y.date),"  ",y.user_name||"Unknown user"]})]}),y.authorized==="1"&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded",children:"Authorized"})]})},y.id))}),b==="billing"&&e.jsx("div",{className:"space-y-4",children:u.billing.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No billing charges recorded"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"Total Charges"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:g(u.total_charges)})]}),e.jsx("div",{className:"space-y-2",children:u.billing.map(y=>e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-gray-800",children:[y.code_type,": ",y.code]}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:y.code_text}),y.modifier&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Modifier: ",y.modifier]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsx("div",{className:"font-bold text-gray-800",children:g(y.fee*y.units)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[y.units," unit",y.units!=="1"?"s":"","  ",g(y.fee)]}),y.billed==="1"&&e.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-semibold rounded",children:"Billed"})]})]})},y.id))})]})}),b==="vitals"&&e.jsx("div",{className:"space-y-3",children:u.vitals.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No vitals recorded"}):u.vitals.map(y=>e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"col-span-2 md:col-span-4 form-field",children:[e.jsx("div",{className:"form-field-label",children:"Recorded"}),e.jsxs("div",{className:"form-field-value",children:[j(y.date),"  ",y.user_name||"Unknown user"]})]}),y.bps&&y.bpd&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Blood Pressure"}),e.jsxs("div",{className:"form-field-value",children:[y.bps,"/",y.bpd]})]}),y.pulse&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Pulse"}),e.jsxs("div",{className:"form-field-value",children:[y.pulse," bpm"]})]}),y.temperature&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Temperature"}),e.jsxs("div",{className:"form-field-value",children:[y.temperature,"F"]})]}),y.weight&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Weight"}),e.jsxs("div",{className:"form-field-value",children:[y.weight," lbs"]})]}),y.height&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Height"}),e.jsxs("div",{className:"form-field-value",children:[y.height," in"]})]}),y.BMI&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"BMI"}),e.jsx("div",{className:"form-field-value",children:y.BMI})]}),y.oxygen_saturation&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"O2 Saturation"}),e.jsxs("div",{className:"form-field-value",children:[y.oxygen_saturation,"%"]})]}),y.respiration&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Respiration"}),e.jsxs("div",{className:"form-field-value",children:[y.respiration," /min"]})]})]})},y.id))}),b==="diagnoses"&&e.jsx("div",{className:"space-y-3",children:u.diagnoses.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No diagnoses recorded for this encounter"}):u.diagnoses.map(y=>e.jsxs("div",{className:"card-inner",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:y.title}),y.diagnosis&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Code: ",y.diagnosis]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Started: ",j(y.begdate),y.enddate&&`  Ended: ${j(y.enddate)}`]}),y.outcome&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Outcome: ",y.outcome]})]},y.id))})]}):null}),e.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50 flex justify-end gap-3",children:e.jsx("button",{onClick:c,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg transition-colors font-medium",children:"Close"})})]})}):null}function Ib({data:n}){const[c,d]=x.useState("all"),[o,u]=x.useState("date-desc"),[p,m]=x.useState(null);if(!n)return e.jsx("div",{className:"empty-state",children:"Loading encounter history..."});const{encounters:f,patient:b}=n,v=y=>y?new Date(y).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A",j=x.useMemo(()=>{if(!f||f.length===0)return[];let y=[...f];const C=new Date;if(c==="recent"){const N=new Date(C.getTime()-2592e6);y=y.filter(_=>new Date(_.date)>=N)}else if(c==="past-year"){const N=new Date(C.getTime()-31536e6);y=y.filter(_=>new Date(_.date)>=N)}return o==="date-desc"?y.sort((N,_)=>new Date(_.date)-new Date(N.date)):o==="date-asc"?y.sort((N,_)=>new Date(N.date)-new Date(_.date)):o==="provider"&&y.sort((N,_)=>{const A=N.provider_name||"",k=_.provider_name||"";return A.localeCompare(k)}),y},[f,c,o]),g=x.useMemo(()=>{if(!f||f.length===0)return{total:0,lastVisit:null,avgPerMonth:0,thisYear:0};const y=new Date,C=new Date(y.getTime()-365*24*60*60*1e3),N=new Date(y.getFullYear(),0,1),_=f.map(I=>new Date(I.date)),A=_.length>0?new Date(Math.max(..._.map(I=>I.getTime()))):null,O=f.filter(I=>new Date(I.date)>=C).length/12,Y=f.filter(I=>new Date(I.date)>=N);return{total:f.length,lastVisit:A?v(A):"N/A",avgPerMonth:O.toFixed(1),thisYear:Y.length}},[f]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Visit Statistics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"stat-box",children:[e.jsx("div",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Total Visits"}),e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:g.total})]}),e.jsxs("div",{className:"stat-box",children:[e.jsx("div",{className:"text-caption text-gray-600 font-semibold mb-1",children:"This Year"}),e.jsx("div",{className:"text-3xl font-bold text-green-600",children:g.thisYear})]}),e.jsxs("div",{className:"stat-box",children:[e.jsx("div",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Avg/Month (Past Year)"}),e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:g.avgPerMonth})]}),e.jsxs("div",{className:"stat-box",children:[e.jsx("div",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Last Visit"}),e.jsx("div",{className:"text-lg font-bold text-gray-700",children:g.lastVisit})]})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"section-header",children:"Filter By"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>d("all"),className:`w-full text-left filter-btn-enhanced ${c==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Encounters"}),e.jsx("button",{onClick:()=>d("recent"),className:`w-full text-left filter-btn-enhanced ${c==="recent"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Last 30 Days"}),e.jsx("button",{onClick:()=>d("past-year"),className:`w-full text-left filter-btn-enhanced ${c==="past-year"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Past Year"})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"section-header",children:"Sort By"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>u("date-desc"),className:`w-full text-left filter-btn-enhanced ${o==="date-desc"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Newest First"}),e.jsx("button",{onClick:()=>u("date-asc"),className:`w-full text-left filter-btn-enhanced ${o==="date-asc"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Oldest First"}),e.jsx("button",{onClick:()=>u("provider"),className:`w-full text-left filter-btn-enhanced ${o==="provider"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"By Provider"})]})]})]}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"card-main",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Encounter History",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",j.length," ",j.length===1?"visit":"visits",")"]})]})}),j.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-gray-600 text-lg",children:"No encounters found"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:c!=="all"?"Try adjusting your filters":"No visit history recorded"})]}):e.jsx("div",{className:"space-y-3",children:j.map(y=>e.jsx("div",{className:"card-inner hover:bg-white/90 transition-colors cursor-pointer",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"text-lg font-bold text-gray-800",children:v(y.date)}),e.jsxs("span",{className:"badge-sm badge-light-info",children:["ID: ",y.encounter]})]}),y.reason&&e.jsx("div",{className:"text-gray-900 font-medium mb-2",children:y.reason}),e.jsxs("div",{className:"flex gap-6 text-sm text-gray-600",children:[y.provider_name&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Provider:"})," ",y.provider_name]}),y.facility_name&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Facility:"})," ",y.facility_name]})]})]}),e.jsx("button",{onClick:C=>{C.stopPropagation(),m(y.encounter)},className:"ml-4 btn-mini",children:"View Details"})]})},y.encounter))})]})})]}),p&&e.jsx(Sf,{encounterId:p,onClose:()=>m(null)})]})}function ev({patientId:n,onNoteClick:c,onCreateNote:d}){const[o,u]=x.useState([]),[p,m]=x.useState(!0),[f,b]=x.useState(null),[v,j]=x.useState({note_type:null,status:null,start_date:null,end_date:null});x.useEffect(()=>{g()},[n,v]);const g=async()=>{m(!0),b(null);try{const k=await qp(n,v);u(k.notes||[])}catch(k){console.error("Error loading notes:",k),b(k.message)}finally{m(!1)}},y=k=>{if(!k)return"N/A";const[O,Y,I]=k.split(/[-T]/);return new Date(O,Y-1,I).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},C=k=>k?new Date(k).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}):"N/A",N=k=>({progress:"",intake:"",crisis:"",discharge:"",mse:"",admin:"",noshow:"",cancel:""})[k]||"",_=k=>({progress:"Progress",intake:"Intake",crisis:"Crisis",discharge:"Discharge",mse:"Mental Status",admin:"Administrative",noshow:"No-Show",cancel:"Cancellation"})[k]||k,A=k=>k.is_locked||k.status==="signed"?e.jsx("span",{className:"badge-sm badge-light-success",children:"Signed"}):k.status==="draft"?e.jsx("span",{className:"badge-sm badge-light-warning",children:"Draft"}):k.supervisor_review_required&&k.supervisor_review_status==="pending"?e.jsx("span",{className:"badge-sm badge-light-info",children:"Pending Review"}):null;return p?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"text-gray-600",children:"Loading notes..."})}):f?e.jsxs("div",{className:"p-6 text-center",children:[e.jsxs("div",{className:"text-red-600 mb-4",children:["Error loading notes: ",f]}),e.jsx("button",{onClick:g,className:"px-6 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-semibold rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all shadow-lg",children:"Retry"})]}):e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-64 flex-shrink-0",children:e.jsxs("div",{className:"card-main sticky top-6",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Filter Notes"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 mb-2 block",children:"Note Type"}),e.jsxs("select",{value:v.note_type||"",onChange:k=>j({...v,note_type:k.target.value||null}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"progress",children:"Progress"}),e.jsx("option",{value:"intake",children:"Intake"}),e.jsx("option",{value:"crisis",children:"Crisis"}),e.jsx("option",{value:"discharge",children:"Discharge"}),e.jsx("option",{value:"mse",children:"Mental Status"}),e.jsx("option",{value:"admin",children:"Administrative"})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 mb-2 block",children:"Status"}),e.jsxs("select",{value:v.status||"",onChange:k=>j({...v,status:k.target.value||null}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"draft",children:"Drafts"}),e.jsx("option",{value:"signed",children:"Signed"})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 mb-2 block",children:"From Date"}),e.jsx("input",{type:"date",value:v.start_date||"",onChange:k=>j({...v,start_date:k.target.value||null}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 mb-2 block",children:"To Date"}),e.jsx("input",{type:"date",value:v.end_date||"",onChange:k=>j({...v,end_date:k.target.value||null}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white"})]})})]})]})}),e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Clinical Notes",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",o.length," ",o.length===1?"note":"notes",")"]})]}),d&&e.jsx("button",{onClick:d,className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all shadow-lg",children:"+ New Note"})]}),o.length===0?e.jsxs("div",{className:"card-main text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-lg text-gray-600 mb-2",children:"No clinical notes found"}),e.jsx("p",{className:"text-sm text-gray-500",children:v.note_type||v.status?"Try adjusting your filters":"Create your first note to get started"})]}):e.jsx("div",{className:"space-y-3",children:o.map(k=>{const O=k.status==="draft";return e.jsx("div",{onClick:()=>c&&c(k.id,O,k.note_type),className:"card-main hover:shadow-2xl hover:scale-[1.01] hover:border-blue-400 cursor-pointer transition-all duration-200",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:N(k.note_type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[_(k.note_type)," Note"]}),A(k),k.is_addendum&&e.jsx("span",{className:"badge-sm badge-light-info",children:"Addendum"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Service Date: ",y(k.service_date),"  ",k.provider_name||"Unknown provider"]})]})]}),k.behavior_problem&&e.jsxs("div",{className:"text-sm text-gray-700 line-clamp-2 mt-2",children:[k.behavior_problem.substring(0,150),"..."]}),e.jsxs("div",{className:"flex gap-4 text-xs text-gray-500 mt-2",children:[e.jsxs("span",{children:["Created: ",C(k.created_at)]}),k.signed_at&&e.jsxs("span",{children:["Signed: ",C(k.signed_at)]}),k.addenda&&k.addenda.length>0&&e.jsxs("span",{className:"text-blue-600 font-medium",children:[k.addenda.length," ",k.addenda.length===1?"addendum":"addenda"]})]})]}),e.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm font-semibold rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all shadow-md",children:O?"Edit":"View"})]})},k.id)})})]})]})}function tv({onSelect:n,preselected:c=null,appointment:d=null}){const o=[{id:"intake",label:"Intake Assessment",description:"First session with client",icon:"",row:1,cols:3},{id:"diagnosis",label:"Diagnosis Note",description:"ICD-10 diagnosis assessment and documentation",icon:"",row:1,cols:3},{id:"treatment_plan",label:"Treatment Plan",description:"Goals, objectives, interventions",icon:"",row:1,cols:3},{id:"progress",label:"Progress Note",description:"Regular therapy session",icon:"",row:1,cols:3},{id:"mse",label:"Mental Status Exam",description:"Standalone MSE assessment",icon:"",row:2,cols:6},{id:"discharge",label:"Discharge Summary",description:"Final session, treatment conclusion",icon:"",row:2,cols:6},{id:"crisis",label:"Crisis Note",description:"Emergency or high-risk session",icon:"",row:3,cols:6},{id:"risk_assessment",label:"Risk Assessment",description:"SI/HI safety evaluation",icon:"",row:3,cols:6},{id:"appointment_status",label:"Appointment Status",description:"No show, late cancel, cancellation",icon:"",row:4,cols:6,quick:!0},{id:"client_communication",label:"Client Communication",description:"Phone calls, emails, client contact",icon:"",row:4,cols:6,quick:!0}],p=c||"progress",m=g=>{n(g)},f=o.filter(g=>g.row===1),b=o.filter(g=>g.row===2),v=o.filter(g=>g.row===3),j=o.filter(g=>g.row===4);return e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"What kind of note are you writing?"}),e.jsx("p",{className:"text-gray-600",children:"Select the type of clinical documentation"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Clinical Notes"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:f.map(g=>e.jsx("button",{onClick:()=>m(g.id),className:`card-main text-left p-4 hover:bg-blue-50 hover:border-blue-300 transition-all ${p===g.id?"ring-2 ring-blue-500 bg-blue-50":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:g.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-base font-semibold text-gray-800 mb-1",children:[g.label,g.suggested&&e.jsx("span",{className:"ml-2 badge-sm badge-light-success",children:"Suggested"})]}),e.jsx("div",{className:"text-xs text-gray-600",children:g.description})]})]})},g.id))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:b.map(g=>e.jsx("button",{onClick:()=>m(g.id),className:"card-main text-left p-4 hover:bg-blue-50 hover:border-blue-300 transition-all",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:g.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-base font-semibold text-gray-800 mb-1",children:g.label}),e.jsx("div",{className:"text-xs text-gray-600",children:g.description})]})]})},g.id))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:v.map(g=>e.jsx("button",{onClick:()=>m(g.id),className:"card-main text-left p-4 hover:bg-orange-50 hover:border-orange-300 transition-all",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:g.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-base font-semibold text-gray-800 mb-1",children:g.label}),e.jsx("div",{className:"text-xs text-gray-600",children:g.description})]})]})},g.id))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:j.map(g=>e.jsx("button",{onClick:()=>m(g.id),className:"card-main text-left p-4 hover:bg-gray-50 hover:border-gray-400 transition-all",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:g.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-base font-semibold text-gray-800 mb-1",children:g.label}),e.jsx("div",{className:"text-xs text-gray-600",children:g.description}),g.quick&&e.jsx("div",{className:"mt-1 text-xs text-blue-600 font-medium",children:" Quick note"})]})]})},g.id))})]})]})}function av({data:n}){const[c,d]=x.useState("list"),[o,u]=x.useState(null),[p,m]=x.useState(null),f=()=>{d("selectType"),m(null)},b=C=>{m(C),d("create")},v=(C,N,_)=>{u(C),m(_),d(N?"edit":"view")},j=C=>{u(C),d("edit")},g=()=>{d("list"),u(null),m(null)},y=()=>{d("list"),u(null),m(null)};return c==="selectType"?e.jsx(tv,{onSelect:b,patientId:n?.patient?.pid}):c==="create"?e.jsx(Yi,{patientId:n?.patient?.pid,noteType:p,onSave:g,onClose:y}):c==="edit"?e.jsx(Yi,{noteId:o,patientId:n?.patient?.pid,noteType:p,onSave:g,onClose:y}):c==="view"?e.jsx(wf,{noteId:o,onClose:y,onEdit:j}):e.jsx(ev,{patientId:n?.patient?.pid,onNoteClick:v,onCreateNote:f})}function sv({data:n}){const[c,d]=x.useState(null),[o,u]=x.useState(!0),[p,m]=x.useState(null),[f,b]=x.useState("all"),[v,j]=x.useState(null);x.useEffect(()=>{(async()=>{if(n?.patient?.pid)try{u(!0),m(null);const _=await Zp(n.patient.pid);d(_)}catch(_){console.error("Error fetching billing:",_),m(_.message||"Failed to load billing information")}finally{u(!1)}})()},[n]);const g=N=>N?new Date(N).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A",y=N=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(N||0),C=x.useMemo(()=>{if(!c?.charges)return[];let N=[...c.charges];return f==="billed"?N=N.filter(_=>_.billed==="1"):f==="unbilled"&&(N=N.filter(_=>_.billed!=="1")),N},[c,f]);return o?e.jsx("div",{className:"text-gray-700 text-center py-8",children:"Loading billing information..."}):p?e.jsxs("div",{className:"text-red-600 text-center py-8",children:["Error: ",p]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Financial Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"stat-box stat-box-blue",children:[e.jsx("div",{className:"text-gray-600 text-xs font-semibold mb-1",children:"Total Charges"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:y(c?.summary?.total_charges||0)})]}),e.jsxs("div",{className:"stat-box stat-box-green",children:[e.jsx("div",{className:"text-gray-600 text-xs font-semibold mb-1",children:"Total Payments"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:y(c?.summary?.total_payments||0)})]}),e.jsxs("div",{className:`stat-box ${(c?.summary?.balance||0)>0?"stat-box-red":"stat-box"}`,children:[e.jsx("div",{className:"text-gray-600 text-xs font-semibold mb-1",children:"Balance Due"}),e.jsx("div",{className:`text-2xl font-bold ${(c?.summary?.balance||0)>0?"text-red-600":"text-gray-600"}`,children:y(c?.summary?.balance||0)})]})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"section-header",children:"Filter By"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>b("all"),className:`w-full text-left filter-btn-enhanced ${f==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Charges"}),e.jsx("button",{onClick:()=>b("unbilled"),className:`w-full text-left filter-btn-enhanced ${f==="unbilled"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Unbilled"}),e.jsx("button",{onClick:()=>b("billed"),className:`w-full text-left filter-btn-enhanced ${f==="billed"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Billed"})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Recent Payments"}),c?.payments&&c.payments.length>0?e.jsx("div",{className:"space-y-2",children:c.payments.slice(0,5).map(N=>e.jsxs("div",{className:"stat-box",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:y(N.pay_amount)}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:g(N.dtime)}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:N.method||"Payment"})]},N.session_id))}):e.jsx("div",{className:"text-sm text-gray-500",children:"No payments recorded"})]})]}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"card-main",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Billing Charges",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",C.length," ",C.length===1?"charge":"charges",")"]})]})}),C.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 14l6-6m-5.5.5h.01m4.99 5h.01M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16l3.5-2 3.5 2 3.5-2 3.5 2zM10 8.5a.5.5 0 11-1 0 .5.5 0 011 0zm5 5a.5.5 0 11-1 0 .5.5 0 011 0z"})}),e.jsx("p",{className:"text-gray-600 text-lg",children:"No charges found"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:f!=="all"?"Try adjusting your filters":"No billing charges recorded"})]}):e.jsx("div",{className:"space-y-3",children:C.map(N=>e.jsx("div",{className:"card-inner hover:bg-white/90 transition-colors cursor-pointer",onClick:()=>j(N.encounter),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("div",{className:"font-bold text-gray-800",children:[N.code_type,": ",N.code]}),N.billed==="1"?e.jsx("span",{className:"badge-sm badge-light-success",children:"Billed"}):e.jsx("span",{className:"badge-sm badge-light-warning",children:"Unbilled"}),N.authorized==="1"&&e.jsx("span",{className:"badge-sm badge-light-info",children:"Authorized"})]}),e.jsx("div",{className:"text-sm text-gray-700 mb-2",children:N.code_text}),N.encounter_reason&&e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("span",{className:"font-semibold",children:"Encounter:"})," ",N.encounter_reason]}),e.jsxs("div",{className:"flex gap-6 text-xs text-gray-500",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Date:"})," ",g(N.encounter_date)]}),N.provider_name&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Provider:"})," ",N.provider_name]}),N.facility_name&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Facility:"})," ",N.facility_name]}),N.modifier&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Modifier:"})," ",N.modifier]})]})]}),e.jsxs("div",{className:"ml-4 text-right",children:[e.jsx("div",{className:"font-bold text-gray-800 text-lg",children:y(parseFloat(N.fee)*parseFloat(N.units))}),e.jsxs("div",{className:"text-xs text-gray-500",children:[N.units," unit",N.units!=="1"?"s":"","  ",y(N.fee)]}),e.jsx("button",{className:"mt-2 btn-mini",children:"View Encounter"})]})]})},N.id))})]})})]}),v&&e.jsx(Sf,{encounterId:v,onClose:()=>j(null)})]})}function lv({data:n}){const[c,d]=x.useState([]),[o,u]=x.useState([]),[p,m]=x.useState([]),[f,b]=x.useState({}),[v,j]=x.useState(!0),[g,y]=x.useState(null),[C,N]=x.useState(!1),[_,A]=x.useState(!1),[k,O]=x.useState(null),[Y,I]=x.useState(null),[$,se]=x.useState({name:"",category_id:""}),V=n?.patient?.pid;x.useEffect(()=>{V&&(X(),xe())},[V]);const X=async()=>{try{j(!0);const L=await fetch(`/custom/api/client_documents.php?id=${V}`,{credentials:"include"});if(!L.ok)throw new Error("Failed to fetch documents");const W=await L.json();d(W.documents||[]),u(W.categories||[]);const F={};W.categories?.forEach(he=>{F[he.id]=!0}),b(F)}catch(L){console.error("Error fetching documents:",L),y(L.message)}finally{j(!1)}},xe=async()=>{try{const L=await fetch("/custom/api/client_documents.php?action=categories",{credentials:"include"});if(!L.ok)throw new Error("Failed to fetch categories");const W=await L.json();m(W.categories||[])}catch(L){console.error("Error fetching categories:",L)}},me=L=>{b(W=>({...W,[L]:!W[L]}))},fe=L=>{const W=L.target.files[0];W&&(I(W),$.name||se(F=>({...F,name:W.name})))},q=(L,W)=>{se(F=>({...F,[L]:W}))},z=()=>{N(!0),O(null),I(null),se({name:"",category_id:""})},H=()=>{N(!1),O(null),I(null),se({name:"",category_id:""})},D=async()=>{if(!Y){O("Please select a file to upload");return}try{A(!0),O(null);const L=new FormData;L.append("file",Y),L.append("patient_id",V),L.append("name",$.name||Y.name),$.category_id&&L.append("category_id",$.category_id);const W=await fetch("/custom/api/client_documents.php",{method:"POST",credentials:"include",body:L}),F=await W.json();if(!W.ok)throw new Error(F.error||"Failed to upload document");await X(),H()}catch(L){console.error("Error uploading document:",L),O(L.message)}finally{A(!1)}},S=L=>L?L.includes("pdf")?"":L.includes("image")?"":L.includes("word")||L.includes("document")?"":L.includes("excel")||L.includes("spreadsheet")?"":"":"",E=L=>{if(!L)return"";const W=L/1024;return W<1024?`${W.toFixed(1)} KB`:`${(W/1024).toFixed(1)} MB`},U=L=>{if(L.name)return L.name;if(!L.url)return"Untitled Document";const F=L.url.replace(/^file:\/\//,"").split("/");return F[F.length-1]||"Untitled Document"},ne=L=>{L.file_path?window.open(L.file_path,"_blank"):console.error("Document file path not available")},pe=L=>{const W=`/custom/api/client_documents.php?action=download&document_id=${L.id}`;window.open(W,"_blank")},T={};return c.forEach(L=>{const W=L.category_id||"uncategorized";T[W]||(T[W]=[]),T[W].push(L)}),v?e.jsx("div",{className:"card-main",children:e.jsx("div",{className:"card-inner text-center py-8",children:e.jsx("div",{className:"text-gray-700",children:"Loading documents..."})})}):g?e.jsx("div",{className:"card-main",children:e.jsx("div",{className:"card-inner text-center py-8",children:e.jsxs("div",{className:"text-red-600",children:["Error loading documents: ",g]})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:z,className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:" Upload Document"})}),c.length===0&&e.jsx("div",{className:"card-main",children:e.jsx("div",{className:"card-inner text-center py-8",children:e.jsx("div",{className:"text-gray-500",children:"No documents on file"})})}),o.map(L=>{const W=T[L.id]||[],F=f[L.id];return W.length===0?null:e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer",onClick:()=>me(L.id),children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:[L.name," (",W.length,")"]}),e.jsx("button",{className:"text-gray-600 hover:text-gray-800 transition-colors",children:F?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),F&&e.jsx("div",{className:"card-inner",children:e.jsx("div",{className:"space-y-3",children:W.map(he=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("span",{className:"text-2xl",children:S(he.mimetype)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U(he)}),e.jsxs("div",{className:"text-sm text-gray-500",children:[he.date&&new Date(he.date).toLocaleDateString(),"  ",E(he.size)]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ne(he),className:"px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"View"}),e.jsx("button",{onClick:()=>pe(he),className:"px-3 py-1.5 text-sm font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:"Download"})]})]},he.id))})})]},L.id)}),T.uncategorized&&T.uncategorized.length>0&&e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer",onClick:()=>me("uncategorized"),children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Uncategorized (",T.uncategorized.length,")"]}),e.jsx("button",{className:"text-gray-600 hover:text-gray-800 transition-colors",children:f.uncategorized?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),f.uncategorized&&e.jsx("div",{className:"card-inner",children:e.jsx("div",{className:"space-y-3",children:T.uncategorized.map(L=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("span",{className:"text-2xl",children:S(L.mimetype)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U(L)}),e.jsxs("div",{className:"text-sm text-gray-500",children:[L.date&&new Date(L.date).toLocaleDateString(),"  ",E(L.size)]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ne(L),className:"px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"View"}),e.jsx("button",{onClick:()=>pe(L),className:"px-3 py-1.5 text-sm font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:"Download"})]})]},L.id))})})]}),C&&Tt.createPortal(e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container max-w-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Upload Document"}),e.jsx("button",{onClick:H,disabled:_,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"modal-body",children:[k&&e.jsx("div",{className:"error-message mb-4",children:k}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(Ye,{children:["Select File ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"file",onChange:fe,className:"input-field"}),Y&&e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",Y.name," (",(Y.size/1024).toFixed(1)," KB)"]})]}),e.jsxs("div",{children:[e.jsx(Ye,{children:"Document Name"}),e.jsx("input",{type:"text",value:$.name,onChange:L=>q("name",L.target.value),placeholder:"Enter document name",className:"input-field"}),e.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Leave blank to use filename"})]}),e.jsxs("div",{children:[e.jsx(Ye,{children:"Category (Optional)"}),e.jsxs("select",{value:$.category_id,onChange:L=>q("category_id",L.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"Select a category..."}),p.map(L=>e.jsx("option",{value:L.id,children:L.name},L.id))]})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-4",children:[e.jsx("span",{className:"text-red-600",children:"*"})," Required"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{onClick:H,disabled:_,className:"btn-action btn-cancel",children:"Cancel"}),e.jsx("button",{onClick:D,disabled:_||!Y,className:"btn-action btn-primary",children:_?"Uploading...":"Upload"})]})]})}),document.body)]})}function nv({tabName:n}){return e.jsxs("div",{className:"card-main text-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:[n," Coming Soon"]}),e.jsx("p",{className:"text-gray-600",children:"This feature is under development and will be available in a future update."})]})}function iv(){const{id:n}=E0(),{user:c,loading:d}=Ao(),[o,u]=x.useState(null),[p,m]=x.useState("summary"),[f,b]=x.useState("clients"),[v,j]=x.useState(!0),[g,y]=x.useState(null),C=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),N=async()=>{await bf()},_=async()=>{try{j(!0),y(null),console.log("Fetching client data for ID:",n);const k=await of(n);console.log("Client data received:",k),u(k)}catch(k){console.error("Error fetching client data:",k),y(k.message||"Failed to load client data")}finally{j(!1)}};x.useEffect(()=>{n&&_()},[n]);const A=()=>{if(v)return e.jsx("div",{className:"card-main p-12 text-center",children:e.jsx("div",{className:"text-gray-700",children:"Loading client data..."})});if(g)return e.jsx("div",{className:"card-main p-12 text-center",children:e.jsxs("div",{className:"text-red-600 font-semibold",children:["Error: ",g]})});switch(p){case"summary":return e.jsx(Db,{data:o});case"demographics":return e.jsx(Tb,{data:o,onDataUpdate:_});case"insurance":return e.jsx(Wb,{data:o});case"encounters":return e.jsx(Ib,{data:o});case"clinical":return e.jsx(av,{data:o});case"documents":return e.jsx(lv,{data:o});case"billing":return e.jsx(sv,{data:o});case"admin":return e.jsx(Kb,{data:o});default:return e.jsx(nv,{tabName:"This Tab"})}};return d||!c?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-mental",children:e.jsxs("div",{className:"backdrop-blur-2xl bg-white/90 rounded-3xl shadow-2xl p-8 border border-white/50",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto"}),e.jsx("p",{className:"text-label mt-4 text-center",children:"Loading..."})]})}):e.jsxs(nf,{user:c,activeNav:f,setActiveNav:b,today:C,onLogout:N,children:[e.jsx(kb,{client:o?.patient}),e.jsx(Eb,{activeTab:p,onTabChange:m}),A()]})}function rv(){const[n,c]=x.useState(null),[d,o]=x.useState("replace_all"),[u,p]=x.useState(!1),[m,f]=x.useState(null),[b,v]=x.useState(null),[j,g]=x.useState(null),y=N=>{const _=N.target.files[0];_&&(c(_),v(null),g(null))},C=async()=>{if(!n){v("Please select a file first");return}p(!0),v(null),f("Uploading file...");try{const N=new FormData;N.append("icd10_file",n),N.append("action",d);const _=await fetch("/custom/api/import_icd10_codes.php",{method:"POST",body:N,credentials:"include"}),A=await _.json();if(!_.ok)throw new Error(A.message||A.error||"Import failed");f(null),g(A),c(null),document.getElementById("file-input").value=""}catch(N){console.error("Import error:",N),v(N.message||"Import failed. Please try again."),f(null)}finally{p(!1)}};return e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:" ICD-10 Code Import"}),e.jsx("p",{className:"text-gray-600",children:"Import ICD-10-CM diagnosis codes from CMS (Centers for Medicare & Medicaid Services)"})]}),e.jsxs("div",{className:"card-main mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:" Instructions"}),e.jsxs("div",{className:"card-inner space-y-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"1. Download ICD-10-CM File"}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["Visit: ",e.jsx("a",{href:"https://www.cms.gov/medicare/coding-billing/icd-10-codes",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"https://www.cms.gov/medicare/coding-billing/icd-10-codes"})]}),e.jsx("p",{className:"text-gray-600",children:"Download the current year's ICD-10-CM Code Descriptions (tab-delimited text file)"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"2. Select Import Action"}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("strong",{children:"Replace All:"})," Deletes existing codes and imports fresh (recommended for annual updates)",e.jsx("br",{}),e.jsx("strong",{children:"Update Only:"})," Updates existing codes and adds new ones (preserves custom codes)"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"3. Upload File"}),e.jsx("p",{className:"text-gray-600",children:'Select the downloaded file and click "Import Codes". This may take 1-2 minutes to process ~72,000 codes.'})]})]})]}),e.jsxs("div",{className:"card-main mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Import Settings"}),e.jsxs("div",{className:"card-inner space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Import Action"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 border-2 border-gray-300 rounded-lg cursor-pointer hover:bg-blue-50 hover:border-blue-300 transition-colors",children:[e.jsx("input",{type:"radio",name:"action",value:"replace_all",checked:d==="replace_all",onChange:N=>o(N.target.value),disabled:u,className:"w-4 h-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Replace All Codes"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Deletes all existing ICD-10 codes and imports fresh (recommended)"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 border-2 border-gray-300 rounded-lg cursor-pointer hover:bg-blue-50 hover:border-blue-300 transition-colors",children:[e.jsx("input",{type:"radio",name:"action",value:"update_only",checked:d==="update_only",onChange:N=>o(N.target.value),disabled:u,className:"w-4 h-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Update Only"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Updates existing codes and adds new ones (preserves custom codes)"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select ICD-10-CM File"}),e.jsx("input",{id:"file-input",type:"file",accept:".txt,.csv,.tsv",onChange:y,disabled:u,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm disabled:bg-gray-100 disabled:cursor-not-allowed"}),n&&e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",e.jsx("span",{className:"font-semibold",children:n.name})," (",(n.size/1024/1024).toFixed(2)," MB)"]})]}),e.jsx("button",{onClick:C,disabled:!n||u,className:"w-full px-6 py-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-blue-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all shadow-lg text-lg",children:u?e.jsxs("span",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"}),"Importing Codes..."]}):" Import ICD-10 Codes"})]})]}),m&&e.jsx("div",{className:"card-main mb-6 bg-blue-50 border-blue-300",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-blue-600 border-t-transparent rounded-full"}),e.jsx("span",{className:"text-blue-900 font-semibold",children:m})]})}),b&&e.jsx("div",{className:"card-main mb-6 bg-red-50 border-red-300",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-900 mb-1",children:"Import Failed"}),e.jsx("p",{className:"text-red-800",children:b})]})]})}),j&&e.jsxs("div",{className:"card-main bg-green-50 border-green-300",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("span",{className:"text-3xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-green-900 mb-1",children:"Import Successful!"}),e.jsx("p",{className:"text-green-800",children:j.message})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-2xl font-bold text-green-700",children:j.imported.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"Imported"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:j.total_active.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Active"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:j.skipped.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"Skipped"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-2xl font-bold text-red-700",children:j.errors.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"Errors"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-white rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:" Next Steps:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-700 space-y-1",children:[e.jsx("li",{children:"ICD-10 codes are now available for diagnosis notes"}),e.jsx("li",{children:"Test by creating a diagnosis note and searching for codes"}),e.jsx("li",{children:"Codes update annually on October 1st - re-import then"})]})]})]}),e.jsx("div",{className:"card-main bg-yellow-50 border-yellow-300 mt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:"Important Notes"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-yellow-800 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"File Size:"})," ICD-10 files are typically 10-15 MB with ~72,000 codes"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Import Time:"})," Expect 1-2 minutes to process all codes"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Backup:"}),' If using "Replace All", existing custom codes will be deleted']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Annual Updates:"})," ICD-10 codes are updated every October 1st"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Admin Only:"})," This function requires admin privileges"]})]})]})]})})]})}function cv(){return e.jsx(fp,{children:e.jsxs(X0,{children:[e.jsx(gl,{path:"/",element:e.jsx(_p,{})}),e.jsx(gl,{path:"/dashboard",element:e.jsx(Cb,{})}),e.jsx(gl,{path:"/clients/:id",element:e.jsx(iv,{})}),e.jsx(gl,{path:"/admin/icd10-import",element:e.jsx(rv,{})}),e.jsx(gl,{path:"*",element:e.jsx(F0,{to:"/",replace:!0})})]})})}$g.createRoot(document.getElementById("root")).render(e.jsx(cv,{}));
