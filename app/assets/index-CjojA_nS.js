(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const p of u)if(p.type==="childList")for(const m of p.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function d(u){const p={};return u.integrity&&(p.integrity=u.integrity),u.referrerPolicy&&(p.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?p.credentials="include":u.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function o(u){if(u.ep)return;u.ep=!0;const p=d(u);fetch(u.href,p)}})();function Bg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var io={exports:{}},fn={};var wh;function Hg(){if(wh)return fn;wh=1;var n=Symbol.for("react.transitional.element"),c=Symbol.for("react.fragment");function d(o,u,p){var m=null;if(p!==void 0&&(m=""+p),u.key!==void 0&&(m=""+u.key),"key"in u){p={};for(var f in u)f!=="key"&&(p[f]=u[f])}else p=u;return u=p.ref,{$$typeof:n,type:o,key:m,ref:u!==void 0?u:null,props:p}}return fn.Fragment=c,fn.jsx=d,fn.jsxs=d,fn}var Sh;function qg(){return Sh||(Sh=1,io.exports=Hg()),io.exports}var e=qg(),ro={exports:{}},_e={};var _h;function Yg(){if(_h)return _e;_h=1;var n=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),p=Symbol.for("react.consumer"),m=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),y=Symbol.iterator;function C(T){return T===null||typeof T!="object"?null:(T=y&&T[y]||T["@@iterator"],typeof T=="function"?T:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,A={};function E(T,L,W){this.props=T,this.context=L,this.refs=A,this.updater=W||N}E.prototype.isReactComponent={},E.prototype.setState=function(T,L){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,L,"setState")},E.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function O(){}O.prototype=E.prototype;function Y(T,L,W){this.props=T,this.context=L,this.refs=A,this.updater=W||N}var I=Y.prototype=new O;I.constructor=Y,_(I,E.prototype),I.isPureReactComponent=!0;var $=Array.isArray;function le(){}var V={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function ge(T,L,W){var F=W.ref;return{$$typeof:n,type:T,key:L,ref:F!==void 0?F:null,props:W}}function he(T,L){return ge(T.type,L,T.props)}function xe(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}function q(T){var L={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(W){return L[W]})}var z=/\/+/g;function H(T,L){return typeof T=="object"&&T!==null&&T.key!=null?q(""+T.key):L.toString(36)}function D(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(le,le):(T.status="pending",T.then(function(L){T.status==="pending"&&(T.status="fulfilled",T.value=L)},function(L){T.status==="pending"&&(T.status="rejected",T.reason=L)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function S(T,L,W,F,fe){var P=typeof T;(P==="undefined"||P==="boolean")&&(T=null);var ue=!1;if(T===null)ue=!0;else switch(P){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(T.$$typeof){case n:case c:ue=!0;break;case j:return ue=T._init,S(ue(T._payload),L,W,F,fe)}}if(ue)return fe=fe(T),ue=F===""?"."+H(T,0):F,$(fe)?(W="",ue!=null&&(W=ue.replace(z,"$&/")+"/"),S(fe,L,W,"",function(M){return M})):fe!=null&&(xe(fe)&&(fe=he(fe,W+(fe.key==null||T&&T.key===fe.key?"":(""+fe.key).replace(z,"$&/")+"/")+ue)),L.push(fe)),1;ue=0;var Ce=F===""?".":F+":";if($(T))for(var ee=0;ee<T.length;ee++)F=T[ee],P=Ce+H(F,ee),ue+=S(F,L,W,P,fe);else if(ee=C(T),typeof ee=="function")for(T=ee.call(T),ee=0;!(F=T.next()).done;)F=F.value,P=Ce+H(F,ee++),ue+=S(F,L,W,P,fe);else if(P==="object"){if(typeof T.then=="function")return S(D(T),L,W,F,fe);throw L=String(T),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return ue}function k(T,L,W){if(T==null)return T;var F=[],fe=0;return S(T,F,"","",function(P){return L.call(W,P,fe++)}),F}function U(T){if(T._status===-1){var L=T._result;L=L(),L.then(function(W){(T._status===0||T._status===-1)&&(T._status=1,T._result=W)},function(W){(T._status===0||T._status===-1)&&(T._status=2,T._result=W)}),T._status===-1&&(T._status=0,T._result=L)}if(T._status===1)return T._result.default;throw T._result}var ie=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},be={map:k,forEach:function(T,L,W){k(T,function(){L.apply(this,arguments)},W)},count:function(T){var L=0;return k(T,function(){L++}),L},toArray:function(T){return k(T,function(L){return L})||[]},only:function(T){if(!xe(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return _e.Activity=x,_e.Children=be,_e.Component=E,_e.Fragment=d,_e.Profiler=u,_e.PureComponent=Y,_e.StrictMode=o,_e.Suspense=b,_e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,_e.__COMPILER_RUNTIME={__proto__:null,c:function(T){return V.H.useMemoCache(T)}},_e.cache=function(T){return function(){return T.apply(null,arguments)}},_e.cacheSignal=function(){return null},_e.cloneElement=function(T,L,W){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var F=_({},T.props),fe=T.key;if(L!=null)for(P in L.key!==void 0&&(fe=""+L.key),L)!X.call(L,P)||P==="key"||P==="__self"||P==="__source"||P==="ref"&&L.ref===void 0||(F[P]=L[P]);var P=arguments.length-2;if(P===1)F.children=W;else if(1<P){for(var ue=Array(P),Ce=0;Ce<P;Ce++)ue[Ce]=arguments[Ce+2];F.children=ue}return ge(T.type,fe,F)},_e.createContext=function(T){return T={$$typeof:m,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:p,_context:T},T},_e.createElement=function(T,L,W){var F,fe={},P=null;if(L!=null)for(F in L.key!==void 0&&(P=""+L.key),L)X.call(L,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(fe[F]=L[F]);var ue=arguments.length-2;if(ue===1)fe.children=W;else if(1<ue){for(var Ce=Array(ue),ee=0;ee<ue;ee++)Ce[ee]=arguments[ee+2];fe.children=Ce}if(T&&T.defaultProps)for(F in ue=T.defaultProps,ue)fe[F]===void 0&&(fe[F]=ue[F]);return ge(T,P,fe)},_e.createRef=function(){return{current:null}},_e.forwardRef=function(T){return{$$typeof:f,render:T}},_e.isValidElement=xe,_e.lazy=function(T){return{$$typeof:j,_payload:{_status:-1,_result:T},_init:U}},_e.memo=function(T,L){return{$$typeof:v,type:T,compare:L===void 0?null:L}},_e.startTransition=function(T){var L=V.T,W={};V.T=W;try{var F=T(),fe=V.S;fe!==null&&fe(W,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then(le,ie)}catch(P){ie(P)}finally{L!==null&&W.types!==null&&(L.types=W.types),V.T=L}},_e.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},_e.use=function(T){return V.H.use(T)},_e.useActionState=function(T,L,W){return V.H.useActionState(T,L,W)},_e.useCallback=function(T,L){return V.H.useCallback(T,L)},_e.useContext=function(T){return V.H.useContext(T)},_e.useDebugValue=function(){},_e.useDeferredValue=function(T,L){return V.H.useDeferredValue(T,L)},_e.useEffect=function(T,L){return V.H.useEffect(T,L)},_e.useEffectEvent=function(T){return V.H.useEffectEvent(T)},_e.useId=function(){return V.H.useId()},_e.useImperativeHandle=function(T,L,W){return V.H.useImperativeHandle(T,L,W)},_e.useInsertionEffect=function(T,L){return V.H.useInsertionEffect(T,L)},_e.useLayoutEffect=function(T,L){return V.H.useLayoutEffect(T,L)},_e.useMemo=function(T,L){return V.H.useMemo(T,L)},_e.useOptimistic=function(T,L){return V.H.useOptimistic(T,L)},_e.useReducer=function(T,L,W){return V.H.useReducer(T,L,W)},_e.useRef=function(T){return V.H.useRef(T)},_e.useState=function(T){return V.H.useState(T)},_e.useSyncExternalStore=function(T,L,W){return V.H.useSyncExternalStore(T,L,W)},_e.useTransition=function(){return V.H.useTransition()},_e.version="19.2.3",_e}var Ch;function jo(){return Ch||(Ch=1,ro.exports=Yg()),ro.exports}var g=jo(),co={exports:{}},xn={},oo={exports:{}},uo={};var Eh;function Fg(){return Eh||(Eh=1,(function(n){function c(S,k){var U=S.length;S.push(k);e:for(;0<U;){var ie=U-1>>>1,be=S[ie];if(0<u(be,k))S[ie]=k,S[U]=be,U=ie;else break e}}function d(S){return S.length===0?null:S[0]}function o(S){if(S.length===0)return null;var k=S[0],U=S.pop();if(U!==k){S[0]=U;e:for(var ie=0,be=S.length,T=be>>>1;ie<T;){var L=2*(ie+1)-1,W=S[L],F=L+1,fe=S[F];if(0>u(W,U))F<be&&0>u(fe,W)?(S[ie]=fe,S[F]=U,ie=F):(S[ie]=W,S[L]=U,ie=L);else if(F<be&&0>u(fe,U))S[ie]=fe,S[F]=U,ie=F;else break e}}return k}function u(S,k){var U=S.sortIndex-k.sortIndex;return U!==0?U:S.id-k.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var p=performance;n.unstable_now=function(){return p.now()}}else{var m=Date,f=m.now();n.unstable_now=function(){return m.now()-f}}var b=[],v=[],j=1,x=null,y=3,C=!1,N=!1,_=!1,A=!1,E=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function I(S){for(var k=d(v);k!==null;){if(k.callback===null)o(v);else if(k.startTime<=S)o(v),k.sortIndex=k.expirationTime,c(b,k);else break;k=d(v)}}function $(S){if(_=!1,I(S),!N)if(d(b)!==null)N=!0,le||(le=!0,q());else{var k=d(v);k!==null&&D($,k.startTime-S)}}var le=!1,V=-1,X=5,ge=-1;function he(){return A?!0:!(n.unstable_now()-ge<X)}function xe(){if(A=!1,le){var S=n.unstable_now();ge=S;var k=!0;try{e:{N=!1,_&&(_=!1,O(V),V=-1),C=!0;var U=y;try{t:{for(I(S),x=d(b);x!==null&&!(x.expirationTime>S&&he());){var ie=x.callback;if(typeof ie=="function"){x.callback=null,y=x.priorityLevel;var be=ie(x.expirationTime<=S);if(S=n.unstable_now(),typeof be=="function"){x.callback=be,I(S),k=!0;break t}x===d(b)&&o(b),I(S)}else o(b);x=d(b)}if(x!==null)k=!0;else{var T=d(v);T!==null&&D($,T.startTime-S),k=!1}}break e}finally{x=null,y=U,C=!1}k=void 0}}finally{k?q():le=!1}}}var q;if(typeof Y=="function")q=function(){Y(xe)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,H=z.port2;z.port1.onmessage=xe,q=function(){H.postMessage(null)}}else q=function(){E(xe,0)};function D(S,k){V=E(function(){S(n.unstable_now())},k)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(S){S.callback=null},n.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<S?Math.floor(1e3/S):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(S){switch(y){case 1:case 2:case 3:var k=3;break;default:k=y}var U=y;y=k;try{return S()}finally{y=U}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(S,k){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var U=y;y=S;try{return k()}finally{y=U}},n.unstable_scheduleCallback=function(S,k,U){var ie=n.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?ie+U:ie):U=ie,S){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=U+be,S={id:j++,callback:k,priorityLevel:S,startTime:U,expirationTime:be,sortIndex:-1},U>ie?(S.sortIndex=U,c(v,S),d(b)===null&&S===d(v)&&(_?(O(V),V=-1):_=!0,D($,U-ie))):(S.sortIndex=be,c(b,S),N||C||(N=!0,le||(le=!0,q()))),S},n.unstable_shouldYield=he,n.unstable_wrapCallback=function(S){var k=y;return function(){var U=y;y=k;try{return S.apply(this,arguments)}finally{y=U}}}})(uo)),uo}var kh;function Gg(){return kh||(kh=1,oo.exports=Fg()),oo.exports}var mo={exports:{}},vt={};var Dh;function Xg(){if(Dh)return vt;Dh=1;var n=jo();function c(b){var v="https://react.dev/errors/"+b;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)v+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+b+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(){}var o={d:{f:d,r:function(){throw Error(c(522))},D:d,C:d,L:d,m:d,X:d,S:d,M:d},p:0,findDOMNode:null},u=Symbol.for("react.portal");function p(b,v,j){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:x==null?null:""+x,children:b,containerInfo:v,implementation:j}}var m=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(b,v){if(b==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return vt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,vt.createPortal=function(b,v){var j=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(c(299));return p(b,v,null,j)},vt.flushSync=function(b){var v=m.T,j=o.p;try{if(m.T=null,o.p=2,b)return b()}finally{m.T=v,o.p=j,o.d.f()}},vt.preconnect=function(b,v){typeof b=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,o.d.C(b,v))},vt.prefetchDNS=function(b){typeof b=="string"&&o.d.D(b)},vt.preinit=function(b,v){if(typeof b=="string"&&v&&typeof v.as=="string"){var j=v.as,x=f(j,v.crossOrigin),y=typeof v.integrity=="string"?v.integrity:void 0,C=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;j==="style"?o.d.S(b,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:x,integrity:y,fetchPriority:C}):j==="script"&&o.d.X(b,{crossOrigin:x,integrity:y,fetchPriority:C,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},vt.preinitModule=function(b,v){if(typeof b=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var j=f(v.as,v.crossOrigin);o.d.M(b,{crossOrigin:j,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&o.d.M(b)},vt.preload=function(b,v){if(typeof b=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var j=v.as,x=f(j,v.crossOrigin);o.d.L(b,j,{crossOrigin:x,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},vt.preloadModule=function(b,v){if(typeof b=="string")if(v){var j=f(v.as,v.crossOrigin);o.d.m(b,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:j,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else o.d.m(b)},vt.requestFormReset=function(b){o.d.r(b)},vt.unstable_batchedUpdates=function(b,v){return b(v)},vt.useFormState=function(b,v,j){return m.H.useFormState(b,v,j)},vt.useFormStatus=function(){return m.H.useHostTransitionStatus()},vt.version="19.2.3",vt}var Ah;function Yh(){if(Ah)return mo.exports;Ah=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(c){console.error(c)}}return n(),mo.exports=Xg(),mo.exports}var Th;function $g(){if(Th)return xn;Th=1;var n=Gg(),c=jo(),d=Yh();function o(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function p(t){var a=t,s=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(s=a.return),t=a.return;while(t)}return a.tag===3?s:null}function m(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function f(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function b(t){if(p(t)!==t)throw Error(o(188))}function v(t){var a=t.alternate;if(!a){if(a=p(t),a===null)throw Error(o(188));return a!==t?null:t}for(var s=t,l=a;;){var i=s.return;if(i===null)break;var r=i.alternate;if(r===null){if(l=i.return,l!==null){s=l;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===s)return b(i),t;if(r===l)return b(i),a;r=r.sibling}throw Error(o(188))}if(s.return!==l.return)s=i,l=r;else{for(var h=!1,w=i.child;w;){if(w===s){h=!0,s=i,l=r;break}if(w===l){h=!0,l=i,s=r;break}w=w.sibling}if(!h){for(w=r.child;w;){if(w===s){h=!0,s=r,l=i;break}if(w===l){h=!0,l=r,s=i;break}w=w.sibling}if(!h)throw Error(o(189))}}if(s.alternate!==l)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?t:a}function j(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=j(t),a!==null)return a;t=t.sibling}return null}var x=Object.assign,y=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),ge=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),xe=Symbol.iterator;function q(t){return t===null||typeof t!="object"?null:(t=xe&&t[xe]||t["@@iterator"],typeof t=="function"?t:null)}var z=Symbol.for("react.client.reference");function H(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===z?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _:return"Fragment";case E:return"Profiler";case A:return"StrictMode";case $:return"Suspense";case le:return"SuspenseList";case ge:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case N:return"Portal";case Y:return t.displayName||"Context";case O:return(t._context.displayName||"Context")+".Consumer";case I:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V:return a=t.displayName||null,a!==null?a:H(t.type)||"Memo";case X:a=t._payload,t=t._init;try{return H(t(a))}catch{}}return null}var D=Array.isArray,S=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=d.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},ie=[],be=-1;function T(t){return{current:t}}function L(t){0>be||(t.current=ie[be],ie[be]=null,be--)}function W(t,a){be++,ie[be]=t.current,t.current=a}var F=T(null),fe=T(null),P=T(null),ue=T(null);function Ce(t,a){switch(W(P,a),W(fe,t),W(F,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Qm(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Qm(a),t=Vm(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}L(F),W(F,t)}function ee(){L(F),L(fe),L(P)}function M(t){t.memoizedState!==null&&W(ue,t);var a=F.current,s=Vm(a,t.type);a!==s&&(W(fe,t),W(F,s))}function de(t){fe.current===t&&(L(F),L(fe)),ue.current===t&&(L(ue),dn._currentValue=U)}var me,ve;function oe(t){if(me===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);me=a&&a[1]||"",ve=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+me+t+ve}var te=!1;function Se(t,a){if(!t||te)return"";te=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(K){var J=K}Reflect.construct(t,[],ce)}else{try{ce.call()}catch(K){J=K}t.call(ce.prototype)}}else{try{throw Error()}catch(K){J=K}(ce=t())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(K){if(K&&J&&typeof K.stack=="string")return[K.stack,J.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=l.DetermineComponentFrameRoot(),h=r[0],w=r[1];if(h&&w){var R=h.split(`
`),Z=w.split(`
`);for(i=l=0;l<R.length&&!R[l].includes("DetermineComponentFrameRoot");)l++;for(;i<Z.length&&!Z[i].includes("DetermineComponentFrameRoot");)i++;if(l===R.length||i===Z.length)for(l=R.length-1,i=Z.length-1;1<=l&&0<=i&&R[l]!==Z[i];)i--;for(;1<=l&&0<=i;l--,i--)if(R[l]!==Z[i]){if(l!==1||i!==1)do if(l--,i--,0>i||R[l]!==Z[i]){var ae=`
`+R[l].replace(" at new "," at ");return t.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",t.displayName)),ae}while(1<=l&&0<=i);break}}}finally{te=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?oe(s):""}function Ee(t,a){switch(t.tag){case 26:case 27:case 5:return oe(t.type);case 16:return oe("Lazy");case 13:return t.child!==a&&a!==null?oe("Suspense Fallback"):oe("Suspense");case 19:return oe("SuspenseList");case 0:case 15:return Se(t.type,!1);case 11:return Se(t.type.render,!1);case 1:return Se(t.type,!0);case 31:return oe("Activity");default:return""}}function Fe(t){try{var a="",s=null;do a+=Ee(t,s),s=t,t=t.return;while(t);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ze=Object.prototype.hasOwnProperty,nt=n.unstable_scheduleCallback,wt=n.unstable_cancelCallback,la=n.unstable_shouldYield,rs=n.unstable_requestPaint,pt=n.unstable_now,yl=n.unstable_getCurrentPriorityLevel,Gt=n.unstable_ImmediatePriority,jn=n.unstable_UserBlockingPriority,za=n.unstable_NormalPriority,Vi=n.unstable_LowPriority,jl=n.unstable_IdlePriority,ks=n.log,Zi=n.unstable_setDisableYieldValue,na=null,jt=null;function St(t){if(typeof ks=="function"&&Zi(t),jt&&typeof jt.setStrictMode=="function")try{jt.setStrictMode(na,t)}catch{}}var bt=Math.clz32?Math.clz32:wl,Nl=Math.log,Oa=Math.LN2;function wl(t){return t>>>=0,t===0?32:31-(Nl(t)/Oa|0)|0}var Ds=256,As=262144,Ts=4194304;function ua(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ms(t,a,s){var l=t.pendingLanes;if(l===0)return 0;var i=0,r=t.suspendedLanes,h=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~r,l!==0?i=ua(l):(h&=w,h!==0?i=ua(h):s||(s=w&~t,s!==0&&(i=ua(s))))):(w=l&~r,w!==0?i=ua(w):h!==0?i=ua(h):s||(s=l&~t,s!==0&&(i=ua(s)))),i===0?0:a!==0&&a!==i&&(a&r)===0&&(r=i&-i,s=a&-a,r>=s||r===32&&(s&4194048)!==0)?a:i}function ma(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Ji(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nn(){var t=Ts;return Ts<<=1,(Ts&62914560)===0&&(Ts=4194304),t}function cs(t){for(var a=[],s=0;31>s;s++)a.push(t);return a}function os(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Pi(t,a,s,l,i,r){var h=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var w=t.entanglements,R=t.expirationTimes,Z=t.hiddenUpdates;for(s=h&~s;0<s;){var ae=31-bt(s),ce=1<<ae;w[ae]=0,R[ae]=-1;var J=Z[ae];if(J!==null)for(Z[ae]=null,ae=0;ae<J.length;ae++){var K=J[ae];K!==null&&(K.lane&=-536870913)}s&=~ce}l!==0&&wn(t,l,0),r!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=r&~(h&~a))}function wn(t,a,s){t.pendingLanes|=a,t.suspendedLanes&=~a;var l=31-bt(a);t.entangledLanes|=a,t.entanglements[l]=t.entanglements[l]|1073741824|s&261930}function La(t,a){var s=t.entangledLanes|=a;for(t=t.entanglements;s;){var l=31-bt(s),i=1<<l;i&a|t[l]&a&&(t[l]|=a),s&=~i}}function Sn(t,a){var s=a&-a;return s=(s&42)!==0?1:ne(s),(s&(t.suspendedLanes|a))!==0?0:s}function ne(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function pe(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ae(){var t=k.p;return t!==0?t:(t=window.event,t===void 0?32:gh(t.type))}function Be(t,a){var s=k.p;try{return k.p=t,a()}finally{k.p=s}}var _t=Math.random().toString(36).slice(2),at="__reactFiber$"+_t,Ct="__reactProps$"+_t,Rs="__reactContainer$"+_t,Ki="__reactEvents$"+_t,Ef="__reactListeners$"+_t,kf="__reactHandles$"+_t,Ro="__reactResources$"+_t,Sl="__reactMarker$"+_t;function Wi(t){delete t[at],delete t[Ct],delete t[Ki],delete t[Ef],delete t[kf]}function zs(t){var a=t[at];if(a)return a;for(var s=t.parentNode;s;){if(a=s[Rs]||s[at]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(t=eh(t);t!==null;){if(s=t[at])return s;t=eh(t)}return a}t=s,s=t.parentNode}return null}function Os(t){if(t=t[at]||t[Rs]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function _l(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(o(33))}function Ls(t){var a=t[Ro];return a||(a=t[Ro]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ut(t){t[Sl]=!0}var zo=new Set,Oo={};function ds(t,a){Us(t,a),Us(t+"Capture",a)}function Us(t,a){for(Oo[t]=a,t=0;t<a.length;t++)zo.add(a[t])}var Df=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lo={},Uo={};function Af(t){return Ze.call(Uo,t)?!0:Ze.call(Lo,t)?!1:Df.test(t)?Uo[t]=!0:(Lo[t]=!0,!1)}function _n(t,a,s){if(Af(a))if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+s)}}function Cn(t,a,s){if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+s)}}function ha(t,a,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(a,s,""+l)}}function Xt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Bo(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Tf(t,a,s){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var i=l.get,r=l.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return i.call(this)},set:function(h){s=""+h,r.call(this,h)}}),Object.defineProperty(t,a,{enumerable:l.enumerable}),{getValue:function(){return s},setValue:function(h){s=""+h},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function Ii(t){if(!t._valueTracker){var a=Bo(t)?"checked":"value";t._valueTracker=Tf(t,a,""+t[a])}}function Ho(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var s=a.getValue(),l="";return t&&(l=Bo(t)?t.checked?"true":"false":t.value),t=l,t!==s?(a.setValue(t),!0):!1}function En(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Mf=/[\n"\\]/g;function $t(t){return t.replace(Mf,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function er(t,a,s,l,i,r,h,w){t.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?t.type=h:t.removeAttribute("type"),a!=null?h==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+Xt(a)):t.value!==""+Xt(a)&&(t.value=""+Xt(a)):h!=="submit"&&h!=="reset"||t.removeAttribute("value"),a!=null?tr(t,h,Xt(a)):s!=null?tr(t,h,Xt(s)):l!=null&&t.removeAttribute("value"),i==null&&r!=null&&(t.defaultChecked=!!r),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+Xt(w):t.removeAttribute("name")}function qo(t,a,s,l,i,r,h,w){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),a!=null||s!=null){if(!(r!=="submit"&&r!=="reset"||a!=null)){Ii(t);return}s=s!=null?""+Xt(s):"",a=a!=null?""+Xt(a):s,w||a===t.value||(t.value=a),t.defaultValue=a}l=l??i,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.name=h),Ii(t)}function tr(t,a,s){a==="number"&&En(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function Bs(t,a,s,l){if(t=t.options,a){a={};for(var i=0;i<s.length;i++)a["$"+s[i]]=!0;for(s=0;s<t.length;s++)i=a.hasOwnProperty("$"+t[s].value),t[s].selected!==i&&(t[s].selected=i),i&&l&&(t[s].defaultSelected=!0)}else{for(s=""+Xt(s),a=null,i=0;i<t.length;i++){if(t[i].value===s){t[i].selected=!0,l&&(t[i].defaultSelected=!0);return}a!==null||t[i].disabled||(a=t[i])}a!==null&&(a.selected=!0)}}function Yo(t,a,s){if(a!=null&&(a=""+Xt(a),a!==t.value&&(t.value=a),s==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=s!=null?""+Xt(s):""}function Fo(t,a,s,l){if(a==null){if(l!=null){if(s!=null)throw Error(o(92));if(D(l)){if(1<l.length)throw Error(o(93));l=l[0]}s=l}s==null&&(s=""),a=s}s=Xt(a),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l),Ii(t)}function Hs(t,a){if(a){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=a;return}}t.textContent=a}var Rf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Go(t,a,s){var l=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":l?t.setProperty(a,s):typeof s!="number"||s===0||Rf.has(a)?a==="float"?t.cssFloat=s:t[a]=(""+s).trim():t[a]=s+"px"}function Xo(t,a,s){if(a!=null&&typeof a!="object")throw Error(o(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var i in a)l=a[i],a.hasOwnProperty(i)&&s[i]!==l&&Go(t,i,l)}else for(var r in a)a.hasOwnProperty(r)&&Go(t,r,a[r])}function ar(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Of=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kn(t){return Of.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function fa(){}var sr=null;function lr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qs=null,Ys=null;function $o(t){var a=Os(t);if(a&&(t=a.stateNode)){var s=t[Ct]||null;e:switch(t=a.stateNode,a.type){case"input":if(er(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+$t(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var l=s[a];if(l!==t&&l.form===t.form){var i=l[Ct]||null;if(!i)throw Error(o(90));er(l,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(a=0;a<s.length;a++)l=s[a],l.form===t.form&&Ho(l)}break e;case"textarea":Yo(t,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&Bs(t,!!s.multiple,a,!1)}}}var nr=!1;function Qo(t,a,s){if(nr)return t(a,s);nr=!0;try{var l=t(a);return l}finally{if(nr=!1,(qs!==null||Ys!==null)&&(xi(),qs&&(a=qs,t=Ys,Ys=qs=null,$o(a),t)))for(a=0;a<t.length;a++)$o(t[a])}}function Cl(t,a){var s=t.stateNode;if(s===null)return null;var l=s[Ct]||null;if(l===null)return null;s=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(o(231,a,typeof s));return s}var xa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ir=!1;if(xa)try{var El={};Object.defineProperty(El,"passive",{get:function(){ir=!0}}),window.addEventListener("test",El,El),window.removeEventListener("test",El,El)}catch{ir=!1}var Ua=null,rr=null,Dn=null;function Vo(){if(Dn)return Dn;var t,a=rr,s=a.length,l,i="value"in Ua?Ua.value:Ua.textContent,r=i.length;for(t=0;t<s&&a[t]===i[t];t++);var h=s-t;for(l=1;l<=h&&a[s-l]===i[r-l];l++);return Dn=i.slice(t,1<l?1-l:void 0)}function An(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function Tn(){return!0}function Zo(){return!1}function Et(t){function a(s,l,i,r,h){this._reactName=s,this._targetInst=i,this.type=l,this.nativeEvent=r,this.target=h,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(s=t[w],this[w]=s?s(r):r[w]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Tn:Zo,this.isPropagationStopped=Zo,this}return x(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Tn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Tn)},persist:function(){},isPersistent:Tn}),a}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mn=Et(us),kl=x({},us,{view:0,detail:0}),Lf=Et(kl),cr,or,Dl,Rn=x({},kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ur,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dl&&(Dl&&t.type==="mousemove"?(cr=t.screenX-Dl.screenX,or=t.screenY-Dl.screenY):or=cr=0,Dl=t),cr)},movementY:function(t){return"movementY"in t?t.movementY:or}}),Jo=Et(Rn),Uf=x({},Rn,{dataTransfer:0}),Bf=Et(Uf),Hf=x({},kl,{relatedTarget:0}),dr=Et(Hf),qf=x({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),Yf=Et(qf),Ff=x({},us,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Gf=Et(Ff),Xf=x({},us,{data:0}),Po=Et(Xf),$f={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zf(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=Vf[t])?!!a[t]:!1}function ur(){return Zf}var Jf=x({},kl,{key:function(t){if(t.key){var a=$f[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=An(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qf[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ur,charCode:function(t){return t.type==="keypress"?An(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?An(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Pf=Et(Jf),Kf=x({},Rn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ko=Et(Kf),Wf=x({},kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ur}),If=Et(Wf),ex=x({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),tx=Et(ex),ax=x({},Rn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sx=Et(ax),lx=x({},us,{newState:0,oldState:0}),nx=Et(lx),ix=[9,13,27,32],mr=xa&&"CompositionEvent"in window,Al=null;xa&&"documentMode"in document&&(Al=document.documentMode);var rx=xa&&"TextEvent"in window&&!Al,Wo=xa&&(!mr||Al&&8<Al&&11>=Al),Io=" ",ed=!1;function td(t,a){switch(t){case"keyup":return ix.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ad(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fs=!1;function cx(t,a){switch(t){case"compositionend":return ad(a);case"keypress":return a.which!==32?null:(ed=!0,Io);case"textInput":return t=a.data,t===Io&&ed?null:t;default:return null}}function ox(t,a){if(Fs)return t==="compositionend"||!mr&&td(t,a)?(t=Vo(),Dn=rr=Ua=null,Fs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Wo&&a.locale!=="ko"?null:a.data;default:return null}}var dx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sd(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!dx[t.type]:a==="textarea"}function ld(t,a,s,l){qs?Ys?Ys.push(l):Ys=[l]:qs=l,a=Ni(a,"onChange"),0<a.length&&(s=new Mn("onChange","change",null,s,l),t.push({event:s,listeners:a}))}var Tl=null,Ml=null;function ux(t){qm(t,0)}function zn(t){var a=_l(t);if(Ho(a))return t}function nd(t,a){if(t==="change")return a}var id=!1;if(xa){var hr;if(xa){var fr="oninput"in document;if(!fr){var rd=document.createElement("div");rd.setAttribute("oninput","return;"),fr=typeof rd.oninput=="function"}hr=fr}else hr=!1;id=hr&&(!document.documentMode||9<document.documentMode)}function cd(){Tl&&(Tl.detachEvent("onpropertychange",od),Ml=Tl=null)}function od(t){if(t.propertyName==="value"&&zn(Ml)){var a=[];ld(a,Ml,t,lr(t)),Qo(ux,a)}}function mx(t,a,s){t==="focusin"?(cd(),Tl=a,Ml=s,Tl.attachEvent("onpropertychange",od)):t==="focusout"&&cd()}function hx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zn(Ml)}function fx(t,a){if(t==="click")return zn(a)}function xx(t,a){if(t==="input"||t==="change")return zn(a)}function gx(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var zt=typeof Object.is=="function"?Object.is:gx;function Rl(t,a){if(zt(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var s=Object.keys(t),l=Object.keys(a);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var i=s[l];if(!Ze.call(a,i)||!zt(t[i],a[i]))return!1}return!0}function dd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ud(t,a){var s=dd(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=a&&l>=a)return{node:s,offset:a-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=dd(s)}}function md(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?md(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function hd(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=En(t.document);a instanceof t.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)t=a.contentWindow;else break;a=En(t.document)}return a}function xr(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var px=xa&&"documentMode"in document&&11>=document.documentMode,Gs=null,gr=null,zl=null,pr=!1;function fd(t,a,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;pr||Gs==null||Gs!==En(l)||(l=Gs,"selectionStart"in l&&xr(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),zl&&Rl(zl,l)||(zl=l,l=Ni(gr,"onSelect"),0<l.length&&(a=new Mn("onSelect","select",null,a,s),t.push({event:a,listeners:l}),a.target=Gs)))}function ms(t,a){var s={};return s[t.toLowerCase()]=a.toLowerCase(),s["Webkit"+t]="webkit"+a,s["Moz"+t]="moz"+a,s}var Xs={animationend:ms("Animation","AnimationEnd"),animationiteration:ms("Animation","AnimationIteration"),animationstart:ms("Animation","AnimationStart"),transitionrun:ms("Transition","TransitionRun"),transitionstart:ms("Transition","TransitionStart"),transitioncancel:ms("Transition","TransitionCancel"),transitionend:ms("Transition","TransitionEnd")},br={},xd={};xa&&(xd=document.createElement("div").style,"AnimationEvent"in window||(delete Xs.animationend.animation,delete Xs.animationiteration.animation,delete Xs.animationstart.animation),"TransitionEvent"in window||delete Xs.transitionend.transition);function hs(t){if(br[t])return br[t];if(!Xs[t])return t;var a=Xs[t],s;for(s in a)if(a.hasOwnProperty(s)&&s in xd)return br[t]=a[s];return t}var gd=hs("animationend"),pd=hs("animationiteration"),bd=hs("animationstart"),bx=hs("transitionrun"),vx=hs("transitionstart"),yx=hs("transitioncancel"),vd=hs("transitionend"),yd=new Map,vr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vr.push("scrollEnd");function ea(t,a){yd.set(t,a),ds(a,[t])}var On=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Qt=[],$s=0,yr=0;function Ln(){for(var t=$s,a=yr=$s=0;a<t;){var s=Qt[a];Qt[a++]=null;var l=Qt[a];Qt[a++]=null;var i=Qt[a];Qt[a++]=null;var r=Qt[a];if(Qt[a++]=null,l!==null&&i!==null){var h=l.pending;h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i}r!==0&&jd(s,i,r)}}function Un(t,a,s,l){Qt[$s++]=t,Qt[$s++]=a,Qt[$s++]=s,Qt[$s++]=l,yr|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function jr(t,a,s,l){return Un(t,a,s,l),Bn(t)}function fs(t,a){return Un(t,null,null,a),Bn(t)}function jd(t,a,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var i=!1,r=t.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(i=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,i&&a!==null&&(i=31-bt(s),t=r.hiddenUpdates,l=t[i],l===null?t[i]=[a]:l.push(a),a.lane=s|536870912),r):null}function Bn(t){if(50<an)throw an=0,Ac=null,Error(o(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var Qs={};function jx(t,a,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(t,a,s,l){return new jx(t,a,s,l)}function Nr(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ga(t,a){var s=t.alternate;return s===null?(s=Ot(t.tag,a,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=a,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,a=t.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Nd(t,a){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,a=s.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Hn(t,a,s,l,i,r){var h=0;if(l=t,typeof t=="function")Nr(t)&&(h=1);else if(typeof t=="string")h=Cg(t,s,F.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case ge:return t=Ot(31,s,a,i),t.elementType=ge,t.lanes=r,t;case _:return xs(s.children,i,r,a);case A:h=8,i|=24;break;case E:return t=Ot(12,s,a,i|2),t.elementType=E,t.lanes=r,t;case $:return t=Ot(13,s,a,i),t.elementType=$,t.lanes=r,t;case le:return t=Ot(19,s,a,i),t.elementType=le,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y:h=10;break e;case O:h=9;break e;case I:h=11;break e;case V:h=14;break e;case X:h=16,l=null;break e}h=29,s=Error(o(130,t===null?"null":typeof t,"")),l=null}return a=Ot(h,s,a,i),a.elementType=t,a.type=l,a.lanes=r,a}function xs(t,a,s,l){return t=Ot(7,t,l,a),t.lanes=s,t}function wr(t,a,s){return t=Ot(6,t,null,a),t.lanes=s,t}function wd(t){var a=Ot(18,null,null,0);return a.stateNode=t,a}function Sr(t,a,s){return a=Ot(4,t.children!==null?t.children:[],t.key,a),a.lanes=s,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Sd=new WeakMap;function Vt(t,a){if(typeof t=="object"&&t!==null){var s=Sd.get(t);return s!==void 0?s:(a={value:t,source:a,stack:Fe(a)},Sd.set(t,a),a)}return{value:t,source:a,stack:Fe(a)}}var Vs=[],Zs=0,qn=null,Ol=0,Zt=[],Jt=0,Ba=null,ia=1,ra="";function pa(t,a){Vs[Zs++]=Ol,Vs[Zs++]=qn,qn=t,Ol=a}function _d(t,a,s){Zt[Jt++]=ia,Zt[Jt++]=ra,Zt[Jt++]=Ba,Ba=t;var l=ia;t=ra;var i=32-bt(l)-1;l&=~(1<<i),s+=1;var r=32-bt(a)+i;if(30<r){var h=i-i%5;r=(l&(1<<h)-1).toString(32),l>>=h,i-=h,ia=1<<32-bt(a)+i|s<<i|l,ra=r+t}else ia=1<<r|s<<i|l,ra=t}function _r(t){t.return!==null&&(pa(t,1),_d(t,1,0))}function Cr(t){for(;t===qn;)qn=Vs[--Zs],Vs[Zs]=null,Ol=Vs[--Zs],Vs[Zs]=null;for(;t===Ba;)Ba=Zt[--Jt],Zt[Jt]=null,ra=Zt[--Jt],Zt[Jt]=null,ia=Zt[--Jt],Zt[Jt]=null}function Cd(t,a){Zt[Jt++]=ia,Zt[Jt++]=ra,Zt[Jt++]=Ba,ia=a.id,ra=a.overflow,Ba=t}var ht=null,Pe=null,Ue=!1,Ha=null,Pt=!1,Er=Error(o(519));function qa(t){var a=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ll(Vt(a,t)),Er}function Ed(t){var a=t.stateNode,s=t.type,l=t.memoizedProps;switch(a[at]=t,a[Ct]=l,s){case"dialog":Re("cancel",a),Re("close",a);break;case"iframe":case"object":case"embed":Re("load",a);break;case"video":case"audio":for(s=0;s<ln.length;s++)Re(ln[s],a);break;case"source":Re("error",a);break;case"img":case"image":case"link":Re("error",a),Re("load",a);break;case"details":Re("toggle",a);break;case"input":Re("invalid",a),qo(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Re("invalid",a);break;case"textarea":Re("invalid",a),Fo(a,l.value,l.defaultValue,l.children)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||l.suppressHydrationWarning===!0||Xm(a.textContent,s)?(l.popover!=null&&(Re("beforetoggle",a),Re("toggle",a)),l.onScroll!=null&&Re("scroll",a),l.onScrollEnd!=null&&Re("scrollend",a),l.onClick!=null&&(a.onclick=fa),a=!0):a=!1,a||qa(t,!0)}function kd(t){for(ht=t.return;ht;)switch(ht.tag){case 5:case 31:case 13:Pt=!1;return;case 27:case 3:Pt=!0;return;default:ht=ht.return}}function Js(t){if(t!==ht)return!1;if(!Ue)return kd(t),Ue=!0,!1;var a=t.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||$c(t.type,t.memoizedProps)),s=!s),s&&Pe&&qa(t),kd(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Pe=Im(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Pe=Im(t)}else a===27?(a=Pe,es(t.type)?(t=Pc,Pc=null,Pe=t):Pe=a):Pe=ht?Wt(t.stateNode.nextSibling):null;return!0}function gs(){Pe=ht=null,Ue=!1}function kr(){var t=Ha;return t!==null&&(Tt===null?Tt=t:Tt.push.apply(Tt,t),Ha=null),t}function Ll(t){Ha===null?Ha=[t]:Ha.push(t)}var Dr=T(null),ps=null,ba=null;function Ya(t,a,s){W(Dr,a._currentValue),a._currentValue=s}function va(t){t._currentValue=Dr.current,L(Dr)}function Ar(t,a,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),t===s)break;t=t.return}}function Tr(t,a,s,l){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var r=i.dependencies;if(r!==null){var h=i.child;r=r.firstContext;e:for(;r!==null;){var w=r;r=i;for(var R=0;R<a.length;R++)if(w.context===a[R]){r.lanes|=s,w=r.alternate,w!==null&&(w.lanes|=s),Ar(r.return,s,t),l||(h=null);break e}r=w.next}}else if(i.tag===18){if(h=i.return,h===null)throw Error(o(341));h.lanes|=s,r=h.alternate,r!==null&&(r.lanes|=s),Ar(h,s,t),h=null}else h=i.child;if(h!==null)h.return=i;else for(h=i;h!==null;){if(h===t){h=null;break}if(i=h.sibling,i!==null){i.return=h.return,h=i;break}h=h.return}i=h}}function Ps(t,a,s,l){t=null;for(var i=a,r=!1;i!==null;){if(!r){if((i.flags&524288)!==0)r=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var h=i.alternate;if(h===null)throw Error(o(387));if(h=h.memoizedProps,h!==null){var w=i.type;zt(i.pendingProps.value,h.value)||(t!==null?t.push(w):t=[w])}}else if(i===ue.current){if(h=i.alternate,h===null)throw Error(o(387));h.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(dn):t=[dn])}i=i.return}t!==null&&Tr(a,t,s,l),a.flags|=262144}function Yn(t){for(t=t.firstContext;t!==null;){if(!zt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function bs(t){ps=t,ba=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ft(t){return Dd(ps,t)}function Fn(t,a){return ps===null&&bs(t),Dd(t,a)}function Dd(t,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},ba===null){if(t===null)throw Error(o(308));ba=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else ba=ba.next=a;return s}var Nx=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){a.aborted=!0,t.forEach(function(s){return s()})}},wx=n.unstable_scheduleCallback,Sx=n.unstable_NormalPriority,it={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mr(){return{controller:new Nx,data:new Map,refCount:0}}function Ul(t){t.refCount--,t.refCount===0&&wx(Sx,function(){t.controller.abort()})}var Bl=null,Rr=0,Ks=0,Ws=null;function _x(t,a){if(Bl===null){var s=Bl=[];Rr=0,Ks=Lc(),Ws={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Rr++,a.then(Ad,Ad),a}function Ad(){if(--Rr===0&&Bl!==null){Ws!==null&&(Ws.status="fulfilled");var t=Bl;Bl=null,Ks=0,Ws=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function Cx(t,a){var s=[],l={status:"pending",value:null,reason:null,then:function(i){s.push(i)}};return t.then(function(){l.status="fulfilled",l.value=a;for(var i=0;i<s.length;i++)(0,s[i])(a)},function(i){for(l.status="rejected",l.reason=i,i=0;i<s.length;i++)(0,s[i])(void 0)}),l}var Td=S.S;S.S=function(t,a){fm=pt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&_x(t,a),Td!==null&&Td(t,a)};var vs=T(null);function zr(){var t=vs.current;return t!==null?t:Je.pooledCache}function Gn(t,a){a===null?W(vs,vs.current):W(vs,a.pool)}function Md(){var t=zr();return t===null?null:{parent:it._currentValue,pool:t}}var Is=Error(o(460)),Or=Error(o(474)),Xn=Error(o(542)),$n={then:function(){}};function Rd(t){return t=t.status,t==="fulfilled"||t==="rejected"}function zd(t,a,s){switch(s=t[s],s===void 0?t.push(a):s!==a&&(a.then(fa,fa),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Ld(t),t;default:if(typeof a.status=="string")a.then(fa,fa);else{if(t=Je,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=a,t.status="pending",t.then(function(l){if(a.status==="pending"){var i=a;i.status="fulfilled",i.value=l}},function(l){if(a.status==="pending"){var i=a;i.status="rejected",i.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Ld(t),t}throw js=a,Is}}function ys(t){try{var a=t._init;return a(t._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(js=s,Is):s}}var js=null;function Od(){if(js===null)throw Error(o(459));var t=js;return js=null,t}function Ld(t){if(t===Is||t===Xn)throw Error(o(483))}var el=null,Hl=0;function Qn(t){var a=Hl;return Hl+=1,el===null&&(el=[]),zd(el,t,a)}function ql(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Vn(t,a){throw a.$$typeof===y?Error(o(525)):(t=Object.prototype.toString.call(a),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function Ud(t){function a(G,B){if(t){var Q=G.deletions;Q===null?(G.deletions=[B],G.flags|=16):Q.push(B)}}function s(G,B){if(!t)return null;for(;B!==null;)a(G,B),B=B.sibling;return null}function l(G){for(var B=new Map;G!==null;)G.key!==null?B.set(G.key,G):B.set(G.index,G),G=G.sibling;return B}function i(G,B){return G=ga(G,B),G.index=0,G.sibling=null,G}function r(G,B,Q){return G.index=Q,t?(Q=G.alternate,Q!==null?(Q=Q.index,Q<B?(G.flags|=67108866,B):Q):(G.flags|=67108866,B)):(G.flags|=1048576,B)}function h(G){return t&&G.alternate===null&&(G.flags|=67108866),G}function w(G,B,Q,re){return B===null||B.tag!==6?(B=wr(Q,G.mode,re),B.return=G,B):(B=i(B,Q),B.return=G,B)}function R(G,B,Q,re){var Ne=Q.type;return Ne===_?ae(G,B,Q.props.children,re,Q.key):B!==null&&(B.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===X&&ys(Ne)===B.type)?(B=i(B,Q.props),ql(B,Q),B.return=G,B):(B=Hn(Q.type,Q.key,Q.props,null,G.mode,re),ql(B,Q),B.return=G,B)}function Z(G,B,Q,re){return B===null||B.tag!==4||B.stateNode.containerInfo!==Q.containerInfo||B.stateNode.implementation!==Q.implementation?(B=Sr(Q,G.mode,re),B.return=G,B):(B=i(B,Q.children||[]),B.return=G,B)}function ae(G,B,Q,re,Ne){return B===null||B.tag!==7?(B=xs(Q,G.mode,re,Ne),B.return=G,B):(B=i(B,Q),B.return=G,B)}function ce(G,B,Q){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=wr(""+B,G.mode,Q),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case C:return Q=Hn(B.type,B.key,B.props,null,G.mode,Q),ql(Q,B),Q.return=G,Q;case N:return B=Sr(B,G.mode,Q),B.return=G,B;case X:return B=ys(B),ce(G,B,Q)}if(D(B)||q(B))return B=xs(B,G.mode,Q,null),B.return=G,B;if(typeof B.then=="function")return ce(G,Qn(B),Q);if(B.$$typeof===Y)return ce(G,Fn(G,B),Q);Vn(G,B)}return null}function J(G,B,Q,re){var Ne=B!==null?B.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Ne!==null?null:w(G,B,""+Q,re);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case C:return Q.key===Ne?R(G,B,Q,re):null;case N:return Q.key===Ne?Z(G,B,Q,re):null;case X:return Q=ys(Q),J(G,B,Q,re)}if(D(Q)||q(Q))return Ne!==null?null:ae(G,B,Q,re,null);if(typeof Q.then=="function")return J(G,B,Qn(Q),re);if(Q.$$typeof===Y)return J(G,B,Fn(G,Q),re);Vn(G,Q)}return null}function K(G,B,Q,re,Ne){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return G=G.get(Q)||null,w(B,G,""+re,Ne);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case C:return G=G.get(re.key===null?Q:re.key)||null,R(B,G,re,Ne);case N:return G=G.get(re.key===null?Q:re.key)||null,Z(B,G,re,Ne);case X:return re=ys(re),K(G,B,Q,re,Ne)}if(D(re)||q(re))return G=G.get(Q)||null,ae(B,G,re,Ne,null);if(typeof re.then=="function")return K(G,B,Q,Qn(re),Ne);if(re.$$typeof===Y)return K(G,B,Q,Fn(B,re),Ne);Vn(B,re)}return null}function ye(G,B,Q,re){for(var Ne=null,He=null,je=B,De=B=0,Le=null;je!==null&&De<Q.length;De++){je.index>De?(Le=je,je=null):Le=je.sibling;var qe=J(G,je,Q[De],re);if(qe===null){je===null&&(je=Le);break}t&&je&&qe.alternate===null&&a(G,je),B=r(qe,B,De),He===null?Ne=qe:He.sibling=qe,He=qe,je=Le}if(De===Q.length)return s(G,je),Ue&&pa(G,De),Ne;if(je===null){for(;De<Q.length;De++)je=ce(G,Q[De],re),je!==null&&(B=r(je,B,De),He===null?Ne=je:He.sibling=je,He=je);return Ue&&pa(G,De),Ne}for(je=l(je);De<Q.length;De++)Le=K(je,G,De,Q[De],re),Le!==null&&(t&&Le.alternate!==null&&je.delete(Le.key===null?De:Le.key),B=r(Le,B,De),He===null?Ne=Le:He.sibling=Le,He=Le);return t&&je.forEach(function(ns){return a(G,ns)}),Ue&&pa(G,De),Ne}function we(G,B,Q,re){if(Q==null)throw Error(o(151));for(var Ne=null,He=null,je=B,De=B=0,Le=null,qe=Q.next();je!==null&&!qe.done;De++,qe=Q.next()){je.index>De?(Le=je,je=null):Le=je.sibling;var ns=J(G,je,qe.value,re);if(ns===null){je===null&&(je=Le);break}t&&je&&ns.alternate===null&&a(G,je),B=r(ns,B,De),He===null?Ne=ns:He.sibling=ns,He=ns,je=Le}if(qe.done)return s(G,je),Ue&&pa(G,De),Ne;if(je===null){for(;!qe.done;De++,qe=Q.next())qe=ce(G,qe.value,re),qe!==null&&(B=r(qe,B,De),He===null?Ne=qe:He.sibling=qe,He=qe);return Ue&&pa(G,De),Ne}for(je=l(je);!qe.done;De++,qe=Q.next())qe=K(je,G,De,qe.value,re),qe!==null&&(t&&qe.alternate!==null&&je.delete(qe.key===null?De:qe.key),B=r(qe,B,De),He===null?Ne=qe:He.sibling=qe,He=qe);return t&&je.forEach(function(Ug){return a(G,Ug)}),Ue&&pa(G,De),Ne}function Ve(G,B,Q,re){if(typeof Q=="object"&&Q!==null&&Q.type===_&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case C:e:{for(var Ne=Q.key;B!==null;){if(B.key===Ne){if(Ne=Q.type,Ne===_){if(B.tag===7){s(G,B.sibling),re=i(B,Q.props.children),re.return=G,G=re;break e}}else if(B.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===X&&ys(Ne)===B.type){s(G,B.sibling),re=i(B,Q.props),ql(re,Q),re.return=G,G=re;break e}s(G,B);break}else a(G,B);B=B.sibling}Q.type===_?(re=xs(Q.props.children,G.mode,re,Q.key),re.return=G,G=re):(re=Hn(Q.type,Q.key,Q.props,null,G.mode,re),ql(re,Q),re.return=G,G=re)}return h(G);case N:e:{for(Ne=Q.key;B!==null;){if(B.key===Ne)if(B.tag===4&&B.stateNode.containerInfo===Q.containerInfo&&B.stateNode.implementation===Q.implementation){s(G,B.sibling),re=i(B,Q.children||[]),re.return=G,G=re;break e}else{s(G,B);break}else a(G,B);B=B.sibling}re=Sr(Q,G.mode,re),re.return=G,G=re}return h(G);case X:return Q=ys(Q),Ve(G,B,Q,re)}if(D(Q))return ye(G,B,Q,re);if(q(Q)){if(Ne=q(Q),typeof Ne!="function")throw Error(o(150));return Q=Ne.call(Q),we(G,B,Q,re)}if(typeof Q.then=="function")return Ve(G,B,Qn(Q),re);if(Q.$$typeof===Y)return Ve(G,B,Fn(G,Q),re);Vn(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,B!==null&&B.tag===6?(s(G,B.sibling),re=i(B,Q),re.return=G,G=re):(s(G,B),re=wr(Q,G.mode,re),re.return=G,G=re),h(G)):s(G,B)}return function(G,B,Q,re){try{Hl=0;var Ne=Ve(G,B,Q,re);return el=null,Ne}catch(je){if(je===Is||je===Xn)throw je;var He=Ot(29,je,null,G.mode);return He.lanes=re,He.return=G,He}}}var Ns=Ud(!0),Bd=Ud(!1),Fa=!1;function Lr(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ur(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ga(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Xa(t,a,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ye&2)!==0){var i=l.pending;return i===null?a.next=a:(a.next=i.next,i.next=a),l.pending=a,a=Bn(t),jd(t,null,s),a}return Un(t,l,a,s),Bn(t)}function Yl(t,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,La(t,s)}}function Br(t,a){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var i=null,r=null;if(s=s.firstBaseUpdate,s!==null){do{var h={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};r===null?i=r=h:r=r.next=h,s=s.next}while(s!==null);r===null?i=r=a:r=r.next=a}else i=r=a;s={baseState:l.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=a:t.next=a,s.lastBaseUpdate=a}var Hr=!1;function Fl(){if(Hr){var t=Ws;if(t!==null)throw t}}function Gl(t,a,s,l){Hr=!1;var i=t.updateQueue;Fa=!1;var r=i.firstBaseUpdate,h=i.lastBaseUpdate,w=i.shared.pending;if(w!==null){i.shared.pending=null;var R=w,Z=R.next;R.next=null,h===null?r=Z:h.next=Z,h=R;var ae=t.alternate;ae!==null&&(ae=ae.updateQueue,w=ae.lastBaseUpdate,w!==h&&(w===null?ae.firstBaseUpdate=Z:w.next=Z,ae.lastBaseUpdate=R))}if(r!==null){var ce=i.baseState;h=0,ae=Z=R=null,w=r;do{var J=w.lane&-536870913,K=J!==w.lane;if(K?(Oe&J)===J:(l&J)===J){J!==0&&J===Ks&&(Hr=!0),ae!==null&&(ae=ae.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ye=t,we=w;J=a;var Ve=s;switch(we.tag){case 1:if(ye=we.payload,typeof ye=="function"){ce=ye.call(Ve,ce,J);break e}ce=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=we.payload,J=typeof ye=="function"?ye.call(Ve,ce,J):ye,J==null)break e;ce=x({},ce,J);break e;case 2:Fa=!0}}J=w.callback,J!==null&&(t.flags|=64,K&&(t.flags|=8192),K=i.callbacks,K===null?i.callbacks=[J]:K.push(J))}else K={lane:J,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ae===null?(Z=ae=K,R=ce):ae=ae.next=K,h|=J;if(w=w.next,w===null){if(w=i.shared.pending,w===null)break;K=w,w=K.next,K.next=null,i.lastBaseUpdate=K,i.shared.pending=null}}while(!0);ae===null&&(R=ce),i.baseState=R,i.firstBaseUpdate=Z,i.lastBaseUpdate=ae,r===null&&(i.shared.lanes=0),Ja|=h,t.lanes=h,t.memoizedState=ce}}function Hd(t,a){if(typeof t!="function")throw Error(o(191,t));t.call(a)}function qd(t,a){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Hd(s[t],a)}var tl=T(null),Zn=T(0);function Yd(t,a){t=ka,W(Zn,t),W(tl,a),ka=t|a.baseLanes}function qr(){W(Zn,ka),W(tl,tl.current)}function Yr(){ka=Zn.current,L(tl),L(Zn)}var Lt=T(null),Kt=null;function $a(t){var a=t.alternate;W(st,st.current&1),W(Lt,t),Kt===null&&(a===null||tl.current!==null||a.memoizedState!==null)&&(Kt=t)}function Fr(t){W(st,st.current),W(Lt,t),Kt===null&&(Kt=t)}function Fd(t){t.tag===22?(W(st,st.current),W(Lt,t),Kt===null&&(Kt=t)):Qa()}function Qa(){W(st,st.current),W(Lt,Lt.current)}function Ut(t){L(Lt),Kt===t&&(Kt=null),L(st)}var st=T(0);function Jn(t){for(var a=t;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Zc(s)||Jc(s)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ya=0,ke=null,$e=null,rt=null,Pn=!1,al=!1,ws=!1,Kn=0,Xl=0,sl=null,Ex=0;function et(){throw Error(o(321))}function Gr(t,a){if(a===null)return!1;for(var s=0;s<a.length&&s<t.length;s++)if(!zt(t[s],a[s]))return!1;return!0}function Xr(t,a,s,l,i,r){return ya=r,ke=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,S.H=t===null||t.memoizedState===null?_u:nc,ws=!1,r=s(l,i),ws=!1,al&&(r=Xd(a,s,l,i)),Gd(t),r}function Gd(t){S.H=Vl;var a=$e!==null&&$e.next!==null;if(ya=0,rt=$e=ke=null,Pn=!1,Xl=0,sl=null,a)throw Error(o(300));t===null||ct||(t=t.dependencies,t!==null&&Yn(t)&&(ct=!0))}function Xd(t,a,s,l){ke=t;var i=0;do{if(al&&(sl=null),Xl=0,al=!1,25<=i)throw Error(o(301));if(i+=1,rt=$e=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}S.H=Cu,r=a(s,l)}while(al);return r}function kx(){var t=S.H,a=t.useState()[0];return a=typeof a.then=="function"?$l(a):a,t=t.useState()[0],($e!==null?$e.memoizedState:null)!==t&&(ke.flags|=1024),a}function $r(){var t=Kn!==0;return Kn=0,t}function Qr(t,a,s){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~s}function Vr(t){if(Pn){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Pn=!1}ya=0,rt=$e=ke=null,al=!1,Xl=Kn=0,sl=null}function Nt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?ke.memoizedState=rt=t:rt=rt.next=t,rt}function lt(){if($e===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var a=rt===null?ke.memoizedState:rt.next;if(a!==null)rt=a,$e=t;else{if(t===null)throw ke.alternate===null?Error(o(467)):Error(o(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},rt===null?ke.memoizedState=rt=t:rt=rt.next=t}return rt}function Wn(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $l(t){var a=Xl;return Xl+=1,sl===null&&(sl=[]),t=zd(sl,t,a),a=ke,(rt===null?a.memoizedState:rt.next)===null&&(a=a.alternate,S.H=a===null||a.memoizedState===null?_u:nc),t}function In(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return $l(t);if(t.$$typeof===Y)return ft(t)}throw Error(o(438,String(t)))}function Zr(t){var a=null,s=ke.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var l=ke.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(i){return i.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=Wn(),ke.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(t),l=0;l<t;l++)s[l]=he;return a.index++,s}function ja(t,a){return typeof a=="function"?a(t):a}function ei(t){var a=lt();return Jr(a,$e,t)}function Jr(t,a,s){var l=t.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=s;var i=t.baseQueue,r=l.pending;if(r!==null){if(i!==null){var h=i.next;i.next=r.next,r.next=h}a.baseQueue=i=r,l.pending=null}if(r=t.baseState,i===null)t.memoizedState=r;else{a=i.next;var w=h=null,R=null,Z=a,ae=!1;do{var ce=Z.lane&-536870913;if(ce!==Z.lane?(Oe&ce)===ce:(ya&ce)===ce){var J=Z.revertLane;if(J===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ce===Ks&&(ae=!0);else if((ya&J)===J){Z=Z.next,J===Ks&&(ae=!0);continue}else ce={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},R===null?(w=R=ce,h=r):R=R.next=ce,ke.lanes|=J,Ja|=J;ce=Z.action,ws&&s(r,ce),r=Z.hasEagerState?Z.eagerState:s(r,ce)}else J={lane:ce,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},R===null?(w=R=J,h=r):R=R.next=J,ke.lanes|=ce,Ja|=ce;Z=Z.next}while(Z!==null&&Z!==a);if(R===null?h=r:R.next=w,!zt(r,t.memoizedState)&&(ct=!0,ae&&(s=Ws,s!==null)))throw s;t.memoizedState=r,t.baseState=h,t.baseQueue=R,l.lastRenderedState=r}return i===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Pr(t){var a=lt(),s=a.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=t;var l=s.dispatch,i=s.pending,r=a.memoizedState;if(i!==null){s.pending=null;var h=i=i.next;do r=t(r,h.action),h=h.next;while(h!==i);zt(r,a.memoizedState)||(ct=!0),a.memoizedState=r,a.baseQueue===null&&(a.baseState=r),s.lastRenderedState=r}return[r,l]}function $d(t,a,s){var l=ke,i=lt(),r=Ue;if(r){if(s===void 0)throw Error(o(407));s=s()}else s=a();var h=!zt(($e||i).memoizedState,s);if(h&&(i.memoizedState=s,ct=!0),i=i.queue,Ir(Zd.bind(null,l,i,t),[t]),i.getSnapshot!==a||h||rt!==null&&rt.memoizedState.tag&1){if(l.flags|=2048,ll(9,{destroy:void 0},Vd.bind(null,l,i,s,a),null),Je===null)throw Error(o(349));r||(ya&127)!==0||Qd(l,a,s)}return s}function Qd(t,a,s){t.flags|=16384,t={getSnapshot:a,value:s},a=ke.updateQueue,a===null?(a=Wn(),ke.updateQueue=a,a.stores=[t]):(s=a.stores,s===null?a.stores=[t]:s.push(t))}function Vd(t,a,s,l){a.value=s,a.getSnapshot=l,Jd(a)&&Pd(t)}function Zd(t,a,s){return s(function(){Jd(a)&&Pd(t)})}function Jd(t){var a=t.getSnapshot;t=t.value;try{var s=a();return!zt(t,s)}catch{return!0}}function Pd(t){var a=fs(t,2);a!==null&&Mt(a,t,2)}function Kr(t){var a=Nt();if(typeof t=="function"){var s=t;if(t=s(),ws){St(!0);try{s()}finally{St(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:t},a}function Kd(t,a,s,l){return t.baseState=s,Jr(t,$e,typeof l=="function"?l:ja)}function Dx(t,a,s,l,i){if(si(t))throw Error(o(485));if(t=a.action,t!==null){var r={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){r.listeners.push(h)}};S.T!==null?s(!0):r.isTransition=!1,l(r),s=a.pending,s===null?(r.next=a.pending=r,Wd(a,r)):(r.next=s.next,a.pending=s.next=r)}}function Wd(t,a){var s=a.action,l=a.payload,i=t.state;if(a.isTransition){var r=S.T,h={};S.T=h;try{var w=s(i,l),R=S.S;R!==null&&R(h,w),Id(t,a,w)}catch(Z){Wr(t,a,Z)}finally{r!==null&&h.types!==null&&(r.types=h.types),S.T=r}}else try{r=s(i,l),Id(t,a,r)}catch(Z){Wr(t,a,Z)}}function Id(t,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){eu(t,a,l)},function(l){return Wr(t,a,l)}):eu(t,a,s)}function eu(t,a,s){a.status="fulfilled",a.value=s,tu(a),t.state=s,a=t.pending,a!==null&&(s=a.next,s===a?t.pending=null:(s=s.next,a.next=s,Wd(t,s)))}function Wr(t,a,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=s,tu(a),a=a.next;while(a!==l)}t.action=null}function tu(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function au(t,a){return a}function su(t,a){if(Ue){var s=Je.formState;if(s!==null){e:{var l=ke;if(Ue){if(Pe){t:{for(var i=Pe,r=Pt;i.nodeType!==8;){if(!r){i=null;break t}if(i=Wt(i.nextSibling),i===null){i=null;break t}}r=i.data,i=r==="F!"||r==="F"?i:null}if(i){Pe=Wt(i.nextSibling),l=i.data==="F!";break e}}qa(l)}l=!1}l&&(a=s[0])}}return s=Nt(),s.memoizedState=s.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:au,lastRenderedState:a},s.queue=l,s=Nu.bind(null,ke,l),l.dispatch=s,l=Kr(!1),r=lc.bind(null,ke,!1,l.queue),l=Nt(),i={state:a,dispatch:null,action:t,pending:null},l.queue=i,s=Dx.bind(null,ke,i,r,s),i.dispatch=s,l.memoizedState=t,[a,s,!1]}function lu(t){var a=lt();return nu(a,$e,t)}function nu(t,a,s){if(a=Jr(t,a,au)[0],t=ei(ja)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=$l(a)}catch(h){throw h===Is?Xn:h}else l=a;a=lt();var i=a.queue,r=i.dispatch;return s!==a.memoizedState&&(ke.flags|=2048,ll(9,{destroy:void 0},Ax.bind(null,i,s),null)),[l,r,t]}function Ax(t,a){t.action=a}function iu(t){var a=lt(),s=$e;if(s!==null)return nu(a,s,t);lt(),a=a.memoizedState,s=lt();var l=s.queue.dispatch;return s.memoizedState=t,[a,l,!1]}function ll(t,a,s,l){return t={tag:t,create:s,deps:l,inst:a,next:null},a=ke.updateQueue,a===null&&(a=Wn(),ke.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,a.lastEffect=t),t}function ru(){return lt().memoizedState}function ti(t,a,s,l){var i=Nt();ke.flags|=t,i.memoizedState=ll(1|a,{destroy:void 0},s,l===void 0?null:l)}function ai(t,a,s,l){var i=lt();l=l===void 0?null:l;var r=i.memoizedState.inst;$e!==null&&l!==null&&Gr(l,$e.memoizedState.deps)?i.memoizedState=ll(a,r,s,l):(ke.flags|=t,i.memoizedState=ll(1|a,r,s,l))}function cu(t,a){ti(8390656,8,t,a)}function Ir(t,a){ai(2048,8,t,a)}function Tx(t){ke.flags|=4;var a=ke.updateQueue;if(a===null)a=Wn(),ke.updateQueue=a,a.events=[t];else{var s=a.events;s===null?a.events=[t]:s.push(t)}}function ou(t){var a=lt().memoizedState;return Tx({ref:a,nextImpl:t}),function(){if((Ye&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}function du(t,a){return ai(4,2,t,a)}function uu(t,a){return ai(4,4,t,a)}function mu(t,a){if(typeof a=="function"){t=t();var s=a(t);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function hu(t,a,s){s=s!=null?s.concat([t]):null,ai(4,4,mu.bind(null,a,t),s)}function ec(){}function fu(t,a){var s=lt();a=a===void 0?null:a;var l=s.memoizedState;return a!==null&&Gr(a,l[1])?l[0]:(s.memoizedState=[t,a],t)}function xu(t,a){var s=lt();a=a===void 0?null:a;var l=s.memoizedState;if(a!==null&&Gr(a,l[1]))return l[0];if(l=t(),ws){St(!0);try{t()}finally{St(!1)}}return s.memoizedState=[l,a],l}function tc(t,a,s){return s===void 0||(ya&1073741824)!==0&&(Oe&261930)===0?t.memoizedState=a:(t.memoizedState=s,t=gm(),ke.lanes|=t,Ja|=t,s)}function gu(t,a,s,l){return zt(s,a)?s:tl.current!==null?(t=tc(t,s,l),zt(t,a)||(ct=!0),t):(ya&42)===0||(ya&1073741824)!==0&&(Oe&261930)===0?(ct=!0,t.memoizedState=s):(t=gm(),ke.lanes|=t,Ja|=t,a)}function pu(t,a,s,l,i){var r=k.p;k.p=r!==0&&8>r?r:8;var h=S.T,w={};S.T=w,lc(t,!1,a,s);try{var R=i(),Z=S.S;if(Z!==null&&Z(w,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var ae=Cx(R,l);Ql(t,a,ae,qt(t))}else Ql(t,a,l,qt(t))}catch(ce){Ql(t,a,{then:function(){},status:"rejected",reason:ce},qt())}finally{k.p=r,h!==null&&w.types!==null&&(h.types=w.types),S.T=h}}function Mx(){}function ac(t,a,s,l){if(t.tag!==5)throw Error(o(476));var i=bu(t).queue;pu(t,i,a,U,s===null?Mx:function(){return vu(t),s(l)})}function bu(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:U},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:s},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function vu(t){var a=bu(t);a.next===null&&(a=t.alternate.memoizedState),Ql(t,a.next.queue,{},qt())}function sc(){return ft(dn)}function yu(){return lt().memoizedState}function ju(){return lt().memoizedState}function Rx(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var s=qt();t=Ga(s);var l=Xa(a,t,s);l!==null&&(Mt(l,a,s),Yl(l,a,s)),a={cache:Mr()},t.payload=a;return}a=a.return}}function zx(t,a,s){var l=qt();s={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},si(t)?wu(a,s):(s=jr(t,a,s,l),s!==null&&(Mt(s,t,l),Su(s,a,l)))}function Nu(t,a,s){var l=qt();Ql(t,a,s,l)}function Ql(t,a,s,l){var i={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(si(t))wu(a,i);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=a.lastRenderedReducer,r!==null))try{var h=a.lastRenderedState,w=r(h,s);if(i.hasEagerState=!0,i.eagerState=w,zt(w,h))return Un(t,a,i,0),Je===null&&Ln(),!1}catch{}if(s=jr(t,a,i,l),s!==null)return Mt(s,t,l),Su(s,a,l),!0}return!1}function lc(t,a,s,l){if(l={lane:2,revertLane:Lc(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},si(t)){if(a)throw Error(o(479))}else a=jr(t,s,l,2),a!==null&&Mt(a,t,2)}function si(t){var a=t.alternate;return t===ke||a!==null&&a===ke}function wu(t,a){al=Pn=!0;var s=t.pending;s===null?a.next=a:(a.next=s.next,s.next=a),t.pending=a}function Su(t,a,s){if((s&4194048)!==0){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,La(t,s)}}var Vl={readContext:ft,use:In,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useLayoutEffect:et,useInsertionEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useSyncExternalStore:et,useId:et,useHostTransitionStatus:et,useFormState:et,useActionState:et,useOptimistic:et,useMemoCache:et,useCacheRefresh:et};Vl.useEffectEvent=et;var _u={readContext:ft,use:In,useCallback:function(t,a){return Nt().memoizedState=[t,a===void 0?null:a],t},useContext:ft,useEffect:cu,useImperativeHandle:function(t,a,s){s=s!=null?s.concat([t]):null,ti(4194308,4,mu.bind(null,a,t),s)},useLayoutEffect:function(t,a){return ti(4194308,4,t,a)},useInsertionEffect:function(t,a){ti(4,2,t,a)},useMemo:function(t,a){var s=Nt();a=a===void 0?null:a;var l=t();if(ws){St(!0);try{t()}finally{St(!1)}}return s.memoizedState=[l,a],l},useReducer:function(t,a,s){var l=Nt();if(s!==void 0){var i=s(a);if(ws){St(!0);try{s(a)}finally{St(!1)}}}else i=a;return l.memoizedState=l.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},l.queue=t,t=t.dispatch=zx.bind(null,ke,t),[l.memoizedState,t]},useRef:function(t){var a=Nt();return t={current:t},a.memoizedState=t},useState:function(t){t=Kr(t);var a=t.queue,s=Nu.bind(null,ke,a);return a.dispatch=s,[t.memoizedState,s]},useDebugValue:ec,useDeferredValue:function(t,a){var s=Nt();return tc(s,t,a)},useTransition:function(){var t=Kr(!1);return t=pu.bind(null,ke,t.queue,!0,!1),Nt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,s){var l=ke,i=Nt();if(Ue){if(s===void 0)throw Error(o(407));s=s()}else{if(s=a(),Je===null)throw Error(o(349));(Oe&127)!==0||Qd(l,a,s)}i.memoizedState=s;var r={value:s,getSnapshot:a};return i.queue=r,cu(Zd.bind(null,l,r,t),[t]),l.flags|=2048,ll(9,{destroy:void 0},Vd.bind(null,l,r,s,a),null),s},useId:function(){var t=Nt(),a=Je.identifierPrefix;if(Ue){var s=ra,l=ia;s=(l&~(1<<32-bt(l)-1)).toString(32)+s,a="_"+a+"R_"+s,s=Kn++,0<s&&(a+="H"+s.toString(32)),a+="_"}else s=Ex++,a="_"+a+"r_"+s.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:sc,useFormState:su,useActionState:su,useOptimistic:function(t){var a=Nt();a.memoizedState=a.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=lc.bind(null,ke,!0,s),s.dispatch=a,[t,a]},useMemoCache:Zr,useCacheRefresh:function(){return Nt().memoizedState=Rx.bind(null,ke)},useEffectEvent:function(t){var a=Nt(),s={impl:t};return a.memoizedState=s,function(){if((Ye&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}},nc={readContext:ft,use:In,useCallback:fu,useContext:ft,useEffect:Ir,useImperativeHandle:hu,useInsertionEffect:du,useLayoutEffect:uu,useMemo:xu,useReducer:ei,useRef:ru,useState:function(){return ei(ja)},useDebugValue:ec,useDeferredValue:function(t,a){var s=lt();return gu(s,$e.memoizedState,t,a)},useTransition:function(){var t=ei(ja)[0],a=lt().memoizedState;return[typeof t=="boolean"?t:$l(t),a]},useSyncExternalStore:$d,useId:yu,useHostTransitionStatus:sc,useFormState:lu,useActionState:lu,useOptimistic:function(t,a){var s=lt();return Kd(s,$e,t,a)},useMemoCache:Zr,useCacheRefresh:ju};nc.useEffectEvent=ou;var Cu={readContext:ft,use:In,useCallback:fu,useContext:ft,useEffect:Ir,useImperativeHandle:hu,useInsertionEffect:du,useLayoutEffect:uu,useMemo:xu,useReducer:Pr,useRef:ru,useState:function(){return Pr(ja)},useDebugValue:ec,useDeferredValue:function(t,a){var s=lt();return $e===null?tc(s,t,a):gu(s,$e.memoizedState,t,a)},useTransition:function(){var t=Pr(ja)[0],a=lt().memoizedState;return[typeof t=="boolean"?t:$l(t),a]},useSyncExternalStore:$d,useId:yu,useHostTransitionStatus:sc,useFormState:iu,useActionState:iu,useOptimistic:function(t,a){var s=lt();return $e!==null?Kd(s,$e,t,a):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Zr,useCacheRefresh:ju};Cu.useEffectEvent=ou;function ic(t,a,s,l){a=t.memoizedState,s=s(l,a),s=s==null?a:x({},a,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var rc={enqueueSetState:function(t,a,s){t=t._reactInternals;var l=qt(),i=Ga(l);i.payload=a,s!=null&&(i.callback=s),a=Xa(t,i,l),a!==null&&(Mt(a,t,l),Yl(a,t,l))},enqueueReplaceState:function(t,a,s){t=t._reactInternals;var l=qt(),i=Ga(l);i.tag=1,i.payload=a,s!=null&&(i.callback=s),a=Xa(t,i,l),a!==null&&(Mt(a,t,l),Yl(a,t,l))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var s=qt(),l=Ga(s);l.tag=2,a!=null&&(l.callback=a),a=Xa(t,l,s),a!==null&&(Mt(a,t,s),Yl(a,t,s))}};function Eu(t,a,s,l,i,r,h){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,r,h):a.prototype&&a.prototype.isPureReactComponent?!Rl(s,l)||!Rl(i,r):!0}function ku(t,a,s,l){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,l),a.state!==t&&rc.enqueueReplaceState(a,a.state,null)}function Ss(t,a){var s=a;if("ref"in a){s={};for(var l in a)l!=="ref"&&(s[l]=a[l])}if(t=t.defaultProps){s===a&&(s=x({},s));for(var i in t)s[i]===void 0&&(s[i]=t[i])}return s}function Du(t){On(t)}function Au(t){console.error(t)}function Tu(t){On(t)}function li(t,a){try{var s=t.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function Mu(t,a,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function cc(t,a,s){return s=Ga(s),s.tag=3,s.payload={element:null},s.callback=function(){li(t,a)},s}function Ru(t){return t=Ga(t),t.tag=3,t}function zu(t,a,s,l){var i=s.type.getDerivedStateFromError;if(typeof i=="function"){var r=l.value;t.payload=function(){return i(r)},t.callback=function(){Mu(a,s,l)}}var h=s.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(t.callback=function(){Mu(a,s,l),typeof i!="function"&&(Pa===null?Pa=new Set([this]):Pa.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function Ox(t,a,s,l,i){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=s.alternate,a!==null&&Ps(a,s,i,!0),s=Lt.current,s!==null){switch(s.tag){case 31:case 13:return Kt===null?gi():s.alternate===null&&tt===0&&(tt=3),s.flags&=-257,s.flags|=65536,s.lanes=i,l===$n?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([l]):a.add(l),Rc(t,l,i)),!1;case 22:return s.flags|=65536,l===$n?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([l]):s.add(l)),Rc(t,l,i)),!1}throw Error(o(435,s.tag))}return Rc(t,l,i),gi(),!1}if(Ue)return a=Lt.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=i,l!==Er&&(t=Error(o(422),{cause:l}),Ll(Vt(t,s)))):(l!==Er&&(a=Error(o(423),{cause:l}),Ll(Vt(a,s))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,l=Vt(l,s),i=cc(t.stateNode,l,i),Br(t,i),tt!==4&&(tt=2)),!1;var r=Error(o(520),{cause:l});if(r=Vt(r,s),tn===null?tn=[r]:tn.push(r),tt!==4&&(tt=2),a===null)return!0;l=Vt(l,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,t=i&-i,s.lanes|=t,t=cc(s.stateNode,l,t),Br(s,t),!1;case 1:if(a=s.type,r=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Pa===null||!Pa.has(r))))return s.flags|=65536,i&=-i,s.lanes|=i,i=Ru(i),zu(i,t,s,l),Br(s,i),!1}s=s.return}while(s!==null);return!1}var oc=Error(o(461)),ct=!1;function xt(t,a,s,l){a.child=t===null?Bd(a,null,s,l):Ns(a,t.child,s,l)}function Ou(t,a,s,l,i){s=s.render;var r=a.ref;if("ref"in l){var h={};for(var w in l)w!=="ref"&&(h[w]=l[w])}else h=l;return bs(a),l=Xr(t,a,s,h,r,i),w=$r(),t!==null&&!ct?(Qr(t,a,i),Na(t,a,i)):(Ue&&w&&_r(a),a.flags|=1,xt(t,a,l,i),a.child)}function Lu(t,a,s,l,i){if(t===null){var r=s.type;return typeof r=="function"&&!Nr(r)&&r.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=r,Uu(t,a,r,l,i)):(t=Hn(s.type,null,l,a,a.mode,i),t.ref=a.ref,t.return=a,a.child=t)}if(r=t.child,!pc(t,i)){var h=r.memoizedProps;if(s=s.compare,s=s!==null?s:Rl,s(h,l)&&t.ref===a.ref)return Na(t,a,i)}return a.flags|=1,t=ga(r,l),t.ref=a.ref,t.return=a,a.child=t}function Uu(t,a,s,l,i){if(t!==null){var r=t.memoizedProps;if(Rl(r,l)&&t.ref===a.ref)if(ct=!1,a.pendingProps=l=r,pc(t,i))(t.flags&131072)!==0&&(ct=!0);else return a.lanes=t.lanes,Na(t,a,i)}return dc(t,a,s,l,i)}function Bu(t,a,s,l){var i=l.children,r=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((a.flags&128)!==0){if(r=r!==null?r.baseLanes|s:s,t!==null){for(l=a.child=t.child,i=0;l!==null;)i=i|l.lanes|l.childLanes,l=l.sibling;l=i&~r}else l=0,a.child=null;return Hu(t,a,r,s,l)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&Gn(a,r!==null?r.cachePool:null),r!==null?Yd(a,r):qr(),Fd(a);else return l=a.lanes=536870912,Hu(t,a,r!==null?r.baseLanes|s:s,s,l)}else r!==null?(Gn(a,r.cachePool),Yd(a,r),Qa(),a.memoizedState=null):(t!==null&&Gn(a,null),qr(),Qa());return xt(t,a,i,s),a.child}function Zl(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Hu(t,a,s,l,i){var r=zr();return r=r===null?null:{parent:it._currentValue,pool:r},a.memoizedState={baseLanes:s,cachePool:r},t!==null&&Gn(a,null),qr(),Fd(a),t!==null&&Ps(t,a,l,!0),a.childLanes=i,null}function ni(t,a){return a=ri({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function qu(t,a,s){return Ns(a,t.child,null,s),t=ni(a,a.pendingProps),t.flags|=2,Ut(a),a.memoizedState=null,t}function Lx(t,a,s){var l=a.pendingProps,i=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(Ue){if(l.mode==="hidden")return t=ni(a,l),a.lanes=536870912,Zl(null,t);if(Fr(a),(t=Pe)?(t=Wm(t,Pt),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Ba!==null?{id:ia,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},s=wd(t),s.return=a,a.child=s,ht=a,Pe=null)):t=null,t===null)throw qa(a);return a.lanes=536870912,null}return ni(a,l)}var r=t.memoizedState;if(r!==null){var h=r.dehydrated;if(Fr(a),i)if(a.flags&256)a.flags&=-257,a=qu(t,a,s);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(o(558));else if(ct||Ps(t,a,s,!1),i=(s&t.childLanes)!==0,ct||i){if(l=Je,l!==null&&(h=Sn(l,s),h!==0&&h!==r.retryLane))throw r.retryLane=h,fs(t,h),Mt(l,t,h),oc;gi(),a=qu(t,a,s)}else t=r.treeContext,Pe=Wt(h.nextSibling),ht=a,Ue=!0,Ha=null,Pt=!1,t!==null&&Cd(a,t),a=ni(a,l),a.flags|=4096;return a}return t=ga(t.child,{mode:l.mode,children:l.children}),t.ref=a.ref,a.child=t,t.return=a,t}function ii(t,a){var s=a.ref;if(s===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(o(284));(t===null||t.ref!==s)&&(a.flags|=4194816)}}function dc(t,a,s,l,i){return bs(a),s=Xr(t,a,s,l,void 0,i),l=$r(),t!==null&&!ct?(Qr(t,a,i),Na(t,a,i)):(Ue&&l&&_r(a),a.flags|=1,xt(t,a,s,i),a.child)}function Yu(t,a,s,l,i,r){return bs(a),a.updateQueue=null,s=Xd(a,l,s,i),Gd(t),l=$r(),t!==null&&!ct?(Qr(t,a,r),Na(t,a,r)):(Ue&&l&&_r(a),a.flags|=1,xt(t,a,s,r),a.child)}function Fu(t,a,s,l,i){if(bs(a),a.stateNode===null){var r=Qs,h=s.contextType;typeof h=="object"&&h!==null&&(r=ft(h)),r=new s(l,r),a.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=rc,a.stateNode=r,r._reactInternals=a,r=a.stateNode,r.props=l,r.state=a.memoizedState,r.refs={},Lr(a),h=s.contextType,r.context=typeof h=="object"&&h!==null?ft(h):Qs,r.state=a.memoizedState,h=s.getDerivedStateFromProps,typeof h=="function"&&(ic(a,s,h,l),r.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(h=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),h!==r.state&&rc.enqueueReplaceState(r,r.state,null),Gl(a,l,r,i),Fl(),r.state=a.memoizedState),typeof r.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(t===null){r=a.stateNode;var w=a.memoizedProps,R=Ss(s,w);r.props=R;var Z=r.context,ae=s.contextType;h=Qs,typeof ae=="object"&&ae!==null&&(h=ft(ae));var ce=s.getDerivedStateFromProps;ae=typeof ce=="function"||typeof r.getSnapshotBeforeUpdate=="function",w=a.pendingProps!==w,ae||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(w||Z!==h)&&ku(a,r,l,h),Fa=!1;var J=a.memoizedState;r.state=J,Gl(a,l,r,i),Fl(),Z=a.memoizedState,w||J!==Z||Fa?(typeof ce=="function"&&(ic(a,s,ce,l),Z=a.memoizedState),(R=Fa||Eu(a,s,R,l,J,Z,h))?(ae||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(a.flags|=4194308)):(typeof r.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=Z),r.props=l,r.state=Z,r.context=h,l=R):(typeof r.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{r=a.stateNode,Ur(t,a),h=a.memoizedProps,ae=Ss(s,h),r.props=ae,ce=a.pendingProps,J=r.context,Z=s.contextType,R=Qs,typeof Z=="object"&&Z!==null&&(R=ft(Z)),w=s.getDerivedStateFromProps,(Z=typeof w=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(h!==ce||J!==R)&&ku(a,r,l,R),Fa=!1,J=a.memoizedState,r.state=J,Gl(a,l,r,i),Fl();var K=a.memoizedState;h!==ce||J!==K||Fa||t!==null&&t.dependencies!==null&&Yn(t.dependencies)?(typeof w=="function"&&(ic(a,s,w,l),K=a.memoizedState),(ae=Fa||Eu(a,s,ae,l,J,K,R)||t!==null&&t.dependencies!==null&&Yn(t.dependencies))?(Z||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(l,K,R),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(l,K,R)),typeof r.componentDidUpdate=="function"&&(a.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof r.componentDidUpdate!="function"||h===t.memoizedProps&&J===t.memoizedState||(a.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&J===t.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=K),r.props=l,r.state=K,r.context=R,l=ae):(typeof r.componentDidUpdate!="function"||h===t.memoizedProps&&J===t.memoizedState||(a.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&J===t.memoizedState||(a.flags|=1024),l=!1)}return r=l,ii(t,a),l=(a.flags&128)!==0,r||l?(r=a.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:r.render(),a.flags|=1,t!==null&&l?(a.child=Ns(a,t.child,null,i),a.child=Ns(a,null,s,i)):xt(t,a,s,i),a.memoizedState=r.state,t=a.child):t=Na(t,a,i),t}function Gu(t,a,s,l){return gs(),a.flags|=256,xt(t,a,s,l),a.child}var uc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mc(t){return{baseLanes:t,cachePool:Md()}}function hc(t,a,s){return t=t!==null?t.childLanes&~s:0,a&&(t|=Ht),t}function Xu(t,a,s){var l=a.pendingProps,i=!1,r=(a.flags&128)!==0,h;if((h=r)||(h=t!==null&&t.memoizedState===null?!1:(st.current&2)!==0),h&&(i=!0,a.flags&=-129),h=(a.flags&32)!==0,a.flags&=-33,t===null){if(Ue){if(i?$a(a):Qa(),(t=Pe)?(t=Wm(t,Pt),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Ba!==null?{id:ia,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},s=wd(t),s.return=a,a.child=s,ht=a,Pe=null)):t=null,t===null)throw qa(a);return Jc(t)?a.lanes=32:a.lanes=536870912,null}var w=l.children;return l=l.fallback,i?(Qa(),i=a.mode,w=ri({mode:"hidden",children:w},i),l=xs(l,i,s,null),w.return=a,l.return=a,w.sibling=l,a.child=w,l=a.child,l.memoizedState=mc(s),l.childLanes=hc(t,h,s),a.memoizedState=uc,Zl(null,l)):($a(a),fc(a,w))}var R=t.memoizedState;if(R!==null&&(w=R.dehydrated,w!==null)){if(r)a.flags&256?($a(a),a.flags&=-257,a=xc(t,a,s)):a.memoizedState!==null?(Qa(),a.child=t.child,a.flags|=128,a=null):(Qa(),w=l.fallback,i=a.mode,l=ri({mode:"visible",children:l.children},i),w=xs(w,i,s,null),w.flags|=2,l.return=a,w.return=a,l.sibling=w,a.child=l,Ns(a,t.child,null,s),l=a.child,l.memoizedState=mc(s),l.childLanes=hc(t,h,s),a.memoizedState=uc,a=Zl(null,l));else if($a(a),Jc(w)){if(h=w.nextSibling&&w.nextSibling.dataset,h)var Z=h.dgst;h=Z,l=Error(o(419)),l.stack="",l.digest=h,Ll({value:l,source:null,stack:null}),a=xc(t,a,s)}else if(ct||Ps(t,a,s,!1),h=(s&t.childLanes)!==0,ct||h){if(h=Je,h!==null&&(l=Sn(h,s),l!==0&&l!==R.retryLane))throw R.retryLane=l,fs(t,l),Mt(h,t,l),oc;Zc(w)||gi(),a=xc(t,a,s)}else Zc(w)?(a.flags|=192,a.child=t.child,a=null):(t=R.treeContext,Pe=Wt(w.nextSibling),ht=a,Ue=!0,Ha=null,Pt=!1,t!==null&&Cd(a,t),a=fc(a,l.children),a.flags|=4096);return a}return i?(Qa(),w=l.fallback,i=a.mode,R=t.child,Z=R.sibling,l=ga(R,{mode:"hidden",children:l.children}),l.subtreeFlags=R.subtreeFlags&65011712,Z!==null?w=ga(Z,w):(w=xs(w,i,s,null),w.flags|=2),w.return=a,l.return=a,l.sibling=w,a.child=l,Zl(null,l),l=a.child,w=t.child.memoizedState,w===null?w=mc(s):(i=w.cachePool,i!==null?(R=it._currentValue,i=i.parent!==R?{parent:R,pool:R}:i):i=Md(),w={baseLanes:w.baseLanes|s,cachePool:i}),l.memoizedState=w,l.childLanes=hc(t,h,s),a.memoizedState=uc,Zl(t.child,l)):($a(a),s=t.child,t=s.sibling,s=ga(s,{mode:"visible",children:l.children}),s.return=a,s.sibling=null,t!==null&&(h=a.deletions,h===null?(a.deletions=[t],a.flags|=16):h.push(t)),a.child=s,a.memoizedState=null,s)}function fc(t,a){return a=ri({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function ri(t,a){return t=Ot(22,t,null,a),t.lanes=0,t}function xc(t,a,s){return Ns(a,t.child,null,s),t=fc(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function $u(t,a,s){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a),Ar(t.return,a,s)}function gc(t,a,s,l,i,r){var h=t.memoizedState;h===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:i,treeForkCount:r}:(h.isBackwards=a,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=s,h.tailMode=i,h.treeForkCount=r)}function Qu(t,a,s){var l=a.pendingProps,i=l.revealOrder,r=l.tail;l=l.children;var h=st.current,w=(h&2)!==0;if(w?(h=h&1|2,a.flags|=128):h&=1,W(st,h),xt(t,a,l,s),l=Ue?Ol:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$u(t,s,a);else if(t.tag===19)$u(t,s,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(i){case"forwards":for(s=a.child,i=null;s!==null;)t=s.alternate,t!==null&&Jn(t)===null&&(i=s),s=s.sibling;s=i,s===null?(i=a.child,a.child=null):(i=s.sibling,s.sibling=null),gc(a,!1,i,s,r,l);break;case"backwards":case"unstable_legacy-backwards":for(s=null,i=a.child,a.child=null;i!==null;){if(t=i.alternate,t!==null&&Jn(t)===null){a.child=i;break}t=i.sibling,i.sibling=s,s=i,i=t}gc(a,!0,s,null,r,l);break;case"together":gc(a,!1,null,null,void 0,l);break;default:a.memoizedState=null}return a.child}function Na(t,a,s){if(t!==null&&(a.dependencies=t.dependencies),Ja|=a.lanes,(s&a.childLanes)===0)if(t!==null){if(Ps(t,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(o(153));if(a.child!==null){for(t=a.child,s=ga(t,t.pendingProps),a.child=s,s.return=a;t.sibling!==null;)t=t.sibling,s=s.sibling=ga(t,t.pendingProps),s.return=a;s.sibling=null}return a.child}function pc(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Yn(t)))}function Ux(t,a,s){switch(a.tag){case 3:Ce(a,a.stateNode.containerInfo),Ya(a,it,t.memoizedState.cache),gs();break;case 27:case 5:M(a);break;case 4:Ce(a,a.stateNode.containerInfo);break;case 10:Ya(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Fr(a),null;break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?($a(a),a.flags|=128,null):(s&a.child.childLanes)!==0?Xu(t,a,s):($a(a),t=Na(t,a,s),t!==null?t.sibling:null);$a(a);break;case 19:var i=(t.flags&128)!==0;if(l=(s&a.childLanes)!==0,l||(Ps(t,a,s,!1),l=(s&a.childLanes)!==0),i){if(l)return Qu(t,a,s);a.flags|=128}if(i=a.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),W(st,st.current),l)break;return null;case 22:return a.lanes=0,Bu(t,a,s,a.pendingProps);case 24:Ya(a,it,t.memoizedState.cache)}return Na(t,a,s)}function Vu(t,a,s){if(t!==null)if(t.memoizedProps!==a.pendingProps)ct=!0;else{if(!pc(t,s)&&(a.flags&128)===0)return ct=!1,Ux(t,a,s);ct=(t.flags&131072)!==0}else ct=!1,Ue&&(a.flags&1048576)!==0&&_d(a,Ol,a.index);switch(a.lanes=0,a.tag){case 16:e:{var l=a.pendingProps;if(t=ys(a.elementType),a.type=t,typeof t=="function")Nr(t)?(l=Ss(t,l),a.tag=1,a=Fu(null,a,t,l,s)):(a.tag=0,a=dc(null,a,t,l,s));else{if(t!=null){var i=t.$$typeof;if(i===I){a.tag=11,a=Ou(null,a,t,l,s);break e}else if(i===V){a.tag=14,a=Lu(null,a,t,l,s);break e}}throw a=H(t)||t,Error(o(306,a,""))}}return a;case 0:return dc(t,a,a.type,a.pendingProps,s);case 1:return l=a.type,i=Ss(l,a.pendingProps),Fu(t,a,l,i,s);case 3:e:{if(Ce(a,a.stateNode.containerInfo),t===null)throw Error(o(387));l=a.pendingProps;var r=a.memoizedState;i=r.element,Ur(t,a),Gl(a,l,null,s);var h=a.memoizedState;if(l=h.cache,Ya(a,it,l),l!==r.cache&&Tr(a,[it],s,!0),Fl(),l=h.element,r.isDehydrated)if(r={element:l,isDehydrated:!1,cache:h.cache},a.updateQueue.baseState=r,a.memoizedState=r,a.flags&256){a=Gu(t,a,l,s);break e}else if(l!==i){i=Vt(Error(o(424)),a),Ll(i),a=Gu(t,a,l,s);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Pe=Wt(t.firstChild),ht=a,Ue=!0,Ha=null,Pt=!0,s=Bd(a,null,l,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(gs(),l===i){a=Na(t,a,s);break e}xt(t,a,l,s)}a=a.child}return a;case 26:return ii(t,a),t===null?(s=lh(a.type,null,a.pendingProps,null))?a.memoizedState=s:Ue||(s=a.type,t=a.pendingProps,l=wi(P.current).createElement(s),l[at]=a,l[Ct]=t,gt(l,s,t),ut(l),a.stateNode=l):a.memoizedState=lh(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return M(a),t===null&&Ue&&(l=a.stateNode=th(a.type,a.pendingProps,P.current),ht=a,Pt=!0,i=Pe,es(a.type)?(Pc=i,Pe=Wt(l.firstChild)):Pe=i),xt(t,a,a.pendingProps.children,s),ii(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&Ue&&((i=l=Pe)&&(l=hg(l,a.type,a.pendingProps,Pt),l!==null?(a.stateNode=l,ht=a,Pe=Wt(l.firstChild),Pt=!1,i=!0):i=!1),i||qa(a)),M(a),i=a.type,r=a.pendingProps,h=t!==null?t.memoizedProps:null,l=r.children,$c(i,r)?l=null:h!==null&&$c(i,h)&&(a.flags|=32),a.memoizedState!==null&&(i=Xr(t,a,kx,null,null,s),dn._currentValue=i),ii(t,a),xt(t,a,l,s),a.child;case 6:return t===null&&Ue&&((t=s=Pe)&&(s=fg(s,a.pendingProps,Pt),s!==null?(a.stateNode=s,ht=a,Pe=null,t=!0):t=!1),t||qa(a)),null;case 13:return Xu(t,a,s);case 4:return Ce(a,a.stateNode.containerInfo),l=a.pendingProps,t===null?a.child=Ns(a,null,l,s):xt(t,a,l,s),a.child;case 11:return Ou(t,a,a.type,a.pendingProps,s);case 7:return xt(t,a,a.pendingProps,s),a.child;case 8:return xt(t,a,a.pendingProps.children,s),a.child;case 12:return xt(t,a,a.pendingProps.children,s),a.child;case 10:return l=a.pendingProps,Ya(a,a.type,l.value),xt(t,a,l.children,s),a.child;case 9:return i=a.type._context,l=a.pendingProps.children,bs(a),i=ft(i),l=l(i),a.flags|=1,xt(t,a,l,s),a.child;case 14:return Lu(t,a,a.type,a.pendingProps,s);case 15:return Uu(t,a,a.type,a.pendingProps,s);case 19:return Qu(t,a,s);case 31:return Lx(t,a,s);case 22:return Bu(t,a,s,a.pendingProps);case 24:return bs(a),l=ft(it),t===null?(i=zr(),i===null&&(i=Je,r=Mr(),i.pooledCache=r,r.refCount++,r!==null&&(i.pooledCacheLanes|=s),i=r),a.memoizedState={parent:l,cache:i},Lr(a),Ya(a,it,i)):((t.lanes&s)!==0&&(Ur(t,a),Gl(a,null,null,s),Fl()),i=t.memoizedState,r=a.memoizedState,i.parent!==l?(i={parent:l,cache:l},a.memoizedState=i,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=i),Ya(a,it,l)):(l=r.cache,Ya(a,it,l),l!==i.cache&&Tr(a,[it],s,!0))),xt(t,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(o(156,a.tag))}function wa(t){t.flags|=4}function bc(t,a,s,l,i){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(i&335544128)===i)if(t.stateNode.complete)t.flags|=8192;else if(ym())t.flags|=8192;else throw js=$n,Or}else t.flags&=-16777217}function Zu(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!oh(a))if(ym())t.flags|=8192;else throw js=$n,Or}function ci(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Nn():536870912,t.lanes|=a,cl|=a)}function Jl(t,a){if(!Ue)switch(t.tailMode){case"hidden":a=t.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Ke(t){var a=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(a)for(var i=t.child;i!==null;)s|=i.lanes|i.childLanes,l|=i.subtreeFlags&65011712,l|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)s|=i.lanes|i.childLanes,l|=i.subtreeFlags,l|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=l,t.childLanes=s,a}function Bx(t,a,s){var l=a.pendingProps;switch(Cr(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(a),null;case 1:return Ke(a),null;case 3:return s=a.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),va(it),ee(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Js(a)?wa(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,kr())),Ke(a),null;case 26:var i=a.type,r=a.memoizedState;return t===null?(wa(a),r!==null?(Ke(a),Zu(a,r)):(Ke(a),bc(a,i,null,l,s))):r?r!==t.memoizedState?(wa(a),Ke(a),Zu(a,r)):(Ke(a),a.flags&=-16777217):(t=t.memoizedProps,t!==l&&wa(a),Ke(a),bc(a,i,t,l,s)),null;case 27:if(de(a),s=P.current,i=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&wa(a);else{if(!l){if(a.stateNode===null)throw Error(o(166));return Ke(a),null}t=F.current,Js(a)?Ed(a):(t=th(i,l,s),a.stateNode=t,wa(a))}return Ke(a),null;case 5:if(de(a),i=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&wa(a);else{if(!l){if(a.stateNode===null)throw Error(o(166));return Ke(a),null}if(r=F.current,Js(a))Ed(a);else{var h=wi(P.current);switch(r){case 1:r=h.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:r=h.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":r=h.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":r=h.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":r=h.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?r.multiple=!0:l.size&&(r.size=l.size);break;default:r=typeof l.is=="string"?h.createElement(i,{is:l.is}):h.createElement(i)}}r[at]=a,r[Ct]=l;e:for(h=a.child;h!==null;){if(h.tag===5||h.tag===6)r.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===a)break e;for(;h.sibling===null;){if(h.return===null||h.return===a)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}a.stateNode=r;e:switch(gt(r,i,l),i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&wa(a)}}return Ke(a),bc(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,s),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==l&&wa(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(o(166));if(t=P.current,Js(a)){if(t=a.stateNode,s=a.memoizedProps,l=null,i=ht,i!==null)switch(i.tag){case 27:case 5:l=i.memoizedProps}t[at]=a,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Xm(t.nodeValue,s)),t||qa(a,!0)}else t=wi(t).createTextNode(l),t[at]=a,a.stateNode=t}return Ke(a),null;case 31:if(s=a.memoizedState,t===null||t.memoizedState!==null){if(l=Js(a),s!==null){if(t===null){if(!l)throw Error(o(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[at]=a}else gs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ke(a),t=!1}else s=kr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),t=!0;if(!t)return a.flags&256?(Ut(a),a):(Ut(a),null);if((a.flags&128)!==0)throw Error(o(558))}return Ke(a),null;case 13:if(l=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=Js(a),l!==null&&l.dehydrated!==null){if(t===null){if(!i)throw Error(o(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));i[at]=a}else gs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ke(a),i=!1}else i=kr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return a.flags&256?(Ut(a),a):(Ut(a),null)}return Ut(a),(a.flags&128)!==0?(a.lanes=s,a):(s=l!==null,t=t!==null&&t.memoizedState!==null,s&&(l=a.child,i=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(i=l.alternate.memoizedState.cachePool.pool),r=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==i&&(l.flags|=2048)),s!==t&&s&&(a.child.flags|=8192),ci(a,a.updateQueue),Ke(a),null);case 4:return ee(),t===null&&qc(a.stateNode.containerInfo),Ke(a),null;case 10:return va(a.type),Ke(a),null;case 19:if(L(st),l=a.memoizedState,l===null)return Ke(a),null;if(i=(a.flags&128)!==0,r=l.rendering,r===null)if(i)Jl(l,!1);else{if(tt!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(r=Jn(t),r!==null){for(a.flags|=128,Jl(l,!1),t=r.updateQueue,a.updateQueue=t,ci(a,t),a.subtreeFlags=0,t=s,s=a.child;s!==null;)Nd(s,t),s=s.sibling;return W(st,st.current&1|2),Ue&&pa(a,l.treeForkCount),a.child}t=t.sibling}l.tail!==null&&pt()>hi&&(a.flags|=128,i=!0,Jl(l,!1),a.lanes=4194304)}else{if(!i)if(t=Jn(r),t!==null){if(a.flags|=128,i=!0,t=t.updateQueue,a.updateQueue=t,ci(a,t),Jl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!r.alternate&&!Ue)return Ke(a),null}else 2*pt()-l.renderingStartTime>hi&&s!==536870912&&(a.flags|=128,i=!0,Jl(l,!1),a.lanes=4194304);l.isBackwards?(r.sibling=a.child,a.child=r):(t=l.last,t!==null?t.sibling=r:a.child=r,l.last=r)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=pt(),t.sibling=null,s=st.current,W(st,i?s&1|2:s&1),Ue&&pa(a,l.treeForkCount),t):(Ke(a),null);case 22:case 23:return Ut(a),Yr(),l=a.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(s&536870912)!==0&&(a.flags&128)===0&&(Ke(a),a.subtreeFlags&6&&(a.flags|=8192)):Ke(a),s=a.updateQueue,s!==null&&ci(a,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==s&&(a.flags|=2048),t!==null&&L(vs),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),va(it),Ke(a),null;case 25:return null;case 30:return null}throw Error(o(156,a.tag))}function Hx(t,a){switch(Cr(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return va(it),ee(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return de(a),null;case 31:if(a.memoizedState!==null){if(Ut(a),a.alternate===null)throw Error(o(340));gs()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(Ut(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(o(340));gs()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return L(st),null;case 4:return ee(),null;case 10:return va(a.type),null;case 22:case 23:return Ut(a),Yr(),t!==null&&L(vs),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return va(it),null;case 25:return null;default:return null}}function Ju(t,a){switch(Cr(a),a.tag){case 3:va(it),ee();break;case 26:case 27:case 5:de(a);break;case 4:ee();break;case 31:a.memoizedState!==null&&Ut(a);break;case 13:Ut(a);break;case 19:L(st);break;case 10:va(a.type);break;case 22:case 23:Ut(a),Yr(),t!==null&&L(vs);break;case 24:va(it)}}function Pl(t,a){try{var s=a.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var i=l.next;s=i;do{if((s.tag&t)===t){l=void 0;var r=s.create,h=s.inst;l=r(),h.destroy=l}s=s.next}while(s!==i)}}catch(w){Xe(a,a.return,w)}}function Va(t,a,s){try{var l=a.updateQueue,i=l!==null?l.lastEffect:null;if(i!==null){var r=i.next;l=r;do{if((l.tag&t)===t){var h=l.inst,w=h.destroy;if(w!==void 0){h.destroy=void 0,i=a;var R=s,Z=w;try{Z()}catch(ae){Xe(i,R,ae)}}}l=l.next}while(l!==r)}}catch(ae){Xe(a,a.return,ae)}}function Pu(t){var a=t.updateQueue;if(a!==null){var s=t.stateNode;try{qd(a,s)}catch(l){Xe(t,t.return,l)}}}function Ku(t,a,s){s.props=Ss(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){Xe(t,a,l)}}function Kl(t,a){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(i){Xe(t,a,i)}}function ca(t,a){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(i){Xe(t,a,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(i){Xe(t,a,i)}else s.current=null}function Wu(t){var a=t.type,s=t.memoizedProps,l=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(i){Xe(t,t.return,i)}}function vc(t,a,s){try{var l=t.stateNode;rg(l,t.type,s,a),l[Ct]=a}catch(i){Xe(t,t.return,i)}}function Iu(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&es(t.type)||t.tag===4}function yc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Iu(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&es(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jc(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(t),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=fa));else if(l!==4&&(l===27&&es(t.type)&&(s=t.stateNode,a=null),t=t.child,t!==null))for(jc(t,a,s),t=t.sibling;t!==null;)jc(t,a,s),t=t.sibling}function oi(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?s.insertBefore(t,a):s.appendChild(t);else if(l!==4&&(l===27&&es(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(oi(t,a,s),t=t.sibling;t!==null;)oi(t,a,s),t=t.sibling}function em(t){var a=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,i=a.attributes;i.length;)a.removeAttributeNode(i[0]);gt(a,l,s),a[at]=t,a[Ct]=s}catch(r){Xe(t,t.return,r)}}var Sa=!1,ot=!1,Nc=!1,tm=typeof WeakSet=="function"?WeakSet:Set,mt=null;function qx(t,a){if(t=t.containerInfo,Gc=Ai,t=hd(t),xr(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var i=l.anchorOffset,r=l.focusNode;l=l.focusOffset;try{s.nodeType,r.nodeType}catch{s=null;break e}var h=0,w=-1,R=-1,Z=0,ae=0,ce=t,J=null;t:for(;;){for(var K;ce!==s||i!==0&&ce.nodeType!==3||(w=h+i),ce!==r||l!==0&&ce.nodeType!==3||(R=h+l),ce.nodeType===3&&(h+=ce.nodeValue.length),(K=ce.firstChild)!==null;)J=ce,ce=K;for(;;){if(ce===t)break t;if(J===s&&++Z===i&&(w=h),J===r&&++ae===l&&(R=h),(K=ce.nextSibling)!==null)break;ce=J,J=ce.parentNode}ce=K}s=w===-1||R===-1?null:{start:w,end:R}}else s=null}s=s||{start:0,end:0}}else s=null;for(Xc={focusedElem:t,selectionRange:s},Ai=!1,mt=a;mt!==null;)if(a=mt,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,mt=t;else for(;mt!==null;){switch(a=mt,r=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(s=0;s<t.length;s++)i=t[s],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&r!==null){t=void 0,s=a,i=r.memoizedProps,r=r.memoizedState,l=s.stateNode;try{var ye=Ss(s.type,i);t=l.getSnapshotBeforeUpdate(ye,r),l.__reactInternalSnapshotBeforeUpdate=t}catch(we){Xe(s,s.return,we)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,s=t.nodeType,s===9)Vc(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Vc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=a.sibling,t!==null){t.return=a.return,mt=t;break}mt=a.return}}function am(t,a,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:Ca(t,s),l&4&&Pl(5,s);break;case 1:if(Ca(t,s),l&4)if(t=s.stateNode,a===null)try{t.componentDidMount()}catch(h){Xe(s,s.return,h)}else{var i=Ss(s.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(i,a,t.__reactInternalSnapshotBeforeUpdate)}catch(h){Xe(s,s.return,h)}}l&64&&Pu(s),l&512&&Kl(s,s.return);break;case 3:if(Ca(t,s),l&64&&(t=s.updateQueue,t!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{qd(t,a)}catch(h){Xe(s,s.return,h)}}break;case 27:a===null&&l&4&&em(s);case 26:case 5:Ca(t,s),a===null&&l&4&&Wu(s),l&512&&Kl(s,s.return);break;case 12:Ca(t,s);break;case 31:Ca(t,s),l&4&&nm(t,s);break;case 13:Ca(t,s),l&4&&im(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=Jx.bind(null,s),xg(t,s))));break;case 22:if(l=s.memoizedState!==null||Sa,!l){a=a!==null&&a.memoizedState!==null||ot,i=Sa;var r=ot;Sa=l,(ot=a)&&!r?Ea(t,s,(s.subtreeFlags&8772)!==0):Ca(t,s),Sa=i,ot=r}break;case 30:break;default:Ca(t,s)}}function sm(t){var a=t.alternate;a!==null&&(t.alternate=null,sm(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Wi(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var We=null,kt=!1;function _a(t,a,s){for(s=s.child;s!==null;)lm(t,a,s),s=s.sibling}function lm(t,a,s){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(na,s)}catch{}switch(s.tag){case 26:ot||ca(s,a),_a(t,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:ot||ca(s,a);var l=We,i=kt;es(s.type)&&(We=s.stateNode,kt=!1),_a(t,a,s),rn(s.stateNode),We=l,kt=i;break;case 5:ot||ca(s,a);case 6:if(l=We,i=kt,We=null,_a(t,a,s),We=l,kt=i,We!==null)if(kt)try{(We.nodeType===9?We.body:We.nodeName==="HTML"?We.ownerDocument.body:We).removeChild(s.stateNode)}catch(r){Xe(s,a,r)}else try{We.removeChild(s.stateNode)}catch(r){Xe(s,a,r)}break;case 18:We!==null&&(kt?(t=We,Pm(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),gl(t)):Pm(We,s.stateNode));break;case 4:l=We,i=kt,We=s.stateNode.containerInfo,kt=!0,_a(t,a,s),We=l,kt=i;break;case 0:case 11:case 14:case 15:Va(2,s,a),ot||Va(4,s,a),_a(t,a,s);break;case 1:ot||(ca(s,a),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Ku(s,a,l)),_a(t,a,s);break;case 21:_a(t,a,s);break;case 22:ot=(l=ot)||s.memoizedState!==null,_a(t,a,s),ot=l;break;default:_a(t,a,s)}}function nm(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{gl(t)}catch(s){Xe(a,a.return,s)}}}function im(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{gl(t)}catch(s){Xe(a,a.return,s)}}function Yx(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new tm),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new tm),a;default:throw Error(o(435,t.tag))}}function di(t,a){var s=Yx(t);a.forEach(function(l){if(!s.has(l)){s.add(l);var i=Px.bind(null,t,l);l.then(i,i)}})}function Dt(t,a){var s=a.deletions;if(s!==null)for(var l=0;l<s.length;l++){var i=s[l],r=t,h=a,w=h;e:for(;w!==null;){switch(w.tag){case 27:if(es(w.type)){We=w.stateNode,kt=!1;break e}break;case 5:We=w.stateNode,kt=!1;break e;case 3:case 4:We=w.stateNode.containerInfo,kt=!0;break e}w=w.return}if(We===null)throw Error(o(160));lm(r,h,i),We=null,kt=!1,r=i.alternate,r!==null&&(r.return=null),i.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)rm(a,t),a=a.sibling}var ta=null;function rm(t,a){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Dt(a,t),At(t),l&4&&(Va(3,t,t.return),Pl(3,t),Va(5,t,t.return));break;case 1:Dt(a,t),At(t),l&512&&(ot||s===null||ca(s,s.return)),l&64&&Sa&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var i=ta;if(Dt(a,t),At(t),l&512&&(ot||s===null||ca(s,s.return)),l&4){var r=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){e:{l=t.type,s=t.memoizedProps,i=i.ownerDocument||i;t:switch(l){case"title":r=i.getElementsByTagName("title")[0],(!r||r[Sl]||r[at]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=i.createElement(l),i.head.insertBefore(r,i.querySelector("head > title"))),gt(r,l,s),r[at]=t,ut(r),l=r;break e;case"link":var h=rh("link","href",i).get(l+(s.href||""));if(h){for(var w=0;w<h.length;w++)if(r=h[w],r.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&r.getAttribute("rel")===(s.rel==null?null:s.rel)&&r.getAttribute("title")===(s.title==null?null:s.title)&&r.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){h.splice(w,1);break t}}r=i.createElement(l),gt(r,l,s),i.head.appendChild(r);break;case"meta":if(h=rh("meta","content",i).get(l+(s.content||""))){for(w=0;w<h.length;w++)if(r=h[w],r.getAttribute("content")===(s.content==null?null:""+s.content)&&r.getAttribute("name")===(s.name==null?null:s.name)&&r.getAttribute("property")===(s.property==null?null:s.property)&&r.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&r.getAttribute("charset")===(s.charSet==null?null:s.charSet)){h.splice(w,1);break t}}r=i.createElement(l),gt(r,l,s),i.head.appendChild(r);break;default:throw Error(o(468,l))}r[at]=t,ut(r),l=r}t.stateNode=l}else ch(i,t.type,t.stateNode);else t.stateNode=ih(i,l,t.memoizedProps);else r!==l?(r===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):r.count--,l===null?ch(i,t.type,t.stateNode):ih(i,l,t.memoizedProps)):l===null&&t.stateNode!==null&&vc(t,t.memoizedProps,s.memoizedProps)}break;case 27:Dt(a,t),At(t),l&512&&(ot||s===null||ca(s,s.return)),s!==null&&l&4&&vc(t,t.memoizedProps,s.memoizedProps);break;case 5:if(Dt(a,t),At(t),l&512&&(ot||s===null||ca(s,s.return)),t.flags&32){i=t.stateNode;try{Hs(i,"")}catch(ye){Xe(t,t.return,ye)}}l&4&&t.stateNode!=null&&(i=t.memoizedProps,vc(t,i,s!==null?s.memoizedProps:i)),l&1024&&(Nc=!0);break;case 6:if(Dt(a,t),At(t),l&4){if(t.stateNode===null)throw Error(o(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(ye){Xe(t,t.return,ye)}}break;case 3:if(Ci=null,i=ta,ta=Si(a.containerInfo),Dt(a,t),ta=i,At(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{gl(a.containerInfo)}catch(ye){Xe(t,t.return,ye)}Nc&&(Nc=!1,cm(t));break;case 4:l=ta,ta=Si(t.stateNode.containerInfo),Dt(a,t),At(t),ta=l;break;case 12:Dt(a,t),At(t);break;case 31:Dt(a,t),At(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,di(t,l)));break;case 13:Dt(a,t),At(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(mi=pt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,di(t,l)));break;case 22:i=t.memoizedState!==null;var R=s!==null&&s.memoizedState!==null,Z=Sa,ae=ot;if(Sa=Z||i,ot=ae||R,Dt(a,t),ot=ae,Sa=Z,At(t),l&8192)e:for(a=t.stateNode,a._visibility=i?a._visibility&-2:a._visibility|1,i&&(s===null||R||Sa||ot||_s(t)),s=null,a=t;;){if(a.tag===5||a.tag===26){if(s===null){R=s=a;try{if(r=R.stateNode,i)h=r.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{w=R.stateNode;var ce=R.memoizedProps.style,J=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;w.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ye){Xe(R,R.return,ye)}}}else if(a.tag===6){if(s===null){R=a;try{R.stateNode.nodeValue=i?"":R.memoizedProps}catch(ye){Xe(R,R.return,ye)}}}else if(a.tag===18){if(s===null){R=a;try{var K=R.stateNode;i?Km(K,!0):Km(R.stateNode,!1)}catch(ye){Xe(R,R.return,ye)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,di(t,s))));break;case 19:Dt(a,t),At(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,di(t,l)));break;case 30:break;case 21:break;default:Dt(a,t),At(t)}}function At(t){var a=t.flags;if(a&2){try{for(var s,l=t.return;l!==null;){if(Iu(l)){s=l;break}l=l.return}if(s==null)throw Error(o(160));switch(s.tag){case 27:var i=s.stateNode,r=yc(t);oi(t,r,i);break;case 5:var h=s.stateNode;s.flags&32&&(Hs(h,""),s.flags&=-33);var w=yc(t);oi(t,w,h);break;case 3:case 4:var R=s.stateNode.containerInfo,Z=yc(t);jc(t,Z,R);break;default:throw Error(o(161))}}catch(ae){Xe(t,t.return,ae)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function cm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;cm(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function Ca(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)am(t,a.alternate,a),a=a.sibling}function _s(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:Va(4,a,a.return),_s(a);break;case 1:ca(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&Ku(a,a.return,s),_s(a);break;case 27:rn(a.stateNode);case 26:case 5:ca(a,a.return),_s(a);break;case 22:a.memoizedState===null&&_s(a);break;case 30:_s(a);break;default:_s(a)}t=t.sibling}}function Ea(t,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,i=t,r=a,h=r.flags;switch(r.tag){case 0:case 11:case 15:Ea(i,r,s),Pl(4,r);break;case 1:if(Ea(i,r,s),l=r,i=l.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(Z){Xe(l,l.return,Z)}if(l=r,i=l.updateQueue,i!==null){var w=l.stateNode;try{var R=i.shared.hiddenCallbacks;if(R!==null)for(i.shared.hiddenCallbacks=null,i=0;i<R.length;i++)Hd(R[i],w)}catch(Z){Xe(l,l.return,Z)}}s&&h&64&&Pu(r),Kl(r,r.return);break;case 27:em(r);case 26:case 5:Ea(i,r,s),s&&l===null&&h&4&&Wu(r),Kl(r,r.return);break;case 12:Ea(i,r,s);break;case 31:Ea(i,r,s),s&&h&4&&nm(i,r);break;case 13:Ea(i,r,s),s&&h&4&&im(i,r);break;case 22:r.memoizedState===null&&Ea(i,r,s),Kl(r,r.return);break;case 30:break;default:Ea(i,r,s)}a=a.sibling}}function wc(t,a){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&Ul(s))}function Sc(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Ul(t))}function aa(t,a,s,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)om(t,a,s,l),a=a.sibling}function om(t,a,s,l){var i=a.flags;switch(a.tag){case 0:case 11:case 15:aa(t,a,s,l),i&2048&&Pl(9,a);break;case 1:aa(t,a,s,l);break;case 3:aa(t,a,s,l),i&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Ul(t)));break;case 12:if(i&2048){aa(t,a,s,l),t=a.stateNode;try{var r=a.memoizedProps,h=r.id,w=r.onPostCommit;typeof w=="function"&&w(h,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(R){Xe(a,a.return,R)}}else aa(t,a,s,l);break;case 31:aa(t,a,s,l);break;case 13:aa(t,a,s,l);break;case 23:break;case 22:r=a.stateNode,h=a.alternate,a.memoizedState!==null?r._visibility&2?aa(t,a,s,l):Wl(t,a):r._visibility&2?aa(t,a,s,l):(r._visibility|=2,nl(t,a,s,l,(a.subtreeFlags&10256)!==0||!1)),i&2048&&wc(h,a);break;case 24:aa(t,a,s,l),i&2048&&Sc(a.alternate,a);break;default:aa(t,a,s,l)}}function nl(t,a,s,l,i){for(i=i&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var r=t,h=a,w=s,R=l,Z=h.flags;switch(h.tag){case 0:case 11:case 15:nl(r,h,w,R,i),Pl(8,h);break;case 23:break;case 22:var ae=h.stateNode;h.memoizedState!==null?ae._visibility&2?nl(r,h,w,R,i):Wl(r,h):(ae._visibility|=2,nl(r,h,w,R,i)),i&&Z&2048&&wc(h.alternate,h);break;case 24:nl(r,h,w,R,i),i&&Z&2048&&Sc(h.alternate,h);break;default:nl(r,h,w,R,i)}a=a.sibling}}function Wl(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=t,l=a,i=l.flags;switch(l.tag){case 22:Wl(s,l),i&2048&&wc(l.alternate,l);break;case 24:Wl(s,l),i&2048&&Sc(l.alternate,l);break;default:Wl(s,l)}a=a.sibling}}var Il=8192;function il(t,a,s){if(t.subtreeFlags&Il)for(t=t.child;t!==null;)dm(t,a,s),t=t.sibling}function dm(t,a,s){switch(t.tag){case 26:il(t,a,s),t.flags&Il&&t.memoizedState!==null&&Eg(s,ta,t.memoizedState,t.memoizedProps);break;case 5:il(t,a,s);break;case 3:case 4:var l=ta;ta=Si(t.stateNode.containerInfo),il(t,a,s),ta=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Il,Il=16777216,il(t,a,s),Il=l):il(t,a,s));break;default:il(t,a,s)}}function um(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function en(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];mt=l,hm(l,t)}um(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)mm(t),t=t.sibling}function mm(t){switch(t.tag){case 0:case 11:case 15:en(t),t.flags&2048&&Va(9,t,t.return);break;case 3:en(t);break;case 12:en(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,ui(t)):en(t);break;default:en(t)}}function ui(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];mt=l,hm(l,t)}um(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:Va(8,a,a.return),ui(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,ui(a));break;default:ui(a)}t=t.sibling}}function hm(t,a){for(;mt!==null;){var s=mt;switch(s.tag){case 0:case 11:case 15:Va(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ul(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,mt=l;else e:for(s=t;mt!==null;){l=mt;var i=l.sibling,r=l.return;if(sm(l),l===s){mt=null;break e}if(i!==null){i.return=r,mt=i;break e}mt=r}}}var Fx={getCacheForType:function(t){var a=ft(it),s=a.data.get(t);return s===void 0&&(s=t(),a.data.set(t,s)),s},cacheSignal:function(){return ft(it).controller.signal}},Gx=typeof WeakMap=="function"?WeakMap:Map,Ye=0,Je=null,Me=null,Oe=0,Ge=0,Bt=null,Za=!1,rl=!1,_c=!1,ka=0,tt=0,Ja=0,Cs=0,Cc=0,Ht=0,cl=0,tn=null,Tt=null,Ec=!1,mi=0,fm=0,hi=1/0,fi=null,Pa=null,dt=0,Ka=null,ol=null,Da=0,kc=0,Dc=null,xm=null,an=0,Ac=null;function qt(){return(Ye&2)!==0&&Oe!==0?Oe&-Oe:S.T!==null?Lc():Ae()}function gm(){if(Ht===0)if((Oe&536870912)===0||Ue){var t=As;As<<=1,(As&3932160)===0&&(As=262144),Ht=t}else Ht=536870912;return t=Lt.current,t!==null&&(t.flags|=32),Ht}function Mt(t,a,s){(t===Je&&(Ge===2||Ge===9)||t.cancelPendingCommit!==null)&&(dl(t,0),Wa(t,Oe,Ht,!1)),os(t,s),((Ye&2)===0||t!==Je)&&(t===Je&&((Ye&2)===0&&(Cs|=s),tt===4&&Wa(t,Oe,Ht,!1)),oa(t))}function pm(t,a,s){if((Ye&6)!==0)throw Error(o(327));var l=!s&&(a&127)===0&&(a&t.expiredLanes)===0||ma(t,a),i=l?Qx(t,a):Mc(t,a,!0),r=l;do{if(i===0){rl&&!l&&Wa(t,a,0,!1);break}else{if(s=t.current.alternate,r&&!Xx(s)){i=Mc(t,a,!1),r=!1;continue}if(i===2){if(r=a,t.errorRecoveryDisabledLanes&r)var h=0;else h=t.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){a=h;e:{var w=t;i=tn;var R=w.current.memoizedState.isDehydrated;if(R&&(dl(w,h).flags|=256),h=Mc(w,h,!1),h!==2){if(_c&&!R){w.errorRecoveryDisabledLanes|=r,Cs|=r,i=4;break e}r=Tt,Tt=i,r!==null&&(Tt===null?Tt=r:Tt.push.apply(Tt,r))}i=h}if(r=!1,i!==2)continue}}if(i===1){dl(t,0),Wa(t,a,0,!0);break}e:{switch(l=t,r=i,r){case 0:case 1:throw Error(o(345));case 4:if((a&4194048)!==a)break;case 6:Wa(l,a,Ht,!Za);break e;case 2:Tt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((a&62914560)===a&&(i=mi+300-pt(),10<i)){if(Wa(l,a,Ht,!Za),Ms(l,0,!0)!==0)break e;Da=a,l.timeoutHandle=Zm(bm.bind(null,l,s,Tt,fi,Ec,a,Ht,Cs,cl,Za,r,"Throttled",-0,0),i);break e}bm(l,s,Tt,fi,Ec,a,Ht,Cs,cl,Za,r,null,-0,0)}}break}while(!0);oa(t)}function bm(t,a,s,l,i,r,h,w,R,Z,ae,ce,J,K){if(t.timeoutHandle=-1,ce=a.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fa},dm(a,r,ce);var ye=(r&62914560)===r?mi-pt():(r&4194048)===r?fm-pt():0;if(ye=kg(ce,ye),ye!==null){Da=r,t.cancelPendingCommit=ye(Cm.bind(null,t,a,r,s,l,i,h,w,R,ae,ce,null,J,K)),Wa(t,r,h,!Z);return}}Cm(t,a,r,s,l,i,h,w,R)}function Xx(t){for(var a=t;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var i=s[l],r=i.getSnapshot;i=i.value;try{if(!zt(r(),i))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Wa(t,a,s,l){a&=~Cc,a&=~Cs,t.suspendedLanes|=a,t.pingedLanes&=~a,l&&(t.warmLanes|=a),l=t.expirationTimes;for(var i=a;0<i;){var r=31-bt(i),h=1<<r;l[r]=-1,i&=~h}s!==0&&wn(t,s,a)}function xi(){return(Ye&6)===0?(sn(0),!1):!0}function Tc(){if(Me!==null){if(Ge===0)var t=Me.return;else t=Me,ba=ps=null,Vr(t),el=null,Hl=0,t=Me;for(;t!==null;)Ju(t.alternate,t),t=t.return;Me=null}}function dl(t,a){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,dg(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Da=0,Tc(),Je=t,Me=s=ga(t.current,null),Oe=a,Ge=0,Bt=null,Za=!1,rl=ma(t,a),_c=!1,cl=Ht=Cc=Cs=Ja=tt=0,Tt=tn=null,Ec=!1,(a&8)!==0&&(a|=a&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=a;0<l;){var i=31-bt(l),r=1<<i;a|=t[i],l&=~r}return ka=a,Ln(),s}function vm(t,a){ke=null,S.H=Vl,a===Is||a===Xn?(a=Od(),Ge=3):a===Or?(a=Od(),Ge=4):Ge=a===oc?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Bt=a,Me===null&&(tt=1,li(t,Vt(a,t.current)))}function ym(){var t=Lt.current;return t===null?!0:(Oe&4194048)===Oe?Kt===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?t===Kt:!1}function jm(){var t=S.H;return S.H=Vl,t===null?Vl:t}function Nm(){var t=S.A;return S.A=Fx,t}function gi(){tt=4,Za||(Oe&4194048)!==Oe&&Lt.current!==null||(rl=!0),(Ja&134217727)===0&&(Cs&134217727)===0||Je===null||Wa(Je,Oe,Ht,!1)}function Mc(t,a,s){var l=Ye;Ye|=2;var i=jm(),r=Nm();(Je!==t||Oe!==a)&&(fi=null,dl(t,a)),a=!1;var h=tt;e:do try{if(Ge!==0&&Me!==null){var w=Me,R=Bt;switch(Ge){case 8:Tc(),h=6;break e;case 3:case 2:case 9:case 6:Lt.current===null&&(a=!0);var Z=Ge;if(Ge=0,Bt=null,ul(t,w,R,Z),s&&rl){h=0;break e}break;default:Z=Ge,Ge=0,Bt=null,ul(t,w,R,Z)}}$x(),h=tt;break}catch(ae){vm(t,ae)}while(!0);return a&&t.shellSuspendCounter++,ba=ps=null,Ye=l,S.H=i,S.A=r,Me===null&&(Je=null,Oe=0,Ln()),h}function $x(){for(;Me!==null;)wm(Me)}function Qx(t,a){var s=Ye;Ye|=2;var l=jm(),i=Nm();Je!==t||Oe!==a?(fi=null,hi=pt()+500,dl(t,a)):rl=ma(t,a);e:do try{if(Ge!==0&&Me!==null){a=Me;var r=Bt;t:switch(Ge){case 1:Ge=0,Bt=null,ul(t,a,r,1);break;case 2:case 9:if(Rd(r)){Ge=0,Bt=null,Sm(a);break}a=function(){Ge!==2&&Ge!==9||Je!==t||(Ge=7),oa(t)},r.then(a,a);break e;case 3:Ge=7;break e;case 4:Ge=5;break e;case 7:Rd(r)?(Ge=0,Bt=null,Sm(a)):(Ge=0,Bt=null,ul(t,a,r,7));break;case 5:var h=null;switch(Me.tag){case 26:h=Me.memoizedState;case 5:case 27:var w=Me;if(h?oh(h):w.stateNode.complete){Ge=0,Bt=null;var R=w.sibling;if(R!==null)Me=R;else{var Z=w.return;Z!==null?(Me=Z,pi(Z)):Me=null}break t}}Ge=0,Bt=null,ul(t,a,r,5);break;case 6:Ge=0,Bt=null,ul(t,a,r,6);break;case 8:Tc(),tt=6;break e;default:throw Error(o(462))}}Vx();break}catch(ae){vm(t,ae)}while(!0);return ba=ps=null,S.H=l,S.A=i,Ye=s,Me!==null?0:(Je=null,Oe=0,Ln(),tt)}function Vx(){for(;Me!==null&&!la();)wm(Me)}function wm(t){var a=Vu(t.alternate,t,ka);t.memoizedProps=t.pendingProps,a===null?pi(t):Me=a}function Sm(t){var a=t,s=a.alternate;switch(a.tag){case 15:case 0:a=Yu(s,a,a.pendingProps,a.type,void 0,Oe);break;case 11:a=Yu(s,a,a.pendingProps,a.type.render,a.ref,Oe);break;case 5:Vr(a);default:Ju(s,a),a=Me=Nd(a,ka),a=Vu(s,a,ka)}t.memoizedProps=t.pendingProps,a===null?pi(t):Me=a}function ul(t,a,s,l){ba=ps=null,Vr(a),el=null,Hl=0;var i=a.return;try{if(Ox(t,i,a,s,Oe)){tt=1,li(t,Vt(s,t.current)),Me=null;return}}catch(r){if(i!==null)throw Me=i,r;tt=1,li(t,Vt(s,t.current)),Me=null;return}a.flags&32768?(Ue||l===1?t=!0:rl||(Oe&536870912)!==0?t=!1:(Za=t=!0,(l===2||l===9||l===3||l===6)&&(l=Lt.current,l!==null&&l.tag===13&&(l.flags|=16384))),_m(a,t)):pi(a)}function pi(t){var a=t;do{if((a.flags&32768)!==0){_m(a,Za);return}t=a.return;var s=Bx(a.alternate,a,ka);if(s!==null){Me=s;return}if(a=a.sibling,a!==null){Me=a;return}Me=a=t}while(a!==null);tt===0&&(tt=5)}function _m(t,a){do{var s=Hx(t.alternate,t);if(s!==null){s.flags&=32767,Me=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(t=t.sibling,t!==null)){Me=t;return}Me=t=s}while(t!==null);tt=6,Me=null}function Cm(t,a,s,l,i,r,h,w,R){t.cancelPendingCommit=null;do bi();while(dt!==0);if((Ye&6)!==0)throw Error(o(327));if(a!==null){if(a===t.current)throw Error(o(177));if(r=a.lanes|a.childLanes,r|=yr,Pi(t,s,r,h,w,R),t===Je&&(Me=Je=null,Oe=0),ol=a,Ka=t,Da=s,kc=r,Dc=i,xm=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Kx(za,function(){return Tm(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=S.T,S.T=null,i=k.p,k.p=2,h=Ye,Ye|=4;try{qx(t,a,s)}finally{Ye=h,k.p=i,S.T=l}}dt=1,Em(),km(),Dm()}}function Em(){if(dt===1){dt=0;var t=Ka,a=ol,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=S.T,S.T=null;var l=k.p;k.p=2;var i=Ye;Ye|=4;try{rm(a,t);var r=Xc,h=hd(t.containerInfo),w=r.focusedElem,R=r.selectionRange;if(h!==w&&w&&w.ownerDocument&&md(w.ownerDocument.documentElement,w)){if(R!==null&&xr(w)){var Z=R.start,ae=R.end;if(ae===void 0&&(ae=Z),"selectionStart"in w)w.selectionStart=Z,w.selectionEnd=Math.min(ae,w.value.length);else{var ce=w.ownerDocument||document,J=ce&&ce.defaultView||window;if(J.getSelection){var K=J.getSelection(),ye=w.textContent.length,we=Math.min(R.start,ye),Ve=R.end===void 0?we:Math.min(R.end,ye);!K.extend&&we>Ve&&(h=Ve,Ve=we,we=h);var G=ud(w,we),B=ud(w,Ve);if(G&&B&&(K.rangeCount!==1||K.anchorNode!==G.node||K.anchorOffset!==G.offset||K.focusNode!==B.node||K.focusOffset!==B.offset)){var Q=ce.createRange();Q.setStart(G.node,G.offset),K.removeAllRanges(),we>Ve?(K.addRange(Q),K.extend(B.node,B.offset)):(Q.setEnd(B.node,B.offset),K.addRange(Q))}}}}for(ce=[],K=w;K=K.parentNode;)K.nodeType===1&&ce.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ce.length;w++){var re=ce[w];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Ai=!!Gc,Xc=Gc=null}finally{Ye=i,k.p=l,S.T=s}}t.current=a,dt=2}}function km(){if(dt===2){dt=0;var t=Ka,a=ol,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=S.T,S.T=null;var l=k.p;k.p=2;var i=Ye;Ye|=4;try{am(t,a.alternate,a)}finally{Ye=i,k.p=l,S.T=s}}dt=3}}function Dm(){if(dt===4||dt===3){dt=0,rs();var t=Ka,a=ol,s=Da,l=xm;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?dt=5:(dt=0,ol=Ka=null,Am(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(Pa=null),pe(s),a=a.stateNode,jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(na,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=S.T,i=k.p,k.p=2,S.T=null;try{for(var r=t.onRecoverableError,h=0;h<l.length;h++){var w=l[h];r(w.value,{componentStack:w.stack})}}finally{S.T=a,k.p=i}}(Da&3)!==0&&bi(),oa(t),i=t.pendingLanes,(s&261930)!==0&&(i&42)!==0?t===Ac?an++:(an=0,Ac=t):an=0,sn(0)}}function Am(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,Ul(a)))}function bi(){return Em(),km(),Dm(),Tm()}function Tm(){if(dt!==5)return!1;var t=Ka,a=kc;kc=0;var s=pe(Da),l=S.T,i=k.p;try{k.p=32>s?32:s,S.T=null,s=Dc,Dc=null;var r=Ka,h=Da;if(dt=0,ol=Ka=null,Da=0,(Ye&6)!==0)throw Error(o(331));var w=Ye;if(Ye|=4,mm(r.current),om(r,r.current,h,s),Ye=w,sn(0,!1),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(na,r)}catch{}return!0}finally{k.p=i,S.T=l,Am(t,a)}}function Mm(t,a,s){a=Vt(s,a),a=cc(t.stateNode,a,2),t=Xa(t,a,2),t!==null&&(os(t,2),oa(t))}function Xe(t,a,s){if(t.tag===3)Mm(t,t,s);else for(;a!==null;){if(a.tag===3){Mm(a,t,s);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Pa===null||!Pa.has(l))){t=Vt(s,t),s=Ru(2),l=Xa(a,s,2),l!==null&&(zu(s,l,a,t),os(l,2),oa(l));break}}a=a.return}}function Rc(t,a,s){var l=t.pingCache;if(l===null){l=t.pingCache=new Gx;var i=new Set;l.set(a,i)}else i=l.get(a),i===void 0&&(i=new Set,l.set(a,i));i.has(s)||(_c=!0,i.add(s),t=Zx.bind(null,t,a,s),a.then(t,t))}function Zx(t,a,s){var l=t.pingCache;l!==null&&l.delete(a),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,Je===t&&(Oe&s)===s&&(tt===4||tt===3&&(Oe&62914560)===Oe&&300>pt()-mi?(Ye&2)===0&&dl(t,0):Cc|=s,cl===Oe&&(cl=0)),oa(t)}function Rm(t,a){a===0&&(a=Nn()),t=fs(t,a),t!==null&&(os(t,a),oa(t))}function Jx(t){var a=t.memoizedState,s=0;a!==null&&(s=a.retryLane),Rm(t,s)}function Px(t,a){var s=0;switch(t.tag){case 31:case 13:var l=t.stateNode,i=t.memoizedState;i!==null&&(s=i.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(a),Rm(t,s)}function Kx(t,a){return nt(t,a)}var vi=null,ml=null,zc=!1,yi=!1,Oc=!1,Ia=0;function oa(t){t!==ml&&t.next===null&&(ml===null?vi=ml=t:ml=ml.next=t),yi=!0,zc||(zc=!0,Ix())}function sn(t,a){if(!Oc&&yi){Oc=!0;do for(var s=!1,l=vi;l!==null;){if(t!==0){var i=l.pendingLanes;if(i===0)var r=0;else{var h=l.suspendedLanes,w=l.pingedLanes;r=(1<<31-bt(42|t)+1)-1,r&=i&~(h&~w),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(s=!0,Um(l,r))}else r=Oe,r=Ms(l,l===Je?r:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(r&3)===0||ma(l,r)||(s=!0,Um(l,r));l=l.next}while(s);Oc=!1}}function Wx(){zm()}function zm(){yi=zc=!1;var t=0;Ia!==0&&og()&&(t=Ia);for(var a=pt(),s=null,l=vi;l!==null;){var i=l.next,r=Om(l,a);r===0?(l.next=null,s===null?vi=i:s.next=i,i===null&&(ml=s)):(s=l,(t!==0||(r&3)!==0)&&(yi=!0)),l=i}dt!==0&&dt!==5||sn(t),Ia!==0&&(Ia=0)}function Om(t,a){for(var s=t.suspendedLanes,l=t.pingedLanes,i=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var h=31-bt(r),w=1<<h,R=i[h];R===-1?((w&s)===0||(w&l)!==0)&&(i[h]=Ji(w,a)):R<=a&&(t.expiredLanes|=w),r&=~w}if(a=Je,s=Oe,s=Ms(t,t===a?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===a&&(Ge===2||Ge===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&wt(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||ma(t,s)){if(a=s&-s,a===t.callbackPriority)return a;switch(l!==null&&wt(l),pe(s)){case 2:case 8:s=jn;break;case 32:s=za;break;case 268435456:s=jl;break;default:s=za}return l=Lm.bind(null,t),s=nt(s,l),t.callbackPriority=a,t.callbackNode=s,a}return l!==null&&l!==null&&wt(l),t.callbackPriority=2,t.callbackNode=null,2}function Lm(t,a){if(dt!==0&&dt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(bi()&&t.callbackNode!==s)return null;var l=Oe;return l=Ms(t,t===Je?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(pm(t,l,a),Om(t,pt()),t.callbackNode!=null&&t.callbackNode===s?Lm.bind(null,t):null)}function Um(t,a){if(bi())return null;pm(t,a,!0)}function Ix(){ug(function(){(Ye&6)!==0?nt(Gt,Wx):zm()})}function Lc(){if(Ia===0){var t=Ks;t===0&&(t=Ds,Ds<<=1,(Ds&261888)===0&&(Ds=256)),Ia=t}return Ia}function Bm(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:kn(""+t)}function Hm(t,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,t.id&&s.setAttribute("form",t.id),a.parentNode.insertBefore(s,a),t=new FormData(t),s.parentNode.removeChild(s),t}function eg(t,a,s,l,i){if(a==="submit"&&s&&s.stateNode===i){var r=Bm((i[Ct]||null).action),h=l.submitter;h&&(a=(a=h[Ct]||null)?Bm(a.formAction):h.getAttribute("formAction"),a!==null&&(r=a,h=null));var w=new Mn("action","action",null,l,i);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ia!==0){var R=h?Hm(i,h):new FormData(i);ac(s,{pending:!0,data:R,method:i.method,action:r},null,R)}}else typeof r=="function"&&(w.preventDefault(),R=h?Hm(i,h):new FormData(i),ac(s,{pending:!0,data:R,method:i.method,action:r},r,R))},currentTarget:i}]})}}for(var Uc=0;Uc<vr.length;Uc++){var Bc=vr[Uc],tg=Bc.toLowerCase(),ag=Bc[0].toUpperCase()+Bc.slice(1);ea(tg,"on"+ag)}ea(gd,"onAnimationEnd"),ea(pd,"onAnimationIteration"),ea(bd,"onAnimationStart"),ea("dblclick","onDoubleClick"),ea("focusin","onFocus"),ea("focusout","onBlur"),ea(bx,"onTransitionRun"),ea(vx,"onTransitionStart"),ea(yx,"onTransitionCancel"),ea(vd,"onTransitionEnd"),Us("onMouseEnter",["mouseout","mouseover"]),Us("onMouseLeave",["mouseout","mouseover"]),Us("onPointerEnter",["pointerout","pointerover"]),Us("onPointerLeave",["pointerout","pointerover"]),ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ds("onBeforeInput",["compositionend","keypress","textInput","paste"]),ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ln="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ln));function qm(t,a){a=(a&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],i=l.event;l=l.listeners;e:{var r=void 0;if(a)for(var h=l.length-1;0<=h;h--){var w=l[h],R=w.instance,Z=w.currentTarget;if(w=w.listener,R!==r&&i.isPropagationStopped())break e;r=w,i.currentTarget=Z;try{r(i)}catch(ae){On(ae)}i.currentTarget=null,r=R}else for(h=0;h<l.length;h++){if(w=l[h],R=w.instance,Z=w.currentTarget,w=w.listener,R!==r&&i.isPropagationStopped())break e;r=w,i.currentTarget=Z;try{r(i)}catch(ae){On(ae)}i.currentTarget=null,r=R}}}}function Re(t,a){var s=a[Ki];s===void 0&&(s=a[Ki]=new Set);var l=t+"__bubble";s.has(l)||(Ym(a,t,2,!1),s.add(l))}function Hc(t,a,s){var l=0;a&&(l|=4),Ym(s,t,l,a)}var ji="_reactListening"+Math.random().toString(36).slice(2);function qc(t){if(!t[ji]){t[ji]=!0,zo.forEach(function(s){s!=="selectionchange"&&(sg.has(s)||Hc(s,!1,t),Hc(s,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[ji]||(a[ji]=!0,Hc("selectionchange",!1,a))}}function Ym(t,a,s,l){switch(gh(a)){case 2:var i=Tg;break;case 8:i=Mg;break;default:i=to}s=i.bind(null,a,s,t),i=void 0,!ir||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(i=!0),l?i!==void 0?t.addEventListener(a,s,{capture:!0,passive:i}):t.addEventListener(a,s,!0):i!==void 0?t.addEventListener(a,s,{passive:i}):t.addEventListener(a,s,!1)}function Yc(t,a,s,l,i){var r=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var h=l.tag;if(h===3||h===4){var w=l.stateNode.containerInfo;if(w===i)break;if(h===4)for(h=l.return;h!==null;){var R=h.tag;if((R===3||R===4)&&h.stateNode.containerInfo===i)return;h=h.return}for(;w!==null;){if(h=zs(w),h===null)return;if(R=h.tag,R===5||R===6||R===26||R===27){l=r=h;continue e}w=w.parentNode}}l=l.return}Qo(function(){var Z=r,ae=lr(s),ce=[];e:{var J=yd.get(t);if(J!==void 0){var K=Mn,ye=t;switch(t){case"keypress":if(An(s)===0)break e;case"keydown":case"keyup":K=Pf;break;case"focusin":ye="focus",K=dr;break;case"focusout":ye="blur",K=dr;break;case"beforeblur":case"afterblur":K=dr;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Jo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Bf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=If;break;case gd:case pd:case bd:K=Yf;break;case vd:K=tx;break;case"scroll":case"scrollend":K=Lf;break;case"wheel":K=sx;break;case"copy":case"cut":case"paste":K=Gf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Ko;break;case"toggle":case"beforetoggle":K=nx}var we=(a&4)!==0,Ve=!we&&(t==="scroll"||t==="scrollend"),G=we?J!==null?J+"Capture":null:J;we=[];for(var B=Z,Q;B!==null;){var re=B;if(Q=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||Q===null||G===null||(re=Cl(B,G),re!=null&&we.push(nn(B,re,Q))),Ve)break;B=B.return}0<we.length&&(J=new K(J,ye,null,s,ae),ce.push({event:J,listeners:we}))}}if((a&7)===0){e:{if(J=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",J&&s!==sr&&(ye=s.relatedTarget||s.fromElement)&&(zs(ye)||ye[Rs]))break e;if((K||J)&&(J=ae.window===ae?ae:(J=ae.ownerDocument)?J.defaultView||J.parentWindow:window,K?(ye=s.relatedTarget||s.toElement,K=Z,ye=ye?zs(ye):null,ye!==null&&(Ve=p(ye),we=ye.tag,ye!==Ve||we!==5&&we!==27&&we!==6)&&(ye=null)):(K=null,ye=Z),K!==ye)){if(we=Jo,re="onMouseLeave",G="onMouseEnter",B="mouse",(t==="pointerout"||t==="pointerover")&&(we=Ko,re="onPointerLeave",G="onPointerEnter",B="pointer"),Ve=K==null?J:_l(K),Q=ye==null?J:_l(ye),J=new we(re,B+"leave",K,s,ae),J.target=Ve,J.relatedTarget=Q,re=null,zs(ae)===Z&&(we=new we(G,B+"enter",ye,s,ae),we.target=Q,we.relatedTarget=Ve,re=we),Ve=re,K&&ye)t:{for(we=lg,G=K,B=ye,Q=0,re=G;re;re=we(re))Q++;re=0;for(var Ne=B;Ne;Ne=we(Ne))re++;for(;0<Q-re;)G=we(G),Q--;for(;0<re-Q;)B=we(B),re--;for(;Q--;){if(G===B||B!==null&&G===B.alternate){we=G;break t}G=we(G),B=we(B)}we=null}else we=null;K!==null&&Fm(ce,J,K,we,!1),ye!==null&&Ve!==null&&Fm(ce,Ve,ye,we,!0)}}e:{if(J=Z?_l(Z):window,K=J.nodeName&&J.nodeName.toLowerCase(),K==="select"||K==="input"&&J.type==="file")var He=nd;else if(sd(J))if(id)He=xx;else{He=hx;var je=mx}else K=J.nodeName,!K||K.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Z&&ar(Z.elementType)&&(He=nd):He=fx;if(He&&(He=He(t,Z))){ld(ce,He,s,ae);break e}je&&je(t,J,Z),t==="focusout"&&Z&&J.type==="number"&&Z.memoizedProps.value!=null&&tr(J,"number",J.value)}switch(je=Z?_l(Z):window,t){case"focusin":(sd(je)||je.contentEditable==="true")&&(Gs=je,gr=Z,zl=null);break;case"focusout":zl=gr=Gs=null;break;case"mousedown":pr=!0;break;case"contextmenu":case"mouseup":case"dragend":pr=!1,fd(ce,s,ae);break;case"selectionchange":if(px)break;case"keydown":case"keyup":fd(ce,s,ae)}var De;if(mr)e:{switch(t){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else Fs?td(t,s)&&(Le="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(Le="onCompositionStart");Le&&(Wo&&s.locale!=="ko"&&(Fs||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&Fs&&(De=Vo()):(Ua=ae,rr="value"in Ua?Ua.value:Ua.textContent,Fs=!0)),je=Ni(Z,Le),0<je.length&&(Le=new Po(Le,t,null,s,ae),ce.push({event:Le,listeners:je}),De?Le.data=De:(De=ad(s),De!==null&&(Le.data=De)))),(De=rx?cx(t,s):ox(t,s))&&(Le=Ni(Z,"onBeforeInput"),0<Le.length&&(je=new Po("onBeforeInput","beforeinput",null,s,ae),ce.push({event:je,listeners:Le}),je.data=De)),eg(ce,t,Z,s,ae)}qm(ce,a)})}function nn(t,a,s){return{instance:t,listener:a,currentTarget:s}}function Ni(t,a){for(var s=a+"Capture",l=[];t!==null;){var i=t,r=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||r===null||(i=Cl(t,s),i!=null&&l.unshift(nn(t,i,r)),i=Cl(t,a),i!=null&&l.push(nn(t,i,r))),t.tag===3)return l;t=t.return}return[]}function lg(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Fm(t,a,s,l,i){for(var r=a._reactName,h=[];s!==null&&s!==l;){var w=s,R=w.alternate,Z=w.stateNode;if(w=w.tag,R!==null&&R===l)break;w!==5&&w!==26&&w!==27||Z===null||(R=Z,i?(Z=Cl(s,r),Z!=null&&h.unshift(nn(s,Z,R))):i||(Z=Cl(s,r),Z!=null&&h.push(nn(s,Z,R)))),s=s.return}h.length!==0&&t.push({event:a,listeners:h})}var ng=/\r\n?/g,ig=/\u0000|\uFFFD/g;function Gm(t){return(typeof t=="string"?t:""+t).replace(ng,`
`).replace(ig,"")}function Xm(t,a){return a=Gm(a),Gm(t)===a}function Qe(t,a,s,l,i,r){switch(s){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||Hs(t,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&Hs(t,""+l);break;case"className":Cn(t,"class",l);break;case"tabIndex":Cn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Cn(t,s,l);break;case"style":Xo(t,l,r);break;case"data":if(a!=="object"){Cn(t,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=kn(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(s==="formAction"?(a!=="input"&&Qe(t,a,"name",i.name,i,null),Qe(t,a,"formEncType",i.formEncType,i,null),Qe(t,a,"formMethod",i.formMethod,i,null),Qe(t,a,"formTarget",i.formTarget,i,null)):(Qe(t,a,"encType",i.encType,i,null),Qe(t,a,"method",i.method,i,null),Qe(t,a,"target",i.target,i,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=kn(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=fa);break;case"onScroll":l!=null&&Re("scroll",t);break;case"onScrollEnd":l!=null&&Re("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(s=l.__html,s!=null){if(i.children!=null)throw Error(o(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=kn(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":Re("beforetoggle",t),Re("toggle",t),_n(t,"popover",l);break;case"xlinkActuate":ha(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ha(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ha(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ha(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ha(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ha(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ha(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ha(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ha(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":_n(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=zf.get(s)||s,_n(t,s,l))}}function Fc(t,a,s,l,i,r){switch(s){case"style":Xo(t,l,r);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(s=l.__html,s!=null){if(i.children!=null)throw Error(o(60));t.innerHTML=s}}break;case"children":typeof l=="string"?Hs(t,l):(typeof l=="number"||typeof l=="bigint")&&Hs(t,""+l);break;case"onScroll":l!=null&&Re("scroll",t);break;case"onScrollEnd":l!=null&&Re("scrollend",t);break;case"onClick":l!=null&&(t.onclick=fa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oo.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(i=s.endsWith("Capture"),a=s.slice(2,i?s.length-7:void 0),r=t[Ct]||null,r=r!=null?r[s]:null,typeof r=="function"&&t.removeEventListener(a,r,i),typeof l=="function")){typeof r!="function"&&r!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(a,l,i);break e}s in t?t[s]=l:l===!0?t.setAttribute(s,""):_n(t,s,l)}}}function gt(t,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",t),Re("load",t);var l=!1,i=!1,r;for(r in s)if(s.hasOwnProperty(r)){var h=s[r];if(h!=null)switch(r){case"src":l=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:Qe(t,a,r,h,s,null)}}i&&Qe(t,a,"srcSet",s.srcSet,s,null),l&&Qe(t,a,"src",s.src,s,null);return;case"input":Re("invalid",t);var w=r=h=i=null,R=null,Z=null;for(l in s)if(s.hasOwnProperty(l)){var ae=s[l];if(ae!=null)switch(l){case"name":i=ae;break;case"type":h=ae;break;case"checked":R=ae;break;case"defaultChecked":Z=ae;break;case"value":r=ae;break;case"defaultValue":w=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(o(137,a));break;default:Qe(t,a,l,ae,s,null)}}qo(t,r,w,R,Z,h,i,!1);return;case"select":Re("invalid",t),l=h=r=null;for(i in s)if(s.hasOwnProperty(i)&&(w=s[i],w!=null))switch(i){case"value":r=w;break;case"defaultValue":h=w;break;case"multiple":l=w;default:Qe(t,a,i,w,s,null)}a=r,s=h,t.multiple=!!l,a!=null?Bs(t,!!l,a,!1):s!=null&&Bs(t,!!l,s,!0);return;case"textarea":Re("invalid",t),r=i=l=null;for(h in s)if(s.hasOwnProperty(h)&&(w=s[h],w!=null))switch(h){case"value":l=w;break;case"defaultValue":i=w;break;case"children":r=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(o(91));break;default:Qe(t,a,h,w,s,null)}Fo(t,l,i,r);return;case"option":for(R in s)s.hasOwnProperty(R)&&(l=s[R],l!=null)&&(R==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":Qe(t,a,R,l,s,null));return;case"dialog":Re("beforetoggle",t),Re("toggle",t),Re("cancel",t),Re("close",t);break;case"iframe":case"object":Re("load",t);break;case"video":case"audio":for(l=0;l<ln.length;l++)Re(ln[l],t);break;case"image":Re("error",t),Re("load",t);break;case"details":Re("toggle",t);break;case"embed":case"source":case"link":Re("error",t),Re("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in s)if(s.hasOwnProperty(Z)&&(l=s[Z],l!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:Qe(t,a,Z,l,s,null)}return;default:if(ar(a)){for(ae in s)s.hasOwnProperty(ae)&&(l=s[ae],l!==void 0&&Fc(t,a,ae,l,s,void 0));return}}for(w in s)s.hasOwnProperty(w)&&(l=s[w],l!=null&&Qe(t,a,w,l,s,null))}function rg(t,a,s,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,r=null,h=null,w=null,R=null,Z=null,ae=null;for(K in s){var ce=s[K];if(s.hasOwnProperty(K)&&ce!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":R=ce;default:l.hasOwnProperty(K)||Qe(t,a,K,null,l,ce)}}for(var J in l){var K=l[J];if(ce=s[J],l.hasOwnProperty(J)&&(K!=null||ce!=null))switch(J){case"type":r=K;break;case"name":i=K;break;case"checked":Z=K;break;case"defaultChecked":ae=K;break;case"value":h=K;break;case"defaultValue":w=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(o(137,a));break;default:K!==ce&&Qe(t,a,J,K,l,ce)}}er(t,h,w,R,Z,ae,r,i);return;case"select":K=h=w=J=null;for(r in s)if(R=s[r],s.hasOwnProperty(r)&&R!=null)switch(r){case"value":break;case"multiple":K=R;default:l.hasOwnProperty(r)||Qe(t,a,r,null,l,R)}for(i in l)if(r=l[i],R=s[i],l.hasOwnProperty(i)&&(r!=null||R!=null))switch(i){case"value":J=r;break;case"defaultValue":w=r;break;case"multiple":h=r;default:r!==R&&Qe(t,a,i,r,l,R)}a=w,s=h,l=K,J!=null?Bs(t,!!s,J,!1):!!l!=!!s&&(a!=null?Bs(t,!!s,a,!0):Bs(t,!!s,s?[]:"",!1));return;case"textarea":K=J=null;for(w in s)if(i=s[w],s.hasOwnProperty(w)&&i!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Qe(t,a,w,null,l,i)}for(h in l)if(i=l[h],r=s[h],l.hasOwnProperty(h)&&(i!=null||r!=null))switch(h){case"value":J=i;break;case"defaultValue":K=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(o(91));break;default:i!==r&&Qe(t,a,h,i,l,r)}Yo(t,J,K);return;case"option":for(var ye in s)J=s[ye],s.hasOwnProperty(ye)&&J!=null&&!l.hasOwnProperty(ye)&&(ye==="selected"?t.selected=!1:Qe(t,a,ye,null,l,J));for(R in l)J=l[R],K=s[R],l.hasOwnProperty(R)&&J!==K&&(J!=null||K!=null)&&(R==="selected"?t.selected=J&&typeof J!="function"&&typeof J!="symbol":Qe(t,a,R,J,l,K));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in s)J=s[we],s.hasOwnProperty(we)&&J!=null&&!l.hasOwnProperty(we)&&Qe(t,a,we,null,l,J);for(Z in l)if(J=l[Z],K=s[Z],l.hasOwnProperty(Z)&&J!==K&&(J!=null||K!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(o(137,a));break;default:Qe(t,a,Z,J,l,K)}return;default:if(ar(a)){for(var Ve in s)J=s[Ve],s.hasOwnProperty(Ve)&&J!==void 0&&!l.hasOwnProperty(Ve)&&Fc(t,a,Ve,void 0,l,J);for(ae in l)J=l[ae],K=s[ae],!l.hasOwnProperty(ae)||J===K||J===void 0&&K===void 0||Fc(t,a,ae,J,l,K);return}}for(var G in s)J=s[G],s.hasOwnProperty(G)&&J!=null&&!l.hasOwnProperty(G)&&Qe(t,a,G,null,l,J);for(ce in l)J=l[ce],K=s[ce],!l.hasOwnProperty(ce)||J===K||J==null&&K==null||Qe(t,a,ce,J,l,K)}function $m(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cg(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,s=performance.getEntriesByType("resource"),l=0;l<s.length;l++){var i=s[l],r=i.transferSize,h=i.initiatorType,w=i.duration;if(r&&w&&$m(h)){for(h=0,w=i.responseEnd,l+=1;l<s.length;l++){var R=s[l],Z=R.startTime;if(Z>w)break;var ae=R.transferSize,ce=R.initiatorType;ae&&$m(ce)&&(R=R.responseEnd,h+=ae*(R<w?1:(w-Z)/(R-Z)))}if(--l,a+=8*(r+h)/(i.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Gc=null,Xc=null;function wi(t){return t.nodeType===9?t:t.ownerDocument}function Qm(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vm(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function $c(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Qc=null;function og(){var t=window.event;return t&&t.type==="popstate"?t===Qc?!1:(Qc=t,!0):(Qc=null,!1)}var Zm=typeof setTimeout=="function"?setTimeout:void 0,dg=typeof clearTimeout=="function"?clearTimeout:void 0,Jm=typeof Promise=="function"?Promise:void 0,ug=typeof queueMicrotask=="function"?queueMicrotask:typeof Jm<"u"?function(t){return Jm.resolve(null).then(t).catch(mg)}:Zm;function mg(t){setTimeout(function(){throw t})}function es(t){return t==="head"}function Pm(t,a){var s=a,l=0;do{var i=s.nextSibling;if(t.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"||s==="/&"){if(l===0){t.removeChild(i),gl(a);return}l--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")l++;else if(s==="html")rn(t.ownerDocument.documentElement);else if(s==="head"){s=t.ownerDocument.head,rn(s);for(var r=s.firstChild;r;){var h=r.nextSibling,w=r.nodeName;r[Sl]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&r.rel.toLowerCase()==="stylesheet"||s.removeChild(r),r=h}}else s==="body"&&rn(t.ownerDocument.body);s=i}while(s);gl(a)}function Km(t,a){var s=t;t=0;do{var l=s.nextSibling;if(s.nodeType===1?a?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(a?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(t===0)break;t--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||t++;s=l}while(s)}function Vc(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Vc(s),Wi(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function hg(t,a,s,l){for(;t.nodeType===1;){var i=s;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Sl])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var r=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=Wt(t.nextSibling),t===null)break}return null}function fg(t,a,s){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Wt(t.nextSibling),t===null))return null;return t}function Wm(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Wt(t.nextSibling),t===null))return null;return t}function Zc(t){return t.data==="$?"||t.data==="$~"}function Jc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function xg(t,a){var s=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||s.readyState!=="loading")a();else{var l=function(){a(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Wt(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var Pc=null;function Im(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"||s==="/&"){if(a===0)return Wt(t.nextSibling);a--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||a++}t=t.nextSibling}return null}function eh(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(a===0)return t;a--}else s!=="/$"&&s!=="/&"||a++}t=t.previousSibling}return null}function th(t,a,s){switch(a=wi(s),t){case"html":if(t=a.documentElement,!t)throw Error(o(452));return t;case"head":if(t=a.head,!t)throw Error(o(453));return t;case"body":if(t=a.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function rn(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Wi(t)}var It=new Map,ah=new Set;function Si(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Aa=k.d;k.d={f:gg,r:pg,D:bg,C:vg,L:yg,m:jg,X:wg,S:Ng,M:Sg};function gg(){var t=Aa.f(),a=xi();return t||a}function pg(t){var a=Os(t);a!==null&&a.tag===5&&a.type==="form"?vu(a):Aa.r(t)}var hl=typeof document>"u"?null:document;function sh(t,a,s){var l=hl;if(l&&typeof a=="string"&&a){var i=$t(a);i='link[rel="'+t+'"][href="'+i+'"]',typeof s=="string"&&(i+='[crossorigin="'+s+'"]'),ah.has(i)||(ah.add(i),t={rel:t,crossOrigin:s,href:a},l.querySelector(i)===null&&(a=l.createElement("link"),gt(a,"link",t),ut(a),l.head.appendChild(a)))}}function bg(t){Aa.D(t),sh("dns-prefetch",t,null)}function vg(t,a){Aa.C(t,a),sh("preconnect",t,a)}function yg(t,a,s){Aa.L(t,a,s);var l=hl;if(l&&t&&a){var i='link[rel="preload"][as="'+$t(a)+'"]';a==="image"&&s&&s.imageSrcSet?(i+='[imagesrcset="'+$t(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(i+='[imagesizes="'+$t(s.imageSizes)+'"]')):i+='[href="'+$t(t)+'"]';var r=i;switch(a){case"style":r=fl(t);break;case"script":r=xl(t)}It.has(r)||(t=x({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:t,as:a},s),It.set(r,t),l.querySelector(i)!==null||a==="style"&&l.querySelector(cn(r))||a==="script"&&l.querySelector(on(r))||(a=l.createElement("link"),gt(a,"link",t),ut(a),l.head.appendChild(a)))}}function jg(t,a){Aa.m(t,a);var s=hl;if(s&&t){var l=a&&typeof a.as=="string"?a.as:"script",i='link[rel="modulepreload"][as="'+$t(l)+'"][href="'+$t(t)+'"]',r=i;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=xl(t)}if(!It.has(r)&&(t=x({rel:"modulepreload",href:t},a),It.set(r,t),s.querySelector(i)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(on(r)))return}l=s.createElement("link"),gt(l,"link",t),ut(l),s.head.appendChild(l)}}}function Ng(t,a,s){Aa.S(t,a,s);var l=hl;if(l&&t){var i=Ls(l).hoistableStyles,r=fl(t);a=a||"default";var h=i.get(r);if(!h){var w={loading:0,preload:null};if(h=l.querySelector(cn(r)))w.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":a},s),(s=It.get(r))&&Kc(t,s);var R=h=l.createElement("link");ut(R),gt(R,"link",t),R._p=new Promise(function(Z,ae){R.onload=Z,R.onerror=ae}),R.addEventListener("load",function(){w.loading|=1}),R.addEventListener("error",function(){w.loading|=2}),w.loading|=4,_i(h,a,l)}h={type:"stylesheet",instance:h,count:1,state:w},i.set(r,h)}}}function wg(t,a){Aa.X(t,a);var s=hl;if(s&&t){var l=Ls(s).hoistableScripts,i=xl(t),r=l.get(i);r||(r=s.querySelector(on(i)),r||(t=x({src:t,async:!0},a),(a=It.get(i))&&Wc(t,a),r=s.createElement("script"),ut(r),gt(r,"link",t),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(i,r))}}function Sg(t,a){Aa.M(t,a);var s=hl;if(s&&t){var l=Ls(s).hoistableScripts,i=xl(t),r=l.get(i);r||(r=s.querySelector(on(i)),r||(t=x({src:t,async:!0,type:"module"},a),(a=It.get(i))&&Wc(t,a),r=s.createElement("script"),ut(r),gt(r,"link",t),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(i,r))}}function lh(t,a,s,l){var i=(i=P.current)?Si(i):null;if(!i)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=fl(s.href),s=Ls(i).hoistableStyles,l=s.get(a),l||(l={type:"style",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=fl(s.href);var r=Ls(i).hoistableStyles,h=r.get(t);if(h||(i=i.ownerDocument||i,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,h),(r=i.querySelector(cn(t)))&&!r._p&&(h.instance=r,h.state.loading=5),It.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},It.set(t,s),r||_g(i,t,s,h.state))),a&&l===null)throw Error(o(528,""));return h}if(a&&l!==null)throw Error(o(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=xl(s),s=Ls(i).hoistableScripts,l=s.get(a),l||(l={type:"script",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function fl(t){return'href="'+$t(t)+'"'}function cn(t){return'link[rel="stylesheet"]['+t+"]"}function nh(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function _g(t,a,s,l){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=t.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),gt(a,"link",s),ut(a),t.head.appendChild(a))}function xl(t){return'[src="'+$t(t)+'"]'}function on(t){return"script[async]"+t}function ih(t,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var l=t.querySelector('style[data-href~="'+$t(s.href)+'"]');if(l)return a.instance=l,ut(l),l;var i=x({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),ut(l),gt(l,"style",i),_i(l,s.precedence,t),a.instance=l;case"stylesheet":i=fl(s.href);var r=t.querySelector(cn(i));if(r)return a.state.loading|=4,a.instance=r,ut(r),r;l=nh(s),(i=It.get(i))&&Kc(l,i),r=(t.ownerDocument||t).createElement("link"),ut(r);var h=r;return h._p=new Promise(function(w,R){h.onload=w,h.onerror=R}),gt(r,"link",l),a.state.loading|=4,_i(r,s.precedence,t),a.instance=r;case"script":return r=xl(s.src),(i=t.querySelector(on(r)))?(a.instance=i,ut(i),i):(l=s,(i=It.get(r))&&(l=x({},s),Wc(l,i)),t=t.ownerDocument||t,i=t.createElement("script"),ut(i),gt(i,"link",l),t.head.appendChild(i),a.instance=i);case"void":return null;default:throw Error(o(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,_i(l,s.precedence,t));return a.instance}function _i(t,a,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=l.length?l[l.length-1]:null,r=i,h=0;h<l.length;h++){var w=l[h];if(w.dataset.precedence===a)r=w;else if(r!==i)break}r?r.parentNode.insertBefore(t,r.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(t,a.firstChild))}function Kc(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Wc(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var Ci=null;function rh(t,a,s){if(Ci===null){var l=new Map,i=Ci=new Map;i.set(s,l)}else i=Ci,l=i.get(s),l||(l=new Map,i.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),i=0;i<s.length;i++){var r=s[i];if(!(r[Sl]||r[at]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var h=r.getAttribute(a)||"";h=t+h;var w=l.get(h);w?w.push(r):l.set(h,[r])}}return l}function ch(t,a,s){t=t.ownerDocument||t,t.head.insertBefore(s,a==="title"?t.querySelector("head > title"):null)}function Cg(t,a,s){if(s===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function oh(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Eg(t,a,s,l){if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var i=fl(l.href),r=a.querySelector(cn(i));if(r){a=r._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=Ei.bind(t),a.then(t,t)),s.state.loading|=4,s.instance=r,ut(r);return}r=a.ownerDocument||a,l=nh(l),(i=It.get(i))&&Kc(l,i),r=r.createElement("link"),ut(r);var h=r;h._p=new Promise(function(w,R){h.onload=w,h.onerror=R}),gt(r,"link",l),s.instance=r}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(t.count++,s=Ei.bind(t),a.addEventListener("load",s),a.addEventListener("error",s))}}var Ic=0;function kg(t,a){return t.stylesheets&&t.count===0&&Di(t,t.stylesheets),0<t.count||0<t.imgCount?function(s){var l=setTimeout(function(){if(t.stylesheets&&Di(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4+a);0<t.imgBytes&&Ic===0&&(Ic=62500*cg());var i=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Di(t,t.stylesheets),t.unsuspend)){var r=t.unsuspend;t.unsuspend=null,r()}},(t.imgBytes>Ic?50:800)+a);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(i)}}:null}function Ei(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Di(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ki=null;function Di(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ki=new Map,a.forEach(Dg,t),ki=null,Ei.call(t))}function Dg(t,a){if(!(a.state.loading&4)){var s=ki.get(t);if(s)var l=s.get(null);else{s=new Map,ki.set(t,s);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<i.length;r++){var h=i[r];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(s.set(h.dataset.precedence,h),l=h)}l&&s.set(null,l)}i=a.instance,h=i.getAttribute("data-precedence"),r=s.get(h)||l,r===l&&s.set(null,i),s.set(h,i),this.count++,l=Ei.bind(this),i.addEventListener("load",l),i.addEventListener("error",l),r?r.parentNode.insertBefore(i,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),a.state.loading|=4}}var dn={$$typeof:Y,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function Ag(t,a,s,l,i,r,h,w,R){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cs(0),this.hiddenUpdates=cs(null),this.identifierPrefix=l,this.onUncaughtError=i,this.onCaughtError=r,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function dh(t,a,s,l,i,r,h,w,R,Z,ae,ce){return t=new Ag(t,a,s,h,R,Z,ae,ce,w),a=1,r===!0&&(a|=24),r=Ot(3,null,null,a),t.current=r,r.stateNode=t,a=Mr(),a.refCount++,t.pooledCache=a,a.refCount++,r.memoizedState={element:l,isDehydrated:s,cache:a},Lr(r),t}function uh(t){return t?(t=Qs,t):Qs}function mh(t,a,s,l,i,r){i=uh(i),l.context===null?l.context=i:l.pendingContext=i,l=Ga(a),l.payload={element:s},r=r===void 0?null:r,r!==null&&(l.callback=r),s=Xa(t,l,a),s!==null&&(Mt(s,t,a),Yl(s,t,a))}function hh(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<a?s:a}}function eo(t,a){hh(t,a),(t=t.alternate)&&hh(t,a)}function fh(t){if(t.tag===13||t.tag===31){var a=fs(t,67108864);a!==null&&Mt(a,t,67108864),eo(t,67108864)}}function xh(t){if(t.tag===13||t.tag===31){var a=qt();a=ne(a);var s=fs(t,a);s!==null&&Mt(s,t,a),eo(t,a)}}var Ai=!0;function Tg(t,a,s,l){var i=S.T;S.T=null;var r=k.p;try{k.p=2,to(t,a,s,l)}finally{k.p=r,S.T=i}}function Mg(t,a,s,l){var i=S.T;S.T=null;var r=k.p;try{k.p=8,to(t,a,s,l)}finally{k.p=r,S.T=i}}function to(t,a,s,l){if(Ai){var i=ao(l);if(i===null)Yc(t,a,l,Ti,s),ph(t,l);else if(zg(i,t,a,s,l))l.stopPropagation();else if(ph(t,l),a&4&&-1<Rg.indexOf(t)){for(;i!==null;){var r=Os(i);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var h=ua(r.pendingLanes);if(h!==0){var w=r;for(w.pendingLanes|=2,w.entangledLanes|=2;h;){var R=1<<31-bt(h);w.entanglements[1]|=R,h&=~R}oa(r),(Ye&6)===0&&(hi=pt()+500,sn(0))}}break;case 31:case 13:w=fs(r,2),w!==null&&Mt(w,r,2),xi(),eo(r,2)}if(r=ao(l),r===null&&Yc(t,a,l,Ti,s),r===i)break;i=r}i!==null&&l.stopPropagation()}else Yc(t,a,l,null,s)}}function ao(t){return t=lr(t),so(t)}var Ti=null;function so(t){if(Ti=null,t=zs(t),t!==null){var a=p(t);if(a===null)t=null;else{var s=a.tag;if(s===13){if(t=m(a),t!==null)return t;t=null}else if(s===31){if(t=f(a),t!==null)return t;t=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Ti=t,null}function gh(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yl()){case Gt:return 2;case jn:return 8;case za:case Vi:return 32;case jl:return 268435456;default:return 32}default:return 32}}var lo=!1,ts=null,as=null,ss=null,un=new Map,mn=new Map,ls=[],Rg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ph(t,a){switch(t){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":ss=null;break;case"pointerover":case"pointerout":un.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":mn.delete(a.pointerId)}}function hn(t,a,s,l,i,r){return t===null||t.nativeEvent!==r?(t={blockedOn:a,domEventName:s,eventSystemFlags:l,nativeEvent:r,targetContainers:[i]},a!==null&&(a=Os(a),a!==null&&fh(a)),t):(t.eventSystemFlags|=l,a=t.targetContainers,i!==null&&a.indexOf(i)===-1&&a.push(i),t)}function zg(t,a,s,l,i){switch(a){case"focusin":return ts=hn(ts,t,a,s,l,i),!0;case"dragenter":return as=hn(as,t,a,s,l,i),!0;case"mouseover":return ss=hn(ss,t,a,s,l,i),!0;case"pointerover":var r=i.pointerId;return un.set(r,hn(un.get(r)||null,t,a,s,l,i)),!0;case"gotpointercapture":return r=i.pointerId,mn.set(r,hn(mn.get(r)||null,t,a,s,l,i)),!0}return!1}function bh(t){var a=zs(t.target);if(a!==null){var s=p(a);if(s!==null){if(a=s.tag,a===13){if(a=m(s),a!==null){t.blockedOn=a,Be(t.priority,function(){xh(s)});return}}else if(a===31){if(a=f(s),a!==null){t.blockedOn=a,Be(t.priority,function(){xh(s)});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mi(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var s=ao(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);sr=l,s.target.dispatchEvent(l),sr=null}else return a=Os(s),a!==null&&fh(a),t.blockedOn=s,!1;a.shift()}return!0}function vh(t,a,s){Mi(t)&&s.delete(a)}function Og(){lo=!1,ts!==null&&Mi(ts)&&(ts=null),as!==null&&Mi(as)&&(as=null),ss!==null&&Mi(ss)&&(ss=null),un.forEach(vh),mn.forEach(vh)}function Ri(t,a){t.blockedOn===a&&(t.blockedOn=null,lo||(lo=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Og)))}var zi=null;function yh(t){zi!==t&&(zi=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){zi===t&&(zi=null);for(var a=0;a<t.length;a+=3){var s=t[a],l=t[a+1],i=t[a+2];if(typeof l!="function"){if(so(l||s)===null)continue;break}var r=Os(s);r!==null&&(t.splice(a,3),a-=3,ac(r,{pending:!0,data:i,method:s.method,action:l},l,i))}}))}function gl(t){function a(R){return Ri(R,t)}ts!==null&&Ri(ts,t),as!==null&&Ri(as,t),ss!==null&&Ri(ss,t),un.forEach(a),mn.forEach(a);for(var s=0;s<ls.length;s++){var l=ls[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ls.length&&(s=ls[0],s.blockedOn===null);)bh(s),s.blockedOn===null&&ls.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var i=s[l],r=s[l+1],h=i[Ct]||null;if(typeof r=="function")h||yh(s);else if(h){var w=null;if(r&&r.hasAttribute("formAction")){if(i=r,h=r[Ct]||null)w=h.formAction;else if(so(i)!==null)continue}else w=h.action;typeof w=="function"?s[l+1]=w:(s.splice(l,3),l-=3),yh(s)}}}function jh(){function t(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(h){return i=h})},focusReset:"manual",scroll:"manual"})}function a(){i!==null&&(i(),i=null),l||setTimeout(s,20)}function s(){if(!l&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,i=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(s,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),i!==null&&(i(),i=null)}}}function no(t){this._internalRoot=t}Oi.prototype.render=no.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(o(409));var s=a.current,l=qt();mh(s,l,t,a,null,null)},Oi.prototype.unmount=no.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;mh(t.current,2,null,t,null,null),xi(),a[Rs]=null}};function Oi(t){this._internalRoot=t}Oi.prototype.unstable_scheduleHydration=function(t){if(t){var a=Ae();t={blockedOn:null,target:t,priority:a};for(var s=0;s<ls.length&&a!==0&&a<ls[s].priority;s++);ls.splice(s,0,t),s===0&&bh(t)}};var Nh=c.version;if(Nh!=="19.2.3")throw Error(o(527,Nh,"19.2.3"));k.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=v(a),t=t!==null?j(t):null,t=t===null?null:t.stateNode,t};var Lg={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:S,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Li=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Li.isDisabled&&Li.supportsFiber)try{na=Li.inject(Lg),jt=Li}catch{}}return xn.createRoot=function(t,a){if(!u(t))throw Error(o(299));var s=!1,l="",i=Du,r=Au,h=Tu;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(i=a.onUncaughtError),a.onCaughtError!==void 0&&(r=a.onCaughtError),a.onRecoverableError!==void 0&&(h=a.onRecoverableError)),a=dh(t,1,!1,null,null,s,l,null,i,r,h,jh),t[Rs]=a.current,qc(t),new no(a)},xn.hydrateRoot=function(t,a,s){if(!u(t))throw Error(o(299));var l=!1,i="",r=Du,h=Au,w=Tu,R=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onUncaughtError!==void 0&&(r=s.onUncaughtError),s.onCaughtError!==void 0&&(h=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.formState!==void 0&&(R=s.formState)),a=dh(t,1,!0,a,s??null,l,i,R,r,h,w,jh),a.context=uh(null),s=a.current,l=qt(),l=ne(l),i=Ga(l),i.callback=null,Xa(s,i,l),s=l,a.current.lanes=s,os(a,s),oa(a),t[Rs]=a.current,qc(t),new Oi(a)},xn.version="19.2.3",xn}var Mh;function Qg(){if(Mh)return co.exports;Mh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(c){console.error(c)}}return n(),co.exports=$g(),co.exports}var Vg=Qg();var Rh="popstate";function Zg(n={}){function c(u,p){let{pathname:m="/",search:f="",hash:b=""}=Es(u.location.hash.substring(1));return!m.startsWith("/")&&!m.startsWith(".")&&(m="/"+m),bo("",{pathname:m,search:f,hash:b},p.state&&p.state.usr||null,p.state&&p.state.key||"default")}function d(u,p){let m=u.document.querySelector("base"),f="";if(m&&m.getAttribute("href")){let b=u.location.href,v=b.indexOf("#");f=v===-1?b:b.slice(0,v)}return f+"#"+(typeof p=="string"?p:bn(p))}function o(u,p){Yt(u.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(p)})`)}return Pg(c,d,o,n)}function Ie(n,c){if(n===!1||n===null||typeof n>"u")throw new Error(c)}function Yt(n,c){if(!n){typeof console<"u"&&console.warn(c);try{throw new Error(c)}catch{}}}function Jg(){return Math.random().toString(36).substring(2,10)}function zh(n,c){return{usr:n.state,key:n.key,idx:c}}function bo(n,c,d=null,o){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof c=="string"?Es(c):c,state:d,key:c&&c.key||o||Jg()}}function bn({pathname:n="/",search:c="",hash:d=""}){return c&&c!=="?"&&(n+=c.charAt(0)==="?"?c:"?"+c),d&&d!=="#"&&(n+=d.charAt(0)==="#"?d:"#"+d),n}function Es(n){let c={};if(n){let d=n.indexOf("#");d>=0&&(c.hash=n.substring(d),n=n.substring(0,d));let o=n.indexOf("?");o>=0&&(c.search=n.substring(o),n=n.substring(0,o)),n&&(c.pathname=n)}return c}function Pg(n,c,d,o={}){let{window:u=document.defaultView,v5Compat:p=!1}=o,m=u.history,f="POP",b=null,v=j();v==null&&(v=0,m.replaceState({...m.state,idx:v},""));function j(){return(m.state||{idx:null}).idx}function x(){f="POP";let A=j(),E=A==null?null:A-v;v=A,b&&b({action:f,location:_.location,delta:E})}function y(A,E){f="PUSH";let O=bo(_.location,A,E);d&&d(O,A),v=j()+1;let Y=zh(O,v),I=_.createHref(O);try{m.pushState(Y,"",I)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;u.location.assign(I)}p&&b&&b({action:f,location:_.location,delta:1})}function C(A,E){f="REPLACE";let O=bo(_.location,A,E);d&&d(O,A),v=j();let Y=zh(O,v),I=_.createHref(O);m.replaceState(Y,"",I),p&&b&&b({action:f,location:_.location,delta:0})}function N(A){return Kg(A)}let _={get action(){return f},get location(){return n(u,m)},listen(A){if(b)throw new Error("A history only accepts one active listener");return u.addEventListener(Rh,x),b=A,()=>{u.removeEventListener(Rh,x),b=null}},createHref(A){return c(u,A)},createURL:N,encodeLocation(A){let E=N(A);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:y,replace:C,go(A){return m.go(A)}};return _}function Kg(n,c=!1){let d="http://localhost";typeof window<"u"&&(d=window.location.origin!=="null"?window.location.origin:window.location.href),Ie(d,"No window.location.(origin|href) available to create URL");let o=typeof n=="string"?n:bn(n);return o=o.replace(/ $/,"%20"),!c&&o.startsWith("//")&&(o=d+o),new URL(o,d)}function Fh(n,c,d="/"){return Wg(n,c,d,!1)}function Wg(n,c,d,o){let u=typeof c=="string"?Es(c):c,p=Ma(u.pathname||"/",d);if(p==null)return null;let m=Gh(n);Ig(m);let f=null;for(let b=0;f==null&&b<m.length;++b){let v=dp(p);f=cp(m[b],v,o)}return f}function Gh(n,c=[],d=[],o="",u=!1){let p=(m,f,b=u,v)=>{let j={relativePath:v===void 0?m.path||"":v,caseSensitive:m.caseSensitive===!0,childrenIndex:f,route:m};if(j.relativePath.startsWith("/")){if(!j.relativePath.startsWith(o)&&b)return;Ie(j.relativePath.startsWith(o),`Absolute route path "${j.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),j.relativePath=j.relativePath.slice(o.length)}let x=Ta([o,j.relativePath]),y=d.concat(j);m.children&&m.children.length>0&&(Ie(m.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),Gh(m.children,c,y,x,b)),!(m.path==null&&!m.index)&&c.push({path:x,score:ip(x,m.index),routesMeta:y})};return n.forEach((m,f)=>{if(m.path===""||!m.path?.includes("?"))p(m,f);else for(let b of Xh(m.path))p(m,f,!0,b)}),c}function Xh(n){let c=n.split("/");if(c.length===0)return[];let[d,...o]=c,u=d.endsWith("?"),p=d.replace(/\?$/,"");if(o.length===0)return u?[p,""]:[p];let m=Xh(o.join("/")),f=[];return f.push(...m.map(b=>b===""?p:[p,b].join("/"))),u&&f.push(...m),f.map(b=>n.startsWith("/")&&b===""?"/":b)}function Ig(n){n.sort((c,d)=>c.score!==d.score?d.score-c.score:rp(c.routesMeta.map(o=>o.childrenIndex),d.routesMeta.map(o=>o.childrenIndex)))}var ep=/^:[\w-]+$/,tp=3,ap=2,sp=1,lp=10,np=-2,Oh=n=>n==="*";function ip(n,c){let d=n.split("/"),o=d.length;return d.some(Oh)&&(o+=np),c&&(o+=ap),d.filter(u=>!Oh(u)).reduce((u,p)=>u+(ep.test(p)?tp:p===""?sp:lp),o)}function rp(n,c){return n.length===c.length&&n.slice(0,-1).every((o,u)=>o===c[u])?n[n.length-1]-c[c.length-1]:0}function cp(n,c,d=!1){let{routesMeta:o}=n,u={},p="/",m=[];for(let f=0;f<o.length;++f){let b=o[f],v=f===o.length-1,j=p==="/"?c:c.slice(p.length)||"/",x=Yi({path:b.relativePath,caseSensitive:b.caseSensitive,end:v},j),y=b.route;if(!x&&v&&d&&!o[o.length-1].route.index&&(x=Yi({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},j)),!x)return null;Object.assign(u,x.params),m.push({params:u,pathname:Ta([p,x.pathname]),pathnameBase:fp(Ta([p,x.pathnameBase])),route:y}),x.pathnameBase!=="/"&&(p=Ta([p,x.pathnameBase]))}return m}function Yi(n,c){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[d,o]=op(n.path,n.caseSensitive,n.end),u=c.match(d);if(!u)return null;let p=u[0],m=p.replace(/(.)\/+$/,"$1"),f=u.slice(1);return{params:o.reduce((v,{paramName:j,isOptional:x},y)=>{if(j==="*"){let N=f[y]||"";m=p.slice(0,p.length-N.length).replace(/(.)\/+$/,"$1")}const C=f[y];return x&&!C?v[j]=void 0:v[j]=(C||"").replace(/%2F/g,"/"),v},{}),pathname:p,pathnameBase:m,pattern:n}}function op(n,c=!1,d=!0){Yt(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let o=[],u="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,f,b)=>(o.push({paramName:f,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(o.push({paramName:"*"}),u+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):d?u+="\\/*$":n!==""&&n!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,c?void 0:"i"),o]}function dp(n){try{return n.split("/").map(c=>decodeURIComponent(c).replace(/\//g,"%2F")).join("/")}catch(c){return Yt(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${c}).`),n}}function Ma(n,c){if(c==="/")return n;if(!n.toLowerCase().startsWith(c.toLowerCase()))return null;let d=c.endsWith("/")?c.length-1:c.length,o=n.charAt(d);return o&&o!=="/"?null:n.slice(d)||"/"}var $h=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,up=n=>$h.test(n);function mp(n,c="/"){let{pathname:d,search:o="",hash:u=""}=typeof n=="string"?Es(n):n,p;if(d)if(up(d))p=d;else{if(d.includes("//")){let m=d;d=d.replace(/\/\/+/g,"/"),Yt(!1,`Pathnames cannot have embedded double slashes - normalizing ${m} -> ${d}`)}d.startsWith("/")?p=Lh(d.substring(1),"/"):p=Lh(d,c)}else p=c;return{pathname:p,search:xp(o),hash:gp(u)}}function Lh(n,c){let d=c.replace(/\/+$/,"").split("/");return n.split("/").forEach(u=>{u===".."?d.length>1&&d.pop():u!=="."&&d.push(u)}),d.length>1?d.join("/"):"/"}function ho(n,c,d,o){return`Cannot include a '${n}' character in a manually specified \`to.${c}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${d}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hp(n){return n.filter((c,d)=>d===0||c.route.path&&c.route.path.length>0)}function No(n){let c=hp(n);return c.map((d,o)=>o===c.length-1?d.pathname:d.pathnameBase)}function wo(n,c,d,o=!1){let u;typeof n=="string"?u=Es(n):(u={...n},Ie(!u.pathname||!u.pathname.includes("?"),ho("?","pathname","search",u)),Ie(!u.pathname||!u.pathname.includes("#"),ho("#","pathname","hash",u)),Ie(!u.search||!u.search.includes("#"),ho("#","search","hash",u)));let p=n===""||u.pathname==="",m=p?"/":u.pathname,f;if(m==null)f=d;else{let x=c.length-1;if(!o&&m.startsWith("..")){let y=m.split("/");for(;y[0]==="..";)y.shift(),x-=1;u.pathname=y.join("/")}f=x>=0?c[x]:"/"}let b=mp(u,f),v=m&&m!=="/"&&m.endsWith("/"),j=(p||m===".")&&d.endsWith("/");return!b.pathname.endsWith("/")&&(v||j)&&(b.pathname+="/"),b}var Ta=n=>n.join("/").replace(/\/\/+/g,"/"),fp=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),xp=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,gp=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,pp=class{constructor(n,c,d,o=!1){this.status=n,this.statusText=c||"",this.internal=o,d instanceof Error?(this.data=d.toString(),this.error=d):this.data=d}};function bp(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function vp(n){return n.map(c=>c.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Qh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Vh(n,c){let d=n;if(typeof d!="string"||!$h.test(d))return{absoluteURL:void 0,isExternal:!1,to:d};let o=d,u=!1;if(Qh)try{let p=new URL(window.location.href),m=d.startsWith("//")?new URL(p.protocol+d):new URL(d),f=Ma(m.pathname,c);m.origin===p.origin&&f!=null?d=f+m.search+m.hash:u=!0}catch{Yt(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:u,to:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Zh=["POST","PUT","PATCH","DELETE"];new Set(Zh);var yp=["GET",...Zh];new Set(yp);var bl=g.createContext(null);bl.displayName="DataRouter";var Gi=g.createContext(null);Gi.displayName="DataRouterState";var jp=g.createContext(!1),Jh=g.createContext({isTransitioning:!1});Jh.displayName="ViewTransition";var Np=g.createContext(new Map);Np.displayName="Fetchers";var wp=g.createContext(null);wp.displayName="Await";var Ft=g.createContext(null);Ft.displayName="Navigation";var vn=g.createContext(null);vn.displayName="Location";var sa=g.createContext({outlet:null,matches:[],isDataRoute:!1});sa.displayName="Route";var So=g.createContext(null);So.displayName="RouteError";var Ph="REACT_ROUTER_ERROR",Sp="REDIRECT",_p="ROUTE_ERROR_RESPONSE";function Cp(n){if(n.startsWith(`${Ph}:${Sp}:{`))try{let c=JSON.parse(n.slice(28));if(typeof c=="object"&&c&&typeof c.status=="number"&&typeof c.statusText=="string"&&typeof c.location=="string"&&typeof c.reloadDocument=="boolean"&&typeof c.replace=="boolean")return c}catch{}}function Ep(n){if(n.startsWith(`${Ph}:${_p}:{`))try{let c=JSON.parse(n.slice(40));if(typeof c=="object"&&c&&typeof c.status=="number"&&typeof c.statusText=="string")return new pp(c.status,c.statusText,c.data)}catch{}}function kp(n,{relative:c}={}){Ie(vl(),"useHref() may be used only in the context of a <Router> component.");let{basename:d,navigator:o}=g.useContext(Ft),{hash:u,pathname:p,search:m}=yn(n,{relative:c}),f=p;return d!=="/"&&(f=p==="/"?d:Ta([d,p])),o.createHref({pathname:f,search:m,hash:u})}function vl(){return g.useContext(vn)!=null}function Ra(){return Ie(vl(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(vn).location}var Kh="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Wh(n){g.useContext(Ft).static||g.useLayoutEffect(n)}function is(){let{isDataRoute:n}=g.useContext(sa);return n?Fp():Dp()}function Dp(){Ie(vl(),"useNavigate() may be used only in the context of a <Router> component.");let n=g.useContext(bl),{basename:c,navigator:d}=g.useContext(Ft),{matches:o}=g.useContext(sa),{pathname:u}=Ra(),p=JSON.stringify(No(o)),m=g.useRef(!1);return Wh(()=>{m.current=!0}),g.useCallback((b,v={})=>{if(Yt(m.current,Kh),!m.current)return;if(typeof b=="number"){d.go(b);return}let j=wo(b,JSON.parse(p),u,v.relative==="path");n==null&&c!=="/"&&(j.pathname=j.pathname==="/"?c:Ta([c,j.pathname])),(v.replace?d.replace:d.push)(j,v.state,v)},[c,d,p,u,n])}g.createContext(null);function Ap(){let{matches:n}=g.useContext(sa),c=n[n.length-1];return c?c.params:{}}function yn(n,{relative:c}={}){let{matches:d}=g.useContext(sa),{pathname:o}=Ra(),u=JSON.stringify(No(d));return g.useMemo(()=>wo(n,JSON.parse(u),o,c==="path"),[n,u,o,c])}function Tp(n,c){return Ih(n,c)}function Ih(n,c,d,o,u){Ie(vl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:p}=g.useContext(Ft),{matches:m}=g.useContext(sa),f=m[m.length-1],b=f?f.params:{},v=f?f.pathname:"/",j=f?f.pathnameBase:"/",x=f&&f.route;{let O=x&&x.path||"";tf(v,!x||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let y=Ra(),C;if(c){let O=typeof c=="string"?Es(c):c;Ie(j==="/"||O.pathname?.startsWith(j),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${j}" but pathname "${O.pathname}" was given in the \`location\` prop.`),C=O}else C=y;let N=C.pathname||"/",_=N;if(j!=="/"){let O=j.replace(/^\//,"").split("/");_="/"+N.replace(/^\//,"").split("/").slice(O.length).join("/")}let A=Fh(n,{pathname:_});Yt(x||A!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Yt(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=Lp(A&&A.map(O=>Object.assign({},O,{params:Object.assign({},b,O.params),pathname:Ta([j,p.encodeLocation?p.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?j:Ta([j,p.encodeLocation?p.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),m,d,o,u);return c&&E?g.createElement(vn.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},E):E}function Mp(){let n=Yp(),c=bp(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),d=n instanceof Error?n.stack:null,o="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:o},p={padding:"2px 4px",backgroundColor:o},m=null;return console.error("Error handled by React Router default ErrorBoundary:",n),m=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:p},"ErrorBoundary")," or"," ",g.createElement("code",{style:p},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},c),d?g.createElement("pre",{style:u},d):null,m)}var Rp=g.createElement(Mp,null),ef=class extends g.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,c){return c.location!==n.location||c.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:c.error,location:c.location,revalidation:n.revalidation||c.revalidation}}componentDidCatch(n,c){this.props.onError?this.props.onError(n,c):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const d=Ep(n.digest);d&&(n=d)}let c=n!==void 0?g.createElement(sa.Provider,{value:this.props.routeContext},g.createElement(So.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?g.createElement(zp,{error:n},c):c}};ef.contextType=jp;var fo=new WeakMap;function zp({children:n,error:c}){let{basename:d}=g.useContext(Ft);if(typeof c=="object"&&c&&"digest"in c&&typeof c.digest=="string"){let o=Cp(c.digest);if(o){let u=fo.get(c);if(u)throw u;let p=Vh(o.location,d);if(Qh&&!fo.get(c))if(p.isExternal||o.reloadDocument)window.location.href=p.absoluteURL||p.to;else{const m=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(p.to,{replace:o.replace}));throw fo.set(c,m),m}return g.createElement("meta",{httpEquiv:"refresh",content:`0;url=${p.absoluteURL||p.to}`})}}return n}function Op({routeContext:n,match:c,children:d}){let o=g.useContext(bl);return o&&o.static&&o.staticContext&&(c.route.errorElement||c.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=c.route.id),g.createElement(sa.Provider,{value:n},d)}function Lp(n,c=[],d=null,o=null,u=null){if(n==null){if(!d)return null;if(d.errors)n=d.matches;else if(c.length===0&&!d.initialized&&d.matches.length>0)n=d.matches;else return null}let p=n,m=d?.errors;if(m!=null){let j=p.findIndex(x=>x.route.id&&m?.[x.route.id]!==void 0);Ie(j>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(m).join(",")}`),p=p.slice(0,Math.min(p.length,j+1))}let f=!1,b=-1;if(d)for(let j=0;j<p.length;j++){let x=p[j];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(b=j),x.route.id){let{loaderData:y,errors:C}=d,N=x.route.loader&&!y.hasOwnProperty(x.route.id)&&(!C||C[x.route.id]===void 0);if(x.route.lazy||N){f=!0,b>=0?p=p.slice(0,b+1):p=[p[0]];break}}}let v=d&&o?(j,x)=>{o(j,{location:d.location,params:d.matches?.[0]?.params??{},unstable_pattern:vp(d.matches),errorInfo:x})}:void 0;return p.reduceRight((j,x,y)=>{let C,N=!1,_=null,A=null;d&&(C=m&&x.route.id?m[x.route.id]:void 0,_=x.route.errorElement||Rp,f&&(b<0&&y===0?(tf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,A=null):b===y&&(N=!0,A=x.route.hydrateFallbackElement||null)));let E=c.concat(p.slice(0,y+1)),O=()=>{let Y;return C?Y=_:N?Y=A:x.route.Component?Y=g.createElement(x.route.Component,null):x.route.element?Y=x.route.element:Y=j,g.createElement(Op,{match:x,routeContext:{outlet:j,matches:E,isDataRoute:d!=null},children:Y})};return d&&(x.route.ErrorBoundary||x.route.errorElement||y===0)?g.createElement(ef,{location:d.location,revalidation:d.revalidation,component:_,error:C,children:O(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:v}):O()},null)}function _o(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Up(n){let c=g.useContext(bl);return Ie(c,_o(n)),c}function Bp(n){let c=g.useContext(Gi);return Ie(c,_o(n)),c}function Hp(n){let c=g.useContext(sa);return Ie(c,_o(n)),c}function Co(n){let c=Hp(n),d=c.matches[c.matches.length-1];return Ie(d.route.id,`${n} can only be used on routes that contain a unique "id"`),d.route.id}function qp(){return Co("useRouteId")}function Yp(){let n=g.useContext(So),c=Bp("useRouteError"),d=Co("useRouteError");return n!==void 0?n:c.errors?.[d]}function Fp(){let{router:n}=Up("useNavigate"),c=Co("useNavigate"),d=g.useRef(!1);return Wh(()=>{d.current=!0}),g.useCallback(async(u,p={})=>{Yt(d.current,Kh),d.current&&(typeof u=="number"?await n.navigate(u):await n.navigate(u,{fromRouteId:c,...p}))},[n,c])}var Uh={};function tf(n,c,d){!c&&!Uh[n]&&(Uh[n]=!0,Yt(!1,d))}g.memo(Gp);function Gp({routes:n,future:c,state:d,onError:o}){return Ih(n,void 0,d,o,c)}function Xp({to:n,replace:c,state:d,relative:o}){Ie(vl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=g.useContext(Ft);Yt(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:p}=g.useContext(sa),{pathname:m}=Ra(),f=is(),b=wo(n,No(p),m,o==="path"),v=JSON.stringify(b);return g.useEffect(()=>{f(JSON.parse(v),{replace:c,state:d,relative:o})},[f,v,o,c,d]),null}function pl(n){Ie(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $p({basename:n="/",children:c=null,location:d,navigationType:o="POP",navigator:u,static:p=!1,unstable_useTransitions:m}){Ie(!vl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),b=g.useMemo(()=>({basename:f,navigator:u,static:p,unstable_useTransitions:m,future:{}}),[f,u,p,m]);typeof d=="string"&&(d=Es(d));let{pathname:v="/",search:j="",hash:x="",state:y=null,key:C="default"}=d,N=g.useMemo(()=>{let _=Ma(v,f);return _==null?null:{location:{pathname:_,search:j,hash:x,state:y,key:C},navigationType:o}},[f,v,j,x,y,C,o]);return Yt(N!=null,`<Router basename="${f}"> is not able to match the URL "${v}${j}${x}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:g.createElement(Ft.Provider,{value:b},g.createElement(vn.Provider,{children:c,value:N}))}function Qp({children:n,location:c}){return Tp(vo(n),c)}function vo(n,c=[]){let d=[];return g.Children.forEach(n,(o,u)=>{if(!g.isValidElement(o))return;let p=[...c,u];if(o.type===g.Fragment){d.push.apply(d,vo(o.props.children,p));return}Ie(o.type===pl,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ie(!o.props.index||!o.props.children,"An index route cannot have child routes.");let m={id:o.props.id||p.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(m.children=vo(o.props.children,p)),d.push(m)}),d}var Hi="get",qi="application/x-www-form-urlencoded";function Xi(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function Vp(n){return Xi(n)&&n.tagName.toLowerCase()==="button"}function Zp(n){return Xi(n)&&n.tagName.toLowerCase()==="form"}function Jp(n){return Xi(n)&&n.tagName.toLowerCase()==="input"}function Pp(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Kp(n,c){return n.button===0&&(!c||c==="_self")&&!Pp(n)}var Ui=null;function Wp(){if(Ui===null)try{new FormData(document.createElement("form"),0),Ui=!1}catch{Ui=!0}return Ui}var Ip=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xo(n){return n!=null&&!Ip.has(n)?(Yt(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qi}"`),null):n}function e0(n,c){let d,o,u,p,m;if(Zp(n)){let f=n.getAttribute("action");o=f?Ma(f,c):null,d=n.getAttribute("method")||Hi,u=xo(n.getAttribute("enctype"))||qi,p=new FormData(n)}else if(Vp(n)||Jp(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=n.getAttribute("formaction")||f.getAttribute("action");if(o=b?Ma(b,c):null,d=n.getAttribute("formmethod")||f.getAttribute("method")||Hi,u=xo(n.getAttribute("formenctype"))||xo(f.getAttribute("enctype"))||qi,p=new FormData(f,n),!Wp()){let{name:v,type:j,value:x}=n;if(j==="image"){let y=v?`${v}.`:"";p.append(`${y}x`,"0"),p.append(`${y}y`,"0")}else v&&p.append(v,x)}}else{if(Xi(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');d=Hi,o=null,u=qi,m=n}return p&&u==="text/plain"&&(m=p,p=void 0),{action:o,method:d.toLowerCase(),encType:u,formData:p,body:m}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Eo(n,c){if(n===!1||n===null||typeof n>"u")throw new Error(c)}function t0(n,c,d){let o=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return o.pathname==="/"?o.pathname=`_root.${d}`:c&&Ma(o.pathname,c)==="/"?o.pathname=`${c.replace(/\/$/,"")}/_root.${d}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${d}`,o}async function a0(n,c){if(n.id in c)return c[n.id];try{let d=await import(n.module);return c[n.id]=d,d}catch(d){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(d),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function s0(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function l0(n,c,d){let o=await Promise.all(n.map(async u=>{let p=c.routes[u.route.id];if(p){let m=await a0(p,d);return m.links?m.links():[]}return[]}));return c0(o.flat(1).filter(s0).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function Bh(n,c,d,o,u,p){let m=(b,v)=>d[v]?b.route.id!==d[v].route.id:!0,f=(b,v)=>d[v].pathname!==b.pathname||d[v].route.path?.endsWith("*")&&d[v].params["*"]!==b.params["*"];return p==="assets"?c.filter((b,v)=>m(b,v)||f(b,v)):p==="data"?c.filter((b,v)=>{let j=o.routes[b.route.id];if(!j||!j.hasLoader)return!1;if(m(b,v)||f(b,v))return!0;if(b.route.shouldRevalidate){let x=b.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:d[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function n0(n,c,{includeHydrateFallback:d}={}){return i0(n.map(o=>{let u=c.routes[o.route.id];if(!u)return[];let p=[u.module];return u.clientActionModule&&(p=p.concat(u.clientActionModule)),u.clientLoaderModule&&(p=p.concat(u.clientLoaderModule)),d&&u.hydrateFallbackModule&&(p=p.concat(u.hydrateFallbackModule)),u.imports&&(p=p.concat(u.imports)),p}).flat(1))}function i0(n){return[...new Set(n)]}function r0(n){let c={},d=Object.keys(n).sort();for(let o of d)c[o]=n[o];return c}function c0(n,c){let d=new Set;return new Set(c),n.reduce((o,u)=>{let p=JSON.stringify(r0(u));return d.has(p)||(d.add(p),o.push({key:p,link:u})),o},[])}function af(){let n=g.useContext(bl);return Eo(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function o0(){let n=g.useContext(Gi);return Eo(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var ko=g.createContext(void 0);ko.displayName="FrameworkContext";function sf(){let n=g.useContext(ko);return Eo(n,"You must render this element inside a <HydratedRouter> element"),n}function d0(n,c){let d=g.useContext(ko),[o,u]=g.useState(!1),[p,m]=g.useState(!1),{onFocus:f,onBlur:b,onMouseEnter:v,onMouseLeave:j,onTouchStart:x}=c,y=g.useRef(null);g.useEffect(()=>{if(n==="render"&&m(!0),n==="viewport"){let _=E=>{E.forEach(O=>{m(O.isIntersecting)})},A=new IntersectionObserver(_,{threshold:.5});return y.current&&A.observe(y.current),()=>{A.disconnect()}}},[n]),g.useEffect(()=>{if(o){let _=setTimeout(()=>{m(!0)},100);return()=>{clearTimeout(_)}}},[o]);let C=()=>{u(!0)},N=()=>{u(!1),m(!1)};return d?n!=="intent"?[p,y,{}]:[p,y,{onFocus:gn(f,C),onBlur:gn(b,N),onMouseEnter:gn(v,C),onMouseLeave:gn(j,N),onTouchStart:gn(x,C)}]:[!1,y,{}]}function gn(n,c){return d=>{n&&n(d),d.defaultPrevented||c(d)}}function u0({page:n,...c}){let{router:d}=af(),o=g.useMemo(()=>Fh(d.routes,n,d.basename),[d.routes,n,d.basename]);return o?g.createElement(h0,{page:n,matches:o,...c}):null}function m0(n){let{manifest:c,routeModules:d}=sf(),[o,u]=g.useState([]);return g.useEffect(()=>{let p=!1;return l0(n,c,d).then(m=>{p||u(m)}),()=>{p=!0}},[n,c,d]),o}function h0({page:n,matches:c,...d}){let o=Ra(),{manifest:u,routeModules:p}=sf(),{basename:m}=af(),{loaderData:f,matches:b}=o0(),v=g.useMemo(()=>Bh(n,c,b,u,o,"data"),[n,c,b,u,o]),j=g.useMemo(()=>Bh(n,c,b,u,o,"assets"),[n,c,b,u,o]),x=g.useMemo(()=>{if(n===o.pathname+o.search+o.hash)return[];let N=new Set,_=!1;if(c.forEach(E=>{let O=u.routes[E.route.id];!O||!O.hasLoader||(!v.some(Y=>Y.route.id===E.route.id)&&E.route.id in f&&p[E.route.id]?.shouldRevalidate||O.hasClientLoader?_=!0:N.add(E.route.id))}),N.size===0)return[];let A=t0(n,m,"data");return _&&N.size>0&&A.searchParams.set("_routes",c.filter(E=>N.has(E.route.id)).map(E=>E.route.id).join(",")),[A.pathname+A.search]},[m,f,o,u,v,c,n,p]),y=g.useMemo(()=>n0(j,u),[j,u]),C=m0(j);return g.createElement(g.Fragment,null,x.map(N=>g.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...d})),y.map(N=>g.createElement("link",{key:N,rel:"modulepreload",href:N,...d})),C.map(({key:N,link:_})=>g.createElement("link",{key:N,nonce:d.nonce,..._})))}function f0(...n){return c=>{n.forEach(d=>{typeof d=="function"?d(c):d!=null&&(d.current=c)})}}var x0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{x0&&(window.__reactRouterVersion="7.11.0")}catch{}function g0({basename:n,children:c,unstable_useTransitions:d,window:o}){let u=g.useRef();u.current==null&&(u.current=Zg({window:o,v5Compat:!0}));let p=u.current,[m,f]=g.useState({action:p.action,location:p.location}),b=g.useCallback(v=>{d===!1?f(v):g.startTransition(()=>f(v))},[d]);return g.useLayoutEffect(()=>p.listen(b),[p,b]),g.createElement($p,{basename:n,children:c,location:m.location,navigationType:m.action,navigator:p,unstable_useTransitions:d})}var lf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nf=g.forwardRef(function({onClick:c,discover:d="render",prefetch:o="none",relative:u,reloadDocument:p,replace:m,state:f,target:b,to:v,preventScrollReset:j,viewTransition:x,unstable_defaultShouldRevalidate:y,...C},N){let{basename:_,unstable_useTransitions:A}=g.useContext(Ft),E=typeof v=="string"&&lf.test(v),O=Vh(v,_);v=O.to;let Y=kp(v,{relative:u}),[I,$,le]=d0(o,C),V=y0(v,{replace:m,state:f,target:b,preventScrollReset:j,relative:u,viewTransition:x,unstable_defaultShouldRevalidate:y,unstable_useTransitions:A});function X(he){c&&c(he),he.defaultPrevented||V(he)}let ge=g.createElement("a",{...C,...le,href:O.absoluteURL||Y,onClick:O.isExternal||p?c:X,ref:f0(N,$),target:b,"data-discover":!E&&d==="render"?"true":void 0});return I&&!E?g.createElement(g.Fragment,null,ge,g.createElement(u0,{page:Y})):ge});nf.displayName="Link";var p0=g.forwardRef(function({"aria-current":c="page",caseSensitive:d=!1,className:o="",end:u=!1,style:p,to:m,viewTransition:f,children:b,...v},j){let x=yn(m,{relative:v.relative}),y=Ra(),C=g.useContext(Gi),{navigator:N,basename:_}=g.useContext(Ft),A=C!=null&&_0(x)&&f===!0,E=N.encodeLocation?N.encodeLocation(x).pathname:x.pathname,O=y.pathname,Y=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;d||(O=O.toLowerCase(),Y=Y?Y.toLowerCase():null,E=E.toLowerCase()),Y&&_&&(Y=Ma(Y,_)||Y);const I=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let $=O===E||!u&&O.startsWith(E)&&O.charAt(I)==="/",le=Y!=null&&(Y===E||!u&&Y.startsWith(E)&&Y.charAt(E.length)==="/"),V={isActive:$,isPending:le,isTransitioning:A},X=$?c:void 0,ge;typeof o=="function"?ge=o(V):ge=[o,$?"active":null,le?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let he=typeof p=="function"?p(V):p;return g.createElement(nf,{...v,"aria-current":X,className:ge,ref:j,style:he,to:m,viewTransition:f},typeof b=="function"?b(V):b)});p0.displayName="NavLink";var b0=g.forwardRef(({discover:n="render",fetcherKey:c,navigate:d,reloadDocument:o,replace:u,state:p,method:m=Hi,action:f,onSubmit:b,relative:v,preventScrollReset:j,viewTransition:x,unstable_defaultShouldRevalidate:y,...C},N)=>{let{unstable_useTransitions:_}=g.useContext(Ft),A=w0(),E=S0(f,{relative:v}),O=m.toLowerCase()==="get"?"get":"post",Y=typeof f=="string"&&lf.test(f),I=$=>{if(b&&b($),$.defaultPrevented)return;$.preventDefault();let le=$.nativeEvent.submitter,V=le?.getAttribute("formmethod")||m,X=()=>A(le||$.currentTarget,{fetcherKey:c,method:V,navigate:d,replace:u,state:p,relative:v,preventScrollReset:j,viewTransition:x,unstable_defaultShouldRevalidate:y});_&&d!==!1?g.startTransition(()=>X()):X()};return g.createElement("form",{ref:N,method:O,action:E,onSubmit:o?b:I,...C,"data-discover":!Y&&n==="render"?"true":void 0})});b0.displayName="Form";function v0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rf(n){let c=g.useContext(bl);return Ie(c,v0(n)),c}function y0(n,{target:c,replace:d,state:o,preventScrollReset:u,relative:p,viewTransition:m,unstable_defaultShouldRevalidate:f,unstable_useTransitions:b}={}){let v=is(),j=Ra(),x=yn(n,{relative:p});return g.useCallback(y=>{if(Kp(y,c)){y.preventDefault();let C=d!==void 0?d:bn(j)===bn(x),N=()=>v(n,{replace:C,state:o,preventScrollReset:u,relative:p,viewTransition:m,unstable_defaultShouldRevalidate:f});b?g.startTransition(()=>N()):N()}},[j,v,x,d,o,c,n,u,p,m,f,b])}var j0=0,N0=()=>`__${String(++j0)}__`;function w0(){let{router:n}=rf("useSubmit"),{basename:c}=g.useContext(Ft),d=qp(),o=n.fetch,u=n.navigate;return g.useCallback(async(p,m={})=>{let{action:f,method:b,encType:v,formData:j,body:x}=e0(p,c);if(m.navigate===!1){let y=m.fetcherKey||N0();await o(y,d,m.action||f,{unstable_defaultShouldRevalidate:m.unstable_defaultShouldRevalidate,preventScrollReset:m.preventScrollReset,formData:j,body:x,formMethod:m.method||b,formEncType:m.encType||v,flushSync:m.flushSync})}else await u(m.action||f,{unstable_defaultShouldRevalidate:m.unstable_defaultShouldRevalidate,preventScrollReset:m.preventScrollReset,formData:j,body:x,formMethod:m.method||b,formEncType:m.encType||v,replace:m.replace,state:m.state,fromRouteId:d,flushSync:m.flushSync,viewTransition:m.viewTransition})},[o,u,c,d])}function S0(n,{relative:c}={}){let{basename:d}=g.useContext(Ft),o=g.useContext(sa);Ie(o,"useFormAction must be used inside a RouteContext");let[u]=o.matches.slice(-1),p={...yn(n||".",{relative:c})},m=Ra();if(n==null){p.search=m.search;let f=new URLSearchParams(p.search),b=f.getAll("index");if(b.some(j=>j==="")){f.delete("index"),b.filter(x=>x).forEach(x=>f.append("index",x));let j=f.toString();p.search=j?`?${j}`:""}}return(!n||n===".")&&u.route.index&&(p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index"),d!=="/"&&(p.pathname=p.pathname==="/"?d:Ta([d,p.pathname])),bn(p)}function _0(n,{relative:c}={}){let d=g.useContext(Jh);Ie(d!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=rf("useViewTransitionState"),u=yn(n,{relative:c});if(!d.isTransitioning)return!1;let p=Ma(d.currentLocation.pathname,o)||d.currentLocation.pathname,m=Ma(d.nextLocation.pathname,o)||d.nextLocation.pathname;return Yi(u.pathname,m)!=null||Yi(u.pathname,p)!=null}var Rt=Yh();const C0=Bg(Rt),pn={companyName:"SanctumEMHR",systemName:"Electronic Mental Health Record",tagline:"Where modern design meets clinical insight.",logoText:"S",logoUrl:"/app/SanctumLogo.png",colors:{primary:"#6B9AC4",secondary:"#A8C5A5",accent:"#E8DCC4"}};function E0(){const n=is(),[c,d]=g.useState(""),[o,u]=g.useState(""),[p,m]=g.useState(!1),[f,b]=g.useState(""),v=async j=>{j.preventDefault(),m(!0),b("");try{const x=await fetch("/custom/api/login.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:c,password:o})}),y=await x.json();if(!x.ok){y.error==="Account locked"?b(y.message||"This account has been locked due to multiple failed login attempts. Please contact an administrator."):y.error==="Account inactive"?b(y.message||"This account has been deactivated. Please contact an administrator."):b(y.error||"Invalid username or password");return}y.success?(y.user&&localStorage.setItem("user",JSON.stringify(y.user)),n("/dashboard")):b(y.error||"Login failed")}catch(x){console.error("Login error:",x),b("An error occurred during login. Please try again.")}finally{m(!1)}};return e.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-mental"}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"particle particle-1"}),e.jsx("div",{className:"particle particle-2"}),e.jsx("div",{className:"particle particle-3"}),e.jsx("div",{className:"particle particle-4"}),e.jsx("div",{className:"particle particle-5"})]}),e.jsx("div",{className:"relative z-10 w-full max-w-6xl mx-4",children:e.jsx("div",{className:"rounded-3xl overflow-hidden",style:{backdropFilter:"blur(60px) saturate(180%)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0.4) 100%)",boxShadow:"0 8px 32px rgba(107, 154, 196, 0.12), 0 2px 8px rgba(0, 0, 0, 0.06), inset 0 1px 0 rgba(255, 255, 255, 0.8)",border:"1px solid rgba(255, 255, 255, 0.6)"},children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[e.jsx("div",{className:"p-8 flex flex-col items-center justify-center",children:e.jsx("div",{className:"w-full max-w-lg rounded-2xl p-6",style:{backdropFilter:"blur(40px)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.1) 100%)",boxShadow:"0 4px 16px rgba(107, 154, 196, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.3)",border:"1px solid rgba(255, 255, 255, 0.3)"},children:pn.logoUrl?e.jsx("img",{src:pn.logoUrl,alt:`${pn.companyName} logo`,className:"w-full h-auto object-contain"}):e.jsx("div",{className:"text-9xl text-gray-700 font-bold text-center",children:pn.logoText})})}),e.jsxs("div",{className:"p-8",children:[e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-800 text-sm font-semibold mb-2",children:"Username"}),e.jsx("input",{type:"text",value:c,onChange:j=>d(j.target.value),className:"input-lg",placeholder:"Enter your username",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-800 text-sm font-semibold mb-2",children:"Password"}),e.jsx("input",{type:"password",value:o,onChange:j=>u(j.target.value),className:"input-lg",placeholder:"Enter your password",required:!0})]}),f&&e.jsx("div",{className:"error-message",children:f}),e.jsx("button",{type:"submit",disabled:p,className:"btn-search w-full disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Signing in...":"Sign In"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full border",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.7) 0%, rgba(255, 255, 255, 0.6) 100%)",backdropFilter:"blur(40px)",borderColor:"rgba(255, 255, 255, 0.7)",boxShadow:"0 2px 8px rgba(107, 154, 196, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.9)"},children:[e.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700 text-xs font-semibold",children:"HIPAA Compliant & Secure"})]})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-gray-600 text-xs",children:"Version 0.3.0-alpha"})}),e.jsxs("div",{className:"mt-6 text-center border-t border-white/30 pt-4",children:[e.jsx("p",{className:"text-gray-600 text-xs",children:"SanctumEMHR is Copyright  2026 Sacred Wandering"}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Proprietary and Confidential"})]})]})]})})})]})}function k0({user:n,onLogout:c,setActiveNav:d}){return e.jsxs("div",{className:"flex items-center gap-3 bg-white/40 backdrop-blur-sm rounded-2xl px-4 py-2 border border-white/50",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white font-bold text-sm",children:n.initials})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:n.name}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("button",{onClick:()=>d("settings"),className:"text-xs text-gray-600 hover:text-gray-900 transition-all",children:"Settings"}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("button",{onClick:c,className:"text-xs text-gray-600 hover:text-gray-900 transition-all",children:"Sign Out"})]})]})]})}function D0({branding:n,today:c,user:d,onLogout:o,setActiveNav:u}){return e.jsx("header",{className:"relative z-10 backdrop-blur-3xl bg-white/45 shadow-lg border-b border-white/60 sticky top-0",style:{boxShadow:"0 4px 16px rgba(107, 154, 196, 0.1), inset 0 -1px 0 rgba(255, 255, 255, 0.8)"},children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center border overflow-hidden",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.7) 0%, rgba(255, 255, 255, 0.6) 100%)",backdropFilter:"blur(40px)",borderColor:"rgba(255, 255, 255, 0.7)",boxShadow:"0 4px 12px rgba(107, 154, 196, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.9)"},children:[n.logoUrl?e.jsx("img",{src:n.logoUrl,alt:n.companyName,className:"w-full h-full object-contain p-1",onError:p=>{p.target.style.display="none",p.target.nextSibling.style.display="block"}}):null,e.jsx("span",{className:"text-xl font-bold text-gray-700",style:{display:n.logoUrl?"none":"block"},children:n.logoText})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:n.companyName}),e.jsx("p",{className:"text-xs text-gray-600",children:c})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{className:"relative p-2 rounded-xl transition-all border border-transparent",style:{transition:"all 300ms"},onMouseEnter:p=>{p.target.style.background="rgba(255, 255, 255, 0.4)",p.target.style.backdropFilter="blur(20px)",p.target.style.borderColor="rgba(255, 255, 255, 0.5)"},onMouseLeave:p=>{p.target.style.background="transparent",p.target.style.backdropFilter="none",p.target.style.borderColor="transparent"},children:[e.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),d?.unreadMessages>0&&e.jsx("span",{className:"absolute top-1 right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center border-2 border-white",children:d.unreadMessages})]}),e.jsx(k0,{user:d,onLogout:o,setActiveNav:u})]})]})})})}function A0(){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-mental"}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"particle particle-1"}),e.jsx("div",{className:"particle particle-2"}),e.jsx("div",{className:"particle particle-3"}),e.jsx("div",{className:"particle particle-4"}),e.jsx("div",{className:"particle particle-5"})]})]})}function T0({item:n,isActive:c,onClick:d}){const o=is(),u=()=>{d(),o("/dashboard",{state:{activeNav:n.id}})};return e.jsx("button",{onClick:u,className:c?"nav-main-active":"nav-main-inactive",children:n.label})}function M0({activeNav:n,setActiveNav:c,user:d}){const o=d?.permissions?.includes("admin")||d?.permissions?.includes("emergency_login"),u=[{id:"dashboard",label:"Dashboard"},{id:"calendar",label:"Calendar"},{id:"clients",label:"Clients"},{id:"messages",label:"Messages"},{id:"billing",label:"Billing"},{id:"reports",label:"Reports"},...o?[{id:"admin",label:"Admin Settings"}]:[]];return e.jsx("nav",{className:"rounded-3xl p-2",style:{backdropFilter:"blur(60px) saturate(180%)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0.4) 100%)",boxShadow:"0 8px 32px rgba(107, 154, 196, 0.12), 0 2px 8px rgba(0, 0, 0, 0.06), inset 0 1px 0 rgba(255, 255, 255, 0.8)",border:"1px solid rgba(255, 255, 255, 0.6)"},children:e.jsx("div",{className:"flex gap-2",children:u.map(p=>e.jsx(T0,{item:p,isActive:n===p.id,onClick:()=>c(p.id)},p.id))})})}function cf({user:n,activeNav:c,setActiveNav:d,today:o,children:u,onLogout:p,wide:m=!1}){const f=m?"max-w-[1600px]":"max-w-7xl";return e.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[e.jsx(A0,{}),e.jsx(D0,{branding:pn,today:o,user:n,onLogout:p,setActiveNav:d}),e.jsx("div",{className:`relative z-10 ${f} mx-auto px-6 pt-6`,children:e.jsx(M0,{activeNav:c,setActiveNav:d,user:n})}),e.jsx("main",{className:`relative z-10 ${f} mx-auto px-6 py-8`,children:u})]})}function R0(){const n=new Date().getHours();return n>=5&&n<12?"Good morning":n>=12&&n<17?"Good afternoon":"Good evening"}function z0(){return e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:[R0(),"!"]}),e.jsx("p",{className:"text-gray-600",children:"Here's what's happening today."})]})}function Bi({value:n,label:c,trend:d,gradientFrom:o,gradientTo:u,icon:p}){const m=d.direction==="up"?c==="Unbilled Appointments"?"text-red-600":"text-green-600":c==="Unbilled Appointments"?"text-green-600":"text-red-600",f=c==="Active Clients"?"-":"+";return e.jsxs("div",{className:"card-main transform hover:scale-105 transition-all hover:shadow-3xl",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${o} ${u} rounded-2xl flex items-center justify-center shadow-lg`,children:p})}),e.jsx("div",{className:"text-4xl font-bold text-gray-800 mb-1",children:n}),e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-2",children:c}),e.jsxs("div",{className:`text-xs font-semibold flex items-center gap-1 ${m}`,children:[d.direction==="up"?"":""," ",f,d.change," ",d.label]})]})}function O0({stats:n}){return e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(Bi,{value:n.todayAppointments.value,label:"Today's Appointments",trend:n.todayAppointments.trend,gradientFrom:"from-blue-400",gradientTo:"to-blue-600",icon:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx(Bi,{value:n.unbilledAppointments.value,label:"Unbilled Appointments",trend:n.unbilledAppointments.trend,gradientFrom:"from-amber-400",gradientTo:"to-orange-600",icon:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx(Bi,{value:n.sessionsYTD.value,label:"Sessions This Year",trend:n.sessionsYTD.trend,gradientFrom:"from-green-400",gradientTo:"to-emerald-600",icon:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx(Bi,{value:n.activeClients.value,label:"Active Clients",trend:n.activeClients.trend,gradientFrom:"from-purple-400",gradientTo:"to-purple-600",icon:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})]})}function L0({onNewClient:n,onNewAppointment:c}){return e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:c,className:"btn-action btn-primary",children:"+ New Appointment"}),e.jsx("button",{onClick:n,className:"btn-action btn-success",children:"+ Add New Client"})]})]})}function U0({todaysAppointments:n,onAppointmentClick:c}){return e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"card-main",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h3",{className:"text-lg font-bold text-gray-800",children:["Today's Appointments (",n.length,")"]})}),e.jsx("div",{className:"space-y-3",children:n.map((d,o)=>e.jsx("div",{onClick:()=>c&&c(d),className:`${d.isNext?"backdrop-blur-2xl bg-gradient-to-r from-blue-500/40 to-purple-500/40 border-white/60":"backdrop-blur-xl bg-white/60"} rounded-2xl p-5 border-2 ${d.isNext?"border-blue-400":"border-transparent"} cursor-pointer hover:shadow-xl transition-all hover:scale-[1.02]`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[d.isNext&&e.jsx("div",{className:"w-12 h-12 bg-white/90 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[d.isNext&&e.jsxs("p",{className:"text-xs font-bold text-white/90 mb-1",children:["NEXT UP  ",d.minutesUntil," minutes"]}),e.jsxs("p",{className:`text-lg font-bold ${d.isNext?"text-white":"text-gray-800"}`,children:[d.time,"  ",d.client]}),e.jsxs("p",{className:`text-sm mt-1 ${d.isNext?"text-white/80":"text-gray-600"}`,children:[d.type,"  ",d.duration,d.room&&`  ${d.room}`,d.participants&&`  ${d.participants}`]})]})]}),d.isNext&&e.jsx("button",{className:"px-4 py-2 bg-white/90 hover:bg-white text-blue-600 font-semibold rounded-xl transition-all shadow-md hover:shadow-lg text-sm",children:"View Details"})]})},o))})]})})}async function Te(n,c={}){const d=await fetch(n,{...c,credentials:"include",headers:{"Content-Type":"application/json",...c.headers}}),o=await d.json();if(!d.ok)throw d.status===401?(c.noRedirect||(localStorage.removeItem("user"),window.location.href="/app/"),new Error("Authentication required")):new Error(o.message||o.error||`API request failed: ${d.statusText}`);return o}function $i(){const n=localStorage.getItem("user");if(!n)return null;try{return JSON.parse(n)}catch(c){return console.error("Error parsing user data:",c),null}}async function B0(){try{const n=await Te("/custom/api/session_user.php",{noRedirect:!0});if(console.log("Session user response:",n),n&&n.username)return localStorage.setItem("user",JSON.stringify(n)),{id:n.id||null,fname:n.firstName||n.fname||"",lname:n.lastName||n.lname||"",fullName:n.fullName||n.fullName||"",displayName:n.displayName||n.fullName||"",admin:n.isAdmin||n.admin||!1,username:n.username||null}}catch(n){console.log("Session user fetch failed:",n.message)}return null}async function of(n){if(!n||n.trim()==="")return[];const c=n.trim().split(/\s+/),d=new URLSearchParams;return c.length===1?d.append("fname",c[0]):c.length>=2&&(d.append("fname",c[0]),d.append("lname",c[c.length-1])),Te(`/custom/api/patient_search.php?${d.toString()}`)}async function df(){return Te("/custom/api/client_stats.php")}async function H0(){return Te("/custom/api/client_demographics.php")}async function q0(n="all"){const c=n!=="all"?`?status=${n}`:"";return Te(`/custom/api/client_list.php${c}`)}async function uf(n){return console.log("Fetching client detail for ID:",n),Te(`/custom/api/client_detail.php?id=${n}`)}async function Y0(n){return console.log("Fetching encounter detail for ID:",n),Te(`/custom/api/encounter_detail.php?encounter_id=${n}`)}async function yo(n){return console.log("Creating clinical note:",n),Te("/custom/api/notes/create_note.php",{method:"POST",body:JSON.stringify(n)})}async function F0(n,c={}){console.log("Fetching patient notes for ID:",n);const d=new URLSearchParams({patient_id:n});return c.note_type&&d.append("note_type",c.note_type),c.status&&d.append("status",c.status),c.start_date&&d.append("start_date",c.start_date),c.end_date&&d.append("end_date",c.end_date),Te(`/custom/api/notes/get_patient_notes.php?${d.toString()}`)}async function mf(n,c=!1){console.log("Fetching note:",n);const d=c?`note_uuid=${n}`:`note_id=${n}`;return Te(`/custom/api/notes/get_note.php?${d}`)}async function Hh(n,c){return console.log("Updating note:",n),Te("/custom/api/notes/update_note.php",{method:"POST",body:JSON.stringify({noteId:n,...c})})}async function G0(n){return Te("/custom/api/notes/autosave_note.php",{method:"POST",body:JSON.stringify(n)})}async function hf(n,c=null){return console.log("Signing note:",n),Te("/custom/api/notes/sign_note.php",{method:"POST",body:JSON.stringify({noteId:n,signatureData:c})})}async function X0(n){return console.log("Deleting note:",n),Te("/custom/api/notes/delete_note.php",{method:"DELETE",body:JSON.stringify({note_id:n})})}async function $0(n={}){console.log("Fetching interventions");const c=new URLSearchParams;n.tier&&c.append("tier",n.tier),n.modality&&c.append("modality",n.modality),n.include_inactive&&c.append("include_inactive",n.include_inactive);const d=c.toString();return Te(`/custom/api/notes/get_interventions.php${d?"?"+d:""}`)}async function ff(n,c={}){console.log("Fetching treatment goals for patient:",n);const d=new URLSearchParams({patient_id:n});return c.status&&d.append("status",c.status),c.include_all&&d.append("include_all",c.include_all),Te(`/custom/api/notes/get_treatment_goals.php?${d.toString()}`)}async function Q0(n,c="ICD10",d=50){console.log("Searching codes:",{searchTerm:n,codeType:c,limit:d});const o=new URLSearchParams({search:n,code_type:c,limit:d.toString()});return Te(`/custom/api/search_codes.php?${o.toString()}`)}async function V0(n,c={}){console.log("Fetching patient diagnoses:",{patientId:n,options:c});const d=new URLSearchParams({patient_id:n.toString()});return c.activeAsOf&&d.append("active_as_of",c.activeAsOf),c.includeRetired!==void 0&&d.append("include_retired",c.includeRetired?"1":"0"),Te(`/custom/api/get_patient_diagnoses.php?${d.toString()}`)}async function Z0(n){console.log("Fetching draft:",n);const c=new URLSearchParams;return n.note_id&&c.append("note_id",n.note_id),n.appointment_id&&c.append("appointment_id",n.appointment_id),n.patient_id&&c.append("patient_id",n.patient_id),Te(`/custom/api/notes/get_draft.php?${c.toString()}`)}async function J0(){return console.log("Fetching clinical settings"),Te("/custom/api/notes/get_clinical_settings.php")}async function P0(n){return console.log("Fetching billing for patient ID:",n),Te(`/custom/api/billing.php?patient_id=${n}`)}async function K0(n,c){return console.log("Updating demographics for patient ID:",n),Te("/custom/api/update_demographics.php",{method:"POST",body:JSON.stringify({patient_id:n,...c})})}async function W0(n){return console.log("Creating new client:",n.fname,n.lname),Te("/custom/api/create_client.php",{method:"POST",body:JSON.stringify(n)})}async function da(n){return console.log("Fetching list options for:",n),Te(`/custom/api/get_list_options.php?list_id=${n}`)}async function Do(){return console.log("Fetching providers list"),Te("/custom/api/get_providers.php")}async function go(n){return console.log("Fetching related persons for patient:",n),Te(`/custom/api/get_related_persons.php?patient_id=${n}`)}async function I0(n){return console.log("Saving related person:",n),Te("/custom/api/save_related_person.php",{method:"POST",body:JSON.stringify(n)})}async function eb(n){return console.log("Deleting related person relation:",n),Te("/custom/api/delete_related_person.php",{method:"POST",body:JSON.stringify({relation_id:n})})}async function tb(n,c){return console.log("Updating insurance ID:",n),Te("/custom/api/update_insurance.php",{method:"POST",body:JSON.stringify({insurance_id:n,...c})})}async function ab(){return console.log("Fetching insurance companies list"),Te("/custom/api/get_insurance_companies.php")}async function xf(){return console.log("Fetching calendar settings"),Te("/custom/api/get_calendar_settings.php")}async function sb(n){return console.log("Updating calendar settings:",n),Te("/custom/api/update_calendar_settings.php",{method:"POST",body:JSON.stringify(n)})}async function Ao(n,c,d=null){console.log("Fetching appointments from",n,"to",c);const o=new URLSearchParams({start_date:n,end_date:c});return d&&d!=="all"&&o.append("provider_id",d),Te(`/custom/api/get_appointments.php?${o.toString()}`)}async function gf(n=0){console.log("Fetching appointment categories (type:",n,")");const c=n!==null?`?type=${n}`:"";return Te(`/custom/api/get_appointment_categories.php${c}`)}async function lb(){return console.log("Fetching rooms list"),Te("/custom/api/get_rooms.php")}async function nb(n){return console.log("Fetching supervisees for supervisor:",n),Te(`/custom/api/get_supervisees.php?supervisor_id=${n}`)}async function pf(n){return console.log("Creating appointment:",n),Te("/custom/api/create_appointment.php",{method:"POST",body:JSON.stringify(n)})}async function bf(n,c){return console.log("Updating appointment:",n,c),Te("/custom/api/update_appointment.php",{method:"POST",body:JSON.stringify({appointmentId:n,...c})})}async function vf(n,c=null){return console.log("Deleting appointment:",n,c),Te("/custom/api/delete_appointment.php",{method:"POST",body:JSON.stringify({appointmentId:n,seriesData:c})})}async function yf(){try{await fetch("/custom/api/session_logout.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})}catch(n){console.error("Logout error:",n)}finally{localStorage.removeItem("user"),window.location.href="/app/"}}function ib(){const n=[{age:"3 days ago",color:"border-red-400"},{age:"2 days ago",color:"border-amber-400"},{age:"Yesterday",color:"border-yellow-400"}];return e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Pending Documentation"}),e.jsx("div",{className:"space-y-3",children:n.map((c,d)=>e.jsxs("div",{className:`backdrop-blur-xl bg-white/60 ${c.color} border-l-4 rounded-2xl p-4 cursor-pointer hover:shadow-lg transition-all hover:bg-white/70`,children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:c.age}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Complete session note"})]},d))})]})}function se({children:n,htmlFor:c,className:d="",...o}){return e.jsx("label",{htmlFor:c,className:`block text-label mb-2 ${d}`,...o,children:n})}function ze(){return e.jsx("span",{className:"text-red-600",children:"*"})}function jf({onClose:n,onClientCreated:c}){const[d,o]=g.useState({fname:"",mname:"",lname:"",DOB:"",sex:"",ss:"",street:"",city:"",state:"",postal_code:"",phone_cell:"",phone_home:"",email:"",care_team_status:"active"}),[u,p]=g.useState(!1),[m,f]=g.useState(null),b=(j,x)=>{o(y=>({...y,[j]:x}))},v=async j=>{j.preventDefault(),p(!0),f(null);try{if(!d.fname||!d.lname)throw new Error("First name and last name are required");if(!d.DOB)throw new Error("Date of birth is required");if(d.email&&!d.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/))throw new Error("Invalid email format");const x=await W0(d);c&&x.patient_id&&c(x.patient_id),n()}catch(x){f(x.message||"Failed to create client")}finally{p(!1)}};return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container modal-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"New Client"}),e.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:v,className:"modal-body",children:[m&&e.jsx("div",{className:"error-message",children:m}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(se,{children:["First Name ",e.jsx(ze,{})]}),e.jsx("input",{type:"text",required:!0,value:d.fname,onChange:j=>b("fname",j.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Middle Name"}),e.jsx("input",{type:"text",value:d.mname,onChange:j=>b("mname",j.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsxs(se,{children:["Last Name ",e.jsx(ze,{})]}),e.jsx("input",{type:"text",required:!0,value:d.lname,onChange:j=>b("lname",j.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsxs(se,{children:["Date of Birth ",e.jsx(ze,{})]}),e.jsx("input",{type:"date",required:!0,value:d.DOB,onChange:j=>b("DOB",j.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Sex"}),e.jsxs("select",{value:d.sex,onChange:j=>b("sex",j.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Social Security Number"}),e.jsx("input",{type:"text",value:d.ss,onChange:j=>b("ss",j.target.value),placeholder:"XXX-XX-XXXX",maxLength:"11",className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Status"}),e.jsxs("select",{value:d.care_team_status,onChange:j=>b("care_team_status",j.target.value),className:"input-field",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"discharged",children:"Discharged"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(se,{children:"Street Address"}),e.jsx("input",{type:"text",value:d.street,onChange:j=>b("street",j.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"City"}),e.jsx("input",{type:"text",value:d.city,onChange:j=>b("city",j.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"State"}),e.jsx("input",{type:"text",value:d.state,onChange:j=>b("state",j.target.value),maxLength:"2",placeholder:"CA",className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Postal Code"}),e.jsx("input",{type:"text",value:d.postal_code,onChange:j=>b("postal_code",j.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Mobile Phone"}),e.jsx("input",{type:"tel",value:d.phone_cell,onChange:j=>b("phone_cell",j.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Home Phone"}),e.jsx("input",{type:"tel",value:d.phone_home,onChange:j=>b("phone_home",j.target.value),className:"input-field"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(se,{children:"Email"}),e.jsx("input",{type:"email",value:d.email,onChange:j=>b("email",j.target.value),className:"input-field"})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:n,disabled:u,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u,className:"btn-action btn-primary btn-compact disabled:opacity-50",children:u?"Creating Client...":"Create Client"})]})]})]})})}function rb(){const n=is(),[c,d]=g.useState(""),[o,u]=g.useState([]),[p,m]=g.useState(!1),[f,b]=g.useState(""),[v,j]=g.useState(!1),[x,y]=g.useState({activeClients:0,inactiveClients:0,dischargedClients:0,todayClients:0}),[C,N]=g.useState(!0),[_,A]=g.useState([]),[E,O]=g.useState(!0),[Y,I]=g.useState("active"),[$,le]=g.useState(!1);g.useEffect(()=>{(async()=>{try{const z=await df();y(z)}catch(z){console.error("Failed to fetch data:",z)}finally{N(!1)}})()},[]),g.useEffect(()=>{(async()=>{try{O(!0);const z=await q0(Y);A(z||[])}catch(z){console.error("Failed to fetch clients:",z),A([])}finally{O(!1)}})()},[Y]);const V=async q=>{if(q.preventDefault(),!c.trim()){b("Please enter a search term");return}m(!0),b(""),j(!0);try{const z=await of(c);u(z||[])}catch(z){console.error("Search error:",z),b("Failed to search patients. Please try again."),u([])}finally{m(!1)}},X=q=>{console.log("=== CLICKING CLIENT ==="),console.log("Patient ID:",q),console.log("About to navigate to:",`/clients/${q}`),n(`/clients/${q}`),console.log("Navigate called")},ge=q=>{console.log("New client created with ID:",q),n(`/clients/${q}`)},he=q=>{if(!q)return"N/A";try{return new Date(q).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},xe=q=>{const z=(q||"").toLowerCase();return z==="active"?"badge-solid-success":z==="inactive"?"badge-solid-warning":"badge-solid-neutral"};return e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"w-80 flex-shrink-0 space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:"Clients"}),e.jsx("p",{className:"text-gray-600 text-xs",children:"Manage client records"})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-4",children:"Caseload Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"stat-box",children:C?e.jsxs("div",{className:"skeleton-pulse",children:[e.jsx("div",{className:"h-3 bg-gray-300 rounded w-16 mb-2"}),e.jsx("div",{className:"h-6 bg-gray-300 rounded w-8"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.activeClients})]})}),e.jsx("div",{className:"stat-box",children:C?e.jsxs("div",{className:"skeleton-pulse",children:[e.jsx("div",{className:"h-3 bg-gray-300 rounded w-16 mb-2"}),e.jsx("div",{className:"h-6 bg-gray-300 rounded w-8"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Inactive"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:x.inactiveClients})]})}),e.jsx("div",{className:"stat-box",children:C?e.jsxs("div",{className:"skeleton-pulse",children:[e.jsx("div",{className:"h-3 bg-gray-300 rounded w-16 mb-2"}),e.jsx("div",{className:"h-6 bg-gray-300 rounded w-8"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Discharged"}),e.jsx("p",{className:"text-2xl font-bold text-gray-500",children:x.dischargedClients})]})})]})]}),e.jsx(ib,{})]}),e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsx("div",{className:"card-main",children:e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-gray-800 text-sm font-semibold mb-2",children:"Search by Name"}),e.jsx("input",{type:"text",value:c,onChange:q=>d(q.target.value),className:"input-lg",placeholder:"Enter client name..."})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"submit",disabled:p,className:"btn-search disabled:opacity-50 disabled:cursor-not-allowed",children:p?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Searching..."]}):"Search"})})]}),f&&e.jsx("div",{className:"error-message",children:f})]})}),v&&e.jsx("div",{className:"card-main",children:p?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"spinner spinner-md mx-auto"}),e.jsx("p",{className:"text-label mt-3",children:"Searching..."})]}):o.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("p",{className:"text-gray-600",children:['No clients found matching "',c,'"']}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Try a different search term"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-label",children:["Found ",o.length," client",o.length!==1?"s":""]})}),o.map(q=>e.jsx("div",{onClick:()=>X(q.id||q.pid),className:"card-item",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:[q.fname," ",q.lname]}),e.jsxs("div",{className:"flex gap-6 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"DOB:"})," ",he(q.DOB)]}),q.phone_cell&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",q.phone_cell]})]})]}),e.jsx("div",{className:"ml-4",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},q.id||q.pid))]})}),e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Client List"}),e.jsxs("button",{onClick:()=>le(!0),className:"btn-solid btn-solid-green btn-icon",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Client"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>I("active"),className:`filter-btn-enhanced ${Y==="active"?"filter-btn-active-base bg-green-500":"filter-btn-inactive"}`,children:"Active"}),e.jsx("button",{onClick:()=>I("inactive"),className:`filter-btn-enhanced ${Y==="inactive"?"filter-btn-active-base bg-yellow-500":"filter-btn-inactive"}`,children:"Inactive"}),e.jsx("button",{onClick:()=>I("discharged"),className:`filter-btn-enhanced ${Y==="discharged"?"filter-btn-active-base bg-gray-500":"filter-btn-inactive"}`,children:"Discharged"}),e.jsx("button",{onClick:()=>I("all"),className:`filter-btn-enhanced ${Y==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Clients"})]})]}),E?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"spinner spinner-lg mx-auto"}),e.jsx("p",{className:"text-label mt-4",children:"Loading clients..."})]}):_.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("p",{className:"text-gray-600 text-lg",children:["No ",Y!=="all"?Y:""," clients found"]})]}):e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-label",children:[_.length," ",Y!=="all"?Y:""," client",_.length!==1?"s":""]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(q=>e.jsxs("div",{onClick:()=>X(q.pid),className:"card-item",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-800",children:[q.fname," ",q.lname]}),e.jsx("span",{className:xe(q.care_team_status),children:(q.care_team_status||"Unknown").toUpperCase()})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Age:"})," ",q.age]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"DOB:"})," ",he(q.DOB)]}),(q.phone_cell||q.phone_home)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",q.phone_cell||q.phone_home]})]})]},q.pid))})]})]})]}),$&&e.jsx(jf,{onClose:()=>le(!1),onClientCreated:ge})]})}function cb(){const[n,c]=g.useState({age:[],gender:[],race:[],ethnicity:[]}),[d,o]=g.useState(!0);g.useEffect(()=>{(async()=>{try{const m=await H0();c(m)}catch(m){console.error("Failed to fetch demographics:",m)}finally{o(!1)}})()},[]);const u=(p,m)=>{if(!p||p.length===0)return e.jsx("div",{className:"text-gray-500 text-sm text-center py-4",children:"No data available"});const f=p.reduce((b,v)=>b+v.count,0);return e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:m}),e.jsx("div",{className:"space-y-2",children:p.map((b,v)=>{const j=f>0?b.count/f*100:0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-gray-600",children:b.category}),e.jsx("span",{className:"text-gray-500 font-semibold",children:b.count})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${j}%`}})})]},v)})})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:"Reports"}),e.jsx("p",{className:"text-gray-600 text-xs",children:"Analytics and demographic insights"})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-4",children:"Active Demographics"}),d?e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(p=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-3 bg-gray-300 rounded w-20 mb-2"}),e.jsx("div",{className:"h-2 bg-gray-300 rounded"})]},p))}):e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{children:u(n.age,"Age Range")}),e.jsx("div",{children:u(n.gender,"Gender")}),e.jsx("div",{children:u(n.race,"Race")}),e.jsx("div",{children:u(n.ethnicity,"Ethnicity")})]})]})]})}function ob({currentDate:n,onDateClick:c}){const[d,o]=g.useState(new Date(n)),u=N=>{const _=N.getFullYear(),A=N.getMonth();return new Date(_,A+1,0).getDate()},p=N=>{const _=N.getFullYear(),A=N.getMonth();return new Date(_,A,1).getDay()},m=()=>{const N=u(d),_=p(d),A=[];for(let E=0;E<_;E++)A.push(null);for(let E=1;E<=N;E++)A.push(E);return A},f=()=>{const N=new Date(d);N.setMonth(N.getMonth()-1),o(N)},b=()=>{const N=new Date(d);N.setMonth(N.getMonth()+1),o(N)},v=N=>{if(!N)return;const _=new Date(d.getFullYear(),d.getMonth(),N);c(_)},j=N=>{if(!N)return!1;const _=new Date;return N===_.getDate()&&d.getMonth()===_.getMonth()&&d.getFullYear()===_.getFullYear()},x=N=>{if(!N)return!1;const _=new Date(d.getFullYear(),d.getMonth(),N),A=Y=>{const I=new Date(Y),$=I.getDay(),le=I.getDate()-$;return new Date(I.setDate(le))},E=A(_),O=A(n);return E.toDateString()===O.toDateString()},y=m(),C=["S","M","T","W","T","F","S"];return e.jsxs("div",{className:"select-none",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("button",{onClick:f,className:"p-1 hover:bg-gray-100 rounded transition-colors","aria-label":"Previous month",children:e.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:d.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:b,className:"p-1 hover:bg-gray-100 rounded transition-colors","aria-label":"Next month",children:e.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[C.map((N,_)=>e.jsx("div",{className:"text-center text-xs font-medium text-gray-500 py-1",children:N},_)),y.map((N,_)=>{const A=j(N),E=x(N);return e.jsx("button",{onClick:()=>v(N),disabled:!N,className:`
                aspect-square flex items-center justify-center text-sm rounded-lg
                transition-colors
                ${N?"":"invisible"}
                ${A?"bg-blue-600 text-white font-bold hover:bg-blue-700":""}
                ${!A&&E?"bg-blue-100 text-blue-900 font-semibold":""}
                ${!A&&!E?"hover:bg-gray-100 text-gray-700":""}
              `,children:N},_)})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 text-xs text-gray-600 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded"}),e.jsx("span",{children:"Today"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-100 border border-blue-300 rounded"}),e.jsx("span",{children:"Selected week"})]})]})]})}function Nf({isOpen:n,onClose:c,onSave:d,initialDate:o,initialTime:u,providerId:p,providers:m,appointment:f}){const[b,v]=g.useState(!1),[j,x]=g.useState(null),[y,C]=g.useState(null),[N,_]=g.useState(null),[A,E]=g.useState(null),[O,Y]=g.useState(""),[I,$]=g.useState(""),[le,V]=g.useState(p||""),[X,ge]=g.useState(""),[he,xe]=g.useState(o||new Date().toISOString().split("T")[0]),[q,z]=g.useState(u||"09:00"),[H,D]=g.useState(50),[S,k]=g.useState(""),[U,ie]=g.useState(""),[be,T]=g.useState(""),[L,W]=g.useState(""),[F,fe]=g.useState(null),[P,ue]=g.useState(null),[Ce,ee]=g.useState(!1),[M,de]=g.useState({mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1}),[me,ve]=g.useState("1"),[oe,te]=g.useState("count"),[Se,Ee]=g.useState(10),[Fe,Ze]=g.useState(""),[nt,wt]=g.useState(!1),[la,rs]=g.useState("single"),[pt,yl]=g.useState(null),[Gt,jn]=g.useState([]),[za,Vi]=g.useState([]),[jl,ks]=g.useState([]),[Zi,na]=g.useState(!1),[jt,St]=g.useState(""),[bt,Nl]=g.useState([]),[Oa,wl]=g.useState([]);g.useEffect(()=>{n&&(Ds(),As())},[n]),g.useEffect(()=>{console.log("Categories state updated:",Gt)},[Gt]),g.useEffect(()=>{console.log("Rooms state updated:",za)},[za]),g.useEffect(()=>{p&&V(p)},[p]),g.useEffect(()=>{o&&xe(o),u&&z(u)},[o,u]),g.useEffect(()=>{f&&n&&(Y(f.patientId||""),$(f.patientName||""),St(f.patientName||""),V(f.providerId||""),ge(f.categoryId||""),xe(f.eventDate||""),z(f.startTime?f.startTime.substring(0,5):""),D(f.duration||50),k(f.title||""),ie(f.comments||""),T(f.roomId||f.room||""),W(f.cptCodeId||""),f.patientId&&fetch(`/custom/api/get_client.php?pid=${f.patientId}`).then(ne=>ne.json()).then(ne=>{ne.success&&ne.client&&ue(ne.client.payment_type||"insurance")}).catch(ne=>{console.error("Failed to fetch patient payment type:",ne),ue("insurance")}),f.isRecurring&&f.recurrenceId?(wt(!0),yl(f.recurrenceId),rs("single")):(wt(!1),yl(null)))},[f,n]);const Ds=async()=>{try{const ne=await gf();console.log("getAppointmentCategories response:",ne),console.log("Categories array:",ne.categories),jn(ne.categories||[]),ne.categories&&ne.categories.length>0&&!f?(console.log("Auto-selecting first category:",ne.categories[0]),ge(ne.categories[0].id),ne.categories[0].defaultDuration>0&&D(ne.categories[0].defaultDuration)):console.log("No categories to auto-select or editing existing appointment")}catch(ne){console.error("Failed to load appointment categories:",ne),x("Failed to load appointment types")}},As=async()=>{try{const ne=await lb();console.log("getRooms response:",ne),console.log("Rooms array:",ne.rooms),Vi(ne.rooms||[])}catch(ne){console.error("Failed to load rooms:",ne)}},Ts=async ne=>{if(St(ne),ne.length<2){ks([]),na(!1);return}try{const pe=await of(ne);ks(pe||[]),na(!0)}catch(pe){console.error("Patient search failed:",pe),ks([])}},ua=async ne=>{Y(ne.pid),$(`${ne.fname} ${ne.lname}`),St(`${ne.fname} ${ne.lname}`),na(!1);try{const Ae=await(await fetch(`/custom/api/get_client.php?pid=${ne.pid}`)).json();Ae.success&&Ae.client&&ue(Ae.client.payment_type||"insurance")}catch(pe){console.error("Failed to fetch patient payment type:",pe),ue("insurance")}},Ms=ne=>{ge(ne);const pe=Gt.find(Ae=>Ae.id===parseInt(ne));W(""),fe(null),Y(""),$(""),St(""),wl([]),pe&&pe.defaultDuration>0&&D(pe.defaultDuration)},ma=async ne=>{V(ne);const pe=Gt.find(Ae=>Ae.id===parseInt(X));if(pe&&pe.name==="Supervision"&&ne)try{const Ae=await nb(ne);Nl(Ae.supervisees||[])}catch(Ae){console.error("Failed to load supervisees:",Ae),Nl([])}else Nl([]),wl([])},Ji=ne=>{wl(pe=>pe.includes(ne)?pe.filter(Ae=>Ae!==ne):[...pe,ne])},Nn=ne=>{W(ne);const pe=Gt.find(Ae=>Ae.id===parseInt(X));if(pe&&pe.linkedCptCodes){const Ae=pe.linkedCptCodes.find(Be=>Be.id===parseInt(ne));fe(Ae),Ae&&Ae.standardDuration>0&&D(Ae.standardDuration)}},cs=async(ne,pe=!1)=>{if(ne?.preventDefault(),v(!0),x(null),C(null),_(null),!X){x("Please select an appointment type"),v(!1);return}const Ae=Gt.find(Be=>Be.id===parseInt(X));if(!Ae){x("Invalid appointment type"),v(!1);return}if(Ae.categoryType==="client"){if(!O){x("Please select a client"),v(!1);return}if(!le){x("Please select a provider"),v(!1);return}}else if(Ae.name==="Supervision"){if(!le){x("Please select a supervisor"),v(!1);return}if(Oa.length===0){x("Please select at least one supervisee"),v(!1);return}}else if(Ae.name!=="Staff Meeting"&&!le){x("Please select a provider"),v(!1);return}if(Ae&&Ae.requiresCptSelection&&P==="insurance"&&!L){x("CPT code is required for insurance patients with this appointment type"),v(!1);return}if(Ce){if(Object.values(M).filter(Boolean).length===0){x("Please select at least one day for recurrence"),v(!1);return}if(oe==="date"&&!Fe){x("Please select an end date for recurrence"),v(!1);return}if(oe==="count"&&(!Se||Se<1)){x("Please enter a valid number of occurrences"),v(!1);return}}try{const Be=q.includes(":")?`${q}:00`:`${q}:00:00`,_t={categoryId:parseInt(X),eventDate:he,startTime:Be,duration:parseInt(H),title:S||I||Ae.name,comments:U,room:be,apptstatus:f?f.apptstatus:"-",overrideAvailability:pe,...O&&{patientId:parseInt(O)},...le&&{providerId:parseInt(le)},...Oa.length>0&&{superviseeIds:Oa},...L&&{cptCodeId:parseInt(L)},...F?.standardFee&&{billingFee:F.standardFee},...P&&{patientPaymentType:P}};nt&&(_t.seriesUpdate={scope:la,recurrenceId:pt}),Ce&&!f&&(_t.recurrence={enabled:!0,days:M,interval:parseInt(me),endType:oe,endCount:oe==="count"?parseInt(Se):null,endDate:oe==="date"?Fe:null}),console.log(f?"Updating appointment:":"Creating appointment:",_t);const at=f?await bf(f.id,_t):await pf(_t);at.success?(C(f?"Appointment updated successfully!":"Appointment created successfully!"),d&&d(at.appointment),setTimeout(()=>{La()},1500)):x(at.message||`Failed to ${f?"update":"create"} appointment`)}catch(Be){console.error(`Failed to ${f?"update":"create"} appointment:`,Be),Be.conflicts?E({conflicts:Be.conflicts,totalOccurrences:Be.totalOccurrences,conflictCount:Be.conflictCount}):Be.message&&Be.message.includes("Provider is unavailable")?_(Be.message):x(Be.message||`Failed to ${f?"update":"create"} appointment`)}finally{v(!1)}},os=()=>{_(null),cs(null,!0)},Pi=()=>{E(null),cs(null,!0)},wn=async()=>{if(!f)return;let ne=`Are you sure you want to delete this appointment for ${I}?`;if(nt&&(la==="all"?ne=`Are you sure you want to delete ALL occurrences in this recurring series for ${I}?`:la==="future"&&(ne=`Are you sure you want to delete this and all future occurrences for ${I}?`)),!!confirm(ne)){v(!0),x(null),C(null);try{const pe=nt?{scope:la,recurrenceId:pt}:null,Ae=await vf(f.id,pe);if(Ae.success){const Be=nt&&la!=="single"?`${Ae.deletedCount||"Multiple"} appointment(s) deleted successfully!`:"Appointment deleted successfully!";C(Be),setTimeout(()=>{La(),d&&d()},1e3)}else x(Ae.message||"Failed to delete appointment")}catch(pe){console.error("Failed to delete appointment:",pe),x(pe.message||"Failed to delete appointment")}finally{v(!1)}}},La=()=>{Y(""),$(""),St(""),ge(""),k(""),ie(""),T(""),x(null),C(null),_(null),E(null),ks([]),na(!1),ee(!1),de({mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1}),ve("1"),te("count"),Ee(10),Ze(""),wt(!1),rs("single"),yl(null),c()};if(!n)return null;const Sn=[15,30,50,90];return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",style:{position:"fixed",top:0,left:0,right:0,bottom:0},children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/60 backdrop-blur-md transition-opacity",onClick:La,"aria-hidden":"true"}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-2xl w-full my-8 border border-gray-200 z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-200 px-8 pt-6 bg-gradient-to-r from-blue-50 to-purple-50",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:f?"Edit Appointment":"New Appointment"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:f?"Update appointment details":"Schedule a new appointment"})]}),e.jsx("button",{onClick:La,className:"p-2 hover:bg-white/80 rounded-xl transition-all hover:scale-110",disabled:b,children:e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"px-8 pb-8",children:[N&&e.jsx("div",{className:"mb-6 p-4 bg-amber-50 border-l-4 border-amber-500 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-amber-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-amber-700 font-medium mb-2",children:N}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:os,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white text-sm font-medium rounded-lg transition-colors",children:"Override and Book Anyway"}),e.jsx("button",{type:"button",onClick:()=>_(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-medium rounded-lg transition-colors",children:"Cancel"})]})]})]})}),A&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-700 font-bold mb-2",children:"Scheduling Conflicts Detected"}),e.jsxs("p",{className:"text-red-600 text-sm mb-3",children:[A.conflictCount," of ",A.totalOccurrences," recurring appointments have conflicts:"]}),e.jsx("div",{className:"max-h-48 overflow-y-auto mb-4 space-y-2",children:A.conflicts.map((ne,pe)=>e.jsxs("div",{className:"bg-white border border-red-200 rounded p-2 text-sm",children:[e.jsxs("div",{className:"font-medium text-red-700",children:[new Date(ne.date).toLocaleDateString()," at ",ne.time]}),e.jsx("div",{className:"text-red-600",children:ne.reason})]},pe))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:Pi,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors",children:"Create Anyway (Skip Conflicts)"}),e.jsx("button",{type:"button",onClick:()=>E(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-medium rounded-lg transition-colors",children:"Cancel"})]})]})]})}),j&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg text-red-700 flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("span",{children:j})]}),y&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 border-l-4 border-green-500 rounded-lg text-green-700 flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{children:y})]}),nt&&e.jsx("div",{className:"mb-6 p-4 bg-blue-50 border-l-4 border-blue-500 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-blue-700 font-medium mb-2",children:"Recurring Appointment Series"}),e.jsx("p",{className:"text-blue-600 text-sm mb-3",children:"This appointment is part of a recurring series. Choose what to update:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"seriesScope",value:"single",checked:la==="single",onChange:ne=>rs(ne.target.value),className:"text-blue-600 focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm text-blue-700",children:["Just this occurrence (",new Date(he).toLocaleDateString(),")"]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"seriesScope",value:"future",checked:la==="future",onChange:ne=>rs(ne.target.value),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-blue-700",children:"This and all future occurrences"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"seriesScope",value:"all",checked:la==="all",onChange:ne=>rs(ne.target.value),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-blue-700",children:"All occurrences in the series"})]})]})]})]})}),e.jsxs("form",{onSubmit:cs,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(se,{children:["Appointment Type ",e.jsx(ze,{})]}),e.jsxs("select",{value:X,onChange:ne=>Ms(ne.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),Gt.map(ne=>e.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]}),X&&(()=>{const ne=Gt.find(pe=>pe.id===parseInt(X));return ne?ne.categoryType==="client"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsxs(se,{children:["Client ",e.jsx(ze,{})]}),e.jsx("input",{type:"text",value:jt,onChange:pe=>Ts(pe.target.value),placeholder:"Search by name...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),Zi&&jl.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:jl.map(pe=>e.jsxs("button",{type:"button",onClick:()=>ua(pe),className:"w-full text-left px-4 py-3 hover:bg-blue-50 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[pe.fname," ",pe.lname]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["DOB: ",pe.DOB,"  PID: ",pe.pid]})]},pe.pid))}),I&&e.jsxs("div",{className:"mt-2 text-sm text-green-600",children:["Selected: ",I]})]}),e.jsxs("div",{children:[e.jsxs(se,{children:["Provider ",e.jsx(ze,{})]}),e.jsxs("select",{value:le,onChange:pe=>ma(pe.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Provider"}),m.map(pe=>e.jsx("option",{value:pe.value,children:pe.label},pe.value))]})]})]}):ne.name==="Supervision"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs(se,{children:["Supervisor ",e.jsx(ze,{})]}),e.jsxs("select",{value:le,onChange:pe=>ma(pe.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Supervisor"}),m.map(pe=>e.jsx("option",{value:pe.value,children:pe.label},pe.value))]})]}),le&&bt.length>0&&e.jsxs("div",{children:[e.jsxs(se,{children:["Supervisees ",e.jsx(ze,{})]}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto space-y-2",children:bt.map(pe=>e.jsxs("label",{className:"flex items-center gap-2 hover:bg-gray-50 p-2 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Oa.includes(pe.id),onChange:()=>Ji(pe.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-900",children:pe.label}),pe.title&&e.jsxs("span",{className:"text-xs text-gray-500",children:["(",pe.title,")"]})]},pe.id))}),Oa.length>0&&e.jsxs("div",{className:"mt-2 text-sm text-green-600",children:[Oa.length," supervisee(s) selected"]})]})]}):ne.name==="Staff Meeting"?e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"All-Staff Meeting:"})," This appointment will be visible to all providers."]})}):ne.categoryType==="clinic"?e.jsxs("div",{children:[e.jsxs(se,{children:["Provider ",e.jsx(ze,{})]}),e.jsxs("select",{value:le,onChange:pe=>ma(pe.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Provider"}),m.map(pe=>e.jsx("option",{value:pe.value,children:pe.label},pe.value))]})]}):null:null})(),X&&(()=>{const ne=Gt.find(Be=>Be.id===parseInt(X)),pe=ne&&ne.requiresCptSelection&&ne.linkedCptCodes&&ne.linkedCptCodes.length>0,Ae=P==="insurance";return pe?e.jsxs("div",{children:[e.jsxs(se,{children:["CPT Code ",Ae&&e.jsx(ze,{}),!Ae&&e.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["(Optional for ",P,")"]})]}),e.jsxs("select",{value:L,onChange:Be=>Nn(Be.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:Ae,children:[e.jsx("option",{value:"",children:"Select CPT Code"}),ne.linkedCptCodes.map(Be=>e.jsxs("option",{value:Be.id,children:[Be.code," - ",Be.description," (",Be.standardDuration,"min",Be.standardFee?`, $${Be.standardFee}`:"",")"]},Be.id))]}),F&&e.jsxs("div",{className:"mt-2 text-sm text-blue-600",children:["Standard fee: $",F.standardFee||"Not set","  Duration: ",F.standardDuration," minutes"]})]}):null})(),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(se,{children:["Date ",e.jsx(ze,{})]}),e.jsx("input",{type:"date",value:he,onChange:ne=>xe(ne.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs(se,{children:["Time ",e.jsx(ze,{})]}),e.jsx("input",{type:"time",value:q,onChange:ne=>z(ne.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(se,{children:["Duration (minutes) ",e.jsx(ze,{})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:Sn.map(ne=>e.jsxs("button",{type:"button",onClick:()=>D(ne),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${H===ne?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[ne,"m"]},ne))}),e.jsx("input",{type:"number",value:H,onChange:ne=>D(ne.target.value),min:"5",step:"5",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Location"}),e.jsxs("select",{value:be,onChange:ne=>T(ne.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[e.jsx("option",{value:"",children:"Select Location (Optional)"}),za.map(ne=>e.jsx("option",{value:ne.value,children:ne.label},ne.id))]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx("input",{type:"checkbox",checked:Ce,onChange:ne=>ee(ne.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),"Make this recurring"]})}),Ce&&e.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-blue-200",children:[e.jsxs("div",{children:[e.jsxs(se,{children:["Repeat on ",e.jsx(ze,{})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"sun",label:"Sun"},{key:"mon",label:"Mon"},{key:"tue",label:"Tue"},{key:"wed",label:"Wed"},{key:"thu",label:"Thu"},{key:"fri",label:"Fri"},{key:"sat",label:"Sat"}].map(ne=>e.jsx("button",{type:"button",onClick:()=>de(pe=>({...pe,[ne.key]:!pe[ne.key]})),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${M[ne.key]?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:ne.label},ne.key))})]}),e.jsxs("div",{children:[e.jsxs(se,{children:["Frequency ",e.jsx(ze,{})]}),e.jsxs("select",{value:me,onChange:ne=>ve(ne.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[e.jsx("option",{value:"1",children:"Weekly"}),e.jsx("option",{value:"2",children:"Every 2 weeks"}),e.jsx("option",{value:"3",children:"Every 3 weeks"}),e.jsx("option",{value:"4",children:"Every 4 weeks"})]})]}),e.jsxs("div",{children:[e.jsxs(se,{children:["Ends ",e.jsx(ze,{})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:oe==="count",onChange:()=>te("count"),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"checkbox-label",children:"After"}),e.jsx("input",{type:"number",value:Se,onChange:ne=>Ee(parseInt(ne.target.value)||1),disabled:oe!=="count",min:"1",max:"52",className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm disabled:bg-gray-100 focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"checkbox-label",children:"occurrences"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:oe==="date",onChange:()=>te("date"),className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"checkbox-label",children:"On"}),e.jsx("input",{type:"date",value:Fe,onChange:ne=>Ze(ne.target.value),disabled:oe!=="date",className:"px-2 py-1 border border-gray-300 rounded text-sm disabled:bg-gray-100 focus:ring-2 focus:ring-blue-500"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Title (Optional)"}),e.jsx("input",{type:"text",value:S,onChange:ne=>k(ne.target.value),placeholder:"Defaults to client name if left blank",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Comments"}),e.jsx("textarea",{value:U,onChange:ne=>ie(ne.target.value),rows:3,placeholder:"Optional notes about this appointment",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex gap-4 pt-6 mt-6 border-t border-gray-200",children:[f&&e.jsx("button",{type:"button",onClick:wn,className:"px-6 py-3 bg-red-100 hover:bg-red-200 text-red-700 font-semibold rounded-xl transition-all hover:shadow-md",disabled:b,children:"Delete"}),e.jsx("button",{type:"button",onClick:La,className:"flex-1 px-6 py-3 bg-gray-100 hover:bg-gray-200 text-label rounded-xl transition-all hover:shadow-md",disabled:b,children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold rounded-xl transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",disabled:b,children:b?f?"Updating...":"Creating...":f?"Update Appointment":"Create Appointment"})]})]})]})]})]})})}function db(){const[n,c]=g.useState("week"),[d,o]=g.useState(new Date),[u,p]=g.useState([]),[m,f]=g.useState([]),[b,v]=g.useState("all"),[j,x]=g.useState(!0),[y,C]=g.useState(null),[N,_]=g.useState({startHour:8,endHour:18,interval:15,viewType:"week"}),[A,E]=g.useState(!1),[O,Y]=g.useState(null),[I,$]=g.useState(null),[le,V]=g.useState(null),[X,ge]=g.useState(null),xe=(()=>{const M=[],de=N.interval,me=60/de;for(let ve=N.startHour;ve<N.endHour;ve++)for(let oe=0;oe<me;oe++){const te=oe*de;M.push({hour:ve,minutes:te})}return M})();g.useEffect(()=>{(async()=>{try{const de=await xf();console.log("Calendar settings response:",de),de.settings?(console.log("Setting calendar hours to:",de.settings),_(de.settings),de.settings.viewType&&c(de.settings.viewType)):console.log("No settings in response, using defaults")}catch(de){console.error("Failed to load calendar settings:",de)}})()},[]),g.useEffect(()=>{(async()=>{try{const de=await Do();f(de.providers||[])}catch(de){console.error("Failed to load providers:",de)}})()},[]),g.useEffect(()=>{q()},[d,b,n]);const q=async()=>{x(!0),C(null);try{const{startDate:M,endDate:de}=z();console.log("Loading appointments:",{startDate:M,endDate:de,currentDate:d,view:n});const me=await Ao(M,de,b);console.log("Appointments loaded:",me.appointments),p(me.appointments||[])}catch(M){console.error("Failed to load appointments:",M),C("Failed to load appointments")}finally{x(!1)}},z=()=>{const M=new Date(d),de=new Date(d);if(n==="week"){const me=M.getDay(),ve=M.getDate()-me;M.setDate(ve),M.setHours(0,0,0,0),de.setDate(M.getDate()+6),de.setHours(23,59,59,999)}else n==="day"?(M.setHours(0,0,0,0),de.setHours(23,59,59,999)):n==="month"&&(M.setDate(1),M.setHours(0,0,0,0),de.setMonth(de.getMonth()+1),de.setDate(0),de.setHours(23,59,59,999));return{startDate:M.toISOString().split("T")[0],endDate:de.toISOString().split("T")[0]}},H=()=>{const M=new Date(d),de=M.getDay(),me=M.getDate()-de;M.setDate(me),M.setHours(0,0,0,0);const ve=Array.from({length:7},(oe,te)=>new Date(M.getTime()+te*24*60*60*1e3));return console.log("Week days:",ve.map(oe=>oe.toISOString().split("T")[0])),ve},D=()=>{const M=new Date(d);n==="week"?M.setDate(M.getDate()-7):n==="day"?M.setDate(M.getDate()-1):n==="month"&&M.setMonth(M.getMonth()-1),o(M)},S=()=>{const M=new Date(d);n==="week"?M.setDate(M.getDate()+7):n==="day"?M.setDate(M.getDate()+1):n==="month"&&M.setMonth(M.getMonth()+1),o(M)},k=()=>{o(new Date)},U=M=>{if(!M)return"";const[de,me]=M.split(":"),ve=parseInt(de),oe=ve>=12?"PM":"AM";return`${ve===0?12:ve>12?ve-12:ve}:${me} ${oe}`},ie=(M,de,me)=>{const ve=M.toISOString().split("T")[0];return u.filter(oe=>{if(oe.eventDate!==ve)return!1;const[te,Se]=oe.startTime.split(":"),Ee=parseInt(te),Fe=parseInt(Se);return Ee===de&&Fe===me})},be=M=>M.duration?Math.ceil(M.duration/N.interval):1,T=M=>{const[de,me]=M.startTime.split(":").map(Number),ve=de*60+me,oe=N.startHour*60,Se=(ve-oe)/N.interval,Ee=60,Fe=Se*Ee,wt=(M.duration||0)/N.interval*Ee;return{top:Fe,height:wt}},L=M=>{const de=M.toISOString().split("T")[0];return u.filter(me=>me.eventDate===de)},W=M=>{const de=M.toISOString().split("T")[0];return u.filter(me=>me.eventDate===de)},F=()=>{const M=d.getFullYear(),de=d.getMonth(),me=new Date(M,de,1),ve=me.getDay(),oe=new Date(me);return oe.setDate(oe.getDate()-ve),oe.setHours(0,0,0,0),Array.from({length:42},(Se,Ee)=>new Date(oe.getTime()+Ee*24*60*60*1e3))},fe=()=>{if(n==="week"){const M=H(),de=M[0],me=M[6];return`${de.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${me.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}else return n==="day"?d.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):d.toLocaleDateString("en-US",{month:"long",year:"numeric"})},P=(M=null,de=null,me=null)=>{ge(null),Y(M||d.toISOString().split("T")[0]),$(de),V(me||(b!=="all"?b:null)),E(!0)},ue=(M,de)=>{de.stopPropagation(),ge(M),Y(null),$(null),V(null),E(!0)},Ce=(M,de,me)=>{const ve=M.toISOString().split("T")[0],oe=`${de.toString().padStart(2,"0")}:${me.toString().padStart(2,"0")}`;P(ve,oe,b!=="all"?b:null)},ee=M=>{console.log("New appointment created:",M),q()};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"glass-card p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Calendar"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>P(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Appointment"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>c("day"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="day"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Day"}),e.jsx("button",{onClick:()=>c("week"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="week"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Week"}),e.jsx("button",{onClick:()=>c("month"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="month"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Month"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:D,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:S,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsx("button",{onClick:k,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Today"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:fe()})]})]}),y&&e.jsx("div",{className:"glass-card-sm bg-red-100/60 border-red-300/50 text-red-700 px-4 py-3 mb-6",children:y}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"w-80 flex-shrink-0 space-y-6",children:[e.jsx("div",{className:"glass-card p-4",children:e.jsx(ob,{currentDate:d,onDateClick:o})}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Providers"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>v("all"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors ${b==="all"?"bg-blue-100 text-blue-900 font-medium":"hover:bg-gray-100 text-gray-700"}`,children:"All Providers"}),m.map(M=>e.jsx("button",{onClick:()=>v(M.value),className:`w-full text-left px-3 py-2 rounded-lg transition-colors ${b===M.value?"bg-blue-100 text-blue-900 font-medium":"hover:bg-gray-100 text-gray-700"}`,children:M.label},M.value))]})]})]}),e.jsxs("div",{className:"flex-1",children:[j?e.jsx("div",{className:"glass-card p-12 text-center",children:e.jsx("div",{className:"text-gray-700",children:"Loading appointments..."})}):n==="week"&&e.jsxs("div",{className:"glass-card overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-white/30",children:[e.jsx("div",{className:"w-20 flex-shrink-0 p-4 bg-white/20 border-r border-white/30 font-semibold text-gray-700",children:"Time"}),e.jsx("div",{className:"flex-1 flex",children:H().map((M,de)=>{const me=M.toDateString()===new Date().toDateString();return e.jsxs("div",{className:`flex-1 p-4 border-r border-white/30 text-center ${me?"bg-blue-100/40":"bg-white/20"}`,children:[e.jsx("div",{className:"text-sm text-gray-600",children:M.toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("div",{className:`text-lg font-semibold ${me?"text-blue-600":"text-gray-900"}`,children:M.getDate()})]},de)})})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-20 flex-shrink-0 border-r border-white/30 bg-white/20",children:xe.map(M=>e.jsxs("div",{className:"h-[60px] p-2 border-b border-white/30 text-xs text-gray-700 font-medium",children:[M.hour===0?"12":M.hour<12?M.hour:M.hour===12?"12":M.hour-12,":",M.minutes.toString().padStart(2,"0")," ",M.hour<12?"AM":"PM"]},`time-${M.hour}-${M.minutes}`))}),e.jsx("div",{className:"flex-1 flex",children:H().map((M,de)=>{const me=L(M),ve=xe.length*60;return e.jsxs("div",{className:"flex-1 border-r border-white/30 relative",style:{height:`${ve}px`},children:[xe.map(oe=>e.jsx("div",{onClick:()=>Ce(M,oe.hour,oe.minutes),className:"absolute w-full h-[60px] border-b border-white/30 hover:bg-white/10 cursor-pointer transition-colors",style:{top:`${xe.findIndex(te=>te.hour===oe.hour&&te.minutes===oe.minutes)*60}px`}},`slot-${oe.hour}-${oe.minutes}`)),me.map(oe=>{const{top:te,height:Se}=T(oe);if(oe.categoryType===1){const nt=oe.categoryColor||"#F3F4F6";return e.jsx("div",{className:"absolute left-0 right-0 pointer-events-none z-0",style:{top:`${te}px`,height:`${Se}px`,backgroundColor:`${nt}40`,backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(0,0,0,.02) 10px, rgba(0,0,0,.02) 20px)"},title:`${oe.categoryName}${oe.comments?": "+oe.comments:""}`},oe.id)}const Fe=oe.categoryColor||"#DBEAFE",Ze=oe.categoryColor?`${oe.categoryColor}80`:"#93C5FD80";return e.jsxs("div",{onClick:nt=>ue(oe,nt),className:"absolute left-1 right-1 px-2 py-1 rounded-lg text-xs border hover:opacity-80 hover:shadow-md transition-all cursor-pointer z-10 overflow-hidden",style:{top:`${te}px`,height:`${Se}px`,backgroundColor:`${Fe}B3`,borderColor:Ze},children:[e.jsx("div",{className:"font-semibold text-gray-900",children:U(oe.startTime)}),Se>30&&e.jsx("div",{className:"text-gray-800 truncate",children:oe.patientName}),Se>50&&e.jsx("div",{className:"text-gray-700 truncate text-[10px]",children:oe.categoryName}),Se>70&&oe.room&&e.jsx("div",{className:"text-gray-600 truncate text-[10px]",children:oe.room})]},oe.id)})]},de)})})]})]}),!j&&n==="day"&&e.jsxs("div",{className:"glass-card overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-[150px_1fr] border-b border-white/30",children:[e.jsx("div",{className:"p-4 bg-white/20 border-r border-white/30 font-semibold text-gray-700",children:"Time"}),(()=>{const M=d.toDateString()===new Date().toDateString();return e.jsxs("div",{className:`p-4 border-r border-white/30 text-center ${M?"bg-blue-100/40":"bg-white/20"}`,children:[e.jsx("div",{className:"text-sm text-gray-600",children:d.toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("div",{className:`text-lg font-semibold ${M?"text-blue-600":"text-gray-900"}`,children:d.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})})()]}),xe.map(M=>e.jsxs("div",{className:"grid grid-cols-[150px_1fr] border-b border-white/30",children:[e.jsxs("div",{className:"p-3 border-r border-white/30 bg-white/20 text-sm text-gray-700 font-medium",children:[M.hour===0?"12":M.hour<12?M.hour:M.hour===12?"12":M.hour-12,":",M.minutes.toString().padStart(2,"0")," ",M.hour<12?"AM":"PM"]}),(()=>{const de=ie(d,M.hour,M.minutes);return e.jsx("div",{onClick:()=>Ce(d,M.hour,M.minutes),className:"p-2 border-r border-white/30 hover:bg-white/10 cursor-pointer transition-colors min-h-[60px]",children:de.map(me=>{const ve=me.categoryType===1,te=be(me)*60-8,Se=me.categoryColor||(ve?"#E5E7EB":"#DBEAFE"),Ee=me.categoryColor?`${me.categoryColor}80`:ve?"#9CA3AF80":"#93C5FD80";return e.jsx("div",{onClick:Fe=>ue(me,Fe),className:`mb-1 px-2 py-1 rounded-lg text-xs border hover:opacity-80 hover:shadow-md transition-all cursor-pointer ${ve?"border-dashed":""}`,style:{height:`${te}px`,backgroundColor:ve?`${Se}99`:`${Se}B3`,borderColor:Ee,backgroundImage:ve?"repeating-linear-gradient(45deg, transparent, transparent 4px, rgba(255,255,255,.3) 4px, rgba(255,255,255,.3) 8px)":"none"},children:ve?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold text-gray-900 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),me.categoryName]}),me.comments&&e.jsx("div",{className:"text-gray-700 truncate text-[10px] italic",children:me.comments})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:U(me.startTime)}),e.jsx("div",{className:"text-gray-800 truncate",children:me.patientName}),e.jsx("div",{className:"text-gray-700 truncate text-[10px]",children:me.categoryName}),me.room&&e.jsx("div",{className:"text-gray-600 truncate text-[10px]",children:me.room})]})},me.id)})})})()]},`${M.hour}-${M.minutes}`))]}),!j&&n==="month"&&e.jsxs("div",{className:"glass-card overflow-hidden",children:[e.jsx("div",{className:"grid grid-cols-7 border-b border-white/30",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(M=>e.jsx("div",{className:"p-4 bg-white/20 border-r border-white/30 text-center font-semibold text-gray-700",children:M},M))}),e.jsx("div",{className:"grid grid-cols-7",children:F().map((M,de)=>{const me=M.toDateString()===new Date().toDateString(),ve=M.getMonth()===d.getMonth(),oe=W(M);return e.jsxs("div",{className:`min-h-[120px] border-r border-b border-white/30 p-2 hover:bg-white/10 cursor-pointer transition-colors ${ve?"":"bg-white/5"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full text-sm font-semibold ${me?"bg-blue-600 text-white":ve?"text-gray-900":"text-gray-400"}`,children:M.getDate()}),oe.length>0&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-900 px-2 py-0.5 rounded-full font-medium",children:oe.length})]}),e.jsxs("div",{className:"space-y-1",children:[oe.slice(0,3).map(te=>{const Se=te.categoryType===1,Ee=te.categoryColor||(Se?"#E5E7EB":"#DBEAFE"),Fe=te.categoryColor?`${te.categoryColor}80`:Se?"#9CA3AF80":"#93C5FD80";return e.jsx("div",{onClick:Ze=>ue(te,Ze),className:`px-2 py-1 rounded text-xs border truncate hover:opacity-80 hover:shadow-md transition-all cursor-pointer ${Se?"border-dashed":""}`,style:{backgroundColor:Se?`${Ee}99`:`${Ee}B3`,borderColor:Fe,backgroundImage:Se?"repeating-linear-gradient(45deg, transparent, transparent 4px, rgba(255,255,255,.3) 4px, rgba(255,255,255,.3) 8px)":"none"},children:Se?e.jsxs("div",{className:"font-semibold text-gray-900 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 715.636 5.636m12.728 12.728L5.636 5.636"})}),e.jsx("span",{className:"truncate",children:te.categoryName})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:U(te.startTime)}),e.jsx("div",{className:"text-gray-800 truncate",children:te.patientName}),te.room&&e.jsx("div",{className:"text-gray-600 truncate text-[10px]",children:te.room})]})},te.id)}),oe.length>3&&e.jsxs("div",{className:"text-xs text-gray-600 pl-2",children:["+",oe.length-3," more"]})]})]},de)})})]})]})]}),e.jsx(Nf,{isOpen:A,onClose:()=>E(!1),onSave:ee,initialDate:O,initialTime:I,providerId:le,providers:m,appointment:X})]})}function ub(){const[n,c]=g.useState({startHour:8,endHour:17,interval:15,viewType:"week",eventColor:"1",providersSeeAll:!0}),[d,o]=g.useState(!0),[u,p]=g.useState(!1),[m,f]=g.useState(null);g.useEffect(()=>{b()},[]);const b=async()=>{o(!0);try{const x=await xf();x.settings&&c({startHour:x.settings.startHour||8,endHour:x.settings.endHour||17,interval:x.settings.interval||15,viewType:x.settings.viewType||"week",eventColor:x.settings.eventColor||"1",providersSeeAll:x.settings.providersSeeAll!==void 0?x.settings.providersSeeAll:!0})}catch(x){console.error("Failed to load calendar settings:",x),f({type:"error",text:"Failed to load settings"})}finally{o(!1)}},v=async()=>{p(!0),f(null);try{await sb(n),f({type:"success",text:"Settings saved successfully!"})}catch(x){console.error("Failed to save calendar settings:",x),f({type:"error",text:"Failed to save settings"})}finally{p(!1)}},j=(x,y)=>{c(C=>({...C,[x]:y}))};return d?e.jsx("div",{className:"glass-card p-12 text-center",children:e.jsx("div",{className:"text-gray-700",children:"Loading calendar settings..."})}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Calendar Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure calendar display and behavior"})]}),m&&e.jsx("div",{className:`mb-6 px-4 py-3 rounded-lg ${m.type==="success"?"bg-green-100/60 border-green-300/50 text-green-700":"bg-red-100/60 border-red-300/50 text-red-700"} border`,children:m.text}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(se,{children:"Calendar Starting Hour"}),e.jsx("select",{value:n.startHour,onChange:x=>j("startHour",parseInt(x.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:Array.from({length:24},(x,y)=>e.jsx("option",{value:y,children:y===0?"12 AM":y<12?`${y} AM`:y===12?"12 PM":`${y-12} PM`},y))})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Calendar Ending Hour"}),e.jsx("select",{value:n.endHour,onChange:x=>j("endHour",parseInt(x.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:Array.from({length:24},(x,y)=>e.jsx("option",{value:y,children:y===0?"12 AM":y<12?`${y} AM`:y===12?"12 PM":`${y-12} PM`},y))})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Calendar Interval (minutes)"}),e.jsxs("select",{value:n.interval,onChange:x=>j("interval",parseInt(x.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:[e.jsx("option",{value:15,children:"15 minutes"}),e.jsx("option",{value:30,children:"30 minutes"}),e.jsx("option",{value:60,children:"60 minutes"})]})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Default Calendar View"}),e.jsxs("select",{value:n.viewType,onChange:x=>j("viewType",x.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:[e.jsx("option",{value:"day",children:"Day"}),e.jsx("option",{value:"week",children:"Week"}),e.jsx("option",{value:"month",children:"Month"})]})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Appointment/Event Color"}),e.jsxs("select",{value:n.eventColor,onChange:x=>j("eventColor",x.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50",children:[e.jsx("option",{value:"1",children:"Category Color Schema"}),e.jsx("option",{value:"2",children:"Facility Color Schema"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:n.providersSeeAll,onChange:x=>j("providersSeeAll",x.target.checked),className:"checkbox"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Providers See Entire Calendar"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-8",children:"Allow providers to see all appointments, not just their own"})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsx("button",{onClick:v,disabled:u,className:`px-6 py-3 rounded-lg font-medium transition-colors ${u?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:u?"Saving...":"Save Settings"})})]})}function yt({children:n,className:c="",...d}){return e.jsx("button",{className:`px-4 py-2 bg-blue-600 text-white font-medium rounded-lg
         hover:bg-blue-700 transition-colors disabled:opacity-50 ${c}`,...d,children:n})}function To({children:n,className:c="",...d}){return e.jsx("button",{className:`px-4 py-2 border border-gray-300 rounded-lg
         hover:bg-gray-50 transition-colors disabled:opacity-50 ${c}`,...d,children:n})}function mb(){const[n,c]=g.useState([]),[d,o]=g.useState([]),[u,p]=g.useState(!0),[m,f]=g.useState(""),[b,v]=g.useState(""),[j,x]=g.useState("all"),[y,C]=g.useState(!1),[N,_]=g.useState(!1),[A,E]=g.useState({id:null,name:"",description:"",color:"#3b82f6",default_duration:50,is_billable:1,is_active:1,category_type:"client",requires_cpt_selection:0,blocks_availability:0,linked_cpt_codes:[],sort_order:0}),[O,Y]=g.useState(""),[I,$]=g.useState(!1);g.useEffect(()=>{le(),V()},[]);const le=async()=>{try{p(!0);const D=await fetch("/custom/api/calendar_categories.php",{credentials:"include"});if(!D.ok)throw new Error("Failed to fetch calendar categories");const S=await D.json();c(S.categories||[])}catch(D){f(D.message)}finally{p(!1)}},V=async()=>{try{const D=await fetch("/custom/api/cpt_codes.php",{credentials:"include"});if(!D.ok)throw new Error("Failed to fetch CPT codes");const S=await D.json();o(S.cpt_codes?.filter(k=>k.is_active)||[])}catch(D){console.error("Failed to load CPT codes:",D)}},X=()=>{E({id:null,name:"",description:"",color:"#3b82f6",default_duration:50,is_billable:1,is_active:1,category_type:"client",requires_cpt_selection:0,blocks_availability:0,linked_cpt_codes:[],sort_order:0}),Y(""),C(!0)},ge=async D=>{try{const S=await fetch(`/custom/api/calendar_categories.php?action=get&id=${D.id}`,{credentials:"include"});if(!S.ok)throw new Error("Failed to fetch category details");const U=(await S.json()).category;E({id:U.id,name:U.name,description:U.description||"",color:U.color||"#3b82f6",default_duration:U.default_duration||50,is_billable:U.is_billable,is_active:U.is_active,category_type:U.category_type||"client",requires_cpt_selection:U.requires_cpt_selection||0,blocks_availability:U.blocks_availability||0,linked_cpt_codes:U.linked_cpt_codes||[],sort_order:U.sort_order||0}),Y(""),_(!0)}catch(S){f(S.message)}},he=async()=>{if(Y(""),!A.name.trim()){Y("Category name is required");return}try{$(!0);const D=A.id?"update":"create",S=await fetch("/custom/api/calendar_categories.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:D,...A})}),k=await S.json();if(!S.ok||!k.success)throw new Error(k.error||"Failed to save category");await le(),C(!1),_(!1)}catch(D){Y(D.message)}finally{$(!1)}},xe=async D=>{if(confirm("Are you sure you want to delete this category? This cannot be undone."))try{const S=await fetch("/custom/api/calendar_categories.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete",id:D})}),k=await S.json();if(!S.ok||!k.success)throw new Error(k.error||"Failed to delete category");await le()}catch(S){f(S.message)}},q=async D=>{try{const S=await fetch("/custom/api/calendar_categories.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",id:D.id,is_active:D.is_active?0:1})}),k=await S.json();if(!S.ok||!k.success)throw new Error(k.error||"Failed to update status");await le()}catch(S){f(S.message)}},z=D=>{E(S=>({...S,linked_cpt_codes:S.linked_cpt_codes.includes(D)?S.linked_cpt_codes.filter(k=>k!==D):[...S.linked_cpt_codes,D]}))},H=n.filter(D=>{const S=D.name.toLowerCase().includes(b.toLowerCase())||(D.description||"").toLowerCase().includes(b.toLowerCase()),k=j==="all"||D.category_type===j;return S&&k});return u?e.jsx("div",{className:"glass-card p-8",children:e.jsx("div",{className:"text-center text-gray-600",children:"Loading calendar categories..."})}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Calendar Categories"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage appointment types and link them to billing codes"})]}),e.jsx(yt,{onClick:X,children:"+ Add Category"})]}),m&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:m}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search categories...",value:b,onChange:D=>v(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsxs("select",{value:j,onChange:D=>x(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"client",children:"Client Appointments"}),e.jsx("option",{value:"clinic",children:"Clinic/Internal"}),e.jsx("option",{value:"holiday",children:"Holidays/Closures"})]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Duration"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Billable"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"CPT Required"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:H.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:"No categories found"})}):H.map(D=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:D.color}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:D.name}),D.description&&e.jsx("div",{className:"text-xs text-gray-500",children:D.description})]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${D.category_type==="client"?"bg-blue-100 text-blue-700":D.category_type==="clinic"?"bg-purple-100 text-purple-700":"bg-orange-100 text-orange-700"}`,children:D.category_type==="client"?"Client":D.category_type==="clinic"?"Clinic":"Holiday"})}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700 text-center",children:[D.default_duration," min"]}),e.jsx("td",{className:"px-4 py-3 text-center",children:D.is_billable?e.jsx("span",{className:"text-green-600",children:""}):e.jsx("span",{className:"text-gray-400",children:""})}),e.jsx("td",{className:"px-4 py-3 text-center",children:D.requires_cpt_selection?e.jsx("span",{className:"text-green-600",children:""}):e.jsx("span",{className:"text-gray-400",children:""})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>q(D),className:`px-3 py-1 text-xs rounded-full ${D.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:D.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-4 py-3 text-center",children:[e.jsx("button",{onClick:()=>ge(D),className:"text-blue-600 hover:text-blue-800 mr-3",children:"Edit"}),e.jsx("button",{onClick:()=>xe(D.id),className:"text-red-600 hover:text-red-800",children:"Delete"})]})]},D.id))})]})}),(y||N)&&Rt.createPortal(e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container modal-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:A.id?"Edit Category":"Add Category"}),e.jsx("button",{onClick:()=>{C(!1),_(!1)},className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"modal-body space-y-6",children:[O&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:O}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(se,{children:["Category Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:A.name,onChange:D=>E({...A,name:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Office Visit"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Category Type"}),e.jsxs("select",{value:A.category_type,onChange:D=>E({...A,category_type:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"client",children:"Client Appointment"}),e.jsx("option",{value:"clinic",children:"Clinic/Internal"}),e.jsx("option",{value:"holiday",children:"Holiday/Closure"})]})]})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Description"}),e.jsx("textarea",{value:A.description,onChange:D=>E({...A,description:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"2",placeholder:"Brief description of this category"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(se,{children:"Color"}),e.jsx("input",{type:"color",value:A.color,onChange:D=>E({...A,color:D.target.value}),className:"w-full h-10 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Default Duration (min)"}),e.jsx("input",{type:"number",value:A.default_duration,onChange:D=>E({...A,default_duration:parseInt(D.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Sort Order"}),e.jsx("input",{type:"number",value:A.sort_order,onChange:D=>E({...A,sort_order:parseInt(D.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Settings"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:A.is_billable===1,onChange:D=>E({...A,is_billable:D.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Billable"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:A.requires_cpt_selection===1,onChange:D=>E({...A,requires_cpt_selection:D.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Requires CPT Code Selection"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:A.blocks_availability===1,onChange:D=>E({...A,blocks_availability:D.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Blocks Provider Availability"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:A.is_active===1,onChange:D=>E({...A,is_active:D.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Active"})]})]})]}),A.requires_cpt_selection===1&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Linked CPT Codes"}),e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 max-h-64 overflow-y-auto",children:d.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No active CPT codes available"}):e.jsx("div",{className:"space-y-2",children:d.map(D=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:A.linked_cpt_codes.includes(D.id),onChange:()=>z(D.id),className:"mr-2 checkbox"}),e.jsxs("span",{className:"checkbox-label",children:[e.jsx("span",{className:"font-mono font-semibold",children:D.code})," - ",D.description]})]},D.id))})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Selected CPT codes will be available when scheduling appointments with this category"})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx(To,{onClick:()=>{C(!1),_(!1)},disabled:I,children:"Cancel"}),e.jsx(yt,{onClick:he,disabled:I,children:I?"Saving...":"Save Category"})]})]})]})}),document.body)]})}function hb(){const[n,c]=g.useState([]),[d,o]=g.useState(!0),[u,p]=g.useState(null),[m,f]=g.useState(!1),[b,v]=g.useState(!1),[j,x]=g.useState(!1),[y,C]=g.useState(null),[N,_]=g.useState({name:"",parent_id:null}),[A,E]=g.useState(!1),[O,Y]=g.useState(null);g.useEffect(()=>{I()},[]);const I=async()=>{try{o(!0);const D=await fetch("/custom/api/document_categories.php",{credentials:"include"});if(!D.ok)throw new Error("Failed to fetch categories");const S=await D.json();c(S.categories||[]),p(null)}catch(D){console.error("Error fetching categories:",D),p(D.message)}finally{o(!1)}},$=D=>{const S=[],k={};return D.forEach(U=>{k[U.id]={...U,children:[]}}),D.forEach(U=>{U.parent&&k[U.parent]?k[U.parent].children.push(k[U.id]):S.push(k[U.id])}),S},le=(D,S=0)=>{let k=[];return D.forEach(U=>{k.push({...U,level:S}),U.children&&U.children.length>0&&(k=k.concat(le(U.children,S+1)))}),k},V=()=>{if(!y)return n;const D=new Set([y.id]),S=$(n),k=ie=>{ie.children&&ie.children.forEach(be=>{D.add(be.id),k(be)})},U=ie=>{ie.forEach(be=>{be.id===y.id&&k(be),be.children&&U(be.children)})};return U(S),n.filter(ie=>!D.has(ie.id))},X=()=>{_({name:"",parent_id:null}),Y(null),f(!0)},ge=D=>{C(D),_({name:D.name,parent_id:D.parent?parseInt(D.parent):null}),Y(null),v(!0)},he=D=>{C(D),Y(null),x(!0)},xe=async()=>{if(!N.name||N.name.trim()===""){Y("Category name is required");return}try{E(!0),Y(null);const D=await fetch("/custom/api/document_categories.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:N.name.trim(),parent_id:N.parent_id||null})}),S=await D.json();if(!D.ok)throw new Error(S.error||"Failed to create category");await I(),f(!1)}catch(D){console.error("Error creating category:",D),Y(D.message)}finally{E(!1)}},q=async()=>{if(!N.name||N.name.trim()===""){Y("Category name is required");return}try{E(!0),Y(null);const D=await fetch("/custom/api/document_categories.php",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:y.id,name:N.name.trim(),parent_id:N.parent_id||null})}),S=await D.json();if(!D.ok)throw new Error(S.error||"Failed to update category");await I(),v(!1)}catch(D){console.error("Error updating category:",D),Y(D.message)}finally{E(!1)}},z=async()=>{try{E(!0),Y(null);const D=await fetch(`/custom/api/document_categories.php?id=${y.id}`,{method:"DELETE",credentials:"include"}),S=await D.json();if(!D.ok)throw new Error(S.error||"Failed to delete category");await I(),x(!1)}catch(D){console.error("Error deleting category:",D),Y(D.message)}finally{E(!1)}},H=()=>{f(!1),v(!1),x(!1),C(null),_({name:"",parent_id:null}),Y(null)};return d?e.jsx("div",{className:"glass-card p-8",children:e.jsx("div",{className:"text-center text-gray-700",children:"Loading categories..."})}):u?e.jsxs("div",{className:"glass-card p-8",children:[e.jsxs("div",{className:"text-center text-red-600",children:["Error: ",u]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(yt,{onClick:I,children:"Retry"})})]}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Document Categories"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage categories for organizing client documents"})]}),e.jsx(yt,{onClick:X,children:"+ Add Category"})]}),n.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:'No categories defined. Click "Add Category" to create one.'}):e.jsx("div",{className:"space-y-2",children:le($(n)).map(D=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",style:{marginLeft:`${D.level*2}rem`},children:[e.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[D.level>0&&e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("div",{className:"font-medium text-gray-900",children:D.name}),D.children&&D.children.length>0&&e.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:[D.children.length," ",D.children.length===1?"subcategory":"subcategories"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ge(D),className:"px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>he(D),className:"px-3 py-1.5 text-sm font-medium text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",children:"Delete"})]})]},D.id))}),m&&Rt.createPortal(e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container max-w-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Add Category"}),e.jsx("button",{onClick:H,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:D=>{D.preventDefault(),xe()},className:"modal-body",children:[O&&e.jsx("div",{className:"error-message",children:O}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(se,{children:["Category Name ",e.jsx(ze,{})]}),e.jsx("input",{type:"text",value:N.name,onChange:D=>_({...N,name:D.target.value}),placeholder:"e.g., Consent Forms, Insurance Documents",className:"input-field",autoFocus:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(se,{children:"Parent Category (Optional)"}),e.jsxs("select",{value:N.parent_id||"",onChange:D=>{const S=D.target.value;_({...N,parent_id:S?parseInt(S,10):null})},className:"input-field",children:[e.jsx("option",{value:"",children:"None (Top Level)"}),n.map(D=>e.jsx("option",{value:D.id,children:D.name},D.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a parent to create a subcategory"})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:H,disabled:A,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:A,className:"btn-action btn-primary btn-compact disabled:opacity-50",children:A?"Creating...":"Create Category"})]})]})]})}),document.body),b&&Rt.createPortal(e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container max-w-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Category"}),e.jsx("button",{onClick:H,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:D=>{D.preventDefault(),q()},className:"modal-body",children:[O&&e.jsx("div",{className:"error-message",children:O}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(se,{children:["Category Name ",e.jsx(ze,{})]}),e.jsx("input",{type:"text",value:N.name,onChange:D=>_({...N,name:D.target.value}),className:"input-field",autoFocus:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(se,{children:"Parent Category (Optional)"}),e.jsxs("select",{value:N.parent_id||"",onChange:D=>{const S=D.target.value;_({...N,parent_id:S?parseInt(S,10):null})},className:"input-field",children:[e.jsx("option",{value:"",children:"None (Top Level)"}),V().map(D=>e.jsx("option",{value:D.id,children:D.name},D.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a parent to make this a subcategory"})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:H,disabled:A,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:A,className:"btn-action btn-primary btn-compact disabled:opacity-50",children:A?"Saving...":"Save Changes"})]})]})]})}),document.body),j&&Rt.createPortal(e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container max-w-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Delete Category"}),e.jsx("button",{onClick:H,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:D=>{D.preventDefault(),z()},className:"modal-body",children:[O&&e.jsx("div",{className:"error-message",children:O}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to delete the category ",e.jsxs("strong",{children:['"',y?.name,'"']}),"?"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Note: You cannot delete a category that has documents or subcategories."})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:H,disabled:A,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:A,className:"btn-action btn-danger btn-compact disabled:opacity-50",children:A?"Deleting...":"Delete Category"})]})]})]})}),document.body)]})}function fb({listType:n,title:c,description:d,apiEndpoint:o}){const[u,p]=g.useState([]),[m,f]=g.useState(!0),[b,v]=g.useState(null),[j,x]=g.useState(!1),[y,C]=g.useState(!1),[N,_]=g.useState(!1),[A,E]=g.useState(null),[O,Y]=g.useState({name:"",description:"",active:!0}),[I,$]=g.useState(!1),[le,V]=g.useState(null);g.useEffect(()=>{X()},[n]);const X=async()=>{try{f(!0);const S=await fetch(`${o}?type=${n}`,{credentials:"include"});if(!S.ok)throw new Error(`Failed to fetch ${c.toLowerCase()}`);const k=await S.json();p(k.items||[]),v(null)}catch(S){console.error(`Error fetching ${c}:`,S),v(S.message)}finally{f(!1)}},ge=()=>{Y({name:"",description:"",active:!0}),V(null),x(!0)},he=S=>{E(S),Y({name:S.name||"",description:S.description||"",active:S.active!==void 0?S.active:!0}),V(null),C(!0)},xe=S=>{E(S),V(null),_(!0)},q=async()=>{if(!O.name||O.name.trim()===""){V("Name is required");return}try{$(!0),V(null);const S=await fetch(o,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:n,name:O.name.trim(),description:O.description?.trim()||"",active:O.active})}),k=await S.json();if(!S.ok)throw new Error(k.error||`Failed to create ${c.toLowerCase()}`);await X(),x(!1)}catch(S){console.error(`Error creating ${c}:`,S),V(S.message)}finally{$(!1)}},z=async()=>{if(!O.name||O.name.trim()===""){V("Name is required");return}try{$(!0),V(null);const S=await fetch(o,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:n,id:A.id,name:O.name.trim(),description:O.description?.trim()||"",active:O.active})}),k=await S.json();if(!S.ok)throw new Error(k.error||`Failed to update ${c.toLowerCase()}`);await X(),C(!1)}catch(S){console.error(`Error updating ${c}:`,S),V(S.message)}finally{$(!1)}},H=async()=>{try{$(!0),V(null);const S=await fetch(`${o}?type=${n}&id=${A.id}`,{method:"DELETE",credentials:"include"}),k=await S.json();if(!S.ok)throw new Error(k.error||`Failed to delete ${c.toLowerCase()}`);await X(),_(!1)}catch(S){console.error(`Error deleting ${c}:`,S),V(S.message)}finally{$(!1)}},D=()=>{x(!1),C(!1),_(!1),E(null),Y({name:"",description:"",active:!0}),V(null)};return m?e.jsx("div",{className:"glass-card p-8",children:e.jsxs("div",{className:"text-center text-gray-700",children:["Loading ",c.toLowerCase(),"..."]})}):b?e.jsxs("div",{className:"glass-card p-8",children:[e.jsxs("div",{className:"text-center text-red-600",children:["Error: ",b]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(yt,{onClick:X,children:"Retry"})})]}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:c}),e.jsx("p",{className:"text-gray-600 mt-1",children:d})]}),e.jsxs(yt,{onClick:ge,children:["+ Add ",c.replace(/s$/,"")]})]}),u.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:['No items defined. Click "Add ',c.replace(/s$/,""),'" to create one.']}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4",children:u.map(S=>e.jsxs("div",{className:"glass-card-sm p-4 hover:shadow-lg transition-all duration-200 group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900 text-lg mb-1",children:S.name}),S.description&&e.jsx("div",{className:"text-sm text-gray-600 leading-relaxed",children:S.description})]}),e.jsx("div",{className:"flex items-center gap-1 ml-3",children:S.active?e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full",children:"Active"}):e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium text-gray-600 bg-gray-200 rounded-full",children:"Inactive"})})]}),e.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-gray-200/50",children:[e.jsxs("button",{onClick:()=>he(S),className:"flex-1 px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-white hover:bg-blue-600 rounded-lg transition-all duration-200",title:"Edit item",children:[e.jsx("svg",{className:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),e.jsxs("button",{onClick:()=>xe(S),className:"flex-1 px-3 py-1.5 text-sm font-medium text-red-600 hover:text-white hover:bg-red-600 rounded-lg transition-all duration-200",title:"Delete item",children:[e.jsx("svg",{className:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]},S.id))}),j&&Rt.createPortal(e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container max-w-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:["Add ",c.replace(/s$/,"")]}),e.jsx("button",{onClick:D,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:S=>{S.preventDefault(),q()},className:"modal-body",children:[le&&e.jsx("div",{className:"error-message",children:le}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(se,{children:["Name ",e.jsx(ze,{})]}),e.jsx("input",{type:"text",value:O.name,onChange:S=>Y({...O,name:S.target.value}),placeholder:"e.g., Heterosexual, Male, Single",className:"input-field",autoFocus:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(se,{children:"Description (Optional)"}),e.jsx("input",{type:"text",value:O.description,onChange:S=>Y({...O,description:S.target.value}),placeholder:"Additional details or clarification",className:"input-field"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:O.active,onChange:S=>Y({...O,active:S.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Active"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"Inactive items won't appear in selection lists"})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:D,disabled:I,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:I,className:"btn-action btn-primary btn-compact disabled:opacity-50",children:I?"Creating...":`Create ${c.replace(/s$/,"")}`})]})]})]})}),document.body),y&&Rt.createPortal(e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container max-w-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:["Edit ",c.replace(/s$/,"")]}),e.jsx("button",{onClick:D,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:S=>{S.preventDefault(),z()},className:"modal-body",children:[le&&e.jsx("div",{className:"error-message",children:le}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(se,{children:["Name ",e.jsx(ze,{})]}),e.jsx("input",{type:"text",value:O.name,onChange:S=>Y({...O,name:S.target.value}),className:"input-field",autoFocus:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(se,{children:"Description (Optional)"}),e.jsx("input",{type:"text",value:O.description,onChange:S=>Y({...O,description:S.target.value}),placeholder:"Additional details or clarification",className:"input-field"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:O.active,onChange:S=>Y({...O,active:S.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Active"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"Inactive items won't appear in selection lists"})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:D,disabled:I,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:I,className:"btn-action btn-primary btn-compact disabled:opacity-50",children:I?"Saving...":"Save Changes"})]})]})]})}),document.body),N&&Rt.createPortal(e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container max-w-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:["Delete ",c.replace(/s$/,"")]}),e.jsx("button",{onClick:D,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:S=>{S.preventDefault(),H()},className:"modal-body",children:[le&&e.jsx("div",{className:"error-message",children:le}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-700 mb-4",children:["Are you sure you want to delete ",e.jsxs("strong",{children:['"',A?.name,'"']}),"?"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Note: You cannot delete items that are currently in use by client records."})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:D,disabled:I,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:I,className:"btn-action btn-danger btn-compact disabled:opacity-50",children:I?"Deleting...":`Delete ${c.replace(/s$/,"")}`})]})]})]})}),document.body)]})}function xb(){const[n,c]=g.useState("sexual-orientation"),d=[{id:"sexual-orientation",label:"Sexual Orientation",title:"Sexual Orientations",description:"Manage sexual orientation options for client demographics"},{id:"gender-identity",label:"Gender Identity",title:"Gender Identities",description:"Manage gender identity options for client demographics"},{id:"pronouns",label:"Pronouns",title:"Pronouns",description:"Manage pronoun options for client demographics"},{id:"marital-status",label:"Marital Status",title:"Marital Statuses",description:"Manage marital status options for client demographics"},{id:"client-status",label:"Client Status",title:"Client Statuses",description:"Manage client status options (Active, Discharged, etc.)"},{id:"ethnicity",label:"Ethnicity/Race",title:"Ethnicity/Race Options",description:"Manage ethnicity and race options for client demographics"},{id:"insurance-type",label:"Insurance Types",title:"Insurance Types",description:"Manage insurance type categories"},{id:"referral-source",label:"Referral Sources",title:"Referral Sources",description:"Manage referral source options for client intake"},{id:"treatment-modality",label:"Treatment Modalities",title:"Treatment Modalities",description:"Manage treatment modality options (CBT, DBT, etc.)"},{id:"discharge-reason",label:"Discharge Reasons",title:"Discharge Reasons",description:"Manage discharge reason options for client records"}],o=d.find(u=>u.id===n);return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"glass-card p-6 mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reference Lists"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage clinical and demographic lookup lists"})]}),e.jsx("div",{className:"glass-card p-2 mb-6",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(u=>e.jsx("button",{onClick:()=>c(u.id),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n===u.id?"bg-blue-600 text-white":"hover:bg-gray-100 text-gray-700"}`,children:u.label},u.id))})}),o&&e.jsx(fb,{listType:n,title:o.title,description:o.description,apiEndpoint:"/custom/api/reference_lists.php"},n)]})}function gb(){const[n,c]=g.useState([]),[d,o]=g.useState([]),[u,p]=g.useState([]),[m,f]=g.useState(!0),[b,v]=g.useState(null),[j,x]=g.useState(""),[y,C]=g.useState("active"),[N,_]=g.useState(!1),[A,E]=g.useState(!1),[O,Y]=g.useState(null),[I,$]=g.useState(!1),[le,V]=g.useState(null),[X,ge]=g.useState(!1),[he,xe]=g.useState({username:"",password:"",fname:"",mname:"",lname:"",title:"",suffix:"",email:"",phone:"",phonecell:"",npi:"",federaltaxid:"",taxonomy:"",state_license_number:"",supervisor_id:"",supervisor_ids:[],facility_id:"",authorized:!1,is_supervisor:!1,active:!0,calendar:!1,portal_user:!1,notes:""});g.useEffect(()=>{q(),z(),H()},[y]);const q=async()=>{try{f(!0);const P=await fetch(`/custom/api/users.php?action=list&status=${y}`,{credentials:"include"});if(!P.ok)throw new Error("Failed to fetch users");const ue=await P.json();c(ue.users||[]),v(null)}catch(P){console.error("Error fetching users:",P),v(P.message)}finally{f(!1)}},z=async()=>{try{const P=await fetch("/custom/api/users.php?action=supervisors",{credentials:"include"});if(!P.ok)return;const ue=await P.json();o(ue.supervisors||[])}catch(P){console.error("Error fetching supervisors:",P)}},H=async()=>{try{const P=await fetch("/custom/api/users.php?action=facilities",{credentials:"include"});if(!P.ok)return;const ue=await P.json();p(ue.facilities||[])}catch(P){console.error("Error fetching facilities:",P)}},D=()=>{xe({username:"",password:"",fname:"",mname:"",lname:"",title:"",suffix:"",email:"",phone:"",phonecell:"",npi:"",federaltaxid:"",taxonomy:"",state_license_number:"",supervisor_id:"",supervisor_ids:[],facility_id:"",authorized:!1,is_supervisor:!1,active:!0,calendar:!1,portal_user:!1,notes:""}),ge(!1),V(null)},S=()=>{D(),_(!0)},k=async P=>{console.log("handleEdit called for user:",P),Y(P),V(null);try{console.log("Fetching user details for ID:",P.id);const ue=await fetch(`/custom/api/users.php?action=get&id=${P.id}`,{credentials:"include"});console.log("Response status:",ue.status),console.log("Response headers:",ue.headers.get("content-type"));const Ce=await ue.text();if(console.log("Response text:",Ce),!Ce)throw new Error("Empty response from server. Check server logs.");let ee;try{ee=JSON.parse(Ce)}catch(ve){throw console.error("JSON parse error:",ve),new Error(`Invalid JSON response: ${Ce.substring(0,100)}`)}if(!ue.ok)throw new Error(ee.error||"Failed to fetch user details");const M=ee.user;if(!M)throw new Error("No user data in response");const de=await fetch(`/custom/api/users.php?action=user_supervisors&id=${P.id}`,{credentials:"include"});let me=[];de.ok&&(me=((await de.json()).supervisor_ids||[]).map(oe=>String(oe))),xe({id:M.id,username:M.username||"",password:"",fname:M.fname||"",mname:M.mname||"",lname:M.lname||"",title:M.title||"",suffix:M.suffix||"",email:M.email||"",phone:M.phone||"",phonecell:M.phonecell||"",npi:M.npi||"",federaltaxid:M.federaltaxid||"",taxonomy:M.taxonomy||"",state_license_number:M.state_license_number||"",supervisor_id:M.supervisor_id||"",supervisor_ids:me,facility_id:M.facility_id||"",authorized:M.authorized==="1"||M.authorized===1,is_supervisor:M.is_supervisor==="1"||M.is_supervisor===1,active:M.active==="1"||M.active===1,calendar:M.calendar==="1"||M.calendar===1,portal_user:M.portal_user==="1"||M.portal_user===1,notes:M.notes||""}),E(!0)}catch(ue){console.error("Error fetching user details:",ue),alert("Failed to load user details: "+ue.message+`

Check the browser console and server logs for more details.`),V(ue.message)}},U=async()=>{if(!he.username||!he.password||!he.fname||!he.lname||!he.email){V("Username, password, email, first name, and last name are required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(he.email)){V("Please enter a valid email address");return}if(he.password.length<8){V("Password must be at least 8 characters long");return}if(!/[a-z]/.test(he.password)){V("Password must contain at least one lowercase letter");return}if(!/[A-Z]/.test(he.password)){V("Password must contain at least one uppercase letter");return}if(!/[0-9]/.test(he.password)){V("Password must contain at least one number");return}if(!/[^a-zA-Z0-9]/.test(he.password)){V("Password must contain at least one special character");return}try{$(!0),V(null);const ue=await fetch("/custom/api/users.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(he)}),Ce=await ue.json();if(!ue.ok)throw new Error(Ce.error||"Failed to create user");await q(),await z(),_(!1),D()}catch(ue){console.error("Error creating user:",ue),V(ue.message)}finally{$(!1)}},ie=async()=>{if(!he.fname||!he.lname){V("First name and last name are required");return}if(he.password&&he.password.trim()!==""){if(he.password.length<8){V("Password must be at least 8 characters long");return}if(!/[a-z]/.test(he.password)){V("Password must contain at least one lowercase letter");return}if(!/[A-Z]/.test(he.password)){V("Password must contain at least one uppercase letter");return}if(!/[0-9]/.test(he.password)){V("Password must contain at least one number");return}if(!/[^a-zA-Z0-9]/.test(he.password)){V("Password must contain at least one special character");return}}try{$(!0),V(null);const P=await fetch("/custom/api/users.php",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(he)}),ue=await P.json();if(!P.ok)throw new Error(ue.error||"Failed to update user");await q(),await z(),E(!1),D()}catch(P){console.error("Error updating user:",P),V(P.message)}finally{$(!1)}},be=async P=>{if(confirm("Are you sure you want to deactivate this user?"))try{if(!(await fetch(`/custom/api/users.php?id=${P}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to deactivate user");await q()}catch(ue){console.error("Error deactivating user:",ue),alert("Failed to deactivate user: "+ue.message)}},T=async P=>{if(confirm("Unlock this user account? This will reset failed login attempts and allow them to log in again."))try{const ue=await fetch(`/custom/api/users.php?action=unlock&id=${P}`,{method:"GET",credentials:"include"});if(!ue.ok){const Ce=await ue.json();throw new Error(Ce.error||"Failed to unlock account")}await q(),alert("Account unlocked successfully")}catch(ue){console.error("Error unlocking account:",ue),alert("Failed to unlock account: "+ue.message)}},L=()=>{_(!1),E(!1),Y(null),D()},W=(P,ue)=>{xe(Ce=>({...Ce,[P]:ue}))},F=P=>{const ue=String(P);xe(Ce=>{const ee=Ce.supervisor_ids||[],M=ee.includes(ue);return{...Ce,supervisor_ids:M?ee.filter(de=>de!==ue):[...ee,ue]}})},fe=n.filter(P=>{const ue=j.toLowerCase();return P.fname?.toLowerCase().includes(ue)||P.lname?.toLowerCase().includes(ue)||P.username?.toLowerCase().includes(ue)||P.email?.toLowerCase().includes(ue)});return m?e.jsx("div",{className:"glass-card p-8",children:e.jsx("div",{className:"text-center text-gray-700",children:"Loading users..."})}):b?e.jsxs("div",{className:"glass-card p-8",children:[e.jsxs("div",{className:"text-center text-red-600",children:["Error: ",b]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(yt,{onClick:q,children:"Retry"})})]}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"User Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage system users and providers"})]}),e.jsxs("button",{onClick:S,className:"btn-solid btn-solid-green btn-icon",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add User"]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",placeholder:"Search by name, username, or email...",value:j,onChange:P=>x(P.target.value),className:"input-lg"})}),e.jsxs("div",{className:"flex gap-3 mb-6",children:[e.jsx("button",{onClick:()=>C("active"),className:`filter-btn-enhanced ${y==="active"?"filter-btn-active-base bg-green-500":"filter-btn-inactive"}`,children:"Active"}),e.jsx("button",{onClick:()=>C("inactive"),className:`filter-btn-enhanced ${y==="inactive"?"filter-btn-active-base bg-red-500":"filter-btn-inactive"}`,children:"Inactive"}),e.jsx("button",{onClick:()=>C("all"),className:`filter-btn-enhanced ${y==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Users"})]}),fe.length>0&&e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-label",children:[fe.length," user",fe.length!==1?"s":""]})}),fe.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),e.jsxs("p",{className:"text-gray-600 text-lg",children:["No ",y!=="all"?y:""," users found"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:fe.map(P=>e.jsxs("div",{className:"card-item",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-base font-bold text-gray-800 leading-tight",children:[P.fname," ",P.lname]}),P.title&&e.jsx("p",{className:"text-xs text-gray-600",children:P.title})]}),e.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[e.jsx("span",{className:P.active==="1"?"badge-solid-success":"badge-solid-danger",children:P.active==="1"?"ACTIVE":"INACTIVE"}),P.is_locked==="1"&&e.jsx("span",{className:"badge-solid-danger text-xs",children:"LOCKED"})]})]}),e.jsxs("div",{className:"space-y-0.5 text-sm text-gray-600 mb-2",children:[(P.phonecell||P.phone)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",P.phonecell||P.phone]}),P.email&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",P.email]}),(P.is_supervisor==="1"||P.authorized==="1"||P.calendar==="1")&&e.jsxs("div",{className:"flex gap-2 mt-1.5",children:[P.is_supervisor==="1"&&e.jsx("span",{className:"badge-outline-warning text-xs",children:"Supervisor"}),P.authorized==="1"&&e.jsx("span",{className:"badge-outline-success text-xs",children:"Provider"}),P.calendar==="1"&&e.jsx("span",{className:"badge-outline-info text-xs",children:"Admin"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>k(P),className:"flex-1 px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"Edit"}),P.is_locked==="1"&&e.jsx("button",{onClick:()=>T(P.id),className:"flex-1 px-3 py-1.5 text-sm font-medium text-orange-600 hover:text-orange-800 hover:bg-orange-50 rounded-lg transition-colors",children:"Unlock"}),P.active==="1"&&e.jsx("button",{onClick:()=>be(P.id),className:"flex-1 px-3 py-1.5 text-sm font-medium text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",children:"Deactivate"})]})]},P.id))}),(N||A)&&Rt.createPortal(e.jsx(pb,{isEdit:A,formData:he,formError:le,saving:I,showPassword:X,setShowPassword:ge,supervisors:d,facilities:u,onFormChange:W,onToggleSupervisor:F,onSave:A?ie:U,onClose:L}),document.body)]})}function pb({isEdit:n,formData:c,formError:d,saving:o,showPassword:u,setShowPassword:p,supervisors:m,facilities:f,onFormChange:b,onToggleSupervisor:v,onSave:j,onClose:x}){return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container modal-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:n?"Edit User":"Add New User"}),e.jsx("button",{onClick:x,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:y=>{y.preventDefault(),j()},className:"modal-body",children:[d&&e.jsx("div",{className:"error-message",children:d}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Login Credentials"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(se,{children:["Username ",e.jsx(ze,{})]}),e.jsx("input",{type:"text",value:c.username,onChange:y=>b("username",y.target.value),disabled:n,className:"input-field disabled:bg-gray-100"})]}),e.jsxs("div",{children:[e.jsxs(se,{children:[n?"New Password (leave blank to keep current)":"Password"," ",!n&&e.jsx(ze,{})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:u?"text":"password",value:c.password,onChange:y=>b("password",y.target.value),className:"input-field"}),e.jsx("button",{type:"button",onClick:()=>p(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-sm text-gray-600 hover:text-gray-800",children:u?"Hide":"Show"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(se,{children:["Legal First Name ",e.jsx(ze,{})]}),e.jsx("input",{type:"text",value:c.fname,onChange:y=>b("fname",y.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Middle Name"}),e.jsx("input",{type:"text",value:c.mname,onChange:y=>b("mname",y.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsxs(se,{children:["Legal Last Name ",e.jsx(ze,{})]}),e.jsx("input",{type:"text",value:c.lname,onChange:y=>b("lname",y.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Professional Credentials"}),e.jsx("input",{type:"text",value:c.title,onChange:y=>b("title",y.target.value),placeholder:"MD, LCSW, PhD, etc.",className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Suffix"}),e.jsx("input",{type:"text",value:c.suffix,onChange:y=>b("suffix",y.target.value),placeholder:"Jr., Sr., III, etc.",className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"State License Number"}),e.jsx("input",{type:"text",value:c.state_license_number,onChange:y=>b("state_license_number",y.target.value),className:"input-field"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(se,{children:["Email ",e.jsx(ze,{})]}),e.jsx("input",{type:"email",value:c.email,onChange:y=>b("email",y.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Office Phone"}),e.jsx("input",{type:"tel",value:c.phone,onChange:y=>b("phone",y.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Cell Phone"}),e.jsx("input",{type:"tel",value:c.phonecell,onChange:y=>b("phonecell",y.target.value),className:"input-field"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Professional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(se,{children:"NPI"}),e.jsx("input",{type:"text",value:c.npi,onChange:y=>b("npi",y.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Federal Tax ID"}),e.jsx("input",{type:"text",value:c.federaltaxid,onChange:y=>b("federaltaxid",y.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Taxonomy Code"}),e.jsx("input",{type:"text",value:c.taxonomy,onChange:y=>b("taxonomy",y.target.value),placeholder:"207Q00000X",className:"input-field"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Access Control"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.authorized,onChange:y=>b("authorized",y.target.checked),className:"checkbox"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Provider (Can create clinical notes)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.is_supervisor,onChange:y=>b("is_supervisor",y.target.checked),className:"checkbox"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Supervisor (Can supervise other providers)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.calendar,onChange:y=>b("calendar",y.target.checked),className:"checkbox"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Administrator (Access to Settings)"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.portal_user,onChange:y=>b("portal_user",y.target.checked),className:"checkbox"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Portal Access"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:c.active,onChange:y=>b("active",y.target.checked),className:"checkbox"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Organization"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(se,{children:"Supervisors (select one or more)"}),e.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-48 overflow-y-auto bg-white",children:m.length===0?e.jsx("div",{className:"text-sm text-gray-500 italic",children:"No supervisors available. Mark users as supervisors in Access Control."}):e.jsx("div",{className:"space-y-2",children:m.map(y=>e.jsxs("label",{className:"flex items-center gap-2 hover:bg-gray-50 p-1 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.supervisor_ids.includes(String(y.id)),onChange:()=>v(y.id),className:"checkbox"}),e.jsxs("span",{className:"checkbox-label",children:[y.fname," ",y.lname," ",y.title&&`(${y.title})`]})]},y.id))})})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Default Facility"}),e.jsxs("select",{value:c.facility_id,onChange:y=>b("facility_id",y.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"None"}),f.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(se,{children:"Notes"}),e.jsx("textarea",{value:c.notes,onChange:y=>b("notes",y.target.value),rows:3,className:"input-field",placeholder:"Additional information about this user..."})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",onClick:x,disabled:o,className:"btn-action btn-cancel btn-compact disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:o,className:"btn-action btn-primary btn-compact disabled:opacity-50",children:o?"Saving...":n?"Save Changes":"Create User"})]})]})]})})}function po({active:n,onClick:c,children:d}){return e.jsx("button",{onClick:c,className:"px-4 py-2 font-semibold transition-colors "+(n?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-800"),children:d})}function bb(){const[n,c]=g.useState([]),[d,o]=g.useState(!0),[u,p]=g.useState(""),[m,f]=g.useState(""),[b,v]=g.useState("active"),[j,x]=g.useState(!1),[y,C]=g.useState(!1),[N,_]=g.useState({id:null,name:"",phone:"",fax:"",website:"",email:"",street:"",city:"",state:"",postal_code:"",country_code:"United States",mail_street:"",mail_city:"",mail_state:"",mail_zip:"",color:"#99FFFF",pos_code:"11",facility_npi:"",federal_ein:"",tax_id_type:"EIN",facility_taxonomy:"",attn:"",info:"",billing_location:0,accepts_assignment:0,service_location:1,primary_business_entity:0,inactive:0}),[A,E]=g.useState(""),[O,Y]=g.useState(!1),[I,$]=g.useState("physical"),le=[{value:"11",label:"11: Office"},{value:"02",label:"02: Telehealth"},{value:"10",label:"10: Telehealth (Patient Home)"},{value:"12",label:"12: Home"},{value:"21",label:"21: Inpatient Hospital"},{value:"22",label:"22: Outpatient Hospital"},{value:"23",label:"23: Emergency Room"},{value:"31",label:"31: Skilled Nursing Facility"},{value:"32",label:"32: Nursing Facility"},{value:"49",label:"49: Independent Clinic"},{value:"50",label:"50: Federally Qualified Health Center"},{value:"71",label:"71: State/Local Public Health Clinic"},{value:"81",label:"81: Independent Laboratory"}];g.useEffect(()=>{V()},[]);const V=async()=>{try{o(!0);const k=await fetch("/custom/api/facilities.php",{credentials:"include"});if(!k.ok)throw new Error("Failed to fetch facilities");const U=await k.json();c(U.facilities||[])}catch(k){p(k.message)}finally{o(!1)}},X=()=>{_({id:null,name:"",phone:"",fax:"",website:"",email:"",street:"",address_line2:"",city:"",state:"",postal_code:"",country_code:"United States",mail_street:"",mailing_address_line2:"",mail_city:"",mail_state:"",mail_zip:"",mailing_same_as_physical:"1",billing_street:"",billing_address_line2:"",billing_city:"",billing_state:"",billing_zip:"",billing_same_as_physical:"1",color:"#99FFFF",pos_code:"11",facility_npi:"",federal_ein:"",tax_id_type:"EIN",facility_taxonomy:"",attn:"",info:"",billing_location:0,accepts_assignment:0,service_location:1,primary_business_entity:0,inactive:0}),E(""),$("physical"),x(!0)},ge=async k=>{try{const U=await fetch(`/custom/api/facilities.php?action=get&id=${k.id}`,{credentials:"include"});if(!U.ok)throw new Error("Failed to load facility details");const ie=await U.json();_({...ie,billing_location:ie.billing_location==="1"||ie.billing_location===1?1:0,accepts_assignment:ie.accepts_assignment==="1"||ie.accepts_assignment===1?1:0,service_location:ie.service_location==="1"||ie.service_location===1?1:0,primary_business_entity:ie.primary_business_entity==="1"||ie.primary_business_entity===1?1:0,inactive:ie.inactive==="1"||ie.inactive===1?1:0,mailing_same_as_physical:ie.mailing_same_as_physical==="1"||ie.mailing_same_as_physical===1?"1":"0",billing_same_as_physical:ie.billing_same_as_physical==="1"||ie.billing_same_as_physical===1?"1":"0"}),E(""),$("physical"),C(!0)}catch(U){alert("Failed to load facility details: "+U.message)}},he=async()=>{if(!N.name?.trim()){E("Facility name is required");return}try{Y(!0),E("");const k=await fetch("/custom/api/facilities.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(N)});if(!k.ok){const U=await k.json();throw new Error(U.error||"Failed to create facility")}await V(),x(!1)}catch(k){E(k.message)}finally{Y(!1)}},xe=async()=>{if(!N.name?.trim()){E("Facility name is required");return}try{Y(!0),E("");const k=await fetch("/custom/api/facilities.php",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(N)});if(!k.ok){const U=await k.json();throw new Error(U.error||"Failed to update facility")}await V(),C(!1)}catch(k){E(k.message)}finally{Y(!1)}},q=async k=>{if(confirm("Are you sure you want to deactivate this facility?"))try{if(!(await fetch(`/custom/api/facilities.php?id=${k}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to deactivate facility");await V()}catch(U){alert("Error: "+U.message)}},z=()=>{x(!1),C(!1),E("")},H=(k,U)=>{_(ie=>({...ie,[k]:U}))},D=k=>{_(U=>({...U,[k]:U[k]?0:1}))},S=n.filter(k=>{const U=k.inactive==="0"||k.inactive===0;if(b==="active"&&!U||b==="inactive"&&U)return!1;if(m){const ie=m.toLowerCase();return k.name?.toLowerCase().includes(ie)||k.city?.toLowerCase().includes(ie)||k.state?.toLowerCase().includes(ie)}return!0});return d?e.jsx("div",{className:"glass-card p-8",children:e.jsx("div",{className:"text-center text-gray-700",children:"Loading facilities..."})}):u?e.jsxs("div",{className:"glass-card p-8",children:[e.jsxs("div",{className:"text-center text-red-600",children:["Error: ",u]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(yt,{onClick:V,children:"Retry"})})]}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Facilities"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage practice locations and facilities"})]}),e.jsxs("button",{onClick:X,className:"btn-solid btn-solid-green btn-icon",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Facility"]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",placeholder:"Search by name, city, or state...",value:m,onChange:k=>f(k.target.value),className:"input-lg"})}),e.jsxs("div",{className:"flex gap-3 mb-6",children:[e.jsx("button",{onClick:()=>v("active"),className:`filter-btn-enhanced ${b==="active"?"filter-btn-active-base bg-green-500":"filter-btn-inactive"}`,children:"Active"}),e.jsx("button",{onClick:()=>v("inactive"),className:`filter-btn-enhanced ${b==="inactive"?"filter-btn-active-base bg-red-500":"filter-btn-inactive"}`,children:"Inactive"}),e.jsx("button",{onClick:()=>v("all"),className:`filter-btn-enhanced ${b==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Facilities"})]}),S.length>0&&e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-label",children:[S.length," ",b!=="all"?b:""," facilit",S.length!==1?"ies":"y"]})}),S.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsxs("p",{className:"text-gray-600 text-lg",children:["No ",b!=="all"?b:""," facilities found"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.map(k=>e.jsxs("div",{className:"card-item",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("div",{children:e.jsx("h4",{className:"text-base font-bold text-gray-800 leading-tight",children:k.name})}),e.jsx("span",{className:k.inactive==="0"||k.inactive===0?"badge-solid-success":"badge-solid-danger",children:k.inactive==="0"||k.inactive===0?"ACTIVE":"INACTIVE"})]}),e.jsxs("div",{className:"space-y-0.5 text-sm text-gray-600 mb-2",children:[k.street&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Address:"})," ",k.street,", ",k.city,", ",k.state," ",k.postal_code]}),k.phone&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",k.phone]}),k.fax&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Fax:"})," ",k.fax]}),e.jsxs("div",{className:"flex gap-2 mt-1.5 flex-wrap",children:[(k.billing_location==="1"||k.billing_location===1)&&e.jsx("span",{className:"badge-outline-info text-xs",children:"Billing"}),(k.service_location==="1"||k.service_location===1)&&e.jsx("span",{className:"badge-outline-success text-xs",children:"Service"}),(k.primary_business_entity==="1"||k.primary_business_entity===1)&&e.jsx("span",{className:"badge-outline-warning text-xs",children:"Primary"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>ge(k),className:"flex-1 px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"Edit"}),(k.inactive==="0"||k.inactive===0)&&e.jsx("button",{onClick:()=>q(k.id),className:"flex-1 px-3 py-1.5 text-sm font-medium text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",children:"Deactivate"})]})]},k.id))}),(j||y)&&Rt.createPortal(e.jsx(vb,{isEdit:y,formData:N,formError:A,saving:O,addressTab:I,setAddressTab:$,posCodeOptions:le,onFormChange:H,onToggle:D,onSave:y?xe:he,onClose:z}),document.body)]})}function vb({isEdit:n,formData:c,formError:d,saving:o,addressTab:u,setAddressTab:p,posCodeOptions:m,onFormChange:f,onToggle:b,onSave:v,onClose:j}){return e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container max-w-4xl",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:n?"Edit Facility":"Add New Facility"}),e.jsx("button",{onClick:j,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"modal-body",children:[d&&e.jsx("div",{className:"error-message mb-4",children:d}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(se,{children:["Facility Name ",e.jsx(ze,{})]}),e.jsx("input",{type:"text",value:c.name||"",onChange:x=>f("name",x.target.value),className:"input-field",placeholder:"Enter facility name"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex border-b border-gray-300 mb-4",children:[e.jsx(po,{active:u==="physical",onClick:()=>p("physical"),children:"Physical Address"}),e.jsx(po,{active:u==="mailing",onClick:()=>p("mailing"),children:"Mailing Address"}),e.jsx(po,{active:u==="billing",onClick:()=>p("billing"),children:"Billing Address"})]}),u==="physical"?e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx(se,{children:"Street Address Line 1"}),e.jsx("input",{type:"text",value:c.street||"",onChange:x=>f("street",x.target.value),className:"input-field",placeholder:"123 Main Street"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Street Address Line 2"}),e.jsx("input",{type:"text",value:c.address_line2||"",onChange:x=>f("address_line2",x.target.value),className:"input-field",placeholder:"Suite 100"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(se,{children:"City"}),e.jsx("input",{type:"text",value:c.city||"",onChange:x=>f("city",x.target.value),className:"input-field",placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"State"}),e.jsx("input",{type:"text",value:c.state||"",onChange:x=>f("state",x.target.value),className:"input-field",placeholder:"WI",maxLength:2})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Zip Code"}),e.jsx("input",{type:"text",value:c.postal_code||"",onChange:x=>f("postal_code",x.target.value),className:"input-field",placeholder:"53092"})]})]})]}):u==="mailing"?e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer mb-2",children:[e.jsx("input",{type:"checkbox",checked:c.mailing_same_as_physical==="1",onChange:x=>{x.target.checked?(f("mailing_same_as_physical","1"),f("mail_street",c.street||""),f("mailing_address_line2",c.address_line2||""),f("mail_city",c.city||""),f("mail_state",c.state||""),f("mail_zip",c.postal_code||"")):f("mailing_same_as_physical","0")},className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Same as Physical Address"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Mailing Address Line 1"}),e.jsx("input",{type:"text",value:c.mail_street||"",onChange:x=>f("mail_street",x.target.value),className:"input-field",placeholder:"Enter mailing street address",disabled:c.mailing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Mailing Address Line 2"}),e.jsx("input",{type:"text",value:c.mailing_address_line2||"",onChange:x=>f("mailing_address_line2",x.target.value),className:"input-field",placeholder:"Suite, Apt, etc.",disabled:c.mailing_same_as_physical==="1"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(se,{children:"City"}),e.jsx("input",{type:"text",value:c.mail_city||"",onChange:x=>f("mail_city",x.target.value),className:"input-field",placeholder:"City",disabled:c.mailing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"State"}),e.jsx("input",{type:"text",value:c.mail_state||"",onChange:x=>f("mail_state",x.target.value),className:"input-field",placeholder:"WI",maxLength:2,disabled:c.mailing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Zip Code"}),e.jsx("input",{type:"text",value:c.mail_zip||"",onChange:x=>f("mail_zip",x.target.value),className:"input-field",placeholder:"53092",disabled:c.mailing_same_as_physical==="1"})]})]})]}):e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer mb-2",children:[e.jsx("input",{type:"checkbox",checked:c.billing_same_as_physical==="1",onChange:x=>{x.target.checked?(f("billing_same_as_physical","1"),f("billing_street",c.street||""),f("billing_address_line2",c.address_line2||""),f("billing_city",c.city||""),f("billing_state",c.state||""),f("billing_zip",c.postal_code||"")):f("billing_same_as_physical","0")},className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Same as Physical Address"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Billing Address Line 1"}),e.jsx("input",{type:"text",value:c.billing_street||"",onChange:x=>f("billing_street",x.target.value),className:"input-field",placeholder:"Enter billing street address",disabled:c.billing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Billing Address Line 2"}),e.jsx("input",{type:"text",value:c.billing_address_line2||"",onChange:x=>f("billing_address_line2",x.target.value),className:"input-field",placeholder:"Suite, Apt, etc.",disabled:c.billing_same_as_physical==="1"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(se,{children:"City"}),e.jsx("input",{type:"text",value:c.billing_city||"",onChange:x=>f("billing_city",x.target.value),className:"input-field",placeholder:"City",disabled:c.billing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"State"}),e.jsx("input",{type:"text",value:c.billing_state||"",onChange:x=>f("billing_state",x.target.value),className:"input-field",placeholder:"WI",maxLength:2,disabled:c.billing_same_as_physical==="1"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Zip Code"}),e.jsx("input",{type:"text",value:c.billing_zip||"",onChange:x=>f("billing_zip",x.target.value),className:"input-field",placeholder:"53092",disabled:c.billing_same_as_physical==="1"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(se,{children:"Phone"}),e.jsx("input",{type:"tel",value:c.phone||"",onChange:x=>f("phone",x.target.value),className:"input-field",placeholder:"262-345-7229"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Fax"}),e.jsx("input",{type:"tel",value:c.fax||"",onChange:x=>f("fax",x.target.value),className:"input-field",placeholder:"262-345-7229"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Website"}),e.jsx("input",{type:"url",value:c.website||"",onChange:x=>f("website",x.target.value),className:"input-field",placeholder:"https://example.com"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Email"}),e.jsx("input",{type:"email",value:c.email||"",onChange:x=>f("email",x.target.value),className:"input-field",placeholder:"contact@example.com"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(se,{children:"Color"}),e.jsx("input",{type:"color",value:c.color||"#99FFFF",onChange:x=>f("color",x.target.value),className:"input-field h-10"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"POS Code"}),e.jsx("select",{value:c.pos_code||"11",onChange:x=>f("pos_code",x.target.value),className:"input-field",children:m.map(x=>e.jsx("option",{value:x.value,children:x.label},x.value))})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Facility NPI"}),e.jsx("input",{type:"text",value:c.facility_npi||"",onChange:x=>f("facility_npi",x.target.value),className:"input-field",placeholder:"1811342058"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Tax ID"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("select",{value:c.tax_id_type||"EIN",onChange:x=>f("tax_id_type",x.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",style:{width:"90px"},children:[e.jsx("option",{value:"EIN",children:"EIN"}),e.jsx("option",{value:"SSN",children:"SSN"})]}),e.jsx("input",{type:"text",value:c.federal_ein||"",onChange:x=>f("federal_ein",x.target.value),className:"input-field flex-1",placeholder:"566611885"})]})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Facility Taxonomy"}),e.jsx("input",{type:"text",value:c.facility_taxonomy||"",onChange:x=>f("facility_taxonomy",x.target.value),className:"input-field",placeholder:"101YP2500X"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Attn"}),e.jsx("input",{type:"text",value:c.attn||"",onChange:x=>f("attn",x.target.value),className:"input-field",placeholder:"Kenneth J Nelan"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.billing_location===1,onChange:()=>b("billing_location"),className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Billing Location"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.accepts_assignment===1,onChange:()=>b("accepts_assignment"),className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Accepts Assignment"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.service_location===1,onChange:()=>b("service_location"),className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Service Location"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.primary_business_entity===1,onChange:()=>b("primary_business_entity"),className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Primary Business Entity"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.inactive===1,onChange:()=>b("inactive"),className:"w-5 h-5 rounded border-gray-300"}),e.jsx("span",{className:"text-label",children:"Facility Inactive"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(se,{children:"Info"}),e.jsx("textarea",{value:c.info||"",onChange:x=>f("info",x.target.value),className:"input-field",rows:4,placeholder:"Additional information about this facility..."})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"text-red-600",children:"*"})," Required"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{onClick:j,disabled:o,className:"btn-action btn-cancel",children:"Cancel"}),e.jsx("button",{onClick:v,disabled:o,className:"btn-action btn-primary",children:o?"Saving...":n?"Save Changes":"Add Facility"})]})]})})}function yb(){const[n,c]=g.useState([]),[d,o]=g.useState(!0),[u,p]=g.useState(!1),[m,f]=g.useState(null),[b,v]=g.useState({});g.useEffect(()=>{j()},[]);const j=async()=>{try{o(!0);const _=await fetch("/custom/api/settings.php?category=security",{credentials:"include"});if(!_.ok)throw new Error("Failed to fetch settings");const A=await _.json();c(A.settings||[]);const E={};A.settings.forEach(O=>{E[O.setting_key]=O.setting_value}),v(E)}catch(_){console.error("Error fetching settings:",_),f({type:"error",text:"Failed to load security settings"})}finally{o(!1)}},x=(_,A)=>{v(E=>({...E,[_]:A}))},y=async()=>{try{p(!0),f(null);const _=await fetch("/custom/api/settings.php",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({settings:b})}),A=await _.json();if(!_.ok)throw new Error(A.message||"Failed to save settings");f({type:"success",text:"Settings saved successfully!"}),setTimeout(()=>f(null),3e3)}catch(_){console.error("Error saving settings:",_),f({type:"error",text:_.message||"Failed to save settings"})}finally{p(!1)}},C=_=>{const A=_.setting_key,E=b[A]||_.setting_value;return _.setting_type==="boolean"?e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E==="1"||E===!0,onChange:O=>x(A,O.target.checked?"1":"0"),disabled:!_.is_editable,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}):_.setting_type==="integer"?e.jsx("input",{type:"number",value:E,onChange:O=>x(A,O.target.value),disabled:!_.is_editable,className:"w-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50 text-gray-900",min:"0"}):e.jsx("input",{type:"text",value:E,onChange:O=>x(A,O.target.value),disabled:!_.is_editable,className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/50 text-gray-900"})},N=_=>_.split(".").pop().split("_").map(A=>A.charAt(0).toUpperCase()+A.slice(1)).join(" ");return d?e.jsx("div",{className:"glass-card p-12 text-center",children:e.jsx("div",{className:"text-gray-700",children:"Loading security settings..."})}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Security Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure security and authentication parameters"})]}),m&&e.jsx("div",{className:`mb-6 px-4 py-3 rounded-lg border ${m.type==="success"?"bg-green-100/60 border-green-300/50 text-green-700":"bg-red-100/60 border-red-300/50 text-red-700"}`,children:m.text}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/30 backdrop-blur-sm rounded-xl p-6 border border-white/40",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Account Lockout"}),e.jsx("div",{className:"space-y-5",children:n.filter(_=>_.setting_key.includes("login_attempts")||_.setting_key.includes("lockout")).map(_=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("label",{className:"block font-medium text-gray-900 text-sm",children:N(_.setting_key)}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:_.description})]}),e.jsx("div",{className:"flex-shrink-0",children:C(_)})]},_.setting_key))})]}),e.jsxs("div",{className:"bg-white/30 backdrop-blur-sm rounded-xl p-6 border border-white/40",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Password Requirements"}),e.jsx("div",{className:"space-y-5",children:n.filter(_=>_.setting_key.includes("password")).map(_=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("label",{className:"block font-medium text-gray-900 text-sm",children:N(_.setting_key)}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:_.description})]}),e.jsx("div",{className:"flex-shrink-0",children:C(_)})]},_.setting_key))})]}),e.jsxs("div",{className:"bg-white/30 backdrop-blur-sm rounded-xl p-6 border border-white/40",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Session Management"}),e.jsx("div",{className:"space-y-5",children:n.filter(_=>_.setting_key.includes("session")).map(_=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("label",{className:"block font-medium text-gray-900 text-sm",children:N(_.setting_key)}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:_.description})]}),e.jsx("div",{className:"flex-shrink-0",children:C(_)})]},_.setting_key))})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{onClick:y,disabled:u,className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-blue-500 text-white font-medium rounded-lg hover:from-blue-700 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:u?"Saving Changes...":"Save Changes"})})]})]})}function jb(){const[n,c]=g.useState([]),[d,o]=g.useState(!0),[u,p]=g.useState(""),[m,f]=g.useState(""),[b,v]=g.useState("all"),[j,x]=g.useState(!1),[y,C]=g.useState(!1),[N,_]=g.useState({id:null,code:"",category:"Individual Therapy",type:"CPT4",description:"",standard_duration_minutes:50,standard_fee:"",is_active:1,is_addon:0,requires_primary_code:"",sort_order:0}),[A,E]=g.useState(""),[O,Y]=g.useState(!1),I=["Individual Therapy","Family Therapy","Group Therapy","Intake","Crisis","Assessment","Case Management","Non-Billable","Other"];g.useEffect(()=>{$()},[]);const $=async()=>{try{o(!0);const z=await fetch("/custom/api/cpt_codes.php",{credentials:"include"});if(!z.ok)throw new Error("Failed to fetch CPT codes");const H=await z.json();c(H.cpt_codes||[])}catch(z){p(z.message)}finally{o(!1)}},le=()=>{_({id:null,code:"",category:"Individual Therapy",type:"CPT4",description:"",standard_duration_minutes:50,standard_fee:"",is_active:1,is_addon:0,requires_primary_code:"",sort_order:0}),E(""),x(!0)},V=z=>{_({id:z.id,code:z.code,category:z.category,type:z.type,description:z.description,standard_duration_minutes:z.standard_duration_minutes,standard_fee:z.standard_fee||"",is_active:z.is_active,is_addon:z.is_addon,requires_primary_code:z.requires_primary_code||"",sort_order:z.sort_order}),E(""),C(!0)},X=async()=>{if(E(""),!N.code.trim()){E("CPT code is required");return}if(!N.description.trim()){E("Description is required");return}try{Y(!0);const z=N.id?"update":"create",H=await fetch("/custom/api/cpt_codes.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:z,...N})}),D=await H.json();if(!H.ok||!D.success)throw new Error(D.error||"Failed to save CPT code");await $(),x(!1),C(!1)}catch(z){E(z.message)}finally{Y(!1)}},ge=async z=>{if(confirm("Are you sure you want to delete this CPT code? This cannot be undone."))try{const H=await fetch("/custom/api/cpt_codes.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete",id:z})}),D=await H.json();if(!H.ok||!D.success)throw new Error(D.error||"Failed to delete CPT code");await $()}catch(H){p(H.message)}},he=async z=>{try{const H=await fetch("/custom/api/cpt_codes.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",id:z.id,is_active:z.is_active?0:1})}),D=await H.json();if(!H.ok||!D.success)throw new Error(D.error||"Failed to update status");await $()}catch(H){p(H.message)}},xe=n.filter(z=>{const H=z.code.toLowerCase().includes(m.toLowerCase())||z.description.toLowerCase().includes(m.toLowerCase()),D=b==="all"||z.category===b;return H&&D}).sort((z,H)=>{const D=z.code.toString(),S=H.code.toString();return D.localeCompare(S,void 0,{numeric:!0})}),q=[...new Set(n.map(z=>z.category))];return d?e.jsx("div",{className:"glass-card p-8",children:e.jsx("div",{className:"text-center text-gray-600",children:"Loading CPT codes..."})}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"CPT Codes"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage billing codes for clinical services"})]}),e.jsx(yt,{onClick:le,children:"+ Add CPT Code"})]}),u&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:u}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search codes or descriptions...",value:m,onChange:z=>f(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsxs("select",{value:b,onChange:z=>v(z.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Categories"}),q.map(z=>e.jsx("option",{value:z,children:z},z))]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Code"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Duration"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Fee"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:xe.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:"No CPT codes found"})}):xe.map(z=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-4 py-3 text-sm font-mono font-semibold text-gray-900",children:[z.code,z.is_addon===1&&e.jsx("span",{className:"ml-2 text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded",children:"Add-on"})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:z.category}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:z.description}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700 text-center",children:[z.standard_duration_minutes," min"]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-right font-medium",children:z.standard_fee?`$${parseFloat(z.standard_fee).toFixed(2)}`:""}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>he(z),className:`px-3 py-1 text-xs rounded-full ${z.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:z.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-4 py-3 text-center",children:[e.jsx("button",{onClick:()=>V(z),className:"text-blue-600 hover:text-blue-800 mr-3",children:"Edit"}),e.jsx("button",{onClick:()=>ge(z.id),className:"text-red-600 hover:text-red-800",children:"Delete"})]})]},z.id))})]})}),(j||y)&&Rt.createPortal(e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container modal-md",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:N.id?"Edit CPT Code":"Add CPT Code"}),e.jsx("button",{onClick:()=>{x(!1),C(!1)},className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"modal-body space-y-4",children:[A&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:A}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(se,{children:["CPT Code ",e.jsx(ze,{})]}),e.jsx("input",{type:"text",value:N.code,onChange:z=>_({...N,code:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"90834"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Category"}),e.jsx("select",{value:N.category,onChange:z=>_({...N,category:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:I.map(z=>e.jsx("option",{value:z,children:z},z))})]})]}),e.jsxs("div",{children:[e.jsxs(se,{children:["Description ",e.jsx(ze,{})]}),e.jsx("input",{type:"text",value:N.description,onChange:z=>_({...N,description:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Psychotherapy 45-50 minutes"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(se,{children:"Standard Duration (minutes)"}),e.jsx("input",{type:"number",value:N.standard_duration_minutes,onChange:z=>_({...N,standard_duration_minutes:parseInt(z.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Standard Fee ($)"}),e.jsx("input",{type:"number",step:"0.01",value:N.standard_fee,onChange:z=>_({...N,standard_fee:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"150.00"})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:N.is_addon===1,onChange:z=>_({...N,is_addon:z.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Add-on Code"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:N.is_active===1,onChange:z=>_({...N,is_active:z.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Active"})]})]}),N.is_addon===1&&e.jsxs("div",{children:[e.jsx(se,{children:"Requires Primary Code"}),e.jsx("input",{type:"text",value:N.requires_primary_code,onChange:z=>_({...N,requires_primary_code:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"90834"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Which primary CPT code is required for this add-on?"})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx(To,{onClick:()=>{x(!1),C(!1)},disabled:O,children:"Cancel"}),e.jsx(yt,{onClick:X,disabled:O,children:O?"Saving...":"Save CPT Code"})]})]})]})}),document.body)]})}function Nb(){const[n,c]=g.useState([]),[d,o]=g.useState(!0),[u,p]=g.useState(""),[m,f]=g.useState(""),[b,v]=g.useState("all"),[j,x]=g.useState(!1),[y,C]=g.useState(!1),[N,_]=g.useState({id:null,code:"",description:"",modifier_type:"clinician",is_active:1,sort_order:0}),[A,E]=g.useState(""),[O,Y]=g.useState(!1),I=[{value:"telehealth",label:"Telehealth"},{value:"clinician",label:"Clinician Type"},{value:"administrative",label:"Administrative"},{value:"mh-specific",label:"MH-Specific"}];g.useEffect(()=>{$()},[]);const $=async()=>{try{o(!0);const q=await fetch("/custom/api/billing_modifiers.php",{credentials:"include"});if(!q.ok)throw new Error("Failed to fetch billing modifiers");const z=await q.json();c(z.modifiers||[])}catch(q){p(q.message)}finally{o(!1)}},le=()=>{_({id:null,code:"",description:"",modifier_type:"clinician",is_active:1,sort_order:0}),E(""),x(!0)},V=q=>{_({id:q.id,code:q.code,description:q.description,modifier_type:q.modifier_type,is_active:q.is_active,sort_order:q.sort_order}),E(""),C(!0)},X=async()=>{if(E(""),!N.code.trim()){E("Modifier code is required");return}if(!N.description.trim()){E("Description is required");return}try{Y(!0);const q=N.id?"update":"create",z=await fetch("/custom/api/billing_modifiers.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:q,...N})}),H=await z.json();if(!z.ok||!H.success)throw new Error(H.error||"Failed to save modifier");await $(),x(!1),C(!1)}catch(q){E(q.message)}finally{Y(!1)}},ge=async q=>{if(confirm("Are you sure you want to delete this modifier? This cannot be undone."))try{const z=await fetch("/custom/api/billing_modifiers.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"delete",id:q})}),H=await z.json();if(!z.ok||!H.success)throw new Error(H.error||"Failed to delete modifier");await $()}catch(z){p(z.message)}},he=async q=>{try{const z=await fetch("/custom/api/billing_modifiers.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",id:q.id,is_active:q.is_active?0:1})}),H=await z.json();if(!z.ok||!H.success)throw new Error(H.error||"Failed to update status");await $()}catch(z){p(z.message)}},xe=n.filter(q=>{const z=q.code.toLowerCase().includes(m.toLowerCase())||q.description.toLowerCase().includes(m.toLowerCase()),H=b==="all"||q.modifier_type===b;return z&&H});return d?e.jsx("div",{className:"glass-card p-8",children:e.jsx("div",{className:"text-center text-gray-600",children:"Loading billing modifiers..."})}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Billing Modifiers"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage CPT code modifiers for billing"})]}),e.jsx(yt,{onClick:le,children:"+ Add Modifier"})]}),u&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:u}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search modifiers...",value:m,onChange:q=>f(q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsxs("select",{value:b,onChange:q=>v(q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Types"}),I.map(q=>e.jsx("option",{value:q.value,children:q.label},q.value))]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Code"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:xe.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-4 py-8 text-center text-gray-500",children:"No modifiers found"})}):xe.map(q=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-mono font-semibold text-gray-900",children:q.code}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${q.modifier_type==="telehealth"?"bg-blue-100 text-blue-700":q.modifier_type==="clinician"?"bg-green-100 text-green-700":q.modifier_type==="administrative"?"bg-purple-100 text-purple-700":"bg-orange-100 text-orange-700"}`,children:I.find(z=>z.value===q.modifier_type)?.label})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:q.description}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>he(q),className:`px-3 py-1 text-xs rounded-full ${q.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:q.is_active?"Active":"Inactive"})}),e.jsxs("td",{className:"px-4 py-3 text-center",children:[e.jsx("button",{onClick:()=>V(q),className:"text-blue-600 hover:text-blue-800 mr-3",children:"Edit"}),e.jsx("button",{onClick:()=>ge(q.id),className:"text-red-600 hover:text-red-800",children:"Delete"})]})]},q.id))})]})}),(j||y)&&Rt.createPortal(e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container max-w-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:N.id?"Edit Modifier":"Add Modifier"}),e.jsx("button",{onClick:()=>{x(!1),C(!1)},className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"modal-body space-y-4",children:[A&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:A}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(se,{children:["Modifier Code ",e.jsx(ze,{})]}),e.jsx("input",{type:"text",value:N.code,onChange:q=>_({...N,code:q.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"HO",maxLength:"10"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Type"}),e.jsx("select",{value:N.modifier_type,onChange:q=>_({...N,modifier_type:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:I.map(q=>e.jsx("option",{value:q.value,children:q.label},q.value))})]})]}),e.jsxs("div",{children:[e.jsxs(se,{children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:N.description,onChange:q=>_({...N,description:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Master's Level Therapist"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:N.is_active===1,onChange:q=>_({...N,is_active:q.target.checked?1:0}),className:"mr-2 checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Active"})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx(To,{onClick:()=>{x(!1),C(!1)},disabled:O,children:"Cancel"}),e.jsx(yt,{onClick:X,disabled:O,children:O?"Saving...":"Save Modifier"})]})]})]})}),document.body)]})}function wb(){return e.jsxs("div",{className:"glass-card p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"About SanctumEMHR EMHR"}),e.jsxs("div",{className:"flex items-center justify-between mb-8 pb-6 border-b border-white/30",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-48 h-48 backdrop-blur-xl bg-white/40 rounded-2xl flex items-center justify-center p-3 shadow-lg",children:e.jsx("img",{src:"/app/SanctumLogo.png",alt:"SanctumEMHR Logo",className:"w-full h-full object-contain"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:"SanctumEMHR"}),e.jsx("p",{className:"text-lg text-gray-700 mt-1",children:"Electronic Mental Health Records"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2 italic",children:"Where modern design meets clinical insight"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-900 font-semibold",children:"Kenneth J. Nelan"}),e.jsx("p",{className:"text-gray-700 mt-1",children:"Sacred Wandering"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Version Information"}),e.jsxs("div",{className:"bg-white/40 backdrop-blur-sm rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Version:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:"0.3.0-alpha"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Release Stage:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:"Alpha Testing"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Build Date:"}),e.jsx("span",{className:"text-gray-900 font-semibold",children:new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]})]}),e.jsxs("div",{className:"bg-blue-50/60 backdrop-blur-sm rounded-lg p-6 border border-blue-200/50",children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-3",children:"What is EMHR?"}),e.jsx("div",{className:"mb-4 pb-4 border-b border-blue-200/30",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"SanctumEMHR is a purpose-built Electronic Mental Health Records (EMHR) system designed specifically for outpatient mental health practices. Combining modern design principles with specialized clinical functionality, SanctumEMHR streamlines client management, appointment scheduling, clinical documentation, and billing workflowsall within a beautiful, intuitive interface."})}),e.jsxs("p",{className:"text-gray-700 leading-relaxed mb-4",children:[e.jsx("strong",{className:"text-blue-900",children:"EMHR (Electronic Mental Health Records)"})," is a term we've introduced to distinguish mental health-specific documentation systems from general medical EMRs. While EMRs focus on physical health, EMHRs are purpose-built for the unique workflows, documentation requirements, and clinical needs of mental health and behavioral health practices."]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"SanctumEMHR represents a new generation of EMHR systems designed from the ground up for outpatient mental health providers, combining modern UX with specialized clinical functionality."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Current Features"}),e.jsx("div",{className:"bg-white/40 backdrop-blur-sm rounded-lg p-4",children:e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Client management with comprehensive demographics"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Calendar with day/week/month views"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Appointment creation and scheduling"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Insurance and billing information tracking"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Guardian/related persons management"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"Modern glassmorphism UI design"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-gray-700",children:"HIPAA-compliant security and encryption"})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3",children:"System Information"}),e.jsxs("div",{className:"bg-white/40 backdrop-blur-sm rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Frontend Framework:"}),e.jsx("span",{className:"text-gray-900",children:"React 18 + Vite"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Styling:"}),e.jsx("span",{className:"text-gray-900",children:"Tailwind CSS v4"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Authentication:"}),e.jsx("span",{className:"text-gray-900",children:"Session-based (PHP)"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Database:"}),e.jsx("span",{className:"text-gray-900",children:"MySQL/MariaDB"})]})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-blue-50/80 to-purple-50/80 backdrop-blur-sm rounded-lg p-6 border border-white/50",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 font-semibold text-lg",children:"SanctumEMHR is Copyright  2026 Sacred Wandering"}),e.jsx("p",{className:"text-gray-700 font-medium mt-1",children:"Proprietary and Confidential"})]}),e.jsxs("div",{className:"pt-3 border-t border-white/50",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"This software is licensed for authorized use only."}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Unauthorized copying, modification, distribution, or use is strictly prohibited."})]})]})})]})]})}function Sb(){const[n,c]=g.useState("calendar-settings"),[d,o]=g.useState({system:!0,clinical:!0,scheduling:!0,billing:!0,communications:!0,organization:!0}),u=[{id:"system",label:"System",icon:"",sections:[{id:"security",label:"Security",available:!0},{id:"appearance",label:"Appearance",available:!1},{id:"features",label:"Features",available:!1}]},{id:"clinical",label:"Documentation",icon:"",sections:[{id:"reference-lists",label:"Reference Lists",available:!0},{id:"document-categories",label:"Document Categories",available:!0}]},{id:"scheduling",label:"Calendar",icon:"",sections:[{id:"calendar-settings",label:"Calendar Settings",available:!0},{id:"calendar-categories",label:"Calendar Categories",available:!0}]},{id:"billing",label:"Billing",icon:"",sections:[{id:"cpt-codes",label:"CPT Codes",available:!0},{id:"billing-modifiers",label:"Billing Modifiers",available:!0},{id:"billing-settings",label:"Billing Settings",available:!1},{id:"payment-methods",label:"Payment Methods",available:!1}]},{id:"communications",label:"Communications",icon:"",sections:[{id:"sms-settings",label:"SMS Settings",available:!1},{id:"email-settings",label:"Email Settings",available:!1}]},{id:"organization",label:"Organization",icon:"",sections:[{id:"facilities",label:"Facilities",available:!0},{id:"users",label:"Users",available:!0}]}],p=m=>{o(f=>({...f,[m]:!f[m]}))};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"glass-card p-6 mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Settings"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage system configuration and preferences"})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-72 flex-shrink-0",children:e.jsx("div",{className:"glass-card p-4",children:e.jsxs("nav",{className:"space-y-1",children:[u.map(m=>e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>p(m.id),className:"w-full flex items-center justify-between px-3 py-2 text-label text-sm hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:m.icon}),e.jsx("span",{children:m.label})]}),e.jsx("svg",{className:`w-4 h-4 transition-transform ${d[m.id]?"":"rotate-90"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),!d[m.id]&&e.jsx("div",{className:"ml-4 mt-1 space-y-1",children:m.sections.map(f=>e.jsxs("button",{onClick:()=>f.available&&c(f.id),disabled:!f.available,className:`w-full text-left px-4 py-2 rounded-lg transition-colors text-sm ${n===f.id?"bg-blue-600 text-white font-medium":f.available?"hover:bg-gray-100 text-gray-700":"text-gray-400 cursor-not-allowed"}`,children:[f.label,!f.available&&e.jsx("span",{className:"text-xs ml-2",children:"(Soon)"})]},f.id))})]},m.id)),e.jsx("div",{className:"border-t border-gray-200 my-2"}),e.jsxs("button",{onClick:()=>c("about"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors text-sm flex items-center gap-2 ${n==="about"?"bg-blue-600 text-white font-medium":"hover:bg-gray-100 text-gray-700"}`,children:[e.jsx("span",{children:""}),e.jsx("span",{children:"About"})]})]})})}),e.jsxs("div",{className:"flex-1",children:[n==="security"&&e.jsx(yb,{}),n==="calendar-settings"&&e.jsx(ub,{}),n==="calendar-categories"&&e.jsx(mb,{}),n==="reference-lists"&&e.jsx(xb,{}),n==="document-categories"&&e.jsx(hb,{}),n==="cpt-codes"&&e.jsx(jb,{}),n==="billing-modifiers"&&e.jsx(Nb,{}),n==="facilities"&&e.jsx(bb,{}),n==="users"&&e.jsx(gb,{}),n==="about"&&e.jsx(wb,{}),!["security","calendar-settings","calendar-categories","reference-lists","document-categories","cpt-codes","billing-modifiers","facilities","users","about"].includes(n)&&e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx("div",{className:"text-gray-700 text-lg font-semibold",children:u.flatMap(m=>m.sections).find(m=>m.id===n)?.label}),e.jsx("p",{className:"text-gray-600 mt-2",children:"This section is coming soon"})]})]})]})]})}function Mo(){const n=is(),[c,d]=g.useState(null),[o,u]=g.useState([]),[p,m]=g.useState(!0);return g.useEffect(()=>{async function f(){try{const b=$i();if(!b){n("/");return}let v=b.fullName||b.username||"User",j=v.substring(0,2).toUpperCase(),x=b.admin||!1,y=b.id;try{const C=await B0();if(C){C.fullName&&(v=C.fullName),C.admin!==void 0&&(x=C.admin),C.id&&(y=C.id);const N=v.trim().split(/\s+/);N.length>1?j=(N[0][0]+N[N.length-1][0]).toUpperCase():j=v.substring(0,2).toUpperCase()}}catch(C){console.log("Could not verify session, using cached data:",C),n("/");return}d({id:y,name:v,initials:j,role:x?"admin":"user",permissions:x?["admin"]:[],unreadMessages:0});try{const C=new Date,N=C.getFullYear(),_=String(C.getMonth()+1).padStart(2,"0"),A=String(C.getDate()).padStart(2,"0"),E=`${N}-${_}-${A}`,O=await Ao(E,E);u(O.appointments||[])}catch(C){console.error("Failed to load today's appointments:",C),u([])}m(!1)}catch(b){console.error("Error loading dashboard data:",b),n("/")}}f()},[n]),{user:c,appointments:o,loading:p}}function Qi({children:n,className:c=""}){return e.jsx("div",{className:`p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm ${c}`,children:n})}function _b({isOpen:n,onClose:c,onSave:d,initialDate:o,initialTime:u,categories:p,block:m}){const{user:f}=Mo(),[b,v]=g.useState(!1),[j,x]=g.useState(null),[y,C]=g.useState(null),[N,_]=g.useState(null),[A,E]=g.useState(""),[O,Y]=g.useState(o||new Date().toISOString().split("T")[0]),[I,$]=g.useState(u||"09:00"),[le,V]=g.useState(""),[X,ge]=g.useState(50),[he,xe]=g.useState(""),[q,z]=g.useState(!1),[H,D]=g.useState({mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1}),[S,k]=g.useState("1"),[U,ie]=g.useState("count"),[be,T]=g.useState(10),[L,W]=g.useState(""),[F,fe]=g.useState(!1),[P,ue]=g.useState("single"),[Ce,ee]=g.useState(null),M=[30,50,90,240,480];g.useEffect(()=>{o&&Y(o),u&&$(u)},[o,u]),g.useEffect(()=>{m&&n&&(E(m.categoryId||""),Y(m.eventDate||""),$(m.startTime?m.startTime.substring(0,5):""),ge(m.duration||50),xe(m.comments||""),m.isRecurring&&m.recurrenceId?(fe(!0),ee(m.recurrenceId),ue("single")):(fe(!1),ee(null)))},[m,n]),g.useEffect(()=>{p&&p.length>0&&!A&&(E(p[0].id),p[0].defaultDuration>0&&ge(p[0].defaultDuration/60))},[p]),g.useEffect(()=>{if(I&&le){const[te,Se]=I.split(":").map(Number),[Ee,Fe]=le.split(":").map(Number),Ze=te*60+Se,wt=Ee*60+Fe-Ze;wt>0&&ge(wt)}},[I,le]);const de=async(te,Se=!1)=>{if(te.preventDefault(),v(!0),x(null),C(null),_(null),!A){x("Please select a block type"),v(!1);return}if(q){if(Object.values(H).filter(Boolean).length===0){x("Please select at least one day for recurrence"),v(!1);return}if(U==="date"&&!L){x("Please select an end date for recurrence"),v(!1);return}if(U==="count"&&(!be||be<1)){x("Please enter a valid number of occurrences"),v(!1);return}}try{const Ee=I.includes(":")?`${I}:00`:`${I}:00:00`,Fe={patientId:0,providerId:f.id,categoryId:parseInt(A),eventDate:O,startTime:Ee,duration:parseInt(X),title:p.find(nt=>nt.id===parseInt(A))?.name||"Blocked",comments:he,room:"",apptstatus:m?m.apptstatus:"-",overrideAvailability:Se};F&&(Fe.seriesUpdate={scope:P,recurrenceId:Ce}),q&&!m&&(Fe.recurrence={enabled:!0,days:H,interval:parseInt(S),endType:U,endCount:U==="count"?parseInt(be):null,endDate:U==="date"?L:null}),console.log(m?"Updating availability block:":"Creating availability block:",Fe);const Ze=m?await bf(m.id,Fe):await pf(Fe);Ze.success?(C(m?"Block updated successfully!":"Time blocked successfully!"),setTimeout(()=>{oe()},1e3)):x(Ze.message||`Failed to ${m?"update":"create"} block`)}catch(Ee){console.error(`Failed to ${m?"update":"create"} block:`,Ee),Ee.conflicts?_({conflicts:Ee.conflicts,totalOccurrences:Ee.totalOccurrences,conflictCount:Ee.conflictCount}):x(Ee.message||`Failed to ${m?"update":"create"} block`)}finally{v(!1)}},me=()=>{_(null),de({preventDefault:()=>{}},!0)},ve=async()=>{if(!m)return;let te="Are you sure you want to delete this availability block?";if(F&&(P==="all"?te="Are you sure you want to delete ALL occurrences in this recurring series?":P==="future"&&(te="Are you sure you want to delete this and all future occurrences?")),!!confirm(te)){v(!0),x(null),C(null);try{const Se=F?{scope:P,recurrenceId:Ce}:null,Ee=await vf(m.id,Se);if(Ee.success){const Fe=F&&P!=="single"?`${Ee.deletedCount||"Multiple"} block(s) deleted successfully!`:"Block deleted successfully!";C(Fe),setTimeout(()=>{oe()},1e3)}else x(Ee.message||"Failed to delete block")}catch(Se){console.error("Failed to delete block:",Se),x(Se.message||"Failed to delete block")}finally{v(!1)}}},oe=()=>{E(""),xe(""),x(null),C(null),_(null),z(!1),D({mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1}),k("1"),ie("count"),T(10),W(""),fe(!1),ue("single"),ee(null),c(),d&&d()};return n?Rt.createPortal(e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/60 backdrop-blur-md transition-opacity",onClick:oe,"aria-hidden":"true"}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-y-auto",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",maxWidth:"48rem",maxHeight:"90vh",zIndex:10},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-200 px-8 pt-6 bg-gradient-to-r from-purple-50 to-pink-50",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:m?"Edit Availability Block":"Block Time"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m?"Update or remove this availability block":"Mark yourself as unavailable during this time"})]}),e.jsx("button",{onClick:oe,className:"p-2 hover:bg-white/80 rounded-xl transition-all hover:scale-110",disabled:b,children:e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"px-8 pb-8",children:[N&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-700 font-bold mb-2",children:"Scheduling Conflicts Detected"}),e.jsxs("p",{className:"text-red-600 text-sm mb-3",children:[N.conflictCount," of ",N.totalOccurrences," recurring blocks have conflicts:"]}),e.jsx("div",{className:"max-h-48 overflow-y-auto mb-4 space-y-2",children:N.conflicts.map((te,Se)=>e.jsxs("div",{className:"bg-white border border-red-200 rounded p-2 text-sm",children:[e.jsxs("div",{className:"font-medium text-red-700",children:[new Date(te.date).toLocaleDateString()," at ",te.time]}),e.jsx("div",{className:"text-red-600",children:te.reason})]},Se))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:me,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors",children:"Create Anyway (Skip Conflicts)"}),e.jsx("button",{type:"button",onClick:()=>_(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-medium rounded-lg transition-colors",children:"Cancel"})]})]})]})}),j&&e.jsxs(Qi,{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("span",{children:j})]}),y&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 border-l-4 border-green-500 rounded-lg text-green-700 flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{children:y})]}),F&&e.jsx("div",{className:"mb-6 p-4 bg-purple-50 border-l-4 border-purple-500 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 mt-0.5 flex-shrink-0 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-purple-700 font-medium mb-2",children:"Recurring Availability Block Series"}),e.jsx("p",{className:"text-purple-600 text-sm mb-3",children:"This block is part of a recurring series. Choose what to update:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"seriesScope",value:"single",checked:P==="single",onChange:te=>ue(te.target.value),className:"text-purple-600 focus:ring-purple-500"}),e.jsxs("span",{className:"text-sm text-purple-700",children:["Just this occurrence (",new Date(O).toLocaleDateString(),")"]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"seriesScope",value:"future",checked:P==="future",onChange:te=>ue(te.target.value),className:"text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-purple-700",children:"This and all future occurrences"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"seriesScope",value:"all",checked:P==="all",onChange:te=>ue(te.target.value),className:"text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-purple-700",children:"All occurrences in the series"})]})]})]})]})}),e.jsxs("form",{onSubmit:de,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(se,{children:["Reason ",e.jsx(ze,{})]}),e.jsxs("select",{value:A,onChange:te=>E(te.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Reason"}),p.map(te=>e.jsx("option",{value:te.id,children:te.name},te.id))]})]}),e.jsxs("div",{children:[e.jsxs(se,{children:["Date ",e.jsx(ze,{})]}),e.jsx("input",{type:"date",value:O,onChange:te=>Y(te.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(se,{children:["Start Time ",e.jsx(ze,{})]}),e.jsx("input",{type:"time",value:I,onChange:te=>$(te.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx(se,{children:"End Time"}),e.jsx("input",{type:"time",value:le,onChange:te=>V(te.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white"})]})]}),e.jsxs("div",{children:[e.jsxs(se,{children:["Duration (minutes) ",e.jsx(ze,{})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3 items-center",children:[M.map(te=>e.jsx("button",{type:"button",onClick:()=>ge(te),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${X===te?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:te>=60?`${te/60}h`:`${te}m`},te)),e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(12-hours = 720 minutes)"})]}),e.jsx("input",{type:"number",value:X,onChange:te=>ge(te.target.value),min:"5",step:"5",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",required:!0})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[e.jsx("input",{type:"checkbox",checked:q,onChange:te=>z(te.target.checked),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),"Make this recurring"]})}),q&&e.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-purple-200",children:[e.jsxs("div",{children:[e.jsxs(se,{children:["Repeat on ",e.jsx(ze,{})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"sun",label:"Sun"},{key:"mon",label:"Mon"},{key:"tue",label:"Tue"},{key:"wed",label:"Wed"},{key:"thu",label:"Thu"},{key:"fri",label:"Fri"},{key:"sat",label:"Sat"}].map(te=>e.jsx("button",{type:"button",onClick:()=>D(Se=>({...Se,[te.key]:!Se[te.key]})),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${H[te.key]?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:te.label},te.key))})]}),e.jsxs("div",{children:[e.jsxs(se,{children:["Frequency ",e.jsx(ze,{})]}),e.jsxs("select",{value:S,onChange:te=>k(te.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white",children:[e.jsx("option",{value:"1",children:"Weekly"}),e.jsx("option",{value:"2",children:"Every 2 weeks"}),e.jsx("option",{value:"3",children:"Every 3 weeks"}),e.jsx("option",{value:"4",children:"Every 4 weeks"})]})]}),e.jsxs("div",{children:[e.jsxs(se,{children:["Ends ",e.jsx(ze,{})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:U==="count",onChange:()=>ie("count"),className:"text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"checkbox-label",children:"After"}),e.jsx("input",{type:"number",value:be,onChange:te=>T(parseInt(te.target.value)||1),disabled:U!=="count",min:"1",max:"52",className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm disabled:bg-gray-100 focus:ring-2 focus:ring-purple-500"}),e.jsx("span",{className:"checkbox-label",children:"occurrences"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"radio",checked:U==="date",onChange:()=>ie("date"),className:"text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"checkbox-label",children:"On"}),e.jsx("input",{type:"date",value:L,onChange:te=>W(te.target.value),disabled:U!=="date",className:"px-2 py-1 border border-gray-300 rounded text-sm disabled:bg-gray-100 focus:ring-2 focus:ring-purple-500"})]})]})]})]})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Notes (Optional)"}),e.jsx("textarea",{value:he,onChange:te=>xe(te.target.value),rows:3,placeholder:"Add any notes about this blocked time...",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white"})]}),e.jsxs("div",{className:"flex gap-4 pt-6 mt-6 border-t border-gray-200",children:[m&&e.jsx("button",{type:"button",onClick:ve,className:"px-6 py-3 bg-red-100 hover:bg-red-200 text-red-700 font-semibold rounded-xl transition-all hover:shadow-md",disabled:b,children:"Delete"}),e.jsx("button",{type:"button",onClick:oe,className:"flex-1 px-6 py-3 bg-gray-100 hover:bg-gray-200 text-label rounded-xl transition-all hover:shadow-md",disabled:b,children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold rounded-xl transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",disabled:b,children:b?m?"Updating...":"Blocking...":m?"Update Block":"Block Time"})]})]})]})]})]}),document.body):null}function Cb(){const[n,c]=g.useState(new Date),[d,o]=g.useState("week"),[u,p]=g.useState([]),[m,f]=g.useState([]),[b,v]=g.useState(!0),[j,x]=g.useState(!1),[y,C]=g.useState(null),[N,_]=g.useState(null);g.useEffect(()=>{A()},[]),g.useEffect(()=>{E()},[n,d]);const A=async()=>{try{const H=await gf(1);f(H.categories||[])}catch(H){console.error("Failed to load availability categories:",H)}},E=async()=>{v(!0);try{const H=$i();if(console.log("[CalendarAvailability] Current user:",H),!H||!H.id){console.error("No current user found"),p([]),v(!1);return}const{startDate:D,endDate:S}=O();console.log("[CalendarAvailability] Date range:",{startDate:D,endDate:S}),console.log("[CalendarAvailability] Fetching for provider ID:",H.id);const k=await Ao(D,S,"all");console.log("[CalendarAvailability] API response:",k),console.log("[CalendarAvailability] Total appointments:",k.appointments?.length);const U=k.appointments.filter(ie=>{const be=ie.categoryType===1,T=ie.providerId==H.id;return console.log("[CalendarAvailability] Checking appointment:",{id:ie.id,categoryType:ie.categoryType,providerId:ie.providerId,currentUserId:H.id,isAvailabilityBlock:be,isCurrentProvider:T}),be&&T});console.log("[CalendarAvailability] Filtered blocks:",U),p(U)}catch(H){console.error("Failed to load availability blocks:",H)}finally{v(!1)}},O=()=>{const H=new Date(n),D=new Date(n);if(d==="week"){const S=H.getDay(),k=H.getDate()-S;H.setDate(k),H.setHours(0,0,0,0),D.setDate(H.getDate()+6),D.setHours(23,59,59,999)}else d==="day"&&(H.setHours(0,0,0,0),D.setHours(23,59,59,999));return{startDate:H.toISOString().split("T")[0],endDate:D.toISOString().split("T")[0]}},Y=()=>{const H=new Date(n),D=H.getDay(),S=H.getDate()-D;return H.setDate(S),H.setHours(0,0,0,0),Array.from({length:7},(k,U)=>new Date(H.getTime()+U*24*60*60*1e3))},I=(H,D,S)=>{const k=H.toISOString().split("T")[0],U=`${D.toString().padStart(2,"0")}:${S.toString().padStart(2,"0")}`;_(null),C({date:k,time:U}),x(!0)},$=(H,D)=>{D.stopPropagation(),_(H),C(null),x(!0)},le=()=>{x(!1),_(null),E()},V=()=>{const H=new Date(n);d==="week"?H.setDate(H.getDate()-7):H.setDate(H.getDate()-1),c(H)},X=()=>{const H=new Date(n);d==="week"?H.setDate(H.getDate()+7):H.setDate(H.getDate()+1),c(H)},ge=()=>{c(new Date)},he=()=>{if(d==="week"){const H=Y(),D=H[0],S=H[6];return`${D.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${S.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}else return n.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})},xe=Array.from({length:40},(H,D)=>{const S=Math.floor(D/4)+8,k=D%4*15;return{hour:S,minutes:k}}),q=H=>{const[D,S]=H.startTime.split(":").map(Number),be=(D*60+S-480)/15,T=60,L=be*T,fe=(H.duration||0)/15*T;return{top:L,height:fe}},z=H=>{const D=H.toISOString().split("T")[0];return u.filter(S=>S.eventDate===D)};return e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Manage My Availability"}),e.jsx("p",{className:"text-gray-600",children:"Block time for vacation, meetings, lunch breaks, and other unavailable periods"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:V,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:X,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsx("button",{onClick:ge,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Today"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:he()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>o("day"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${d==="day"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Day"}),e.jsx("button",{onClick:()=>o("week"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${d==="week"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Week"})]})]}),b?e.jsx("div",{className:"text-center py-12 text-gray-600",children:"Loading..."}):e.jsx("div",{className:"bg-white rounded-lg overflow-hidden border border-gray-200",children:d==="week"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsx("div",{className:"w-20 p-4 bg-gray-50 border-r border-gray-200 font-semibold text-gray-700 flex-shrink-0",children:"Time"}),Y().map((H,D)=>{const S=H.toDateString()===new Date().toDateString();return e.jsxs("div",{className:`flex-1 p-4 border-r border-gray-200 text-center ${S?"bg-blue-50":"bg-gray-50"}`,children:[e.jsx("div",{className:"text-sm text-gray-600",children:H.toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("div",{className:`text-lg font-semibold ${S?"text-blue-600":"text-gray-900"}`,children:H.getDate()})]},D)})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-20 flex-shrink-0 border-r border-gray-200 bg-gray-50",children:xe.map(H=>e.jsxs("div",{className:"h-[60px] p-3 border-b border-gray-200 text-sm text-gray-700 font-medium",children:[H.hour===0?"12":H.hour<12?H.hour:H.hour===12?"12":H.hour-12,":",H.minutes.toString().padStart(2,"0")," ",H.hour<12?"AM":"PM"]},`time-${H.hour}-${H.minutes}`))}),e.jsx("div",{className:"flex-1 flex",children:Y().map((H,D)=>{const S=z(H),k=xe.length*60;return e.jsxs("div",{className:"flex-1 border-r border-gray-200 relative",style:{height:`${k}px`},children:[xe.map(U=>e.jsx("div",{onClick:()=>I(H,U.hour,U.minutes),className:"absolute w-full h-[60px] border-b border-gray-200 hover:bg-blue-50 cursor-pointer transition-colors",style:{top:`${xe.findIndex(ie=>ie.hour===U.hour&&ie.minutes===U.minutes)*60}px`}},`slot-${U.hour}-${U.minutes}`)),S.map(U=>{const{top:ie,height:be}=q(U),T=U.categoryColor||"#E5E7EB",L=U.categoryColor?`${U.categoryColor}80`:"#9CA3AF80";return e.jsxs("div",{onClick:W=>$(U,W),className:"absolute left-1 right-1 px-2 py-1 rounded-lg text-xs border hover:opacity-80 hover:shadow-md transition-all cursor-pointer z-10 overflow-hidden",style:{top:`${ie}px`,height:`${be}px`,backgroundColor:`${T}B3`,borderColor:L},children:[e.jsx("div",{className:"font-semibold text-gray-900",children:U.categoryName}),be>30&&U.comments&&e.jsx("div",{className:"text-gray-700 text-[10px] truncate",children:U.comments})]},U.id)})]},D)})})]})]})}),e.jsx(_b,{isOpen:j,onClose:()=>x(!1),onSave:le,initialDate:y?.date,initialTime:y?.time,categories:m,block:N})]})}function Eb(){const[n,c]=g.useState("availability"),d=[{id:"profile",label:"My Profile",available:!1},{id:"preferences",label:"Preferences",available:!1},{id:"calendar-settings",label:"Calendar Settings",available:!1},{id:"availability",label:"Calendar Availability",available:!0},{id:"notifications",label:"Notifications",available:!1}];return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"glass-card p-6 mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Settings"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your personal preferences and availability"})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-64 flex-shrink-0",children:e.jsx("div",{className:"glass-card p-4",children:e.jsx("nav",{className:"space-y-1",children:d.map(o=>e.jsxs("button",{onClick:()=>o.available&&c(o.id),disabled:!o.available,className:`w-full text-left px-4 py-2 rounded-lg transition-colors ${n===o.id?"bg-blue-600 text-white font-medium":o.available?"hover:bg-gray-100 text-gray-700":"text-gray-400 cursor-not-allowed"}`,children:[o.label,!o.available&&e.jsx("span",{className:"text-xs ml-2",children:"(Coming Soon)"})]},o.id))})})}),e.jsxs("div",{className:"flex-1",children:[n==="availability"&&e.jsx(Cb,{}),n!=="availability"&&e.jsxs("div",{className:"glass-card p-12 text-center",children:[e.jsx("div",{className:"text-gray-700 text-lg font-semibold",children:d.find(o=>o.id===n)?.label}),e.jsx("p",{className:"text-gray-600 mt-2",children:"This section is coming soon"})]})]})]})]})}function kb(){const n=Ra(),c=is(),[d,o]=g.useState("dashboard"),{user:u,appointments:p,loading:m}=Mo(),[f,b]=g.useState({activeClients:0}),[v,j]=g.useState(!1),[x,y]=g.useState(!1),[C,N]=g.useState(null),[_,A]=g.useState([]);g.useEffect(()=>{n.state?.activeNav&&o(n.state.activeNav)},[n.state]),g.useEffect(()=>{const xe=async()=>{try{const z=await df();b(z)}catch(z){console.error("Failed to fetch client stats:",z)}},q=async()=>{try{const z=await Do();A(z.providers||[])}catch(z){console.error("Failed to fetch providers:",z)}};u&&(xe(),q())},[u]);const E={todayAppointments:{value:p.filter(xe=>xe.categoryType!==1).length||0,trend:{direction:"up",change:0,label:"from yesterday"}},unbilledAppointments:{value:0,trend:{direction:"up",change:0,label:"from last week"}},sessionsYTD:{value:0,trend:{direction:"up",change:0,label:"from last month"}},activeClients:{value:f.activeClients||0,trend:{direction:"down",change:0,label:"from last month"}}},O=p.filter(xe=>xe.categoryType!==1).map(xe=>({...xe,time:new Date(xe.eventDate+" "+xe.startTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),client:xe.patientName||"Unknown",type:xe.categoryName||"Appointment",duration:xe.duration?`${xe.duration} min`:"",room:xe.room||"",isNext:!1})),Y=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),I=async()=>{await yf()},$=()=>{j(!0)},le=xe=>{console.log("New client created with ID:",xe),j(!1),c(`/clients/${xe}`)},V=()=>{N(null),y(!0)},X=xe=>{N(xe),y(!0)},ge=()=>{console.log("Appointment saved"),N(null),y(!1),window.location.reload()},he=()=>{N(null),y(!1)};return m||!u?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-mental",children:e.jsxs("div",{className:"rounded-3xl p-8",style:{backdropFilter:"blur(60px) saturate(180%)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0.4) 100%)",boxShadow:"0 8px 32px rgba(107, 154, 196, 0.12), 0 2px 8px rgba(0, 0, 0, 0.06), inset 0 1px 0 rgba(255, 255, 255, 0.8)",border:"1px solid rgba(255, 255, 255, 0.6)"},children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 mx-auto",style:{border:"3px solid rgba(107, 154, 196, 0.3)",borderTopColor:"rgba(107, 154, 196, 0.9)"}}),e.jsx("p",{className:"text-label mt-4 text-center",children:"Loading dashboard..."})]})}):e.jsxs(cf,{user:u,activeNav:d,setActiveNav:o,today:Y,onLogout:I,wide:d==="calendar",children:[d==="dashboard"&&e.jsxs(e.Fragment,{children:[e.jsx(z0,{}),e.jsx(O0,{stats:E}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(L0,{onNewClient:$,onNewAppointment:V}),e.jsx(U0,{todaysAppointments:O,onAppointmentClick:X})]})]}),d==="clients"&&e.jsx(rb,{}),d==="calendar"&&e.jsx(db,{}),d==="reports"&&e.jsx(cb,{}),d==="admin"&&e.jsx(Sb,{}),d==="settings"&&e.jsx(Eb,{}),d!=="dashboard"&&d!=="clients"&&d!=="calendar"&&d!=="reports"&&d!=="admin"&&d!=="settings"&&e.jsxs("div",{className:"backdrop-blur-2xl bg-white/40 rounded-3xl shadow-2xl border border-white/50 p-8 text-center",children:[e.jsxs("p",{className:"text-gray-700 text-lg font-semibold",children:[d.charAt(0).toUpperCase()+d.slice(1)," - Coming Soon"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"This feature is under development"})]}),v&&e.jsx(jf,{onClose:()=>j(!1),onClientCreated:le}),e.jsx(Nf,{isOpen:x,onClose:he,onSave:ge,appointment:C,providers:_})]})}function Db({client:n}){const c=is();if(!n)return null;const d=f=>{if(!f)return"bg-gray-500 text-white";const b=f.toLowerCase();return b==="active"?"bg-green-500 text-white":b==="inactive"?"bg-yellow-500 text-white":"bg-gray-500 text-white"},o=f=>f?f.charAt(0).toUpperCase()+f.slice(1).toLowerCase():"Unknown",u=f=>f?`${f} years old`:"",p=f=>f?new Date(f).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",m=f=>f?new Date(f).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"";return e.jsx("div",{className:"card-main mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>c("/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-white/60 hover:bg-white/80 text-gray-700 rounded-lg transition-colors font-medium border border-gray-200",title:"Back to Dashboard",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),e.jsx("span",{children:"Back"})]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:[n.fname," ",n.mname&&n.mname+" ",n.lname]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-gray-600",children:[e.jsx("span",{children:u(n.age)}),e.jsx("span",{children:""}),e.jsxs("span",{children:["DOB: ",p(n.DOB)]}),e.jsx("span",{children:""}),e.jsxs("span",{children:["ID: ",n.pid]}),n.client_since&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["Client Since: ",m(n.client_since)]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[n.protection_indicator_code==="YES"&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("span",{className:"text-sm font-semibold text-red-800",children:"Risk Factors Documented"})]}),e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-medium ${d(n.care_team_status)}`,children:o(n.care_team_status)})]})]})})}function Ab({activeTab:n,onTabChange:c}){const d=[{id:"summary",label:"Summary"},{id:"demographics",label:"Demographics"},{id:"insurance",label:"Insurance"},{id:"encounters",label:"Sessions"},{id:"clinical",label:"Clinical Notes"},{id:"documents",label:"Documents"},{id:"billing",label:"Billing"},{id:"admin",label:"Admin Notes"}];return e.jsx("div",{className:"tab-nav mb-6",children:e.jsx("div",{className:"flex gap-2",children:d.map(o=>e.jsx("button",{onClick:()=>c(o.id),className:n===o.id?"nav-tab-active":"nav-tab-inactive",children:o.label},o.id))})})}function Tb({data:n}){if(!n)return e.jsx("div",{className:"text-gray-700 text-center py-8",children:"Loading client data..."});const{patient:c,upcomingAppointments:d,recentAppointments:o,problems:u,medications:p,encounters:m}=n,f=j=>j?new Date(j).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",b=j=>{if(!j)return"";const[x,y]=j.split(":"),C=parseInt(x),N=C>=12?"PM":"AM";return`${C%12||12}:${y} ${N}`},v=j=>{if(!j)return"";const x=j.split(/\s{3,}/);return x.length>1?x[1].trim():j.trim()};return e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Contact Information"}),e.jsx("div",{className:"bg-white/80 rounded-xl p-4 border border-gray-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"field-label",children:"Email:"}),e.jsx("div",{className:"field-value",children:c.email||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"field-label",children:"Cell Phone:"}),e.jsx("div",{className:"field-value",children:c.phone_cell||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"field-label",children:"Home Phone:"}),e.jsx("div",{className:"field-value",children:c.phone_home||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"field-label",children:"Address:"}),e.jsx("div",{className:"field-value",children:c.street&&c.city?e.jsxs(e.Fragment,{children:[c.street,e.jsx("br",{}),c.city,", ",c.state," ",c.postal_code]}):"Not provided"})]}),c.contact_relationship&&e.jsxs("div",{children:[e.jsx("span",{className:"field-label",children:"Emergency Contact:"}),e.jsx("div",{className:"field-value",children:c.contact_relationship})]})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:e.jsx("span",{className:"flex items-center gap-2",children:" Diagnosis"})}),u&&u.length>0?e.jsx("div",{className:"space-y-3",children:u.map(j=>e.jsx("div",{className:"card-inner border-l-4 border-blue-400",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-mono text-sm font-semibold text-blue-700 bg-blue-100 px-2 py-0.5 rounded",children:j.diagnosis}),j.enddate&&e.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:"Retired"})]}),e.jsx("div",{className:"item-title text-gray-800",children:v(j.title)}),e.jsxs("div",{className:"item-tertiary mt-1",children:["Started: ",f(j.begdate),j.enddate&&`  Ended: ${f(j.enddate)}`]})]})})},j.id))}):e.jsx("div",{className:"empty-state",children:"No active diagnoses recorded"})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:e.jsx("span",{className:"flex items-center gap-2",children:" Current Medications"})}),p&&p.length>0?e.jsx("div",{className:"space-y-3",children:p.map((j,x)=>e.jsxs("div",{className:"card-inner border-l-4 border-green-400",children:[e.jsx("div",{className:"item-title text-gray-900",children:j.name}),j.dosage&&e.jsxs("div",{className:"item-secondary text-green-700 font-semibold",children:[j.dosage,j.frequency&&` - ${j.frequency}`]}),j.purpose&&e.jsxs("div",{className:"item-tertiary",children:["For: ",j.purpose]}),j.prescriber&&e.jsxs("div",{className:"item-tertiary",children:["Prescribed by: ",j.prescriber]})]},x))}):e.jsx("div",{className:"empty-state",children:"No active medications"})]})]})]}),e.jsxs("div",{className:"w-80 flex-shrink-0 space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Appointments"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"section-header",children:"Upcoming"}),d&&d.length>0?e.jsx("div",{className:"space-y-3",children:d.map(j=>e.jsxs("div",{className:"card-inner",children:[e.jsx("div",{className:"appt-date",children:f(j.pc_eventDate)}),e.jsxs("div",{className:"appt-time",children:[b(j.pc_startTime)," - ",b(j.pc_endTime)]}),e.jsx("div",{className:"appt-type",children:j.pc_catname||"Appointment"})]},j.pc_eid))}):e.jsx("div",{className:"text-muted",children:"No upcoming appointments"})]}),e.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[e.jsx("h3",{className:"section-header",children:"Recurring"}),e.jsx("div",{className:"text-muted",children:"No recurring appointments"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"section-header",children:"Recent Past"}),o&&o.length>0?e.jsx("div",{className:"space-y-3",children:o.slice(0,6).map(j=>e.jsxs("div",{className:"card-inner",children:[e.jsx("div",{className:"appt-date",children:f(j.pc_eventDate)}),e.jsxs("div",{className:"appt-time",children:[b(j.pc_startTime)," - ",b(j.pc_endTime)]}),e.jsx("div",{className:"appt-type",children:j.pc_catname||"Appointment"})]},j.pc_eid))}):e.jsx("div",{className:"text-muted",children:"No recent appointments"})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Portal Access"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("p",{className:"alert-header text-gray-700",children:"Portal Status"}),e.jsx("p",{className:"text-caption text-gray-600",children:"Patient Portal Not Enabled. Admin Can Enable Patient Portal."})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("p",{className:"alert-header text-gray-700 mb-2",children:"Credentials"}),e.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"+ Create"})]})]})]})]})]})}function Mb(n=[]){const[c,d]=g.useState({}),[o,u]=g.useState(!0),[p,m]=g.useState(null);return g.useEffect(()=>{(async()=>{if(n.length===0){u(!1);return}try{u(!0),m(null);const b=n.map(async x=>{const y=await fetch(`/custom/api/reference_lists.php?type=${x}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!y.ok)throw new Error(`Failed to fetch ${x}`);const C=await y.json();return{type:x,items:C.items||[]}}),v=await Promise.all(b),j={};v.forEach(({type:x,items:y})=>{j[x]=y.filter(C=>C.active!==!1).map(C=>({value:C.id,label:C.name,description:C.description}))}),d(j)}catch(b){console.error("Error fetching reference lists:",b),m(b.message)}finally{u(!1)}})()},[JSON.stringify(n)]),{data:c,loading:o,error:p}}function Rb({data:n,onDataUpdate:c}){const[d,o]=g.useState(!1),[u,p]=g.useState({}),[m,f]=g.useState(!1),[b,v]=g.useState(null),[j,x]=g.useState({}),[y,C]=g.useState([]),[N,_]=g.useState(null),[A,E]=g.useState([]),[O,Y]=g.useState(!1),[I,$]=g.useState(null),{data:le,loading:V}=Mb(["sexual-orientation","gender-identity","marital-status","client-status","pronouns","ethnicity","insurance-type","referral-source"]);if(g.useEffect(()=>{!V&&le&&x({...j,sexual_orientation:le["sexual-orientation"]||[],gender_identity:le["gender-identity"]||[],marital_status:le["marital-status"]||[],status:le["client-status"]||[],pronouns:le.pronouns||[],ethnicity:le.ethnicity||[],insurance_type:le["insurance-type"]||[],referral_source:le["referral-source"]||[]})},[le,V]),g.useEffect(()=>{const U=async()=>{try{const[T,L,W,F,fe,P]=await Promise.all([da("sex"),da("yesno"),da("state"),da("Patient_Groupings"),da("Care_Team_Status"),da("payment_type")]);x(ue=>({...ue,sex:T.options||[],protect_indicator:L.options||[],state:W.options||[],patient_categories:F.options||[],care_team_status:fe.options||[],payment_type:P.options||[]}))}catch(T){console.error("Failed to load dropdown options:",T)}},ie=async()=>{try{const T=$i();_(T)}catch(T){console.error("Failed to load current user:",T)}},be=async()=>{try{const T=await Do();C(T.providers||[])}catch(T){console.error("Failed to load providers:",T)}};U(),ie(),be()},[]),g.useEffect(()=>{(async()=>{if(n&&n.patient&&n.patient.age<18)try{const ie=await go(n.patient.pid);E(ie.related_persons||[])}catch(ie){console.error("Failed to load guardians:",ie)}})()},[n]),!n)return e.jsx("div",{className:"empty-state",children:"Loading demographic data..."});const{patient:X}=n,ge=()=>{p({fname:X.fname||"",mname:X.mname||"",lname:X.lname||"",preferred_name:X.preferred_name||"",pronouns:X.pronouns||"",DOB:X.DOB||"",sex:X.sex||"",gender_identity:X.gender_identity||"",sexual_orientation:X.sexual_orientation||"",marital_status:X.marital_status||"",ethnicity:X.ethnicity||"",previous_names:X.previous_names||"",patient_categories:X.patient_categories||"",ss:X.ss||"",street:X.street||"",street_line_2:X.street_line_2||"",city:X.city||"",state:X.state||"",postal_code:X.postal_code||"",county:X.county||"",contact_relationship:X.contact_relationship||"",phone_contact:X.phone_contact||"",phone_home:X.phone_home||"",phone_cell:X.phone_cell||"",phone_biz:X.phone_biz||"",email:X.email||"",email_direct:X.email_direct||"",protect_indicator:X.protection_indicator_code||"",status:X.status||"active",payment_type:X.payment_type||"insurance",custom_session_fee:X.custom_session_fee||"",provider_id:X.provider_id||"",referring_provider_id:X.referring_provider_id||"",allow_patient_portal:X.allow_patient_portal||"",cmsportal_login:X.cmsportal_login||"",hipaa_notice:X.hipaa_notice||"NO",hipaa_allowsms:X.hipaa_allowsms||"NO",hipaa_voice:X.hipaa_voice||"NO",hipaa_mail:X.hipaa_mail||"NO",hipaa_email:X.hipaa_email||"NO"}),o(!0),v(null)},he=()=>{o(!1),p({}),v(null)},xe=(U,ie)=>{p(be=>({...be,[U]:ie}))},q=async()=>{f(!0),v(null);try{if(!u.fname||!u.lname)throw new Error("First name and last name are required");if(!u.sex)throw new Error("Sex is required");if(!u.gender_identity)throw new Error("Gender Identity is required");if(!u.sexual_orientation)throw new Error("Sexual Orientation is required");if(u.email&&!u.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/))throw new Error("Invalid email format");if(u.email_direct&&!u.email_direct.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/))throw new Error("Invalid contact email format");await K0(X.pid,u),c&&await c(),o(!1),p({})}catch(U){v(U.message||"Failed to save changes")}finally{f(!1)}},z=()=>{$(null),Y(!0)},H=U=>{$(U),Y(!0)},D=async U=>{if(window.confirm(`Are you sure you want to remove ${U.first_name} ${U.last_name} as a guardian?`))try{await eb(U.relation_id);const ie=await go(X.pid);E(ie.related_persons||[])}catch(ie){v(ie.message||"Failed to delete guardian")}},S=async U=>{try{await I0({patient_id:X.pid,person_id:I?.id,...U});const ie=await go(X.pid);E(ie.related_persons||[]),Y(!1),$(null)}catch(ie){throw new Error(ie.message||"Failed to save guardian")}},k=(U,ie,be,T="text",L=null)=>{if(d&&be)return L?e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:U}),e.jsx("select",{value:u[be]||"",onChange:W=>xe(be,W.target.value),className:"input-md",children:L.map(W=>e.jsx("option",{value:W.value,children:W.label},W.value))})]}):e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:U}),e.jsx("input",{type:T,value:u[be]||"",onChange:W=>xe(be,W.target.value),className:"input-md"})]});{let W=ie||"";if(L&&ie){const F=L.find(fe=>fe.value===ie);F&&(W=F.label)}return e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:U}),e.jsx("div",{className:"form-field-value",children:W})]})}};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end mb-4 space-x-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:he,disabled:m,className:"btn-solid btn-solid-gray disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:q,disabled:m,className:"btn-solid btn-solid-green disabled:opacity-50",children:m?"Saving...":"Save Changes"})]}):e.jsx("button",{onClick:ge,className:"btn-solid btn-solid-blue",children:"Edit Demographics"})}),b&&e.jsx("div",{className:"error-message mb-4",children:b}),d&&e.jsx("div",{className:"mb-4 px-4 py-2 bg-purple-50 border-l-4 border-purple-700 rounded",children:e.jsxs("p",{className:"text-sm text-purple-900",children:[e.jsx("span",{className:"required-field-label",children:"*"})," Required fields are marked with an asterisk and displayed in ",e.jsx("span",{className:"required-field-label",children:"purple"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Personal Information"}),e.jsx("div",{className:"card-inner",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:d?e.jsxs(e.Fragment,{children:[k("First Name *",u.fname,"fname"),k("Middle Name",u.mname,"mname"),k("Last Name *",u.lname,"lname"),k("Preferred Name",u.preferred_name,"preferred_name"),k("Pronouns",u.pronouns,"pronouns","text",j.pronouns&&j.pronouns.length>0?[{value:"",label:"Select..."},...j.pronouns]:null),k("DOB",u.DOB,"DOB","date"),k("Sex *",u.sex,"sex","text",j.sex&&j.sex.length>0?[{value:"",label:"Select..."},...j.sex]:[{value:"",label:"Select..."},{value:"Male",label:"Male"},{value:"Female",label:"Female"}]),k("Gender Identity",u.gender_identity,"gender_identity","text",j.gender_identity&&j.gender_identity.length>0?[{value:"",label:"Select..."},...j.gender_identity]:null),k("Sexual Orientation",u.sexual_orientation,"sexual_orientation","text",j.sexual_orientation&&j.sexual_orientation.length>0?[{value:"",label:"Select..."},...j.sexual_orientation]:null),k("Marital Status",u.marital_status,"marital_status","text",j.marital_status&&j.marital_status.length>0?[{value:"",label:"Select..."},...j.marital_status]:null),k("Ethnicity",u.ethnicity,"ethnicity","text",j.ethnicity&&j.ethnicity.length>0?[{value:"",label:"Select..."},...j.ethnicity]:null),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"S.S."}),e.jsx("input",{type:"text",value:u.ss||"",onChange:U=>xe("ss",U.target.value),placeholder:"XXX-XX-XXXX",maxLength:"11",className:"input-md"})]}),e.jsx("div",{className:"col-span-2",children:k("Client Categories",u.patient_categories,"patient_categories","text",j.patient_categories&&j.patient_categories.length>0?[{value:"",label:"Select..."},...j.patient_categories]:null)})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Legal Name"}),e.jsxs("div",{className:"form-field-value",children:[X.fname," ",X.mname&&X.mname+" ",X.lname]})]}),k("Preferred Name",X.preferred_name),k("Pronouns",X.pronouns,null,"text",j.pronouns&&j.pronouns.length>0?[{value:"",label:"Select..."},...j.pronouns]:null),k("DOB",X.DOB),k("Birth Sex",X.birth_sex),k("Gender Identity",X.gender_identity,null,"text",j.gender_identity&&j.gender_identity.length>0?[{value:"",label:"Select..."},...j.gender_identity]:null),k("Sex",X.sex),k("Sexual Orientation",X.sexual_orientation,null,"text",j.sexual_orientation&&j.sexual_orientation.length>0?[{value:"",label:"Select..."},...j.sexual_orientation]:null),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"S.S."}),e.jsx("div",{className:"form-field-value",children:X.ss?"***-**-"+X.ss.slice(-4):""})]}),k("Marital Status",X.marital_status,null,"text",j.marital_status&&j.marital_status.length>0?[{value:"",label:"Select..."},...j.marital_status]:null),k("Ethnicity",X.ethnicity,null,"text",j.ethnicity&&j.ethnicity.length>0?[{value:"",label:"Select..."},...j.ethnicity]:null),e.jsx("div",{className:"col-span-2",children:k("Client Categories",X.patient_categories,null,"text",j.patient_categories&&j.patient_categories.length>0?[{value:"",label:"Select..."},...j.patient_categories]:null)})]})})})]}),X.age<18&&e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"card-header",children:"Guardian Information"}),e.jsx("button",{onClick:z,className:"btn-solid btn-solid-green btn-sm",children:"+ Add Guardian"})]}),e.jsx("div",{className:"card-inner",children:A.length===0?e.jsx("div",{className:"empty-state",children:'No guardians added yet. Click "Add Guardian" to add one.'}):e.jsx("div",{className:"space-y-4",children:A.map((U,ie)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"item-title",children:[U.first_name," ",U.middle_name," ",U.last_name]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>H(U),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Edit"}),e.jsx("button",{onClick:()=>D(U),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Remove"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"field-label",children:"Relationship:"})," ",U.role]}),U.phone&&e.jsxs("div",{children:[e.jsx("span",{className:"field-label",children:"Phone:"})," ",U.phone]}),U.email&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"field-label",children:"Email:"})," ",U.email]}),U.street&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"field-label",children:"Address:"})," ",U.street,U.city&&`, ${U.city}`,U.state&&`, ${U.state}`,U.postal_code&&` ${U.postal_code}`]})]})]},U.id))})})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Contact Information"}),e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{className:"col-span-2",children:k("Address",X.street,"street")}),k("Address Line 2",X.street_line_2,"street_line_2"),k("City",X.city,"city"),k("State",X.state,"state","text",j.state&&j.state.length>0?[{value:"",label:"Select..."},...j.state]:null),k("Postal Code",X.postal_code,"postal_code"),k("County",X.county,"county"),k("Emergency Contact",X.contact_relationship,"contact_relationship"),k("Emergency Phone",X.phone_contact,"phone_contact","tel"),k("Home Phone",X.phone_home,"phone_home","tel"),k("Mobile Phone",X.phone_cell,"phone_cell","tel"),k("Work Phone",X.phone_biz,"phone_biz","tel"),k("Trusted Email",X.email,"email","email"),k("Contact Email",X.email_direct,"email_direct","email"),!d&&X.additional_addresses&&e.jsxs("div",{className:"col-span-2 form-field",children:[e.jsx("div",{className:"form-field-label",children:"Additional Addresses"}),e.jsx("div",{className:"form-field-value",children:X.additional_addresses})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Client Status"}),e.jsx("div",{className:"card-inner",children:d?e.jsxs("div",{className:"space-y-3",children:[k("Client Status",u.status,"status","text",j.status&&j.status.length>0?[{value:"",label:"Select..."},...j.status]:null),k("Payment Type",u.payment_type,"payment_type","text",[{value:"insurance",label:"Insurance"},{value:"self-pay",label:"Self-Pay"},{value:"pro-bono",label:"Pro Bono"}]),(u.payment_type==="self-pay"||u.payment_type==="pro-bono")&&k("Custom Session Fee ($)",u.custom_session_fee,"custom_session_fee","number",null)]}):e.jsxs("div",{className:"space-y-3",children:[k("Client Status",X.status,null,"text",j.status&&j.status.length>0?j.status:null),k("Payment Type",X.payment_type,null,"text",[{value:"insurance",label:"Insurance"},{value:"self-pay",label:"Self-Pay"},{value:"pro-bono",label:"Pro Bono"}]),(X.payment_type==="self-pay"||X.payment_type==="pro-bono")&&X.custom_session_fee&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Custom Session Fee"}),e.jsxs("div",{className:"form-field-value",children:["$",parseFloat(X.custom_session_fee).toFixed(2)]})]})]})})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Is the Client at Risk?"}),e.jsx("div",{className:"card-inner",children:d?e.jsx("div",{children:k("Risk Indicator",u.protect_indicator,"protect_indicator","text",j.protect_indicator&&j.protect_indicator.length>0?[{value:"",label:"Select..."},...j.protect_indicator]:null)}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Risk Indicator"}),e.jsx("div",{className:"form-field-value",children:X.protection_indicator})]}),X.protection_indicator_code==="YES"&&e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 rounded-lg p-3",children:e.jsx("p",{className:"alert-text text-yellow-800",children:" Risk factors documented. See Clinical Notes for the Risk Assessment."})})]})})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Clinician Information"}),e.jsx("div",{className:"card-inner",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:d?e.jsxs(e.Fragment,{children:[N&&N.admin?e.jsx("div",{className:"col-span-2",children:k("Assigned Clinician",u.provider_id,"provider_id","text",y&&y.length>0?[{value:"",label:"Select..."},...y]:null)}):e.jsxs("div",{className:"col-span-2 form-field",children:[e.jsx("div",{className:"form-field-label",children:"Assigned Clinician"}),e.jsx("div",{className:"form-field-value",children:X.provider})]}),e.jsx("div",{className:"col-span-2",children:k("Referring Provider",u.referring_provider_id,"referring_provider_id","text",y&&y.length>0?[{value:"",label:"Select..."},...y]:null)})]}):e.jsxs(e.Fragment,{children:[k("Assigned Clinician",X.provider),k("Referring Provider",X.referring_provider)]})})})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Reminder Preferences"}),e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{className:"col-span-2",children:k("HIPAA Notice Received",X.hipaa_notice,"hipaa_notice","text",[{value:"NO",label:"NO"},{value:"YES",label:"YES"}])}),k("Allow SMS",X.hipaa_allowsms,"hipaa_allowsms","text",[{value:"NO",label:"NO"},{value:"YES",label:"YES"}]),k("Allow Voice Message",X.hipaa_voice,"hipaa_voice","text",[{value:"NO",label:"NO"},{value:"YES",label:"YES"}]),k("Allow Mail Message",X.hipaa_mail,"hipaa_mail","text",[{value:"NO",label:"NO"},{value:"YES",label:"YES"}]),k("Allow Email",X.hipaa_email,"hipaa_email","text",[{value:"NO",label:"NO"},{value:"YES",label:"YES"}])]})})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Portal Settings"}),e.jsx("div",{className:"card-inner",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:d?e.jsxs(e.Fragment,{children:[k("Allow Client Portal",u.allow_patient_portal,"allow_patient_portal","text",[{value:"",label:"Select..."},{value:"NO",label:"NO"},{value:"YES",label:"YES"}]),k("CMS Portal Login",u.cmsportal_login,"cmsportal_login")]}):e.jsxs(e.Fragment,{children:[k("Allow Client Portal",X.allow_patient_portal),k("CMS Portal Login",X.cmsportal_login)]})})})]})]})]}),O&&e.jsx(zb,{guardian:I,stateOptions:j.state||[],onSave:S,onCancel:()=>{Y(!1),$(null)}})]})}function zb({guardian:n,stateOptions:c,onSave:d,onCancel:o}){const[u,p]=g.useState({first_name:n?.first_name||"",middle_name:n?.middle_name||"",last_name:n?.last_name||"",role:n?.role||"",phone:n?.phone||"",email:n?.email||"",street:n?.street||"",city:n?.city||"",state:n?.state||"",postal_code:n?.postal_code||"",notes:n?.notes||""}),[m,f]=g.useState(null),[b,v]=g.useState(!1),j=(y,C)=>{p(N=>({...N,[y]:C}))},x=async y=>{y.preventDefault(),f(null),v(!0);try{if(!u.first_name||!u.last_name||!u.role)throw new Error("First name, last name, and relationship are required");if(u.email&&!u.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/))throw new Error("Invalid email format");await d(u)}catch(C){f(C.message)}finally{v(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto m-4",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"card-header text-2xl",children:n?"Edit Guardian":"Add Guardian"}),m&&e.jsx("div",{className:"error-message mb-4",children:m}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"First Name *"}),e.jsx("input",{type:"text",value:u.first_name,onChange:y=>j("first_name",y.target.value),className:"input-md",required:!0})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"Middle Name"}),e.jsx("input",{type:"text",value:u.middle_name,onChange:y=>j("middle_name",y.target.value),className:"input-md"})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"Last Name *"}),e.jsx("input",{type:"text",value:u.last_name,onChange:y=>j("last_name",y.target.value),className:"input-md",required:!0})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"Relationship *"}),e.jsxs("select",{value:u.role,onChange:y=>j("role",y.target.value),className:"input-md",required:!0,children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"Mother",children:"Mother"}),e.jsx("option",{value:"Father",children:"Father"}),e.jsx("option",{value:"Grandmother",children:"Grandmother"}),e.jsx("option",{value:"Grandfather",children:"Grandfather"}),e.jsx("option",{value:"Aunt",children:"Aunt"}),e.jsx("option",{value:"Uncle",children:"Uncle"}),e.jsx("option",{value:"Foster Parent",children:"Foster Parent"}),e.jsx("option",{value:"Legal Guardian",children:"Legal Guardian"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"Phone"}),e.jsx("input",{type:"tel",value:u.phone,onChange:y=>j("phone",y.target.value),className:"input-md"})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"Email"}),e.jsx("input",{type:"email",value:u.email,onChange:y=>j("email",y.target.value),className:"input-md"})]}),e.jsxs("div",{className:"col-span-2 form-field",children:[e.jsx("label",{className:"form-field-label",children:"Street Address"}),e.jsx("input",{type:"text",value:u.street,onChange:y=>j("street",y.target.value),className:"input-md"})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"City"}),e.jsx("input",{type:"text",value:u.city,onChange:y=>j("city",y.target.value),className:"input-md"})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"State"}),e.jsxs("select",{value:u.state,onChange:y=>j("state",y.target.value),className:"input-md",children:[e.jsx("option",{value:"",children:"Select..."}),c.map(y=>e.jsx("option",{value:y.value,children:y.label},y.value))]})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{className:"form-field-label",children:"Postal Code"}),e.jsx("input",{type:"text",value:u.postal_code,onChange:y=>j("postal_code",y.target.value),className:"input-md"})]}),e.jsxs("div",{className:"col-span-2 form-field",children:[e.jsx("label",{className:"form-field-label",children:"Notes"}),e.jsx("textarea",{value:u.notes,onChange:y=>j("notes",y.target.value),className:"input-md",rows:"3"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx("button",{type:"button",onClick:o,disabled:b,className:"btn-solid btn-solid-gray",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:b,className:"btn-solid btn-solid-green",children:b?"Saving...":"Save Guardian"})]})]})]})})})}function wf({selectedInterventions:n=[],onChange:c,riskPresent:d=!1,showFavorites:o=!0}){const[u,p]=g.useState(!0),[m,f]=g.useState(null),[b,v]=g.useState(null),[j,x]=g.useState({}),[y,C]=g.useState("");g.useEffect(()=>{N()},[]);const N=async()=>{try{p(!0);const $=await $0();v($),f(null)}catch($){console.error("Error loading interventions:",$),f($.message)}finally{p(!1)}},_=$=>{const le=n.includes($);c(le?n.filter(V=>V!==$):[...n,$])},A=$=>{x(le=>({...le,[$]:!le[$]}))};if(u)return e.jsx("div",{className:"text-gray-600",children:"Loading interventions..."});if(m)return e.jsxs("div",{className:"text-red-600",children:["Error loading interventions: ",m]});if(!b)return e.jsx("div",{className:"text-gray-600",children:"No interventions available"});const{grouped:E,favorites:O}=b,Y=[...E.tier1||[],...E.tier3||[],...E.tier4||[],...Object.values(E.tier2||{}).flat()],I=y?Y.filter($=>$.intervention_name.toLowerCase().includes(y.toLowerCase())):null;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",value:y,onChange:$=>C($.target.value),placeholder:"Search interventions...",className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm"})}),y&&I&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-label mb-3",children:["Search Results (",I.length,")"]}),I.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:I.map($=>e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:n.includes($.intervention_name),onChange:()=>_($.intervention_name),className:"checkbox"}),e.jsx("span",{className:"text-sm text-gray-800",children:$.intervention_name})]},$.id))}):e.jsxs("div",{className:"text-gray-500 text-sm",children:['No interventions found matching "',y,'"']})]}),!y&&e.jsxs(e.Fragment,{children:[o&&O&&O.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-label mb-3 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Your Favorites"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:O.map($=>e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:n.includes($.intervention_name),onChange:()=>_($.intervention_name),className:"checkbox"}),e.jsx("span",{className:"text-sm text-gray-800",children:$.intervention_name})]},$.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-label mb-3",children:"Core Interventions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:E.tier1.map($=>e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:n.includes($.intervention_name),onChange:()=>_($.intervention_name),className:"checkbox"}),e.jsx("span",{className:"text-sm text-gray-800",children:$.intervention_name})]},$.id))})]}),Object.keys(E.tier2).length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-label mb-3",children:"Modality-Specific Interventions"}),e.jsx("div",{className:"space-y-2",children:Object.entries(E.tier2).map(([$,le])=>e.jsxs("div",{className:"card-inner",children:[e.jsxs("button",{onClick:()=>A($),className:"w-full flex items-center justify-between p-3 text-left hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx("span",{className:"font-semibold text-gray-800",children:$}),e.jsx("svg",{className:`w-5 h-5 text-gray-600 transition-transform ${j[$]?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),j[$]&&e.jsx("div",{className:"px-3 pb-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:le.map(V=>e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:n.includes(V.intervention_name),onChange:()=>_(V.intervention_name),className:"checkbox"}),e.jsx("span",{className:"text-sm text-gray-800",children:V.intervention_name})]},V.id))})]},$))})]}),d&&E.tier3.length>0&&e.jsxs("div",{className:"border-2 border-orange-200 rounded-lg p-4 bg-orange-50",children:[e.jsxs("h4",{className:"text-sm font-semibold text-orange-800 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Crisis/Risk Interventions"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:E.tier3.map($=>e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-orange-100 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:n.includes($.intervention_name),onChange:()=>_($.intervention_name),className:"w-4 h-4 text-orange-600 rounded focus:ring-orange-500"}),e.jsx("span",{className:"text-sm text-gray-800",children:$.intervention_name})]},$.id))})]}),E.tier4.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-label mb-3",children:"Administrative/Clinical Process"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:E.tier4.map($=>e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:n.includes($.intervention_name),onChange:()=>_($.intervention_name),className:"checkbox"}),e.jsx("span",{className:"text-sm text-gray-800",children:$.intervention_name})]},$.id))})]})]}),n.length>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsxs("div",{className:"text-sm font-semibold text-blue-800 mb-2",children:["Selected (",n.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.map($=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:[$,e.jsx("button",{onClick:()=>_($),className:"hover:text-blue-600 focus:outline-none",title:"Remove",children:""})]},$))})]})]})}function Sf({patientId:n,serviceDate:c,selectedDiagnoses:d=[],onChange:o}){const[u,p]=g.useState([]),[m,f]=g.useState(!0),[b,v]=g.useState(null);g.useEffect(()=>{n&&j()},[n,c]);const j=async()=>{try{f(!0),v(null);const O=await V0(n,{activeAsOf:c,includeRetired:!1});p(O.diagnoses||[])}catch(O){console.error("Error loading diagnoses:",O),v(O.message)}finally{f(!1)}},x=O=>O?O.length>=4?O.slice(0,3)+"."+O.slice(3):O:"",y=O=>{if(!O)return"";const Y=O.split(/\s{3,}/);return Y.length>1?Y[1].trim():O.trim()},C=O=>d.some(Y=>Y.code===O||Y===O),N=()=>{if(!d||d.length===0)return null;const O=d[0];return typeof O=="string"?O:O.code},_=O=>{const Y=O.diagnosis;if(C(Y)){const $=d.filter(le=>(typeof le=="string"?le:le.code)!==Y);o($)}else{const $={code:Y,description:O.title,isPrimary:d.length===0,billable:!0};o([...d,$])}},A=O=>{const Y=d.map(I=>({...typeof I=="string"?{code:I}:I,isPrimary:(typeof I=="string"?I:I.code)===O}));o(Y)};if(m)return e.jsx("div",{className:"text-sm text-gray-600 italic",children:"Loading active diagnoses..."});if(b)return e.jsxs("div",{className:"text-sm text-red-600",children:["Error loading diagnoses: ",b]});if(!u||u.length===0)return e.jsx("div",{className:"text-sm text-gray-600 bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:" No active diagnoses found for this patient. Please create a Diagnosis Note first."});const E=N();return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Select all diagnoses addressed in this session. The first selected diagnosis will be marked as primary for billing purposes."}),e.jsx("div",{className:"space-y-2",children:u.map(O=>{const Y=O.diagnosis,I=C(Y),$=Y===E;return e.jsx("div",{className:`p-3 rounded-lg border-2 transition-all cursor-pointer ${I?"border-blue-400 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>_(O),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:I,onChange:()=>_(O),onClick:le=>le.stopPropagation(),className:"mt-1 w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-mono text-sm font-semibold text-blue-700 bg-blue-100 px-2 py-0.5 rounded",children:x(Y)}),I&&$&&e.jsx("span",{className:"text-xs font-semibold text-green-700 bg-green-100 px-2 py-0.5 rounded",children:"PRIMARY"}),I&&!$&&e.jsx("button",{onClick:le=>{le.stopPropagation(),A(Y)},className:"text-xs text-blue-600 hover:text-blue-800 underline",children:"Set as primary"})]}),e.jsx("div",{className:"text-sm text-gray-800",children:y(O.title)}),O.begdate&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Since: ",new Date(O.begdate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]})},O.id)})}),d.length>0&&e.jsxs("div",{className:"text-xs text-gray-600 bg-blue-50 border border-blue-200 rounded-lg p-2 mt-2",children:[" ",d.length," diagnosis code",d.length!==1?"s":""," selected for this session"]})]})}function Ob({note:n,onChange:c,patientId:d,autoSave:o}){const[u,p]=g.useState([]),[m,f]=g.useState(!0),[b,v]=g.useState(n.riskPresent||!1);g.useEffect(()=>{j()},[d]);const j=async()=>{try{f(!0);const N=await ff(d,{status:"active"});p(N.goals||[])}catch(N){console.error("Error loading treatment goals:",N)}finally{f(!1)}},x=(N,_)=>{c(N,_),o&&setTimeout(()=>o(),500)},y=N=>{v(N),x("riskPresent",N)},C=N=>{const _=n.goalsAddressed||[];_.includes(N)?x("goalsAddressed",_.filter(E=>E!==N)):x("goalsAddressed",[..._,N])};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main bg-blue-50 border-2 border-blue-300",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Diagnosis Codes for This Session"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select all diagnoses addressed in this session. Required for billing and clinical documentation."})]}),e.jsx(Sf,{patientId:d,serviceDate:n.date_of_service||new Date().toISOString().split("T")[0],selectedDiagnoses:n.diagnosis_codes||[],onChange:N=>x("diagnosis_codes",N)})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"B"}),"Behavior / What You Observed"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Client presentation, affect, mood"})]}),e.jsx("textarea",{value:n.behaviorProblem||"",onChange:N=>x("behaviorProblem",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Client presented as anxious with tearful affect. Reported difficulty sleeping and increased worry about work performance..."})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Quick Tags (Optional)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Engaged","Tearful","Anxious","Flat affect","Guarded","Motivated","Resistant","Calm"].map(N=>{const _=(n.clientPresentation||[]).includes(N);return e.jsx("button",{onClick:()=>{const A=n.clientPresentation||[];_?x("clientPresentation",A.filter(E=>E!==N)):x("clientPresentation",[...A,N])},className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${_?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:N},N)})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"I"}),"Intervention / What You Did"]})}),e.jsx("textarea",{value:n.intervention||"",onChange:N=>x("intervention",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Narrative description of interventions used... (or use checkboxes below for quick selection)"})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("div",{className:"text-label mb-3",children:"Select Interventions Used"}),e.jsx(wf,{selectedInterventions:n.interventionsSelected||[],onChange:N=>x("interventionsSelected",N),riskPresent:b})]})]}),e.jsx("div",{className:"card-main",children:e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"R"}),"Response / How Client Responded"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Client's reaction to interventions"})]}),e.jsx("textarea",{value:n.response||"",onChange:N=>x("response",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Client engaged well with cognitive restructuring. Reported feeling less overwhelmed after identifying automatic thoughts. Demonstrated understanding of homework assignment..."})]})}),e.jsxs("div",{className:"card-main",children:[e.jsxs("label",{className:"block mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"P"}),"Plan / What's Next"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Homework, next steps, follow-up"})]}),e.jsx("textarea",{value:n.plan||"",onChange:N=>x("plan",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Continue weekly sessions. Homework: Practice thought records daily. Will reassess anxiety levels next session. May refer to psychiatry if no improvement..."})]}),!m&&u.length>0&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("div",{className:"text-label mb-3",children:"Treatment Goals Addressed This Session"}),e.jsx("div",{className:"space-y-2",children:u.map(N=>e.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:(n.goalsAddressed||[]).includes(N.id),onChange:()=>C(N.id),className:"mt-0.5 w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-gray-800",children:N.goal_text}),N.goal_category&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:N.goal_category})]})]},N.id))})]})]}),e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[e.jsxs("label",{className:"flex items-center gap-3 mb-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:N=>y(N.target.checked),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500"}),e.jsx("span",{className:"font-semibold text-gray-800",children:" Risk Present (suicide, homicide, self-harm)"})]}),b&&e.jsx("div",{className:"border-t-2 border-orange-200 pt-3",children:e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm font-semibold text-orange-800 mb-2",children:"Risk Assessment Details (Required when risk is flagged)"}),e.jsx("textarea",{value:n.riskAssessment||"",onChange:N=>x("riskAssessment",N.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Document risk factors, protective factors, safety plan, level of risk, interventions used, follow-up plan...",required:b})]})})]})]})}function Lb({note:n,onChange:c,patientId:d,autoSave:o}){const[u,p]=g.useState([]),[m,f]=g.useState(!0),[b,v]=g.useState(n.riskPresent||!1);g.useEffect(()=>{j()},[d]);const j=async()=>{try{f(!0);const N=await ff(d,{status:"active"});p(N.goals||[])}catch(N){console.error("Error loading treatment goals:",N)}finally{f(!1)}},x=(N,_)=>{c(N,_),o&&setTimeout(()=>o(),500)},y=N=>{v(N),x("riskPresent",N)},C=N=>{const _=n.goalsAddressed||[];_.includes(N)?x("goalsAddressed",_.filter(E=>E!==N)):x("goalsAddressed",[..._,N])};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main bg-blue-50 border-2 border-blue-300",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Diagnosis Codes for This Session"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select all diagnoses addressed in this session. Required for billing and clinical documentation."})]}),e.jsx(Sf,{patientId:d,serviceDate:n.date_of_service||new Date().toISOString().split("T")[0],selectedDiagnoses:n.diagnosis_codes||[],onChange:N=>x("diagnosis_codes",N)})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-purple-600 mr-2",children:"P"}),"Problem / Presenting Issue"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Chief complaint, reason for session"})]}),e.jsx("textarea",{value:n.behaviorProblem||"",onChange:N=>x("behaviorProblem",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Client reports increased anxiety related to work stress. Difficulty concentrating, racing thoughts, sleep disruption. Concerned about upcoming performance review..."})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Quick Tags (Optional)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Anxiety","Depression","Stress","Trauma","Grief","Relationship Issues","Work Stress","Sleep Issues","Anger","Self-Esteem"].map(N=>{const _=(n.clientPresentation||[]).includes(N);return e.jsx("button",{onClick:()=>{const A=n.clientPresentation||[];_?x("clientPresentation",A.filter(E=>E!==N)):x("clientPresentation",[...A,N])},className:`px-3 py-1 rounded-full text-xs font-medium transition-colors ${_?"bg-purple-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:N},N)})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-purple-600 mr-2",children:"I"}),"Intervention / What You Did"]})}),e.jsx("textarea",{value:n.intervention||"",onChange:N=>x("intervention",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Narrative description of interventions used... (or use checkboxes below for quick selection)"})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("div",{className:"text-label mb-3",children:"Select Interventions Used"}),e.jsx(wf,{selectedInterventions:n.interventionsSelected||[],onChange:N=>x("interventionsSelected",N),riskPresent:b})]})]}),e.jsx("div",{className:"card-main",children:e.jsxs("label",{className:"block",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-purple-600 mr-2",children:"R"}),"Response / How Client Responded"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Client's reaction to interventions"})]}),e.jsx("textarea",{value:n.response||"",onChange:N=>x("response",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Client reported feeling validated after reframing negative thoughts. Expressed willingness to practice relaxation techniques. Appeared more hopeful by end of session..."})]})}),e.jsxs("div",{className:"card-main",children:[e.jsxs("label",{className:"block mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[e.jsx("span",{className:"text-purple-600 mr-2",children:"P"}),"Plan / What's Next"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"Homework, next steps, follow-up"})]}),e.jsx("textarea",{value:n.plan||"",onChange:N=>x("plan",N.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Example: Continue weekly sessions. Homework: Practice deep breathing 3x daily. Client will monitor anxiety levels in journal. Follow up on work situation next session..."})]}),!m&&u.length>0&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("div",{className:"text-label mb-3",children:"Treatment Goals Addressed This Session"}),e.jsx("div",{className:"space-y-2",children:u.map(N=>e.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-purple-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:(n.goalsAddressed||[]).includes(N.id),onChange:()=>C(N.id),className:"mt-0.5 w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-gray-800",children:N.goal_text}),N.goal_category&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:N.goal_category})]})]},N.id))})]})]}),e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[e.jsxs("label",{className:"flex items-center gap-3 mb-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:N=>y(N.target.checked),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500"}),e.jsx("span",{className:"font-semibold text-gray-800",children:" Risk Present (suicide, homicide, self-harm)"})]}),b&&e.jsx("div",{className:"border-t-2 border-orange-200 pt-3",children:e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm font-semibold text-orange-800 mb-2",children:"Risk Assessment Details (Required when risk is flagged)"}),e.jsx("textarea",{value:n.riskAssessment||"",onChange:N=>x("riskAssessment",N.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Document risk factors, protective factors, safety plan, level of risk, interventions used, follow-up plan...",required:b})]})})]})]})}function Ub({note:n,onChange:c,autoSave:d}){const[o,u]=g.useState(n.riskPresent||!1),p=(x,y)=>{c(x,y),d&&setTimeout(()=>d(),500)},m=x=>{u(x),p("riskPresent",x)},f=x=>(n.mentalStatusExam||{})[x]||"",b=(x,y)=>{const C=n.mentalStatusExam||{};p("mentalStatusExam",{...C,[x]:y})},v=({label:x,field:y,options:C})=>e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:x}),e.jsxs("select",{value:f(y),onChange:N=>b(y,N.target.value),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white shadow-sm",children:[e.jsx("option",{value:"",children:"Select..."}),C.map(N=>e.jsx("option",{value:N,children:N},N))]})]})}),j=({label:x,field:y,placeholder:C,rows:N=3})=>e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:x}),e.jsx("textarea",{value:f(y),onChange:_=>b(y,_.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 resize-none bg-white shadow-sm",rows:N,placeholder:C})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-teal",children:[e.jsx("span",{className:"mr-2",children:""}),"Appearance & Grooming"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(v,{label:"General Appearance",field:"appearance",options:["Well-groomed","Disheveled","Unkempt","Bizarre","Appropriate","Casual"]}),e.jsx(v,{label:"Hygiene",field:"hygiene",options:["Good","Fair","Poor","Malodorous"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(j,{label:"Additional Notes",field:"appearanceNotes",placeholder:"Additional observations about appearance...",rows:2})})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-teal",children:[e.jsx("span",{className:"mr-2",children:""}),"Behavior & Motor Activity"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(v,{label:"Psychomotor Activity",field:"psychomotorActivity",options:["Normal","Agitated","Retarded","Restless","Hyperactive","Lethargic"]}),e.jsx(v,{label:"Eye Contact",field:"eyeContact",options:["Good","Fair","Poor","Avoidant","Intense/Staring"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(j,{label:"Additional Behavioral Observations",field:"behaviorNotes",placeholder:"Tics, tremors, mannerisms, gait, posture...",rows:2})})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-teal",children:[e.jsx("span",{className:"mr-2",children:""}),"Speech"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(v,{label:"Rate",field:"speechRate",options:["Normal","Slow","Rapid","Pressured"]}),e.jsx(v,{label:"Volume",field:"speechVolume",options:["Normal","Loud","Soft","Whispered"]}),e.jsx(v,{label:"Tone",field:"speechTone",options:["Normal","Monotone","Varied","Flat"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(j,{label:"Speech Characteristics",field:"speechNotes",placeholder:"Slurred, stuttering, articulation issues...",rows:2})})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-teal",children:[e.jsx("span",{className:"mr-2",children:""}),"Mood & Affect"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Mood (subjective)"}),e.jsx("input",{type:"text",value:f("mood"),onChange:x=>b("mood",x.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white shadow-sm",placeholder:"Client's own words (e.g., 'sad', 'anxious')"})]})}),e.jsx(v,{label:"Affect (objective)",field:"affect",options:["Appropriate","Flat","Blunted","Labile","Restricted","Congruent","Incongruent"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(j,{label:"Mood & Affect Details",field:"moodNotes",placeholder:"Congruence, range, reactivity...",rows:2})})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-teal",children:[e.jsx("span",{className:"mr-2",children:""}),"Thought Process"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(v,{label:"Organization",field:"thoughtProcess",options:["Logical","Goal-directed","Tangential","Circumstantial","Loose associations","Flight of ideas","Thought blocking"]}),e.jsx(v,{label:"Flow",field:"thoughtFlow",options:["Normal","Rapid","Slow","Interrupted"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(j,{label:"Additional Observations",field:"thoughtProcessNotes",placeholder:"Racing thoughts, ruminations, perseverations...",rows:2})})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-teal",children:[e.jsx("span",{className:"mr-2",children:""}),"Thought Content"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-wrap gap-3",children:["Suicidal ideation","Homicidal ideation","Delusions","Obsessions","Phobias","Paranoia"].map(x=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:(f("thoughtContent")||[]).includes(x),onChange:y=>{const C=f("thoughtContent")||[],N=y.target.checked?[...C,x]:C.filter(_=>_!==x);b("thoughtContent",N)},className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"}),e.jsx("span",{className:"checkbox-label",children:x})]},x))}),e.jsx(j,{label:"Thought Content Details",field:"thoughtContentNotes",placeholder:"Describe any concerning thought content, including intent, plan, means...",rows:3})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-teal",children:[e.jsx("span",{className:"mr-2",children:""}),"Perception"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-wrap gap-3",children:["No perceptual disturbances","Auditory hallucinations","Visual hallucinations","Tactile hallucinations","Illusions","Depersonalization","Derealization"].map(x=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:(f("perception")||[]).includes(x),onChange:y=>{const C=f("perception")||[],N=y.target.checked?[...C,x]:C.filter(_=>_!==x);b("perception",N)},className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"}),e.jsx("span",{className:"checkbox-label",children:x})]},x))}),e.jsx(j,{label:"Perception Details",field:"perceptionNotes",placeholder:"Describe any perceptual disturbances...",rows:2})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-teal",children:[e.jsx("span",{className:"mr-2",children:""}),"Cognition"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(v,{label:"Orientation",field:"orientation",options:["Oriented x4","Oriented x3","Oriented x2","Oriented x1","Disoriented"]}),e.jsx(v,{label:"Memory",field:"memory",options:["Intact","Impaired recent","Impaired remote","Impaired both"]}),e.jsx(v,{label:"Concentration",field:"concentration",options:["Good","Fair","Poor","Distractible"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(j,{label:"Cognitive Details",field:"cognitionNotes",placeholder:"Attention, abstract thinking, calculations...",rows:2})})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-teal",children:[e.jsx("span",{className:"mr-2",children:""}),"Insight & Judgment"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(v,{label:"Insight",field:"insight",options:["Good","Fair","Poor","Absent"]}),e.jsx(v,{label:"Judgment",field:"judgment",options:["Good","Fair","Poor","Impaired"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(j,{label:"Insight & Judgment Details",field:"insightJudgmentNotes",placeholder:"Awareness of illness, decision-making capacity...",rows:2})})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-teal",children:[e.jsx("span",{className:"mr-2",children:""}),"Clinical Summary & Impressions"]}),e.jsx(j,{label:"Summary",field:"summary",placeholder:"Overall clinical impression, diagnostic considerations, recommendations...",rows:5})]}),e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[e.jsxs("label",{className:"flex items-center gap-3 mb-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:x=>m(x.target.checked),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500"}),e.jsx("span",{className:"font-semibold text-gray-800",children:" Risk Present (suicide, homicide, self-harm)"})]}),o&&e.jsx("div",{className:"border-t-2 border-orange-200 pt-3",children:e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm font-semibold text-orange-800 mb-2",children:"Risk Assessment Details (Required when risk is flagged)"}),e.jsx("textarea",{value:n.riskAssessment||"",onChange:x=>p("riskAssessment",x.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Document risk factors, protective factors, safety plan, level of risk, interventions used, follow-up plan...",required:o})]})})]})]})}function Bb({medications:n=[],onChange:c}){const[d,o]=g.useState(!1),[u,p]=g.useState(null),[m,f]=g.useState({name:"",dosage:"",frequency:"",prescriber:"",purpose:""}),b=()=>{f({name:"",dosage:"",frequency:"",prescriber:"",purpose:""}),o(!1),p(null)},v=()=>{if(!m.name.trim())return;const C={...m},N=[...n,C];c(N),b()},j=C=>{f(n[C]),p(C),o(!0)},x=()=>{if(!m.name.trim())return;const C=[...n];C[u]={...m},c(C),b()},y=C=>{const N=n.filter((_,A)=>A!==C);c(N)};return e.jsxs("div",{className:"space-y-4",children:[n.length>0&&e.jsx("div",{className:"space-y-2",children:n.map((C,N)=>e.jsx("div",{className:"p-3 bg-white border-2 border-gray-300 rounded-lg hover:border-indigo-400 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[C.name,C.dosage&&e.jsx("span",{className:"ml-2 text-indigo-600",children:C.dosage})]}),C.frequency&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Frequency: ",C.frequency]}),C.prescriber&&e.jsxs("div",{className:"text-sm text-gray-600",children:["Prescribed by: ",C.prescriber]}),C.purpose&&e.jsxs("div",{className:"text-sm text-gray-600",children:["For: ",C.purpose]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>j(N),className:"text-sm text-indigo-600 hover:text-indigo-800 underline",children:"Edit"}),e.jsx("button",{onClick:()=>y(N),className:"text-sm text-red-600 hover:text-red-800 underline",children:"Remove"})]})]})},N))}),d?e.jsxs("div",{className:"p-4 bg-indigo-50 border-2 border-indigo-300 rounded-lg space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:["Medication Name ",e.jsx(ze,{})]}),e.jsx("input",{type:"text",value:m.name,onChange:C=>f({...m,name:C.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Sertraline, Adderall XR",autoFocus:!0})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Dosage"}),e.jsx("input",{type:"text",value:m.dosage,onChange:C=>f({...m,dosage:C.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., 50mg, 20mg XR"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Frequency"}),e.jsx("input",{type:"text",value:m.frequency,onChange:C=>f({...m,frequency:C.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Once daily, Twice daily"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Prescriber"}),e.jsx("input",{type:"text",value:m.prescriber,onChange:C=>f({...m,prescriber:C.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Dr. Smith, Psychiatrist"})]})}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"What it's for"}),e.jsx("input",{type:"text",value:m.purpose,onChange:C=>f({...m,purpose:C.target.value}),className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Depression, ADHD, Anxiety"})]})})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:u!==null?x:v,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:u!==null?"Update Medication":"Add Medication"}),e.jsx("button",{onClick:b,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 font-medium",children:"Cancel"})]})]}):e.jsx("button",{onClick:()=>o(!0),className:"w-full px-4 py-3 border-2 border-dashed border-indigo-400 rounded-lg text-indigo-700 font-medium hover:bg-indigo-50 transition-colors",children:"+ Add Medication"}),n.length===0&&!d&&e.jsx("div",{className:"text-sm text-gray-500 italic text-center py-2",children:"No medications documented yet"})]})}function Hb({note:n,onChange:c,autoSave:d}){const[o,u]=g.useState(n.riskPresent||!1),p=(v,j)=>{c(v,j),d&&setTimeout(()=>d(),500)},m=v=>{u(v),p("riskPresent",v)},f=v=>(n.presentingConcerns||{})[v]||"",b=(v,j)=>{const x=n.presentingConcerns||{};p("presentingConcerns",{...x,[v]:j})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"Presenting Problem / Chief Complaint"]}),e.jsx("textarea",{value:n.behaviorProblem||"",onChange:v=>p("behaviorProblem",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"In client's own words: What brings you in today? What are you hoping to work on?"})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"History of Present Illness"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Duration & Onset"}),e.jsx("textarea",{value:f("duration"),onChange:v=>b("duration",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"When did symptoms begin? What was happening at that time?"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Frequency & Severity"}),e.jsx("textarea",{value:f("frequency"),onChange:v=>b("frequency",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"How often? How severe? What makes it better/worse?"})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"Previous Mental Health Treatment"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Prior Therapy/Counseling"}),e.jsx("textarea",{value:f("priorTherapy"),onChange:v=>b("priorTherapy",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"When? With whom? What was helpful/not helpful?"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Psychiatric Hospitalizations"}),e.jsx("textarea",{value:f("hospitalizations"),onChange:v=>b("hospitalizations",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Dates, reasons, outcomes..."})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"Family History"]}),e.jsx("textarea",{value:f("familyHistory"),onChange:v=>b("familyHistory",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Mental health diagnoses, substance use, suicide attempts in family members..."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"Substance Use"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Alcohol Use"}),e.jsx("textarea",{value:f("alcoholUse"),onChange:v=>b("alcoholUse",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Frequency, amount, history of abuse..."})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Drug Use (Recreational/Prescription)"}),e.jsx("textarea",{value:f("drugUse"),onChange:v=>b("drugUse",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Substances, frequency, history..."})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"Medical History"]}),e.jsx("textarea",{value:f("medicalHistory"),onChange:v=>b("medicalHistory",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Chronic conditions, surgeries, head injuries, neurological issues..."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"Current Medications"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-4",children:"Document all medications the client is currently taking (psychiatric, medical, OTC, supplements). This includes medications prescribed by psychiatrists, PCPs, and other providers."}),e.jsx(Bb,{medications:n.currentMedications||[],onChange:v=>p("currentMedications",v)})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"Social & Developmental History"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Childhood/Development"}),e.jsx("textarea",{value:f("childhood"),onChange:v=>b("childhood",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Developmental milestones, childhood experiences, trauma..."})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Education & Employment"}),e.jsx("textarea",{value:f("education"),onChange:v=>b("education",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Highest education, current employment, work history..."})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Relationships & Support System"}),e.jsx("textarea",{value:f("relationships"),onChange:v=>b("relationships",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Marital status, children, family support, friends..."})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"Current Functioning"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Sleep"}),e.jsx("input",{type:"text",value:f("sleep"),onChange:v=>b("sleep",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white shadow-sm",placeholder:"Hours per night, quality, difficulties..."})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Appetite/Eating"}),e.jsx("input",{type:"text",value:f("appetite"),onChange:v=>b("appetite",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white shadow-sm",placeholder:"Changes, patterns, concerns..."})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Energy Level"}),e.jsx("input",{type:"text",value:f("energy"),onChange:v=>b("energy",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white shadow-sm",placeholder:"Fatigue, motivation, activity level..."})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"Treatment Goals"]}),e.jsx("textarea",{value:n.plan||"",onChange:v=>p("plan",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"What does the client hope to achieve? What are the initial treatment goals? Recommended frequency of sessions?"})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-indigo",children:[e.jsx("span",{className:"mr-2",children:""}),"Clinical Impressions & Diagnostic Considerations"]}),e.jsx("textarea",{value:f("impressions"),onChange:v=>b("impressions",v.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Initial clinical formulation, provisional diagnoses, treatment recommendations..."})]}),e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[e.jsxs("label",{className:"flex items-center gap-3 mb-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:v=>m(v.target.checked),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500"}),e.jsx("span",{className:"font-semibold text-gray-800",children:" Risk Present (suicide, homicide, self-harm)"})]}),o&&e.jsx("div",{className:"border-t-2 border-orange-200 pt-3",children:e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-sm font-semibold text-orange-800 mb-2",children:"Risk Assessment Details (Required when risk is flagged)"}),e.jsx("textarea",{value:n.riskAssessment||"",onChange:v=>p("riskAssessment",v.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Document risk factors, protective factors, safety plan, level of risk, interventions used, follow-up plan...",required:o})]})})]})]})}function qb({note:n,onChange:c,autoSave:d}){const o=(m,f)=>{c(m,f),d&&setTimeout(()=>d(),500)},u=m=>(n.clinicalObservations||{})[m]||"",p=(m,f)=>{const b=n.clinicalObservations||{};o("clinicalObservations",{...b,[m]:f})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-emerald",children:[e.jsx("span",{className:"mr-2",children:""}),"Reason for Discharge"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-wrap gap-3",children:["Treatment goals achieved","Client request","Mutual agreement","Client no-show","Administrative discharge","Transfer to another provider","Other"].map(m=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"dischargeReason",value:m,checked:u("dischargeReason")===m,onChange:f=>p("dischargeReason",f.target.value),className:"w-4 h-4 text-emerald-600"}),e.jsx("span",{className:"checkbox-label",children:m})]},m))}),e.jsx("textarea",{value:u("dischargeReasonDetails"),onChange:m=>p("dischargeReasonDetails",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Additional details..."})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-emerald",children:[e.jsx("span",{className:"mr-2",children:""}),"Treatment Summary"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Dates of Treatment"}),e.jsx("input",{type:"text",value:u("treatmentDates"),onChange:m=>p("treatmentDates",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white shadow-sm",placeholder:"From [date] to [date] - Total of X sessions"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Presenting Problem (at intake)"}),e.jsx("textarea",{value:n.behaviorProblem||"",onChange:m=>o("behaviorProblem",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"What brought client to treatment..."})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Diagnosis/Diagnoses"}),e.jsx("textarea",{value:u("diagnoses"),onChange:m=>p("diagnoses",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Primary and secondary diagnoses..."})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-emerald",children:[e.jsx("span",{className:"mr-2",children:""}),"Interventions & Treatment Modalities"]}),e.jsx("textarea",{value:n.intervention||"",onChange:m=>o("intervention",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"CBT, DBT, EMDR, supportive counseling, psychoeducation, medication management..."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-emerald",children:[e.jsx("span",{className:"mr-2",children:""}),"Progress & Treatment Outcomes"]}),e.jsx("textarea",{value:n.response||"",onChange:m=>o("response",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Describe client progress toward treatment goals, symptom reduction, skill development, behavioral changes..."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-emerald",children:[e.jsx("span",{className:"mr-2",children:""}),"Current Status at Discharge"]}),e.jsx("textarea",{value:u("currentStatus"),onChange:m=>p("currentStatus",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Current symptoms, functioning level, remaining challenges, strengths..."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-emerald",children:[e.jsx("span",{className:"mr-2",children:""}),"Recommendations & Follow-Up Plan"]}),e.jsx("textarea",{value:n.plan||"",onChange:m=>o("plan",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Future treatment recommendations, referrals, follow-up care, relapse prevention strategies, resources provided..."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-emerald",children:[e.jsx("span",{className:"mr-2",children:""}),"Prognosis"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex gap-4",children:["Excellent","Good","Fair","Guarded","Poor"].map(m=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"prognosis",value:m,checked:u("prognosis")===m,onChange:f=>p("prognosis",f.target.value),className:"w-4 h-4 text-emerald-600"}),e.jsx("span",{className:"checkbox-label",children:m})]},m))}),e.jsx("textarea",{value:u("prognosisDetails"),onChange:m=>p("prognosisDetails",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Additional prognosis details..."})]})]})]})}function Yb({note:n,onChange:c,autoSave:d}){const o=(u,p)=>{c(u,p),d&&setTimeout(()=>d(),500)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main bg-red-50 border-2 border-red-400",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-3xl",children:""}),e.jsx("h3",{className:"text-xl font-bold text-red-800",children:"Crisis/Emergency Documentation"})]}),e.jsx("p",{className:"text-sm text-red-700",children:"Document all crisis assessments, interventions, and safety planning thoroughly."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-red",children:[e.jsx("span",{className:"mr-2",children:""}),"Crisis Presentation"]}),e.jsx("textarea",{value:n.behaviorProblem||"",onChange:u=>o("behaviorProblem",u.target.value),className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Describe the crisis situation: What happened? When? Who was involved? Client's presentation and immediate concerns...",required:!0})]}),e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-400",children:[e.jsxs("h3",{className:"text-lg font-semibold text-orange-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Risk Assessment (REQUIRED)"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-orange-800 mb-2 block",children:"Risk Level"}),e.jsx("div",{className:"flex gap-4",children:["Low","Moderate","High","Imminent"].map(u=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"riskLevel",value:u,className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:`text-sm font-medium ${u==="Imminent"||u==="High"?"text-red-700":"text-gray-700"}`,children:u})]},u))})]})}),e.jsx("textarea",{value:n.riskAssessment||"",onChange:u=>o("riskAssessment",u.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"6",placeholder:`DETAILED RISK ASSESSMENT REQUIRED:
- Suicidal ideation (intent, plan, means, timeline)?
- Homicidal ideation (intent, plan, means, target)?
- Self-harm behaviors?
- Substance use/intoxication?
- Risk factors vs. protective factors
- Access to lethal means
- Support system availability
- History of attempts`,required:!0})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-red",children:[e.jsx("span",{className:"mr-2",children:""}),"Crisis Interventions Provided"]}),e.jsx("textarea",{value:n.intervention||"",onChange:u=>o("intervention",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"What interventions were used? (e.g., crisis counseling, de-escalation, safety planning, referrals, emergency contacts, medication evaluation, hospitalization consideration...)",required:!0})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-red",children:[e.jsx("span",{className:"mr-2",children:""}),"Client Response to Intervention"]}),e.jsx("textarea",{value:n.response||"",onChange:u=>o("response",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"How did client respond to interventions? Mood/affect changes? Willingness to engage in safety planning?",required:!0})]}),e.jsxs("div",{className:"card-main bg-green-50 border-2 border-green-400",children:[e.jsxs("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Safety Plan (REQUIRED)"]}),e.jsx("textarea",{value:n.plan||"",onChange:u=>o("plan",u.target.value),className:"w-full px-4 py-3 border-2 border-green-400 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none bg-white shadow-sm",rows:"6",placeholder:`DETAILED SAFETY PLAN REQUIRED:
- Warning signs/triggers identified
- Internal coping strategies
- People/places for distraction
- Support contacts (names & numbers)
- Professional resources (crisis line, emergency services)
- Means restriction (removing lethal means)
- Follow-up plan
- Emergency numbers provided (988, local crisis line, etc.)`,required:!0})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-red",children:[e.jsx("span",{className:"mr-2",children:""}),"Disposition & Follow-Up Plan"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Disposition"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:["Returned home with safety plan","Emergency contact notified","Referred to higher level of care","Voluntary hospitalization","Involuntary commitment initiated","Police/EMS contacted","Other"].map(u=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-red-600 rounded"}),e.jsx("span",{className:"checkbox-label",children:u})]},u))})]})}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Follow-up plan: Next appointment scheduled? Emergency contacts? Referrals made?"})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-red",children:[e.jsx("span",{className:"mr-2",children:""}),"Collateral Contacts (if any)"]}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Document any contact with family, emergency services, other providers, etc."})]})]})}function Fb({note:n,onChange:c,autoSave:d}){const o=n.riskAssessment||{suicidalIdeation:{present:!1,frequency:"None",intentLevel:"No intent",planDetails:"",accessToMeans:"",timeline:"",previousAttempts:""},homicidalIdeation:{present:!1,details:""},selfHarm:{present:!1,details:""},riskFactors:"",protectiveFactors:"",overallRiskLevel:"Low",safetyPlan:"",dispositionRecommendations:""},u=(m,f)=>{c(m,f),d&&setTimeout(()=>d(),500)},p=(m,f)=>{const b={...o},v=m.split(".");let j=b;for(let x=0;x<v.length-1;x++)j=j[v[x]];j[v[v.length-1]]=f,u("riskAssessment",b)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-400",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-3xl",children:""}),e.jsx("h3",{className:"text-xl font-bold text-orange-800",children:"Comprehensive Risk Assessment"})]}),e.jsx("p",{className:"text-sm text-orange-700",children:"Thorough evaluation of suicide, homicide, and self-harm risk with safety planning."})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-orange",children:[e.jsx("span",{className:"mr-2",children:""}),"Reason for Assessment"]}),e.jsx("textarea",{value:n.behaviorProblem||"",onChange:m=>u("behaviorProblem",m.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"What prompted this risk assessment?"})]}),e.jsxs("div",{className:"card-main bg-red-50 border-2 border-red-300",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Suicidal Ideation Assessment"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3 mb-2",children:[e.jsx("input",{type:"checkbox",className:"w-5 h-5 text-red-600 rounded",checked:o.suicidalIdeation.present,onChange:m=>p("suicidalIdeation.present",m.target.checked)}),e.jsx("span",{className:"font-semibold text-red-800",children:"Current suicidal ideation present"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Ideation Frequency"}),e.jsxs("select",{className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg bg-white shadow-sm",value:o.suicidalIdeation.frequency,onChange:m=>p("suicidalIdeation.frequency",m.target.value),children:[e.jsx("option",{children:"None"}),e.jsx("option",{children:"Rare (few times/year)"}),e.jsx("option",{children:"Occasional (monthly)"}),e.jsx("option",{children:"Frequent (weekly)"}),e.jsx("option",{children:"Daily"}),e.jsx("option",{children:"Constant"})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Intent Level"}),e.jsxs("select",{className:"w-full px-3 py-2 border-2 border-gray-400 rounded-lg bg-white shadow-sm",value:o.suicidalIdeation.intentLevel,onChange:m=>p("suicidalIdeation.intentLevel",m.target.value),children:[e.jsx("option",{children:"No intent"}),e.jsx("option",{children:"Low (passive wishes)"}),e.jsx("option",{children:"Moderate (some intent)"}),e.jsx("option",{children:"High (strong intent)"}),e.jsx("option",{children:"Imminent"})]})]})})]}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Plan Details"}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Is there a plan? How specific? How lethal?",value:o.suicidalIdeation.planDetails,onChange:m=>p("suicidalIdeation.planDetails",m.target.value)})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Access to Means"}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Does client have access to lethal means (firearms, medications, etc.)?",value:o.suicidalIdeation.accessToMeans,onChange:m=>p("suicidalIdeation.accessToMeans",m.target.value)})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Timeline"}),e.jsx("input",{type:"text",className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 bg-white shadow-sm",placeholder:"When? Immediate? Within days/weeks?",value:o.suicidalIdeation.timeline,onChange:m=>p("suicidalIdeation.timeline",m.target.value)})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Previous Attempts"}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-red-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"History of suicide attempts? When? Method? Outcome?",value:o.suicidalIdeation.previousAttempts,onChange:m=>p("suicidalIdeation.previousAttempts",m.target.value)})]})})]})]}),e.jsxs("div",{className:"card-main bg-red-50 border-2 border-red-300",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Homicidal/Violence Risk Assessment"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3 mb-2",children:[e.jsx("input",{type:"checkbox",className:"w-5 h-5 text-red-600 rounded",checked:o.homicidalIdeation.present,onChange:m=>p("homicidalIdeation.present",m.target.checked)}),e.jsx("span",{className:"font-semibold text-red-800",children:"Homicidal ideation or violence risk present"})]})}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Target identified? Plan? Access to weapons? History of violence? Duty to warn considerations?",value:o.homicidalIdeation.details,onChange:m=>p("homicidalIdeation.details",m.target.value)})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-orange",children:[e.jsx("span",{className:"mr-2",children:""}),"Self-Harm Assessment"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3 mb-2",children:[e.jsx("input",{type:"checkbox",className:"w-5 h-5 text-orange-600 rounded",checked:o.selfHarm.present,onChange:m=>p("selfHarm.present",m.target.checked)}),e.jsx("span",{className:"font-semibold text-gray-700",children:"Non-suicidal self-injury present"})]})}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-orange-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Methods? Frequency? Function (emotion regulation, punishment, etc.)?",value:o.selfHarm.details,onChange:m=>p("selfHarm.details",m.target.value)})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-orange",children:[e.jsx("span",{className:"mr-2",children:""}),"Risk & Protective Factors"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-red-700 mb-2 block",children:"Risk Factors"}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-red-400 rounded-lg focus:ring-2 focus:ring-red-500 resize-none bg-white shadow-sm",rows:"5",placeholder:`- Recent losses
- Substance use
- Social isolation
- Hopelessness
- Impulsivity
- Access to means
- Mental health symptoms
- Financial/legal problems`,value:o.riskFactors,onChange:m=>p("riskFactors",m.target.value)})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-green-700 mb-2 block",children:"Protective Factors"}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-green-400 rounded-lg focus:ring-2 focus:ring-green-500 resize-none bg-white shadow-sm",rows:"5",placeholder:`- Strong support system
- Reasons for living
- Engaged in treatment
- Coping skills
- Religious/spiritual beliefs
- Future goals
- Responsibility to others
- Problem-solving ability`,value:o.protectiveFactors,onChange:m=>p("protectiveFactors",m.target.value)})]})})]})]}),e.jsxs("div",{className:"card-main bg-orange-100 border-2 border-orange-400",children:[e.jsxs("h3",{className:"text-lg font-semibold text-orange-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Overall Risk Level"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex flex-wrap gap-4",children:["Low","Low-Moderate","Moderate","Moderate-High","High","Imminent"].map(m=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"overallRisk",value:m,className:"w-4 h-4 text-orange-600",checked:o.overallRiskLevel===m,onChange:f=>p("overallRiskLevel",f.target.value)}),e.jsx("span",{className:`text-sm font-medium ${m.includes("High")||m==="Imminent"?"text-red-700":"text-gray-700"}`,children:m})]},m))}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Clinical Rationale"}),e.jsx("textarea",{value:o.dispositionRecommendations,onChange:m=>p("dispositionRecommendations",m.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Clinical rationale for risk level determination...",required:!0})]})})]})]}),e.jsxs("div",{className:"card-main bg-green-50 border-2 border-green-400",children:[e.jsxs("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Interventions & Safety Plan"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Interventions Provided"}),e.jsx("textarea",{value:n.intervention||"",onChange:m=>u("intervention",m.target.value),className:"w-full px-4 py-3 border-2 border-green-400 rounded-lg focus:ring-2 focus:ring-green-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Crisis counseling, means restriction, emergency contacts, referrals..."})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Safety Plan"}),e.jsx("textarea",{value:n.plan||"",onChange:m=>u("plan",m.target.value),className:"w-full px-4 py-3 border-2 border-green-400 rounded-lg focus:ring-2 focus:ring-green-500 resize-none bg-white shadow-sm",rows:"6",placeholder:`Detailed safety plan:
- Warning signs
- Coping strategies
- Distraction activities
- Support contacts (names & numbers)
- Professional resources
- Crisis line numbers (988)
- Means restriction plan
- Follow-up schedule`,required:!0})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-orange",children:[e.jsx("span",{className:"mr-2",children:""}),"Follow-Up Plan & Recommendations"]}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-orange-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Next appointment? Frequency of contact? Collateral involvement? Referrals? Hospitalization? Level of care recommendations?",value:o.safetyPlan,onChange:m=>p("safetyPlan",m.target.value)})]})]})}function Gb({note:n,onChange:c,autoSave:d}){const o=(u,p)=>{c(u,p),d&&setTimeout(()=>d(),500)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Type of Administrative Note"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:["Care coordination","Consultation with colleague","Phone contact","Email correspondence","Collateral contact","Documentation review","Treatment planning","Case management","Supervision notes","Peer review","Quality assurance","Insurance coordination","Referral coordination","Records request","Other"].map(u=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-gray-600 rounded"}),e.jsx("span",{className:"checkbox-label",children:u})]},u))})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Details"]}),e.jsx("textarea",{value:n.behaviorProblem||"",onChange:u=>o("behaviorProblem",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 resize-none bg-white shadow-sm",rows:"8",placeholder:`Document the administrative activity:

- Date and time
- Who was involved (names, roles)
- Purpose of contact/activity
- Information discussed or exchanged
- Decisions made
- Follow-up needed
- Documents generated or reviewed`})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Participants/Contacts"]}),e.jsx("textarea",{value:n.intervention||"",onChange:u=>o("intervention",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Who was involved? (Names, organizations, roles)"})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Outcome & Actions Taken"]}),e.jsx("textarea",{value:n.response||"",onChange:u=>o("response",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"What was accomplished? Any decisions or agreements?"})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Follow-Up Required"]}),e.jsx("textarea",{value:n.plan||"",onChange:u=>o("plan",u.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Next steps? Who is responsible? Timeline?"})]}),e.jsxs("div",{className:"card-main bg-gray-50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:[e.jsx("span",{className:"mr-2",children:""}),"Additional Notes"]}),e.jsx("textarea",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Any other relevant information..."})]}),e.jsxs("div",{className:"card-main bg-blue-50 border-2 border-blue-300",children:[e.jsxs("h3",{className:"section-header-blue",children:[e.jsx("span",{className:"mr-2",children:""}),"Time Documentation"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Duration (minutes)"}),e.jsx("input",{type:"number",className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white shadow-sm",placeholder:"0",min:"0"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Billable?"}),e.jsxs("select",{className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white shadow-sm",children:[e.jsx("option",{children:"Yes"}),e.jsx("option",{children:"No"}),e.jsx("option",{children:"To be determined"})]})]})})]})]})]})}const Xb=["Mild","Moderate","Severe","In partial remission","In full remission","With psychotic features","Unspecified"],qh=n=>!n||n.length<4?n:n.slice(0,3)+"."+n.slice(3);function $b({selectedCodes:n=[],onChange:c,maxBillable:d=4,showBillableToggle:o=!0,showPrimarySelector:u=!0,showSeveritySelector:p=!0,disabled:m=!1}){const[f,b]=g.useState(""),[v,j]=g.useState([]),[x,y]=g.useState(!1),[C,N]=g.useState(!1),[_,A]=g.useState(null),[E,O]=g.useState({top:0,left:0,width:0}),Y=g.useRef(null),I=g.useRef(null),$=g.useRef(null);g.useEffect(()=>{if(Y.current&&clearTimeout(Y.current),f.length<2){j([]),N(!1);return}return Y.current=setTimeout(async()=>{y(!0),A(null);try{const z=await Q0(f,"ICD10",50);j(z.codes||[]),N(!0)}catch(z){console.error("Error searching codes:",z),A("Failed to search codes. Please try again."),j([])}finally{y(!1)}},300),()=>{Y.current&&clearTimeout(Y.current)}},[f]),g.useEffect(()=>{if(C&&$.current){const z=$.current.getBoundingClientRect();O({top:z.bottom+window.scrollY,left:z.left+window.scrollX,width:z.width})}},[C]),g.useEffect(()=>{const z=H=>{I.current&&!I.current.contains(H.target)&&N(!1)};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]);const le=z=>{if(n.some(S=>S.code===z.code)){A(`${z.code} is already selected`);return}const H=n.filter(S=>S.billable).length,D={code:z.code,description:z.description,billable:H<d,primary:n.length===0,severity:null};c([...n,D]),b(""),N(!1),A(null)},V=z=>{const H=n.filter(D=>D.code!==z);n.find(D=>D.code===z)?.primary&&H.length>0&&(H[0].primary=!0),c(H)},X=(z,H,D)=>{const S=n.map(k=>{if(k.code===z){const U={...k,[H]:D};return U}return H==="primary"&&D===!0?{...k,primary:!1}:k});if(H==="billable"&&D===!0&&S.filter(U=>U.billable).length>d){A(`Maximum ${d} billable diagnoses allowed`);return}c(S),A(null)},ge=z=>{if(z===0)return;const H=[...n];[H[z-1],H[z]]=[H[z],H[z-1]],c(H)},he=z=>{if(z===n.length-1)return;const H=[...n];[H[z],H[z+1]]=[H[z+1],H[z]],c(H)},xe=n.filter(z=>z.billable).length,q=()=>{if(!C)return null;const z=e.jsx("div",{ref:I,style:{position:"absolute",top:`${E.top}px`,left:`${E.left}px`,width:`${E.width}px`,zIndex:9999},className:"mt-2 bg-white border-2 border-gray-200 rounded-lg shadow-xl max-h-96 overflow-y-auto",children:v.length>0?v.map((H,D)=>e.jsxs("button",{onClick:()=>le(H),className:"w-full px-4 py-3 text-left hover:bg-blue-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:qh(H.code)}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:H.description})]},D)):!x&&f.length>=2&&e.jsxs("div",{className:"p-4 text-center text-gray-500",children:['No codes found matching "',f,'"']})});return C0.createPortal(z,document.body)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(se,{children:["Search ICD-10 Codes",e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",xe,"/",d," billable selected)"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:$,type:"text",value:f,onChange:z=>b(z.target.value),placeholder:"Search by code or description (e.g., F41.1 or anxiety)...",disabled:m,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm disabled:bg-gray-100 disabled:cursor-not-allowed"}),x&&e.jsx("div",{className:"absolute right-3 top-3",children:e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-blue-500 border-t-transparent rounded-full"})})]})]}),q(),_&&e.jsx(Qi,{children:_}),n.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700",children:["Selected Diagnoses (",n.length,")"]}),n.map((z,H)=>e.jsx("div",{className:`bg-white border-2 rounded-lg p-4 ${z.primary?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-bold text-gray-900",children:qh(z.code)}),z.primary&&e.jsx("span",{className:"px-2 py-0.5 bg-blue-500 text-white text-xs font-semibold rounded",children:"PRIMARY"}),z.billable&&e.jsx("span",{className:"px-2 py-0.5 bg-green-500 text-white text-xs font-semibold rounded",children:"BILLABLE"})]}),e.jsx("p",{className:"checkbox-label",children:z.description}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-3",children:[o&&e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:z.billable,onChange:D=>X(z.code,"billable",D.target.checked),disabled:m||!z.billable&&xe>=d,className:"checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Billable"})]}),u&&e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"primary-diagnosis",checked:z.primary,onChange:()=>X(z.code,"primary",!0),disabled:m,className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"checkbox-label",children:"Primary"})]}),p&&e.jsxs("select",{value:z.severity||"",onChange:D=>X(z.code,"severity",D.target.value||null),disabled:m,className:"text-sm border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"-- Severity --"}),Xb.map(D=>e.jsx("option",{value:D,children:D},D))]})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{onClick:()=>ge(H),disabled:m||H===0,className:"p-1 text-gray-500 hover:text-gray-700 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move up",children:""}),e.jsx("button",{onClick:()=>he(H),disabled:m||H===n.length-1,className:"p-1 text-gray-500 hover:text-gray-700 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move down",children:""}),e.jsx("button",{onClick:()=>V(z.code),disabled:m,className:"p-1 text-red-500 hover:text-red-700 disabled:opacity-30 disabled:cursor-not-allowed",title:"Remove",children:""})]})]})},z.code))]}),n.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:"No diagnoses selected. Search and select ICD-10 codes above."})]})}function Qb({note:n,onChange:c,disabled:d=!1}){const o=(m,f)=>{c(m,f)},u=m=>{o("diagnosis_codes",JSON.stringify(m))};let p=[];try{if(n.diagnosis_codes)if(typeof n.diagnosis_codes=="string"){const m=n.diagnosis_codes.trim();m.length>0&&(p=JSON.parse(m))}else Array.isArray(n.diagnosis_codes)&&(p=n.diagnosis_codes)}catch(m){console.error("Failed to parse diagnosis_codes, using empty array:",m,n.diagnosis_codes),p=[]}return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border-2 border-purple-200 rounded-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Diagnosis Assessment"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This diagnosis note serves as the clinical source of truth and will automatically sync billable codes to the billing system when signed."})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"ICD-10 Diagnosis Codes"}),e.jsx("div",{className:"card-inner",children:e.jsx($b,{selectedCodes:p,onChange:u,maxBillable:4,showBillableToggle:!0,showPrimarySelector:!0,showSeveritySelector:!0,disabled:d})})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Clinical Assessment"}),e.jsxs("div",{className:"card-inner space-y-6",children:[e.jsxs("div",{children:[e.jsxs(se,{children:["Symptoms Reported by Client",e.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(What the client describes)"})]}),e.jsx("textarea",{value:n.symptoms_reported||"",onChange:m=>o("symptoms_reported",m.target.value),disabled:d,rows:4,placeholder:"Document symptoms as reported by the client in their own words...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsxs(se,{children:["Symptoms Observed by Clinician",e.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(What you directly observe)"})]}),e.jsx("textarea",{value:n.symptoms_observed||"",onChange:m=>o("symptoms_observed",m.target.value),disabled:d,rows:4,placeholder:"Document observable symptoms, behavioral indicators, presentation...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Duration of Symptoms"}),e.jsx("textarea",{value:n.duration_of_symptoms||"",onChange:m=>o("duration_of_symptoms",m.target.value),disabled:d,rows:2,placeholder:"How long have symptoms been present? When did they begin?",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Diagnostic Reasoning"}),e.jsxs("div",{className:"card-inner space-y-6",children:[e.jsxs("div",{children:[e.jsxs(se,{children:["Clinical Justification",e.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(Why this diagnosis?)"})]}),e.jsx("textarea",{value:n.clinical_justification||"",onChange:m=>o("clinical_justification",m.target.value),disabled:d,rows:5,placeholder:"Explain the clinical reasoning for this diagnosis. Include DSM-5 criteria met, frequency/intensity of symptoms, impact on functioning...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsxs(se,{children:["Differential Diagnosis",e.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(What else was considered and ruled out?)"})]}),e.jsx("textarea",{value:n.differential_diagnosis||"",onChange:m=>o("differential_diagnosis",m.target.value),disabled:d,rows:4,placeholder:"Document other diagnoses considered and reasons they were ruled out...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsxs(se,{children:["Severity & Specifiers",e.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(Additional clinical details)"})]}),e.jsx("textarea",{value:n.severity_specifiers||"",onChange:m=>o("severity_specifiers",m.target.value),disabled:d,rows:3,placeholder:"Document severity level, course specifiers, additional features (e.g., 'with anxious distress', 'in partial remission')...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Functional Impact"}),e.jsxs("div",{className:"card-inner",children:[e.jsxs(se,{children:["Functional Impairment",e.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(How symptoms affect daily life and functioning)"})]}),e.jsx("textarea",{value:n.functional_impairment||"",onChange:m=>o("functional_impairment",m.target.value),disabled:d,rows:4,placeholder:"Document impact on work, relationships, self-care, social functioning, occupational performance...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Diagnosis History"}),e.jsxs("div",{className:"card-inner",children:[e.jsxs(se,{children:["Previous Diagnoses",e.jsx("span",{className:"ml-2 text-gray-500 font-normal",children:"(Prior diagnostic history and changes)"})]}),e.jsx("textarea",{value:n.previous_diagnoses||"",onChange:m=>o("previous_diagnoses",m.target.value),disabled:d,rows:3,placeholder:"Document previous diagnoses, when they were assigned, by whom, and any changes or revisions...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-6",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:" Billing Integration"}),e.jsx("p",{className:"text-sm text-blue-800",children:"When you sign this diagnosis note, the following will happen automatically:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-blue-800 mt-2 space-y-1",children:[e.jsxs("li",{children:["Billable diagnoses (",p.filter(m=>m.billable).length," selected) will be added to the billing system"]}),e.jsx("li",{children:"Previous diagnoses will be marked as inactive"}),e.jsx("li",{children:"This note becomes the source of truth for all clinical documentation"}),e.jsx("li",{children:"Other notes will reference these diagnoses automatically"})]})]})]})}function Vb({note:n,onChange:c,autoSave:d}){const o=(m,f)=>{c(m,f),d&&setTimeout(()=>d(),500)},u=m=>(n.treatmentPlan||{})[m]||"",p=(m,f)=>{const b=n.treatmentPlan||{};o("treatmentPlan",{...b,[m]:f})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-blue",children:[e.jsx("span",{className:"mr-2",children:""}),"Treatment Goals"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"What are the primary goals of treatment? What does the client hope to achieve?"}),e.jsx("textarea",{value:u("goals"),onChange:m=>p("goals",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"5",placeholder:`Example:
1. Reduce anxiety symptoms to manageable levels
2. Develop healthy coping strategies for stress
3. Improve relationships with family members
4. Return to work/school functioning`})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-blue",children:[e.jsx("span",{className:"mr-2",children:""}),"Target Behaviors & Objectives"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"Specific, measurable objectives. What behaviors or symptoms will change?"}),e.jsx("textarea",{value:u("objectives"),onChange:m=>p("objectives",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"5",placeholder:`Example:
- Client will identify and challenge 3 cognitive distortions per week
- Client will practice deep breathing exercises daily
- Client will attend all scheduled sessions
- Client will report anxiety level of 5 or below (0-10 scale) within 8 weeks`})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-blue",children:[e.jsx("span",{className:"mr-2",children:""}),"Interventions & Treatment Modalities"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"What therapeutic approaches, techniques, or interventions will be used?"}),e.jsx("textarea",{value:u("interventions"),onChange:m=>p("interventions",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"5",placeholder:`Example:
- Cognitive Behavioral Therapy (CBT)
- Dialectical Behavior Therapy (DBT) skills training
- Mindfulness and relaxation techniques
- EMDR for trauma processing
- Family therapy sessions (as needed)
- Psychoeducation about anxiety/depression`})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-blue",children:[e.jsx("span",{className:"mr-2",children:""}),"Treatment Frequency & Expected Duration"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Session Frequency"}),e.jsx("textarea",{value:u("frequency"),onChange:m=>p("frequency",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Example: Weekly 50-minute sessions, with option to increase to twice weekly if needed"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Expected Duration of Treatment"}),e.jsx("textarea",{value:u("duration"),onChange:m=>p("duration",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Example: 12-16 weeks of weekly therapy, with ongoing reassessment of progress"})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-blue",children:[e.jsx("span",{className:"mr-2",children:""}),"Potential Barriers & Mitigation Strategies"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"What might interfere with treatment success? How will barriers be addressed?"}),e.jsx("textarea",{value:u("barriers"),onChange:m=>p("barriers",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:`Example:
- Transportation issues  Offer telehealth options
- Work schedule conflicts  Offer early morning or evening appointments
- Financial concerns  Sliding scale fee, connect with financial assistance resources
- Language barriers  Provide interpreter services`})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-blue",children:[e.jsx("span",{className:"mr-2",children:""}),"Discharge Criteria & Success Indicators"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"How will we know treatment has been successful? What indicates readiness for discharge?"}),e.jsx("textarea",{value:u("dischargeCriteria"),onChange:m=>p("dischargeCriteria",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:`Example:
- Client reports anxiety symptoms manageable without therapy support
- Client demonstrates consistent use of coping skills
- Client feels confident managing stressors independently
- Client has achieved treatment goals
- Client expresses readiness to discontinue therapy`})]}),e.jsxs("div",{className:"card-main bg-blue-50 border-2 border-blue-300",children:[e.jsxs("h3",{className:"section-header-blue",children:[e.jsx("span",{className:"mr-2",children:""}),"Client Agreement & Collaboration"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"Document client's understanding, agreement, and input on the treatment plan"}),e.jsx("textarea",{value:u("clientAgreement"),onChange:m=>p("clientAgreement",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Example: Client reviewed treatment plan and expressed agreement with goals and proposed interventions. Client voiced concerns about time commitment, and we agreed to reassess frequency after 4 weeks."})]})]})}function Zb({note:n,onChange:c,autoSave:d}){const o=(m,f)=>{c(m,f),d&&setTimeout(()=>d(),500)},u=[{value:"noshow",label:"No Show",description:"Client did not attend, no notice given"},{value:"late_cancel",label:"Late Cancellation",description:"Canceled within 24 hours of appointment"},{value:"cancel",label:"Cancellation",description:"Canceled with adequate notice"},{value:"late_arrival",label:"Late Arrival",description:"Client arrived late to session"}],p=n.appointmentStatus||"noshow";return u.find(m=>m.value===p),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main bg-gray-50",children:[e.jsxs("h3",{className:"section-header-gray",children:[e.jsx("span",{className:"mr-2",children:""}),"Appointment Status"]}),e.jsx("div",{className:"space-y-3",children:u.map(m=>e.jsxs("label",{className:`flex items-start gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all ${p===m.value?"border-blue-500 bg-blue-50":"border-gray-300 bg-white hover:border-gray-400"}`,children:[e.jsx("input",{type:"radio",name:"appointmentStatus",value:m.value,checked:p===m.value,onChange:f=>o("appointmentStatus",f.target.value),className:"mt-1 w-4 h-4 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:m.label}),e.jsx("div",{className:"text-sm text-gray-600",children:m.description})]})]},m.value))})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-gray",children:[e.jsx("span",{className:"mr-2",children:""}),"Reason / Additional Details"]}),e.jsx("textarea",{value:n.statusReason||"",onChange:m=>o("statusReason",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"Provide additional context: Why did the client cancel? When were you notified? Any relevant circumstances?"})]}),e.jsxs("div",{className:"card-main bg-yellow-50 border-2 border-yellow-300",children:[e.jsxs("h3",{className:"section-header-gray",children:[e.jsx("span",{className:"mr-2",children:""}),"Billing Impact"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:n.chargeApplied||!1,onChange:m=>o("chargeApplied",m.target.checked),className:"checkbox"}),e.jsx("span",{className:"checkbox-label",children:"Late cancellation/no-show charge applied"})]}),n.chargeApplied&&e.jsx("textarea",{value:n.chargeDetails||"",onChange:m=>o("chargeDetails",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"2",placeholder:"Charge amount and details..."})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-gray",children:[e.jsx("span",{className:"mr-2",children:""}),"Follow-up Action"]}),e.jsx("textarea",{value:n.followUpAction||"",onChange:m=>o("followUpAction",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"What follow-up is needed? Call client to reschedule? Send reminder? Review cancellation policy?"})]})]})}function Jb({note:n,onChange:c,autoSave:d}){const o=(m,f)=>{c(m,f),d&&setTimeout(()=>d(),500)},u=[{value:"phone",label:" Phone Call",icon:""},{value:"email",label:" Email",icon:""},{value:"text",label:" Text Message",icon:""},{value:"portal",label:" Patient Portal",icon:""},{value:"voicemail",label:" Voicemail",icon:""}],p=n.contactMethod||"phone";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main bg-blue-50",children:[e.jsxs("h3",{className:"section-header-gray",children:[e.jsx("span",{className:"mr-2",children:""}),"Contact Method"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:u.map(m=>e.jsxs("label",{className:`flex flex-col items-center gap-2 p-4 rounded-lg border-2 cursor-pointer transition-all ${p===m.value?"border-blue-500 bg-blue-100":"border-gray-300 bg-white hover:border-gray-400"}`,children:[e.jsx("input",{type:"radio",name:"contactMethod",value:m.value,checked:p===m.value,onChange:f=>o("contactMethod",f.target.value),className:"sr-only"}),e.jsx("div",{className:"text-3xl",children:m.icon}),e.jsx("div",{className:"text-sm font-semibold text-gray-800 text-center",children:m.label.replace(/^.+ /,"")})]},m.value))})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-gray",children:[e.jsx("span",{className:"mr-2",children:""}),"Date & Time of Contact"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Date"}),e.jsx("input",{type:"date",value:n.contactDate||"",onChange:m=>o("contactDate",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:"Time"}),e.jsx("input",{type:"time",value:n.contactTime||"",onChange:m=>o("contactTime",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm"})]})})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-gray",children:[e.jsx("span",{className:"mr-2",children:""}),"Reason for Contact"]}),e.jsx("textarea",{value:n.contactReason||"",onChange:m=>o("contactReason",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Why did the client reach out? What did they need or want to discuss?"})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-gray",children:[e.jsx("span",{className:"mr-2",children:""}),"Summary of Communication"]}),e.jsx("textarea",{value:n.communicationSummary||"",onChange:m=>o("communicationSummary",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"5",placeholder:"Summarize the content of the communication. What was discussed? What information was provided?"})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"section-header-gray",children:[e.jsx("span",{className:"mr-2",children:""}),"Action Taken / Response Provided"]}),e.jsx("textarea",{value:n.actionTaken||"",onChange:m=>o("actionTaken",m.target.value),className:"w-full px-4 py-3 border-2 border-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none bg-white shadow-sm",rows:"4",placeholder:"How did you respond? What actions were taken? Any referrals or resources provided? Follow-up needed?"})]}),e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.urgentFlag||!1,onChange:m=>o("urgentFlag",m.target.checked),className:"w-5 h-5 text-orange-600 rounded focus:ring-orange-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-semibold text-gray-800",children:" Urgent or Crisis-Related Contact"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Check if this contact involved safety concerns, crisis, or urgent clinical needs"})]})]}),n.urgentFlag&&e.jsx("div",{className:"mt-4",children:e.jsx("textarea",{value:n.urgentDetails||"",onChange:m=>o("urgentDetails",m.target.value),className:"w-full px-4 py-3 border-2 border-orange-400 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none bg-white shadow-sm",rows:"3",placeholder:"Describe the urgent nature of the contact and actions taken to address safety/crisis concerns..."})})]})]})}function Pb({noteType:n,patientId:c,appointmentId:d=null,serviceDate:o,onSave:u,onCancel:p}){const[m,f]=g.useState(""),[b,v]=g.useState(!1),[j,x]=g.useState(""),[y,C]=g.useState(""),[N,_]=g.useState(!1),[A,E]=g.useState(!0),[O,Y]=g.useState(!1),[I,$]=g.useState(null),le=n==="noshow",V=n==="cancel",X=async ge=>{ge.preventDefault(),Y(!0),$(null);try{let he="";le?(he=`CLIENT DID NOT ATTEND SCHEDULED APPOINTMENT

`,m&&(he+=`Reason (if known): ${m}

`),b?(he+=`Contact Attempted: Yes
`,he+=`Method: ${j}
`,he+=`Result: ${y}

`):he+=`Contact Attempted: No

`,he+=`Plan: ${N?"Billable no-show fee applies.":"No-show fee waived."} Will follow up to reschedule.`):V&&(he=`APPOINTMENT CANCELLED

`,m&&(he+=`Reason: ${m}

`),he+="Plan: Will reschedule as needed.");const q=await yo({patientId:c,appointmentId:d,noteType:n,serviceDate:o,templateType:"quick",plan:he,status:A?"signed":"draft"});A&&q.noteId&&await hf(q.noteId),u&&u(q)}catch(he){console.error("Error saving quick note:",he),$(he.message||"Failed to save note")}finally{Y(!1)}};return e.jsx("div",{className:"max-w-2xl mx-auto p-6",children:e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:le?" No-Show Note":" Cancellation Note"}),e.jsxs("p",{className:"text-gray-600",children:["Quick documentation for ",le?"missed appointment":"cancelled session"]})]}),I&&e.jsx(Qi,{children:I}),e.jsxs("form",{onSubmit:X,className:"space-y-6",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-label block mb-2",children:le?"Reason (if known)":"Reason for Cancellation"}),e.jsx("textarea",{value:m,onChange:ge=>f(ge.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:"3",placeholder:le?"e.g., Client called to report illness":"e.g., Family emergency"})]})}),le&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[e.jsxs("label",{className:"flex items-center gap-3 mb-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:ge=>v(ge.target.checked),className:"checkbox"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Attempted to contact client"})]}),b&&e.jsxs("div",{className:"space-y-3 ml-8",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Contact Method"}),e.jsxs("select",{value:j,onChange:ge=>x(ge.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select method..."}),e.jsx("option",{value:"Phone",children:"Phone"}),e.jsx("option",{value:"Email",children:"Email"}),e.jsx("option",{value:"Text/SMS",children:"Text/SMS"}),e.jsx("option",{value:"Patient Portal",children:"Patient Portal"})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Result"}),e.jsxs("select",{value:y,onChange:ge=>C(ge.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select result..."}),e.jsx("option",{value:"Left voicemail",children:"Left voicemail"}),e.jsx("option",{value:"Spoke with client",children:"Spoke with client"}),e.jsx("option",{value:"No answer",children:"No answer"}),e.jsx("option",{value:"Message sent",children:"Message sent"}),e.jsx("option",{value:"Awaiting response",children:"Awaiting response"})]})]})})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:N,onChange:ge=>_(ge.target.checked),className:"checkbox"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Apply no-show fee (billable)"})]})})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:A,onChange:ge=>E(ge.target.checked),className:"checkbox"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Sign and lock note immediately"})]}),e.jsx("p",{className:"text-xs text-gray-600 ml-8 mt-1",children:"Recommended for simple administrative notes"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:p,disabled:O,className:"flex-1 px-6 py-3 bg-gray-500 text-white font-semibold rounded-xl hover:bg-gray-600 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:O,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:O?"Saving...":"Save Note"})]})]})]})})}function Kb({patient:n,provider:c,serviceInfo:d,diagnosis:o,serviceDate:u}){const p=b=>{if(!b)return"N/A";const[v,j,x]=b.split(/[-T]/);return new Date(v,j-1,x).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})},m=b=>{if(!b)return"Not set";const v=Math.floor(b/60),j=b%60;return v>0&&j>0?`${v}h ${j}m`:v>0?`${v}h`:`${j}m`},f=b=>{if(!b)return"";const v=b.split(/\s{3,}/);return v.length>1?v[1].trim():b.trim()};return e.jsxs("div",{className:"card-main mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Patient Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Name:"}),e.jsxs("span",{className:"text-base font-semibold text-gray-900",children:[n?.fname," ",n?.mname," ",n?.lname]})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"DOB:"}),e.jsxs("span",{className:"text-sm text-gray-800",children:[n?.DOB?p(n.DOB):"N/A",n?.DOB&&e.jsxs("span",{className:"ml-2 text-gray-500",children:["(Age ",new Date().getFullYear()-new Date(n.DOB).getFullYear(),")"]})]})]}),n?.pid&&e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Patient ID:"}),e.jsx("span",{className:"text-sm text-gray-800 font-mono",children:n.pid})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Service Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Provider:"}),e.jsxs("span",{className:"text-base font-semibold text-gray-900",children:[c?.fullName||c?.fname+" "+c?.lname,c?.credentials&&e.jsx("span",{className:"ml-2 text-sm font-normal text-gray-600",children:c.credentials})]})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Date:"}),e.jsx("span",{className:"text-sm text-gray-800 font-semibold",children:p(u)})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Type:"}),e.jsx("span",{className:"text-sm text-gray-800",children:d?.type||"Individual Therapy"})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Location:"}),e.jsx("span",{className:"text-sm text-gray-800",children:d?.location||"Office"})]}),d?.duration&&e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Duration:"}),e.jsx("span",{className:"text-sm text-gray-800",children:m(d.duration)})]})]})]})]}),o&&e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Primary Diagnosis:"}),e.jsx("span",{className:"text-sm text-gray-900 font-medium",children:f(o)})]})})]})}const Wb=n=>({progress:"BIRP",intake:"Intake",diagnosis:"Diagnosis",treatment_plan:"TreatmentPlan",mse:"MSE",discharge:"Discharge",crisis:"Crisis",risk_assessment:"RiskAssessment",appointment_status:"AppointmentStatus",client_communication:"ClientCommunication",admin:"Administrative",noshow:"AppointmentStatus",cancel:"AppointmentStatus"})[n]||"BIRP";function Fi({noteId:n=null,patientId:c,appointmentId:d=null,noteType:o,onClose:u,onSave:p}){const m=Wb(o),[f,b]=g.useState({patientId:c,appointmentId:d,noteType:o,templateType:m,serviceDate:new Date().toISOString().split("T")[0],behaviorProblem:"",intervention:"",response:"",plan:"",riskPresent:!1,riskAssessment:"",interventionsSelected:[],clientPresentation:[],goalsAddressed:[],status:"draft"}),[v,j]=g.useState(!1),[x,y]=g.useState(!1),[C,N]=g.useState(!1),[_,A]=g.useState(null),[E,O]=g.useState(null),[Y,I]=g.useState(null),[$,le]=g.useState(null),[V,X]=g.useState(null),[ge,he]=g.useState(null),[xe,q]=g.useState(null),z=g.useRef(null),H=g.useRef(n);g.useEffect(()=>{D(),S(),k()},[n,d,c]),g.useEffect(()=>(z.current&&clearTimeout(z.current),z.current=setTimeout(()=>{U()},3e3),()=>{z.current&&clearTimeout(z.current)}),[f]);const D=async()=>{j(!0),O(null);try{if(n){const F=await mf(n);b({...f,...F.note}),H.current=n}else{const F={};d?F.appointment_id=d:c&&(F.patient_id=c);try{const P=await Z0(F);if(P.draft){const ue=P.draft.draft_content;ue.noteType===o?(b({...f,...ue}),console.log("Restored draft from server")):console.log("Server draft note type mismatch, skipping restore. Expected:",o,"Got:",ue.noteType)}}catch{console.log("No draft found, starting fresh")}const fe=localStorage.getItem(`note_draft_${c}_${d||"new"}_${o}`);if(fe)try{const P=JSON.parse(fe);P.noteType===o?(b({...f,...P}),console.log("Restored draft from localStorage")):(console.log("Draft note type mismatch, skipping restore"),localStorage.removeItem(`note_draft_${c}_${d||"new"}_${o}`))}catch{console.error("Failed to parse localStorage draft")}}}catch(F){console.error("Error loading note:",F),O(F.message)}finally{j(!1)}},S=async()=>{try{const F=await J0();I(F.settings),!f.templateType&&F.settings.default_note_template&&b(fe=>({...fe,templateType:F.settings.default_note_template}))}catch(F){console.error("Error loading settings:",F)}},k=async()=>{try{if(c)try{const F=await uf(c);if(console.log(" Patient data loaded:",F),le(F.patient),F.problems&&F.problems.length>0){const fe=F.problems[0],P=fe.title||fe.diagnosis||null;q(P),console.log(" Primary diagnosis loaded:",P)}}catch(F){console.error(" Error loading patient data:",F)}try{const F=await $i();console.log(" Provider data loaded:",F),X(F)}catch(F){console.error(" Error loading provider data:",F)}he({type:"Individual Therapy",location:"Office",duration:null})}catch(F){console.error(" Error loading metadata:",F)}},U=g.useCallback(async()=>{if(!(f.status==="signed"||f.is_locked)){N(!0);try{localStorage.setItem(`note_draft_${c}_${d||"new"}_${f.noteType}`,JSON.stringify(f));const F={noteId:H.current,patientId:f.patientId,appointmentId:f.appointmentId,noteType:f.noteType,serviceDate:f.serviceDate,draftContent:f};await G0(F),A(new Date)}catch(F){console.error("Auto-save failed:",F)}finally{N(!1)}}},[f,c,d]),ie=(F,fe)=>{b(P=>({...P,[F]:fe}))},be=async()=>{y(!0),O(null);try{if(H.current)await Hh(H.current,f);else{const F=await yo(f);H.current=F.noteId}A(new Date),p&&p({noteId:H.current,status:"draft"})}catch(F){console.error("Error saving draft:",F),O(F.message)}finally{y(!1)}},T=async()=>{y(!0),O(null);try{if(H.current)await Hh(H.current,f);else{const F=await yo({...f,status:"draft"});H.current=F.noteId}await hf(H.current),localStorage.removeItem(`note_draft_${c}_${d||"new"}_${f.noteType}`),p&&p({noteId:H.current,status:"signed"}),u&&u()}catch(F){console.error("Error signing note:",F),O(F.message)}finally{y(!1)}},L=()=>{u&&u()},W=async()=>{if(window.confirm("Are you sure you want to delete this draft? This cannot be undone.")){y(!0),O(null);try{await X0(H.current),localStorage.removeItem(`note_draft_${c}_${d||"new"}_${f.noteType}`),u&&u()}catch(F){console.error("Error deleting note:",F),O("Failed to delete note: "+F.message)}finally{y(!1)}}};return o==="noshow"||o==="cancel"?e.jsx(Pb,{noteType:o,patientId:c,appointmentId:d,serviceDate:f.serviceDate,onSave:p,onCancel:u}):v?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"text-gray-600",children:"Loading note..."})}):e.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h1",{className:"text-2xl font-semibold text-gray-800",children:[o==="progress"&&" Progress Note",o==="intake"&&" Intake Assessment",o==="crisis"&&" Crisis Note",o==="discharge"&&" Discharge Summary",o==="mse"&&" Mental Status Exam",o==="risk_assessment"&&" Risk Assessment",o==="diagnosis"&&" Diagnosis Note",o==="admin"&&" Administrative Note"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[C&&e.jsx("span",{className:"text-sm text-blue-600",children:"Saving..."}),_&&!C&&e.jsxs("span",{className:"text-sm text-gray-600",children:["Saved ",_.toLocaleTimeString()]})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Service Date:"}),e.jsx("input",{type:"date",value:f.serviceDate,onChange:F=>ie("serviceDate",F.target.value),className:"px-3 py-1 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})})]}),E&&e.jsx(Qi,{children:E}),($||V)&&e.jsx(Kb,{patient:$,provider:V,serviceInfo:ge,diagnosis:xe,serviceDate:f.serviceDate}),e.jsxs("div",{className:"mb-6",children:[f.templateType==="BIRP"&&e.jsx(Ob,{note:f,onChange:ie,patientId:c,autoSave:U}),f.templateType==="PIRP"&&e.jsx(Lb,{note:f,onChange:ie,patientId:c,autoSave:U}),f.templateType==="MSE"&&e.jsx(Ub,{note:f,onChange:ie,autoSave:U}),f.templateType==="Intake"&&e.jsx(Hb,{note:f,onChange:ie,autoSave:U}),f.templateType==="Discharge"&&e.jsx(qb,{note:f,onChange:ie,autoSave:U}),f.templateType==="Crisis"&&e.jsx(Yb,{note:f,onChange:ie,autoSave:U}),f.templateType==="RiskAssessment"&&e.jsx(Fb,{note:f,onChange:ie,autoSave:U}),f.templateType==="Diagnosis"&&e.jsx(Qb,{note:f,onChange:ie,disabled:f.is_locked}),f.templateType==="TreatmentPlan"&&e.jsx(Vb,{note:f,onChange:ie,autoSave:U}),f.templateType==="AppointmentStatus"&&e.jsx(Zb,{note:f,onChange:ie,autoSave:U}),f.templateType==="ClientCommunication"&&e.jsx(Jb,{note:f,onChange:ie,autoSave:U}),f.templateType==="Administrative"&&e.jsx(Gb,{note:f,onChange:ie,autoSave:U})]}),e.jsx("div",{className:"sticky bottom-6 mt-8",children:e.jsx("div",{className:"card-main shadow-2xl",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:L,disabled:x,className:"px-6 py-3 bg-gray-500 text-white font-semibold rounded-xl hover:bg-gray-600 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),H.current&&!f.is_locked&&f.status!=="signed"&&e.jsx("button",{type:"button",onClick:W,disabled:x,className:"px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white font-semibold rounded-xl hover:from-red-600 hover:to-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:" Delete Draft"}),e.jsx("button",{type:"button",onClick:be,disabled:x||C,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-semibold rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Saving...":"Save Draft"}),e.jsx("button",{type:"button",onClick:T,disabled:x||C,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white font-semibold rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Signing...":" Sign & Lock Note"})]})})})]})}function _f({noteId:n,onClose:c,onEdit:d,onAddendum:o}){const[u,p]=g.useState(null),[m,f]=g.useState(!0),[b,v]=g.useState(null);g.useEffect(()=>{j()},[n]);const j=async()=>{f(!0),v(null);try{const A=await mf(n);p(A.note)}catch(A){console.error("Error loading note:",A),v(A.message)}finally{f(!1)}},x=A=>{if(!A)return"N/A";const[E,O,Y]=A.split(/[-T]/);return new Date(E,O-1,Y).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})},y=A=>A?new Date(A).toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}):"N/A",C=A=>{if(!A)return"";const E=A.split(/\s{3,}/);return E.length>1?E[1].trim():A.trim()};if(m)return e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"text-gray-600",children:"Loading note..."})})});if(b)return e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsxs("div",{className:"card-main text-center p-12",children:[e.jsxs("div",{className:"text-red-600 mb-4",children:["Error: ",b]}),e.jsx("button",{onClick:c,className:"btn-secondary",children:"Close"})]})});if(!u)return null;const N=u.is_locked||u.status==="signed",_=u.status==="draft";return e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h1",{className:"text-2xl font-semibold text-gray-800",children:[u.note_type==="progress"&&" Progress Note",u.note_type==="intake"&&" Intake Assessment",u.note_type==="crisis"&&" Crisis Note",u.note_type==="discharge"&&" Discharge Summary",u.note_type==="mse"&&" Mental Status Exam",u.note_type==="diagnosis"&&" Diagnosis Note",u.note_type==="admin"&&" Administrative Note"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[N&&e.jsx("span",{className:"badge-sm badge-light-success",children:" Signed & Locked"}),_&&e.jsx("span",{className:"badge-sm badge-light-warning",children:"Draft"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Service Date:"}),e.jsx("div",{className:"text-gray-800",children:x(u.service_date)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Provider:"}),e.jsx("div",{className:"text-gray-800",children:u.provider_name||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Created:"}),e.jsx("div",{className:"text-gray-800",children:y(u.created_at)})]}),u.signed_at&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Signed:"}),e.jsx("div",{className:"text-gray-800",children:y(u.signed_at)})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[u.template_type==="Diagnosis"&&e.jsxs(e.Fragment,{children:[u.diagnosis_codes&&u.diagnosis_codes.length>0&&e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:" ICD-10 Diagnosis Codes"}),e.jsx("div",{className:"space-y-2",children:u.diagnosis_codes.map((A,E)=>{const O=A.code||A,Y=A.description||"",I=A.isPrimary||!1,$=A.billable||!1,le=A.severity||null,V=O.length>=4?O.slice(0,3)+"."+O.slice(3):O;return e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border-l-4 border-blue-400",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-mono text-sm font-semibold text-blue-700 bg-blue-100 px-2 py-0.5 rounded",children:V}),e.jsxs("div",{className:"flex gap-2",children:[I&&e.jsx("span",{className:"badge-sm badge-light-primary",children:"Primary"}),$&&e.jsx("span",{className:"badge-sm badge-light-success",children:"Billable"}),le&&e.jsx("span",{className:"badge-sm badge-light-warning",children:le})]})]}),Y&&e.jsx("div",{className:"text-gray-800",children:C(Y)})]})},E)})})]}),(u.symptoms_reported||u.symptoms_observed||u.duration_of_symptoms)&&e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Clinical Assessment"}),e.jsxs("div",{className:"space-y-4",children:[u.symptoms_reported&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Symptoms Reported by Client"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.symptoms_reported})]}),u.symptoms_observed&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Symptoms Observed by Clinician"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.symptoms_observed})]}),u.duration_of_symptoms&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Duration of Symptoms"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.duration_of_symptoms})]})]})]}),(u.clinical_justification||u.differential_diagnosis||u.severity_specifiers)&&e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Diagnostic Reasoning"}),e.jsxs("div",{className:"space-y-4",children:[u.clinical_justification&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Clinical Justification"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.clinical_justification})]}),u.differential_diagnosis&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Differential Diagnosis"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.differential_diagnosis})]}),u.severity_specifiers&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Severity Specifiers"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.severity_specifiers})]})]})]}),u.functional_impairment&&e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Functional Impairment"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.functional_impairment})]}),u.previous_diagnoses&&e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Previous Diagnoses"}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.previous_diagnoses})]})]}),u.template_type==="BIRP"&&e.jsxs(e.Fragment,{children:[u.behavior_problem&&e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"B"}),"Behavior / Observations"]}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.behavior_problem}),u.client_presentation&&u.client_presentation.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:u.client_presentation.map((A,E)=>e.jsx("span",{className:"badge-sm badge-light-info",children:A},E))})]}),(u.intervention||u.interventions_selected&&u.interventions_selected.length>0)&&e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"I"}),"Interventions Used"]}),u.intervention&&e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap mb-3",children:u.intervention}),u.interventions_selected&&u.interventions_selected.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600 mb-2",children:"Selected Interventions:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:u.interventions_selected.map((A,E)=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:A},E))})]})]}),u.response&&e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"R"}),"Client Response"]}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.response})]}),u.plan&&e.jsxs("div",{className:"card-main",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-3",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:"P"}),"Plan / Next Steps"]}),e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap",children:u.plan})]})]}),u.risk_present&&u.risk_assessment&&e.jsxs("div",{className:"card-main bg-orange-50 border-2 border-orange-300",children:[e.jsx("h3",{className:"font-semibold text-orange-800 mb-3",children:" Risk Assessment"}),e.jsx("div",{className:"text-gray-800 whitespace-pre-wrap",children:u.risk_assessment})]}),u.addenda&&u.addenda.length>0&&e.jsxs("div",{className:"card-main bg-blue-50 border-2 border-blue-300",children:[e.jsxs("h3",{className:"font-semibold text-blue-800 mb-3",children:[" Addenda (",u.addenda.length,")"]}),e.jsx("div",{className:"space-y-3",children:u.addenda.map((A,E)=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-800",children:["Addendum ",E+1]}),e.jsxs("span",{className:"text-xs text-gray-600",children:[y(A.created_at),"  ",A.provider_name]})]}),e.jsxs("div",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"font-semibold",children:"Reason:"})," ",A.addendum_reason]})]},A.id))})]}),N&&e.jsx("div",{className:"card-main bg-green-50 border-2 border-green-300",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-green-800",children:"Digitally Signed"}),e.jsxs("div",{className:"checkbox-label",children:[u.signed_by_name,"  ",y(u.signed_at)]})]})]})})]}),e.jsxs("div",{className:"flex gap-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{onClick:c,className:"px-6 py-3 bg-gray-500 text-white font-semibold rounded-xl hover:bg-gray-600 transition-all shadow-lg",children:"Close"}),_&&d&&e.jsx("button",{onClick:()=>d(u.id),className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all shadow-lg",children:"Edit Draft"}),N&&o&&e.jsx("button",{onClick:()=>o(u.id),className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-semibold rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all shadow-lg",children:"Add Addendum"})]})]})}function Ib({data:n}){const[c,d]=g.useState(!1),[o,u]=g.useState(!1),[p,m]=g.useState({}),[f,b]=g.useState({}),[v,j]=g.useState("list"),[x,y]=g.useState(null);if(!n)return e.jsx("div",{className:"text-gray-700 text-center py-8",children:"Loading admin notes..."});const{patient:C}=n,N=()=>{m({language:C.language||"",ethnicity:C.ethnicity||"",race:C.race||"",nationality:C.nationality||"",religion:C.religion||"",referral_source:C.referral_source||"",tribal_affiliations:C.tribal_affiliations||""}),d(!0)},_=()=>{b({homeless_status:C.homeless_status||"",financial_review_date:C.financial_review_date||"",family_size:C.family_size||"",monthly_income:C.monthly_income||""}),u(!0)},A=async()=>{console.log("Saving demographics:",p),alert("Demographics save not yet implemented - needs API endpoint"),d(!1)},E=async()=>{console.log("Saving financial data:",f),alert("Financial data save not yet implemented - needs API endpoint"),u(!1)},O=()=>{d(!1),m({})},Y=()=>{u(!1),b({})},I=()=>{j("create")},$=()=>{j("list"),y(null)},le=()=>{j("list"),y(null)};return v==="create"?e.jsx(Fi,{patientId:C.pid,noteType:"admin",onSave:$,onClose:le}):v==="edit"?e.jsx(Fi,{noteId:x,patientId:C.pid,noteType:"admin",onSave:$,onClose:le}):v==="view"?e.jsx(_f,{noteId:x,onClose:le}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Demographics & Statistics"}),!c&&e.jsx("button",{onClick:N,className:"px-4 py-2 text-sm font-medium text-blue-700 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-colors",children:" Edit"})]}),e.jsxs("div",{className:"card-inner",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Language"}),c?e.jsx("input",{type:"text",value:p.language,onChange:V=>m({...p,language:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:C.language||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Ethnicity"}),c?e.jsx("input",{type:"text",value:p.ethnicity,onChange:V=>m({...p,ethnicity:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:C.ethnicity||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Race"}),c?e.jsx("input",{type:"text",value:p.race,onChange:V=>m({...p,race:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:C.race||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Nationality"}),c?e.jsx("input",{type:"text",value:p.nationality,onChange:V=>m({...p,nationality:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:C.nationality||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Religion"}),c?e.jsx("input",{type:"text",value:p.religion,onChange:V=>m({...p,religion:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:C.religion||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Referral Source"}),c?e.jsx("input",{type:"text",value:p.referral_source,onChange:V=>m({...p,referral_source:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:C.referral_source||""})]}),e.jsxs("div",{className:"col-span-2 form-field",children:[e.jsx("div",{className:"form-field-label",children:"Tribal Affiliations"}),c?e.jsx("input",{type:"text",value:p.tribal_affiliations,onChange:V=>m({...p,tribal_affiliations:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:C.tribal_affiliations||""})]})]}),c&&e.jsxs("div",{className:"flex gap-3 mt-4 pt-4 border-t border-gray-200",children:[e.jsx(yt,{onClick:A,children:" Save Changes"}),e.jsx("button",{onClick:O,className:"px-4 py-2 bg-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Financial & Housing Status"}),!o&&e.jsx("button",{onClick:_,className:"px-4 py-2 text-sm font-medium text-blue-700 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition-colors",children:" Edit"})]}),e.jsxs("div",{className:"card-inner",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Homeless"}),o?e.jsxs("select",{value:f.homeless_status,onChange:V=>b({...f,homeless_status:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"No",children:"No"}),e.jsx("option",{value:"Yes",children:"Yes"}),e.jsx("option",{value:"At Risk",children:"At Risk"})]}):e.jsx("div",{className:"form-field-value",children:C.homeless_status||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Financial Review"}),o?e.jsx("input",{type:"date",value:f.financial_review_date,onChange:V=>b({...f,financial_review_date:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:C.financial_review_date?new Date(C.financial_review_date).toLocaleDateString():""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Family Size"}),o?e.jsx("input",{type:"number",value:f.family_size,onChange:V=>b({...f,family_size:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}):e.jsx("div",{className:"form-field-value",children:C.family_size||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Monthly Income"}),o?e.jsx("input",{type:"number",value:f.monthly_income,onChange:V=>b({...f,monthly_income:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"}):e.jsx("div",{className:"form-field-value",children:C.monthly_income?`$${C.monthly_income}`:""})]})]}),o&&e.jsxs("div",{className:"flex gap-3 mt-4 pt-4 border-t border-gray-200",children:[e.jsx(yt,{onClick:E,children:" Save Changes"}),e.jsx("button",{onClick:Y,className:"px-4 py-2 bg-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Administrative Notes"}),e.jsx(yt,{onClick:I,children:"+ New Admin Note"})]}),e.jsx("div",{className:"text-gray-600 text-sm",children:"Create administrative notes for this client's record"})]})})]})}function ev({data:n,onDataUpdate:c}){const[d,o]=g.useState(!1),[u,p]=g.useState(!1),[m,f]=g.useState(!1),[b,v]=g.useState(!1),[j,x]=g.useState(!1),[y,C]=g.useState(!1),[N,_]=g.useState({}),[A,E]=g.useState({}),[O,Y]=g.useState({}),[I,$]=g.useState(!1),[le,V]=g.useState(null),[X,ge]=g.useState([]),[he,xe]=g.useState({});if(g.useEffect(()=>{(async()=>{try{const de=(await ab())?.companies||[];ge(de.map(Se=>({value:Se.id,label:Se.name})));const[me,ve,oe,te]=await Promise.all([da("sub_relation"),da("sex"),da("state"),da("yesno")]);xe({relationship:me.options||[],sex:ve.options||[],state:oe.options||[],accept_assignment:te.options||[]})}catch(M){console.error("Failed to load dropdown options:",M)}})()},[]),!n)return e.jsx("div",{className:"text-gray-700 text-center py-8",children:"Loading insurance data..."});const{patient:q,insurances:z}=n,H=q.payment_type==="client",{primaryInsurance:D,secondaryInsurance:S,tertiaryInsurance:k}=g.useMemo(()=>{const ee=ve=>({id:null,type:ve,provider:"",plan_name:"",effective_date:"",effective_date_end:"",policy_number:"",group_number:"",subscriber_relationship:"",subscriber_fname:"",subscriber_mname:"",subscriber_lname:"",subscriber_DOB:"",subscriber_sex:"",subscriber_ss:"",subscriber_street:"",subscriber_street_line_2:"",subscriber_city:"",subscriber_state:"",subscriber_postal_code:"",subscriber_employer:"",subscriber_employer_street:"",subscriber_employer_street_line_2:"",subscriber_employer_city:"",subscriber_employer_state:"",subscriber_employer_postal_code:"",copay:"",accept_assignment:""});let M=z?.find(ve=>ve.type==="primary"),de=z?.find(ve=>ve.type==="secondary"),me=z?.find(ve=>ve.type==="tertiary");return M||(M=ee("primary")),H||(de||(de=ee("secondary")),me||(me=ee("tertiary"))),{primaryInsurance:M,secondaryInsurance:de,tertiaryInsurance:me}},[z,H]),U=ee=>ee?{provider:ee.provider||"",plan_name:ee.plan_name||"",date:ee.effective_date||"",date_end:ee.effective_date_end||"",policy_number:ee.policy_number||"",group_number:ee.group_number||"",subscriber_relationship:ee.subscriber_relationship||"",subscriber_fname:ee.subscriber_fname||"",subscriber_mname:ee.subscriber_mname||"",subscriber_lname:ee.subscriber_lname||"",subscriber_DOB:ee.subscriber_DOB||"",subscriber_sex:ee.subscriber_sex||"",subscriber_ss:ee.subscriber_ss||"",subscriber_street:ee.subscriber_street||"",subscriber_street_line_2:ee.subscriber_street_line_2||"",subscriber_city:ee.subscriber_city||"",subscriber_state:ee.subscriber_state||"",subscriber_postal_code:ee.subscriber_postal_code||"",subscriber_employer:ee.subscriber_employer||"",subscriber_employer_street:ee.subscriber_employer_street||"",subscriber_employer_street_line_2:ee.subscriber_employer_street_line_2||"",subscriber_employer_city:ee.subscriber_employer_city||"",subscriber_employer_state:ee.subscriber_employer_state||"",subscriber_employer_postal_code:ee.subscriber_employer_postal_code||"",copay:ee.copay||"",accept_assignment:ee.accept_assignment||"",policy_type:ee.policy_type||"",type:ee.type}:{},ie=ee=>{let M;ee==="primary"?(M=D,_(U(M)),v(!0)):ee==="secondary"?(M=S,E(U(M)),x(!0)):ee==="tertiary"&&(M=k,Y(U(M)),C(!0)),V(null)},be=ee=>{ee==="primary"?(v(!1),_({})):ee==="secondary"?(x(!1),E({})):ee==="tertiary"&&(C(!1),Y({})),V(null)},T=(ee,M,de)=>{if(M==="subscriber_relationship"&&de.toLowerCase()==="self"){const me={[M]:de,subscriber_fname:q.fname||"",subscriber_mname:q.mname||"",subscriber_lname:q.lname||"",subscriber_DOB:q.DOB||"",subscriber_sex:q.sex||"",subscriber_ss:q.ss||"",subscriber_street:q.street||"",subscriber_street_line_2:q.street_line_2||"",subscriber_city:q.city||"",subscriber_state:q.state||"",subscriber_postal_code:q.postal_code||""};ee==="primary"?_(ve=>({...ve,...me})):ee==="secondary"?E(ve=>({...ve,...me})):ee==="tertiary"&&Y(ve=>({...ve,...me}))}else ee==="primary"?_(me=>({...me,[M]:de})):ee==="secondary"?E(me=>({...me,[M]:de})):ee==="tertiary"&&Y(me=>({...me,[M]:de}))},L=ee=>{const de=[{field:"provider",label:"Insurance Company"},{field:"date",label:"Effective Date"},{field:"policy_number",label:"Policy Number"},{field:"subscriber_relationship",label:"Relationship"},{field:"subscriber_fname",label:"Subscriber First Name"},{field:"subscriber_lname",label:"Subscriber Last Name"},{field:"subscriber_DOB",label:"D.O.B."},{field:"subscriber_sex",label:"Sex"},{field:"subscriber_ss",label:"S.S."},{field:"subscriber_street",label:"Subscriber Address"},{field:"subscriber_city",label:"City"},{field:"subscriber_state",label:"State"},{field:"subscriber_postal_code",label:"Zip Code"}].filter(({field:me})=>!ee[me]||ee[me].trim()==="");if(de.length>0)throw new Error(`Required fields missing: ${de.map(me=>me.label).join(", ")}`)},W=async ee=>{$(!0),V(null);try{let M,de;ee==="primary"?(M=N,de=D):ee==="secondary"?(M=A,de=S):ee==="tertiary"&&(M=O,de=k),L(M);const me={...M};de.id||(me.patient_id=q.pid,me.type=ee),await tb(de.id,me),c&&await c(),be(ee)}catch(M){V(M.message||"Failed to save insurance changes")}finally{$(!1)}},F=(ee,M,de,me,ve,oe,te=null,Se="text",Ee=!1)=>{const Fe=Ee?"form-field-label required-field-label":"form-field-label";if(ve&&de)return te?e.jsxs("div",{className:"form-field",children:[e.jsxs("div",{className:Fe,children:[ee,Ee&&" *"]}),e.jsxs("select",{value:oe[de]||"",onChange:Ze=>T(me,de,Ze.target.value),className:"input-md",required:Ee,children:[e.jsx("option",{value:"",children:"Select..."}),te.map(Ze=>e.jsx("option",{value:Ze.value,children:Ze.label},Ze.value))]})]}):e.jsxs("div",{className:"form-field",children:[e.jsxs("div",{className:Fe,children:[ee,Ee&&" *"]}),e.jsx("input",{type:Se,value:oe[de]||"",onChange:Ze=>T(me,de,Ze.target.value),className:"input-md",required:Ee})]});{let Ze=M||"";if(te&&M){const nt=te.find(wt=>wt.value===M);nt&&(Ze=nt.label)}return e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:ee}),e.jsx("div",{className:"form-field-value",children:Ze})]})}},fe=(ee,M,de=!1,me=!0,ve=null)=>{if(!ee)return null;const oe=M==="primary"&&b||M==="secondary"&&j||M==="tertiary"&&y,te=M==="primary"?N:M==="secondary"?A:O,Se=Ee=>({primary:"Primary Insurance",secondary:"Secondary Insurance",tertiary:"Tertiary Insurance"})[Ee]||`Insurance ${Ee}`;return e.jsxs("div",{className:"card-main mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:`flex items-center gap-4 ${de?"cursor-pointer":""}`,onClick:de?ve:void 0,children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:Se(ee.type)}),de&&e.jsx("button",{className:"text-gray-600 hover:text-gray-800 transition-colors",children:me?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsx("div",{className:"flex space-x-2",children:oe?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>be(M),disabled:I,className:"btn-solid btn-solid-gray disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:()=>W(M),disabled:I,className:"btn-solid btn-solid-green disabled:opacity-50",children:I?"Saving...":"Save Changes"})]}):e.jsx("button",{onClick:()=>ie(M),className:"btn-solid btn-solid-blue",children:"Edit Insurance"})})]}),me&&oe&&e.jsx("div",{className:"mb-4 px-4 py-2 bg-purple-50 border-l-4 border-purple-700 rounded",children:e.jsxs("p",{className:"text-sm text-purple-900",children:[e.jsx("span",{className:"required-field-label",children:"*"})," Required fields are marked with an asterisk and displayed in ",e.jsx("span",{className:"required-field-label",children:"purple"})]})}),me&&e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"Insurance Details"}),F("Insurance Company",ee.insurance_company_name||ee.provider,"provider",M,oe,te,X,"text",!0),F("Plan Name",ee.plan_name,"plan_name",M,oe,te),F("Effective Date",ee.effective_date,"date",M,oe,te,null,"date",!0),F("Effective Date End",ee.effective_date_end,"date_end",M,oe,te,null,"date"),F("Policy Number",ee.policy_number,"policy_number",M,oe,te,null,"text",!0),F("Group Number",ee.group_number,"group_number",M,oe,te),F("CoPay",ee.copay,"copay",M,oe,te,null,"text"),F("Accept Assignment",ee.accept_assignment,"accept_assignment",M,oe,te,he.accept_assignment||[]),ee.type==="secondary"&&F("Secondary Medicare Type",ee.policy_type,"policy_type",M,oe,te)]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"Subscriber Information"}),F("Relationship",ee.subscriber_relationship,"subscriber_relationship",M,oe,te,he.relationship||[],"text",!0),F("Subscriber First Name",ee.subscriber_fname,"subscriber_fname",M,oe,te,null,"text",!0),F("Subscriber Middle Name",ee.subscriber_mname,"subscriber_mname",M,oe,te),F("Subscriber Last Name",ee.subscriber_lname,"subscriber_lname",M,oe,te,null,"text",!0),F("D.O.B.",ee.subscriber_DOB,"subscriber_DOB",M,oe,te,null,"date",!0),F("Sex",ee.subscriber_sex,"subscriber_sex",M,oe,te,he.sex||[],"text",!0),oe?F("S.S.",te.subscriber_ss,"subscriber_ss",M,oe,te,null,"text",!0):e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"S.S."}),e.jsx("div",{className:"form-field-value",children:ee.subscriber_ss?"***-**-"+ee.subscriber_ss.slice(-4):""})]}),F("Subscriber Address",ee.subscriber_street,"subscriber_street",M,oe,te,null,"text",!0),F("Address Line 2",ee.subscriber_street_line_2,"subscriber_street_line_2",M,oe,te),F("City",ee.subscriber_city,"subscriber_city",M,oe,te,null,"text",!0),F("State",ee.subscriber_state,"subscriber_state",M,oe,te,he.state||[],"text",!0),F("Zip Code",ee.subscriber_postal_code,"subscriber_postal_code",M,oe,te,null,"text",!0)]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide mb-3",children:"Subscriber Employer"}),F("Subscriber Employer (SE)",ee.subscriber_employer,"subscriber_employer",M,oe,te),F("SE Address",ee.subscriber_employer_street,"subscriber_employer_street",M,oe,te),F("SE Address Line 2",ee.subscriber_employer_street_line_2,"subscriber_employer_street_line_2",M,oe,te),F("SE City",ee.subscriber_employer_city,"subscriber_employer_city",M,oe,te),F("SE State",ee.subscriber_employer_state,"subscriber_employer_state",M,oe,te,he.state||[]),F("SE Zip Code",ee.subscriber_employer_postal_code,"subscriber_employer_postal_code",M,oe,te)]})]})})]},ee.id||`placeholder-${M}`)},P=q.employer||q.employer_street||q.employer_city||q.employer_state||q.employer_postal_code||q.employer_occupation,ue=H?"Self-Pay (Client)":"Insurance",Ce=!H||m;return g.useEffect(()=>{S&&o(!0),k&&p(!0)},[S,k]),e.jsxs("div",{className:"space-y-6",children:[le&&e.jsx("div",{className:"error-message",children:le}),e.jsx("div",{className:"card-main",children:e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"flex items-center justify-between py-3 px-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:"Payment Type:"}),e.jsx("div",{className:`text-lg font-bold ${H?"text-orange-600":"text-blue-600"}`,children:ue})]}),H&&z&&z.length>0&&e.jsx("button",{onClick:()=>f(!m),className:"px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:m?"Hide Insurance Records":"Show Insurance Records"})]})})}),Ce&&e.jsxs(e.Fragment,{children:[P&&e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Client Employer Information"}),e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"col-span-2 form-field",children:[e.jsx("div",{className:"form-field-label",children:"Employer Name"}),e.jsx("div",{className:"form-field-value",children:q.employer||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Start Date"}),e.jsx("div",{className:"form-field-value",children:q.employer_start_date?new Date(q.employer_start_date).toLocaleDateString():""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"End Date"}),e.jsx("div",{className:"form-field-value",children:q.employer_end_date?new Date(q.employer_end_date).toLocaleDateString():""})]}),e.jsxs("div",{className:"col-span-2 form-field",children:[e.jsx("div",{className:"form-field-label",children:"Address"}),e.jsxs("div",{className:"form-field-value",children:[q.employer_street||"",q.employer_street_line_2&&`, ${q.employer_street_line_2}`]})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"City"}),e.jsx("div",{className:"form-field-value",children:q.employer_city||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"State"}),e.jsx("div",{className:"form-field-value",children:q.employer_state||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Postal Code"}),e.jsx("div",{className:"form-field-value",children:q.employer_postal_code||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Country"}),e.jsx("div",{className:"form-field-value",children:q.employer_country||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Occupation"}),e.jsx("div",{className:"form-field-value",children:q.employer_occupation||""})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Industry"}),e.jsx("div",{className:"form-field-value",children:q.employer_industry||""})]})]})})]}),D&&fe(D,"primary",!1,!0,null),S&&fe(S,"secondary",!0,d,()=>o(!d)),k&&fe(k,"tertiary",!0,u,()=>p(!u))]})]})}function Cf({encounterId:n,onClose:c}){const[d,o]=g.useState(!0),[u,p]=g.useState(null),[m,f]=g.useState(null),[b,v]=g.useState("notes");g.useEffect(()=>{n&&(async()=>{try{o(!0),f(null);const C=await Y0(n);p(C)}catch(C){console.error("Error fetching encounter detail:",C),f(C.message||"Failed to load encounter details")}finally{o(!1)}})()},[n]);const j=y=>y?new Date(y).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A",x=y=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(y||0);return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Encounter Details"}),u&&e.jsxs("p",{className:"text-blue-100 text-sm mt-1",children:[j(u.encounter.date),"  ",u.encounter.patient_name]})]}),e.jsx("button",{onClick:c,className:"text-white hover:bg-white/20 rounded-full p-2 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)]",children:d?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),e.jsx("p",{className:"text-gray-700 mt-4",children:"Loading encounter details..."})]}):m?e.jsx("div",{className:"p-12 text-center",children:e.jsxs("div",{className:"text-red-600 font-semibold",children:["Error: ",m]})}):u?e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"card-main mb-6",children:[e.jsx("h3",{className:"section-header-gray",children:"Session Information"}),e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Date"}),e.jsx("div",{className:"form-field-value",children:j(u.encounter.date)})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Provider"}),e.jsx("div",{className:"form-field-value",children:u.encounter.provider_name||"N/A"})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Facility"}),e.jsx("div",{className:"form-field-value",children:u.encounter.facility_name||"N/A"})]}),e.jsxs("div",{className:"col-span-2 md:col-span-3 form-field",children:[e.jsx("div",{className:"form-field-label",children:"Reason for Visit"}),e.jsx("div",{className:"form-field-value",children:u.encounter.reason||"Not specified"})]}),u.encounter.encounter_type_description&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Encounter Type"}),e.jsx("div",{className:"form-field-value",children:u.encounter.encounter_type_description})]})]})})]}),e.jsxs("div",{className:"flex gap-2 mb-6 border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>v("notes"),className:`px-4 py-2 font-medium transition-colors border-b-2 ${b==="notes"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800"}`,children:["Clinical Notes (",u.forms.length,")"]}),e.jsxs("button",{onClick:()=>v("billing"),className:`px-4 py-2 font-medium transition-colors border-b-2 ${b==="billing"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800"}`,children:["Billing (",u.billing.length,")"]}),e.jsxs("button",{onClick:()=>v("vitals"),className:`px-4 py-2 font-medium transition-colors border-b-2 ${b==="vitals"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800"}`,children:["Vitals (",u.vitals.length,")"]}),e.jsxs("button",{onClick:()=>v("diagnoses"),className:`px-4 py-2 font-medium transition-colors border-b-2 ${b==="diagnoses"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-800"}`,children:["Diagnoses (",u.diagnoses.length,")"]})]}),b==="notes"&&e.jsx("div",{className:"space-y-3",children:u.forms.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No clinical notes recorded"}):u.forms.map(y=>e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:y.form_name||y.formdir}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[j(y.date),"  ",y.user_name||"Unknown user"]})]}),y.authorized==="1"&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded",children:"Authorized"})]})},y.id))}),b==="billing"&&e.jsx("div",{className:"space-y-4",children:u.billing.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No billing charges recorded"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700",children:"Total Charges"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x(u.total_charges)})]}),e.jsx("div",{className:"space-y-2",children:u.billing.map(y=>e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-gray-800",children:[y.code_type,": ",y.code]}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:y.code_text}),y.modifier&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Modifier: ",y.modifier]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsx("div",{className:"font-bold text-gray-800",children:x(y.fee*y.units)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[y.units," unit",y.units!=="1"?"s":"","  ",x(y.fee)]}),y.billed==="1"&&e.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-semibold rounded",children:"Billed"})]})]})},y.id))})]})}),b==="vitals"&&e.jsx("div",{className:"space-y-3",children:u.vitals.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No vitals recorded"}):u.vitals.map(y=>e.jsx("div",{className:"card-inner",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"col-span-2 md:col-span-4 form-field",children:[e.jsx("div",{className:"form-field-label",children:"Recorded"}),e.jsxs("div",{className:"form-field-value",children:[j(y.date),"  ",y.user_name||"Unknown user"]})]}),y.bps&&y.bpd&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Blood Pressure"}),e.jsxs("div",{className:"form-field-value",children:[y.bps,"/",y.bpd]})]}),y.pulse&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Pulse"}),e.jsxs("div",{className:"form-field-value",children:[y.pulse," bpm"]})]}),y.temperature&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Temperature"}),e.jsxs("div",{className:"form-field-value",children:[y.temperature,"F"]})]}),y.weight&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Weight"}),e.jsxs("div",{className:"form-field-value",children:[y.weight," lbs"]})]}),y.height&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Height"}),e.jsxs("div",{className:"form-field-value",children:[y.height," in"]})]}),y.BMI&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"BMI"}),e.jsx("div",{className:"form-field-value",children:y.BMI})]}),y.oxygen_saturation&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"O2 Saturation"}),e.jsxs("div",{className:"form-field-value",children:[y.oxygen_saturation,"%"]})]}),y.respiration&&e.jsxs("div",{className:"form-field",children:[e.jsx("div",{className:"form-field-label",children:"Respiration"}),e.jsxs("div",{className:"form-field-value",children:[y.respiration," /min"]})]})]})},y.id))}),b==="diagnoses"&&e.jsx("div",{className:"space-y-3",children:u.diagnoses.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No diagnoses recorded for this encounter"}):u.diagnoses.map(y=>e.jsxs("div",{className:"card-inner",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:y.title}),y.diagnosis&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Code: ",y.diagnosis]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Started: ",j(y.begdate),y.enddate&&`  Ended: ${j(y.enddate)}`]}),y.outcome&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Outcome: ",y.outcome]})]},y.id))})]}):null}),e.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50 flex justify-end gap-3",children:e.jsx("button",{onClick:c,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg transition-colors font-medium",children:"Close"})})]})}):null}function tv({data:n}){const[c,d]=g.useState("all"),[o,u]=g.useState("date-desc"),[p,m]=g.useState(null);if(!n)return e.jsx("div",{className:"empty-state",children:"Loading encounter history..."});const{encounters:f,patient:b}=n,v=y=>y?new Date(y).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A",j=g.useMemo(()=>{if(!f||f.length===0)return[];let y=[...f];const C=new Date;if(c==="recent"){const N=new Date(C.getTime()-2592e6);y=y.filter(_=>new Date(_.date)>=N)}else if(c==="past-year"){const N=new Date(C.getTime()-31536e6);y=y.filter(_=>new Date(_.date)>=N)}return o==="date-desc"?y.sort((N,_)=>new Date(_.date)-new Date(N.date)):o==="date-asc"?y.sort((N,_)=>new Date(N.date)-new Date(_.date)):o==="provider"&&y.sort((N,_)=>{const A=N.provider_name||"",E=_.provider_name||"";return A.localeCompare(E)}),y},[f,c,o]),x=g.useMemo(()=>{if(!f||f.length===0)return{total:0,lastVisit:null,avgPerMonth:0,thisYear:0};const y=new Date,C=new Date(y.getTime()-365*24*60*60*1e3),N=new Date(y.getFullYear(),0,1),_=f.map(I=>new Date(I.date)),A=_.length>0?new Date(Math.max(..._.map(I=>I.getTime()))):null,O=f.filter(I=>new Date(I.date)>=C).length/12,Y=f.filter(I=>new Date(I.date)>=N);return{total:f.length,lastVisit:A?v(A):"N/A",avgPerMonth:O.toFixed(1),thisYear:Y.length}},[f]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Visit Statistics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"stat-box",children:[e.jsx("div",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Total Visits"}),e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:x.total})]}),e.jsxs("div",{className:"stat-box",children:[e.jsx("div",{className:"text-caption text-gray-600 font-semibold mb-1",children:"This Year"}),e.jsx("div",{className:"text-3xl font-bold text-green-600",children:x.thisYear})]}),e.jsxs("div",{className:"stat-box",children:[e.jsx("div",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Avg/Month (Past Year)"}),e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:x.avgPerMonth})]}),e.jsxs("div",{className:"stat-box",children:[e.jsx("div",{className:"text-caption text-gray-600 font-semibold mb-1",children:"Last Visit"}),e.jsx("div",{className:"text-lg font-bold text-gray-700",children:x.lastVisit})]})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"section-header",children:"Filter By"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>d("all"),className:`w-full text-left filter-btn-enhanced ${c==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Encounters"}),e.jsx("button",{onClick:()=>d("recent"),className:`w-full text-left filter-btn-enhanced ${c==="recent"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Last 30 Days"}),e.jsx("button",{onClick:()=>d("past-year"),className:`w-full text-left filter-btn-enhanced ${c==="past-year"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Past Year"})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"section-header",children:"Sort By"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>u("date-desc"),className:`w-full text-left filter-btn-enhanced ${o==="date-desc"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Newest First"}),e.jsx("button",{onClick:()=>u("date-asc"),className:`w-full text-left filter-btn-enhanced ${o==="date-asc"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Oldest First"}),e.jsx("button",{onClick:()=>u("provider"),className:`w-full text-left filter-btn-enhanced ${o==="provider"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"By Provider"})]})]})]}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"card-main",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Encounter History",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",j.length," ",j.length===1?"visit":"visits",")"]})]})}),j.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-gray-600 text-lg",children:"No encounters found"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:c!=="all"?"Try adjusting your filters":"No visit history recorded"})]}):e.jsx("div",{className:"space-y-3",children:j.map(y=>e.jsx("div",{className:"card-inner hover:bg-white/90 transition-colors cursor-pointer",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"text-lg font-bold text-gray-800",children:v(y.date)}),e.jsxs("span",{className:"badge-sm badge-light-info",children:["ID: ",y.encounter]})]}),y.reason&&e.jsx("div",{className:"text-gray-900 font-medium mb-2",children:y.reason}),e.jsxs("div",{className:"flex gap-6 text-sm text-gray-600",children:[y.provider_name&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Provider:"})," ",y.provider_name]}),y.facility_name&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Facility:"})," ",y.facility_name]})]})]}),e.jsx("button",{onClick:C=>{C.stopPropagation(),m(y.encounter)},className:"ml-4 btn-mini",children:"View Details"})]})},y.encounter))})]})})]}),p&&e.jsx(Cf,{encounterId:p,onClose:()=>m(null)})]})}function av({patientId:n,onNoteClick:c,onCreateNote:d}){const[o,u]=g.useState([]),[p,m]=g.useState(!0),[f,b]=g.useState(null),[v,j]=g.useState({note_type:null,status:null,start_date:null,end_date:null});g.useEffect(()=>{x()},[n,v]);const x=async()=>{m(!0),b(null);try{const E=await F0(n,v);u(E.notes||[])}catch(E){console.error("Error loading notes:",E),b(E.message)}finally{m(!1)}},y=E=>{if(!E)return"N/A";const[O,Y,I]=E.split(/[-T]/);return new Date(O,Y-1,I).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},C=E=>E?new Date(E).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}):"N/A",N=E=>({progress:"",intake:"",crisis:"",discharge:"",mse:"",admin:"",noshow:"",cancel:""})[E]||"",_=E=>({progress:"Progress",intake:"Intake",crisis:"Crisis",discharge:"Discharge",mse:"Mental Status",admin:"Administrative",noshow:"No-Show",cancel:"Cancellation"})[E]||E,A=E=>E.is_locked||E.status==="signed"?e.jsx("span",{className:"badge-sm badge-light-success",children:"Signed"}):E.status==="draft"?e.jsx("span",{className:"badge-sm badge-light-warning",children:"Draft"}):E.supervisor_review_required&&E.supervisor_review_status==="pending"?e.jsx("span",{className:"badge-sm badge-light-info",children:"Pending Review"}):null;return p?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"text-gray-600",children:"Loading notes..."})}):f?e.jsxs("div",{className:"p-6 text-center",children:[e.jsxs("div",{className:"text-red-600 mb-4",children:["Error loading notes: ",f]}),e.jsx("button",{onClick:x,className:"px-6 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-semibold rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all shadow-lg",children:"Retry"})]}):e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-64 flex-shrink-0",children:e.jsxs("div",{className:"card-main sticky top-6",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Filter Notes"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 mb-2 block",children:"Note Type"}),e.jsxs("select",{value:v.note_type||"",onChange:E=>j({...v,note_type:E.target.value||null}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"progress",children:"Progress"}),e.jsx("option",{value:"intake",children:"Intake"}),e.jsx("option",{value:"crisis",children:"Crisis"}),e.jsx("option",{value:"discharge",children:"Discharge"}),e.jsx("option",{value:"mse",children:"Mental Status"}),e.jsx("option",{value:"admin",children:"Administrative"})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 mb-2 block",children:"Status"}),e.jsxs("select",{value:v.status||"",onChange:E=>j({...v,status:E.target.value||null}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"draft",children:"Drafts"}),e.jsx("option",{value:"signed",children:"Signed"})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 mb-2 block",children:"From Date"}),e.jsx("input",{type:"date",value:v.start_date||"",onChange:E=>j({...v,start_date:E.target.value||null}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white"})]})}),e.jsx("div",{children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-600 mb-2 block",children:"To Date"}),e.jsx("input",{type:"date",value:v.end_date||"",onChange:E=>j({...v,end_date:E.target.value||null}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white"})]})})]})]})}),e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Clinical Notes",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",o.length," ",o.length===1?"note":"notes",")"]})]}),d&&e.jsx("button",{onClick:d,className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all shadow-lg",children:"+ New Note"})]}),o.length===0?e.jsxs("div",{className:"card-main text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-lg text-gray-600 mb-2",children:"No clinical notes found"}),e.jsx("p",{className:"text-sm text-gray-500",children:v.note_type||v.status?"Try adjusting your filters":"Create your first note to get started"})]}):e.jsx("div",{className:"space-y-3",children:o.map(E=>{const O=E.status==="draft";return e.jsx("div",{onClick:()=>c&&c(E.id,O,E.note_type),className:"card-main hover:shadow-2xl hover:scale-[1.01] hover:border-blue-400 cursor-pointer transition-all duration-200",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:N(E.note_type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"font-semibold text-gray-800",children:[_(E.note_type)," Note"]}),A(E),E.is_addendum&&e.jsx("span",{className:"badge-sm badge-light-info",children:"Addendum"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Service Date: ",y(E.service_date),"  ",E.provider_name||"Unknown provider"]})]})]}),E.behavior_problem&&e.jsxs("div",{className:"text-sm text-gray-700 line-clamp-2 mt-2",children:[E.behavior_problem.substring(0,150),"..."]}),e.jsxs("div",{className:"flex gap-4 text-xs text-gray-500 mt-2",children:[e.jsxs("span",{children:["Created: ",C(E.created_at)]}),E.signed_at&&e.jsxs("span",{children:["Signed: ",C(E.signed_at)]}),E.addenda&&E.addenda.length>0&&e.jsxs("span",{className:"text-blue-600 font-medium",children:[E.addenda.length," ",E.addenda.length===1?"addendum":"addenda"]})]})]}),e.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm font-semibold rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all shadow-md",children:O?"Edit":"View"})]})},E.id)})})]})]})}function sv({onSelect:n,preselected:c=null,appointment:d=null}){const o=[{id:"intake",label:"Intake Assessment",description:"First session with client",icon:"",row:1,cols:3},{id:"diagnosis",label:"Diagnosis Note",description:"ICD-10 diagnosis assessment and documentation",icon:"",row:1,cols:3},{id:"treatment_plan",label:"Treatment Plan",description:"Goals, objectives, interventions",icon:"",row:1,cols:3},{id:"progress",label:"Progress Note",description:"Regular therapy session",icon:"",row:1,cols:3},{id:"mse",label:"Mental Status Exam",description:"Standalone MSE assessment",icon:"",row:2,cols:6},{id:"discharge",label:"Discharge Summary",description:"Final session, treatment conclusion",icon:"",row:2,cols:6},{id:"crisis",label:"Crisis Note",description:"Emergency or high-risk session",icon:"",row:3,cols:6},{id:"risk_assessment",label:"Risk Assessment",description:"SI/HI safety evaluation",icon:"",row:3,cols:6},{id:"appointment_status",label:"Appointment Status",description:"No show, late cancel, cancellation",icon:"",row:4,cols:6,quick:!0},{id:"client_communication",label:"Client Communication",description:"Phone calls, emails, client contact",icon:"",row:4,cols:6,quick:!0}],p=c||"progress",m=x=>{n(x)},f=o.filter(x=>x.row===1),b=o.filter(x=>x.row===2),v=o.filter(x=>x.row===3),j=o.filter(x=>x.row===4);return e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"What kind of note are you writing?"}),e.jsx("p",{className:"text-gray-600",children:"Select the type of clinical documentation"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Clinical Notes"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:f.map(x=>e.jsx("button",{onClick:()=>m(x.id),className:`card-main text-left p-4 hover:bg-blue-50 hover:border-blue-300 transition-all ${p===x.id?"ring-2 ring-blue-500 bg-blue-50":""}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:x.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-base font-semibold text-gray-800 mb-1",children:[x.label,x.suggested&&e.jsx("span",{className:"ml-2 badge-sm badge-light-success",children:"Suggested"})]}),e.jsx("div",{className:"text-xs text-gray-600",children:x.description})]})]})},x.id))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:b.map(x=>e.jsx("button",{onClick:()=>m(x.id),className:"card-main text-left p-4 hover:bg-blue-50 hover:border-blue-300 transition-all",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:x.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-base font-semibold text-gray-800 mb-1",children:x.label}),e.jsx("div",{className:"text-xs text-gray-600",children:x.description})]})]})},x.id))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:v.map(x=>e.jsx("button",{onClick:()=>m(x.id),className:"card-main text-left p-4 hover:bg-orange-50 hover:border-orange-300 transition-all",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:x.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-base font-semibold text-gray-800 mb-1",children:x.label}),e.jsx("div",{className:"text-xs text-gray-600",children:x.description})]})]})},x.id))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:j.map(x=>e.jsx("button",{onClick:()=>m(x.id),className:"card-main text-left p-4 hover:bg-gray-50 hover:border-gray-400 transition-all",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:x.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-base font-semibold text-gray-800 mb-1",children:x.label}),e.jsx("div",{className:"text-xs text-gray-600",children:x.description}),x.quick&&e.jsx("div",{className:"mt-1 text-xs text-blue-600 font-medium",children:" Quick note"})]})]})},x.id))})]})]})}function lv({data:n}){const[c,d]=g.useState("list"),[o,u]=g.useState(null),[p,m]=g.useState(null),f=()=>{d("selectType"),m(null)},b=C=>{m(C),d("create")},v=(C,N,_)=>{u(C),m(_),d(N?"edit":"view")},j=C=>{u(C),d("edit")},x=()=>{d("list"),u(null),m(null)},y=()=>{d("list"),u(null),m(null)};return c==="selectType"?e.jsx(sv,{onSelect:b,patientId:n?.patient?.pid}):c==="create"?e.jsx(Fi,{patientId:n?.patient?.pid,noteType:p,onSave:x,onClose:y}):c==="edit"?e.jsx(Fi,{noteId:o,patientId:n?.patient?.pid,noteType:p,onSave:x,onClose:y}):c==="view"?e.jsx(_f,{noteId:o,onClose:y,onEdit:j}):e.jsx(av,{patientId:n?.patient?.pid,onNoteClick:v,onCreateNote:f})}function nv({data:n}){const[c,d]=g.useState(null),[o,u]=g.useState(!0),[p,m]=g.useState(null),[f,b]=g.useState("all"),[v,j]=g.useState(null);g.useEffect(()=>{(async()=>{if(n?.patient?.pid)try{u(!0),m(null);const _=await P0(n.patient.pid);d(_)}catch(_){console.error("Error fetching billing:",_),m(_.message||"Failed to load billing information")}finally{u(!1)}})()},[n]);const x=N=>N?new Date(N).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A",y=N=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(N||0),C=g.useMemo(()=>{if(!c?.charges)return[];let N=[...c.charges];return f==="billed"?N=N.filter(_=>_.billed==="1"):f==="unbilled"&&(N=N.filter(_=>_.billed!=="1")),N},[c,f]);return o?e.jsx("div",{className:"text-gray-700 text-center py-8",children:"Loading billing information..."}):p?e.jsxs("div",{className:"text-red-600 text-center py-8",children:["Error: ",p]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Financial Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"stat-box stat-box-blue",children:[e.jsx("div",{className:"text-gray-600 text-xs font-semibold mb-1",children:"Total Charges"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:y(c?.summary?.total_charges||0)})]}),e.jsxs("div",{className:"stat-box stat-box-green",children:[e.jsx("div",{className:"text-gray-600 text-xs font-semibold mb-1",children:"Total Payments"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:y(c?.summary?.total_payments||0)})]}),e.jsxs("div",{className:`stat-box ${(c?.summary?.balance||0)>0?"stat-box-red":"stat-box"}`,children:[e.jsx("div",{className:"text-gray-600 text-xs font-semibold mb-1",children:"Balance Due"}),e.jsx("div",{className:`text-2xl font-bold ${(c?.summary?.balance||0)>0?"text-red-600":"text-gray-600"}`,children:y(c?.summary?.balance||0)})]})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h3",{className:"section-header",children:"Filter By"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>b("all"),className:`w-full text-left filter-btn-enhanced ${f==="all"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"All Charges"}),e.jsx("button",{onClick:()=>b("unbilled"),className:`w-full text-left filter-btn-enhanced ${f==="unbilled"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Unbilled"}),e.jsx("button",{onClick:()=>b("billed"),className:`w-full text-left filter-btn-enhanced ${f==="billed"?"filter-btn-active-base bg-blue-500":"filter-btn-inactive"}`,children:"Billed"})]})]}),e.jsxs("div",{className:"card-main",children:[e.jsx("h2",{className:"card-header",children:"Recent Payments"}),c?.payments&&c.payments.length>0?e.jsx("div",{className:"space-y-2",children:c.payments.slice(0,5).map(N=>e.jsxs("div",{className:"stat-box",children:[e.jsx("div",{className:"font-semibold text-gray-800",children:y(N.pay_amount)}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:x(N.dtime)}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:N.method||"Payment"})]},N.session_id))}):e.jsx("div",{className:"text-sm text-gray-500",children:"No payments recorded"})]})]}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"card-main",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Billing Charges",e.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",C.length," ",C.length===1?"charge":"charges",")"]})]})}),C.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 14l6-6m-5.5.5h.01m4.99 5h.01M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16l3.5-2 3.5 2 3.5-2 3.5 2zM10 8.5a.5.5 0 11-1 0 .5.5 0 011 0zm5 5a.5.5 0 11-1 0 .5.5 0 011 0z"})}),e.jsx("p",{className:"text-gray-600 text-lg",children:"No charges found"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:f!=="all"?"Try adjusting your filters":"No billing charges recorded"})]}):e.jsx("div",{className:"space-y-3",children:C.map(N=>e.jsx("div",{className:"card-inner hover:bg-white/90 transition-colors cursor-pointer",onClick:()=>j(N.encounter),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("div",{className:"font-bold text-gray-800",children:[N.code_type,": ",N.code]}),N.billed==="1"?e.jsx("span",{className:"badge-sm badge-light-success",children:"Billed"}):e.jsx("span",{className:"badge-sm badge-light-warning",children:"Unbilled"}),N.authorized==="1"&&e.jsx("span",{className:"badge-sm badge-light-info",children:"Authorized"})]}),e.jsx("div",{className:"text-sm text-gray-700 mb-2",children:N.code_text}),N.encounter_reason&&e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("span",{className:"font-semibold",children:"Encounter:"})," ",N.encounter_reason]}),e.jsxs("div",{className:"flex gap-6 text-xs text-gray-500",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Date:"})," ",x(N.encounter_date)]}),N.provider_name&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Provider:"})," ",N.provider_name]}),N.facility_name&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Facility:"})," ",N.facility_name]}),N.modifier&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Modifier:"})," ",N.modifier]})]})]}),e.jsxs("div",{className:"ml-4 text-right",children:[e.jsx("div",{className:"font-bold text-gray-800 text-lg",children:y(parseFloat(N.fee)*parseFloat(N.units))}),e.jsxs("div",{className:"text-xs text-gray-500",children:[N.units," unit",N.units!=="1"?"s":"","  ",y(N.fee)]}),e.jsx("button",{className:"mt-2 btn-mini",children:"View Encounter"})]})]})},N.id))})]})})]}),v&&e.jsx(Cf,{encounterId:v,onClose:()=>j(null)})]})}function iv({data:n}){const[c,d]=g.useState([]),[o,u]=g.useState([]),[p,m]=g.useState([]),[f,b]=g.useState({}),[v,j]=g.useState(!0),[x,y]=g.useState(null),[C,N]=g.useState(!1),[_,A]=g.useState(!1),[E,O]=g.useState(null),[Y,I]=g.useState(null),[$,le]=g.useState({name:"",category_id:""}),V=n?.patient?.pid;g.useEffect(()=>{V&&(X(),ge())},[V]);const X=async()=>{try{j(!0);const L=await fetch(`/custom/api/client_documents.php?id=${V}`,{credentials:"include"});if(!L.ok)throw new Error("Failed to fetch documents");const W=await L.json();d(W.documents||[]),u(W.categories||[]);const F={};W.categories?.forEach(fe=>{F[fe.id]=!0}),b(F)}catch(L){console.error("Error fetching documents:",L),y(L.message)}finally{j(!1)}},ge=async()=>{try{const L=await fetch("/custom/api/client_documents.php?action=categories",{credentials:"include"});if(!L.ok)throw new Error("Failed to fetch categories");const W=await L.json();m(W.categories||[])}catch(L){console.error("Error fetching categories:",L)}},he=L=>{b(W=>({...W,[L]:!W[L]}))},xe=L=>{const W=L.target.files[0];W&&(I(W),$.name||le(F=>({...F,name:W.name})))},q=(L,W)=>{le(F=>({...F,[L]:W}))},z=()=>{N(!0),O(null),I(null),le({name:"",category_id:""})},H=()=>{N(!1),O(null),I(null),le({name:"",category_id:""})},D=async()=>{if(!Y){O("Please select a file to upload");return}try{A(!0),O(null);const L=new FormData;L.append("file",Y),L.append("patient_id",V),L.append("name",$.name||Y.name),$.category_id&&L.append("category_id",$.category_id);const W=await fetch("/custom/api/client_documents.php",{method:"POST",credentials:"include",body:L}),F=await W.json();if(!W.ok)throw new Error(F.error||"Failed to upload document");await X(),H()}catch(L){console.error("Error uploading document:",L),O(L.message)}finally{A(!1)}},S=L=>L?L.includes("pdf")?"":L.includes("image")?"":L.includes("word")||L.includes("document")?"":L.includes("excel")||L.includes("spreadsheet")?"":"":"",k=L=>{if(!L)return"";const W=L/1024;return W<1024?`${W.toFixed(1)} KB`:`${(W/1024).toFixed(1)} MB`},U=L=>{if(L.name)return L.name;if(!L.url)return"Untitled Document";const F=L.url.replace(/^file:\/\//,"").split("/");return F[F.length-1]||"Untitled Document"},ie=L=>{L.file_path?window.open(L.file_path,"_blank"):console.error("Document file path not available")},be=L=>{const W=`/custom/api/client_documents.php?action=download&document_id=${L.id}`;window.open(W,"_blank")},T={};return c.forEach(L=>{const W=L.category_id||"uncategorized";T[W]||(T[W]=[]),T[W].push(L)}),v?e.jsx("div",{className:"card-main",children:e.jsx("div",{className:"card-inner text-center py-8",children:e.jsx("div",{className:"text-gray-700",children:"Loading documents..."})})}):x?e.jsx("div",{className:"card-main",children:e.jsx("div",{className:"card-inner text-center py-8",children:e.jsxs("div",{className:"text-red-600",children:["Error loading documents: ",x]})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(yt,{onClick:z,children:" Upload Document"})}),c.length===0&&e.jsx("div",{className:"card-main",children:e.jsx("div",{className:"card-inner text-center py-8",children:e.jsx("div",{className:"text-gray-500",children:"No documents on file"})})}),o.map(L=>{const W=T[L.id]||[],F=f[L.id];return W.length===0?null:e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer",onClick:()=>he(L.id),children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:[L.name," (",W.length,")"]}),e.jsx("button",{className:"text-gray-600 hover:text-gray-800 transition-colors",children:F?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),F&&e.jsx("div",{className:"card-inner",children:e.jsx("div",{className:"space-y-3",children:W.map(fe=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("span",{className:"text-2xl",children:S(fe.mimetype)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U(fe)}),e.jsxs("div",{className:"text-sm text-gray-500",children:[fe.date&&new Date(fe.date).toLocaleDateString(),"  ",k(fe.size)]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ie(fe),className:"px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"View"}),e.jsx("button",{onClick:()=>be(fe),className:"px-3 py-1.5 text-sm font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:"Download"})]})]},fe.id))})})]},L.id)}),T.uncategorized&&T.uncategorized.length>0&&e.jsxs("div",{className:"card-main",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 cursor-pointer",onClick:()=>he("uncategorized"),children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Uncategorized (",T.uncategorized.length,")"]}),e.jsx("button",{className:"text-gray-600 hover:text-gray-800 transition-colors",children:f.uncategorized?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),f.uncategorized&&e.jsx("div",{className:"card-inner",children:e.jsx("div",{className:"space-y-3",children:T.uncategorized.map(L=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("span",{className:"text-2xl",children:S(L.mimetype)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U(L)}),e.jsxs("div",{className:"text-sm text-gray-500",children:[L.date&&new Date(L.date).toLocaleDateString(),"  ",k(L.size)]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ie(L),className:"px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:"View"}),e.jsx("button",{onClick:()=>be(L),className:"px-3 py-1.5 text-sm font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:"Download"})]})]},L.id))})})]}),C&&Rt.createPortal(e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-container max-w-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Upload Document"}),e.jsx("button",{onClick:H,disabled:_,className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"modal-body",children:[E&&e.jsx("div",{className:"error-message mb-4",children:E}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(se,{children:["Select File ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"file",onChange:xe,className:"input-field"}),Y&&e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",Y.name," (",(Y.size/1024).toFixed(1)," KB)"]})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Document Name"}),e.jsx("input",{type:"text",value:$.name,onChange:L=>q("name",L.target.value),placeholder:"Enter document name",className:"input-field"}),e.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Leave blank to use filename"})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Category (Optional)"}),e.jsxs("select",{value:$.category_id,onChange:L=>q("category_id",L.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"Select a category..."}),p.map(L=>e.jsx("option",{value:L.id,children:L.name},L.id))]})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-4",children:[e.jsx("span",{className:"text-red-600",children:"*"})," Required"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{onClick:H,disabled:_,className:"btn-action btn-cancel",children:"Cancel"}),e.jsx("button",{onClick:D,disabled:_||!Y,className:"btn-action btn-primary",children:_?"Uploading...":"Upload"})]})]})}),document.body)]})}function rv({tabName:n}){return e.jsxs("div",{className:"card-main text-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:[n," Coming Soon"]}),e.jsx("p",{className:"text-gray-600",children:"This feature is under development and will be available in a future update."})]})}function cv(){const{id:n}=Ap(),{user:c,loading:d}=Mo(),[o,u]=g.useState(null),[p,m]=g.useState("summary"),[f,b]=g.useState("clients"),[v,j]=g.useState(!0),[x,y]=g.useState(null),C=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),N=async()=>{await yf()},_=async()=>{try{j(!0),y(null),console.log("Fetching client data for ID:",n);const E=await uf(n);console.log("Client data received:",E),u(E)}catch(E){console.error("Error fetching client data:",E),y(E.message||"Failed to load client data")}finally{j(!1)}};g.useEffect(()=>{n&&_()},[n]);const A=()=>{if(v)return e.jsx("div",{className:"card-main p-12 text-center",children:e.jsx("div",{className:"text-gray-700",children:"Loading client data..."})});if(x)return e.jsx("div",{className:"card-main p-12 text-center",children:e.jsxs("div",{className:"text-red-600 font-semibold",children:["Error: ",x]})});switch(p){case"summary":return e.jsx(Tb,{data:o});case"demographics":return e.jsx(Rb,{data:o,onDataUpdate:_});case"insurance":return e.jsx(ev,{data:o});case"encounters":return e.jsx(tv,{data:o});case"clinical":return e.jsx(lv,{data:o});case"documents":return e.jsx(iv,{data:o});case"billing":return e.jsx(nv,{data:o});case"admin":return e.jsx(Ib,{data:o});default:return e.jsx(rv,{tabName:"This Tab"})}};return d||!c?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-mental",children:e.jsxs("div",{className:"backdrop-blur-2xl bg-white/90 rounded-3xl shadow-2xl p-8 border border-white/50",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto"}),e.jsx("p",{className:"text-label mt-4 text-center",children:"Loading..."})]})}):e.jsxs(cf,{user:c,activeNav:f,setActiveNav:b,today:C,onLogout:N,children:[e.jsx(Db,{client:o?.patient}),e.jsx(Ab,{activeTab:p,onTabChange:m}),A()]})}function ov(){const[n,c]=g.useState(null),[d,o]=g.useState("replace_all"),[u,p]=g.useState(!1),[m,f]=g.useState(null),[b,v]=g.useState(null),[j,x]=g.useState(null),y=N=>{const _=N.target.files[0];_&&(c(_),v(null),x(null))},C=async()=>{if(!n){v("Please select a file first");return}p(!0),v(null),f("Uploading file...");try{const N=new FormData;N.append("icd10_file",n),N.append("action",d);const _=await fetch("/custom/api/import_icd10_codes.php",{method:"POST",body:N,credentials:"include"}),A=await _.json();if(!_.ok)throw new Error(A.message||A.error||"Import failed");f(null),x(A),c(null),document.getElementById("file-input").value=""}catch(N){console.error("Import error:",N),v(N.message||"Import failed. Please try again."),f(null)}finally{p(!1)}};return e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:" ICD-10 Code Import"}),e.jsx("p",{className:"text-gray-600",children:"Import ICD-10-CM diagnosis codes from CMS (Centers for Medicare & Medicaid Services)"})]}),e.jsxs("div",{className:"card-main mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:" Instructions"}),e.jsxs("div",{className:"card-inner space-y-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"1. Download ICD-10-CM File"}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["Visit: ",e.jsx("a",{href:"https://www.cms.gov/medicare/coding-billing/icd-10-codes",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"https://www.cms.gov/medicare/coding-billing/icd-10-codes"})]}),e.jsx("p",{className:"text-gray-600",children:"Download the current year's ICD-10-CM Code Descriptions (tab-delimited text file)"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"2. Select Import Action"}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("strong",{children:"Replace All:"})," Deletes existing codes and imports fresh (recommended for annual updates)",e.jsx("br",{}),e.jsx("strong",{children:"Update Only:"})," Updates existing codes and adds new ones (preserves custom codes)"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"3. Upload File"}),e.jsx("p",{className:"text-gray-600",children:'Select the downloaded file and click "Import Codes". This may take 1-2 minutes to process ~72,000 codes.'})]})]})]}),e.jsxs("div",{className:"card-main mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Import Settings"}),e.jsxs("div",{className:"card-inner space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Import Action"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 border-2 border-gray-300 rounded-lg cursor-pointer hover:bg-blue-50 hover:border-blue-300 transition-colors",children:[e.jsx("input",{type:"radio",name:"action",value:"replace_all",checked:d==="replace_all",onChange:N=>o(N.target.value),disabled:u,className:"w-4 h-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Replace All Codes"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Deletes all existing ICD-10 codes and imports fresh (recommended)"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 border-2 border-gray-300 rounded-lg cursor-pointer hover:bg-blue-50 hover:border-blue-300 transition-colors",children:[e.jsx("input",{type:"radio",name:"action",value:"update_only",checked:d==="update_only",onChange:N=>o(N.target.value),disabled:u,className:"w-4 h-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Update Only"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Updates existing codes and adds new ones (preserves custom codes)"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(se,{children:"Select ICD-10-CM File"}),e.jsx("input",{id:"file-input",type:"file",accept:".txt,.csv,.tsv",onChange:y,disabled:u,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm disabled:bg-gray-100 disabled:cursor-not-allowed"}),n&&e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",e.jsx("span",{className:"font-semibold",children:n.name})," (",(n.size/1024/1024).toFixed(2)," MB)"]})]}),e.jsx("button",{onClick:C,disabled:!n||u,className:"w-full px-6 py-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-blue-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all shadow-lg text-lg",children:u?e.jsxs("span",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"}),"Importing Codes..."]}):" Import ICD-10 Codes"})]})]}),m&&e.jsx("div",{className:"card-main mb-6 bg-blue-50 border-blue-300",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-blue-600 border-t-transparent rounded-full"}),e.jsx("span",{className:"text-blue-900 font-semibold",children:m})]})}),b&&e.jsx("div",{className:"card-main mb-6 bg-red-50 border-red-300",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-900 mb-1",children:"Import Failed"}),e.jsx("p",{className:"text-red-800",children:b})]})]})}),j&&e.jsxs("div",{className:"card-main bg-green-50 border-green-300",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("span",{className:"text-3xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-green-900 mb-1",children:"Import Successful!"}),e.jsx("p",{className:"text-green-800",children:j.message})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-2xl font-bold text-green-700",children:j.imported.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"Imported"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:j.total_active.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Active"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:j.skipped.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"Skipped"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-2xl font-bold text-red-700",children:j.errors.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"Errors"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-white rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:" Next Steps:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-700 space-y-1",children:[e.jsx("li",{children:"ICD-10 codes are now available for diagnosis notes"}),e.jsx("li",{children:"Test by creating a diagnosis note and searching for codes"}),e.jsx("li",{children:"Codes update annually on October 1st - re-import then"})]})]})]}),e.jsx("div",{className:"card-main bg-yellow-50 border-yellow-300 mt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:"Important Notes"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-yellow-800 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"File Size:"})," ICD-10 files are typically 10-15 MB with ~72,000 codes"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Import Time:"})," Expect 1-2 minutes to process all codes"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Backup:"}),' If using "Replace All", existing custom codes will be deleted']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Annual Updates:"})," ICD-10 codes are updated every October 1st"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Admin Only:"})," This function requires admin privileges"]})]})]})]})})]})}function dv(){return e.jsx(g0,{children:e.jsxs(Qp,{children:[e.jsx(pl,{path:"/",element:e.jsx(E0,{})}),e.jsx(pl,{path:"/dashboard",element:e.jsx(kb,{})}),e.jsx(pl,{path:"/clients/:id",element:e.jsx(cv,{})}),e.jsx(pl,{path:"/admin/icd10-import",element:e.jsx(ov,{})}),e.jsx(pl,{path:"*",element:e.jsx(Xp,{to:"/",replace:!0})})]})})}Vg.createRoot(document.getElementById("root")).render(e.jsx(dv,{}));
