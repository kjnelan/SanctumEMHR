import{r as u,j as t,z as xe,P as pe,B as be,C as ye,g as ve}from"./index-BneZRaVW.js";function fe({currentDate:h,onDateClick:N}){const[c,f]=u.useState(new Date(h)),j=o=>{const g=o.getFullYear(),x=o.getMonth();return new Date(g,x+1,0).getDate()},W=o=>{const g=o.getFullYear(),x=o.getMonth();return new Date(g,x,1).getDay()},D=()=>{const o=j(c),g=W(c),x=[];for(let p=0;p<g;p++)x.push(null);for(let p=1;p<=o;p++)x.push(p);return x},O=()=>{const o=new Date(c);o.setMonth(o.getMonth()-1),f(o)},y=()=>{const o=new Date(c);o.setMonth(o.getMonth()+1),f(o)},I=o=>{if(!o)return;const g=new Date(c.getFullYear(),c.getMonth(),o);N(g)},S=o=>{if(!o)return!1;const g=new Date;return o===g.getDate()&&c.getMonth()===g.getMonth()&&c.getFullYear()===g.getFullYear()},L=o=>{if(!o)return!1;const g=new Date(c.getFullYear(),c.getMonth(),o),x=k=>{const C=new Date(k),$=C.getDay(),E=C.getDate()-$;return new Date(C.setDate(E))},p=x(g),U=x(h);return p.toDateString()===U.toDateString()},P=D(),F=["S","M","T","W","T","F","S"];return t.jsxs("div",{className:"select-none",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("button",{onClick:O,className:"p-1 hover:bg-gray-100 rounded transition-colors","aria-label":"Previous month",children:t.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:c.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),t.jsx("button",{onClick:y,className:"p-1 hover:bg-gray-100 rounded transition-colors","aria-label":"Next month",children:t.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),t.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[F.map((o,g)=>t.jsx("div",{className:"text-center text-xs font-medium text-gray-500 py-1",children:o},g)),P.map((o,g)=>{const x=S(o),p=L(o);return t.jsx("button",{onClick:()=>I(o),disabled:!o,className:`
                aspect-square flex items-center justify-center text-sm rounded-lg
                transition-colors
                ${o?"":"invisible"}
                ${x?"bg-blue-600 text-white font-bold hover:bg-blue-700":""}
                ${!x&&p?"bg-blue-100 text-blue-900 font-semibold":""}
                ${!x&&!p?"hover:bg-gray-100 text-gray-700":""}
              `,children:o},g)})]}),t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 text-xs text-gray-600 space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded"}),t.jsx("span",{children:"Today"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 bg-blue-100 border border-blue-300 rounded"}),t.jsx("span",{children:"Selected week"})]})]})]})}function we(){const[h,N]=u.useState("week"),[c,f]=u.useState(new Date),[j,W]=u.useState([]),[D,O]=u.useState([]),[y,I]=u.useState("all"),[S,L]=u.useState(!0),[P,F]=u.useState(null),[o,g]=u.useState({startHour:8,endHour:18,interval:15,viewType:"week"}),[x,p]=u.useState(!1),[U,k]=u.useState(null),[C,$]=u.useState(null),[E,R]=u.useState(null),[X,Y]=u.useState(null),M=(()=>{const e=[],s=o.interval,r=60/s;for(let a=o.startHour;a<o.endHour;a++)for(let n=0;n<r;n++){const i=n*s;e.push({hour:a,minutes:i})}return e})();u.useEffect(()=>{(async()=>{try{const s=await ye();console.log("Calendar settings response:",s),s.settings?(console.log("Setting calendar hours to:",s.settings),g(s.settings),s.settings.viewType&&N(s.settings.viewType)):console.log("No settings in response, using defaults")}catch(s){console.error("Failed to load calendar settings:",s)}})()},[]),u.useEffect(()=>{(async()=>{try{const s=await ve();O(s.providers||[])}catch(s){console.error("Failed to load providers:",s)}})()},[]),u.useEffect(()=>{V()},[c,y,h]);const V=async()=>{L(!0),F(null);try{const{startDate:e,endDate:s}=Z();console.log("Loading appointments:",{startDate:e,endDate:s,currentDate:c,view:h});const r=await xe(e,s,y);console.log("Appointments loaded:",r.appointments),W(r.appointments||[])}catch(e){console.error("Failed to load appointments:",e),F("Failed to load appointments")}finally{L(!1)}},Z=()=>{const e=new Date(c),s=new Date(c);if(h==="week"){const r=e.getDay(),a=e.getDate()-r;e.setDate(a),e.setHours(0,0,0,0),s.setDate(e.getDate()+6),s.setHours(23,59,59,999)}else h==="day"?(e.setHours(0,0,0,0),s.setHours(23,59,59,999)):h==="month"&&(e.setDate(1),e.setHours(0,0,0,0),s.setMonth(s.getMonth()+1),s.setDate(0),s.setHours(23,59,59,999));return{startDate:e.toISOString().split("T")[0],endDate:s.toISOString().split("T")[0]}},T=()=>{const e=new Date(c),s=e.getDay(),r=e.getDate()-s;e.setDate(r),e.setHours(0,0,0,0);const a=Array.from({length:7},(n,i)=>new Date(e.getTime()+i*24*60*60*1e3));return console.log("Week days:",a.map(n=>n.toISOString().split("T")[0])),a},ee=()=>{const e=new Date(c);h==="week"?e.setDate(e.getDate()-7):h==="day"?e.setDate(e.getDate()-1):h==="month"&&e.setMonth(e.getMonth()-1),f(e)},te=()=>{const e=new Date(c);h==="week"?e.setDate(e.getDate()+7):h==="day"?e.setDate(e.getDate()+1):h==="month"&&e.setMonth(e.getMonth()+1),f(e)},se=()=>{f(new Date)},q=e=>{if(!e)return"";const[s,r]=e.split(":"),a=parseInt(s),n=a>=12?"PM":"AM";return`${a===0?12:a>12?a-12:a}:${r} ${n}`},J=e=>{if(!e)return"";const s=e.trim().split(" ");if(s.length===1)return s[0];const r=s[0],a=s[s.length-1];return`${r} ${a.charAt(0)}.`},B=e=>{if(!e.providerFirstName)return e.providerName||"";const s=e.providerFirstName,r=e.providerLastName||"";return r?`${s} ${r.charAt(0)}.`:s},_=e=>e.clientName?`${J(e.clientName)} / ${B(e)}`:B(e),re=e=>{const s=q(e.startTime).replace(" ","");return e.clientName?`${s} ${J(e.clientName)}`:`${s} ${e.categoryName||B(e)}`},z=e=>e==="cancelled"||e==="no_show",w=e=>e.categoryType!=="client",A=e=>e.categoryColor||"#9CA3AF",ne=e=>{const s=e.replace("#",""),r=parseInt(s.substr(0,2),16),a=parseInt(s.substr(2,2),16),n=parseInt(s.substr(4,2),16),i=Math.round(r*.35+255*.65),d=Math.round(a*.35+255*.65),m=Math.round(n*.35+255*.65);return`rgb(${i}, ${d}, ${m})`},oe=e=>{const s=e.replace("#",""),r=parseInt(s.substr(0,2),16),a=parseInt(s.substr(2,2),16),n=parseInt(s.substr(4,2),16),i=Math.round(r*.5+255*.5),d=Math.round(a*.5+255*.5),m=Math.round(n*.5+255*.5);return`rgb(${i}, ${d}, ${m})`},H=e=>{if(z(e.status))return{isCancelled:!0,textClass:"line-through text-gray-500",secondaryTextClass:"text-gray-400"};const r=e.categoryType==="client"?e.providerColor||"#3B82F6":e.categoryColor||"#9CA3AF",a=ne(r);return{isCancelled:!1,borderColor:oe(r),textClass:"text-gray-800",secondaryTextClass:"text-gray-600",gradient:`linear-gradient(135deg, ${a} 0%, ${a.replace("rgb","rgba").replace(")",", 0.85)")} 100%)`}},ae=(e,s,r)=>{const a=e.toISOString().split("T")[0];return j.filter(n=>{if(n.eventDate!==a)return!1;const[i,d]=n.startTime.split(":"),m=parseInt(i),l=parseInt(d);return m===s&&l===r})},ie=e=>e.duration?Math.ceil(e.duration/o.interval):1,le=e=>{const[s,r]=e.startTime.split(":").map(Number),a=s*60+r,n=o.startHour*60,d=(a-n)/o.interval,m=60,l=d*m,ue=(e.duration||0)/o.interval*m;return{top:l,height:ue}},ce=e=>{const s=e.toISOString().split("T")[0];return j.filter(r=>r.eventDate===s)},de=e=>{const s=e.toISOString().split("T")[0];return j.filter(r=>r.eventDate===s)},me=()=>{const e=c.getFullYear(),s=c.getMonth(),r=new Date(e,s,1),a=r.getDay(),n=new Date(r);return n.setDate(n.getDate()-a),n.setHours(0,0,0,0),Array.from({length:42},(d,m)=>new Date(n.getTime()+m*24*60*60*1e3))},he=()=>{if(h==="week"){const e=T(),s=e[0],r=e[6];return`${s.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${r.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}else return h==="day"?c.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):c.toLocaleDateString("en-US",{month:"long",year:"numeric"})},K=(e=null,s=null,r=null)=>{Y(null),k(e||c.toISOString().split("T")[0]),$(s),R(r||(y!=="all"?y:null)),p(!0)},v=(e,s)=>{s.stopPropagation(),Y(e),k(null),$(null),R(null),p(!0)},Q=(e,s,r)=>{const a=e.toISOString().split("T")[0],n=`${s.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`;K(a,n,y!=="all"?y:null)},ge=e=>{console.log("New appointment created:",e),V()};return t.jsxs("div",{className:"w-full",children:[t.jsxs("div",{className:"glass-card p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Calendar"}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:()=>K(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Appointment"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>N("day"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${h==="day"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Day"}),t.jsx("button",{onClick:()=>N("week"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${h==="week"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Week"}),t.jsx("button",{onClick:()=>N("month"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${h==="month"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Month"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:ee,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsx("button",{onClick:te,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),t.jsx(pe,{onClick:se,children:"Today"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:he()})]})]}),P&&t.jsx("div",{className:"glass-card-sm bg-red-100/60 border-red-300/50 text-red-700 px-4 py-3 mb-6",children:P}),t.jsxs("div",{className:"flex gap-6",children:[t.jsxs("div",{className:"w-80 flex-shrink-0 space-y-6",children:[t.jsx("div",{className:"glass-card p-4",children:t.jsx(fe,{currentDate:c,onDateClick:f})}),t.jsxs("div",{className:"glass-card p-4",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Providers"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("button",{onClick:()=>I("all"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors ${y==="all"?"bg-blue-100 text-blue-900 font-medium":"hover:bg-gray-100 text-gray-700"}`,children:"All Providers"}),D.map(e=>t.jsx("button",{onClick:()=>I(e.value),className:`w-full text-left px-3 py-2 rounded-lg transition-colors ${y===e.value?"bg-blue-100 text-blue-900 font-medium":"hover:bg-gray-100 text-gray-700"}`,children:e.label},e.value))]})]})]}),t.jsxs("div",{className:"flex-1",children:[S?t.jsx("div",{className:"glass-card p-12 text-center",children:t.jsx("div",{className:"text-gray-700",children:"Loading appointments..."})}):h==="week"&&(y==="all"?t.jsxs("div",{className:"glass-card overflow-hidden",children:[t.jsxs("div",{className:"grid grid-cols-[160px_repeat(7,1fr)] border-b border-white/30",children:[t.jsx("div",{className:"p-4 bg-white/20 border-r border-white/30 font-semibold text-gray-700",children:"Provider"}),T().map((e,s)=>{const r=e.toDateString()===new Date().toDateString();return t.jsxs("div",{className:`p-4 border-r border-white/30 text-center ${r?"bg-blue-100/40":"bg-white/20"}`,children:[t.jsx("div",{className:"text-sm text-gray-600",children:e.toLocaleDateString("en-US",{weekday:"short"})}),t.jsx("div",{className:`text-lg font-semibold ${r?"text-blue-600":"text-gray-900"}`,children:e.getDate()})]},s)})]}),t.jsx("div",{children:D.map(e=>{const s=j.filter(r=>String(r.providerId)===String(e.value));return t.jsxs("div",{className:"grid grid-cols-[160px_repeat(7,1fr)] border-b border-white/30 min-h-[80px]",children:[t.jsx("div",{className:"p-3 bg-white/10 border-r border-white/30 flex items-start",style:{borderLeft:`4px solid ${s[0]?.providerColor||"#3B82F6"}`},children:t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:e.label}),t.jsxs("div",{className:"text-xs text-gray-500",children:[s.filter(r=>!w(r)).length," appts"]})]})}),T().map((r,a)=>{const n=r.toISOString().split("T")[0],i=s.filter(l=>l.eventDate===n&&w(l)),d=s.filter(l=>l.eventDate===n&&!w(l)).sort((l,b)=>l.startTime.localeCompare(b.startTime)),m=r.toDateString()===new Date().toDateString();return t.jsxs("div",{onClick:()=>{k(n),$("09:00"),R(e.value),Y(null),p(!0)},className:`p-2 border-r border-white/30 hover:bg-white/10 cursor-pointer transition-colors relative ${m?"bg-blue-50/30":""}`,children:[i.length>0&&t.jsx("div",{className:"availability-block absolute inset-0 pointer-events-none z-0",style:{"--block-color":A(i[0])},title:i.map(l=>l.categoryName).join(", ")}),t.jsxs("div",{className:"space-y-1 relative z-10",children:[i.map(l=>t.jsxs("div",{onClick:b=>{b.stopPropagation(),v(l,b)},className:"availability-block-label px-2 py-1 rounded text-xs text-gray-700",style:{"--block-color":A(l)},children:[t.jsx("span",{className:"font-medium",children:q(l.startTime).replace(" ","")})," ",l.categoryName]},l.id)),d.slice(0,4).map(l=>{const b=H(l);return t.jsx("div",{onClick:G=>{G.stopPropagation(),v(l,G)},className:`px-2 py-1.5 rounded-lg text-sm border cursor-pointer ${b.isCancelled?"glass-appointment-cancelled border-dashed":"glass-appointment"}`,style:b.isCancelled?void 0:{background:b.gradient,borderColor:b.borderColor},title:`${l.clientName||l.categoryName} - ${l.categoryName}`,children:t.jsx("div",{className:`font-semibold truncate ${b.textClass}`,children:re(l)})},l.id)}),d.length>4&&t.jsxs("div",{className:"text-xs text-gray-500 pl-1",children:["+",d.length-4," more"]})]})]},a)})]},e.value)})})]}):t.jsxs("div",{className:"glass-card overflow-hidden",children:[t.jsxs("div",{className:"flex border-b border-white/30",children:[t.jsx("div",{className:"w-20 flex-shrink-0 p-4 bg-white/20 border-r border-white/30 font-semibold text-gray-700",children:"Time"}),t.jsx("div",{className:"flex-1 flex",children:T().map((e,s)=>{const r=e.toDateString()===new Date().toDateString();return t.jsxs("div",{className:`flex-1 p-4 border-r border-white/30 text-center ${r?"bg-blue-100/40":"bg-white/20"}`,children:[t.jsx("div",{className:"text-sm text-gray-600",children:e.toLocaleDateString("en-US",{weekday:"short"})}),t.jsx("div",{className:`text-lg font-semibold ${r?"text-blue-600":"text-gray-900"}`,children:e.getDate()})]},s)})})]}),t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"w-20 flex-shrink-0 border-r border-white/30 bg-white/20",children:M.map(e=>t.jsxs("div",{className:"h-[60px] p-2 border-b border-white/30 text-xs text-gray-700 font-medium",children:[e.hour===0?"12":e.hour<12?e.hour:e.hour===12?"12":e.hour-12,":",e.minutes.toString().padStart(2,"0")," ",e.hour<12?"AM":"PM"]},`time-${e.hour}-${e.minutes}`))}),t.jsx("div",{className:"flex-1 flex",children:T().map((e,s)=>{const r=ce(e),a=M.length*60;return t.jsxs("div",{className:"flex-1 border-r border-white/30 relative",style:{height:`${a}px`},children:[M.map(n=>t.jsx("div",{onClick:()=>Q(e,n.hour,n.minutes),className:"absolute w-full h-[60px] border-b border-white/30 hover:bg-white/10 cursor-pointer transition-colors",style:{top:`${M.findIndex(i=>i.hour===n.hour&&i.minutes===n.minutes)*60}px`}},`slot-${n.hour}-${n.minutes}`)),r.map(n=>{const{top:i,height:d}=le(n);if(w(n))return t.jsx("div",{onClick:b=>v(n,b),className:"availability-block absolute left-0 right-0 z-5",style:{"--block-color":A(n),top:`${i}px`,height:`${d}px`},title:`${n.categoryName}${n.comments?": "+n.comments:""}`,children:t.jsxs("div",{className:"p-2",children:[t.jsx("div",{className:"font-semibold text-gray-800 text-sm",children:B(n)}),t.jsx("div",{className:"text-gray-600 text-xs",children:n.categoryName})]})},n.id);const l=H(n);return t.jsxs("div",{onClick:b=>v(n,b),className:`absolute left-1 right-1 px-3 py-2 rounded-xl text-sm border cursor-pointer z-10 overflow-hidden ${l.isCancelled?"glass-appointment-cancelled border-dashed":"glass-appointment"}`,style:l.isCancelled?{top:`${i}px`,height:`${d}px`}:{top:`${i}px`,height:`${d}px`,background:l.gradient,borderColor:l.borderColor},children:[t.jsx("div",{className:`font-semibold ${l.textClass}`,children:_(n)}),d>40&&t.jsx("div",{className:`truncate ${l.secondaryTextClass}`,children:n.categoryName}),d>60&&n.room&&t.jsxs("div",{className:`truncate text-xs mt-1 ${l.secondaryTextClass} ${l.isCancelled?"line-through":""}`,children:["Room: ",n.room]})]},n.id)})]},s)})})]})]})),!S&&h==="day"&&t.jsxs("div",{className:"glass-card overflow-hidden",children:[t.jsxs("div",{className:"grid grid-cols-[150px_1fr] border-b border-white/30",children:[t.jsx("div",{className:"p-4 bg-white/20 border-r border-white/30 font-semibold text-gray-700",children:"Time"}),(()=>{const e=c.toDateString()===new Date().toDateString();return t.jsxs("div",{className:`p-4 border-r border-white/30 text-center ${e?"bg-blue-100/40":"bg-white/20"}`,children:[t.jsx("div",{className:"text-sm text-gray-600",children:c.toLocaleDateString("en-US",{weekday:"short"})}),t.jsx("div",{className:`text-lg font-semibold ${e?"text-blue-600":"text-gray-900"}`,children:c.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})})()]}),M.map(e=>t.jsxs("div",{className:"grid grid-cols-[150px_1fr] border-b border-white/30",children:[t.jsxs("div",{className:"p-3 border-r border-white/30 bg-white/20 text-sm text-gray-700 font-medium",children:[e.hour===0?"12":e.hour<12?e.hour:e.hour===12?"12":e.hour-12,":",e.minutes.toString().padStart(2,"0")," ",e.hour<12?"AM":"PM"]}),(()=>{const s=ae(c,e.hour,e.minutes);return t.jsx("div",{onClick:()=>Q(c,e.hour,e.minutes),className:"p-2 border-r border-white/30 hover:bg-white/10 cursor-pointer transition-colors min-h-[60px]",children:s.map(r=>{const a=w(r);z(r.status);const i=ie(r)*60-8;if(a)return t.jsxs("div",{onClick:m=>v(r,m),className:"availability-block-card mb-1 px-3 py-2 rounded-xl text-sm",style:{"--block-color":A(r),height:`${i}px`},children:[t.jsxs("div",{className:"font-semibold text-gray-800 flex items-center gap-1",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),r.categoryName]}),r.comments&&t.jsx("div",{className:"text-gray-600 truncate text-xs italic",children:r.comments})]},r.id);const d=H(r);return t.jsxs("div",{onClick:m=>v(r,m),className:`mb-1 px-3 py-2 rounded-xl text-sm border cursor-pointer ${d.isCancelled?"glass-appointment-cancelled border-dashed":"glass-appointment"}`,style:d.isCancelled?{height:`${i}px`}:{height:`${i}px`,background:d.gradient,borderColor:d.borderColor},children:[t.jsx("div",{className:`font-semibold ${d.textClass}`,children:_(r)}),t.jsx("div",{className:`truncate ${d.secondaryTextClass}`,children:r.categoryName}),r.room&&t.jsxs("div",{className:`truncate text-xs ${d.secondaryTextClass} ${d.isCancelled?"line-through":""}`,children:["Room: ",r.room]})]},r.id)})})})()]},`${e.hour}-${e.minutes}`))]}),!S&&h==="month"&&t.jsxs("div",{className:"glass-card overflow-hidden",children:[t.jsx("div",{className:"grid grid-cols-7 border-b border-white/30",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>t.jsx("div",{className:"p-4 bg-white/20 border-r border-white/30 text-center font-semibold text-gray-700",children:e},e))}),t.jsx("div",{className:"grid grid-cols-7",children:me().map((e,s)=>{const r=e.toDateString()===new Date().toDateString(),a=e.getMonth()===c.getMonth(),n=de(e);return t.jsxs("div",{className:`min-h-[120px] border-r border-b border-white/30 p-2 hover:bg-white/10 cursor-pointer transition-colors ${a?"":"bg-white/5"}`,children:[t.jsxs("div",{className:"flex justify-between items-start mb-2",children:[t.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full text-sm font-semibold ${r?"bg-blue-600 text-white":a?"text-gray-900":"text-gray-400"}`,children:e.getDate()}),n.length>0&&t.jsx("span",{className:"text-xs bg-blue-100 text-blue-900 px-2 py-0.5 rounded-full font-medium",children:n.length})]}),t.jsxs("div",{className:"space-y-1.5",children:[n.slice(0,3).map(i=>{const d=w(i);if(z(i.status),d)return t.jsx("div",{onClick:l=>v(i,l),className:"availability-block-card px-2 py-1.5 rounded-lg text-xs truncate",style:{"--block-color":A(i)},children:t.jsxs("div",{className:"font-semibold text-gray-800 flex items-center gap-1",children:[t.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),t.jsx("span",{className:"truncate",children:i.categoryName})]})},i.id);const m=H(i);return t.jsxs("div",{onClick:l=>v(i,l),className:`px-2 py-1.5 rounded-lg text-xs border cursor-pointer ${m.isCancelled?"glass-appointment-cancelled border-dashed":"glass-appointment"}`,style:m.isCancelled?void 0:{background:m.gradient,borderColor:m.borderColor},children:[t.jsx("div",{className:`font-semibold truncate ${m.textClass}`,children:_(i)}),t.jsx("div",{className:`truncate text-[11px] ${m.secondaryTextClass} ${m.isCancelled?"line-through":""}`,children:i.categoryName})]},i.id)}),n.length>3&&t.jsxs("div",{className:"text-xs text-gray-600 pl-2",children:["+",n.length-3," more"]})]})]},s)})})]})]})]}),t.jsx(be,{isOpen:x,onClose:()=>p(!1),onSave:ge,initialDate:U,initialTime:C,providerId:E,providers:D,appointment:X})]})}export{we as default};
