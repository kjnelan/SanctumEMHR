import{r,j as e,F as f}from"./index-M_KA-mT_.js";function v(){const[l,m]=r.useState(null),[n,x]=r.useState("replace_all"),[a,h]=r.useState(!1),[g,c]=r.useState(null),[p,i]=r.useState(null),[t,b]=r.useState(null),u=s=>{const d=s.target.files[0];d&&(m(d),i(null),b(null))},j=async()=>{if(!l){i("Please select a file first");return}h(!0),i(null),c("Uploading file...");try{const s=new FormData;s.append("icd10_file",l),s.append("action",n);const d=await fetch("/custom/api/import_icd10_codes.php",{method:"POST",body:s,credentials:"include"}),o=await d.json();if(!d.ok)throw new Error(o.message||o.error||"Import failed");c(null),b(o),m(null),document.getElementById("file-input").value=""}catch(s){console.error("Import error:",s),i(s.message||"Import failed. Please try again."),c(null)}finally{h(!1)}};return e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"üè• ICD-10 Code Import"}),e.jsx("p",{className:"text-gray-600",children:"Import ICD-10-CM diagnosis codes from CMS (Centers for Medicare & Medicaid Services)"})]}),e.jsxs("div",{className:"card-main mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"üìã Instructions"}),e.jsxs("div",{className:"card-inner space-y-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"1. Download ICD-10-CM File"}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["Visit: ",e.jsx("a",{href:"https://www.cms.gov/medicare/coding-billing/icd-10-codes",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"https://www.cms.gov/medicare/coding-billing/icd-10-codes"})]}),e.jsx("p",{className:"text-gray-600",children:"Download the current year's ICD-10-CM Code Descriptions (tab-delimited text file)"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"2. Select Import Action"}),e.jsxs("p",{className:"text-gray-600",children:[e.jsx("strong",{children:"Replace All:"})," Deletes existing codes and imports fresh (recommended for annual updates)",e.jsx("br",{}),e.jsx("strong",{children:"Update Only:"})," Updates existing codes and adds new ones (preserves custom codes)"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"3. Upload File"}),e.jsx("p",{className:"text-gray-600",children:'Select the downloaded file and click "Import Codes". This may take 1-2 minutes to process ~72,000 codes.'})]})]})]}),e.jsxs("div",{className:"card-main mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Import Settings"}),e.jsxs("div",{className:"card-inner space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Import Action"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 border-2 border-gray-300 rounded-lg cursor-pointer hover:bg-blue-50 hover:border-blue-300 transition-colors",children:[e.jsx("input",{type:"radio",name:"action",value:"replace_all",checked:n==="replace_all",onChange:s=>x(s.target.value),disabled:a,className:"w-4 h-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Replace All Codes"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Deletes all existing ICD-10 codes and imports fresh (recommended)"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 border-2 border-gray-300 rounded-lg cursor-pointer hover:bg-blue-50 hover:border-blue-300 transition-colors",children:[e.jsx("input",{type:"radio",name:"action",value:"update_only",checked:n==="update_only",onChange:s=>x(s.target.value),disabled:a,className:"w-4 h-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Update Only"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Updates existing codes and adds new ones (preserves custom codes)"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(f,{children:"Select ICD-10-CM File"}),e.jsx("input",{id:"file-input",type:"file",accept:".txt,.csv,.tsv",onChange:u,disabled:a,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm disabled:bg-gray-100 disabled:cursor-not-allowed"}),l&&e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",e.jsx("span",{className:"font-semibold",children:l.name})," (",(l.size/1024/1024).toFixed(2)," MB)"]})]}),e.jsx("button",{onClick:j,disabled:!l||a,className:"w-full px-6 py-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-blue-800 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all shadow-lg text-lg",children:a?e.jsxs("span",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"}),"Importing Codes..."]}):"‚¨ÜÔ∏è Import ICD-10 Codes"})]})]}),g&&e.jsx("div",{className:"card-main mb-6 bg-blue-50 border-blue-300",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-blue-600 border-t-transparent rounded-full"}),e.jsx("span",{className:"text-blue-900 font-semibold",children:g})]})}),p&&e.jsx("div",{className:"card-main mb-6 bg-red-50 border-red-300",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"‚ùå"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-900 mb-1",children:"Import Failed"}),e.jsx("p",{className:"text-red-800",children:p})]})]})}),t&&e.jsxs("div",{className:"card-main bg-green-50 border-green-300",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("span",{className:"text-3xl",children:"‚úÖ"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-green-900 mb-1",children:"Import Successful!"}),e.jsx("p",{className:"text-green-800",children:t.message})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-2xl font-bold text-green-700",children:t.imported.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"Imported"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:t.total_active.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Active"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:t.skipped.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"Skipped"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[e.jsx("div",{className:"text-2xl font-bold text-red-700",children:t.errors.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"Errors"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-white rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"‚úÖ Next Steps:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-700 space-y-1",children:[e.jsx("li",{children:"ICD-10 codes are now available for diagnosis notes"}),e.jsx("li",{children:"Test by creating a diagnosis note and searching for codes"}),e.jsx("li",{children:"Codes update annually on October 1st - re-import then"})]})]})]}),e.jsx("div",{className:"card-main bg-yellow-50 border-yellow-300 mt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"‚ö†Ô∏è"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:"Important Notes"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-yellow-800 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"File Size:"})," ICD-10 files are typically 10-15 MB with ~72,000 codes"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Import Time:"})," Expect 1-2 minutes to process all codes"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Backup:"}),' If using "Replace All", existing custom codes will be deleted']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Annual Updates:"})," ICD-10 codes are updated every October 1st"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Admin Only:"})," This function requires admin privileges"]})]})]})]})})]})}export{v as default};
